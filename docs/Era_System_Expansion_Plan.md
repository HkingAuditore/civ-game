# 时代系统扩展实施方案 (优化版)

> [!IMPORTANT]
> **设计原则变更**：
> 1.  **去伪存真**：严格剔除当前游戏底层不支持的机制（如：外交距离、单位移动速度、环保值、舆论值、文化科研混合产出）。只使用现有的、经过验证的数值属性（如：稳定度、税收效率、工业/科研加成）。
> 2.  **拒绝长链**：不引入复杂的中间品产业链（如晶圆->芯片->元件）。后期建筑应通过消耗大量基础资源（煤/铁/金）和流量资源（电/算力），直接产出高额的终端数值或成品。
> 3.  **先迁移后填充**：优先解决因时代 ID 变更导致的数据错位问题。

---

## 1. 时代架构重构

目标是将时代的粒度细化，同时修正原有的命名错位。

| ID | 旧名称 | **新名称** | 核心特征 (Keywords) | 关键资源 |
| :--- | :--- | :--- | :--- | :--- |
| 0-5 | (保持不变) | (保持不变) | - | - |
| 6 | 工业时代 | **蒸汽时代 (Steam)** | 煤炭、铁路、高污染 | 煤炭 |
| 7 | 信息时代 | **电气时代 (Electric)** | 电力、流水线、大众消费 | **电力 (Flow)**、石油 |
| 8 | (新增) | **原子时代 (Atomic)** | 核能、冷战背景、极端效率 | 铀矿 |
| 9 | (新增) | **信息时代 (Information)** | 互联网、半导体、全球化 | **算力 (Flow)** |
| 10 | (新增) | **智能时代 (Intelligent)** | AI、全自动化、无人化 | (无新资源，极致消耗) |
| 11 | (新增) | **未来时代 (Future)** | 可控聚变、后稀缺 | - |

---

## 2. 核心修改内容

### 2.1 流量资源系统 (Flow Resources)
*保留原方案的流量资源设计，但简化其应用场景。*

*   **定义**：即产即销，不可存储。产出 < 消耗时，触发强力 Debuff。
*   **类型**：
    1.  **电力 (Electricity)** (Epoch 7+): 工业倍增器。短缺导致工厂停工（大幅降低 `industryBonus`）。
    2.  **算力 (Computing)** (Epoch 9+): 科研倍增器。短缺导致科研停滞（大幅降低 `scienceBonus`）。

### 2.2 建筑设计的“短链化”调整

所有新建筑必须遵循 **Input (基础资源/钱) -> Output (最终数值)** 的逻辑。

#### Epoch 7: 电气时代
*   **火力发电厂**: 消耗 `Coal` -> 产出 `Electricity` + `IndustryBonus` (小幅)。
*   **电气工厂**: 消耗 `Electricity` + `Iron` -> 产出大量 `Tools` / `Steel` (替代旧工厂，效率极高)。
*   **百货公司**: 消耗 `Fine Clothes` / `Furniture` -> 产出大量 `Silver` (银币) + `Stability` (稳定度)。*(消耗过剩工业品换取稳定)*

#### Epoch 8: 原子时代
*   **核电站**: 消耗 `Uranium` (新) -> 产出巨量 `Electricity`。
*   **国家实验室**: 消耗 `Silver` (巨额经费) + `Electricity` -> 产出大量 `Science`。

#### Epoch 9: 信息时代
*   **数据中心**: 消耗 `Electricity` -> 产出 `Computing` + `TaxEfficiency` (税收效率，模拟信息化管理)。
*   **半导体工厂**: 消耗 `Gold` (金导电) + `Electricity` -> 产出 `Computing`。*(简化掉硅片中间环节)*

#### Epoch 10: 智能时代
*   **黑灯工厂 (Lights-out Factory)**: 
    *   岗位: 仅需极少 `Engineer` (无需工人)。
    *   消耗: 巨量 `Computing` + `Electricity`。
    *   产出: 巨量 `Consumer Goods` (通用消费品)。
    *   *目的: 解决后期人口不足的问题，实现全自动化生产。*

### 2.3 政治立场的迁移与重构

必须修正因 ID 变动导致的“穿越”BUG。

*   **迁移任务**:
    *   原 Epoch 7 (信息) 的立场（如：`数字民主`, `技术官僚`, `生态社会主义`） -> **移动到 Epoch 9**。
*   **填补任务 (Epoch 7/8)**:
    *   新增 **财阀统治 (Plutocracy)** (Epoch 7): 极度偏向资本家，大幅提升工业，降低稳定度。
    *   新增 **福利国家 (Welfare State)** (Epoch 7): 高税收，高福利，提升底层满意度。
    *   新增 **核威慑 (Nuclear Deterrence)** (Epoch 8): 提升军事与合法性。

---

## 3. 实施步骤 (执行清单)

### 阶段一：时代 ID 重构与数据迁移 (Day 1)
> 目标：搭建 12 时代框架，确保现有游戏不报错，无内容错位。

1.  **修改 `src/config/epochs.js`**:
    *   重命名 Epoch 6 为 `Steam`。
    *   重命名 Epoch 7 为 `Electric`，并重置其属性适应新定位。
    *   创建 Epoch 8-11 的空壳配置。
2.  **修改 `src/hooks/cheatCodes.js`**:
    *   更新 `EPOCH_ALIASES`，确保能通过控制台进入新时代。
3.  **修改 `src/config/politicalStances.js`**:
    *   **搜索并替换**: 所有 `unlockEpoch: 7` 的立场 -> 改为 `unlockEpoch: 9`。
    *   确保 Epoch 7-8 暂时使用前个时代的立场，或者添加临时占位。

### 阶段二：资源与基础系统 (Day 2)
1.  **修改 `src/config/gameConstants.js`**:
    *   添加基础资源: `Uranium` (铀矿), `Oil` (石油 - 可选，视复杂度定)。
    *   添加流量资源定义: `Electricity`, `Computing` (标记为 `type: 'flow'`)。
2.  **修改 `src/logic/simulation.js`**:
    *   实现 **流量资源计算逻辑** (`calculateFlowResources`)。
    *   实现 **流量短缺惩罚** (电不够 -> `industryBonus` 修正)。

### 阶段三：填充新内容 (Day 3-4)
1.  **修改 `src/config/technologies.js`**:
    *   填充 Epoch 7-11 的关键科技（内燃机、核能、互联网、AI）。
    *   确保科技效果使用的是**现有属性** (如 `industryBonus`, `taxEfficiency`)。
2.  **修改 `src/config/buildings.js`**:
    *   实现上述“短链化”的新建筑。
    *   确保数值平衡，避免后期数值溢出。

---

## 4. 风险控制
*   **存档兼容性**: 
    *   ID 6 (工业) -> ID 6 (蒸汽):兼容。
    *   ID 7 (信息) -> ID 7 (电气): **不兼容**。玩家处于信息时代的存档载入后会变成电气时代，可能丢失科技。
    *   *对策*: 仅作为开发版本更新，不保证旧存档兼容。
*   **数值膨胀**:
    *   新时代的指数级加成可能导致金钱/科研溢出。
    *   *对策*: 后期科技/建筑的造价也应指数级上升 (由 `cost` 指数控制)。
