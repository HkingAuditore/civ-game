# 科技系统 - 完整机制

> **核心逻辑**: `config/technologies.js`

---

## 1. 科技效果

### 1.1 效果类型

| 效果字段 | 说明 | 示例 |
|---------|-----|------|
| `buildings: { id: 值 }` | 特定建筑产量加成 | `farm: 0.15` = +15% |
| `categories: { cat: 值 }` | 类别加成 | `gather: 0.20` = +20% |
| `incomePercent` | 财政收入加成 | `0.02` = +2% |
| `maxPop` | 人口上限加成 | `0.05` = +5% |
| `militaryBonus` | 军事力量加成 | `0.10` = +10% |
| `researchSpeed` | 科研速度加成 | `0.08` = +8% |
| `unlock: [建筑ids]` | 解锁建筑 | `['sawmill']` |
| `unlockResource: [资源ids]` | 解锁资源 | `['iron']` |

### 1.2 效果叠加

科技效果**加法叠加**到总加成中：

```javascript
// 所有科技对farm的加成叠加
farmBonus = tech1.buildings.farm + tech2.buildings.farm + ...
```

---

## 2. 时代分布

### 2.1 各时代科技数量

| 时代 | epoch | 科技数 |
|-----|-------|--------|
| 石器时代 | 0 | ~15 |
| 青铜时代 | 1 | ~18 |
| 铁器时代 | 2 | ~20 |
| 古典时代 | 3 | ~25 |
| 中世纪 | 4 | ~22 |
| 文艺复兴 | 5 | ~18 |
| 工业时代 | 6 | ~20 |

### 2.2 解锁条件

科技按时代解锁：
```javascript
if (currentEpoch >= tech.epoch):
    可研究该科技
```

---

## 3. 科研机制

### 3.1 研究成本

```javascript
cost = { science: 点数 }
```

部分高级科技需要额外资源：
```javascript
cost = { science: 500, silver: 100 }
```

### 3.2 研究速度

```javascript
effectiveSpeed = baseSpeed × (1 + researchSpeedBonus)
progressPerTick = scienceProduction × effectiveSpeed
```

---

## 4. 重要科技

### 4.1 经济类

| 科技 | 时代 | 效果 |
|-----|-----|-----|
| barter | 0 | 解锁贸易站，收入+2% |
| currency | 1 | 收入+5%，解锁银行 |
| banking | 4 | 收入+8% |

### 4.2 生产类

| 科技 | 时代 | 效果 |
|-----|-----|-----|
| wheel | 0 | gather类+10% |
| iron_working | 2 | 解锁铁，工业+15% |
| steam_power | 6 | 工业+18%，解锁蒸汽建筑 |

### 4.3 军事类

| 科技 | 时代 | 效果 |
|-----|-----|-----|
| bronze_weapons | 1 | 军事+10%，解锁青铜兵种 |
| iron_weapons | 2 | 军事+15%，解锁铁器兵种 |
| gunpowder | 5 | 军事+20%，解锁火器 |

---

## 5. 玩法策略

### 5.1 优先研究

1. **解锁建筑**: 扩展可用建筑
2. **资源解锁**: 获取新资源类型
3. **官员容量**: 增加可用官员槽位

### 5.2 时代过渡

- 进入新时代后优先研究该时代基础科技
- 高级加成科技可延后

### 5.3 科研优化

- 建造科研建筑增加science产出
- 官员researchSpeed效果叠加
- 某些政治立场提供科研加成
