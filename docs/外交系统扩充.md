# å¤–äº¤ç³»ç»Ÿæ·±åº¦æ‰©å±•è®¾è®¡æ–¹æ¡ˆ

## æ¦‚è¿°

åŸºäºå¯¹ç°æœ‰ä»£ç åº“çš„æ·±å…¥ç ”ç©¶ï¼Œæœ¬æ–¹æ¡ˆè®¾è®¡ä¸€å¥—å®Œæ•´çš„å¤–äº¤ç³»ç»Ÿæ‰©å±•ï¼Œæ—¨åœ¨æ˜¾è‘—æå‡æ¸¸æˆçš„Pç¤¾æ„Ÿã€é”®æ”¿æ„Ÿã€ä»£å…¥æ„Ÿã€ç­–ç•¥æ€§å’Œå¯ç©æ€§ã€‚

### ç°æœ‰ç³»ç»Ÿåˆ†æ

é€šè¿‡ä»£ç ç ”ç©¶ï¼Œç¡®è®¤å½“å‰æ¸¸æˆå·²å…·å¤‡ä»¥ä¸‹æ ¸å¿ƒæœºåˆ¶ï¼š

| ç³»ç»Ÿ | ç°æœ‰å®ç° | å…³é”®æ–‡ä»¶ |
|------|----------|----------|
| å›½å®¶å…³ç³» | 0-100å…³ç³»å€¼ï¼Œå¥½æ„Ÿåº¦è¡°å‡ï¼ŒAI-AIå…³ç³» | `nations.js`, `aiDiplomacy.js` |
| è”ç›Ÿç³»ç»Ÿ | ç©å®¶-AIè”ç›Ÿ(`alliedWithPlayer`)ï¼ŒAI-AIè”ç›Ÿ(`allies[]`) | `aiDiplomacy.js` |
| æˆ˜äº‰ç³»ç»Ÿ | æˆ˜äº‰åˆ†æ•°ã€çªè¢­ã€å’Œå¹³è°ˆåˆ¤ã€åˆ†æœŸèµ”æ¬¾ã€å‰²åœ° | `aiWar.js`, `diplomaticEvents.js` |
| è´¸æ˜“ç³»ç»Ÿ | å•†äººæ´¾é©»ã€è¿›å‡ºå£å…³ç¨ã€å¤–å›½åº“å­˜æ¨¡æ‹Ÿ | `trading.js`, `aiEconomy.js` |
| å›ä¹±ç³»ç»Ÿ | ç»„ç»‡åº¦ã€é˜¶å±‚èµ·ä¹‰ã€å›å†›æ”¿æƒ | `organizationSystem.js`, `rebellionSystem.js` |
| å›½å®¶é…ç½® | 30+å›½å®¶ï¼Œæ—¶ä»£é™åˆ¶ï¼Œç»æµåå¥½ï¼Œä¾µç•¥æ€§ | `countries.js` |

> [!IMPORTANT]
> æœ¬è®¾è®¡æ–¹æ¡ˆæ‰€æœ‰å†…å®¹å‡åŸºäºç°æœ‰æœºåˆ¶æ‰©å±•ï¼Œä¸ä¼šæ–°å¢æ¸¸æˆä¸­ä¸å­˜åœ¨çš„ç³»ç»Ÿï¼ˆå¦‚é¢†åœ°ç³»ç»Ÿã€å®—æ•™ç³»ç»Ÿç­‰ï¼‰ã€‚

---

## é›¶ã€æ—¶ä»£è§£é”ç³»ç»Ÿ

> [!IMPORTANT]
> å¤–äº¤æœºåˆ¶éšæ—¶ä»£é€æ­¥è§£é”ï¼Œè¿™ç¬¦åˆå†å²å‘å±•é€»è¾‘ï¼Œä¹Ÿä¸ºæ¸¸æˆå¢åŠ è¿›åº¦æ„Ÿå’Œæˆ˜ç•¥è§„åˆ’ç»´åº¦ã€‚

### 0.1 æ—¶ä»£è§£é”æ€»è§ˆ

```mermaid
timeline
    title å¤–äº¤æœºåˆ¶æ—¶ä»£è§£é”è·¯çº¿å›¾
    section çŸ³å™¨æ—¶ä»£ (Era 0)
        æ— å¤–äº¤ : éƒ¨è½æˆ˜äº‰
    section é’é“œæ—¶ä»£ (Era 1)
        åŸºç¡€å¤–äº¤ : å’Œå¹³æ¡çº¦
                 : åŸºç¡€å…³ç³»ç³»ç»Ÿ
    section å¤å…¸æ—¶ä»£ (Era 2)
        å®‰å…¨å¤–äº¤ : äº’ä¸ä¾µçŠ¯æ¡çº¦
                 : è´¸æ˜“åå®š
                 : ä¿æŠ¤å›½
    section å°å»ºæ—¶ä»£ (Era 3)
        éƒ¨è½è”ç›Ÿ : æœè´¡å›½
                 : å†›äº‹è”ç›Ÿ
                 : å•†äººæ´¾é©»
    section æ¢ç´¢æ—¶ä»£ (Era 4)
        æ®–æ°‘ä½“ç³» : è‡ªç”±è´¸æ˜“åå®š
                 : æŠ•èµ„åè®®
                 : æ®–æ°‘åœ°
                 : æµ·å¤–å»ºç­‘
    section å¯è’™æ—¶ä»£ (Era 5)
        å›½é™…ç§©åº : ç»æµå…±åŒä½“
                 : è‡ªè´¸åŒº
                 : å¤šè½®è°ˆåˆ¤
    section å·¥ä¸šæ—¶ä»£ (Era 6)
        å¸å›½ä¸»ä¹‰ : å‚€å„¡å›½
                 : å¸‚åœºä»·æ ¼è”åŠ¨
                 : å¤æ‚å›½é™…ç»„ç»‡
    section ä¿¡æ¯æ—¶ä»£ (Era 7)
        å…¨çƒåŒ– : æ‰€æœ‰æœºåˆ¶å®Œå…¨å¼€æ”¾
               : é«˜çº§å¤–äº¤ç­–ç•¥
```

### 0.2 è¯¦ç»†è§£é”è¡¨

| æ—¶ä»£ | ID | è§£é”æœºåˆ¶ | è®¾è®¡ç†ç”± |
|------|----|----------|----------|
| **çŸ³å™¨æ—¶ä»£** | 0 | æ— å¤–äº¤ç³»ç»Ÿ | éƒ¨è½ç¤¾ä¼šå°šæ— å›½å®¶æ¦‚å¿µ |
| **é’é“œæ—¶ä»£** | 1 | å’Œå¹³æ¡çº¦ã€åŸºç¡€å…³ç³» | åŸé‚¦å‡ºç°ï¼Œå¼€å§‹æœ‰å›½å®¶é—´äº¤å¾€ |
| **å¤å…¸æ—¶ä»£** | 2 | äº’ä¸ä¾µçŠ¯æ¡çº¦ã€è´¸æ˜“åå®šã€ä¿æŠ¤å›½ | æ–‡æ˜äº¤æµå¢åŠ ï¼Œæ¡çº¦æ¦‚å¿µå‡ºç° |
| **å°å»ºæ—¶ä»£** | 3 | æœè´¡å›½ã€å†›äº‹è”ç›Ÿã€å•†äººæ´¾é©»ç³»ç»Ÿ | å°å»ºå®—è—©ä½“ç³»ã€éª‘å£«å›¢è”ç›Ÿ |
| **æ¢ç´¢æ—¶ä»£** | 4 | è‡ªç”±è´¸æ˜“åå®šã€æŠ•èµ„åè®®ã€æ®–æ°‘åœ°ã€æµ·å¤–å»ºç­‘ | å¤§èˆªæµ·æ—¶ä»£ã€æ®–æ°‘æ‰©å¼  |
| **å¯è’™æ—¶ä»£** | 5 | ç»æµå…±åŒä½“ã€è‡ªè´¸åŒºã€å¤šè½®è°ˆåˆ¤ | å›½é™…æ³•èŒèŠ½ï¼Œå¤–äº¤èŒä¸šåŒ– |
| **å·¥ä¸šæ—¶ä»£** | 6 | å‚€å„¡å›½ã€å¸‚åœºä»·æ ¼è”åŠ¨ã€å¤æ‚å›½é™…ç»„ç»‡ | å¸å›½ä¸»ä¹‰ã€å…¨çƒå¸‚åœº |
| **ä¿¡æ¯æ—¶ä»£** | 7 | å…¨éƒ¨è§£é” | ç°ä»£å…¨çƒåŒ–å¤–äº¤ä½“ç³» |

### 0.3 æ—¶ä»£è§£é”é…ç½®

```javascript
// å¤–äº¤æœºåˆ¶æ—¶ä»£è§£é”é…ç½®
export const DIPLOMACY_ERA_UNLOCK = {
    // æ¡çº¦ç±»å‹è§£é”
    treaties: {
        peace_treaty: { minEra: 1, name: 'å’Œå¹³æ¡çº¦' },
        non_aggression: { minEra: 2, name: 'äº’ä¸ä¾µçŠ¯æ¡çº¦' },
        trade_agreement: { minEra: 2, name: 'è´¸æ˜“åå®š' },
        free_trade: { minEra: 4, name: 'è‡ªç”±è´¸æ˜“åå®š' },
        investment_pact: { minEra: 4, name: 'æŠ•èµ„åè®®' },
    },
    
    // é™„åº¸å…³ç³»è§£é”
    sovereignty: {
        protectorate: { minEra: 2, name: 'ä¿æŠ¤å›½' },
        tributary: { minEra: 3, name: 'æœè´¡å›½' },
        puppet: { minEra: 6, name: 'å‚€å„¡å›½' },
        colony: { minEra: 4, name: 'æ®–æ°‘åœ°' },
    },
    
    // å›½é™…ç»„ç»‡è§£é”
    organizations: {
        military_alliance: { minEra: 3, name: 'å†›äº‹è”ç›Ÿ' },
        economic_bloc: { minEra: 5, name: 'ç»æµå…±åŒä½“' },
        trade_zone: { minEra: 5, name: 'è‡ªè´¸åŒº' },
    },
    
    // ç»æµæœºåˆ¶è§£é”
    economy: {
        merchant_stationing: { minEra: 3, name: 'å•†äººæ´¾é©»' },
        overseas_building: { minEra: 4, name: 'æµ·å¤–å»ºç­‘' },
        price_convergence: { minEra: 6, name: 'å¸‚åœºä»·æ ¼è”åŠ¨' },
        multi_round_negotiation: { minEra: 5, name: 'å¤šè½®è°ˆåˆ¤' },
    },
    
    // äººå£æµåŠ¨è§£é”
    migration: {
        economic_migration: { minEra: 3, name: 'ç»æµç§»æ°‘' },
        war_refugees: { minEra: 2, name: 'æˆ˜äº‰éš¾æ°‘' },
        political_exile: { minEra: 4, name: 'æ”¿æ²»æµäº¡' },
    },
};

// æ£€æŸ¥æœºåˆ¶æ˜¯å¦è§£é”
export const isDiplomacyUnlocked = (category, mechanismId, currentEra) => {
    const config = DIPLOMACY_ERA_UNLOCK[category]?.[mechanismId];
    return config ? currentEra >= config.minEra : false;
};
```

### 0.4 æ—¶ä»£æ¼”è¿›æ•ˆæœ

> [!TIP]
> åŒä¸€æœºåˆ¶åœ¨ä¸åŒæ—¶ä»£å…·æœ‰ä¸åŒå‚æ•°ï¼Œä½“ç°æŠ€æœ¯å’Œåˆ¶åº¦è¿›æ­¥ã€‚

#### 0.4.1 æ¡çº¦æœŸé™æ¼”è¿›

| æ¡çº¦ç±»å‹ | æ—©æœŸæ—¶ä»£æœŸé™ | æ ‡å‡†æœŸé™ | æ™šæœŸæ—¶ä»£æœŸé™ |
|----------|------------|----------|-------------|
| å’Œå¹³æ¡çº¦ | 180å¤© (Era 1-2) | 365å¤© (Era 3-4) | 730å¤© (Era 5+) |
| äº’ä¸ä¾µçŠ¯æ¡çº¦ | 365å¤© (Era 2-3) | 730å¤© (Era 4-5) | 1095å¤© (Era 6+) |
| è´¸æ˜“åå®š | 365å¤© (Era 2-3) | 1095å¤© (Era 4-5) | æ°¸ä¹… (Era 6+) |
| æŠ•èµ„åè®® | 730å¤© (Era 4) | 1825å¤© (Era 5-6) | æ°¸ä¹… (Era 7) |

```javascript
// æ¡çº¦æœŸé™æ ¹æ®æ—¶ä»£è°ƒæ•´
const getTreatyDuration = (treatyType, currentEra) => {
    const baseConfig = TREATY_CONFIGS[treatyType];
    const unlockEra = DIPLOMACY_ERA_UNLOCK.treaties[treatyType].minEra;
    const eraAdvantage = currentEra - unlockEra;
    
    // æ¯è¶…è¿‡è§£é”æ—¶ä»£1çº§ï¼ŒæœŸé™+50%
    return Math.floor(baseConfig.baseDuration * (1 + eraAdvantage * 0.5));
};
```

#### 0.4.2 æ¡çº¦è¿çº¦æƒ©ç½šæ¼”è¿›

| æ—¶ä»£é˜¶æ®µ | è¿çº¦å…³ç³»æƒ©ç½š | è¿çº¦å†·å´æœŸ | å…¶ä»–å›½å®¶ååº” |
|----------|------------|-----------|-------------|
| æ—©æœŸ (Era 1-3) | -20 | 90å¤© | æ— è¿é”ååº” |
| ä¸­æœŸ (Era 4-5) | -35 | 180å¤© | åŒç›Ÿå›½å…³ç³»-10 |
| æ™šæœŸ (Era 6-7) | -50 | 365å¤© | å…¨çƒå£°èª‰ç³»ç»Ÿå½±å“ |

#### 0.4.3 å•†äººæ´¾é©»æ•ˆç‡æ¼”è¿›

```javascript
// å•†äººæ´¾é©»æ•ˆç‡éšæ—¶ä»£æå‡
const getMerchantEfficiency = (currentEra) => ({
    tradeVolume: 1 + (currentEra - 3) * 0.15,     // æ¯æ—¶ä»£+15%äº¤æ˜“é‡
    priceAccuracy: 0.7 + currentEra * 0.05,       // ä»·æ ¼ä¿¡æ¯æ›´å‡†ç¡®
    travelSpeed: 1 + Math.max(0, currentEra - 4) * 0.2, // æ¢ç´¢æ—¶ä»£å+20%/æ—¶ä»£
});
```

#### 0.4.4 æ®–æ°‘/é™„åº¸æ§åˆ¶åŠ›æ¼”è¿›

| æ—¶ä»£ | æœ€å¤§é™„åº¸æ•° | æ®–æ°‘åœ°ä¸Šé™ | ç‹¬ç«‹å€¾å‘åŸºç¡€å€¼ |
|------|-----------|-----------|---------------|
| å¤å…¸ (Era 2) | 1 | 0 | +10%/å¹´ |
| å°å»º (Era 3) | 2 | 0 | +5%/å¹´ |
| æ¢ç´¢ (Era 4) | 3 | 2 | +3%/å¹´ |
| å¯è’™ (Era 5) | 4 | 4 | +2%/å¹´ |
| å·¥ä¸š (Era 6) | 5 | 6 | +1%/å¹´ |
| ä¿¡æ¯ (Era 7) | æ— é™ | 8 | Â±0%/å¹´ |

```javascript
// é™„åº¸æ§åˆ¶åŠ›é…ç½®
const getVassalLimits = (currentEra) => ({
    maxVassals: currentEra >= 7 ? Infinity : Math.max(0, currentEra - 1),
    maxColonies: currentEra >= 4 ? (currentEra - 2) * 2 : 0,
    independenceBaseRate: 0.10 - (currentEra * 0.015),
});
```

### 0.5 æœªè§£é”æœºåˆ¶çš„UIå¤„ç†

> [!NOTE]
> æœªè§£é”çš„æœºåˆ¶åº”åœ¨UIä¸­æ˜¾ç¤ºä½†ç°åŒ–æ ‡æ³¨ï¼Œè®©ç©å®¶äº†è§£æœªæ¥å¯è§£é”çš„å†…å®¹ã€‚

```javascript
// UIæ˜¾ç¤ºé€»è¾‘
const renderDiplomacyOption = (option, currentEra) => {
    const unlockEra = DIPLOMACY_ERA_UNLOCK[option.category]?.[option.id]?.minEra || 0;
    const isUnlocked = currentEra >= unlockEra;
    
    if (isUnlocked) {
        return <Button onClick={option.action}>{option.name}</Button>;
    } else {
        const eraName = EPOCHS[unlockEra].name;
        return (
            <Button disabled className="opacity-50">
                ğŸ”’ {option.name}
                <span className="text-xs">(éœ€è¦{eraName})</span>
            </Button>
        );
    }
};
```

**UIç¤ºä¾‹**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“œ å¯ç­¾ç½²æ¡çº¦                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… å’Œå¹³æ¡çº¦        å…³ç³»â‰¥30                                     â”‚
â”‚ âœ… äº’ä¸ä¾µçŠ¯æ¡çº¦    å…³ç³»â‰¥40                                     â”‚
â”‚ âœ… è´¸æ˜“åå®š        å…³ç³»â‰¥50                                     â”‚
â”‚ ğŸ”’ è‡ªç”±è´¸æ˜“åå®š    å…³ç³»â‰¥70  (éœ€è¦æ¢ç´¢æ—¶ä»£)                     â”‚
â”‚ ğŸ”’ æŠ•èµ„åè®®        å…³ç³»â‰¥60  (éœ€è¦æ¢ç´¢æ—¶ä»£)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 0.6 æ—¶ä»£è§£é”ä¸AIè¡Œä¸º

> [!IMPORTANT]
> AIå›½å®¶ä¹Ÿå—æ—¶ä»£è§£é”é™åˆ¶ï¼Œç¡®ä¿å…¬å¹³æ€§ã€‚

```javascript
// AIå¤–äº¤å†³ç­–æ—¶æ£€æŸ¥æ—¶ä»£è§£é”
const aiConsiderTreaty = (aiNation, targetNation, treatyType) => {
    const currentEra = gameState.era;
    
    // æ£€æŸ¥æ—¶ä»£è§£é”
    if (!isDiplomacyUnlocked('treaties', treatyType, currentEra)) {
        return { canPropose: false, reason: 'era_locked' };
    }
    
    // AIæå‰1ä¸ªæ—¶ä»£"å‘ç°"è¿™äº›æœºåˆ¶ï¼ˆæ¨¡æ‹ŸAIå›½å®¶çš„ç‹¬ç«‹å‘å±•ï¼‰
    const aiMinEra = DIPLOMACY_ERA_UNLOCK.treaties[treatyType].minEra;
    if (aiNation.techLevel > currentEra && currentEra >= aiMinEra - 1) {
        // å…ˆè¿›AIå¯ä»¥æå‰æ¥è§¦æ–°æœºåˆ¶
        return evaluateTreatyNormally(aiNation, targetNation, treatyType);
    }
    
    return evaluateTreatyNormally(aiNation, targetNation, treatyType);
};
```

### 0.7 æ—¶ä»£è§£é”äº‹ä»¶

å½“ç©å®¶è¿›å…¥æ–°æ—¶ä»£æ—¶ï¼Œè§¦å‘å¤–äº¤æœºåˆ¶è§£é”é€šçŸ¥ï¼š

```javascript
// æ—¶ä»£å‡çº§æ—¶çš„è§£é”é€šçŸ¥
const notifyDiplomacyUnlocks = (newEra) => {
    const newUnlocks = [];
    
    for (const [category, mechanisms] of Object.entries(DIPLOMACY_ERA_UNLOCK)) {
        for (const [id, config] of Object.entries(mechanisms)) {
            if (config.minEra === newEra) {
                newUnlocks.push({
                    category,
                    id,
                    name: config.name,
                });
            }
        }
    }
    
    if (newUnlocks.length > 0) {
        addLog(`âœ¨ è¿›å…¥${EPOCHS[newEra].name}ï¼è§£é”æ–°å¤–äº¤æœºåˆ¶ï¼š`);
        newUnlocks.forEach(u => addLog(`  â€¢ ${u.name}`));
        
        // è§¦å‘å¤–äº¤è§£é”äº‹ä»¶
        triggerEvent({
            id: 'diplomacy_unlock',
            title: `å¤–äº¤é©æ–°ï¼š${EPOCHS[newEra].name}`,
            description: `éšç€æ–‡æ˜è¿›å…¥${EPOCHS[newEra].name}ï¼Œæ–°çš„å¤–äº¤æ‰‹æ®µå·²å¯ä½¿ç”¨ã€‚`,
            options: [
                { text: 'æŸ¥çœ‹æ–°æœºåˆ¶', action: () => openDiplomacyTab() },
                { text: 'çŸ¥é“äº†', action: null },
            ],
        });
    }
};
```

---

## ä¸€ã€å¤–äº¤æ¡çº¦ä½“ç³»

### 1.1 è®¾è®¡ç†å¿µ

æ‰©å±•ç°æœ‰çš„`peaceTreatyUntil`æœºåˆ¶ï¼Œå»ºç«‹å¤šå…ƒåŒ–çš„æ¡çº¦ä½“ç³»ï¼Œè®©ç©å®¶èƒ½ä¸AIå›½å®¶è¿›è¡Œæ›´ä¸°å¯Œçš„åˆ©ç›Šäº¤æ¢å’Œåšå¼ˆã€‚

### 1.2 æ¡çº¦ç±»å‹

```mermaid
graph TD
    A[æ¡çº¦ä½“ç³»] --> B[å®‰å…¨ç±»æ¡çº¦]
    A --> C[ç»æµç±»æ¡çº¦]
    A --> D[åˆä½œç±»æ¡çº¦]
    
    B --> B1[äº’ä¸ä¾µçŠ¯æ¡çº¦]
    B --> B2[å’Œå¹³æ¡çº¦]
    
    C --> C1[è´¸æ˜“åå®š]
    C --> C2[å…³ç¨åŒç›Ÿ]
    C --> C3[æŠ•èµ„åè®®]
    
    D --> D1[å­¦æœ¯äº¤æµ]
    D --> D2[å†›äº‹åˆä½œ]
```

#### 1.2.1 äº’ä¸ä¾µçŠ¯æ¡çº¦ (Non-Aggression Pact)

> [!NOTE]
> ğŸ”“ **è§£é”æ—¶ä»£**ï¼šå¤å…¸æ—¶ä»£ (Era 2) | éšå°å»ºå®—è—©ä½“ç³»æˆç†Ÿè€Œæ™®åŠ

| å±æ€§ | å€¼ |
|------|-----|
| ç±»å‹ID | `non_aggression` |
| è§£é”æ—¶ä»£ | **å¤å…¸æ—¶ä»£ (Era 2)** |
| æœ€ä½å…³ç³» | 40 |
| æœŸé™ | 365å¤© (Era 2-3) â†’ 730å¤© (Era 4-5) â†’ 1095å¤© (Era 6+) |
| ç­¾çº¦æˆæœ¬ | åŒæ–¹è´¢å¯Œæœ€å°å€¼ Ã— 0.5% |

**ä¸ç»æµç³»ç»Ÿè”åŠ¨**ï¼š
- åŒæ–¹ä¸å¯å®£æˆ˜ â†’ å•†äººæ´¾é©»å®‰å…¨æ€§+100%ï¼ˆå‡å°‘æˆ˜äº‰é£é™©è´´æ°´ï¼‰
- å…³ç³»è¡°å‡é€Ÿåº¦-50% â†’ é•¿æœŸè´¸æ˜“å…³ç³»æ›´ç¨³å®š
- è¿çº¦æ–¹ï¼šå…³ç³»-50ï¼Œæ‰€æœ‰å•†äººè¢«é©±é€ï¼Œè´¸æ˜“ä¸­æ–­90å¤©

---

#### 1.2.2 è´¸æ˜“åå®š (Trade Agreement)

> [!IMPORTANT]
> è´¸æ˜“åå®šç›´æ¥å½±å“`trading.js`ä¸­çš„å•†äººæ´¾é©»ä¸Šé™å’Œå…³ç¨è®¡ç®—ã€‚

> [!NOTE]
> ğŸ”“ **è§£é”æ—¶ä»£**ï¼šå¤å…¸æ—¶ä»£ (Era 2) | ä¸ç»¸ä¹‹è·¯æ—¶ä»£çš„æ­£å¼è´¸æ˜“æ¡çº¦

| å±æ€§ | å€¼ |
|------|-----|
| ç±»å‹ID | `trade_agreement` |
| è§£é”æ—¶ä»£ | **å¤å…¸æ—¶ä»£ (Era 2)** |
| æœ€ä½å…³ç³» | 50 |
| æœŸé™ | 365å¤© (Era 2-3) â†’ 1095å¤© (Era 4-5) â†’ æ°¸ä¹… (Era 6+) |
| ç­¾çº¦æˆæœ¬ | åŒæ–¹è´¢å¯Œæœ€å°å€¼ Ã— 1% |

**ä¸ç°æœ‰è´¸æ˜“ç³»ç»Ÿè”åŠ¨**ï¼š

```javascript
// è´¸æ˜“åå®šæ•ˆæœ
const TRADE_AGREEMENT_EFFECTS = {
    // å•†äººæ´¾é©»ï¼ˆè”åŠ¨ getMaxTradeRoutesForRelationï¼‰
    merchantSlots: {
        type: 'additive',
        value: 3,  // é¢å¤–3ä¸ªå•†äººæ´¾é©»æ§½ä½
    },
    
    // å…³ç¨è®¡ç®—ï¼ˆè”åŠ¨ trading.js çš„ getImportTaxRate/getExportTaxRateï¼‰
    tariffModifier: {
        type: 'multiplicative',
        importTariff: 0.75,   // è¿›å£å…³ç¨å‡å…25%
        exportTariff: 0.80,   // å‡ºå£å…³ç¨å‡å…20%
    },
    
    // è´¸æ˜“æ•ˆç‡ï¼ˆè”åŠ¨ simulateMerchantTrade çš„åˆ©æ¶¦è®¡ç®—ï¼‰
    tradeEfficiency: {
        type: 'multiplicative',
        value: 1.15,  // è´¸æ˜“åˆ©æ¶¦+15%
    },
    
    // ä»·æ ¼ä¿¡æ¯ï¼ˆå‡å°‘ä»·æ ¼ä¼°ç®—è¯¯å·®ï¼‰
    priceTransparency: {
        type: 'additive',
        value: 0.3,  // ä»·æ ¼ä¼°ç®—è¯¯å·®-30%
    },
};
```

**å®ç°é€»è¾‘**ï¼š
```javascript
// åœ¨ trading.js calculateImportProfitability ä¸­åº”ç”¨
const hasTreaty = nation.treaties?.trade_agreement?.status === 'active';
if (hasTreaty) {
    effectiveTariff *= TRADE_AGREEMENT_EFFECTS.tariffModifier.importTariff;
    profitMargin *= TRADE_AGREEMENT_EFFECTS.tradeEfficiency.value;
}
```

---

#### 1.2.3 è‡ªç”±è´¸æ˜“åå®š (Free Trade Agreement)

> [!IMPORTANT]
> è‡ªè´¸åå®šæ˜¯è´¸æ˜“åå®šçš„å‡çº§ç‰ˆï¼Œå®ç°å…³ç¨å½’é›¶å’Œå¸‚åœºä»·æ ¼è”åŠ¨ã€‚

> [!NOTE]
> ğŸ”“ **è§£é”æ—¶ä»£**ï¼šæ¢ç´¢æ—¶ä»£ (Era 4) | å¤§èˆªæµ·æ—¶ä»£çš„å…¨çƒè´¸æ˜“ç½‘ç»œ

| å±æ€§ | å€¼ |
|------|-----|
| ç±»å‹ID | `free_trade` |
| è§£é”æ—¶ä»£ | **æ¢ç´¢æ—¶ä»£ (Era 4)** |
| æœ€ä½å…³ç³» | 70 |
| æœŸé™ | æ°¸ä¹…ï¼ˆéœ€åŒæ–¹åŒæ„è§£é™¤ï¼‰ |
| ç­¾çº¦æˆæœ¬ | åŒæ–¹è´¢å¯Œæœ€å°å€¼ Ã— 3% |
| å‰ç½®æ¡ä»¶ | éœ€å…ˆç­¾ç½²è´¸æ˜“åå®šæ»¡1å¹´ |

**ä¸ç°æœ‰è´¸æ˜“ç³»ç»Ÿè”åŠ¨**ï¼š

```javascript
const FREE_TRADE_EFFECTS = {
    // å…³ç¨å½’é›¶
    tariffModifier: {
        importTariff: 0,     // è¿›å£å…³ç¨0%
        exportTariff: 0,     // å‡ºå£å…³ç¨0%
    },
    
    // å•†äººæ´¾é©»æ— ä¸Šé™
    merchantSlots: {
        type: 'unlimited',   // å•†äººæ´¾é©»ä¸å—å…³ç³»é™åˆ¶
        baseSlots: 10,       // åŸºç¡€10ä¸ªæ§½ä½
    },
    
    // å¸‚åœºä»·æ ¼è”åŠ¨ï¼ˆæ ¸å¿ƒæœºåˆ¶ï¼‰
    priceConvergence: {
        enabled: true,
        convergenceRate: 0.1, // æ¯æ—¥ä»·æ ¼å·®è·ç¼©å°10%
        // å®ç°ï¼šmin(æœ¬å›½ä»·æ ¼, å¯¹æ–¹ä»·æ ¼Ã—1.1) â‰¤ å®é™…ä»·æ ¼ â‰¤ max(æœ¬å›½ä»·æ ¼, å¯¹æ–¹ä»·æ ¼Ã—0.9)
    },
    
    // èµ„æºå…±äº«ä¼˜å…ˆ
    tradeRoutePreference: {
        importPriority: 1.5,  // ä»è‡ªè´¸ä¼™ä¼´è¿›å£ä¼˜å…ˆçº§+50%
        exportPriority: 1.5,  // å‘è‡ªè´¸ä¼™ä¼´å‡ºå£ä¼˜å…ˆçº§+50%
    },
};
```

**å¸‚åœºä»·æ ¼è”åŠ¨æœºåˆ¶**ï¼š
```javascript
// æ¯æ—¥ä»·æ ¼æ”¶æ•›è®¡ç®—
const processFreeTradePriceConvergence = (nation) => {
    if (!nation.treaties?.free_trade?.status === 'active') return;
    
    for (const resourceKey of Object.keys(marketPrices)) {
        const localPrice = marketPrices[resourceKey];
        const foreignPrice = nation.prices?.[resourceKey] || localPrice;
        
        // ä»·æ ¼å‘ä¸­é—´å€¼æ”¶æ•›
        const targetPrice = (localPrice + foreignPrice) / 2;
        const convergence = FREE_TRADE_EFFECTS.priceConvergence.convergenceRate;
        
        marketPrices[resourceKey] = localPrice + (targetPrice - localPrice) * convergence;
    }
};
```

**ç»æµå½±å“**ï¼š
- æœ¬å›½è¿‡å‰©èµ„æºä¼šæµå‘è‡ªè´¸ä¼™ä¼´ â†’ æœ¬å›½ä»·æ ¼ä¸Šæ¶¨
- æœ¬å›½çŸ­ç¼ºèµ„æºä»ä¼™ä¼´æµå…¥ â†’ æœ¬å›½ä»·æ ¼ä¸‹è·Œ
- å•†äººé˜¶å±‚è·åˆ©ï¼ˆå¥—åˆ©ç©ºé—´å¤§ï¼‰
- å·¥åŒ /å·¥äººå¯èƒ½å—å†²å‡»ï¼ˆå¤–å›½å»‰ä»·å“æ¶Œå…¥ï¼‰

---

#### 1.2.4 æŠ•èµ„åè®® (Investment Agreement)

> [!IMPORTANT]
> æŠ•èµ„åè®®å…è®¸ç©å®¶é˜¶å±‚åœ¨å¤–å›½**å»ºé€ å»ºç­‘**ï¼Œä¸æµ·å¤–å»ºç­‘ç³»ç»Ÿè”åŠ¨ã€‚

> [!NOTE]
> ğŸ”“ **è§£é”æ—¶ä»£**ï¼šæ¢ç´¢æ—¶ä»£ (Era 4) | æ®–æ°‘æ—¶ä»£çš„èµ„æœ¬è¾“å‡ºåˆ¶åº¦åŒ–

| å±æ€§ | å€¼ |
|------|-----|
| ç±»å‹ID | `investment_pact` |
| è§£é”æ—¶ä»£ | **æ¢ç´¢æ—¶ä»£ (Era 4)** |
| æœ€ä½å…³ç³» | 60 |
| æœŸé™ | 730å¤© (Era 4) â†’ 1825å¤© (Era 5-6) â†’ æ°¸ä¹… (Era 7) |
| ç­¾çº¦æˆæœ¬ | åŒæ–¹è´¢å¯Œæœ€å°å€¼ Ã— 2% |

**ä¸æµ·å¤–å»ºç­‘ç³»ç»Ÿè”åŠ¨**ï¼š

```javascript
const INVESTMENT_AGREEMENT_EFFECTS = {
    // è§£é”æµ·å¤–å»ºç­‘æƒé™
    overseasBuildingAccess: {
        enabled: true,
        allowedBuildingTypes: ['trade', 'extraction', 'processing'],
        // æ— åè®®ï¼šåªèƒ½å»º trading_post
        // æœ‰åè®®ï¼šå¯å»ºä»»æ„é‡‡é›†+åŠ å·¥å»ºç­‘
    },
    
    // æŠ•èµ„ä¿æŠ¤
    investmentProtection: {
        nationalizationRisk: -0.5,   // å›½æœ‰åŒ–é£é™©-50%
        profitRepatriationRate: 1.0, // åˆ©æ¶¦100%å¯æ±‡å›
        // æ— åè®®ï¼šåˆ©æ¶¦20%è¢«å½“åœ°æ”¿åºœæŠ½æˆ
    },
    
    // åŠ³åŠ¨åŠ›æˆæœ¬
    laborCostModifier: {
        type: 'multiplicative',
        value: 0.85,  // å½“åœ°å·¥èµ„æˆæœ¬-15%ï¼ˆæ”¿åºœè¡¥è´´ï¼‰
    },
    
    // åŒå‘æŠ•èµ„
    mutualInvestment: {
        enabled: true,
        aiCanBuildInPlayer: true,  // AIä¹Ÿå¯åœ¨ç©å®¶å›½å»ºé€ 
        aiInvestmentCap: 0.1,      // AIæŠ•èµ„ä¸Šé™ä¸ºç©å®¶GDP 10%
    },
};
```

**å®ç°é€»è¾‘**ï¼š
```javascript
// åœ¨ buildOverseasBuilding ä¸­æ£€æŸ¥
const canInvest = (buildingId, targetNation) => {
    const hasInvestmentPact = targetNation.treaties?.investment_pact?.status === 'active';
    
    if (!hasInvestmentPact) {
        // æ— åè®®åªèƒ½å»ºè´¸æ˜“ç«™
        return buildingId === 'trading_post';
    }
    
    // æœ‰åè®®æ£€æŸ¥å»ºç­‘ç±»å‹
    const config = BUILDINGS.find(b => b.id === buildingId);
    return INVESTMENT_AGREEMENT_EFFECTS.overseasBuildingAccess.allowedBuildingTypes
        .includes(config.cat);
};
```

**é˜¶å±‚å½±å“**ï¼š
- `capitalist`/`merchant`/`landowner`å¯åœ¨å¤–å›½å»ºé€ å»ºç­‘
- åˆ©æ¶¦å›æµè¿›å…¥å¯¹åº”`classWealth`
- åè®®åˆ°æœŸæ—¶ï¼Œå»ºç­‘ä¿ç•™ä½†åˆ©æ¶¦æ±‡å›å—é™ï¼ˆ20%æŠ½æˆï¼‰

---

### 1.3 æ¡çº¦ä¸ç»æµç³»ç»Ÿè”åŠ¨æ€»è§ˆ

```mermaid
graph TD
    A[å¤–äº¤æ¡çº¦] --> B[è´¸æ˜“åå®š]
    A --> C[è‡ªè´¸åå®š]
    A --> D[æŠ•èµ„åè®®]
    
    B --> B1["getMaxTradeRoutesForRelation()+3"]
    B --> B2["tariff Ã— 0.75"]
    B --> B3["tradeProfit Ã— 1.15"]
    
    C --> C1["tariff = 0"]
    C --> C2["merchantSlots = unlimited"]
    C --> C3["å¸‚åœºä»·æ ¼æ”¶æ•›"]
    
    D --> D1["è§£é”æµ·å¤–å»ºç­‘"]
    D --> D2["åˆ©æ¶¦æ±‡å›100%"]
    D --> D3["laborCost Ã— 0.85"]
```

---

## è¡¥å……è®¾è®¡ï¼šç”¨æˆ·åé¦ˆå›åº”

### è¡¥å……ä¸€ï¼šåŠ¨æ€æˆæœ¬æœºåˆ¶ï¼ˆè§£å†³åæœŸé€šèƒ€é—®é¢˜ï¼‰

> [!IMPORTANT]
> ç”¨æˆ·æŒ‡å‡ºæ¸¸æˆåæœŸç©å®¶èµ„æºå¯è¾¾æ•°äº¿ç”šè‡³æ•°å…†ï¼Œå›ºå®šæˆæœ¬ä¼šå˜å¾—å¾®ä¸è¶³é“ã€‚

#### æˆæœ¬è®¡ç®—åŸåˆ™

æ‰€æœ‰å¤–äº¤æˆæœ¬é‡‡ç”¨**åŠ¨æ€æ¯”ä¾‹åˆ¶**ï¼Œè€Œéå›ºå®šæ•°å€¼ï¼š

```javascript
// æ ¸å¿ƒå…¬å¼ï¼šæˆæœ¬ = åŸºç¡€æ¯”ä¾‹ Ã— è´¢å¯ŒåŸºæ•° Ã— æ¡çº¦å€ç‡
const calculateDynamicCost = (playerWealth, baseRatio, treatyMultiplier) => {
    const wealthBase = Math.max(playerWealth, aiNationWealth);
    return Math.floor(wealthBase * baseRatio * treatyMultiplier);
};
```

#### æ¡çº¦ç»´æŠ¤è´¹è°ƒæ•´

| æ¡çº¦ç±»å‹ | åŸè®¾è®¡(å›ºå®š) | æ–°è®¾è®¡(æ¯”ä¾‹) | åæœŸç¤ºä¾‹(10äº¿è´¢å¯Œ) |
|---------|-------------|-------------|-------------------|
| äº’ä¸ä¾µçŠ¯ | æ—  | åŒæ–¹è´¢å¯Œ0.01%/å¤© | 10ä¸‡/å¤© |
| è´¸æ˜“åå®š | 1-5/å¤© | åŒæ–¹è´¢å¯Œ0.02%/å¤© | 20ä¸‡/å¤© |
| è‡ªè´¸åå®š | 3-10/å¤© | åŒæ–¹è´¢å¯Œ0.05%/å¤© | 50ä¸‡/å¤© |
| æŠ•èµ„åè®® | åˆå§‹500-2000 | åŒæ–¹è´¢å¯Œ5%Ã—æœŸé™ç³»æ•° | 5000ä¸‡èµ·æŠ• |
| å†›äº‹è”ç›Ÿæˆå‘˜è´¹ | æ—  | è”ç›Ÿæ€»è´¢å¯Œ0.1%/æœˆ | æŒ‰æ¯”ä¾‹åˆ†æ‘Š |

#### ç­¾çº¦ä¸€æ¬¡æ€§æˆæœ¬

| æ¡çº¦ç±»å‹ | ç­¾çº¦æˆæœ¬ |
|---------|---------|
| äº’ä¸ä¾µçŠ¯ | åŒæ–¹è´¢å¯Œæœ€å°å€¼ Ã— 1% |
| è´¸æ˜“åå®š | åŒæ–¹è´¢å¯Œæœ€å°å€¼ Ã— 2% |
| è‡ªè´¸åå®š | åŒæ–¹è´¢å¯Œæœ€å°å€¼ Ã— 5% |
| å…±åŒé˜²å¾¡ | åŒæ–¹è´¢å¯Œæœ€å°å€¼ Ã— 8% |

#### é™„åº¸æœè´¡è°ƒæ•´

| é™„åº¸ç±»å‹ | æœè´¡æ¯”ä¾‹ |
|---------|---------|
| ä¿æŠ¤å›½ | å¹´æ”¶å…¥8%ï¼ˆéè´¢å¯Œå­˜é‡ï¼‰ |
| æœè´¡å›½ | å¹´æ”¶å…¥15% |
| å‚€å„¡å›½ | å¹´æ”¶å…¥25% |
| æ®–æ°‘åœ° | å¹´æ”¶å…¥35% + èµ„æºé…é¢ |

> [!NOTE]
> "å¹´æ”¶å…¥"æŒ‡è¯¥å›½å½“å¹´GDPå¢é‡ï¼Œè€Œéè´¢å¯Œå­˜é‡ã€‚è¿™é¿å…ä¸€æ¬¡æ€§æœåˆ®å¯¼è‡´é™„åº¸ç§’ç ´äº§ã€‚

---

### è¡¥å……äºŒï¼šå¤–å›½é˜¶å±‚æ¨¡æ‹Ÿï¼ˆè®¾è®¡æƒè¡¡ï¼‰

> [!CAUTION]
> è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„è®¾è®¡å†³ç­–ï¼Œéœ€è¦æƒè¡¡å¤æ‚åº¦ä¸æ”¶ç›Šã€‚

#### æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|------|------|
| **A. ä¸æ¨¡æ‹Ÿé˜¶å±‚** | ç®€å•ã€æ€§èƒ½å¥½ | å¤–å›½å›ä¹±ç¼ºå°‘æ¥æº |
| **B. ç®€åŒ–é˜¶å±‚** | å¹³è¡¡å¤æ‚åº¦ | éœ€è¦æ–°å¢æ•°æ®ç»“æ„ |
| **C. å®Œæ•´é˜¶å±‚** | æœ€çœŸå® | æ€§èƒ½å¼€é”€å¤§ã€å¤æ‚ |

#### æ¨èæ–¹æ¡ˆï¼šB. ç®€åŒ–é˜¶å±‚æ¨¡å‹

ä¸ºAIå›½å®¶æ·»åŠ **3ä¸ªæŠ½è±¡é˜¶å±‚**ï¼ˆè€Œé17ä¸ªå®Œæ•´é˜¶å±‚ï¼‰ï¼š

```javascript
// AIå›½å®¶ç®€åŒ–é˜¶å±‚
nation.socialStructure = {
    elites: {          // ç²¾è‹±é˜¶å±‚ï¼ˆè´µæ—+å•†äºº+å®˜å‘˜ï¼‰
        ratio: 0.15,   // å æ¯”15%
        satisfaction: 70,
        influence: 0.4,
    },
    commoners: {       // å¹³æ°‘é˜¶å±‚ï¼ˆå·¥äºº+å†œæ°‘+å·¥åŒ ï¼‰
        ratio: 0.75,
        satisfaction: 55,
        influence: 0.35,
    },
    underclass: {      // åº•å±‚ï¼ˆä½ƒå†œ+å¤±ä¸šè€…ï¼‰
        ratio: 0.10,
        satisfaction: 40,
        influence: 0.25,
    },
};
```

#### ç®€åŒ–é˜¶å±‚çš„ä½œç”¨

1. **å¤–å›½å›ä¹±æ¥æº**ï¼šå½“æŸé˜¶å±‚satisfaction<30æ—¶ï¼Œç»„ç»‡åº¦å¢é•¿
2. **å¤–äº¤å€¾å‘**ï¼šç²¾è‹±ä¸»å¯¼çš„å›½å®¶æ›´å€¾å‘è´¸æ˜“ï¼Œå¹³æ°‘ä¸»å¯¼çš„æ›´æ¿€è¿›
3. **é™„åº¸ç¨³å®šæ€§**ï¼šæœè´¡å‹åŠ›å½±å“å¹³æ°‘æ»¡æ„åº¦
4. **æ”¿æƒæ›´è¿­**ï¼šå›ä¹±æˆåŠŸåï¼Œæ–°æ”¿æƒé˜¶å±‚æ¯”ä¾‹å˜åŒ–

#### ä¸éœ€è¦æ¨¡æ‹Ÿçš„å†…å®¹

- é˜¶å±‚å†…éƒ¨è´¢å¯Œåˆ†é…
- é˜¶å±‚é—´äººå£æµåŠ¨
- è¯¦ç»†çš„éœ€æ±‚æ»¡è¶³è®¡ç®—
- é˜¶å±‚å·¥ä½œåˆ†é…

---

### è¡¥å……ä¸‰ï¼šè®¨ä»·è¿˜ä»·ç³»ç»Ÿ

> [!IMPORTANT]
> ç©å®¶éœ€è¦èƒ½ä¸AIè¿›è¡Œå¤šè½®è°ˆåˆ¤ï¼Œè€Œä¸æ˜¯ç®€å•çš„æ¥å—/æ‹’ç»ã€‚

#### è°ˆåˆ¤æµç¨‹è®¾è®¡

```mermaid
sequenceDiagram
    participant P as ç©å®¶
    participant AI as AIå›½å®¶
    
    P->>AI: æå‡ºæ¡çº¦ï¼ˆé™„æ¡ä»¶ï¼‰
    AI->>P: åææ¡ˆ / æ¥å— / æ‹’ç»
    P->>AI: ä¿®æ”¹æ¡ä»¶å†æ
    AI->>P: æœ€ç»ˆå†³å®š
```

#### è°ˆåˆ¤ç­¹ç ç³»ç»Ÿ

ç©å®¶å¯åœ¨è°ˆåˆ¤ä¸­ä½¿ç”¨ä»¥ä¸‹ç­¹ç ï¼š

| ç­¹ç ç±»å‹ | æ•ˆæœ | æˆæœ¬ |
|---------|------|------|
| ç°é‡‘èµ ç¤¼ | æå‡æ¥å—ç‡ | é“¶å¸ |
| èµ„æºèµ ç¤¼ | é’ˆå¯¹ç¼ºè´§èµ„æºæ›´æœ‰æ•ˆ | èµ„æº |
| å†›äº‹å¨èƒ | å¼ºè¿«å¼±å›½æ¥å— | å…³ç³»-20 |
| å»¶é•¿æœŸé™ | å¯¹æ–¹æ›´æ„¿æ¥å—é•¿æœŸåˆ©ç›Š | å·±æ–¹æ›´é•¿æ‰¿è¯º |
| é™ä½è¦æ±‚ | æå‡æ¥å—ç‡ | å·±æ–¹æ”¶ç›Šå‡å°‘ |
| é™„åŠ æ¡æ¬¾ | äº¤æ¢é¢å¤–æ¡ä»¶ | è§†æ¡æ¬¾è€Œå®š |

#### UIäº¤äº’è®¾è®¡

æ‰©å±•ç°æœ‰`DiplomacyTab.jsx`å³é”®èœå•ï¼Œæ–°å¢"å¤–äº¤è°ˆåˆ¤"æ¨¡æ€æ¡†ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ä¸ [å›½å®¶å] å¤–äº¤è°ˆåˆ¤             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æå‡ºæ¡çº¦: [ä¸‹æ‹‰é€‰æ‹©æ¡çº¦ç±»å‹]             â”‚
â”‚                                         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€ æˆ‘æ–¹å‡ºä»· â”€â”€â”€â”€â”€â”€â”€                â”‚
â”‚ â–¡ æ”¯ä»˜ç­¾çº¦è´¹: [___] é“¶å¸                â”‚
â”‚ â–¡ å¹´åº¦ç»´æŠ¤è´¹: [___]% è´¢å¯Œ               â”‚
â”‚ â–¡ èµ é€èµ„æº: [é€‰æ‹©] Ã— [æ•°é‡]             â”‚
â”‚ â–¡ æä¾›æŠ€æœ¯: [é€‰æ‹©æŠ€æœ¯]                  â”‚
â”‚                                         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€ è¦æ±‚å¯¹æ–¹ â”€â”€â”€â”€â”€â”€â”€                â”‚
â”‚ â–¡ å‡å…å…³ç¨: [__]%                       â”‚
â”‚ â–¡ å¼€æ”¾å¸‚åœº: [__]æ¡å•†è·¯                  â”‚
â”‚ â–¡ å†›äº‹é…åˆ: [å…·ä½“è¦æ±‚]                  â”‚
â”‚                                         â”‚
â”‚ é¢„ä¼°æ¥å—ç‡: 65%  â—‰æ­£å¸¸ â—‹å¨èƒ â—‹è®¨å¥½      â”‚
â”‚                                         â”‚
â”‚    [å‘èµ·è°ˆåˆ¤]  [å–æ¶ˆ]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### AIåææ¡ˆæœºåˆ¶

å½“AIæ‹’ç»æ—¶ï¼Œæœ‰æ¦‚ç‡æå‡ºåææ¡ˆï¼š

```javascript
const generateCounterProposal = (originalProposal, aiNation) => {
    const counterChance = 0.3 + (aiNation.relation / 200);
    if (Math.random() > counterChance) return null;
    
    return {
        ...originalProposal,
        // AIä¿®æ”¹åçš„æ¡æ¬¾
        playerPayment: originalProposal.playerPayment * 1.3,  // è¦æ±‚å¤šä»˜30%
        duration: originalProposal.duration * 1.5,           // å»¶é•¿æœŸé™
        // æˆ–
        aiConcessions: originalProposal.aiConcessions * 0.7, // å‡å°‘è®©æ­¥
    };
};
```

#### è°ˆåˆ¤äº‹ä»¶

```javascript
// åææ¡ˆå¤–äº¤äº‹ä»¶
createCounterProposalEvent(aiNation, counterProposal, (playerChoice) => {
    // playerChoice: 'accept' | 'counter' | 'reject'
    if (playerChoice === 'accept') {
        // ä»¥AIæ¡ä»¶ç­¾çº¦
    } else if (playerChoice === 'counter') {
        // ç©å®¶å†æ¬¡å‡ºä»·ï¼ˆæœ€å¤š3è½®ï¼‰
    } else {
        // è°ˆåˆ¤ç ´è£‚
    }
});
```

---


## äºŒã€å›½é™…ç»„ç»‡ç³»ç»Ÿ

### 2.1 è®¾è®¡ç†å¿µ

å€Ÿé‰´Pç¤¾æ¸¸æˆçš„"æ´¾ç³»"æ¦‚å¿µï¼Œåœ¨ç°æœ‰`nation.allies[]`åŸºç¡€ä¸Šï¼Œåˆ›å»ºå¤šå±‚çº§çš„å›½é™…ç»„ç»‡ç³»ç»Ÿã€‚

### 2.2 ç»„ç»‡ç±»å‹

```mermaid
graph LR
    A[å›½é™…ç»„ç»‡] --> B[å†›äº‹è”ç›Ÿ]
    A --> C[ç»æµè”ç›Ÿ]
    A --> D[è´¸æ˜“åŒº]
    
    B --> B1["é˜²å¾¡åŒç›Ÿ<br/>(ç±»ä¼¼åŒ—çº¦)"]
    C --> C1["ç»æµå…±åŒä½“<br/>(ç±»ä¼¼æ¬§ç›Ÿ)"]
    D --> D1["è‡ªè´¸åŒº<br/>(ç±»ä¼¼RCEP)"]
```

### 2.3 å†›äº‹è”ç›Ÿ (Military Alliance)

> [!NOTE]
> ğŸ”“ **è§£é”æ—¶ä»£**ï¼šå°å»ºæ—¶ä»£ (Era 3) | å°å»ºéª‘å£«å›¢å’Œå®—ä¸»è”ç›Ÿçš„åˆ¶åº¦åŒ–

#### æ•°æ®ç»“æ„

æ–°å¢`gameState.organizations[]`:

```javascript
{
  id: string,                    // ç»„ç»‡ID
  name: string,                  // ç»„ç»‡åç§°
  type: 'military_alliance' | 'economic_bloc' | 'trade_zone',
  foundedDay: number,            // æˆç«‹æ—¥æœŸ
  leaderId: string,              // ç›Ÿä¸»ï¼ˆå›½å®¶IDæˆ–'player'ï¼‰
  members: string[],             // æˆå‘˜å›½å®¶IDåˆ—è¡¨
  applicants: string[],          // ç”³è¯·åŠ å…¥çš„å›½å®¶
  charter: {                     // ç»„ç»‡ç« ç¨‹
    mutualDefense: boolean,      // å…±åŒé˜²å¾¡æ¡æ¬¾
    votingThreshold: number,     // è¡¨å†³é€šè¿‡æ¯”ä¾‹
    minimumRelation: number,     // æœ€ä½æˆå‘˜å…³ç³»è¦æ±‚
  },
  warInvolvement: {              // æˆ˜äº‰ç‰µè¿çŠ¶æ€
    atWarWith: string[],         // ä¸ç»„ç»‡äº¤æˆ˜çš„å›½å®¶
    warDeclaredDay: number,
  }
}
```

#### æˆç«‹æ¡ä»¶
- å‘èµ·å›½éœ€ä¸è‡³å°‘1ä¸ªå›½å®¶å…³ç³»â‰¥70
- å‘èµ·å›½éœ€éæˆ˜äº‰çŠ¶æ€
- æ¯ä¸ªå›½å®¶åªèƒ½åŠ å…¥1ä¸ªå†›äº‹è”ç›Ÿ

#### ç»„ç»‡æ•ˆæœ
- **å…±åŒé˜²å¾¡**ï¼šæˆå‘˜è¢«æ”»å‡»æ—¶ï¼Œæ‰€æœ‰æˆå‘˜è‡ªåŠ¨å¯¹æ”»å‡»è€…å®£æˆ˜
- **å†›äº‹åè°ƒ**ï¼šæˆå‘˜å›½`militaryStrength`+10%
- **æƒ…æŠ¥å…±äº«**ï¼šå¯æŸ¥çœ‹æˆå‘˜çš„çœŸå®å†›äº‹åŠ›é‡ï¼ˆæ— ä¼°ç®—è¯¯å·®ï¼‰

#### åŠ å…¥/é€€å‡ºæœºåˆ¶
- åŠ å…¥éœ€å…¨ä½“æˆå‘˜åŒæ„ï¼ˆåŸºäº`foreignRelations`ï¼‰
- é€€å‡ºéœ€æ”¯ä»˜"é€€ç›Ÿè´¹"ï¼ˆæŒ‰æˆå‘˜è´¡çŒ®è®¡ç®—ï¼‰
- è¢«æ”»å‡»æ—¶é€€å‡ºè§†ä¸ºèƒŒå›ï¼Œå…³ç³»-30

### 2.4 ç»æµå…±åŒä½“ (Economic Bloc)

> [!NOTE]
> ğŸ”“ **è§£é”æ—¶ä»£**ï¼šå¯è’™æ—¶ä»£ (Era 5) | å›½é™…æ³•ä¸å¤šè¾¹ç»æµåˆä½œçš„è¯ç”Ÿ

#### ç»„ç»‡æ•ˆæœ
- æˆå‘˜é—´è´¸æ˜“å…³ç¨ç»Ÿä¸€ä¸º5%
- æˆå‘˜`developmentRate`+5%
- æˆå‘˜é—´å¸‚åœºä»·æ ¼æ³¢åŠ¨åŒæ­¥

#### ç‰¹æ®Šæœºåˆ¶ï¼šå…±åŒå¸‚åœº
- å•†äººå¯åœ¨ä»»æ„æˆå‘˜å›½é—´è‡ªç”±æµåŠ¨
- èµ„æºçŸ­ç¼ºæ—¶è‡ªåŠ¨ä»æˆå‘˜å›½è¿›å£ï¼ˆä¼˜å…ˆçº§é«˜äºéæˆå‘˜ï¼‰

### 2.5 è‡ªç”±è´¸æ˜“åŒº (Trade Zone)

> [!NOTE]
> ğŸ”“ **è§£é”æ—¶ä»£**ï¼šå¯è’™æ—¶ä»£ (Era 5) | é‡å•†ä¸»ä¹‰ä¸è‡ªç”±è´¸æ˜“ç†è®ºçš„å‘å±•

æœ€æ¾æ•£çš„ç»æµç»„ç»‡å½¢å¼ï¼š

| å±æ€§ | å€¼ |
|------|-----|
| æˆå‘˜ä¸Šé™ | æ— é™åˆ¶ |
| å…³ç¨æ”¿ç­– | åŒºå†…å…³ç¨0%ï¼Œå¯¹å¤–å„è‡ªæ”¿ç­– |
| åŠ å…¥æ¡ä»¶ | å…³ç³»â‰¥50ï¼Œéæˆ˜äº‰çŠ¶æ€ |

**ç‰¹æ®ŠåŠŸèƒ½**ï¼šå¯é’ˆå¯¹ç‰¹å®šå•†å“å»ºç«‹ä¸“é—¨è´¸æ˜“åŒº
- ç²®é£Ÿè´¸æ˜“åŒºï¼šä»…foodå…å…³ç¨
- å¥¢ä¾ˆå“è´¸æ˜“åŒºï¼šspice, coffeeå…å…³ç¨
- çŸ¿äº§è´¸æ˜“åŒºï¼širon, copper, coalå…å…³ç¨

---

## ä¸‰ã€å›½å®¶å…³ç³»ç³»ç»Ÿï¼ˆæ·±åŒ–ç‰ˆï¼‰

### 3.1 è®¾è®¡ç†å¿µ

åœ¨ç°æœ‰`nation.relation`å’Œ`nation.alliedWithPlayer`åŸºç¡€ä¸Šï¼Œå¢åŠ æ›´å¤æ‚çš„å›½å®¶ä»å±å…³ç³»ï¼Œå¹¶**æ·±åº¦æ•´åˆç»æµä¸æ”¿æ²»ç³»ç»Ÿ**ã€‚

> [!IMPORTANT]
> æ ¸å¿ƒåŸåˆ™ï¼šæ‰€æœ‰é™„åº¸/æ®–æ°‘å…³ç³»éƒ½å¿…é¡»ä¸ç°æœ‰`å¸‚åœºç³»ç»Ÿ`ã€`äº§ä¸šé“¾ç³»ç»Ÿ`å’Œ`é˜¶å±‚ç³»ç»Ÿ`äº§ç”Ÿå®é™…äº¤äº’ã€‚

### 3.2 å…³ç³»ç±»å‹å±‚çº§

```mermaid
graph TD
    A[ä¸»æƒå›½å®¶] --> B[åŒç›Ÿå›½]
    A --> C[é™„åº¸å›½]
    C --> D["ä¿æŠ¤å›½<br/>(é«˜è‡ªä¸»)"]
    C --> E["æœè´¡å›½<br/>(ä¸­è‡ªä¸»)"]
    C --> F["å‚€å„¡å›½<br/>(ä½è‡ªä¸»)"]
    A --> G["æ®–æ°‘åœ°<br/>(æ— è‡ªä¸»)"]
    
    style D fill:#90EE90
    style E fill:#FFD700
    style F fill:#FFA500
    style G fill:#FF6347
```

> [!NOTE]
> ğŸ”“ **é™„åº¸/æ®–æ°‘å…³ç³»æ—¶ä»£è§£é”**

| å…³ç³»ç±»å‹ | è§£é”æ—¶ä»£ | è®¾è®¡ç†ç”± |
|----------|----------|----------|
| **ä¿æŠ¤å›½** | å¤å…¸æ—¶ä»£ (Era 2) | å¸Œè…ŠåŸé‚¦åŒç›Ÿã€ç½—é©¬çš„ç›Ÿé‚¦ä½“ç³» |
| **æœè´¡å›½** | å°å»ºæ—¶ä»£ (Era 3) | ä¸­åæœè´¡ä½“ç³»ã€æ¬§æ´²å®—ä¸»è—©å± |
| **æ®–æ°‘åœ°** | æ¢ç´¢æ—¶ä»£ (Era 4) | å¤§èˆªæµ·æ—¶ä»£çš„æ®–æ°‘æ‰©å¼  |
| **å‚€å„¡å›½** | å·¥ä¸šæ—¶ä»£ (Era 6) | ç°ä»£å¸å›½ä¸»ä¹‰ä¸é—´æ¥ç»Ÿæ²» |

---

### 3.3 é™„åº¸ä¸æ®–æ°‘å¯¹æœ¬å›½ç»æµçš„å½±å“

#### 3.3.1 èµ„æºæµåŠ¨æ€»è§ˆ

| å…³ç³»ç±»å‹ | æœè´¡ | è´¸æ˜“å…³ç¨ | èµ„æºæ å¤º | å¸‚åœºå‡†å…¥ | äº§ä¸šæ§åˆ¶ |
|---------|------|---------|---------|---------|---------|
| **ä¿æŠ¤å›½** | GDP 8% | å‡å…50% | âŒ | ä¼˜å…ˆ | âŒ |
| **æœè´¡å›½** | GDP 15% | å‡å…75% | æœ‰é™ | ç‹¬å  | éƒ¨åˆ† |
| **å‚€å„¡å›½** | GDP 25% | 0% | å…¨é¢ | å„æ–­ | å…¨é¢ |
| **æ®–æ°‘åœ°** | GDP 35% | 0% | å¼ºåˆ¶é…é¢ | å¼ºåˆ¶ | å®Œå…¨ |

#### 3.3.2 æœè´¡æœºåˆ¶ï¼ˆæ¯30å¤©ç»“ç®—ï¼‰

```javascript
// æœè´¡è®¡ç®— - åŸºäºGDPå¢é‡ï¼Œéè´¢å¯Œå­˜é‡
const calculateTribute = (vassalNation) => {
    const quarterlyGDP = vassalNation.gdpLastQuarter || vassalNation.wealth * 0.05;
    const tributeBase = quarterlyGDP * vassalNation.tributeRate;
    
    // è°ƒæ•´å› å­
    const autonomyFactor = vassalNation.autonomy / 100; // è‡ªä¸»åº¦è¶Šé«˜ï¼Œå®é™…ç¼´çº³è¶Šå°‘
    const resistanceFactor = 1 - (vassalNation.independenceDesire / 200);
    
    return Math.floor(tributeBase * resistanceFactor * (1 - autonomyFactor * 0.3));
};
```

**æœè´¡åˆ†é…åˆ°é˜¶å±‚**ï¼š
- 50% è¿›å…¥å›½åº“ï¼ˆ`resources.silver`ï¼‰
- 30% åˆ†é…ç»™è´µæ—é˜¶å±‚ï¼ˆ`classWealth.landowner`, `classWealth.official`ï¼‰
- 20% åˆ†é…ç»™å•†äººé˜¶å±‚ï¼ˆ`classWealth.merchant`ï¼‰

è¿™æ„å‘³ç€æ‹¥æœ‰é™„åº¸å›½ä¼š**ç›´æ¥å¢åŠ ç©å®¶ä¸Šå±‚é˜¶çº§çš„è´¢å¯Œ**ï¼Œå½±å“é˜¶çº§æ»¡æ„åº¦å’Œå½±å“åŠ›åˆ†å¸ƒã€‚

---

### 3.4 ç©å®¶å›½æ°‘åœ¨é™„åº¸åœ°çš„æŠ•èµ„ä¸ç»æµæ´»åŠ¨

> [!IMPORTANT]
> **æ ¸å¿ƒåŸåˆ™**ï¼šæµ·å¤–æŠ•èµ„ = åœ¨é™„åº¸åœ°**å»ºé€ å»ºç­‘**ï¼Œç›ˆåˆ©ç”±`äº§å‡ºÃ—ä»·æ ¼ - æŠ•å…¥Ã—ä»·æ ¼ - å·¥èµ„`å†³å®šï¼Œä¸æœ¬å›½è®¡ç®—é€»è¾‘å®Œå…¨ä¸€è‡´ã€‚

#### 3.4.1 æŠ•èµ„ç³»ç»Ÿæ¦‚è§ˆ

```mermaid
graph LR
    A[ç©å®¶é˜¶å±‚è´¢å¯Œ] --> B[å»ºé€ æµ·å¤–å»ºç­‘]
    B --> C[å»ºç­‘è¿è¥]
    C --> D{è®¡ç®—ç›ˆäº}
    D --> E1[äº§å‡ºÃ—é™„åº¸åœ°ä»·æ ¼]
    D --> E2[æŠ•å…¥Ã—é™„åº¸åœ°ä»·æ ¼]
    D --> E3[å·¥èµ„Ã—é™„åº¸åœ°åŠ³åŠ¨åŠ›æˆæœ¬]
    E1 --> F[å‡€åˆ©æ¶¦å›æµ]
    E2 --> F
    E3 --> F
    F --> G[è¿›å…¥æŠ•èµ„è€…é˜¶å±‚è´¢å¯Œ]
```

#### 3.4.2 ç»Ÿä¸€æµ·å¤–å»ºç­‘ç³»ç»Ÿ

> [!IMPORTANT]
> **æ®–æ°‘åœ°/é™„åº¸å»ºç­‘ä¸æŠ•èµ„åè®®å»ºç­‘å…±ç”¨åŒä¸€å¥—ç³»ç»Ÿ**ï¼Œé€šè¿‡`accessType`å­—æ®µåŒºåˆ†æ¥æºå’Œæƒé™ã€‚

**ç»Ÿä¸€æ•°æ®ç»“æ„**ï¼š
```javascript
// ç»Ÿä¸€çš„æµ·å¤–å»ºç­‘è®°å½•
gameState.overseasBuildings = [
    {
        id: 'ob_001',
        buildingId: 'large_estate',           // å¼•ç”¨BUILDINGSé…ç½®
        nationId: 'nation_1',                 // æ‰€åœ¨å›½å®¶ID
        ownerStratum: 'landowner',            // ä¸šä¸»é˜¶å±‚ï¼ˆæœ¬å›½ï¼‰
        
        // æ ¸å¿ƒï¼šæ¥æºç±»å‹
        accessType: 'vassal' | 'treaty' | 'colony',
        // vassal: åœ¨é™„åº¸å›½ï¼ˆä¿æŠ¤å›½/æœè´¡å›½/å‚€å„¡å›½ï¼‰å»ºé€ 
        // treaty: é€šè¿‡æŠ•èµ„åè®®åœ¨ä¸»æƒå›½å®¶å»ºé€ 
        // colony: åœ¨æ®–æ°‘åœ°å»ºé€ 
        
        // è¿è¥çŠ¶æ€
        status: 'operating' | 'seized' | 'damaged' | 'destroyed',
        
        // å»ºé€ ä¿¡æ¯
        constructionCost: { wood: 100, plank: 25 },
        constructionDay: 1200,
        costInSilver: 5000,  // ç­‰å€¼é“¶å¸ï¼ˆç”¨äºèµ”å¿è®¡ç®—ï¼‰
        
        // è¿è¥æ•°æ®
        operatingData: { outputValue: 0, inputCost: 0, wageCost: 0, profit: 0 },
        
        // é£é™©çŠ¶æ€
        riskData: { nationalizationRisk: 0, laborUnrest: 0, warDamage: 0 },
    }
];
```

**æ¥æºç±»å‹å·®å¼‚**ï¼š

| å±æ€§ | æ®–æ°‘åœ°(colony) | é™„åº¸å›½(vassal) | æŠ•èµ„åè®®(treaty) |
|------|--------------|---------------|-----------------|
| **å¯å»ºå»ºç­‘** | ä»…é‡‡é›†ç±» | å—é™„åº¸ç­‰çº§é™åˆ¶ | é‡‡é›†+åŠ å·¥ç±» |
| **å·¥èµ„å‰¥å‰Š** | 70%å‹ä½ | 30-50%å‹ä½ | 15%è¡¥è´´ |
| **å›½æœ‰åŒ–é£é™©** | æä½ | ä½ | ä¸­ |
| **æˆ˜äº‰å¤„ç†** | æ— å½±å“ | å¯èƒ½è¢«å¾ç”¨ | è¢«æ²¡æ”¶ |
| **ç‹¬ç«‹æ—¶å¤„ç†** | å…¨éƒ¨æ²¡æ”¶ | å¯èƒ½ä¿ç•™ | N/A |

---

### 3.5 æˆ˜äº‰ä¸æµ·å¤–å»ºç­‘

> [!WARNING]
> å¼€æˆ˜ä¼šå¯¹æµ·å¤–å»ºç­‘äº§ç”Ÿé‡å¤§å½±å“ï¼Œç©å®¶éœ€æƒè¡¡æˆ˜äº‰æ”¶ç›Šä¸æµ·å¤–èµ„äº§æŸå¤±ã€‚

#### 3.5.1 æˆ˜äº‰çŠ¶æ€è½¬æ¢

```mermaid
stateDiagram-v2
    [*] --> Operating: å’Œå¹³æ—¶æœŸ
    Operating --> Seized: å®£æˆ˜(treatyç±»å‹)
    Operating --> Damaged: æˆ˜äº‰æœŸé—´(éšæœºäº‹ä»¶)
    Operating --> Operating: é™„åº¸å›½ä¿æŒå¿ è¯š
    Seized --> Operating: å’Œè°ˆè¿”è¿˜
    Seized --> Nationalized: æˆ˜äº‰æŒç»­>2å¹´
    Damaged --> Operating: ä¿®å¤
    Damaged --> Destroyed: ç»§ç»­å—æŸ
    Destroyed --> [*]: æ°¸ä¹…æŸå¤±
```

#### 3.5.2 æŒ‰æ¥æºç±»å‹çš„æˆ˜äº‰å¤„ç†

**æ®–æ°‘åœ°å»ºç­‘ (accessType: 'colony')**ï¼š
```javascript
// æ®–æ°‘åœ°æ˜¯ç©å®¶çš„é¢†åœŸï¼Œæˆ˜äº‰ä¸å½±å“å»ºç­‘
const processColonyWarEffect = (colony, building) => {
    // æ®–æ°‘åœ°å›ä¹±æ—¶æ‰å—å½±å“
    if (colony.rebellionActive) {
        building.status = 'damaged';
        building.riskData.warDamage += 20;
        addLog(`æ®–æ°‘åœ° ${colony.name} å›ä¹±ï¼Œ${building.name} å—æŸ`);
    }
};
```

**é™„åº¸å›½å»ºç­‘ (accessType: 'vassal')**ï¼š
```javascript
const processVassalWarEffect = (vassal, building) => {
    // æƒ…å†µ1ï¼šé™„åº¸å®£å¸ƒç‹¬ç«‹
    if (vassal.independenceWar) {
        building.status = 'seized';
        addLog(`${vassal.name} ç‹¬ç«‹æˆ˜äº‰ï¼Œ${building.name} è¢«å¾ç”¨`);
        return;
    }
    
    // æƒ…å†µ2ï¼šå®—ä¸»ä¸ç¬¬ä¸‰æ–¹äº¤æˆ˜
    if (playerAtWarWithThirdParty) {
        // é™„åº¸å›½å»ºç­‘ç»§ç»­è¿è¥ï¼Œä½†äº§å‡º-30%ï¼ˆæˆ˜äº‰å¹²æ‰°ï¼‰
        building.operatingData.warPenalty = 0.7;
    }
    
    // æƒ…å†µ3ï¼šé™„åº¸è¢«ç¬¬ä¸‰æ–¹æ”»å‡»
    if (vassal.isAtWar && !vassal.independenceWar) {
        building.riskData.warDamage += 10;  // å¯èƒ½å—æŸ
        if (building.riskData.warDamage > 50) {
            building.status = 'damaged';
        }
    }
};
```

**æŠ•èµ„åè®®å»ºç­‘ (accessType: 'treaty')**ï¼š
```javascript
const processTreatyWarEffect = (nation, building) => {
    // ä¸å»ºç­‘æ‰€åœ¨å›½å¼€æˆ˜ = å»ºç­‘è¢«æ²¡æ”¶
    if (nation.isAtWar && nation.warTarget === 'player') {
        building.status = 'seized';
        
        // è®¡ç®—æŸå¤±å¹¶å½±å“é˜¶å±‚è´¢å¯Œ
        const loss = building.costInSilver;
        classWealth[building.ownerStratum] -= loss * 0.5; // èµ„äº§å‡å€¼50%
        
        addLog(`âš ï¸ ä¸ ${nation.name} å¼€æˆ˜ï¼Œ${building.name} è¢«æ²¡æ”¶ï¼`);
        addLog(`${STRATA[building.ownerStratum].name}é˜¶å±‚æŸå¤± ${loss * 0.5} é“¶å¸`);
        
        // å½±å“è¯¥é˜¶å±‚æ»¡æ„åº¦ï¼ˆæˆ˜äº‰å¯¼è‡´æµ·å¤–èµ„äº§æŸå¤±ï¼‰
        stratumApprovalModifiers[building.ownerStratum] -= 10;
        
        return;
    }
    
    // æ‰€åœ¨å›½ä¸ç¬¬ä¸‰æ–¹äº¤æˆ˜ = è¿è¥å—é˜»
    if (nation.isAtWar) {
        building.operatingData.warPenalty = 0.5;  // äº§å‡º-50%
    }
};
```

#### 3.5.3 æˆ˜åå¤„ç†

**å’Œè°ˆæ¡æ¬¾ä¸­çš„æµ·å¤–å»ºç­‘**ï¼š
```javascript
// å’Œå¹³åè®®å¯åŒ…å«å»ºç­‘è¿”è¿˜/èµ”å¿æ¡æ¬¾
const PEACE_TREATY_BUILDING_CLAUSES = {
    // è¿”è¿˜è¢«æ²¡æ”¶å»ºç­‘
    return_buildings: {
        warScore: 50,  // éœ€è¦æˆ˜äº‰åˆ†æ•°50+
        effect: (nation) => {
            const seized = gameState.overseasBuildings.filter(
                b => b.nationId === nation.id && b.status === 'seized'
            );
            seized.forEach(b => { b.status = 'operating'; });
            addLog(`${nation.name} å½’è¿˜äº† ${seized.length} åº§å»ºç­‘`);
        },
    },
    
    // èµ”å¿è¢«æ²¡æ”¶å»ºç­‘ä»·å€¼
    compensate_buildings: {
        warScore: 30,
        effect: (nation) => {
            const seized = gameState.overseasBuildings.filter(
                b => b.nationId === nation.id && b.status === 'seized'
            );
            const totalValue = seized.reduce((sum, b) => sum + b.costInSilver, 0);
            resources.silver += totalValue;
            addLog(`è·å¾— ${totalValue} é“¶å¸ä½œä¸ºè¢«æ²¡æ”¶èµ„äº§èµ”å¿`);
        },
    },
    
    // å¼ºåˆ¶å¼€æ”¾æŠ•èµ„æƒ
    forced_investment_access: {
        warScore: 80,
        effect: (nation) => {
            nation.treaties.investment_pact = {
                status: 'active',
                forced: true,  // å¼ºåˆ¶ç­¾ç½²
                expiresDay: daysElapsed + 1825,
            };
            addLog(`å¼ºåˆ¶ ${nation.name} å¼€æ”¾æŠ•èµ„å¸‚åœº`);
        },
    },
};
```

#### 3.5.4 å›½æœ‰åŒ–äº‹ä»¶è¯¦è§£

> [!IMPORTANT]
> **å›½æœ‰åŒ–**æ˜¯æŒ‡å¤–å›½æ”¿åºœå°†ç©å®¶æµ·å¤–å»ºç­‘æ”¶å½’å›½æœ‰ï¼Œç©å®¶æ°¸ä¹…å¤±å»è¯¥å»ºç­‘åŠå…¶èµ„äº§ä»·å€¼ã€‚

**è§¦å‘æ¡ä»¶**ï¼ˆæ»¡è¶³ä»»ä¸€ï¼‰ï¼š

| æ¡ä»¶ | è¯´æ˜ |
|------|------|
| é•¿æœŸæˆ˜äº‰ | ä¸è¯¥å›½æˆ˜äº‰æŒç»­>730å¤©ï¼ˆ2å¹´ï¼‰ |
| å…³ç³»æå·® | å…³ç³»<10 ä¸” è¯¥å›½aggression>0.6 |
| æ”¿æƒæ›´è¿­ | å›å†›èƒœåˆ©å»ºç«‹æ–°æ”¿æƒ |
| æ°‘æ—ä¸»ä¹‰æµªæ½® | éšæœºäº‹ä»¶ï¼ˆæ¦‚ç‡åŸºäºå…³ç³»å’Œç¨³å®šåº¦ï¼‰ |

**å›½æœ‰åŒ–å¤„ç†æµç¨‹**ï¼š
```javascript
const processNationalization = (nation, building) => {
    // 1. çŠ¶æ€å˜æ›´
    building.status = 'nationalized';
    
    // 2. èµ„äº§æŸå¤±è®¡ç®—
    const totalLoss = building.costInSilver;
    
    // 3. é˜¶å±‚è´¢å¯ŒæŸå¤±ï¼ˆå…¨éƒ¨ï¼‰
    classWealth[building.ownerStratum] -= totalLoss;
    gameState.overseasAssets[building.ownerStratum] -= totalLoss;
    
    // 4. é˜¶å±‚æ»¡æ„åº¦å½±å“
    stratumApprovalModifiers[building.ownerStratum] -= 15;
    
    // 5. å»ºç­‘è½¬å½’å½“åœ°æ”¿åºœï¼ˆä¸å†äº§ç”Ÿåˆ©æ¶¦ï¼‰
    building.ownerStratum = 'foreign_government';
    
    // 6. å›½é™…å½±å“
    nation.diplomaticReputation -= 10;  // å›½æœ‰åŒ–æŸå®³è¯¥å›½ä¿¡èª‰
    
    // 7. è§¦å‘å¤–äº¤äº‹ä»¶
    triggerNationalizationEvent(nation, building, totalLoss);
};
```

**ç©å®¶åº”å¯¹é€‰é¡¹**ï¼ˆé€šè¿‡äº‹ä»¶å‘ˆç°ï¼‰ï¼š
| é€‰é¡¹ | æ•ˆæœ |
|------|------|
| å¤–äº¤æŠ—è®® | å…³ç³»-10ï¼Œæœ‰5%æ¦‚ç‡è·å¾—éƒ¨åˆ†èµ”å¿ |
| ç»æµåˆ¶è£ | ä¸­æ–­è´¸æ˜“ï¼Œå…³ç¨+50% |
| å†›äº‹å¨èƒ | è‹¥å†›äº‹åŠ›é‡>3å€ï¼Œæœ‰æ¦‚ç‡è¿½å› |
| æ­¦åŠ›å¤ºå› | å®£æˆ˜ |
| æ¥å—ç°å® | æ— åç»­ |

---

### 3.6 æµ·å¤–å»ºç­‘è¯¦ç»†ç»“ç®—æœºåˆ¶

> [!IMPORTANT]
> æµ·å¤–å»ºç­‘å¯é€‰æ‹©**è¿è¥æ¨¡å¼**ï¼Œå†³å®šåŸææ–™æ¥æºå’Œäº§å“é”€å”®å¸‚åœºã€‚

#### 3.6.1 è¿è¥æ¨¡å¼

ç©å®¶å¯ä¸ºæ¯åº§æµ·å¤–å»ºç­‘é€‰æ‹©è¿è¥æ¨¡å¼ï¼š

| æ¨¡å¼ | åŸææ–™æ¥æº | äº§å“é”€å”® | é€‚ç”¨åœºæ™¯ |
|------|-----------|---------|---------|
| **å½“åœ°è¿è¥** | å½“åœ°å¸‚åœº | å½“åœ°å¸‚åœº | é»˜è®¤æ¨¡å¼ï¼Œä½æˆæœ¬ä½é£é™© |
| **å€¾é”€æ¨¡å¼** | æœ¬å›½é‡‡è´­ | å½“åœ°å€¾é”€ | æ¶ˆåŒ–æœ¬å›½è¿‡å‰©äº§èƒ½ |
| **å›è´­æ¨¡å¼** | å½“åœ°é‡‡è´­ | æœ¬å›½é”€å”® | è·å–å½“åœ°å»‰ä»·èµ„æº |

**æ•°æ®ç»“æ„æ‰©å±•**ï¼š
```javascript
overseasBuilding.operatingMode = 'local' | 'dumping' | 'buyback';
```

#### 3.6.2 æ¨¡å¼è¯¦è§£

**å½“åœ°è¿è¥æ¨¡å¼ (local)** - é»˜è®¤ï¼š
```javascript
// åŸææ–™ï¼šå½“åœ°å¸‚åœºä»·æ ¼ï¼Œå½“åœ°åº“å­˜
// äº§å‡ºï¼šè¿›å…¥å½“åœ°å¸‚åœº
const processLocalMode = (building, nation) => {
    inputCost = calculateFromLocal(building, nation);  // å½“åœ°ä»·æ ¼
    outputValue = sellToLocal(building, nation);        // å½“åœ°ä»·æ ¼
    return outputValue - inputCost - wageCost;
};
```

**å€¾é”€æ¨¡å¼ (dumping)**ï¼š
```javascript
// åŸææ–™ï¼šä»æœ¬å›½è¿è¾“ï¼ˆæœ¬å›½ä»·æ ¼ + è¿è´¹ï¼‰
// äº§å‡ºï¼šåœ¨å½“åœ°å€¾é”€ï¼ˆå½“åœ°ä»·æ ¼ Ã— 0.8ï¼ŒæŒ¤å å½“åœ°å¸‚åœºï¼‰
const processDumpingMode = (building, nation) => {
    // 1. ä»æœ¬å›½èµ„æºæ‰£é™¤åŸææ–™
    for (const [key, amount] of Object.entries(config.input)) {
        resources[key] -= amount;
    }
    
    // 2. æˆæœ¬ = æœ¬å›½ä»·æ ¼ + 15%è¿è´¹
    inputCost = calculateFromHome(building) * 1.15;
    
    // 3. äº§å‡ºè¿›å…¥å½“åœ°å¸‚åœºï¼ˆä»·æ ¼å‹ä½20%ï¼‰
    const dumpingPrice = nation.prices[key] * 0.8;
    outputValue = calculateOutput(building) * dumpingPrice;
    
    // 4. æŒ¤å å½“åœ°å¸‚åœºï¼šé™ä½å½“åœ°åŒç±»å»ºç­‘åˆ©æ¶¦
    depressLocalIndustry(nation, building.outputType);
    
    // 5. å½±å“å½“åœ°é˜¶å±‚æ»¡æ„åº¦ï¼ˆå·¥åŒ /å•†äººä¸æ»¡ï¼‰
    nation.socialStructure.commoners.satisfaction -= 3;
    
    return outputValue - inputCost - wageCost;
};
```

**å›è´­æ¨¡å¼ (buyback)**ï¼š
```javascript
// åŸææ–™ï¼šå½“åœ°é‡‡è´­ï¼ˆå½“åœ°ä»·æ ¼ï¼‰
// äº§å‡ºï¼šè¿å›æœ¬å›½é”€å”®ï¼ˆæœ¬å›½ä»·æ ¼ - 15%è¿è´¹ï¼‰
const processBuybackMode = (building, nation) => {
    // 1. ä»å½“åœ°åº“å­˜é‡‡è´­
    for (const [key, amount] of Object.entries(config.input)) {
        nation.inventories[key] -= amount;
    }
    
    // 2. æˆæœ¬ = å½“åœ°ä»·æ ¼
    inputCost = calculateFromLocal(building, nation);
    
    // 3. äº§å‡ºè¿å›æœ¬å›½
    for (const [key, amount] of Object.entries(config.output)) {
        if (key === 'maxPop') continue;
        resources[key] += amount;  // è¿›å…¥æœ¬å›½åº“å­˜
    }
    
    // 4. ä»·å€¼ = æœ¬å›½ä»·æ ¼ - 15%è¿è´¹
    outputValue = calculateToHome(building) * 0.85;
    
    return outputValue - inputCost - wageCost;
};
```

#### 3.6.3 æ¨¡å¼é€‰æ‹©ç­–ç•¥

```mermaid
graph TD
    A{é€‰æ‹©è¿è¥æ¨¡å¼} --> B{æœ¬å›½èµ„æºè¿‡å‰©?}
    B -->|æ˜¯| C[å€¾é”€æ¨¡å¼]
    B -->|å¦| D{å½“åœ°èµ„æºä¾¿å®œ?}
    D -->|æ˜¯| E[å›è´­æ¨¡å¼]
    D -->|å¦| F[å½“åœ°è¿è¥]
    
    C --> G[æ¶ˆåŒ–äº§èƒ½ + æŒ¤å å¤–å›½å¸‚åœº]
    E --> H[è·å–å»‰ä»·èµ„æº + å‡å°‘æœ¬å›½å¼€é‡‡]
    F --> I[ä½é£é™© + ç¨³å®šåˆ©æ¶¦]
```

#### 3.6.4 æ¨¡å¼å½±å“å¯¹æ¯”

| å½±å“ | å½“åœ°è¿è¥ | å€¾é”€æ¨¡å¼ | å›è´­æ¨¡å¼ |
|------|---------|---------|---------|
| **åˆ©æ¶¦æ¥æº** | å½“åœ°ä»·å·® | ä½æˆæœ¬å€¾é”€ | èµ„æºä»·å·® |
| **æœ¬å›½èµ„æº** | æ— å½±å“ | æ¶ˆè€— | å¢åŠ  |
| **å½“åœ°èµ„æº** | æ¶ˆè€— | æ— å½±å“ | æ¶ˆè€— |
| **å½“åœ°æ»¡æ„åº¦** | ä¸­ç«‹ | ä¸‹é™ | ä¸­ç«‹ |
| **è¿è¾“æˆæœ¬** | æ—  | +15% | +15% |
| **ç‹¬ç«‹å€¾å‘** | æ— å½±å“ | +5%/å¹´ | +2%/å¹´ |

---

#### 3.6.5 ç»Ÿä¸€ç»“ç®—æµç¨‹

```javascript
// æ ¹æ®æ¨¡å¼é€‰æ‹©ç»“ç®—æ–¹å¼
const processOverseasBuildingProfit = (building, nation) => {
    const mode = building.operatingMode || 'local';
    
    switch (mode) {
        case 'dumping':
            return processDumpingMode(building, nation);
        case 'buyback':
            return processBuybackMode(building, nation);
        default:
            return processLocalMode(building, nation);
    }
};
```

#### 3.6.2 å²—ä½ä¸äººå£

**åŸåˆ™ï¼šå²—ä½ç”±å½“åœ°äººå£å¡«å……ï¼Œä¸æ¶ˆè€—æœ¬å›½äººå£**

```javascript
// æµ·å¤–å»ºç­‘å²—ä½ç»“ç®—
const processOverseasBuildingJobs = (building, nation) => {
    const config = BUILDINGS.find(b => b.id === building.buildingId);
    
    // å²—ä½ç”±å½“åœ°äººå£å¡«å……
    for (const [stratumKey, count] of Object.entries(config.jobs || {})) {
        // æ£€æŸ¥å½“åœ°æ˜¯å¦æœ‰è¶³å¤Ÿäººå£
        const localPopulation = nation.socialStructure?.[mapToSimplifiedStratum(stratumKey)]?.ratio || 0;
        const availableWorkers = Math.floor(nation.population * localPopulation);
        
        if (availableWorkers < count) {
            // åŠ³åŠ¨åŠ›ä¸è¶³ï¼šäº§å‡ºé™ä½
            building.operatingData.laborShortage = 1 - (availableWorkers / count);
        }
        
        // å·¥èµ„æ”¯ä»˜ç»™å½“åœ°ï¼ˆå½±å“å½“åœ°é˜¶å±‚æ»¡æ„åº¦ï¼‰
        const wage = calculateVassalWage(nation, stratumKey);
        building.operatingData.wageCost += count * wage;
        
        // å½“åœ°å·¥äººè·å¾—æ”¶å…¥ â†’ æ»¡æ„åº¦å˜åŒ–
        // ï¼ˆä½äºå¸‚åœºä»·ä¼šé™ä½æ»¡æ„åº¦ï¼‰
        const marketWage = calculateMarketWage(stratumKey);
        if (wage < marketWage * 0.8) {
            nation.socialStructure[mapToSimplifiedStratum(stratumKey)].satisfaction -= 2;
        }
    }
};

// é˜¶å±‚æ˜ å°„ï¼šè¯¦ç»†é˜¶å±‚ â†’ ç®€åŒ–é˜¶å±‚
const mapToSimplifiedStratum = (stratum) => ({
    peasant: 'commoners', serf: 'underclass', worker: 'commoners',
    artisan: 'commoners', miner: 'commoners', lumberjack: 'commoners',
    merchant: 'elites', capitalist: 'elites', landowner: 'elites',
    official: 'elites', engineer: 'elites', scribe: 'elites',
})[stratum] || 'commoners';
```

#### 3.6.3 è¾“å…¥ä¸äº§å‡º

**åŸåˆ™ï¼šä½¿ç”¨å½“åœ°å¸‚åœºä»·æ ¼ï¼Œèµ„æºä¸è·¨å¢ƒæµåŠ¨**

```javascript
// æµ·å¤–å»ºç­‘äº§å‡ºç»“ç®—
const processOverseasBuildingProduction = (building, nation) => {
    const config = BUILDINGS.find(b => b.id === building.buildingId);
    
    // 1. åŸææ–™ä»å½“åœ°å¸‚åœºé‡‡è´­
    let inputCost = 0;
    let inputAvailable = true;
    
    for (const [resourceKey, amount] of Object.entries(config.input || {})) {
        const localPrice = nation.prices?.[resourceKey] || getBasePrice(resourceKey);
        const localInventory = nation.inventories?.[resourceKey] || 0;
        
        // æ£€æŸ¥å½“åœ°æ˜¯å¦æœ‰è¶³å¤ŸåŸææ–™
        if (localInventory < amount) {
            inputAvailable = false;
            building.operatingData.supplyShortage = true;
        }
        
        // ä»å½“åœ°åº“å­˜æ‰£é™¤
        nation.inventories[resourceKey] = Math.max(0, localInventory - amount);
        inputCost += amount * localPrice;
    }
    
    // 2. äº§å‡ºè¿›å…¥å½“åœ°å¸‚åœº
    let outputValue = 0;
    if (inputAvailable) {
        for (const [resourceKey, amount] of Object.entries(config.output || {})) {
            if (resourceKey === 'maxPop') continue;
            
            // äº§å‡ºä¹˜ä»¥åŠ³åŠ¨åŠ›æ•ˆç‡
            const effectiveAmount = amount * (1 - (building.operatingData.laborShortage || 0));
            
            // æ·»åŠ åˆ°å½“åœ°åº“å­˜
            nation.inventories[resourceKey] = (nation.inventories[resourceKey] || 0) + effectiveAmount;
            
            // ä½¿ç”¨å½“åœ°ä»·æ ¼è®¡ç®—ä»·å€¼
            const localPrice = nation.prices?.[resourceKey] || getBasePrice(resourceKey);
            outputValue += effectiveAmount * localPrice;
        }
    }
    
    // 3. åˆ©æ¶¦è®¡ç®—
    const wageCost = building.operatingData.wageCost;
    const profit = outputValue - inputCost - wageCost;
    
    return { outputValue, inputCost, wageCost, profit };
};
```

#### 3.6.4 åˆ©æ¶¦å›æµ

**åŸåˆ™ï¼šåˆ©æ¶¦ä»¥é“¶å¸å½¢å¼å›æµæœ¬å›½ä¸šä¸»é˜¶å±‚**

```javascript
// åˆ©æ¶¦å›æµæœºåˆ¶
const repatriateProfit = (building, profit, nation) => {
    // 1. æ£€æŸ¥åˆ©æ¶¦æ±‡å›é™åˆ¶
    let repatriationRate = 1.0;  // é»˜è®¤100%å¯æ±‡å›
    
    // æ— æŠ•èµ„åè®®ï¼š20%è¢«å½“åœ°æ”¿åºœæˆªç•™
    if (!nation.treaties?.investment_pact?.status === 'active') {
        repatriationRate = 0.8;
    }
    
    // æˆ˜äº‰æœŸé—´ï¼šæ— æ³•æ±‡å›
    if (nation.isAtWar) {
        repatriationRate = 0;
        building.operatingData.frozenProfit = 
            (building.operatingData.frozenProfit || 0) + profit;
        return;
    }
    
    // 2. åˆ©æ¶¦è¿›å…¥ä¸šä¸»é˜¶å±‚è´¢å¯Œ
    const actualProfit = profit * repatriationRate;
    classWealth[building.ownerStratum] += actualProfit;
    
    // 3. è¢«æˆªç•™éƒ¨åˆ†è¿›å…¥å½“åœ°æ”¿åºœ
    const retained = profit * (1 - repatriationRate);
    nation.wealth += retained;
    
    // 4. è®°å½•åˆ©æ¶¦å†å²
    building.operatingData.profitHistory.push({
        day: daysElapsed,
        gross: profit,
        repatriated: actualProfit,
        retained: retained,
    });
};
```

---

### 3.7 å¤–å›½æŠ•èµ„æœ¬å›½ï¼ˆå¤–èµ„ç³»ç»Ÿï¼‰

> [!IMPORTANT]
> **åŒå‘æ€§**ï¼šå¦‚æœç©å®¶ç­¾ç½²æŠ•èµ„åè®®æˆ–æˆä¸ºé™„åº¸ï¼ŒAIå›½å®¶ä¹Ÿå¯ä»¥åœ¨ç©å®¶å›½å»ºé€ å»ºç­‘ã€‚

#### 3.7.1 å¤–èµ„è§¦å‘æ¡ä»¶

| æ¡ä»¶ | è¯´æ˜ |
|------|------|
| ç­¾ç½²æŠ•èµ„åè®® | AIå¯åœ¨ç©å®¶å›½å»ºé€ å»ºç­‘ï¼ˆä¸Šé™ä¸ºç©å®¶GDP 10%ï¼‰ |
| æˆä¸ºé™„åº¸ | å®—ä¸»å¯åœ¨ç©å®¶å›½è‡ªç”±å»ºé€  |
| æˆ˜äº‰å¤±è´¥ | è¢«è¿«å¼€æ”¾å¸‚åœº |

#### 3.7.2 å¤–èµ„å»ºç­‘æ•°æ®ç»“æ„

```javascript
// å¤–èµ„å»ºç­‘è®°å½•
gameState.foreignInvestments = [
    {
        id: 'fi_001',
        buildingId: 'factory',            // å»ºç­‘ç±»å‹
        ownerNationId: 'nation_1',        // å¤–å›½ä¸šä¸»
        investorStratum: 'capitalist',    // å¤–å›½ä¸šä¸»é˜¶å±‚ï¼ˆç”¨äºAIè®¡ç®—ï¼‰
        
        // è¿è¥æ•°æ®
        operatingData: {
            outputValue: 0,
            inputCost: 0,
            wageCost: 0,
            profit: 0,
        },
        
        status: 'operating' | 'nationalized',
    }
];
```

#### 3.7.3 å¤–èµ„å»ºç­‘ç»“ç®—

**å²—ä½ï¼šç”±æœ¬å›½äººå£å¡«å……**
```javascript
// å¤–èµ„å»ºç­‘æä¾›æœ¬å›½å²—ä½
const processInwardFDIJobs = (building) => {
    const config = BUILDINGS.find(b => b.id === building.buildingId);
    
    for (const [stratumKey, count] of Object.entries(config.jobs || {})) {
        // å²—ä½è®¡å…¥æœ¬å›½å°±ä¸š
        gameState.foreignInvestmentJobs[stratumKey] = 
            (gameState.foreignInvestmentJobs[stratumKey] || 0) + count;
        
        // å·¥èµ„ä»å¤–èµ„åˆ©æ¶¦æ”¯ä»˜ï¼Œè¿›å…¥æœ¬å›½é˜¶å±‚è´¢å¯Œ
        const wage = calculateWage(stratumKey); // ä½¿ç”¨æœ¬å›½å·¥èµ„æ ‡å‡†
        classWealth[stratumKey] += count * wage;
    }
};
```

**è¾“å…¥è¾“å‡ºï¼šä½¿ç”¨æœ¬å›½å¸‚åœº**
```javascript
const processInwardFDIProduction = (building) => {
    const config = BUILDINGS.find(b => b.id === building.buildingId);
    
    // 1. åŸææ–™ä»æœ¬å›½å¸‚åœºé‡‡è´­ï¼ˆæ¶ˆè€—æœ¬å›½èµ„æºï¼‰
    let inputCost = 0;
    for (const [resourceKey, amount] of Object.entries(config.input || {})) {
        resources[resourceKey] -= amount;
        inputCost += amount * marketPrices[resourceKey];
    }
    
    // 2. äº§å‡ºè¿›å…¥æœ¬å›½å¸‚åœºï¼ˆå¢åŠ æœ¬å›½èµ„æºï¼‰
    let outputValue = 0;
    for (const [resourceKey, amount] of Object.entries(config.output || {})) {
        if (resourceKey === 'maxPop') continue;
        resources[resourceKey] += amount;
        outputValue += amount * marketPrices[resourceKey];
    }
    
    // 3. åˆ©æ¶¦æµå‘å¤–å›½ï¼ˆå‡å°‘æœ¬å›½è´¢å¯Œæµé‡ï¼‰
    const wage = building.operatingData.wageCost;
    const profit = outputValue - inputCost - wage;
    
    // åˆ©æ¶¦æµå‡ºæœ¬å›½
    if (profit > 0) {
        // è¿™éƒ¨åˆ†è´¢å¯Œä¸è¿›å…¥æœ¬å›½é˜¶å±‚
        gameState.capitalOutflow += profit;
    }
    
    return { outputValue, inputCost, wage, profit };
};
```

#### 3.7.4 å¤–èµ„çš„å½±å“

**ç»æµå½±å“**ï¼š

| å½±å“ | è¯´æ˜ |
|------|------|
| â• å¢åŠ å°±ä¸š | å¤–èµ„å»ºç­‘æä¾›å²—ä½ï¼Œå·¥èµ„è¿›å…¥æœ¬å›½é˜¶å±‚ |
| â• å¢åŠ äº§å‡º | äº§å‡ºè¿›å…¥æœ¬å›½å¸‚åœºï¼Œå¢åŠ ä¾›ç»™ |
| â• æŠ€æœ¯æº¢å‡º | éƒ¨åˆ†å»ºç­‘æä¾›ç§‘æŠ€åŠ æˆ |
| â– åˆ©æ¶¦å¤–æµ | åˆ©æ¶¦ä¸è¿›å…¥æœ¬å›½é˜¶å±‚è´¢å¯Œ |
| â– èµ„æºæ¶ˆè€— | æ¶ˆè€—æœ¬å›½åŸææ–™ |
| â– å¸‚åœºç«äº‰ | æŒ¤å‹æœ¬å›½åŒç±»äº§ä¸š |

**é˜¶å±‚æ€åº¦**ï¼š

```javascript
const STRATUM_INWARD_FDI_ATTITUDE = {
    worker: { support: 0.7, reason: 'å¤–èµ„å¸¦æ¥å°±ä¸š' },
    artisan: { support: 0.3, reason: 'å¤–èµ„ç«äº‰å‹åŠ›' },
    merchant: { support: 0.5, reason: 'è´¸æ˜“æœºä¼švsç«äº‰' },
    capitalist: { support: 0.2, reason: 'æœ¬å›½èµ„æœ¬è¢«æŒ¤å‹' },
    official: { support: 0.6, reason: 'ç¨æ”¶å¢åŠ ' },
    peasant: { support: 0.5, reason: 'å½±å“æœ‰é™' },
};
```

#### 3.7.5 ç©å®¶åº”å¯¹å¤–èµ„é€‰é¡¹

| è¡ŒåŠ¨ | æ•ˆæœ | ä»£ä»· |
|------|------|------|
| **å›½æœ‰åŒ–** | æ”¶å½’å›½æœ‰ï¼Œè·å¾—å»ºç­‘ | å…³ç³»-50ï¼Œå¯èƒ½å¼•å‘æˆ˜äº‰ |
| **é™åˆ¶æ–°æŠ•èµ„** | ç¦æ­¢æ–°å»ºå¤–èµ„å»ºç­‘ | è¿åæŠ•èµ„åè®®ï¼Œå…³ç³»-20 |
| **æé«˜ç¨ç‡** | å¤–èµ„åˆ©æ¶¦æŠ½æˆå¢åŠ  | å‡å°‘å¤–èµ„å»ºè®¾æ„æ„¿ |
| **é©±é€å¤–èµ„** | æ‰€æœ‰å¤–èµ„å»ºç­‘å…³é—­ | å…³ç³»-30ï¼Œå¤±å»å°±ä¸šå²—ä½ |

```javascript
// å›½æœ‰åŒ–å¤–èµ„å»ºç­‘
const nationalizeInwardFDI = (building) => {
    const ownerNation = nations.find(n => n.id === building.ownerNationId);
    
    // 1. å»ºç­‘è½¬ä¸ºæœ¬å›½å»ºç­‘
    gameState.buildings[building.buildingId] = 
        (gameState.buildings[building.buildingId] || 0) + 1;
    
    // 2. ä»å¤–èµ„åˆ—è¡¨ç§»é™¤
    gameState.foreignInvestments = gameState.foreignInvestments
        .filter(b => b.id !== building.id);
    
    // 3. å¤–äº¤å½±å“
    ownerNation.relation -= 50;
    ownerNation.diplomaticMemory.push({
        type: 'nationalization',
        day: daysElapsed,
        impact: -50,
    });
    
    // 4. æœ¬å›½é˜¶å±‚æ€åº¦
    stratumApprovalModifiers.capitalist += 10;  // æœ¬å›½èµ„æœ¬å®¶æ»¡æ„
    stratumApprovalModifiers.worker -= 5;       // å·¥äººæ‹…å¿ƒå°±ä¸š
    
    addLog(`å°† ${ownerNation.name} çš„ ${building.name} å›½æœ‰åŒ–ï¼`);
};
```

---
```

---

#### 3.4.3 æµ·å¤–å»ºç­‘ç›ˆåˆ©è®¡ç®—

**ä¸æœ¬å›½å»ºç­‘å®Œå…¨ä¸€è‡´çš„è®¡ç®—é€»è¾‘**ï¼š

```javascript
// è®¡ç®—æµ·å¤–å»ºç­‘åˆ©æ¶¦ï¼ˆæ¯æ—¥è°ƒç”¨ï¼‰
const calculateOverseasBuildingProfit = (overseasBuilding, vassalNation) => {
    const buildingConfig = BUILDINGS.find(b => b.id === overseasBuilding.buildingId);
    
    // 1. è®¡ç®—äº§å‡ºä»·å€¼ï¼ˆä½¿ç”¨é™„åº¸åœ°å¸‚åœºä»·æ ¼ï¼‰
    let outputValue = 0;
    for (const [resourceKey, amount] of Object.entries(buildingConfig.output || {})) {
        const localPrice = vassalNation.prices?.[resourceKey] || getBasePrice(resourceKey);
        outputValue += amount * localPrice;
    }
    
    // 2. è®¡ç®—æŠ•å…¥æˆæœ¬ï¼ˆä½¿ç”¨é™„åº¸åœ°å¸‚åœºä»·æ ¼ï¼‰
    let inputCost = 0;
    for (const [resourceKey, amount] of Object.entries(buildingConfig.input || {})) {
        const localPrice = vassalNation.prices?.[resourceKey] || getBasePrice(resourceKey);
        inputCost += amount * localPrice;
    }
    
    // 3. è®¡ç®—å·¥èµ„æˆæœ¬ï¼ˆåŸºäºé™„åº¸åœ°åŠ³åŠ¨åŠ›æˆæœ¬ï¼‰
    let wageCost = 0;
    for (const [stratumKey, count] of Object.entries(buildingConfig.jobs || {})) {
        // é™„åº¸åœ°å·¥èµ„ = æœ¬åœ°ç”Ÿæ´»æˆæœ¬ Ã— æ®–æ°‘å‰¥å‰Šç³»æ•°
        const localLivingCost = calculateVassalLivingCost(vassalNation, stratumKey);
        const exploitationFactor = getExploitationFactor(vassalNation.sovereigntyStatus);
        wageCost += count * localLivingCost * exploitationFactor;
    }
    
    // 4. è®¡ç®—å‡€åˆ©æ¶¦
    const profit = outputValue - inputCost - wageCost;
    
    return { outputValue, inputCost, wageCost, profit };
};

// æ®–æ°‘å‰¥å‰Šç³»æ•°ï¼ˆå·¥èµ„å‹ä½ç¨‹åº¦ï¼‰
const getExploitationFactor = (status) => ({
    'protectorate': 0.9,   // ä¿æŠ¤å›½ï¼šå·¥èµ„æ¥è¿‘å¸‚åœºä»·
    'tributary': 0.7,      // æœè´¡å›½ï¼šå·¥èµ„å‹ä½30%
    'puppet': 0.5,         // å‚€å„¡å›½ï¼šå·¥èµ„å‹ä½50%
    'colony': 0.3,         // æ®–æ°‘åœ°ï¼šå·¥èµ„å‹ä½70%
})[status] || 1.0;
```

#### 3.4.4 æµ·å¤–å»ºç­‘å»ºé€ 

**å»ºé€ æµç¨‹**ï¼š
1. ç©å®¶é€‰æ‹©é™„åº¸/æ®–æ°‘åœ°
2. é€‰æ‹©å¯å»ºé€ çš„å»ºç­‘ç±»å‹ï¼ˆå—é™äºæ®–æ°‘ç­‰çº§ï¼‰
3. ä»æœ¬å›½èµ„æºæ”¯ä»˜å»ºé€ æˆæœ¬
4. å»ºé€ æˆæœ¬è®¡å…¥å¯¹åº”é˜¶å±‚çš„"æµ·å¤–èµ„äº§"

```javascript
// å»ºé€ æµ·å¤–å»ºç­‘
const buildOverseasBuilding = (buildingId, nationId, investorStratum) => {
    const buildingConfig = BUILDINGS.find(b => b.id === buildingId);
    const targetNation = nations.find(n => n.id === nationId);
    
    // 1. æ£€æŸ¥å»ºé€ æƒé™
    if (!canBuildOverseas(buildingId, targetNation)) {
        throw new Error('è¯¥é™„åº¸åœ°ä¸å…è®¸å»ºé€ æ­¤ç±»å»ºç­‘');
    }
    
    // 2. ä»æœ¬å›½èµ„æºæ‰£é™¤å»ºé€ æˆæœ¬
    for (const [resourceKey, amount] of Object.entries(buildingConfig.baseCost)) {
        resources[resourceKey] -= amount;
    }
    
    // 3. ä»æŠ•èµ„è€…é˜¶å±‚è´¢å¯Œæ‰£é™¤ç­‰å€¼é“¶å¸ï¼ˆä½œä¸ºèµ„æœ¬æŠ•å…¥ï¼‰
    const costInSilver = calculateBuildingCostInSilver(buildingConfig);
    classWealth[investorStratum] -= costInSilver;
    
    // 4. è®°å½•æµ·å¤–å»ºç­‘èµ„äº§
    gameState.overseasAssets[investorStratum] = 
        (gameState.overseasAssets[investorStratum] || 0) + costInSilver;
    
    // 5. åˆ›å»ºæµ·å¤–å»ºç­‘è®°å½•
    gameState.overseasBuildings.push({
        id: `ob_${Date.now()}`,
        buildingId,
        nationId,
        ownerStratum: investorStratum,
        constructionCost: { ...buildingConfig.baseCost },
        constructionDay: daysElapsed,
        // ... åˆå§‹åŒ–è¿è¥æ•°æ®
    });
    
    addLog(`${STRATA[investorStratum].name}é˜¶å±‚åœ¨ ${targetNation.name} å»ºé€ äº† ${buildingConfig.name}`);
};
```

#### 3.4.5 åˆ©æ¶¦å›æµä¸é˜¶å±‚è´¢å¯Œ

**æ¯æ—¥åˆ©æ¶¦ç»“ç®—**ï¼š
```javascript
// æ¯æ—¥å¤„ç†æµ·å¤–å»ºç­‘åˆ©æ¶¦
const processOverseasBuildingProfits = () => {
    for (const ob of gameState.overseasBuildings) {
        const nation = nations.find(n => n.id === ob.nationId);
        if (!nation || nation.isAtWar) continue; // æˆ˜äº‰æœŸé—´åˆ©æ¶¦ä¸­æ–­
        
        const { profit } = calculateOverseasBuildingProfit(ob, nation);
        
        // åˆ©æ¶¦ç›´æ¥è¿›å…¥ä¸šä¸»é˜¶å±‚è´¢å¯Œ
        classWealth[ob.ownerStratum] += profit;
        
        // è®°å½•åˆ©æ¶¦å†å²
        ob.operatingData.profitHistory.push({ day: daysElapsed, profit });
        
        // å¦‚æœæŒç»­äºæŸï¼Œå½±å“è¯¥é˜¶å±‚æ»¡æ„åº¦
        if (profit < 0) {
            stratumApprovalModifiers[ob.ownerStratum] -= 0.5;
        }
    }
};
```

**é˜¶å±‚è´¢å¯Œå½±å“é“¾**ï¼š
```
æµ·å¤–å»ºç­‘åˆ©æ¶¦ â†’ classWealth[ownerStratum] 
    â†’ é˜¶å±‚æ»¡æ„åº¦
    â†’ é˜¶å±‚æ¶ˆè´¹èƒ½åŠ›
    â†’ é˜¶å±‚æ”¿æ²»å½±å“åŠ›
```

#### 3.4.6 æ®–æ°‘åœ°å»ºç­‘é™åˆ¶

**æŒ‰é™„åº¸ç­‰çº§é™åˆ¶å¯å»ºé€ çš„å»ºç­‘ç±»å‹**ï¼š

```javascript
// æµ·å¤–å»ºç­‘è®¸å¯
const OVERSEAS_BUILDING_PERMISSIONS = {
    // ä¿æŠ¤å›½ï¼šåªèƒ½å»ºè´¸æ˜“è®¾æ–½
    protectorate: {
        allowed: ['trading_post', 'market', 'dockyard'],
        prohibited: ['*'],  // å…¶ä»–å…¨éƒ¨ç¦æ­¢
    },
    
    // æœè´¡å›½ï¼šå¯å»ºé‡‡é›†+è´¸æ˜“
    tributary: {
        allowed: [
            'trading_post', 'market', 'dockyard',
            'farm', 'lumber_camp', 'quarry', 'copper_mine', 'mine',
        ],
        prohibited: ['factory', 'steel_foundry', 'printing_house'], // ç¦æ­¢é«˜çº§åŠ å·¥
    },
    
    // å‚€å„¡å›½ï¼šå¯å»ºå¤§éƒ¨åˆ†å»ºç­‘
    puppet: {
        allowed: ['*'],  // å¤§éƒ¨åˆ†å…è®¸
        prohibited: ['university', 'library', 'coffee_house'], // ç¦æ­¢æ–‡åŒ–æ•™è‚²
    },
    
    // æ®–æ°‘åœ°ï¼šåªèƒ½å»ºåŸææ–™æå–
    colony: {
        allowed: [
            'farm', 'large_estate', 'lumber_camp', 'quarry', 
            'copper_mine', 'mine', 'coal_mine', 
            'coffee_plantation', 'dockyard',
        ],
        prohibited: ['*'],  // ç¦æ­¢æ‰€æœ‰åŠ å·¥å’Œæ–‡åŒ–å»ºç­‘
        maxLevel: 1,        // æ‰€æœ‰å»ºç­‘ä¸èƒ½å‡çº§
    },
};
```

**è¿™æ„å‘³ç€**ï¼š
- æ®–æ°‘åœ°åªèƒ½é‡‡é›†åŸææ–™
- åŸææ–™å¿…é¡»è¿å›æœ¬å›½åŠ å·¥
- æœ¬å›½å·¥åŒ /å·¥äººè·å¾—æ›´å¤šå°±ä¸š
- æ®–æ°‘åœ°å·¥åŒ å¤±ä¸š â†’ æ»¡æ„åº¦ä¸‹é™ â†’ å›ä¹±é£é™©ä¸Šå‡

#### 3.4.7 èµ„æºæ å¤ºä¸å€¾é”€

**æ å¤ºæœºåˆ¶**ï¼ˆä½¿ç”¨å»ºç­‘äº§å‡ºï¼‰ï¼š

```javascript
// æ®–æ°‘åœ°èµ„æºé…é¢
const processColonyResourceQuota = (colony) => {
    // è®¡ç®—æ®–æ°‘åœ°å…¨éƒ¨æµ·å¤–å»ºç­‘çš„äº§å‡º
    const totalOutput = {};
    for (const ob of gameState.overseasBuildings.filter(b => b.nationId === colony.id)) {
        const config = BUILDINGS.find(b => b.id === ob.buildingId);
        for (const [key, amount] of Object.entries(config.output || {})) {
            totalOutput[key] = (totalOutput[key] || 0) + amount;
        }
    }
    
    // æŒ‰é…é¢æ¯”ä¾‹ç›´æ¥è·å–ï¼ˆä¸æ”¯ä»˜ï¼‰
    const quotaRate = colony.vassalPolicy?.resourceQuota || 0.15;
    for (const [key, amount] of Object.entries(totalOutput)) {
        if (key === 'maxPop') continue; // è·³è¿‡äººå£ä¸Šé™
        const quotaAmount = amount * quotaRate;
        resources[key] = (resources[key] || 0) + quotaAmount;
        
        // é™ä½æ®–æ°‘åœ°å·¥äºº/å†œæ°‘æ»¡æ„åº¦
        colony.socialStructure.commoners.satisfaction -= 2;
    }
};
```

**å€¾é”€æœºåˆ¶**ï¼ˆä½¿ç”¨å»ºç­‘æ¶ˆè€—ï¼‰ï¼š

```javascript
// å¼ºåˆ¶æ®–æ°‘åœ°è´­ä¹°æœ¬å›½äº§å“
const processDumpingToColony = (colony, resourceKey, amount) => {
    // ä»æœ¬å›½åº“å­˜æ‰£é™¤
    resources[resourceKey] -= amount;
    
    // è·å¾—é“¶å¸ï¼ˆæŒ‰æœ¬å›½ä»·æ ¼çš„70%ï¼‰
    const dumpingPrice = marketPrices[resourceKey] * 0.7;
    resources.silver += amount * dumpingPrice;
    
    // æ®–æ°‘åœ°å•†äºº/å·¥åŒ é˜¶å±‚å—æŸ
    colony.socialStructure.elites.satisfaction -= 5;
    colony.socialStructure.commoners.satisfaction -= 3;
    
    // å€¾é”€æ”¶ç›Šå½’å•†äººé˜¶å±‚
    classWealth.merchant += amount * dumpingPrice * 0.3;
};
```

---

### 3.5 é™„åº¸æ§åˆ¶æœºåˆ¶

#### 3.5.1 è‡ªä¸»åº¦ç³»ç»Ÿ

```javascript
nation.autonomy = 0-100; // è‡ªä¸»åº¦

// è‡ªä¸»åº¦å½±å“ï¼š
const getAutonomyEffects = (autonomy) => ({
    canDeclareWar: autonomy > 70,           // å¯è‡ªä¸»å®£æˆ˜
    canSignTreaties: autonomy > 50,         // å¯ç­¾ç½²æ¡çº¦
    canSetTariffs: autonomy > 40,           // å¯è®¾ç½®å…³ç¨
    tributeReduction: 1 - (autonomy / 200), // å‡å°‘å®é™…æœè´¡
    investmentShield: autonomy / 100,       // æŠµæŠ—ç©å®¶æŠ•èµ„æ§åˆ¶
});
```

#### 3.5.2 æ§åˆ¶æ‰‹æ®µ

| è¡ŒåŠ¨ | æˆæœ¬ | æ•ˆæœ | é€‚ç”¨å¯¹è±¡ |
|------|------|------|---------|
| **æ´¾é£æ€»ç£** | 500é“¶å¸/å¹´ | è‡ªä¸»åº¦-10ï¼Œç›‘æ§æ•ˆç‡+20% | æœè´¡å›½+ |
| **é©»å†›å é¢†** | å†›é˜Ÿç»´æŠ¤è´¹ | è‡ªä¸»åº¦-20ï¼Œå›ä¹±æŠ‘åˆ¶+30% | å‚€å„¡å›½+ |
| **æ‰¶æ¤å‚€å„¡** | å…³ç³»+ç‰¹å·¥æˆæœ¬ | æ‰¶æ¤äº²ç©å®¶æ´¾ç³» | æ‰€æœ‰é™„åº¸ |
| **ç»æµæ§åˆ¶** | æŠ•èµ„èµ„æœ¬ | æ§åˆ¶å…³é”®äº§ä¸šé“¾ | æœè´¡å›½+ |
| **æ–‡åŒ–åŒåŒ–** | æ–‡åŒ–èµ„æº | é•¿æœŸé™ä½ç‹¬ç«‹å€¾å‘ | æ‰€æœ‰é™„åº¸ |

#### 3.5.3 é™„åº¸å¤–äº¤æ§åˆ¶

```javascript
// ç©å®¶å¯è®¾ç½®çš„é™„åº¸å¤–äº¤æ”¿ç­–
nation.vassalPolicy = {
    diplomaticControl: 'puppet' | 'guided' | 'autonomous',
    tradePolicy: 'monopoly' | 'preferential' | 'free',
    resourceQuota: {
        food: 0.05,   // å¼ºåˆ¶æä¾›5%ç²®é£Ÿäº§å‡º
        iron: 0.10,   // å¼ºåˆ¶æä¾›10%é“çŸ¿äº§å‡º
        // ...
    },
    investmentAccess: 'exclusive' | 'preferred' | 'open',
};
```

---

### 3.6 ç‹¬ç«‹ä¸å›ä¹±

#### 3.6.1 ç‹¬ç«‹å€¾å‘è®¡ç®—

```javascript
const calculateIndependenceDesire = (vassalNation) => {
    let desire = 0;
    
    // ç»æµå› ç´ 
    desire += vassalNation.tributeRate * 100;           // æœè´¡ç‡
    desire += (100 - vassalNation.autonomy) * 0.3;      // è‡ªä¸»åº¦
    desire -= vassalNation.socialStructure.elites.satisfaction * 0.2;
    
    // æ”¿æ²»å› ç´ 
    desire += vassalNation.dissidentOrganization * 0.5; // åå¯¹æ´¾ç»„ç»‡åº¦
    desire -= overlordMilitaryAdvantage * 0.2;          // å®—ä¸»å†›äº‹ä¼˜åŠ¿
    
    // æ–‡åŒ–å› ç´ ï¼ˆæœªæ¥å¯æ‰©å±•ï¼‰
    // desire += culturalDifference * 0.1;
    
    return Math.min(100, Math.max(0, desire));
};
```

#### 3.6.2 ç‹¬ç«‹æˆ˜äº‰è§¦å‘

å½“`independenceDesire > 80`ä¸”ä»¥ä¸‹ä»»ä¸€æ¡ä»¶æ»¡è¶³ï¼š
- å®—ä¸»å¤„äºæˆ˜äº‰çŠ¶æ€
- å®—ä¸»ç¨³å®šåº¦ < 40
- é™„åº¸`dissidentOrganization > 70`
- æœ‰å¤–å›½æ”¯æŒï¼ˆå…³ç³» > 60çš„ç¬¬ä¸‰æ–¹å›½å®¶ï¼‰

**ç‹¬ç«‹æˆ˜äº‰å¤„ç†**ï¼š
```javascript
// é™„åº¸å®£å¸ƒç‹¬ç«‹
const declareIndependence = (vassalNation) => {
    vassalNation.isAtWar = true;
    vassalNation.warTarget = 'player';  // å¯¹å®—ä¸»ä½œæˆ˜
    vassalNation.independenceWar = true;
    
    // æ‰€æœ‰æŠ•èµ„å†»ç»“
    freezeOverseasInvestments(vassalNation.id);
    
    // æœè´¡åœæ­¢
    vassalNation.tributeRate = 0;
    
    // å½±å“ç©å®¶é˜¶å±‚è´¢å¯Œ
    const lostInvestments = calculateLostInvestments(vassalNation.id);
    distributeInvestmentLosses(lostInvestments);
    
    // è§¦å‘å¤–äº¤äº‹ä»¶
    triggerIndependenceWarEvent(vassalNation);
};
```

---

### 3.7 æ®–æ°‘åœ°ä¸“é¢˜

#### 3.7.1 æ®–æ°‘åœ°ç‰¹æ®Šæœºåˆ¶

**æœ€å¼ºæ§åˆ¶ï¼Œæœ€é«˜é£é™©**ï¼š

| æœºåˆ¶ | æ•ˆæœ |
|------|------|
| å®Œå…¨å…³ç¨æ§åˆ¶ | æ‰€æœ‰è´¸æ˜“0å…³ç¨ï¼Œåˆ©æ¶¦å½’å®—ä¸» |
| äº§ä¸šé“¾ä»å± | æ®–æ°‘åœ°äº§ä¸šé“¾å‡çº§å—é™ï¼ˆmax lv3ï¼‰ |
| äººå£æ”¿ç­– | å¯è°ƒæ•´é˜¶å±‚æ¯”ä¾‹ï¼ˆå¼ºåˆ¶åŠ³åŠ¨ï¼‰ |
| èµ„æºé…é¢ | å¼ºåˆ¶ç¼´çº³15-25%æ‰€æœ‰èµ„æºäº§å‡º |
| å¸‚åœºå°é” | åªèƒ½ä¸å®—ä¸»è´¸æ˜“ |

#### 3.7.2 æ®–æ°‘åœ°äº§ä¸šé“¾

æ®–æ°‘åœ°äº§ä¸šè¢«é™åˆ¶åœ¨**åŸææ–™æå–é˜¶æ®µ**ï¼š

```javascript
// æ®–æ°‘åœ°äº§ä¸šé“¾é™åˆ¶
const COLONY_INDUSTRY_LIMITS = {
    food_chain: { maxStage: 'extraction' },      // åªèƒ½ç§ç²®ï¼Œä¸èƒ½åŠ å·¥
    wood_chain: { maxStage: 'extraction' },      // åªèƒ½ä¼æœ¨
    mining_chain: { maxStage: 'extraction' },    // åªèƒ½é‡‡çŸ¿
    textile_chain: { maxStage: 'extraction' },   // åªèƒ½ç§æ£‰
    luxury_chain: { maxStage: 'extraction' },    // åªèƒ½é‡‡é›†åŸæ–™
    knowledge_chain: { prohibited: true },       // ç¦æ­¢å‘å±•
    military_chain: { prohibited: true },        // ç¦æ­¢å‘å±•
};
```

è¿™æ„å‘³ç€ï¼š
- æ®–æ°‘åœ°åªèƒ½æä¾›**åŸææ–™**
- åŠ å·¥äº§ä¸šå¿…é¡»åœ¨æœ¬å›½è¿›è¡Œ
- æœ¬å›½`artisan`ã€`worker`è·å¾—æ›´å¤šå°±ä¸šæœºä¼š
- æ®–æ°‘åœ°`artisan`å¤±ä¸šï¼Œæ»¡æ„åº¦æä½

#### 3.7.3 æ®–æ°‘è€…è¿ç§»

ç©å®¶å›½æ°‘å¯**è¿ç§»**åˆ°æ®–æ°‘åœ°ï¼š

```javascript
// æ®–æ°‘è€…è¿ç§»
const migrateColonists = (stratumKey, count, colonyId) => {
    // ä»æœ¬å›½äººå£æ‰£é™¤
    popStructure[stratumKey] -= count;
    
    // æ·»åŠ åˆ°æ®–æ°‘åœ°ï¼ˆä½œä¸ºç‰¹æƒé˜¶å±‚ï¼‰
    colony.colonistPopulation[stratumKey] += count;
    
    // æ®–æ°‘è€…äº«å—ç‰¹æƒ
    colony.colonistPrivileges = {
        taxExempt: true,           // å…ç¨
        landOwnership: true,       // å¯æ‹¥æœ‰åœŸåœ°
        politicalRights: true,     // æ”¿æ²»æƒåˆ©
    };
    
    // æœ¬åœ°äººï¼ˆnativesï¼‰æ»¡æ„åº¦ä¸‹é™
    colony.socialStructure.commoners.satisfaction -= 5;
    colony.socialStructure.underclass.satisfaction -= 10;
};
```

---

### 3.8 ä¸é˜¶å±‚ç³»ç»Ÿçš„æ·±åº¦è”åŠ¨

#### 3.8.1 é˜¶å±‚åˆ©ç›Šåˆ†é…

| é˜¶å±‚ | ä»é™„åº¸è·ç›Šé€”å¾„ | åˆ©ç›Šåˆ†é… |
|------|---------------|---------|
| **èµ„æœ¬å®¶** | æµ·å¤–æŠ•èµ„å›æŠ¥ã€å·¥å‚äº§å‡º | æŠ•èµ„æ”¶ç›Š100% |
| **åœ°ä¸»** | æ®–æ°‘åœ°åœŸåœ°ã€æœè´¡åˆ†æˆ | æœè´¡30%åˆ†æˆ |
| **å•†äºº** | å„æ–­è´¸æ˜“ã€å€¾é”€æ”¶ç›Š | è´¸æ˜“åˆ©æ¶¦+50% |
| **å®˜å‘˜** | æ€»ç£è–ªé…¬ã€ç¨æ”¶æˆªç•™ | å›ºå®šè–ªé…¬ |
| **å·¥åŒ ** | åŠ å·¥è®¢å•å¢åŠ  | æ»¡æ„åº¦+10% |
| **å·¥äºº** | å·¥å‚å°±ä¸šã€åŸææ–™ä¾›åº” | å·¥èµ„ç¨³å®š |
| **å†œæ°‘** | ç²®é£Ÿé…é¢ï¼ˆç«äº‰ï¼‰ | æ»¡æ„åº¦-5% |

#### 3.8.2 é˜¶å±‚æ€åº¦

```javascript
// ä¸åŒé˜¶å±‚å¯¹æ®–æ°‘æ‰©å¼ çš„æ€åº¦
const STRATUM_COLONIAL_ATTITUDE = {
    capitalist: { support: 0.9, reason: 'æµ·å¤–æŠ•èµ„æœºä¼š' },
    merchant: { support: 0.85, reason: 'å„æ–­è´¸æ˜“è·¯çº¿' },
    landowner: { support: 0.7, reason: 'åœŸåœ°æ‰©å¼ ' },
    official: { support: 0.6, reason: 'å®˜åƒšèŒä½' },
    artisan: { support: 0.5, reason: 'åŸææ–™ä¾›åº”' },
    worker: { support: 0.3, reason: 'æ‹…å¿ƒæœ¬åœ°å¤±ä¸š' },
    peasant: { support: 0.2, reason: 'æ‹…å¿ƒç²®é£Ÿç«äº‰' },
    serf: { support: 0.1, reason: 'æ‹…å¿ƒè¢«å¾è°ƒ' },
};
```

å½“ç©å®¶å»ºç«‹é™„åº¸/æ®–æ°‘æ—¶ï¼Œå„é˜¶å±‚æ»¡æ„åº¦æŒ‰ä¸Šè¡¨è°ƒæ•´ï¼š
- æ”¯æŒåº¦é«˜çš„é˜¶å±‚ï¼šæ»¡æ„åº¦ + (support Ã— 10)
- æ”¯æŒåº¦ä½çš„é˜¶å±‚ï¼šæ»¡æ„åº¦ - ((1 - support) Ã— 5)

---

### 3.9 UIè®¾è®¡

#### 3.9.1 é™„åº¸ç®¡ç†é¢æ¿

æ‰©å±•`DiplomacyTab.jsx`ï¼Œä¸ºé™„åº¸å›½å®¶æ·»åŠ ä¸“é—¨çš„ç®¡ç†æ ‡ç­¾ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ´ [é™„åº¸å›½åç§°]              ç±»å‹: æœè´¡å›½  è‡ªä¸»åº¦: 45%  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š ç»æµçŠ¶å†µ                                              â”‚
â”‚   GDP: 50,000/å­£åº¦    æœè´¡: 7,500/å­£åº¦    æŠ•èµ„å›æŠ¥: 2,100â”‚
â”‚                                                         â”‚
â”‚ ğŸ’° æµ·å¤–æŠ•èµ„                          [æ–°å¢æŠ•èµ„]          â”‚
â”‚   â”œâ”€ é¦™æ–™ç§æ¤å›­ (å•†äºº) - å›æŠ¥ç‡ 12%/å¹´ - é£é™©:ä½        â”‚
â”‚   â””â”€ é“çŸ¿å¼€å‘æƒ (èµ„æœ¬å®¶) - å›æŠ¥ç‡ 18%/å¹´ - é£é™©:ä¸­      â”‚
â”‚                                                         â”‚
â”‚ ğŸ“¦ èµ„æºé…é¢                          [è°ƒæ•´é…é¢]          â”‚
â”‚   ç²®é£Ÿ 5% | é“çŸ¿ 10% | æœ¨æ 5%                          â”‚
â”‚                                                         â”‚
â”‚ ğŸ”’ æ§åˆ¶æªæ–½                                              â”‚
â”‚   [æ´¾é£æ€»ç£âœ“] [é©»å†›å é¢†] [ç»æµåˆ¶è£] [æ–‡åŒ–åŒåŒ–]          â”‚
â”‚                                                         â”‚
â”‚ âš ï¸ é£é™©æŒ‡æ ‡                                             â”‚
â”‚   ç‹¬ç«‹å€¾å‘: 35%  å›ä¹±é£é™©: ä½  ç²¾è‹±æ»¡æ„åº¦: 65%          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å››ã€å¤–å›½å¸‚åœºä¸äº§ä¸šæ¨¡æ‹Ÿ

### 4.1 è®¾è®¡ç†å¿µ

æ”¹è¿›ç°æœ‰`aiEconomy.js`çš„`updateAINationInventory`ï¼Œä½¿AIå›½å®¶çš„ç»æµå‘å±•æ›´åŠ ç‹¬ç«‹å’ŒçœŸå®ã€‚

### 4.2 ç‹¬ç«‹ç»æµæ¨¡å‹

#### 4.2.1 æ‰©å±•ç°æœ‰ç³»ç»Ÿ

```mermaid
flowchart TD
    A[AIç»æµæ›´æ–°] --> B[ç”Ÿäº§è®¡ç®—]
    A --> C[æ¶ˆè´¹è®¡ç®—]
    A --> D[è´¸æ˜“è®¡ç®—]
    A --> E[è´¢å¯Œå˜åŒ–]
    
    B --> B1["åŸºäºresourceBiasçš„èµ„æºäº§å‡º"]
    B --> B2["æ–°å¢: äº§ä¸šå‘å±•ç­‰çº§"]
    B --> B3["æ–°å¢: æŠ€æœ¯æ°´å¹³"]
    
    C --> C1["äººå£æ¶ˆè´¹"]
    C --> C2["æ–°å¢: å†…éœ€å¸‚åœºè§„æ¨¡"]
    
    D --> D1["ä¸ç©å®¶è´¸æ˜“"]
    D --> D2["æ–°å¢: AI-AIè´¸æ˜“æ´»è·ƒåº¦"]
    
    E --> E1["ç°æœ‰: wealthæ¼‚ç§»æœºåˆ¶"]
    E --> E2["æ–°å¢: GDPè®¡ç®—"]
```

#### 4.2.2 äº§ä¸šå‘å±•ç­‰çº§

æ‰©å±•`nation.economyTraits`ï¼š
```javascript
{
  // ç°æœ‰å±æ€§...
  resourceBias: { food: 1.5, iron: 0.8, ... },
  ownBasePopulation: number,
  ownBaseWealth: number,
  developmentRate: number,
  
  // æ–°å¢å±æ€§
  industryLevels: {
    agriculture: number,      // å†œä¸šç­‰çº§ 1-10
    mining: number,           // é‡‡çŸ¿ç­‰çº§ 1-10
    manufacturing: number,    // åˆ¶é€ ä¸šç­‰çº§ 1-10
    commerce: number,         // å•†ä¸šç­‰çº§ 1-10
  },
  techLevel: number,          // æ•´ä½“æŠ€æœ¯æ°´å¹³ 1-10
  infrastructureLevel: number, // åŸºç¡€è®¾æ–½ç­‰çº§ 1-10
  gdpLastYear: number,        // ä¸Šå¹´GDPï¼ˆç”¨äºå¢é•¿è®¡ç®—ï¼‰
}
```

#### 4.2.3 ç‹¬ç«‹å¢é•¿æœºåˆ¶

ä¿®æ”¹`processAIIndependentGrowth`ï¼š

```javascript
// å¢é•¿æ¦‚ç‡ä¸å†å›ºå®šï¼Œè€Œæ˜¯åŸºäºå¤šå› ç´ 
const growthFactors = {
  stability: nationStability > 60 ? 1.0 : 0.7,    // ç¨³å®šæ€§
  peace: nation.isAtWar ? 0.5 : 1.0,              // å’Œå¹³çº¢åˆ©
  trade: calculateTradeOpenness(nation) * 0.2,    // è´¸æ˜“å¼€æ”¾åº¦
  investment: foreignInvestment * 0.3,            // å¤–å›½æŠ•èµ„
  technology: nation.techLevel / 10,              // æŠ€æœ¯æ°´å¹³
};

const finalGrowthRate = baseGrowthRate * 
  Object.values(growthFactors).reduce((a, b) => a * b, 1);
```

### 4.3 å¤–å›½å¸‚åœºä¾›éœ€æ¨¡æ‹Ÿ

#### 4.3.1 ä¾›éœ€åŠ¨æ€ç³»ç»Ÿ

æ‰©å±•`calculateTradeStatus`ï¼š

```javascript
// ç°æœ‰é€»è¾‘åŸºç¡€ä¸Šæ·»åŠ 
const domesticDemand = calculateDomesticDemand(nation, resourceKey);
const domesticSupply = calculateDomesticSupply(nation, resourceKey);

// ä¾›éœ€æ¯”å†³å®šä»·æ ¼è¶‹åŠ¿
const supplyDemandRatio = domesticSupply / Math.max(1, domesticDemand);

// ä»·æ ¼è°ƒæ•´
const priceAdjustment = 
  supplyDemandRatio > 1.5 ? -0.1 :  // ä¾›è¿‡äºæ±‚ï¼Œä»·æ ¼ä¸‹è·Œ
  supplyDemandRatio < 0.5 ? 0.15 :  // ä¾›ä¸åº”æ±‚ï¼Œä»·æ ¼ä¸Šæ¶¨
  0;
```

#### 4.3.2 å¸‚åœºå‘¨æœŸ

ä¸ºæ¯ä¸ªAIå›½å®¶æ·»åŠ ç»æµå‘¨æœŸï¼š
```javascript
{
  economyCycle: {
    phase: 'expansion' | 'peak' | 'contraction' | 'trough',
    phaseStartDay: number,
    cyclePeriod: 365 * 2,  // 2å¹´ä¸€ä¸ªå‘¨æœŸ
  }
}
```

å‘¨æœŸå½±å“ï¼š
- **æ‰©å¼ æœŸ**ï¼šäº§å‡º+15%ï¼Œæ¶ˆè´¹+20%ï¼Œè´¸æ˜“æ´»è·ƒ
- **é¡¶å³°æœŸ**ï¼šäº§å‡ºç¨³å®šï¼Œä»·æ ¼ä¸Šæ¶¨
- **æ”¶ç¼©æœŸ**ï¼šäº§å‡º-10%ï¼Œæ¶ˆè´¹-15%
- **ä½è°·æœŸ**ï¼šä»·æ ¼ä½ï¼ŒæŠ•èµ„æœºä¼š

---

## äº”ã€å¤–å›½å›ä¹±ä¸æ”¿æƒæ›´è¿­

### 5.1 è®¾è®¡ç†å¿µ

å°†ç°æœ‰çš„`rebellionSystem.js`å’Œ`organizationSystem.js`é€»è¾‘åº”ç”¨åˆ°AIå›½å®¶ï¼Œè®©å¤–å›½ä¹Ÿå¯èƒ½å‡ºç°åŠ¨è¡ã€‚

### 5.2 AIå›½å®¶ç¨³å®šåº¦

#### æ‰©å±•å›½å®¶æ•°æ®

```javascript
{
  // ç°æœ‰å±æ€§...
  
  // æ–°å¢ç¨³å®šåº¦ç³»ç»Ÿ
  stability: number,              // 0-100 ç¨³å®šåº¦
  stabilityFactors: {
    warExhaustion: number,        // æˆ˜äº‰ç–²åŠ³ (-30 ~ 0)
    economicStress: number,       // ç»æµå‹åŠ› (-20 ~ 0)
    socialUnrest: number,         // ç¤¾ä¼šåŠ¨è¡ (-25 ~ 0)
    legitimacy: number,           // æ”¿æƒåˆæ³•æ€§ (0 ~ +20)
  },
  dissidentOrganization: number,  // åå¯¹æ´¾ç»„ç»‡åº¦ 0-100
  civilWarRisk: number,           // å†…æˆ˜é£é™© 0-100
}
```

### 5.3 å›ä¹±è§¦å‘æœºåˆ¶

#### é˜ˆå€¼ç³»ç»Ÿ

| æ¡ä»¶ | è§¦å‘æ•ˆæœ |
|------|----------|
| `stability < 30` æŒç»­30å¤© | å‡ºç°åå¯¹æ´¾ï¼ˆç»„ç»‡åº¦å¼€å§‹ç§¯ç´¯ï¼‰ |
| `dissidentOrganization > 50` | æ”¿å±€åŠ¨è¡äº‹ä»¶ |
| `dissidentOrganization > 80` | å¯èƒ½çˆ†å‘å†…æˆ˜ |
| `dissidentOrganization > 95` | è‡ªåŠ¨çˆ†å‘å†…æˆ˜ |

#### å†…æˆ˜å¤„ç†

```javascript
// å½“AIå›½å®¶çˆ†å‘å†…æˆ˜
const createAICivilWar = (nation) => {
  // åˆ›å»ºå›å†›æ”¿æƒï¼ˆç±»ä¼¼ç°æœ‰createRebelNationï¼‰
  const rebellGovernment = {
    id: `${nation.id}_rebel_${Date.now()}`,
    name: `${nation.name}ä¸´æ—¶æ”¿åºœ`,
    isRebelNation: true,
    parentNationId: nation.id,
    
    // ç»§æ‰¿éƒ¨åˆ†å›½å®¶å±æ€§
    population: Math.floor(nation.population * 0.4),
    wealth: Math.floor(nation.wealth * 0.3),
    militaryStrength: nation.militaryStrength * 0.5,
    
    // ä¸ç©å®¶çš„å…³ç³»
    relation: calculateRebelRelation(nation),
  };
  
  return rebellGovernment;
};
```

### 5.4 æ”¿æƒæ›´è¿­

#### æ›´è¿­æƒ…æ™¯

1. **å›å†›èƒœåˆ©**ï¼š
   - åŸæ”¿æƒè¢«æ¨ç¿»
   - å›å†›æˆä¸ºæ–°æ”¿æƒ
   - æ‰€æœ‰æ¡çº¦ä½œåºŸ
   - ä¸ç©å®¶å…³ç³»é‡ç½®

2. **æ”¿åºœå†›èƒœåˆ©**ï¼š
   - å›å†›è¢«æ¶ˆç­
   - å›½å®¶è¿›å…¥"æˆ˜åæ¢å¤æœŸ"ï¼ˆ3å¹´ï¼‰
   - ç¨³å®šåº¦é€æ¸æ¢å¤

3. **å¤–å›½å¹²é¢„**ï¼š
   - ç©å®¶å¯é€‰æ‹©æ”¯æŒä»»ä¸€æ–¹
   - æ”¯æŒæ–¹èƒœåˆ©åï¼Œå…³ç³»+40
   - å¯è¦æ±‚æˆä¸ºé™„åº¸ä½œä¸ºå›æŠ¥

### 5.5 ç©å®¶å¹²é¢„ç³»ç»Ÿ

æ–°å¢å¤–äº¤è¡ŒåŠ¨ï¼š

| è¡ŒåŠ¨ | æˆæœ¬ | æ•ˆæœ |
|------|------|------|
| èµ„åŠ©åå¯¹æ´¾ | 500é“¶å¸ | ç›®æ ‡å›½ç»„ç»‡åº¦+10 |
| æ”¯æŒæ”¿åºœ | 300é“¶å¸ | ç›®æ ‡å›½ç¨³å®šåº¦+5 |
| æ­¦è£…å¹²é¢„ | å®£æˆ˜ | ç›´æ¥å‚ä¸å†…æˆ˜ |
| è°ƒåœæ–¡æ—‹ | å…³ç³»>60 | å¯èƒ½ç»“æŸå†…æˆ˜ |

---

## å…­ã€äººå£æµåŠ¨æœºåˆ¶

### 6.1 è®¾è®¡ç†å¿µ

åœ¨ç°æœ‰äººå£ç³»ç»Ÿï¼ˆ`popStructure`ï¼‰åŸºç¡€ä¸Šï¼Œæ·»åŠ å›½å®¶é—´çš„äººå£è¿ç§»æœºåˆ¶ã€‚

### 6.2 ç§»æ°‘ç³»ç»Ÿ

#### ç§»æ°‘åŠ¨å› 

```javascript
const calculateEmigrationPressure = (nation) => {
  const factors = {
    warPressure: nation.isAtWar ? 0.3 : 0,
    economicPressure: Math.max(0, (500 - nation.wealth) / 1000),
    stabilityPressure: Math.max(0, (50 - nation.stability) / 100),
    tributePressure: nation.tributeRate * 2,
  };
  
  return Object.values(factors).reduce((sum, f) => sum + f, 0);
};
```

#### ç§»æ°‘ç›®çš„åœ°é€‰æ‹©

```javascript
const calculateImmigrationAttraction = (targetNation) => {
  const factors = {
    peace: !targetNation.isAtWar ? 0.2 : 0,
    wealth: targetNation.wealth / 2000,
    stability: targetNation.stability / 200,
    freedom: 1 - targetNation.tributeRate,
    openBorders: targetNation.openBordersTreaty ? 0.3 : 0,
  };
  
  return Object.values(factors).reduce((sum, f) => sum + f, 0);
};
```

### 6.3 ç§»æ°‘ç±»å‹

#### ç»æµç§»æ°‘

| å±æ€§ | å€¼ |
|------|-----|
| è§¦å‘æ¡ä»¶ | æºå›½è´«å›°ï¼Œç›®æ ‡å›½å¯Œè£• |
| å½±å“é˜¶å±‚ | å·¥äººã€å•†äºº |
| è§„æ¨¡ | æ¯å­£åº¦1-5äºº |
| æ•ˆæœ | å¸¦èµ°éƒ¨åˆ†è´¢å¯Œ |

#### æˆ˜äº‰éš¾æ°‘

| å±æ€§ | å€¼ |
|------|-----|
| è§¦å‘æ¡ä»¶ | æºå›½å¤„äºæˆ˜äº‰çŠ¶æ€ |
| å½±å“é˜¶å±‚ | æ‰€æœ‰é˜¶å±‚ |
| è§„æ¨¡ | æ¯æœˆ5-20äºº |
| æ•ˆæœ | å¸¦èµ°å°‘é‡è´¢å¯Œï¼Œå¯èƒ½å¸¦æ¥æŠ€æœ¯ |

#### æ”¿æ²»æµäº¡

| å±æ€§ | å€¼ |
|------|-----|
| è§¦å‘æ¡ä»¶ | æºå›½æ”¿æƒæ›´è¿­/å›ä¹± |
| å½±å“é˜¶å±‚ | è´µæ—ã€å®˜å‘˜ã€å•†äºº |
| è§„æ¨¡ | ä¸€æ¬¡æ€§10-50äºº |
| æ•ˆæœ | å¸¦èµ°å¤§é‡è´¢å¯Œ |

### 6.4 ç§»æ°‘å½±å“

#### å¯¹æºå›½
- äººå£å‡å°‘
- ç‰¹å®šé˜¶å±‚æµå¤±
- è´¢å¯Œå¤–æµ
- å¯èƒ½å¯¼è‡´åŠ³åŠ¨åŠ›çŸ­ç¼º

#### å¯¹ç›®æ ‡å›½ï¼ˆç©å®¶ï¼‰
- äººå£å¢åŠ ï¼ˆç›´æ¥åŠ å…¥`popStructure`å¯¹åº”é˜¶å±‚ï¼‰
- è´¢å¯Œå¢åŠ 
- å¯èƒ½å¸¦æ¥æ–°æŠ€æœ¯ï¼ˆç§‘æŠ€ç‚¹ï¼‰
- å¯èƒ½å¸¦æ¥ç¤¾ä¼šé—®é¢˜ï¼ˆéœ€è¦ä½æˆ¿ã€å·¥ä½œï¼‰

### 6.5 è¾¹å¢ƒæ”¿ç­–

ç©å®¶å¯è®¾ç½®ç§»æ°‘æ”¿ç­–ï¼š

| æ”¿ç­– | æ•ˆæœ |
|------|------|
| å¼€æ”¾è¾¹å¢ƒ | ç§»æ°‘+100%ï¼Œå¤–äº¤+10 |
| é€‰æ‹©æ€§æ¥æ”¶ | åªæ¥æ”¶ç‰¹å®šé˜¶å±‚ |
| é™åˆ¶ç§»æ°‘ | ç§»æ°‘-50% |
| é—­å…³é”å›½ | æ— ç§»æ°‘ï¼Œå¤–äº¤-10 |

---

## ä¸ƒã€å®æ–½è®¡åˆ’

### 7.1 å®æ–½ä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | æ¨¡å— | å¤æ‚åº¦ | ä¾èµ– |
|--------|------|--------|------|
| P0 | æ¡çº¦ä½“ç³» | ä¸­ | ç°æœ‰å¤–äº¤äº‹ä»¶ç³»ç»Ÿ |
| P1 | é™„åº¸ä¸æ®–æ°‘ | é«˜ | æˆ˜äº‰ç³»ç»Ÿã€æ¡çº¦ä½“ç³» |
| P1 | å¤–å›½å›ä¹± | ä¸­ | ç°æœ‰å›ä¹±ç³»ç»Ÿ |
| P2 | å›½é™…ç»„ç»‡ | é«˜ | æ¡çº¦ä½“ç³» |
| P2 | ç»æµæ·±åŒ– | ä¸­ | ç°æœ‰AIç»æµç³»ç»Ÿ |
| P3 | äººå£æµåŠ¨ | ä¸­ | é™„åº¸ç³»ç»Ÿ |

### 7.2 æ–‡ä»¶ä¿®æ”¹æ¸…å•

#### æ ¸å¿ƒé€»è¾‘å±‚

| æ–‡ä»¶ | ä¿®æ”¹ç±»å‹ | è¯´æ˜ |
|------|----------|------|
| [nations.js](file:///c:/Users/hkinghuang/Documents/GitHub/simple_nation_game/civ-game/src/logic/diplomacy/nations.js) | æ‰©å±• | æ·»åŠ é™„åº¸ã€æ¡çº¦å¤„ç† |
| [aiDiplomacy.js](file:///c:/Users/hkinghuang/Documents/GitHub/simple_nation_game/civ-game/src/logic/diplomacy/aiDiplomacy.js) | æ‰©å±• | æ¡çº¦ç­¾ç½²/è¿çº¦é€»è¾‘ |
| [aiEconomy.js](file:///c:/Users/hkinghuang/Documents/GitHub/simple_nation_game/civ-game/src/logic/diplomacy/aiEconomy.js) | é‡æ„ | ç‹¬ç«‹ç»æµæ¨¡å‹ |
| [NEW] `src/logic/diplomacy/treaties.js` | æ–°å¢ | æ¡çº¦é€»è¾‘ |
| [NEW] `src/logic/diplomacy/organizations.js` | æ–°å¢ | å›½é™…ç»„ç»‡é€»è¾‘ |
| [NEW] `src/logic/diplomacy/vassalage.js` | æ–°å¢ | é™„åº¸ç³»ç»Ÿ |
| [NEW] `src/logic/diplomacy/migration.js` | æ–°å¢ | äººå£æµåŠ¨ |
| [NEW] `src/logic/diplomacy/aiRebellion.js` | æ–°å¢ | å¤–å›½å›ä¹± |

#### é…ç½®å±‚

| æ–‡ä»¶ | ä¿®æ”¹ç±»å‹ | è¯´æ˜ |
|------|----------|------|
| [countries.js](file:///c:/Users/hkinghuang/Documents/GitHub/simple_nation_game/civ-game/src/config/countries.js) | æ‰©å±• | æ·»åŠ ç¨³å®šåº¦ã€äº§ä¸šç­‰çº§åˆå€¼ |
| [NEW] `src/config/treaties.js` | æ–°å¢ | æ¡çº¦ç±»å‹é…ç½® |
| [NEW] `src/config/organizations.js` | æ–°å¢ | ç»„ç»‡ç±»å‹é…ç½® |

#### UIå±‚

| æ–‡ä»¶ | ä¿®æ”¹ç±»å‹ | è¯´æ˜ |
|------|----------|------|
| [DiplomacyTab.jsx](file:///c:/Users/hkinghuang/Documents/GitHub/simple_nation_game/civ-game/src/components/tabs/DiplomacyTab.jsx) | æ‰©å±• | æ¡çº¦ã€ç»„ç»‡UI |
| [NEW] `src/components/modals/TreatyModal.jsx` | æ–°å¢ | æ¡çº¦ç­¾ç½²æ¨¡æ€æ¡† |
| [NEW] `src/components/modals/OrganizationModal.jsx` | æ–°å¢ | ç»„ç»‡ç®¡ç†æ¨¡æ€æ¡† |

#### äº‹ä»¶å±‚

| æ–‡ä»¶ | ä¿®æ”¹ç±»å‹ | è¯´æ˜ |
|------|----------|------|
| [diplomaticEvents.js](file:///c:/Users/hkinghuang/Documents/GitHub/simple_nation_game/civ-game/src/config/events/diplomaticEvents.js) | æ‰©å±• | æ¡çº¦äº‹ä»¶ã€æ”¿å˜äº‹ä»¶ |

---

## UIè®¾è®¡

### UI.1 å¤–äº¤æ ‡ç­¾é¡µé‡æ„

æ‰©å±•ç°æœ‰`DiplomacyTab.jsx`ï¼Œæ·»åŠ å­æ ‡ç­¾é¡µå¯¼èˆªï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŒ å¤–äº¤                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å›½å®¶åˆ—è¡¨] [æˆ‘çš„æ¡çº¦] [é™„åº¸ç®¡ç†] [æµ·å¤–å»ºç­‘] [å›½é™…ç»„ç»‡]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
```

---

### UI.2 å›½å®¶åˆ—è¡¨ï¼ˆæ‰©å±•ï¼‰

**å›½å®¶å¡ç‰‡æ–°å¢ä¿¡æ¯**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ´ [å›½å®¶åç§°]                           å…³ç³»: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 72    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ çŠ¶æ€: ä¸»æƒå›½å®¶ | è´¢å¯Œ: 1.2M | å†›é˜Ÿ: 5,000                    â”‚
â”‚                                                               â”‚
â”‚ ğŸ“œ æ¡çº¦: è´¸æ˜“åå®š(è¿˜å‰©890å¤©) | äº’ä¸ä¾µçŠ¯(è¿˜å‰©450å¤©)           â”‚
â”‚ ğŸ’° æµ·å¤–å»ºç­‘: 3åº§ | æœˆåˆ©æ¶¦: +2,400                            â”‚
â”‚                                                               â”‚
â”‚ [ç¤¼ç‰©] [ç´¢è¦] [æŒ‘æ‹¨] [ç»“ç›Ÿ] [æ¡çº¦â–¼] [æŠ•èµ„â–¼]                   â”‚
â”‚                                â”œâ”€ äº’ä¸ä¾µçŠ¯                    â”‚
â”‚                                â”œâ”€ è´¸æ˜“åå®š                    â”‚
â”‚                                â”œâ”€ è‡ªç”±è´¸æ˜“                    â”‚
â”‚                                â””â”€ æŠ•èµ„åè®®                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### UI.3 æ¡çº¦ç­¾ç½²æ¨¡æ€æ¡†

**æ–°å¢ `TreatyModal.jsx`**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“œ ç­¾ç½²æ¡çº¦ï¼šè´¸æ˜“åå®š                                    [âœ•]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  ä¸ [å›½å®¶åç§°] ç­¾ç½²è´¸æ˜“åå®š                                   â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“Š æ¡çº¦æ•ˆæœ                                               â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ â€¢ å•†äººæ´¾é©»æ§½ä½: å½“å‰5 â†’ ç­¾å8 (+3)                       â”‚ â”‚
â”‚  â”‚ â€¢ è¿›å£å…³ç¨: å½“å‰20% â†’ ç­¾å15% (-25%)                     â”‚ â”‚
â”‚  â”‚ â€¢ è´¸æ˜“åˆ©æ¶¦: +15%                                         â”‚ â”‚
â”‚  â”‚ â€¢ æœŸé™: 3å¹´ (1095å¤©)                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ’° ç­¾çº¦æˆæœ¬                                               â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ â€¢ è´¹ç”¨: 12,000 é“¶å¸ (åŒæ–¹è´¢å¯Œ1%Ã—æœ€å°å€¼)                   â”‚ â”‚
â”‚  â”‚ â€¢ å½“å‰é“¶å¸: 150,000                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ¯ æ¥å—æ¦‚ç‡: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 78%                              â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ å½±å“å› ç´ :                                                â”‚ â”‚
â”‚  â”‚  + å…³ç³»è‰¯å¥½ (+25%)                                       â”‚ â”‚
â”‚  â”‚  + å·²ç­¾äº’ä¸ä¾µçŠ¯ (+10%)                                   â”‚ â”‚
â”‚  â”‚  - å¯¹æ–¹ä¾µç•¥æ€§é«˜ (-15%)                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â”‚           [å–æ¶ˆ]                    [æå‡ºæ¡çº¦]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### UI.4 é™„åº¸ç®¡ç†é¢æ¿

**æ–°å¢é™„åº¸ç®¡ç†å­æ ‡ç­¾**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘‘ é™„åº¸ç®¡ç†                              æ€»æœè´¡: 15,000/æœˆ     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ´ [é™„åº¸å›½åç§°]                  ç±»å‹: æœè´¡å›½  è‡ªä¸»åº¦: 45%  â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                                                            â”‚ â”‚
â”‚ â”‚ ğŸ“Š ç»æµçŠ¶å†µ                                                â”‚ â”‚
â”‚ â”‚   GDP: 50,000/å­£åº¦  æœè´¡: 7,500/å­£åº¦  æŠ•èµ„å›æŠ¥: 2,100      â”‚ â”‚
â”‚ â”‚                                                            â”‚ â”‚
â”‚ â”‚ âš ï¸ é£é™©æŒ‡æ ‡                                               â”‚ â”‚
â”‚ â”‚   ç‹¬ç«‹å€¾å‘: â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 35%                                â”‚ â”‚
â”‚ â”‚   å›ä¹±é£é™©: ä½  ç²¾è‹±æ»¡æ„åº¦: 65%                           â”‚ â”‚
â”‚ â”‚                                                            â”‚ â”‚
â”‚ â”‚ [ç®¡ç†] [æŠ•èµ„] [è°ƒæ•´æ”¿ç­–]                                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ´ [æ®–æ°‘åœ°åç§°]                  ç±»å‹: æ®–æ°‘åœ°  è‡ªä¸»åº¦: 0%   â”‚ â”‚
â”‚ â”‚ ...                                                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### UI.5 é™„åº¸æ”¿ç­–è®¾ç½®æ¨¡æ€æ¡†

**ç‚¹å‡»"è°ƒæ•´æ”¿ç­–"æ‰“å¼€**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš™ï¸ é™„åº¸æ”¿ç­–: [é™„åº¸å›½åç§°]                                [âœ•]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚ ğŸ“‹ å¤–äº¤æ§åˆ¶                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â—‹ è‡ªä¸»å¤–äº¤ (è‡ªä¸»åº¦+10/å¹´)                                â”‚  â”‚
â”‚ â”‚ â— å¼•å¯¼å¤–äº¤ (é»˜è®¤)                                        â”‚  â”‚
â”‚ â”‚ â—‹ å‚€å„¡å¤–äº¤ (è‡ªä¸»åº¦-5/å¹´, ç‹¬ç«‹å€¾å‘+3/å¹´)                  â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚ ğŸ’° è´¸æ˜“æ”¿ç­–                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â—‹ è‡ªç”±è´¸æ˜“                                               â”‚  â”‚
â”‚ â”‚ â— ä¼˜æƒ å‡†å…¥ (é»˜è®¤)                                        â”‚  â”‚
â”‚ â”‚ â—‹ å„æ–­è´¸æ˜“ (åˆ©æ¶¦+30%, æ»¡æ„åº¦-10)                         â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚ ğŸ“¦ èµ„æºé…é¢                           [ç¼–è¾‘é…é¢]               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ç²®é£Ÿ: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘] 5%                                    â”‚  â”‚
â”‚ â”‚ é“çŸ¿: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 10%                                   â”‚  â”‚
â”‚ â”‚ æœ¨æ: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘] 5%                                    â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚ ğŸ”’ æ§åˆ¶æªæ–½                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â˜‘ æ´¾é£æ€»ç£ (500é“¶/å¹´, è‡ªä¸»åº¦-10)                         â”‚  â”‚
â”‚ â”‚ â˜ é©»å†›å é¢† (éœ€å†›é˜Ÿ, è‡ªä¸»åº¦-20)                           â”‚  â”‚
â”‚ â”‚ â˜ æ–‡åŒ–åŒåŒ– (æ¶ˆè€—æ–‡åŒ–, ç‹¬ç«‹å€¾å‘-2/å¹´)                     â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚              [å–æ¶ˆ]                    [åº”ç”¨]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### UI.6 æµ·å¤–å»ºç­‘ç®¡ç†é¢æ¿

**æ–°å¢ `OverseasBuildingsTab`**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ—ï¸ æµ·å¤–å»ºç­‘                    æ€»èµ„äº§: 85,000  æœˆåˆ©æ¶¦: +3,200 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç­›é€‰: [æ‰€æœ‰å›½å®¶â–¼] [æ‰€æœ‰ç±»å‹â–¼] [æ‰€æœ‰æ¨¡å¼â–¼]    [æ–°å»ºæµ·å¤–å»ºç­‘]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ­ åº„å›­ @ [é™„åº¸å›½åç§°]                         çŠ¶æ€: è¿è¥ä¸­ â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ ä¸šä¸»: åœ°ä¸»é˜¶å±‚  æŠ•èµ„: 8,000é“¶  å»ºé€ æ—¥: 1200å¤©             â”‚ â”‚
â”‚ â”‚                                                            â”‚ â”‚
â”‚ â”‚ ğŸ“Š æœ¬æœˆè¿è¥                                                â”‚ â”‚
â”‚ â”‚   äº§å‡ºä»·å€¼: 2,400  æŠ•å…¥æˆæœ¬: 800  å·¥èµ„: 600               â”‚ â”‚
â”‚ â”‚   å‡€åˆ©æ¶¦: +1,000 âœ…                                        â”‚ â”‚
â”‚ â”‚                                                            â”‚ â”‚
â”‚ â”‚ âš™ï¸ è¿è¥æ¨¡å¼: [å½“åœ°è¿è¥ â–¼]                                 â”‚ â”‚
â”‚ â”‚               â”œâ”€ å½“åœ°è¿è¥ (å½“åœ°é‡‡è´­+å½“åœ°é”€å”®)              â”‚ â”‚
â”‚ â”‚               â”œâ”€ å€¾é”€æ¨¡å¼ (æœ¬å›½é‡‡è´­+å½“åœ°é”€å”®)              â”‚ â”‚
â”‚ â”‚               â””â”€ å›è´­æ¨¡å¼ (å½“åœ°é‡‡è´­+æœ¬å›½é”€å”®)              â”‚ â”‚
â”‚ â”‚                                                            â”‚ â”‚
â”‚ â”‚ âš ï¸ é£é™©: å›½æœ‰åŒ–é£é™© 5%  ä¾›åº”ç¨³å®š                          â”‚ â”‚
â”‚ â”‚                                                            â”‚ â”‚
â”‚ â”‚ [è¯¦æƒ…] [åˆ‡æ¢æ¨¡å¼] [å‡ºå”®]                                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â›ï¸ é“çŸ¿äº• @ [æ®–æ°‘åœ°åç§°]                      çŠ¶æ€: è¿è¥ä¸­ â”‚ â”‚
â”‚ â”‚ ...                                                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### UI.7 æ–°å»ºæµ·å¤–å»ºç­‘æ¨¡æ€æ¡†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ—ï¸ æ–°å»ºæµ·å¤–å»ºç­‘                                          [âœ•]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚ ğŸ“ é€‰æ‹©ä½ç½®                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ [é™„åº¸å›½A â–¼]                                              â”‚  â”‚
â”‚ â”‚  ç±»å‹: æœè´¡å›½ | å¯å»º: é‡‡é›†+è´¸æ˜“ | æŠ•èµ„ä¿æŠ¤: âœ…            â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚ ğŸ­ é€‰æ‹©å»ºç­‘                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ [é€‰æ‹©å»ºç­‘ç±»å‹ â–¼]                                         â”‚  â”‚
â”‚ â”‚  â”œâ”€ ğŸŒ¾ å†œç”° (é‡‡é›†)                                       â”‚  â”‚
â”‚ â”‚  â”œâ”€ ğŸ° åº„å›­ (é‡‡é›†)                                       â”‚  â”‚
â”‚ â”‚  â”œâ”€ â›ï¸ é“çŸ¿äº• (é‡‡é›†)                                     â”‚  â”‚
â”‚ â”‚  â”œâ”€ ğŸªµ ä¼æœ¨åœº (é‡‡é›†)                                     â”‚  â”‚
â”‚ â”‚  â””â”€ ğŸª è´¸æ˜“ç«™ (è´¸æ˜“)                                     â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚ ğŸ‘¤ æŠ•èµ„é˜¶å±‚                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â— åœ°ä¸» (å¯ç”¨è´¢å¯Œ: 50,000)                                â”‚  â”‚
â”‚ â”‚ â—‹ å•†äºº (å¯ç”¨è´¢å¯Œ: 80,000)                                â”‚  â”‚
â”‚ â”‚ â—‹ èµ„æœ¬å®¶ (å¯ç”¨è´¢å¯Œ: 120,000)                             â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚ ğŸ’° å»ºé€ æˆæœ¬                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ èµ„æº: æœ¨æ 100 âœ… | æ¿æ 25 âœ…                            â”‚  â”‚
â”‚ â”‚ é“¶å¸: 8,000 (ä»åœ°ä¸»é˜¶å±‚æ‰£é™¤)                             â”‚  â”‚
â”‚ â”‚                                                          â”‚  â”‚
â”‚ â”‚ é¢„è®¡å›æŠ¥ç‡: 12%/å¹´ (åŸºäºå½“åœ°ä»·æ ¼)                        â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚              [å–æ¶ˆ]                    [å»ºé€ ]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### UI.8 å¤–èµ„ç®¡ç†é¢æ¿

**æœ¬å›½å¤–èµ„å»ºç­‘å±•ç¤º**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¦ å¤–èµ„æƒ…å†µ                     å¤–èµ„å»ºç­‘: 2åº§  æœˆåˆ©æ¶¦å¤–æµ: 800 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ­ å·¥å‚ (å¤–èµ„)                         æ‰€æœ‰è€…: [å¤–å›½åç§°]  â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ æä¾›å²—ä½: å·¥äººÃ—20  å·¥ç¨‹å¸ˆÃ—4                               â”‚ â”‚
â”‚ â”‚ æœ¬æœˆäº§å‡º: å·¥å…·Ã—72 (+è¿›å…¥æœ¬å›½å¸‚åœº)                         â”‚ â”‚
â”‚ â”‚ åˆ©æ¶¦å¤–æµ: -1,200é“¶/æœˆ                                     â”‚ â”‚
â”‚ â”‚                                                            â”‚ â”‚
â”‚ â”‚ [è¯¦æƒ…] [å›½æœ‰åŒ–âš ï¸] [æé«˜ç¨ç‡]                              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â”‚ âš–ï¸ å¤–èµ„æ”¿ç­–                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ å¤–èµ„åˆ©æ¶¦ç¨ç‡: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘] 20%                           â”‚  â”‚
â”‚ â”‚ æ–°å»ºé™åˆ¶: â˜ ç¦æ­¢æ–°å»ºå¤–èµ„                                 â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### UI.9 è¿è¥æ¨¡å¼åˆ‡æ¢ç¡®è®¤

**ç‚¹å‡»"åˆ‡æ¢æ¨¡å¼"å¼¹å‡º**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš™ï¸ åˆ‡æ¢è¿è¥æ¨¡å¼                                          [âœ•]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚ å½“å‰æ¨¡å¼: å½“åœ°è¿è¥                                             â”‚
â”‚ åˆ‡æ¢è‡³: â— å€¾é”€æ¨¡å¼                                             â”‚
â”‚                                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ğŸ“Š æ¨¡å¼å¯¹æ¯”                                               â”‚  â”‚
â”‚ â”‚                                                          â”‚  â”‚
â”‚ â”‚           å½“åœ°è¿è¥        â†’      å€¾é”€æ¨¡å¼                â”‚  â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚
â”‚ â”‚ åŸææ–™    å½“åœ°å¸‚åœº               æœ¬å›½é‡‡è´­                â”‚  â”‚
â”‚ â”‚ äº§å“é”€å”®  å½“åœ°å¸‚åœº               å½“åœ°å€¾é”€                â”‚  â”‚
â”‚ â”‚ è¿è¾“æˆæœ¬  æ—                      +15%                    â”‚  â”‚
â”‚ â”‚ æœ¬å›½èµ„æº  æ— å½±å“                 æ¶ˆè€—                    â”‚  â”‚
â”‚ â”‚ å½“åœ°æ»¡æ„  ä¸­ç«‹                   ä¸‹é™âš ï¸                  â”‚  â”‚
â”‚ â”‚ ç‹¬ç«‹å€¾å‘  æ— å½±å“                 +5%/å¹´âš ï¸                â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚ âš ï¸ è­¦å‘Šï¼šå€¾é”€æ¨¡å¼ä¼šå¢åŠ é™„åº¸å›½ç‹¬ç«‹å€¾å‘                         â”‚
â”‚                                                                â”‚
â”‚              [å–æ¶ˆ]                    [ç¡®è®¤åˆ‡æ¢]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### UI.10 è°ˆåˆ¤æ¨¡æ€æ¡†

**å¤šè½®è°ˆåˆ¤ç•Œé¢**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤ è°ˆåˆ¤: ä¸ [å›½å®¶åç§°] ç­¾ç½²è´¸æ˜“åå®š                       [âœ•]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¬¬ 2/3 è½®                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚ ğŸ“œ å½“å‰ææ¡ˆ                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ è´¸æ˜“åå®š (3å¹´)                                           â”‚  â”‚
â”‚ â”‚ â€¢ å•†äººæ´¾é©»+3  â€¢ å…³ç¨-25%  â€¢ è´¸æ˜“åˆ©æ¶¦+15%                 â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚ ğŸ¯ å½“å‰æ¥å—æ¦‚ç‡: â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 38%                               â”‚
â”‚                                                                â”‚
â”‚ ğŸ’° æ·»åŠ ç­¹ç  (æé«˜æ¥å—ç‡)                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â˜ ç°é‡‘èµ ç¤¼: [______] é“¶å¸ (æ¯1000é“¶+2%)                  â”‚  â”‚
â”‚ â”‚ â˜ èµ„æºèµ ç¤¼: [é£Ÿç‰©â–¼] [______] å•ä½                        â”‚  â”‚
â”‚ â”‚ â˜ å»¶é•¿æœŸé™: [5å¹´â–¼] (+5%)                                 â”‚  â”‚
â”‚ â”‚ â˜ å†›äº‹ä¿æŠ¤: æ‰¿è¯ºåé˜² (+15%)                              â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚ ğŸ“¨ å¯¹æ–¹æ€åº¦                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ "æˆ‘ä»¬å¯¹è´¸æ˜“æœ‰å…´è¶£ï¼Œä½†å¸Œæœ›èƒ½è·å¾—æ›´å¤šå¥½å¤„..."             â”‚  â”‚
â”‚ â”‚ ä¸Šè½®åææ¡ˆ: è¦æ±‚ç­¾çº¦è´¹+50%                               â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚  [æ”¾å¼ƒè°ˆåˆ¤]        [æ¥å—åææ¡ˆ]        [æå‡ºæ–°æ–¹æ¡ˆ]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…«ã€éªŒè¯æ–¹æ¡ˆ

### è‡ªåŠ¨åŒ–æµ‹è¯•

1. **æ¡çº¦é€»è¾‘æµ‹è¯•**
   - ç­¾çº¦æ¡ä»¶éªŒè¯
   - è¿çº¦æƒ©ç½šéªŒè¯
   - åˆ°æœŸå¤„ç†éªŒè¯

2. **ç»„ç»‡æœºåˆ¶æµ‹è¯•**
   - æˆå‘˜ç®¡ç†æµ‹è¯•
   - å…±åŒé˜²å¾¡è§¦å‘æµ‹è¯•
   - é€€å‡ºæœºåˆ¶æµ‹è¯•

3. **é™„åº¸ç³»ç»Ÿæµ‹è¯•**
   - æœè´¡è®¡ç®—æµ‹è¯•
   - ç‹¬ç«‹å€¾å‘æµ‹è¯•
   - ç‹¬ç«‹æˆ˜äº‰è§¦å‘æµ‹è¯•

4. **ç»æµæ¨¡æ‹Ÿæµ‹è¯•**
   - ç‹¬ç«‹å¢é•¿éªŒè¯
   - å‘¨æœŸæ³¢åŠ¨éªŒè¯
   - è´¸æ˜“å¹³è¡¡éªŒè¯

### äººå·¥éªŒè¯

1. æ¸¸æˆä½“éªŒæµ‹è¯•ï¼šéªŒè¯Pç¤¾æ„Ÿã€ç­–ç•¥æ·±åº¦
2. å¹³è¡¡æ€§æµ‹è¯•ï¼šç¡®ä¿æ— è¿‡å¼º/è¿‡å¼±çš„æœºåˆ¶
3. UI/UXæµ‹è¯•ï¼šç¡®ä¿ç•Œé¢æ¸…æ™°æ˜“ç”¨

---

## æ€»ç»“

æœ¬è®¾è®¡æ–¹æ¡ˆé€šè¿‡å…­å¤§æ¨¡å—çš„æ‰©å±•ï¼Œå°†æ˜¾è‘—æå‡æ¸¸æˆçš„å¤–äº¤æ·±åº¦ï¼š

| æ¨¡å— | æ ¸å¿ƒä»·å€¼ |
|------|----------|
| æ¡çº¦ä½“ç³» | ä¸°å¯Œçš„åˆ©ç›Šäº¤æ¢å’Œåšå¼ˆ |
| å›½é™…ç»„ç»‡ | å¤šè¾¹å¤–äº¤å’Œé›†ä½“å®‰å…¨ |
| é™„åº¸æ®–æ°‘ | å¸å›½æ‰©å¼ å’Œç»Ÿæ²»è‰ºæœ¯ |
| ç»æµæ·±åŒ– | çœŸå®çš„å›½é™…å¸‚åœºæ¨¡æ‹Ÿ |
| å¤–å›½å›ä¹± | åŠ¨æ€çš„å›½é™…æ ¼å±€å˜åŒ– |
| äººå£æµåŠ¨ | æˆ˜äº‰ä¸å’Œå¹³çš„äººæ–‡å½±å“ |

æ‰€æœ‰è®¾è®¡å‡åŸºäºç°æœ‰ä»£ç æœºåˆ¶æ‰©å±•ï¼Œç¡®ä¿å®ç°å¯è¡Œä¸”é£æ ¼ç»Ÿä¸€ã€‚
