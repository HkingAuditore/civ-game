(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))o(p);new MutationObserver(p=>{for(const j of p)if(j.type==="childList")for(const v of j.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&o(v)}).observe(document,{childList:!0,subtree:!0});function m(p){const j={};return p.integrity&&(j.integrity=p.integrity),p.referrerPolicy&&(j.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?j.credentials="include":p.crossOrigin==="anonymous"?j.credentials="omit":j.credentials="same-origin",j}function o(p){if(p.ep)return;p.ep=!0;const j=m(p);fetch(p.href,j)}})();function Xx(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var D0={exports:{}},lr={};var yf;function Px(){if(yf)return lr;yf=1;var l=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function m(o,p,j){var v=null;if(j!==void 0&&(v=""+j),p.key!==void 0&&(v=""+p.key),"key"in p){j={};for(var w in p)w!=="key"&&(j[w]=p[w])}else j=p;return p=j.ref,{$$typeof:l,type:o,key:v,ref:p!==void 0?p:null,props:j}}return lr.Fragment=c,lr.jsx=m,lr.jsxs=m,lr}var bf;function Zx(){return bf||(bf=1,D0.exports=Px()),D0.exports}var a=Zx(),O0={exports:{}},ir={},R0={exports:{}},B0={};var vf;function Qx(){return vf||(vf=1,(function(l){function c(b,O){var R=b.length;b.push(O);e:for(;0<R;){var ne=R-1>>>1,L=b[ne];if(0<p(L,O))b[ne]=O,b[R]=L,R=ne;else break e}}function m(b){return b.length===0?null:b[0]}function o(b){if(b.length===0)return null;var O=b[0],R=b.pop();if(R!==O){b[0]=R;e:for(var ne=0,L=b.length,u=L>>>1;ne<u;){var C=2*(ne+1)-1,$=b[C],J=C+1,le=b[J];if(0>p($,R))J<L&&0>p(le,$)?(b[ne]=le,b[J]=R,ne=J):(b[ne]=$,b[C]=R,ne=C);else if(J<L&&0>p(le,R))b[ne]=le,b[J]=R,ne=J;else break e}}return O}function p(b,O){var R=b.sortIndex-O.sortIndex;return R!==0?R:b.id-O.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var j=performance;l.unstable_now=function(){return j.now()}}else{var v=Date,w=v.now();l.unstable_now=function(){return v.now()-w}}var g=[],y=[],k=1,_=null,E=3,U=!1,D=!1,M=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;function ce(b){for(var O=m(y);O!==null;){if(O.callback===null)o(y);else if(O.startTime<=b)o(y),O.sortIndex=O.expirationTime,c(g,O);else break;O=m(y)}}function Ce(b){if(M=!1,ce(b),!D)if(m(g)!==null)D=!0,oe||(oe=!0,ge());else{var O=m(y);O!==null&&me(Ce,O.startTime-b)}}var oe=!1,se=-1,B=5,de=-1;function Q(){return A?!0:!(l.unstable_now()-de<B)}function I(){if(A=!1,oe){var b=l.unstable_now();de=b;var O=!0;try{e:{D=!1,M&&(M=!1,ie(se),se=-1),U=!0;var R=E;try{t:{for(ce(b),_=m(g);_!==null&&!(_.expirationTime>b&&Q());){var ne=_.callback;if(typeof ne=="function"){_.callback=null,E=_.priorityLevel;var L=ne(_.expirationTime<=b);if(b=l.unstable_now(),typeof L=="function"){_.callback=L,ce(b),O=!0;break t}_===m(g)&&o(g),ce(b)}else o(g);_=m(g)}if(_!==null)O=!0;else{var u=m(y);u!==null&&me(Ce,u.startTime-b),O=!1}}break e}finally{_=null,E=R,U=!1}O=void 0}}finally{O?ge():oe=!1}}}var ge;if(typeof ae=="function")ge=function(){ae(I)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,G=ve.port2;ve.port1.onmessage=I,ge=function(){G.postMessage(null)}}else ge=function(){S(I,0)};function me(b,O){se=S(function(){b(l.unstable_now())},O)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(b){b.callback=null},l.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<b?Math.floor(1e3/b):5},l.unstable_getCurrentPriorityLevel=function(){return E},l.unstable_next=function(b){switch(E){case 1:case 2:case 3:var O=3;break;default:O=E}var R=E;E=O;try{return b()}finally{E=R}},l.unstable_requestPaint=function(){A=!0},l.unstable_runWithPriority=function(b,O){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var R=E;E=b;try{return O()}finally{E=R}},l.unstable_scheduleCallback=function(b,O,R){var ne=l.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?ne+R:ne):R=ne,b){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=R+L,b={id:k++,callback:O,priorityLevel:b,startTime:R,expirationTime:L,sortIndex:-1},R>ne?(b.sortIndex=R,c(y,b),m(g)===null&&b===m(y)&&(M?(ie(se),se=-1):M=!0,me(Ce,R-ne))):(b.sortIndex=L,c(g,b),D||U||(D=!0,oe||(oe=!0,ge()))),b},l.unstable_shouldYield=Q,l.unstable_wrapCallback=function(b){var O=E;return function(){var R=E;E=O;try{return b.apply(this,arguments)}finally{E=R}}}})(B0)),B0}var jf;function Fx(){return jf||(jf=1,R0.exports=Qx()),R0.exports}var $0={exports:{}},mt={};var Nf;function Jx(){if(Nf)return mt;Nf=1;var l=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),v=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),E=Symbol.iterator;function U(u){return u===null||typeof u!="object"?null:(u=E&&u[E]||u["@@iterator"],typeof u=="function"?u:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,A={};function S(u,C,$){this.props=u,this.context=C,this.refs=A,this.updater=$||D}S.prototype.isReactComponent={},S.prototype.setState=function(u,C){if(typeof u!="object"&&typeof u!="function"&&u!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,u,C,"setState")},S.prototype.forceUpdate=function(u){this.updater.enqueueForceUpdate(this,u,"forceUpdate")};function ie(){}ie.prototype=S.prototype;function ae(u,C,$){this.props=u,this.context=C,this.refs=A,this.updater=$||D}var ce=ae.prototype=new ie;ce.constructor=ae,M(ce,S.prototype),ce.isPureReactComponent=!0;var Ce=Array.isArray;function oe(){}var se={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function de(u,C,$){var J=$.ref;return{$$typeof:l,type:u,key:C,ref:J!==void 0?J:null,props:$}}function Q(u,C){return de(u.type,C,u.props)}function I(u){return typeof u=="object"&&u!==null&&u.$$typeof===l}function ge(u){var C={"=":"=0",":":"=2"};return"$"+u.replace(/[=:]/g,function($){return C[$]})}var ve=/\/+/g;function G(u,C){return typeof u=="object"&&u!==null&&u.key!=null?ge(""+u.key):C.toString(36)}function me(u){switch(u.status){case"fulfilled":return u.value;case"rejected":throw u.reason;default:switch(typeof u.status=="string"?u.then(oe,oe):(u.status="pending",u.then(function(C){u.status==="pending"&&(u.status="fulfilled",u.value=C)},function(C){u.status==="pending"&&(u.status="rejected",u.reason=C)})),u.status){case"fulfilled":return u.value;case"rejected":throw u.reason}}throw u}function b(u,C,$,J,le){var De=typeof u;(De==="undefined"||De==="boolean")&&(u=null);var fe=!1;if(u===null)fe=!0;else switch(De){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(u.$$typeof){case l:case c:fe=!0;break;case k:return fe=u._init,b(fe(u._payload),C,$,J,le)}}if(fe)return le=le(u),fe=J===""?"."+G(u,0):J,Ce(le)?($="",fe!=null&&($=fe.replace(ve,"$&/")+"/"),b(le,C,$,"",function(We){return We})):le!=null&&(I(le)&&(le=Q(le,$+(le.key==null||u&&u.key===le.key?"":(""+le.key).replace(ve,"$&/")+"/")+fe)),C.push(le)),1;fe=0;var Ge=J===""?".":J+":";if(Ce(u))for(var K=0;K<u.length;K++)J=u[K],De=Ge+G(J,K),fe+=b(J,C,$,De,le);else if(K=U(u),typeof K=="function")for(u=K.call(u),K=0;!(J=u.next()).done;)J=J.value,De=Ge+G(J,K++),fe+=b(J,C,$,De,le);else if(De==="object"){if(typeof u.then=="function")return b(me(u),C,$,J,le);throw C=String(u),Error("Objects are not valid as a React child (found: "+(C==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.")}return fe}function O(u,C,$){if(u==null)return u;var J=[],le=0;return b(u,J,"","",function(De){return C.call($,De,le++)}),J}function R(u){if(u._status===-1){var C=u._result;C=C(),C.then(function($){(u._status===0||u._status===-1)&&(u._status=1,u._result=$)},function($){(u._status===0||u._status===-1)&&(u._status=2,u._result=$)}),u._status===-1&&(u._status=0,u._result=C)}if(u._status===1)return u._result.default;throw u._result}var ne=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var C=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(C))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},L={map:O,forEach:function(u,C,$){O(u,function(){C.apply(this,arguments)},$)},count:function(u){var C=0;return O(u,function(){C++}),C},toArray:function(u){return O(u,function(C){return C})||[]},only:function(u){if(!I(u))throw Error("React.Children.only expected to receive a single React element child.");return u}};return mt.Activity=_,mt.Children=L,mt.Component=S,mt.Fragment=m,mt.Profiler=p,mt.PureComponent=ae,mt.StrictMode=o,mt.Suspense=g,mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,mt.__COMPILER_RUNTIME={__proto__:null,c:function(u){return se.H.useMemoCache(u)}},mt.cache=function(u){return function(){return u.apply(null,arguments)}},mt.cacheSignal=function(){return null},mt.cloneElement=function(u,C,$){if(u==null)throw Error("The argument must be a React element, but you passed "+u+".");var J=M({},u.props),le=u.key;if(C!=null)for(De in C.key!==void 0&&(le=""+C.key),C)!B.call(C,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&C.ref===void 0||(J[De]=C[De]);var De=arguments.length-2;if(De===1)J.children=$;else if(1<De){for(var fe=Array(De),Ge=0;Ge<De;Ge++)fe[Ge]=arguments[Ge+2];J.children=fe}return de(u.type,le,J)},mt.createContext=function(u){return u={$$typeof:v,_currentValue:u,_currentValue2:u,_threadCount:0,Provider:null,Consumer:null},u.Provider=u,u.Consumer={$$typeof:j,_context:u},u},mt.createElement=function(u,C,$){var J,le={},De=null;if(C!=null)for(J in C.key!==void 0&&(De=""+C.key),C)B.call(C,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(le[J]=C[J]);var fe=arguments.length-2;if(fe===1)le.children=$;else if(1<fe){for(var Ge=Array(fe),K=0;K<fe;K++)Ge[K]=arguments[K+2];le.children=Ge}if(u&&u.defaultProps)for(J in fe=u.defaultProps,fe)le[J]===void 0&&(le[J]=fe[J]);return de(u,De,le)},mt.createRef=function(){return{current:null}},mt.forwardRef=function(u){return{$$typeof:w,render:u}},mt.isValidElement=I,mt.lazy=function(u){return{$$typeof:k,_payload:{_status:-1,_result:u},_init:R}},mt.memo=function(u,C){return{$$typeof:y,type:u,compare:C===void 0?null:C}},mt.startTransition=function(u){var C=se.T,$={};se.T=$;try{var J=u(),le=se.S;le!==null&&le($,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(oe,ne)}catch(De){ne(De)}finally{C!==null&&$.types!==null&&(C.types=$.types),se.T=C}},mt.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},mt.use=function(u){return se.H.use(u)},mt.useActionState=function(u,C,$){return se.H.useActionState(u,C,$)},mt.useCallback=function(u,C){return se.H.useCallback(u,C)},mt.useContext=function(u){return se.H.useContext(u)},mt.useDebugValue=function(){},mt.useDeferredValue=function(u,C){return se.H.useDeferredValue(u,C)},mt.useEffect=function(u,C){return se.H.useEffect(u,C)},mt.useEffectEvent=function(u){return se.H.useEffectEvent(u)},mt.useId=function(){return se.H.useId()},mt.useImperativeHandle=function(u,C,$){return se.H.useImperativeHandle(u,C,$)},mt.useInsertionEffect=function(u,C){return se.H.useInsertionEffect(u,C)},mt.useLayoutEffect=function(u,C){return se.H.useLayoutEffect(u,C)},mt.useMemo=function(u,C){return se.H.useMemo(u,C)},mt.useOptimistic=function(u,C){return se.H.useOptimistic(u,C)},mt.useReducer=function(u,C,$){return se.H.useReducer(u,C,$)},mt.useRef=function(u){return se.H.useRef(u)},mt.useState=function(u){return se.H.useState(u)},mt.useSyncExternalStore=function(u,C,$){return se.H.useSyncExternalStore(u,C,$)},mt.useTransition=function(){return se.H.useTransition()},mt.version="19.2.0",mt}var wf;function F0(){return wf||(wf=1,$0.exports=Jx()),$0.exports}var U0={exports:{}},es={};var Cf;function Kx(){if(Cf)return es;Cf=1;var l=F0();function c(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var k=2;k<arguments.length;k++)y+="&args[]="+encodeURIComponent(arguments[k])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(){}var o={d:{f:m,r:function(){throw Error(c(522))},D:m,C:m,L:m,m,X:m,S:m,M:m},p:0,findDOMNode:null},p=Symbol.for("react.portal");function j(g,y,k){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:_==null?null:""+_,children:g,containerInfo:y,implementation:k}}var v=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function w(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return es.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,es.createPortal=function(g,y){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(c(299));return j(g,y,null,k)},es.flushSync=function(g){var y=v.T,k=o.p;try{if(v.T=null,o.p=2,g)return g()}finally{v.T=y,o.p=k,o.d.f()}},es.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,o.d.C(g,y))},es.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},es.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var k=y.as,_=w(k,y.crossOrigin),E=typeof y.integrity=="string"?y.integrity:void 0,U=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;k==="style"?o.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:E,fetchPriority:U}):k==="script"&&o.d.X(g,{crossOrigin:_,integrity:E,fetchPriority:U,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},es.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var k=w(y.as,y.crossOrigin);o.d.M(g,{crossOrigin:k,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&o.d.M(g)},es.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var k=y.as,_=w(k,y.crossOrigin);o.d.L(g,k,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},es.preloadModule=function(g,y){if(typeof g=="string")if(y){var k=w(y.as,y.crossOrigin);o.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:k,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else o.d.m(g)},es.requestFormReset=function(g){o.d.r(g)},es.unstable_batchedUpdates=function(g,y){return g(y)},es.useFormState=function(g,y,k){return v.H.useFormState(g,y,k)},es.useFormStatus=function(){return v.H.useHostTransitionStatus()},es.version="19.2.0",es}var Mf;function cp(){if(Mf)return U0.exports;Mf=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(c){console.error(c)}}return l(),U0.exports=Kx(),U0.exports}var _f;function Ix(){if(_f)return ir;_f=1;var l=Fx(),c=F0(),m=cp();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function j(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function v(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function w(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(j(e)!==e)throw Error(o(188))}function y(e){var t=e.alternate;if(!t){if(t=j(e),t===null)throw Error(o(188));return t!==e?null:e}for(var s=e,n=t;;){var i=s.return;if(i===null)break;var r=i.alternate;if(r===null){if(n=i.return,n!==null){s=n;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===s)return g(i),e;if(r===n)return g(i),t;r=r.sibling}throw Error(o(188))}if(s.return!==n.return)s=i,n=r;else{for(var d=!1,x=i.child;x;){if(x===s){d=!0,s=i,n=r;break}if(x===n){d=!0,n=i,s=r;break}x=x.sibling}if(!d){for(x=r.child;x;){if(x===s){d=!0,s=r,n=i;break}if(x===n){d=!0,n=r,s=i;break}x=x.sibling}if(!d)throw Error(o(189))}}if(s.alternate!==n)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:t}function k(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=k(e),t!==null)return t;e=e.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),ae=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),de=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function ge(e){return e===null||typeof e!="object"?null:(e=I&&e[I]||e["@@iterator"],typeof e=="function"?e:null)}var ve=Symbol.for("react.client.reference");function G(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ve?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case M:return"Fragment";case S:return"Profiler";case A:return"StrictMode";case Ce:return"Suspense";case oe:return"SuspenseList";case de:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case D:return"Portal";case ae:return e.displayName||"Context";case ie:return(e._context.displayName||"Context")+".Consumer";case ce:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case se:return t=e.displayName||null,t!==null?t:G(e.type)||"Memo";case B:t=e._payload,e=e._init;try{return G(e(t))}catch{}}return null}var me=Array.isArray,b=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=m.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},ne=[],L=-1;function u(e){return{current:e}}function C(e){0>L||(e.current=ne[L],ne[L]=null,L--)}function $(e,t){L++,ne[L]=e.current,e.current=t}var J=u(null),le=u(null),De=u(null),fe=u(null);function Ge(e,t){switch($(De,t),$(le,e),$(J,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Lm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Lm(t),e=qm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}C(J),$(J,e)}function K(){C(J),C(le),C(De)}function We(e){e.memoizedState!==null&&$(fe,e);var t=J.current,s=qm(t,e.type);t!==s&&($(le,e),$(J,s))}function xt(e){le.current===e&&(C(J),C(le)),fe.current===e&&(C(fe),tr._currentValue=R)}var P,je;function Ae(e){if(P===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||"",je=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+P+e+je}var Se=!1;function Ye(e,t){if(!e||Se)return"";Se=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ee){var Z=ee}Reflect.construct(e,[],he)}else{try{he.call()}catch(ee){Z=ee}e.call(he.prototype)}}else{try{throw Error()}catch(ee){Z=ee}(he=e())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ee){if(ee&&Z&&typeof ee.stack=="string")return[ee.stack,Z.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=n.DetermineComponentFrameRoot(),d=r[0],x=r[1];if(d&&x){var T=d.split(`
`),Y=x.split(`
`);for(i=n=0;n<T.length&&!T[n].includes("DetermineComponentFrameRoot");)n++;for(;i<Y.length&&!Y[i].includes("DetermineComponentFrameRoot");)i++;if(n===T.length||i===Y.length)for(n=T.length-1,i=Y.length-1;1<=n&&0<=i&&T[n]!==Y[i];)i--;for(;1<=n&&0<=i;n--,i--)if(T[n]!==Y[i]){if(n!==1||i!==1)do if(n--,i--,0>i||T[n]!==Y[i]){var re=`
`+T[n].replace(" at new "," at ");return e.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",e.displayName)),re}while(1<=n&&0<=i);break}}}finally{Se=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Ae(s):""}function bt(e,t){switch(e.tag){case 26:case 27:case 5:return Ae(e.type);case 16:return Ae("Lazy");case 13:return e.child!==t&&t!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return Ye(e.type,!1);case 11:return Ye(e.type.render,!1);case 1:return Ye(e.type,!0);case 31:return Ae("Activity");default:return""}}function ua(e){try{var t="",s=null;do t+=bt(e,s),s=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var Gt=Object.prototype.hasOwnProperty,Fa=l.unstable_scheduleCallback,te=l.unstable_cancelCallback,pe=l.unstable_shouldYield,ye=l.unstable_requestPaint,F=l.unstable_now,Re=l.unstable_getCurrentPriorityLevel,X=l.unstable_ImmediatePriority,be=l.unstable_UserBlockingPriority,ke=l.unstable_NormalPriority,Ue=l.unstable_LowPriority,ze=l.unstable_IdlePriority,$e=l.log,ot=l.unstable_setDisableYieldValue,rt=null,zt=null;function kt(e){if(typeof $e=="function"&&ot(e),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(rt,e)}catch{}}var Bt=Math.clz32?Math.clz32:rs,vs=Math.log,zs=Math.LN2;function rs(e){return e>>>=0,e===0?32:31-(vs(e)/zs|0)|0}var Te=256,ka=262144,ts=4194304;function it(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ea(e,t,s){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,d=e.pingedLanes;e=e.warmLanes;var x=n&134217727;return x!==0?(n=x&~r,n!==0?i=it(n):(d&=x,d!==0?i=it(d):s||(s=x&~e,s!==0&&(i=it(s))))):(x=n&~r,x!==0?i=it(x):d!==0?i=it(d):s||(s=n&~e,s!==0&&(i=it(s)))),i===0?0:t!==0&&t!==i&&(t&r)===0&&(r=i&-i,s=t&-t,r>=s||r===32&&(s&4194048)!==0)?t:i}function Xe(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function as(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function js(){var e=ts;return ts<<=1,(ts&62914560)===0&&(ts=4194304),e}function Ja(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Ke(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function $t(e,t,s,n,i,r){var d=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var x=e.entanglements,T=e.expirationTimes,Y=e.hiddenUpdates;for(s=d&~s;0<s;){var re=31-Bt(s),he=1<<re;x[re]=0,T[re]=-1;var Z=Y[re];if(Z!==null)for(Y[re]=null,re=0;re<Z.length;re++){var ee=Z[re];ee!==null&&(ee.lane&=-536870913)}s&=~he}n!==0&&Et(e,n,0),r!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=r&~(d&~t))}function Et(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-Bt(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|s&261930}function dt(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-Bt(s),i=1<<n;i&t|e[n]&t&&(e[n]|=t),s&=~i}}function Wt(e,t){var s=t&-t;return s=(s&42)!==0?1:La(s),(s&(e.suspendedLanes|t))!==0?0:s}function La(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Oa(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ds(){var e=O.p;return e!==0?e:(e=window.event,e===void 0?32:uf(e.type))}function Rn(e,t){var s=O.p;try{return O.p=e,t()}finally{O.p=s}}var Ra=Math.random().toString(36).slice(2),ra="__reactFiber$"+Ra,ha="__reactProps$"+Ra,ba="__reactContainer$"+Ra,ss="__reactEvents$"+Ra,un="__reactListeners$"+Ra,en="__reactHandles$"+Ra,tn="__reactResources$"+Ra,cs="__reactMarker$"+Ra;function Sa(e){delete e[ra],delete e[ha],delete e[ss],delete e[un],delete e[en]}function we(e){var t=e[ra];if(t)return t;for(var s=e.parentNode;s;){if(t=s[ba]||s[ra]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Zm(e);e!==null;){if(s=e[ra])return s;e=Zm(e)}return t}e=s,s=e.parentNode}return null}function Qe(e){if(e=e[ra]||e[ba]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function qe(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function Yt(e){var t=e[tn];return t||(t=e[tn]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Oe(e){e[cs]=!0}var Be=new Set,Ut={};function Ie(e,t){Nt(e,t),Nt(e+"Capture",t)}function Nt(e,t){for(Ut[e]=t,e=0;e<t.length;e++)Be.add(t[e])}var Ka=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yt={},Ba={};function Bn(e){return Gt.call(Ba,e)?!0:Gt.call(yt,e)?!1:Ka.test(e)?Ba[e]=!0:(yt[e]=!0,!1)}function Xs(e,t,s){if(Bn(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function Ps(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function qa(e,t,s,n){if(n===null)e.removeAttribute(s);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+n)}}function $a(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function os(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ol(e,t,s){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(d){s=""+d,r.call(this,d)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(d){s=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ul(e){if(!e._valueTracker){var t=os(e)?"checked":"value";e._valueTracker=Ol(e,t,""+e[t])}}function Rl(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=os(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function $n(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ni=/[\n"\\]/g;function St(e){return e.replace(Ni,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ea(e,t,s,n,i,r,d,x){e.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.type=d:e.removeAttribute("type"),t!=null?d==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+$a(t)):e.value!==""+$a(t)&&(e.value=""+$a(t)):d!=="submit"&&d!=="reset"||e.removeAttribute("value"),t!=null?Os(e,d,$a(t)):s!=null?Os(e,d,$a(s)):n!=null&&e.removeAttribute("value"),i==null&&r!=null&&(e.defaultChecked=!!r),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+$a(x):e.removeAttribute("name")}function mn(e,t,s,n,i,r,d,x){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||s!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){ul(e);return}s=s!=null?""+$a(s):"",t=t!=null?""+$a(t):s,x||t===e.value||(e.value=t),e.defaultValue=t}n=n??i,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=x?e.checked:!!n,e.defaultChecked=!!n,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.name=d),ul(e)}function Os(e,t,s){t==="number"&&$n(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Ve(e,t,s,n){if(e=e.options,t){t={};for(var i=0;i<s.length;i++)t["$"+s[i]]=!0;for(s=0;s<e.length;s++)i=t.hasOwnProperty("$"+e[s].value),e[s].selected!==i&&(e[s].selected=i),i&&n&&(e[s].defaultSelected=!0)}else{for(s=""+$a(s),t=null,i=0;i<e.length;i++){if(e[i].value===s){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function xr(e,t,s){if(t!=null&&(t=""+$a(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+$a(s):""}function hr(e,t,s,n){if(t==null){if(n!=null){if(s!=null)throw Error(o(92));if(me(n)){if(1<n.length)throw Error(o(93));n=n[0]}s=n}s==null&&(s=""),t=s}s=$a(t),e.defaultValue=s,n=e.textContent,n===s&&n!==""&&n!==null&&(e.value=n),ul(e)}function Un(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Oc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gr(e,t,s){var n=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,s):typeof s!="number"||s===0||Oc.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function yr(e,t,s){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,s!=null){for(var n in s)!s.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var i in t)n=t[i],t.hasOwnProperty(i)&&s[i]!==n&&gr(e,i,n)}else for(var r in t)t.hasOwnProperty(r)&&gr(e,r,t[r])}function wi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var br=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ml(e){return Bl.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Zs(){}var va=null;function ns(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hn=null,Ln=null;function $l(e){var t=Qe(e);if(t&&(e=t.stateNode)){var s=e[ha]||null;e:switch(e=t.stateNode,t.type){case"input":if(ea(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+St(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var i=n[ha]||null;if(!i)throw Error(o(90));ea(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<s.length;t++)n=s[t],n.form===e.form&&Rl(n)}break e;case"textarea":xr(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Ve(e,!!s.multiple,t,!1)}}}var Ul=!1;function Rc(e,t,s){if(Ul)return e(t,s);Ul=!0;try{var n=e(t);return n}finally{if(Ul=!1,(Hn!==null||Ln!==null)&&(ec(),Hn&&(t=Hn,e=Ln,Ln=Hn=null,$l(t),e)))for(t=0;t<e.length;t++)$l(e[t])}}function fl(e,t){var s=e.stateNode;if(s===null)return null;var n=s[ha]||null;if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,t,typeof s));return s}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=!1;if(f)try{var q={};Object.defineProperty(q,"passive",{get:function(){h=!0}}),window.addEventListener("test",q,q),window.removeEventListener("test",q,q)}catch{h=!1}var _e=null,Ee=null,Pe=null;function He(){if(Pe)return Pe;var e,t=Ee,s=t.length,n,i="value"in _e?_e.value:_e.textContent,r=i.length;for(e=0;e<s&&t[e]===i[e];e++);var d=s-e;for(n=1;n<=d&&t[s-n]===i[r-n];n++);return Pe=i.slice(e,1<n?1-n:void 0)}function st(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function et(){return!0}function tt(){return!1}function ct(e){function t(s,n,i,r,d){this._reactName=s,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=d,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(s=e[x],this[x]=s?s(r):r[x]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?et:tt,this.isPropagationStopped=tt,this}return _(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=et)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=et)},persist:function(){},isPersistent:et}),t}var ht={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dt=ct(ht),Ht=_({},ht,{view:0,detail:0}),Zt=ct(Ht),wt,Ot,ft,ut=_({},Ht,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ft&&(ft&&e.type==="mousemove"?(wt=e.screenX-ft.screenX,Ot=e.screenY-ft.screenY):Ot=wt=0,ft=e),wt)},movementY:function(e){return"movementY"in e?e.movementY:Ot}}),Le=ct(ut),Ct=_({},ut,{dataTransfer:0}),ta=ct(Ct),Ua=_({},Ht,{relatedTarget:0}),Qt=ct(Ua),ds=_({},ht,{animationName:0,elapsedTime:0,pseudoElement:0}),Ns=ct(ds),an=_({},ht,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Aa=ct(an),Ia=_({},ht,{data:0}),Rs=ct(Ia),pl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ca={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Va={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oa(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Va[e])?!!t[e]:!1}function aa(){return oa}var ja=_({},Ht,{key:function(e){if(e.key){var t=pl[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=st(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ca[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aa,charCode:function(e){return e.type==="keypress"?st(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?st(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ga=ct(ja),Hl=_({},ut,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fn=ct(Hl),Ci=_({},Ht,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aa}),xl=ct(Ci),ue=_({},ht,{propertyName:0,elapsedTime:0,pseudoElement:0}),nt=ct(ue),Mt=_({},ut,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),us=ct(Mt),na=_({},ht,{newState:0,oldState:0}),Na=ct(na),ma=[9,13,27,32],sa=f&&"CompositionEvent"in window,Rt=null;f&&"documentMode"in document&&(Rt=document.documentMode);var wa=f&&"TextEvent"in window&&!Rt,ms=f&&(!sa||Rt&&8<Rt&&11>=Rt),pn=" ",ws=!1;function Qs(e,t){switch(e){case"keyup":return ma.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xn(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fs=!1;function Bc(e,t){switch(e){case"compositionend":return xn(t);case"keypress":return t.which!==32?null:(ws=!0,pn);case"textInput":return e=t.data,e===pn&&ws?null:e;default:return null}}function $c(e,t){if(Fs)return e==="compositionend"||!sa&&Qs(e,t)?(e=He(),Pe=Ee=_e=null,Fs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ms&&t.locale!=="ko"?null:t.data;default:return null}}var sn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!sn[e.type]:t==="textarea"}function fs(e,t,s,n){Hn?Ln?Ln.push(n):Ln=[n]:Hn=n,t=rc(t,"onChange"),0<t.length&&(s=new Dt("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var nn=null,gn=null;function Uc(e){Om(e,0)}function Ll(e){var t=qe(e);if(Rl(t))return e}function I0(e,t){if(e==="change")return t}var ed=!1;if(f){var Hc;if(f){var Lc="oninput"in document;if(!Lc){var td=document.createElement("div");td.setAttribute("oninput","return;"),Lc=typeof td.oninput=="function"}Hc=Lc}else Hc=!1;ed=Hc&&(!document.documentMode||9<document.documentMode)}function ad(){nn&&(nn.detachEvent("onpropertychange",sd),gn=nn=null)}function sd(e){if(e.propertyName==="value"&&Ll(gn)){var t=[];fs(t,gn,e,ns(e)),Rc(Uc,t)}}function vp(e,t,s){e==="focusin"?(ad(),nn=t,gn=s,nn.attachEvent("onpropertychange",sd)):e==="focusout"&&ad()}function jp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ll(gn)}function Np(e,t){if(e==="click")return Ll(t)}function wp(e,t){if(e==="input"||e==="change")return Ll(t)}function Cp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cs=typeof Object.is=="function"?Object.is:Cp;function Mi(e,t){if(Cs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var i=s[n];if(!Gt.call(t,i)||!Cs(e[i],t[i]))return!1}return!0}function nd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ld(e,t){var s=nd(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=nd(s)}}function id(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?id(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=$n(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=$n(e.document)}return t}function qc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Mp=f&&"documentMode"in document&&11>=document.documentMode,ql=null,Vc=null,_i=null,Gc=!1;function cd(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Gc||ql==null||ql!==$n(n)||(n=ql,"selectionStart"in n&&qc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_i&&Mi(_i,n)||(_i=n,n=rc(Vc,"onSelect"),0<n.length&&(t=new Dt("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=ql)))}function hl(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Vl={animationend:hl("Animation","AnimationEnd"),animationiteration:hl("Animation","AnimationIteration"),animationstart:hl("Animation","AnimationStart"),transitionrun:hl("Transition","TransitionRun"),transitionstart:hl("Transition","TransitionStart"),transitioncancel:hl("Transition","TransitionCancel"),transitionend:hl("Transition","TransitionEnd")},Wc={},od={};f&&(od=document.createElement("div").style,"AnimationEvent"in window||(delete Vl.animationend.animation,delete Vl.animationiteration.animation,delete Vl.animationstart.animation),"TransitionEvent"in window||delete Vl.transitionend.transition);function gl(e){if(Wc[e])return Wc[e];if(!Vl[e])return e;var t=Vl[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in od)return Wc[e]=t[s];return e}var dd=gl("animationend"),ud=gl("animationiteration"),md=gl("animationstart"),_p=gl("transitionrun"),Tp=gl("transitionstart"),kp=gl("transitioncancel"),fd=gl("transitionend"),pd=new Map,Yc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yc.push("scrollEnd");function Js(e,t){pd.set(e,t),Ie(t,[e])}var vr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Bs=[],Gl=0,Xc=0;function jr(){for(var e=Gl,t=Xc=Gl=0;t<e;){var s=Bs[t];Bs[t++]=null;var n=Bs[t];Bs[t++]=null;var i=Bs[t];Bs[t++]=null;var r=Bs[t];if(Bs[t++]=null,n!==null&&i!==null){var d=n.pending;d===null?i.next=i:(i.next=d.next,d.next=i),n.pending=i}r!==0&&xd(s,i,r)}}function Nr(e,t,s,n){Bs[Gl++]=e,Bs[Gl++]=t,Bs[Gl++]=s,Bs[Gl++]=n,Xc|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Pc(e,t,s,n){return Nr(e,t,s,n),wr(e)}function yl(e,t){return Nr(e,null,null,t),wr(e)}function xd(e,t,s){e.lanes|=s;var n=e.alternate;n!==null&&(n.lanes|=s);for(var i=!1,r=e.return;r!==null;)r.childLanes|=s,n=r.alternate,n!==null&&(n.childLanes|=s),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(i=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,i&&t!==null&&(i=31-Bt(s),e=r.hiddenUpdates,n=e[i],n===null?e[i]=[t]:n.push(t),t.lane=s|536870912),r):null}function wr(e){if(50<Zi)throw Zi=0,s0=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Wl={};function Ep(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ms(e,t,s,n){return new Ep(e,t,s,n)}function Zc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yn(e,t){var s=e.alternate;return s===null?(s=Ms(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function hd(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Cr(e,t,s,n,i,r){var d=0;if(n=e,typeof e=="function")Zc(e)&&(d=1);else if(typeof e=="string")d=Ox(e,s,J.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case de:return e=Ms(31,s,t,i),e.elementType=de,e.lanes=r,e;case M:return bl(s.children,i,r,t);case A:d=8,i|=24;break;case S:return e=Ms(12,s,t,i|2),e.elementType=S,e.lanes=r,e;case Ce:return e=Ms(13,s,t,i),e.elementType=Ce,e.lanes=r,e;case oe:return e=Ms(19,s,t,i),e.elementType=oe,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ae:d=10;break e;case ie:d=9;break e;case ce:d=11;break e;case se:d=14;break e;case B:d=16,n=null;break e}d=29,s=Error(o(130,e===null?"null":typeof e,"")),n=null}return t=Ms(d,s,t,i),t.elementType=e,t.type=n,t.lanes=r,t}function bl(e,t,s,n){return e=Ms(7,e,n,t),e.lanes=s,e}function Qc(e,t,s){return e=Ms(6,e,null,t),e.lanes=s,e}function gd(e){var t=Ms(18,null,null,0);return t.stateNode=e,t}function Fc(e,t,s){return t=Ms(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var yd=new WeakMap;function $s(e,t){if(typeof e=="object"&&e!==null){var s=yd.get(e);return s!==void 0?s:(t={value:e,source:t,stack:ua(t)},yd.set(e,t),t)}return{value:e,source:t,stack:ua(t)}}var Yl=[],Xl=0,Mr=null,Ti=0,Us=[],Hs=0,qn=null,ln=1,rn="";function bn(e,t){Yl[Xl++]=Ti,Yl[Xl++]=Mr,Mr=e,Ti=t}function bd(e,t,s){Us[Hs++]=ln,Us[Hs++]=rn,Us[Hs++]=qn,qn=e;var n=ln;e=rn;var i=32-Bt(n)-1;n&=~(1<<i),s+=1;var r=32-Bt(t)+i;if(30<r){var d=i-i%5;r=(n&(1<<d)-1).toString(32),n>>=d,i-=d,ln=1<<32-Bt(t)+i|s<<i|n,rn=r+e}else ln=1<<r|s<<i|n,rn=e}function Jc(e){e.return!==null&&(bn(e,1),bd(e,1,0))}function Kc(e){for(;e===Mr;)Mr=Yl[--Xl],Yl[Xl]=null,Ti=Yl[--Xl],Yl[Xl]=null;for(;e===qn;)qn=Us[--Hs],Us[Hs]=null,rn=Us[--Hs],Us[Hs]=null,ln=Us[--Hs],Us[Hs]=null}function vd(e,t){Us[Hs++]=ln,Us[Hs++]=rn,Us[Hs++]=qn,ln=t.id,rn=t.overflow,qn=e}var Wa=null,la=null,At=!1,Vn=null,Ls=!1,Ic=Error(o(519));function Gn(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ki($s(t,e)),Ic}function jd(e){var t=e.stateNode,s=e.type,n=e.memoizedProps;switch(t[ra]=e,t[ha]=n,s){case"dialog":jt("cancel",t),jt("close",t);break;case"iframe":case"object":case"embed":jt("load",t);break;case"video":case"audio":for(s=0;s<Fi.length;s++)jt(Fi[s],t);break;case"source":jt("error",t);break;case"img":case"image":case"link":jt("error",t),jt("load",t);break;case"details":jt("toggle",t);break;case"input":jt("invalid",t),mn(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":jt("invalid",t);break;case"textarea":jt("invalid",t),hr(t,n.value,n.defaultValue,n.children)}s=n.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||n.suppressHydrationWarning===!0||Um(t.textContent,s)?(n.popover!=null&&(jt("beforetoggle",t),jt("toggle",t)),n.onScroll!=null&&jt("scroll",t),n.onScrollEnd!=null&&jt("scrollend",t),n.onClick!=null&&(t.onclick=Zs),t=!0):t=!1,t||Gn(e,!0)}function Nd(e){for(Wa=e.return;Wa;)switch(Wa.tag){case 5:case 31:case 13:Ls=!1;return;case 27:case 3:Ls=!0;return;default:Wa=Wa.return}}function Pl(e){if(e!==Wa)return!1;if(!At)return Nd(e),At=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||y0(e.type,e.memoizedProps)),s=!s),s&&la&&Gn(e),Nd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));la=Pm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));la=Pm(e)}else t===27?(t=la,sl(e.type)?(e=w0,w0=null,la=e):la=t):la=Wa?Vs(e.stateNode.nextSibling):null;return!0}function vl(){la=Wa=null,At=!1}function eo(){var e=Vn;return e!==null&&(gs===null?gs=e:gs.push.apply(gs,e),Vn=null),e}function ki(e){Vn===null?Vn=[e]:Vn.push(e)}var to=u(null),jl=null,vn=null;function Wn(e,t,s){$(to,t._currentValue),t._currentValue=s}function jn(e){e._currentValue=to.current,C(to)}function ao(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function so(e,t,s,n){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var r=i.dependencies;if(r!==null){var d=i.child;r=r.firstContext;e:for(;r!==null;){var x=r;r=i;for(var T=0;T<t.length;T++)if(x.context===t[T]){r.lanes|=s,x=r.alternate,x!==null&&(x.lanes|=s),ao(r.return,s,e),n||(d=null);break e}r=x.next}}else if(i.tag===18){if(d=i.return,d===null)throw Error(o(341));d.lanes|=s,r=d.alternate,r!==null&&(r.lanes|=s),ao(d,s,e),d=null}else d=i.child;if(d!==null)d.return=i;else for(d=i;d!==null;){if(d===e){d=null;break}if(i=d.sibling,i!==null){i.return=d.return,d=i;break}d=d.return}i=d}}function Zl(e,t,s,n){e=null;for(var i=t,r=!1;i!==null;){if(!r){if((i.flags&524288)!==0)r=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var d=i.alternate;if(d===null)throw Error(o(387));if(d=d.memoizedProps,d!==null){var x=i.type;Cs(i.pendingProps.value,d.value)||(e!==null?e.push(x):e=[x])}}else if(i===fe.current){if(d=i.alternate,d===null)throw Error(o(387));d.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(tr):e=[tr])}i=i.return}e!==null&&so(t,e,s,n),t.flags|=262144}function _r(e){for(e=e.firstContext;e!==null;){if(!Cs(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Nl(e){jl=e,vn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ya(e){return wd(jl,e)}function Tr(e,t){return jl===null&&Nl(e),wd(e,t)}function wd(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},vn===null){if(e===null)throw Error(o(308));vn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vn=vn.next=t;return s}var Sp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},Ap=l.unstable_scheduleCallback,zp=l.unstable_NormalPriority,Ca={$$typeof:ae,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function no(){return{controller:new Sp,data:new Map,refCount:0}}function Ei(e){e.refCount--,e.refCount===0&&Ap(zp,function(){e.controller.abort()})}var Si=null,lo=0,Ql=0,Fl=null;function Dp(e,t){if(Si===null){var s=Si=[];lo=0,Ql=o0(),Fl={status:"pending",value:void 0,then:function(n){s.push(n)}}}return lo++,t.then(Cd,Cd),t}function Cd(){if(--lo===0&&Si!==null){Fl!==null&&(Fl.status="fulfilled");var e=Si;Si=null,Ql=0,Fl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Op(e,t){var s=[],n={status:"pending",value:null,reason:null,then:function(i){s.push(i)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var i=0;i<s.length;i++)(0,s[i])(t)},function(i){for(n.status="rejected",n.reason=i,i=0;i<s.length;i++)(0,s[i])(void 0)}),n}var Md=b.S;b.S=function(e,t){cm=F(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Dp(e,t),Md!==null&&Md(e,t)};var wl=u(null);function io(){var e=wl.current;return e!==null?e:It.pooledCache}function kr(e,t){t===null?$(wl,wl.current):$(wl,t.pool)}function _d(){var e=io();return e===null?null:{parent:Ca._currentValue,pool:e}}var Jl=Error(o(460)),ro=Error(o(474)),Er=Error(o(542)),Sr={then:function(){}};function Td(e){return e=e.status,e==="fulfilled"||e==="rejected"}function kd(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(Zs,Zs),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Sd(e),e;default:if(typeof t.status=="string")t.then(Zs,Zs);else{if(e=It,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=n}},function(n){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Sd(e),e}throw Ml=t,Jl}}function Cl(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Ml=s,Jl):s}}var Ml=null;function Ed(){if(Ml===null)throw Error(o(459));var e=Ml;return Ml=null,e}function Sd(e){if(e===Jl||e===Er)throw Error(o(483))}var Kl=null,Ai=0;function Ar(e){var t=Ai;return Ai+=1,Kl===null&&(Kl=[]),kd(Kl,e,t)}function zi(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function zr(e,t){throw t.$$typeof===E?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ad(e){function t(H,z){if(e){var W=H.deletions;W===null?(H.deletions=[z],H.flags|=16):W.push(z)}}function s(H,z){if(!e)return null;for(;z!==null;)t(H,z),z=z.sibling;return null}function n(H){for(var z=new Map;H!==null;)H.key!==null?z.set(H.key,H):z.set(H.index,H),H=H.sibling;return z}function i(H,z){return H=yn(H,z),H.index=0,H.sibling=null,H}function r(H,z,W){return H.index=W,e?(W=H.alternate,W!==null?(W=W.index,W<z?(H.flags|=67108866,z):W):(H.flags|=67108866,z)):(H.flags|=1048576,z)}function d(H){return e&&H.alternate===null&&(H.flags|=67108866),H}function x(H,z,W,xe){return z===null||z.tag!==6?(z=Qc(W,H.mode,xe),z.return=H,z):(z=i(z,W),z.return=H,z)}function T(H,z,W,xe){var at=W.type;return at===M?re(H,z,W.props.children,xe,W.key):z!==null&&(z.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===B&&Cl(at)===z.type)?(z=i(z,W.props),zi(z,W),z.return=H,z):(z=Cr(W.type,W.key,W.props,null,H.mode,xe),zi(z,W),z.return=H,z)}function Y(H,z,W,xe){return z===null||z.tag!==4||z.stateNode.containerInfo!==W.containerInfo||z.stateNode.implementation!==W.implementation?(z=Fc(W,H.mode,xe),z.return=H,z):(z=i(z,W.children||[]),z.return=H,z)}function re(H,z,W,xe,at){return z===null||z.tag!==7?(z=bl(W,H.mode,xe,at),z.return=H,z):(z=i(z,W),z.return=H,z)}function he(H,z,W){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Qc(""+z,H.mode,W),z.return=H,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case U:return W=Cr(z.type,z.key,z.props,null,H.mode,W),zi(W,z),W.return=H,W;case D:return z=Fc(z,H.mode,W),z.return=H,z;case B:return z=Cl(z),he(H,z,W)}if(me(z)||ge(z))return z=bl(z,H.mode,W,null),z.return=H,z;if(typeof z.then=="function")return he(H,Ar(z),W);if(z.$$typeof===ae)return he(H,Tr(H,z),W);zr(H,z)}return null}function Z(H,z,W,xe){var at=z!==null?z.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return at!==null?null:x(H,z,""+W,xe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case U:return W.key===at?T(H,z,W,xe):null;case D:return W.key===at?Y(H,z,W,xe):null;case B:return W=Cl(W),Z(H,z,W,xe)}if(me(W)||ge(W))return at!==null?null:re(H,z,W,xe,null);if(typeof W.then=="function")return Z(H,z,Ar(W),xe);if(W.$$typeof===ae)return Z(H,z,Tr(H,W),xe);zr(H,W)}return null}function ee(H,z,W,xe,at){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return H=H.get(W)||null,x(z,H,""+xe,at);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case U:return H=H.get(xe.key===null?W:xe.key)||null,T(z,H,xe,at);case D:return H=H.get(xe.key===null?W:xe.key)||null,Y(z,H,xe,at);case B:return xe=Cl(xe),ee(H,z,W,xe,at)}if(me(xe)||ge(xe))return H=H.get(W)||null,re(z,H,xe,at,null);if(typeof xe.then=="function")return ee(H,z,W,Ar(xe),at);if(xe.$$typeof===ae)return ee(H,z,W,Tr(z,xe),at);zr(z,xe)}return null}function Ze(H,z,W,xe){for(var at=null,Lt=null,Je=z,gt=z=0,Tt=null;Je!==null&&gt<W.length;gt++){Je.index>gt?(Tt=Je,Je=null):Tt=Je.sibling;var qt=Z(H,Je,W[gt],xe);if(qt===null){Je===null&&(Je=Tt);break}e&&Je&&qt.alternate===null&&t(H,Je),z=r(qt,z,gt),Lt===null?at=qt:Lt.sibling=qt,Lt=qt,Je=Tt}if(gt===W.length)return s(H,Je),At&&bn(H,gt),at;if(Je===null){for(;gt<W.length;gt++)Je=he(H,W[gt],xe),Je!==null&&(z=r(Je,z,gt),Lt===null?at=Je:Lt.sibling=Je,Lt=Je);return At&&bn(H,gt),at}for(Je=n(Je);gt<W.length;gt++)Tt=ee(Je,H,gt,W[gt],xe),Tt!==null&&(e&&Tt.alternate!==null&&Je.delete(Tt.key===null?gt:Tt.key),z=r(Tt,z,gt),Lt===null?at=Tt:Lt.sibling=Tt,Lt=Tt);return e&&Je.forEach(function(cl){return t(H,cl)}),At&&bn(H,gt),at}function lt(H,z,W,xe){if(W==null)throw Error(o(151));for(var at=null,Lt=null,Je=z,gt=z=0,Tt=null,qt=W.next();Je!==null&&!qt.done;gt++,qt=W.next()){Je.index>gt?(Tt=Je,Je=null):Tt=Je.sibling;var cl=Z(H,Je,qt.value,xe);if(cl===null){Je===null&&(Je=Tt);break}e&&Je&&cl.alternate===null&&t(H,Je),z=r(cl,z,gt),Lt===null?at=cl:Lt.sibling=cl,Lt=cl,Je=Tt}if(qt.done)return s(H,Je),At&&bn(H,gt),at;if(Je===null){for(;!qt.done;gt++,qt=W.next())qt=he(H,qt.value,xe),qt!==null&&(z=r(qt,z,gt),Lt===null?at=qt:Lt.sibling=qt,Lt=qt);return At&&bn(H,gt),at}for(Je=n(Je);!qt.done;gt++,qt=W.next())qt=ee(Je,H,gt,qt.value,xe),qt!==null&&(e&&qt.alternate!==null&&Je.delete(qt.key===null?gt:qt.key),z=r(qt,z,gt),Lt===null?at=qt:Lt.sibling=qt,Lt=qt);return e&&Je.forEach(function(Yx){return t(H,Yx)}),At&&bn(H,gt),at}function Kt(H,z,W,xe){if(typeof W=="object"&&W!==null&&W.type===M&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case U:e:{for(var at=W.key;z!==null;){if(z.key===at){if(at=W.type,at===M){if(z.tag===7){s(H,z.sibling),xe=i(z,W.props.children),xe.return=H,H=xe;break e}}else if(z.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===B&&Cl(at)===z.type){s(H,z.sibling),xe=i(z,W.props),zi(xe,W),xe.return=H,H=xe;break e}s(H,z);break}else t(H,z);z=z.sibling}W.type===M?(xe=bl(W.props.children,H.mode,xe,W.key),xe.return=H,H=xe):(xe=Cr(W.type,W.key,W.props,null,H.mode,xe),zi(xe,W),xe.return=H,H=xe)}return d(H);case D:e:{for(at=W.key;z!==null;){if(z.key===at)if(z.tag===4&&z.stateNode.containerInfo===W.containerInfo&&z.stateNode.implementation===W.implementation){s(H,z.sibling),xe=i(z,W.children||[]),xe.return=H,H=xe;break e}else{s(H,z);break}else t(H,z);z=z.sibling}xe=Fc(W,H.mode,xe),xe.return=H,H=xe}return d(H);case B:return W=Cl(W),Kt(H,z,W,xe)}if(me(W))return Ze(H,z,W,xe);if(ge(W)){if(at=ge(W),typeof at!="function")throw Error(o(150));return W=at.call(W),lt(H,z,W,xe)}if(typeof W.then=="function")return Kt(H,z,Ar(W),xe);if(W.$$typeof===ae)return Kt(H,z,Tr(H,W),xe);zr(H,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,z!==null&&z.tag===6?(s(H,z.sibling),xe=i(z,W),xe.return=H,H=xe):(s(H,z),xe=Qc(W,H.mode,xe),xe.return=H,H=xe),d(H)):s(H,z)}return function(H,z,W,xe){try{Ai=0;var at=Kt(H,z,W,xe);return Kl=null,at}catch(Je){if(Je===Jl||Je===Er)throw Je;var Lt=Ms(29,Je,null,H.mode);return Lt.lanes=xe,Lt.return=H,Lt}finally{}}}var _l=Ad(!0),zd=Ad(!1),Yn=!1;function co(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function oo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Xn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Pn(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Vt&2)!==0){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,t=wr(e),xd(e,null,s),t}return Nr(e,n,t,s),wr(e)}function Di(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,dt(e,s)}}function uo(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var i=null,r=null;if(s=s.firstBaseUpdate,s!==null){do{var d={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};r===null?i=r=d:r=r.next=d,s=s.next}while(s!==null);r===null?i=r=t:r=r.next=t}else i=r=t;s={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:n.shared,callbacks:n.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var mo=!1;function Oi(){if(mo){var e=Fl;if(e!==null)throw e}}function Ri(e,t,s,n){mo=!1;var i=e.updateQueue;Yn=!1;var r=i.firstBaseUpdate,d=i.lastBaseUpdate,x=i.shared.pending;if(x!==null){i.shared.pending=null;var T=x,Y=T.next;T.next=null,d===null?r=Y:d.next=Y,d=T;var re=e.alternate;re!==null&&(re=re.updateQueue,x=re.lastBaseUpdate,x!==d&&(x===null?re.firstBaseUpdate=Y:x.next=Y,re.lastBaseUpdate=T))}if(r!==null){var he=i.baseState;d=0,re=Y=T=null,x=r;do{var Z=x.lane&-536870913,ee=Z!==x.lane;if(ee?(_t&Z)===Z:(n&Z)===Z){Z!==0&&Z===Ql&&(mo=!0),re!==null&&(re=re.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var Ze=e,lt=x;Z=t;var Kt=s;switch(lt.tag){case 1:if(Ze=lt.payload,typeof Ze=="function"){he=Ze.call(Kt,he,Z);break e}he=Ze;break e;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=lt.payload,Z=typeof Ze=="function"?Ze.call(Kt,he,Z):Ze,Z==null)break e;he=_({},he,Z);break e;case 2:Yn=!0}}Z=x.callback,Z!==null&&(e.flags|=64,ee&&(e.flags|=8192),ee=i.callbacks,ee===null?i.callbacks=[Z]:ee.push(Z))}else ee={lane:Z,tag:x.tag,payload:x.payload,callback:x.callback,next:null},re===null?(Y=re=ee,T=he):re=re.next=ee,d|=Z;if(x=x.next,x===null){if(x=i.shared.pending,x===null)break;ee=x,x=ee.next,ee.next=null,i.lastBaseUpdate=ee,i.shared.pending=null}}while(!0);re===null&&(T=he),i.baseState=T,i.firstBaseUpdate=Y,i.lastBaseUpdate=re,r===null&&(i.shared.lanes=0),Kn|=d,e.lanes=d,e.memoizedState=he}}function Dd(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function Od(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Dd(s[e],t)}var Il=u(null),Dr=u(0);function Rd(e,t){e=Sn,$(Dr,e),$(Il,t),Sn=e|t.baseLanes}function fo(){$(Dr,Sn),$(Il,Il.current)}function po(){Sn=Dr.current,C(Il),C(Dr)}var _s=u(null),qs=null;function Zn(e){var t=e.alternate;$(ga,ga.current&1),$(_s,e),qs===null&&(t===null||Il.current!==null||t.memoizedState!==null)&&(qs=e)}function xo(e){$(ga,ga.current),$(_s,e),qs===null&&(qs=e)}function Bd(e){e.tag===22?($(ga,ga.current),$(_s,e),qs===null&&(qs=e)):Qn()}function Qn(){$(ga,ga.current),$(_s,_s.current)}function Ts(e){C(_s),qs===e&&(qs=null),C(ga)}var ga=u(0);function Or(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||j0(s)||N0(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Nn=0,pt=null,Ft=null,Ma=null,Rr=!1,ei=!1,Tl=!1,Br=0,Bi=0,ti=null,Rp=0;function fa(){throw Error(o(321))}function ho(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Cs(e[s],t[s]))return!1;return!0}function go(e,t,s,n,i,r){return Nn=r,pt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,b.H=e===null||e.memoizedState===null?bu:zo,Tl=!1,r=s(n,i),Tl=!1,ei&&(r=Ud(t,s,n,i)),$d(e),r}function $d(e){b.H=Hi;var t=Ft!==null&&Ft.next!==null;if(Nn=0,Ma=Ft=pt=null,Rr=!1,Bi=0,ti=null,t)throw Error(o(300));e===null||_a||(e=e.dependencies,e!==null&&_r(e)&&(_a=!0))}function Ud(e,t,s,n){pt=e;var i=0;do{if(ei&&(ti=null),Bi=0,ei=!1,25<=i)throw Error(o(301));if(i+=1,Ma=Ft=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}b.H=vu,r=t(s,n)}while(ei);return r}function Bp(){var e=b.H,t=e.useState()[0];return t=typeof t.then=="function"?$i(t):t,e=e.useState()[0],(Ft!==null?Ft.memoizedState:null)!==e&&(pt.flags|=1024),t}function yo(){var e=Br!==0;return Br=0,e}function bo(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function vo(e){if(Rr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Rr=!1}Nn=0,Ma=Ft=pt=null,ei=!1,Bi=Br=0,ti=null}function ls(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ma===null?pt.memoizedState=Ma=e:Ma=Ma.next=e,Ma}function ya(){if(Ft===null){var e=pt.alternate;e=e!==null?e.memoizedState:null}else e=Ft.next;var t=Ma===null?pt.memoizedState:Ma.next;if(t!==null)Ma=t,Ft=e;else{if(e===null)throw pt.alternate===null?Error(o(467)):Error(o(310));Ft=e,e={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Ma===null?pt.memoizedState=Ma=e:Ma=Ma.next=e}return Ma}function $r(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $i(e){var t=Bi;return Bi+=1,ti===null&&(ti=[]),e=kd(ti,e,t),t=pt,(Ma===null?t.memoizedState:Ma.next)===null&&(t=t.alternate,b.H=t===null||t.memoizedState===null?bu:zo),e}function Ur(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return $i(e);if(e.$$typeof===ae)return Ya(e)}throw Error(o(438,String(e)))}function jo(e){var t=null,s=pt.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var n=pt.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=$r(),pt.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),n=0;n<e;n++)s[n]=Q;return t.index++,s}function wn(e,t){return typeof t=="function"?t(e):t}function Hr(e){var t=ya();return No(t,Ft,e)}function No(e,t,s){var n=e.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=s;var i=e.baseQueue,r=n.pending;if(r!==null){if(i!==null){var d=i.next;i.next=r.next,r.next=d}t.baseQueue=i=r,n.pending=null}if(r=e.baseState,i===null)e.memoizedState=r;else{t=i.next;var x=d=null,T=null,Y=t,re=!1;do{var he=Y.lane&-536870913;if(he!==Y.lane?(_t&he)===he:(Nn&he)===he){var Z=Y.revertLane;if(Z===0)T!==null&&(T=T.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),he===Ql&&(re=!0);else if((Nn&Z)===Z){Y=Y.next,Z===Ql&&(re=!0);continue}else he={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},T===null?(x=T=he,d=r):T=T.next=he,pt.lanes|=Z,Kn|=Z;he=Y.action,Tl&&s(r,he),r=Y.hasEagerState?Y.eagerState:s(r,he)}else Z={lane:he,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},T===null?(x=T=Z,d=r):T=T.next=Z,pt.lanes|=he,Kn|=he;Y=Y.next}while(Y!==null&&Y!==t);if(T===null?d=r:T.next=x,!Cs(r,e.memoizedState)&&(_a=!0,re&&(s=Fl,s!==null)))throw s;e.memoizedState=r,e.baseState=d,e.baseQueue=T,n.lastRenderedState=r}return i===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function wo(e){var t=ya(),s=t.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var n=s.dispatch,i=s.pending,r=t.memoizedState;if(i!==null){s.pending=null;var d=i=i.next;do r=e(r,d.action),d=d.next;while(d!==i);Cs(r,t.memoizedState)||(_a=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),s.lastRenderedState=r}return[r,n]}function Hd(e,t,s){var n=pt,i=ya(),r=At;if(r){if(s===void 0)throw Error(o(407));s=s()}else s=t();var d=!Cs((Ft||i).memoizedState,s);if(d&&(i.memoizedState=s,_a=!0),i=i.queue,_o(Vd.bind(null,n,i,e),[e]),i.getSnapshot!==t||d||Ma!==null&&Ma.memoizedState.tag&1){if(n.flags|=2048,ai(9,{destroy:void 0},qd.bind(null,n,i,s,t),null),It===null)throw Error(o(349));r||(Nn&127)!==0||Ld(n,t,s)}return s}function Ld(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=pt.updateQueue,t===null?(t=$r(),pt.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function qd(e,t,s,n){t.value=s,t.getSnapshot=n,Gd(t)&&Wd(e)}function Vd(e,t,s){return s(function(){Gd(t)&&Wd(e)})}function Gd(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Cs(e,s)}catch{return!0}}function Wd(e){var t=yl(e,2);t!==null&&ys(t,e,2)}function Co(e){var t=ls();if(typeof e=="function"){var s=e;if(e=s(),Tl){kt(!0);try{s()}finally{kt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:e},t}function Yd(e,t,s,n){return e.baseState=s,No(e,Ft,typeof n=="function"?n:wn)}function $p(e,t,s,n,i){if(Vr(e))throw Error(o(485));if(e=t.action,e!==null){var r={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){r.listeners.push(d)}};b.T!==null?s(!0):r.isTransition=!1,n(r),s=t.pending,s===null?(r.next=t.pending=r,Xd(t,r)):(r.next=s.next,t.pending=s.next=r)}}function Xd(e,t){var s=t.action,n=t.payload,i=e.state;if(t.isTransition){var r=b.T,d={};b.T=d;try{var x=s(i,n),T=b.S;T!==null&&T(d,x),Pd(e,t,x)}catch(Y){Mo(e,t,Y)}finally{r!==null&&d.types!==null&&(r.types=d.types),b.T=r}}else try{r=s(i,n),Pd(e,t,r)}catch(Y){Mo(e,t,Y)}}function Pd(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(n){Zd(e,t,n)},function(n){return Mo(e,t,n)}):Zd(e,t,s)}function Zd(e,t,s){t.status="fulfilled",t.value=s,Qd(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,Xd(e,s)))}function Mo(e,t,s){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=s,Qd(t),t=t.next;while(t!==n)}e.action=null}function Qd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Fd(e,t){return t}function Jd(e,t){if(At){var s=It.formState;if(s!==null){e:{var n=pt;if(At){if(la){t:{for(var i=la,r=Ls;i.nodeType!==8;){if(!r){i=null;break t}if(i=Vs(i.nextSibling),i===null){i=null;break t}}r=i.data,i=r==="F!"||r==="F"?i:null}if(i){la=Vs(i.nextSibling),n=i.data==="F!";break e}}Gn(n)}n=!1}n&&(t=s[0])}}return s=ls(),s.memoizedState=s.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fd,lastRenderedState:t},s.queue=n,s=hu.bind(null,pt,n),n.dispatch=s,n=Co(!1),r=Ao.bind(null,pt,!1,n.queue),n=ls(),i={state:t,dispatch:null,action:e,pending:null},n.queue=i,s=$p.bind(null,pt,i,r,s),i.dispatch=s,n.memoizedState=e,[t,s,!1]}function Kd(e){var t=ya();return Id(t,Ft,e)}function Id(e,t,s){if(t=No(e,t,Fd)[0],e=Hr(wn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=$i(t)}catch(d){throw d===Jl?Er:d}else n=t;t=ya();var i=t.queue,r=i.dispatch;return s!==t.memoizedState&&(pt.flags|=2048,ai(9,{destroy:void 0},Up.bind(null,i,s),null)),[n,r,e]}function Up(e,t){e.action=t}function eu(e){var t=ya(),s=Ft;if(s!==null)return Id(t,s,e);ya(),t=t.memoizedState,s=ya();var n=s.queue.dispatch;return s.memoizedState=e,[t,n,!1]}function ai(e,t,s,n){return e={tag:e,create:s,deps:n,inst:t,next:null},t=pt.updateQueue,t===null&&(t=$r(),pt.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e),e}function tu(){return ya().memoizedState}function Lr(e,t,s,n){var i=ls();pt.flags|=e,i.memoizedState=ai(1|t,{destroy:void 0},s,n===void 0?null:n)}function qr(e,t,s,n){var i=ya();n=n===void 0?null:n;var r=i.memoizedState.inst;Ft!==null&&n!==null&&ho(n,Ft.memoizedState.deps)?i.memoizedState=ai(t,r,s,n):(pt.flags|=e,i.memoizedState=ai(1|t,r,s,n))}function au(e,t){Lr(8390656,8,e,t)}function _o(e,t){qr(2048,8,e,t)}function Hp(e){pt.flags|=4;var t=pt.updateQueue;if(t===null)t=$r(),pt.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function su(e){var t=ya().memoizedState;return Hp({ref:t,nextImpl:e}),function(){if((Vt&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function nu(e,t){return qr(4,2,e,t)}function lu(e,t){return qr(4,4,e,t)}function iu(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ru(e,t,s){s=s!=null?s.concat([e]):null,qr(4,4,iu.bind(null,t,e),s)}function To(){}function cu(e,t){var s=ya();t=t===void 0?null:t;var n=s.memoizedState;return t!==null&&ho(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function ou(e,t){var s=ya();t=t===void 0?null:t;var n=s.memoizedState;if(t!==null&&ho(t,n[1]))return n[0];if(n=e(),Tl){kt(!0);try{e()}finally{kt(!1)}}return s.memoizedState=[n,t],n}function ko(e,t,s){return s===void 0||(Nn&1073741824)!==0&&(_t&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=dm(),pt.lanes|=e,Kn|=e,s)}function du(e,t,s,n){return Cs(s,t)?s:Il.current!==null?(e=ko(e,s,n),Cs(e,t)||(_a=!0),e):(Nn&42)===0||(Nn&1073741824)!==0&&(_t&261930)===0?(_a=!0,e.memoizedState=s):(e=dm(),pt.lanes|=e,Kn|=e,t)}function uu(e,t,s,n,i){var r=O.p;O.p=r!==0&&8>r?r:8;var d=b.T,x={};b.T=x,Ao(e,!1,t,s);try{var T=i(),Y=b.S;if(Y!==null&&Y(x,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var re=Op(T,n);Ui(e,t,re,Ss(e))}else Ui(e,t,n,Ss(e))}catch(he){Ui(e,t,{then:function(){},status:"rejected",reason:he},Ss())}finally{O.p=r,d!==null&&x.types!==null&&(d.types=x.types),b.T=d}}function Lp(){}function Eo(e,t,s,n){if(e.tag!==5)throw Error(o(476));var i=mu(e).queue;uu(e,i,t,R,s===null?Lp:function(){return fu(e),s(n)})}function mu(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:R},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function fu(e){var t=mu(e);t.next===null&&(t=e.alternate.memoizedState),Ui(e,t.next.queue,{},Ss())}function So(){return Ya(tr)}function pu(){return ya().memoizedState}function xu(){return ya().memoizedState}function qp(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=Ss();e=Xn(s);var n=Pn(t,e,s);n!==null&&(ys(n,t,s),Di(n,t,s)),t={cache:no()},e.payload=t;return}t=t.return}}function Vp(e,t,s){var n=Ss();s={lane:n,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Vr(e)?gu(t,s):(s=Pc(e,t,s,n),s!==null&&(ys(s,e,n),yu(s,t,n)))}function hu(e,t,s){var n=Ss();Ui(e,t,s,n)}function Ui(e,t,s,n){var i={lane:n,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Vr(e))gu(t,i);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var d=t.lastRenderedState,x=r(d,s);if(i.hasEagerState=!0,i.eagerState=x,Cs(x,d))return Nr(e,t,i,0),It===null&&jr(),!1}catch{}finally{}if(s=Pc(e,t,i,n),s!==null)return ys(s,e,n),yu(s,t,n),!0}return!1}function Ao(e,t,s,n){if(n={lane:2,revertLane:o0(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Vr(e)){if(t)throw Error(o(479))}else t=Pc(e,s,n,2),t!==null&&ys(t,e,2)}function Vr(e){var t=e.alternate;return e===pt||t!==null&&t===pt}function gu(e,t){ei=Rr=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function yu(e,t,s){if((s&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,dt(e,s)}}var Hi={readContext:Ya,use:Ur,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useLayoutEffect:fa,useInsertionEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useSyncExternalStore:fa,useId:fa,useHostTransitionStatus:fa,useFormState:fa,useActionState:fa,useOptimistic:fa,useMemoCache:fa,useCacheRefresh:fa};Hi.useEffectEvent=fa;var bu={readContext:Ya,use:Ur,useCallback:function(e,t){return ls().memoizedState=[e,t===void 0?null:t],e},useContext:Ya,useEffect:au,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,Lr(4194308,4,iu.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Lr(4194308,4,e,t)},useInsertionEffect:function(e,t){Lr(4,2,e,t)},useMemo:function(e,t){var s=ls();t=t===void 0?null:t;var n=e();if(Tl){kt(!0);try{e()}finally{kt(!1)}}return s.memoizedState=[n,t],n},useReducer:function(e,t,s){var n=ls();if(s!==void 0){var i=s(t);if(Tl){kt(!0);try{s(t)}finally{kt(!1)}}}else i=t;return n.memoizedState=n.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},n.queue=e,e=e.dispatch=Vp.bind(null,pt,e),[n.memoizedState,e]},useRef:function(e){var t=ls();return e={current:e},t.memoizedState=e},useState:function(e){e=Co(e);var t=e.queue,s=hu.bind(null,pt,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:To,useDeferredValue:function(e,t){var s=ls();return ko(s,e,t)},useTransition:function(){var e=Co(!1);return e=uu.bind(null,pt,e.queue,!0,!1),ls().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var n=pt,i=ls();if(At){if(s===void 0)throw Error(o(407));s=s()}else{if(s=t(),It===null)throw Error(o(349));(_t&127)!==0||Ld(n,t,s)}i.memoizedState=s;var r={value:s,getSnapshot:t};return i.queue=r,au(Vd.bind(null,n,r,e),[e]),n.flags|=2048,ai(9,{destroy:void 0},qd.bind(null,n,r,s,t),null),s},useId:function(){var e=ls(),t=It.identifierPrefix;if(At){var s=rn,n=ln;s=(n&~(1<<32-Bt(n)-1)).toString(32)+s,t="_"+t+"R_"+s,s=Br++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=Rp++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:So,useFormState:Jd,useActionState:Jd,useOptimistic:function(e){var t=ls();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=Ao.bind(null,pt,!0,s),s.dispatch=t,[e,t]},useMemoCache:jo,useCacheRefresh:function(){return ls().memoizedState=qp.bind(null,pt)},useEffectEvent:function(e){var t=ls(),s={impl:e};return t.memoizedState=s,function(){if((Vt&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}},zo={readContext:Ya,use:Ur,useCallback:cu,useContext:Ya,useEffect:_o,useImperativeHandle:ru,useInsertionEffect:nu,useLayoutEffect:lu,useMemo:ou,useReducer:Hr,useRef:tu,useState:function(){return Hr(wn)},useDebugValue:To,useDeferredValue:function(e,t){var s=ya();return du(s,Ft.memoizedState,e,t)},useTransition:function(){var e=Hr(wn)[0],t=ya().memoizedState;return[typeof e=="boolean"?e:$i(e),t]},useSyncExternalStore:Hd,useId:pu,useHostTransitionStatus:So,useFormState:Kd,useActionState:Kd,useOptimistic:function(e,t){var s=ya();return Yd(s,Ft,e,t)},useMemoCache:jo,useCacheRefresh:xu};zo.useEffectEvent=su;var vu={readContext:Ya,use:Ur,useCallback:cu,useContext:Ya,useEffect:_o,useImperativeHandle:ru,useInsertionEffect:nu,useLayoutEffect:lu,useMemo:ou,useReducer:wo,useRef:tu,useState:function(){return wo(wn)},useDebugValue:To,useDeferredValue:function(e,t){var s=ya();return Ft===null?ko(s,e,t):du(s,Ft.memoizedState,e,t)},useTransition:function(){var e=wo(wn)[0],t=ya().memoizedState;return[typeof e=="boolean"?e:$i(e),t]},useSyncExternalStore:Hd,useId:pu,useHostTransitionStatus:So,useFormState:eu,useActionState:eu,useOptimistic:function(e,t){var s=ya();return Ft!==null?Yd(s,Ft,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:jo,useCacheRefresh:xu};vu.useEffectEvent=su;function Do(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:_({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Oo={enqueueSetState:function(e,t,s){e=e._reactInternals;var n=Ss(),i=Xn(n);i.payload=t,s!=null&&(i.callback=s),t=Pn(e,i,n),t!==null&&(ys(t,e,n),Di(t,e,n))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=Ss(),i=Xn(n);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=Pn(e,i,n),t!==null&&(ys(t,e,n),Di(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Ss(),n=Xn(s);n.tag=2,t!=null&&(n.callback=t),t=Pn(e,n,s),t!==null&&(ys(t,e,s),Di(t,e,s))}};function ju(e,t,s,n,i,r,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,r,d):t.prototype&&t.prototype.isPureReactComponent?!Mi(s,n)||!Mi(i,r):!0}function Nu(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&Oo.enqueueReplaceState(t,t.state,null)}function kl(e,t){var s=t;if("ref"in t){s={};for(var n in t)n!=="ref"&&(s[n]=t[n])}if(e=e.defaultProps){s===t&&(s=_({},s));for(var i in e)s[i]===void 0&&(s[i]=e[i])}return s}function wu(e){vr(e)}function Cu(e){console.error(e)}function Mu(e){vr(e)}function Gr(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function _u(e,t,s){try{var n=e.onCaughtError;n(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Ro(e,t,s){return s=Xn(s),s.tag=3,s.payload={element:null},s.callback=function(){Gr(e,t)},s}function Tu(e){return e=Xn(e),e.tag=3,e}function ku(e,t,s,n){var i=s.type.getDerivedStateFromError;if(typeof i=="function"){var r=n.value;e.payload=function(){return i(r)},e.callback=function(){_u(t,s,n)}}var d=s.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(e.callback=function(){_u(t,s,n),typeof i!="function"&&(In===null?In=new Set([this]):In.add(this));var x=n.stack;this.componentDidCatch(n.value,{componentStack:x!==null?x:""})})}function Gp(e,t,s,n,i){if(s.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=s.alternate,t!==null&&Zl(t,s,i,!0),s=_s.current,s!==null){switch(s.tag){case 31:case 13:return qs===null?tc():s.alternate===null&&pa===0&&(pa=3),s.flags&=-257,s.flags|=65536,s.lanes=i,n===Sr?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([n]):t.add(n),i0(e,n,i)),!1;case 22:return s.flags|=65536,n===Sr?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([n]):s.add(n)),i0(e,n,i)),!1}throw Error(o(435,s.tag))}return i0(e,n,i),tc(),!1}if(At)return t=_s.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,n!==Ic&&(e=Error(o(422),{cause:n}),ki($s(e,s)))):(n!==Ic&&(t=Error(o(423),{cause:n}),ki($s(t,s))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,n=$s(n,s),i=Ro(e.stateNode,n,i),uo(e,i),pa!==4&&(pa=2)),!1;var r=Error(o(520),{cause:n});if(r=$s(r,s),Pi===null?Pi=[r]:Pi.push(r),pa!==4&&(pa=2),t===null)return!0;n=$s(n,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=i&-i,s.lanes|=e,e=Ro(s.stateNode,n,e),uo(s,e),!1;case 1:if(t=s.type,r=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(In===null||!In.has(r))))return s.flags|=65536,i&=-i,s.lanes|=i,i=Tu(i),ku(i,e,s,n),uo(s,i),!1}s=s.return}while(s!==null);return!1}var Bo=Error(o(461)),_a=!1;function Xa(e,t,s,n){t.child=e===null?zd(t,null,s,n):_l(t,e.child,s,n)}function Eu(e,t,s,n,i){s=s.render;var r=t.ref;if("ref"in n){var d={};for(var x in n)x!=="ref"&&(d[x]=n[x])}else d=n;return Nl(t),n=go(e,t,s,d,r,i),x=yo(),e!==null&&!_a?(bo(e,t,i),Cn(e,t,i)):(At&&x&&Jc(t),t.flags|=1,Xa(e,t,n,i),t.child)}function Su(e,t,s,n,i){if(e===null){var r=s.type;return typeof r=="function"&&!Zc(r)&&r.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=r,Au(e,t,r,n,i)):(e=Cr(s.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Wo(e,i)){var d=r.memoizedProps;if(s=s.compare,s=s!==null?s:Mi,s(d,n)&&e.ref===t.ref)return Cn(e,t,i)}return t.flags|=1,e=yn(r,n),e.ref=t.ref,e.return=t,t.child=e}function Au(e,t,s,n,i){if(e!==null){var r=e.memoizedProps;if(Mi(r,n)&&e.ref===t.ref)if(_a=!1,t.pendingProps=n=r,Wo(e,i))(e.flags&131072)!==0&&(_a=!0);else return t.lanes=e.lanes,Cn(e,t,i)}return $o(e,t,s,n,i)}function zu(e,t,s,n){var i=n.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(r=r!==null?r.baseLanes|s:s,e!==null){for(n=t.child=e.child,i=0;n!==null;)i=i|n.lanes|n.childLanes,n=n.sibling;n=i&~r}else n=0,t.child=null;return Du(e,t,r,s,n)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&kr(t,r!==null?r.cachePool:null),r!==null?Rd(t,r):fo(),Bd(t);else return n=t.lanes=536870912,Du(e,t,r!==null?r.baseLanes|s:s,s,n)}else r!==null?(kr(t,r.cachePool),Rd(t,r),Qn(),t.memoizedState=null):(e!==null&&kr(t,null),fo(),Qn());return Xa(e,t,i,s),t.child}function Li(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Du(e,t,s,n,i){var r=io();return r=r===null?null:{parent:Ca._currentValue,pool:r},t.memoizedState={baseLanes:s,cachePool:r},e!==null&&kr(t,null),fo(),Bd(t),e!==null&&Zl(e,t,n,!0),t.childLanes=i,null}function Wr(e,t){return t=Xr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Ou(e,t,s){return _l(t,e.child,null,s),e=Wr(t,t.pendingProps),e.flags|=2,Ts(t),t.memoizedState=null,e}function Wp(e,t,s){var n=t.pendingProps,i=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(At){if(n.mode==="hidden")return e=Wr(t,n),t.lanes=536870912,Li(null,e);if(xo(t),(e=la)?(e=Xm(e,Ls),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:qn!==null?{id:ln,overflow:rn}:null,retryLane:536870912,hydrationErrors:null},s=gd(e),s.return=t,t.child=s,Wa=t,la=null)):e=null,e===null)throw Gn(t);return t.lanes=536870912,null}return Wr(t,n)}var r=e.memoizedState;if(r!==null){var d=r.dehydrated;if(xo(t),i)if(t.flags&256)t.flags&=-257,t=Ou(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(_a||Zl(e,t,s,!1),i=(s&e.childLanes)!==0,_a||i){if(n=It,n!==null&&(d=Wt(n,s),d!==0&&d!==r.retryLane))throw r.retryLane=d,yl(e,d),ys(n,e,d),Bo;tc(),t=Ou(e,t,s)}else e=r.treeContext,la=Vs(d.nextSibling),Wa=t,At=!0,Vn=null,Ls=!1,e!==null&&vd(t,e),t=Wr(t,n),t.flags|=4096;return t}return e=yn(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Yr(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function $o(e,t,s,n,i){return Nl(t),s=go(e,t,s,n,void 0,i),n=yo(),e!==null&&!_a?(bo(e,t,i),Cn(e,t,i)):(At&&n&&Jc(t),t.flags|=1,Xa(e,t,s,i),t.child)}function Ru(e,t,s,n,i,r){return Nl(t),t.updateQueue=null,s=Ud(t,n,s,i),$d(e),n=yo(),e!==null&&!_a?(bo(e,t,r),Cn(e,t,r)):(At&&n&&Jc(t),t.flags|=1,Xa(e,t,s,r),t.child)}function Bu(e,t,s,n,i){if(Nl(t),t.stateNode===null){var r=Wl,d=s.contextType;typeof d=="object"&&d!==null&&(r=Ya(d)),r=new s(n,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Oo,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=n,r.state=t.memoizedState,r.refs={},co(t),d=s.contextType,r.context=typeof d=="object"&&d!==null?Ya(d):Wl,r.state=t.memoizedState,d=s.getDerivedStateFromProps,typeof d=="function"&&(Do(t,s,d,n),r.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(d=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),d!==r.state&&Oo.enqueueReplaceState(r,r.state,null),Ri(t,n,r,i),Oi(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){r=t.stateNode;var x=t.memoizedProps,T=kl(s,x);r.props=T;var Y=r.context,re=s.contextType;d=Wl,typeof re=="object"&&re!==null&&(d=Ya(re));var he=s.getDerivedStateFromProps;re=typeof he=="function"||typeof r.getSnapshotBeforeUpdate=="function",x=t.pendingProps!==x,re||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(x||Y!==d)&&Nu(t,r,n,d),Yn=!1;var Z=t.memoizedState;r.state=Z,Ri(t,n,r,i),Oi(),Y=t.memoizedState,x||Z!==Y||Yn?(typeof he=="function"&&(Do(t,s,he,n),Y=t.memoizedState),(T=Yn||ju(t,s,T,n,Z,Y,d))?(re||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=Y),r.props=n,r.state=Y,r.context=d,n=T):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{r=t.stateNode,oo(e,t),d=t.memoizedProps,re=kl(s,d),r.props=re,he=t.pendingProps,Z=r.context,Y=s.contextType,T=Wl,typeof Y=="object"&&Y!==null&&(T=Ya(Y)),x=s.getDerivedStateFromProps,(Y=typeof x=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(d!==he||Z!==T)&&Nu(t,r,n,T),Yn=!1,Z=t.memoizedState,r.state=Z,Ri(t,n,r,i),Oi();var ee=t.memoizedState;d!==he||Z!==ee||Yn||e!==null&&e.dependencies!==null&&_r(e.dependencies)?(typeof x=="function"&&(Do(t,s,x,n),ee=t.memoizedState),(re=Yn||ju(t,s,re,n,Z,ee,T)||e!==null&&e.dependencies!==null&&_r(e.dependencies))?(Y||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(n,ee,T),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(n,ee,T)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||d===e.memoizedProps&&Z===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&Z===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=ee),r.props=n,r.state=ee,r.context=T,n=re):(typeof r.componentDidUpdate!="function"||d===e.memoizedProps&&Z===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&Z===e.memoizedState||(t.flags|=1024),n=!1)}return r=n,Yr(e,t),n=(t.flags&128)!==0,r||n?(r=t.stateNode,s=n&&typeof s.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&n?(t.child=_l(t,e.child,null,i),t.child=_l(t,null,s,i)):Xa(e,t,s,i),t.memoizedState=r.state,e=t.child):e=Cn(e,t,i),e}function $u(e,t,s,n){return vl(),t.flags|=256,Xa(e,t,s,n),t.child}var Uo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ho(e){return{baseLanes:e,cachePool:_d()}}function Lo(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=Es),e}function Uu(e,t,s){var n=t.pendingProps,i=!1,r=(t.flags&128)!==0,d;if((d=r)||(d=e!==null&&e.memoizedState===null?!1:(ga.current&2)!==0),d&&(i=!0,t.flags&=-129),d=(t.flags&32)!==0,t.flags&=-33,e===null){if(At){if(i?Zn(t):Qn(),(e=la)?(e=Xm(e,Ls),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:qn!==null?{id:ln,overflow:rn}:null,retryLane:536870912,hydrationErrors:null},s=gd(e),s.return=t,t.child=s,Wa=t,la=null)):e=null,e===null)throw Gn(t);return N0(e)?t.lanes=32:t.lanes=536870912,null}var x=n.children;return n=n.fallback,i?(Qn(),i=t.mode,x=Xr({mode:"hidden",children:x},i),n=bl(n,i,s,null),x.return=t,n.return=t,x.sibling=n,t.child=x,n=t.child,n.memoizedState=Ho(s),n.childLanes=Lo(e,d,s),t.memoizedState=Uo,Li(null,n)):(Zn(t),qo(t,x))}var T=e.memoizedState;if(T!==null&&(x=T.dehydrated,x!==null)){if(r)t.flags&256?(Zn(t),t.flags&=-257,t=Vo(e,t,s)):t.memoizedState!==null?(Qn(),t.child=e.child,t.flags|=128,t=null):(Qn(),x=n.fallback,i=t.mode,n=Xr({mode:"visible",children:n.children},i),x=bl(x,i,s,null),x.flags|=2,n.return=t,x.return=t,n.sibling=x,t.child=n,_l(t,e.child,null,s),n=t.child,n.memoizedState=Ho(s),n.childLanes=Lo(e,d,s),t.memoizedState=Uo,t=Li(null,n));else if(Zn(t),N0(x)){if(d=x.nextSibling&&x.nextSibling.dataset,d)var Y=d.dgst;d=Y,n=Error(o(419)),n.stack="",n.digest=d,ki({value:n,source:null,stack:null}),t=Vo(e,t,s)}else if(_a||Zl(e,t,s,!1),d=(s&e.childLanes)!==0,_a||d){if(d=It,d!==null&&(n=Wt(d,s),n!==0&&n!==T.retryLane))throw T.retryLane=n,yl(e,n),ys(d,e,n),Bo;j0(x)||tc(),t=Vo(e,t,s)}else j0(x)?(t.flags|=192,t.child=e.child,t=null):(e=T.treeContext,la=Vs(x.nextSibling),Wa=t,At=!0,Vn=null,Ls=!1,e!==null&&vd(t,e),t=qo(t,n.children),t.flags|=4096);return t}return i?(Qn(),x=n.fallback,i=t.mode,T=e.child,Y=T.sibling,n=yn(T,{mode:"hidden",children:n.children}),n.subtreeFlags=T.subtreeFlags&65011712,Y!==null?x=yn(Y,x):(x=bl(x,i,s,null),x.flags|=2),x.return=t,n.return=t,n.sibling=x,t.child=n,Li(null,n),n=t.child,x=e.child.memoizedState,x===null?x=Ho(s):(i=x.cachePool,i!==null?(T=Ca._currentValue,i=i.parent!==T?{parent:T,pool:T}:i):i=_d(),x={baseLanes:x.baseLanes|s,cachePool:i}),n.memoizedState=x,n.childLanes=Lo(e,d,s),t.memoizedState=Uo,Li(e.child,n)):(Zn(t),s=e.child,e=s.sibling,s=yn(s,{mode:"visible",children:n.children}),s.return=t,s.sibling=null,e!==null&&(d=t.deletions,d===null?(t.deletions=[e],t.flags|=16):d.push(e)),t.child=s,t.memoizedState=null,s)}function qo(e,t){return t=Xr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Xr(e,t){return e=Ms(22,e,null,t),e.lanes=0,e}function Vo(e,t,s){return _l(t,e.child,null,s),e=qo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Hu(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ao(e.return,t,s)}function Go(e,t,s,n,i,r){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:i,treeForkCount:r}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=n,d.tail=s,d.tailMode=i,d.treeForkCount=r)}function Lu(e,t,s){var n=t.pendingProps,i=n.revealOrder,r=n.tail;n=n.children;var d=ga.current,x=(d&2)!==0;if(x?(d=d&1|2,t.flags|=128):d&=1,$(ga,d),Xa(e,t,n,s),n=At?Ti:0,!x&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hu(e,s,t);else if(e.tag===19)Hu(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(s=t.child,i=null;s!==null;)e=s.alternate,e!==null&&Or(e)===null&&(i=s),s=s.sibling;s=i,s===null?(i=t.child,t.child=null):(i=s.sibling,s.sibling=null),Go(t,!1,i,s,r,n);break;case"backwards":case"unstable_legacy-backwards":for(s=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Or(e)===null){t.child=i;break}e=i.sibling,i.sibling=s,s=i,i=e}Go(t,!0,s,null,r,n);break;case"together":Go(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function Cn(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Kn|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Zl(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,s=yn(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=yn(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Wo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&_r(e)))}function Yp(e,t,s){switch(t.tag){case 3:Ge(t,t.stateNode.containerInfo),Wn(t,Ca,e.memoizedState.cache),vl();break;case 27:case 5:We(t);break;case 4:Ge(t,t.stateNode.containerInfo);break;case 10:Wn(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,xo(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Zn(t),t.flags|=128,null):(s&t.child.childLanes)!==0?Uu(e,t,s):(Zn(t),e=Cn(e,t,s),e!==null?e.sibling:null);Zn(t);break;case 19:var i=(e.flags&128)!==0;if(n=(s&t.childLanes)!==0,n||(Zl(e,t,s,!1),n=(s&t.childLanes)!==0),i){if(n)return Lu(e,t,s);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),$(ga,ga.current),n)break;return null;case 22:return t.lanes=0,zu(e,t,s,t.pendingProps);case 24:Wn(t,Ca,e.memoizedState.cache)}return Cn(e,t,s)}function qu(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)_a=!0;else{if(!Wo(e,s)&&(t.flags&128)===0)return _a=!1,Yp(e,t,s);_a=(e.flags&131072)!==0}else _a=!1,At&&(t.flags&1048576)!==0&&bd(t,Ti,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=Cl(t.elementType),t.type=e,typeof e=="function")Zc(e)?(n=kl(e,n),t.tag=1,t=Bu(null,t,e,n,s)):(t.tag=0,t=$o(null,t,e,n,s));else{if(e!=null){var i=e.$$typeof;if(i===ce){t.tag=11,t=Eu(null,t,e,n,s);break e}else if(i===se){t.tag=14,t=Su(null,t,e,n,s);break e}}throw t=G(e)||e,Error(o(306,t,""))}}return t;case 0:return $o(e,t,t.type,t.pendingProps,s);case 1:return n=t.type,i=kl(n,t.pendingProps),Bu(e,t,n,i,s);case 3:e:{if(Ge(t,t.stateNode.containerInfo),e===null)throw Error(o(387));n=t.pendingProps;var r=t.memoizedState;i=r.element,oo(e,t),Ri(t,n,null,s);var d=t.memoizedState;if(n=d.cache,Wn(t,Ca,n),n!==r.cache&&so(t,[Ca],s,!0),Oi(),n=d.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:d.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=$u(e,t,n,s);break e}else if(n!==i){i=$s(Error(o(424)),t),ki(i),t=$u(e,t,n,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(la=Vs(e.firstChild),Wa=t,At=!0,Vn=null,Ls=!0,s=zd(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(vl(),n===i){t=Cn(e,t,s);break e}Xa(e,t,n,s)}t=t.child}return t;case 26:return Yr(e,t),e===null?(s=Km(t.type,null,t.pendingProps,null))?t.memoizedState=s:At||(s=t.type,e=t.pendingProps,n=cc(De.current).createElement(s),n[ra]=t,n[ha]=e,Pa(n,s,e),Oe(n),t.stateNode=n):t.memoizedState=Km(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return We(t),e===null&&At&&(n=t.stateNode=Qm(t.type,t.pendingProps,De.current),Wa=t,Ls=!0,i=la,sl(t.type)?(w0=i,la=Vs(n.firstChild)):la=i),Xa(e,t,t.pendingProps.children,s),Yr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&At&&((i=n=la)&&(n=jx(n,t.type,t.pendingProps,Ls),n!==null?(t.stateNode=n,Wa=t,la=Vs(n.firstChild),Ls=!1,i=!0):i=!1),i||Gn(t)),We(t),i=t.type,r=t.pendingProps,d=e!==null?e.memoizedProps:null,n=r.children,y0(i,r)?n=null:d!==null&&y0(i,d)&&(t.flags|=32),t.memoizedState!==null&&(i=go(e,t,Bp,null,null,s),tr._currentValue=i),Yr(e,t),Xa(e,t,n,s),t.child;case 6:return e===null&&At&&((e=s=la)&&(s=Nx(s,t.pendingProps,Ls),s!==null?(t.stateNode=s,Wa=t,la=null,e=!0):e=!1),e||Gn(t)),null;case 13:return Uu(e,t,s);case 4:return Ge(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=_l(t,null,n,s):Xa(e,t,n,s),t.child;case 11:return Eu(e,t,t.type,t.pendingProps,s);case 7:return Xa(e,t,t.pendingProps,s),t.child;case 8:return Xa(e,t,t.pendingProps.children,s),t.child;case 12:return Xa(e,t,t.pendingProps.children,s),t.child;case 10:return n=t.pendingProps,Wn(t,t.type,n.value),Xa(e,t,n.children,s),t.child;case 9:return i=t.type._context,n=t.pendingProps.children,Nl(t),i=Ya(i),n=n(i),t.flags|=1,Xa(e,t,n,s),t.child;case 14:return Su(e,t,t.type,t.pendingProps,s);case 15:return Au(e,t,t.type,t.pendingProps,s);case 19:return Lu(e,t,s);case 31:return Wp(e,t,s);case 22:return zu(e,t,s,t.pendingProps);case 24:return Nl(t),n=Ya(Ca),e===null?(i=io(),i===null&&(i=It,r=no(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=s),i=r),t.memoizedState={parent:n,cache:i},co(t),Wn(t,Ca,i)):((e.lanes&s)!==0&&(oo(e,t),Ri(t,null,null,s),Oi()),i=e.memoizedState,r=t.memoizedState,i.parent!==n?(i={parent:n,cache:n},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),Wn(t,Ca,n)):(n=r.cache,Wn(t,Ca,n),n!==i.cache&&so(t,[Ca],s,!0))),Xa(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Mn(e){e.flags|=4}function Yo(e,t,s,n,i){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(pm())e.flags|=8192;else throw Ml=Sr,ro}else e.flags&=-16777217}function Vu(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!sf(t))if(pm())e.flags|=8192;else throw Ml=Sr,ro}function Pr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?js():536870912,e.lanes|=t,ii|=t)}function qi(e,t){if(!At)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ia(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var i=e.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags&65011712,n|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function Xp(e,t,s){var n=t.pendingProps;switch(Kc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ia(t),null;case 1:return ia(t),null;case 3:return s=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),jn(Ca),K(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Pl(t)?Mn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,eo())),ia(t),null;case 26:var i=t.type,r=t.memoizedState;return e===null?(Mn(t),r!==null?(ia(t),Vu(t,r)):(ia(t),Yo(t,i,null,n,s))):r?r!==e.memoizedState?(Mn(t),ia(t),Vu(t,r)):(ia(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&Mn(t),ia(t),Yo(t,i,e,n,s)),null;case 27:if(xt(t),s=De.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Mn(t);else{if(!n){if(t.stateNode===null)throw Error(o(166));return ia(t),null}e=J.current,Pl(t)?jd(t):(e=Qm(i,n,s),t.stateNode=e,Mn(t))}return ia(t),null;case 5:if(xt(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Mn(t);else{if(!n){if(t.stateNode===null)throw Error(o(166));return ia(t),null}if(r=J.current,Pl(t))jd(t);else{var d=cc(De.current);switch(r){case 1:r=d.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=d.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=d.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof n.is=="string"?d.createElement("select",{is:n.is}):d.createElement("select"),n.multiple?r.multiple=!0:n.size&&(r.size=n.size);break;default:r=typeof n.is=="string"?d.createElement(i,{is:n.is}):d.createElement(i)}}r[ra]=t,r[ha]=n;e:for(d=t.child;d!==null;){if(d.tag===5||d.tag===6)r.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}t.stateNode=r;e:switch(Pa(r,i,n),i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Mn(t)}}return ia(t),Yo(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&Mn(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(o(166));if(e=De.current,Pl(t)){if(e=t.stateNode,s=t.memoizedProps,n=null,i=Wa,i!==null)switch(i.tag){case 27:case 5:n=i.memoizedProps}e[ra]=t,e=!!(e.nodeValue===s||n!==null&&n.suppressHydrationWarning===!0||Um(e.nodeValue,s)),e||Gn(t,!0)}else e=cc(e).createTextNode(n),e[ra]=t,t.stateNode=e}return ia(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(n=Pl(t),s!==null){if(e===null){if(!n)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[ra]=t}else vl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ia(t),e=!1}else s=eo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(Ts(t),t):(Ts(t),null);if((t.flags&128)!==0)throw Error(o(558))}return ia(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=Pl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(o(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));i[ra]=t}else vl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ia(t),i=!1}else i=eo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(Ts(t),t):(Ts(t),null)}return Ts(t),(t.flags&128)!==0?(t.lanes=s,t):(s=n!==null,e=e!==null&&e.memoizedState!==null,s&&(n=t.child,i=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(i=n.alternate.memoizedState.cachePool.pool),r=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),r!==i&&(n.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),Pr(t,t.updateQueue),ia(t),null);case 4:return K(),e===null&&f0(t.stateNode.containerInfo),ia(t),null;case 10:return jn(t.type),ia(t),null;case 19:if(C(ga),n=t.memoizedState,n===null)return ia(t),null;if(i=(t.flags&128)!==0,r=n.rendering,r===null)if(i)qi(n,!1);else{if(pa!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=Or(e),r!==null){for(t.flags|=128,qi(n,!1),e=r.updateQueue,t.updateQueue=e,Pr(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)hd(s,e),s=s.sibling;return $(ga,ga.current&1|2),At&&bn(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&F()>Kr&&(t.flags|=128,i=!0,qi(n,!1),t.lanes=4194304)}else{if(!i)if(e=Or(r),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Pr(t,e),qi(n,!0),n.tail===null&&n.tailMode==="hidden"&&!r.alternate&&!At)return ia(t),null}else 2*F()-n.renderingStartTime>Kr&&s!==536870912&&(t.flags|=128,i=!0,qi(n,!1),t.lanes=4194304);n.isBackwards?(r.sibling=t.child,t.child=r):(e=n.last,e!==null?e.sibling=r:t.child=r,n.last=r)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=F(),e.sibling=null,s=ga.current,$(ga,i?s&1|2:s&1),At&&bn(t,n.treeForkCount),e):(ia(t),null);case 22:case 23:return Ts(t),po(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(s&536870912)!==0&&(t.flags&128)===0&&(ia(t),t.subtreeFlags&6&&(t.flags|=8192)):ia(t),s=t.updateQueue,s!==null&&Pr(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==s&&(t.flags|=2048),e!==null&&C(wl),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),jn(Ca),ia(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function Pp(e,t){switch(Kc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return jn(Ca),K(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return xt(t),null;case 31:if(t.memoizedState!==null){if(Ts(t),t.alternate===null)throw Error(o(340));vl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Ts(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));vl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return C(ga),null;case 4:return K(),null;case 10:return jn(t.type),null;case 22:case 23:return Ts(t),po(),e!==null&&C(wl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return jn(Ca),null;case 25:return null;default:return null}}function Gu(e,t){switch(Kc(t),t.tag){case 3:jn(Ca),K();break;case 26:case 27:case 5:xt(t);break;case 4:K();break;case 31:t.memoizedState!==null&&Ts(t);break;case 13:Ts(t);break;case 19:C(ga);break;case 10:jn(t.type);break;case 22:case 23:Ts(t),po(),e!==null&&C(wl);break;case 24:jn(Ca)}}function Vi(e,t){try{var s=t.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var i=n.next;s=i;do{if((s.tag&e)===e){n=void 0;var r=s.create,d=s.inst;n=r(),d.destroy=n}s=s.next}while(s!==i)}}catch(x){Pt(t,t.return,x)}}function Fn(e,t,s){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){var d=n.inst,x=d.destroy;if(x!==void 0){d.destroy=void 0,i=t;var T=s,Y=x;try{Y()}catch(re){Pt(i,T,re)}}}n=n.next}while(n!==r)}}catch(re){Pt(t,t.return,re)}}function Wu(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{Od(t,s)}catch(n){Pt(e,e.return,n)}}}function Yu(e,t,s){s.props=kl(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(n){Pt(e,t,n)}}function Gi(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof s=="function"?e.refCleanup=s(n):s.current=n}}catch(i){Pt(e,t,i)}}function cn(e,t){var s=e.ref,n=e.refCleanup;if(s!==null)if(typeof n=="function")try{n()}catch(i){Pt(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(i){Pt(e,t,i)}else s.current=null}function Xu(e){var t=e.type,s=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break e;case"img":s.src?n.src=s.src:s.srcSet&&(n.srcset=s.srcSet)}}catch(i){Pt(e,e.return,i)}}function Xo(e,t,s){try{var n=e.stateNode;xx(n,e.type,s,t),n[ha]=t}catch(i){Pt(e,e.return,i)}}function Pu(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&sl(e.type)||e.tag===4}function Po(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Pu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&sl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zo(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Zs));else if(n!==4&&(n===27&&sl(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(Zo(e,t,s),e=e.sibling;e!==null;)Zo(e,t,s),e=e.sibling}function Zr(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(n===27&&sl(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Zr(e,t,s),e=e.sibling;e!==null;)Zr(e,t,s),e=e.sibling}function Zu(e){var t=e.stateNode,s=e.memoizedProps;try{for(var n=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Pa(t,n,s),t[ra]=e,t[ha]=s}catch(r){Pt(e,e.return,r)}}var _n=!1,Ta=!1,Qo=!1,Qu=typeof WeakSet=="function"?WeakSet:Set,Ha=null;function Zp(e,t){if(e=e.containerInfo,h0=xc,e=rd(e),qc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var i=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{s.nodeType,r.nodeType}catch{s=null;break e}var d=0,x=-1,T=-1,Y=0,re=0,he=e,Z=null;t:for(;;){for(var ee;he!==s||i!==0&&he.nodeType!==3||(x=d+i),he!==r||n!==0&&he.nodeType!==3||(T=d+n),he.nodeType===3&&(d+=he.nodeValue.length),(ee=he.firstChild)!==null;)Z=he,he=ee;for(;;){if(he===e)break t;if(Z===s&&++Y===i&&(x=d),Z===r&&++re===n&&(T=d),(ee=he.nextSibling)!==null)break;he=Z,Z=he.parentNode}he=ee}s=x===-1||T===-1?null:{start:x,end:T}}else s=null}s=s||{start:0,end:0}}else s=null;for(g0={focusedElem:e,selectionRange:s},xc=!1,Ha=t;Ha!==null;)if(t=Ha,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ha=e;else for(;Ha!==null;){switch(t=Ha,r=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)i=e[s],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,s=t,i=r.memoizedProps,r=r.memoizedState,n=s.stateNode;try{var Ze=kl(s.type,i);e=n.getSnapshotBeforeUpdate(Ze,r),n.__reactInternalSnapshotBeforeUpdate=e}catch(lt){Pt(s,s.return,lt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)v0(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":v0(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,Ha=e;break}Ha=t.return}}function Fu(e,t,s){var n=s.flags;switch(s.tag){case 0:case 11:case 15:kn(e,s),n&4&&Vi(5,s);break;case 1:if(kn(e,s),n&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(d){Pt(s,s.return,d)}else{var i=kl(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(d){Pt(s,s.return,d)}}n&64&&Wu(s),n&512&&Gi(s,s.return);break;case 3:if(kn(e,s),n&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{Od(e,t)}catch(d){Pt(s,s.return,d)}}break;case 27:t===null&&n&4&&Zu(s);case 26:case 5:kn(e,s),t===null&&n&4&&Xu(s),n&512&&Gi(s,s.return);break;case 12:kn(e,s);break;case 31:kn(e,s),n&4&&Iu(e,s);break;case 13:kn(e,s),n&4&&em(e,s),n&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=sx.bind(null,s),wx(e,s))));break;case 22:if(n=s.memoizedState!==null||_n,!n){t=t!==null&&t.memoizedState!==null||Ta,i=_n;var r=Ta;_n=n,(Ta=t)&&!r?En(e,s,(s.subtreeFlags&8772)!==0):kn(e,s),_n=i,Ta=r}break;case 30:break;default:kn(e,s)}}function Ju(e){var t=e.alternate;t!==null&&(e.alternate=null,Ju(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Sa(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var da=null,ps=!1;function Tn(e,t,s){for(s=s.child;s!==null;)Ku(e,t,s),s=s.sibling}function Ku(e,t,s){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(rt,s)}catch{}switch(s.tag){case 26:Ta||cn(s,t),Tn(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Ta||cn(s,t);var n=da,i=ps;sl(s.type)&&(da=s.stateNode,ps=!1),Tn(e,t,s),Ki(s.stateNode),da=n,ps=i;break;case 5:Ta||cn(s,t);case 6:if(n=da,i=ps,da=null,Tn(e,t,s),da=n,ps=i,da!==null)if(ps)try{(da.nodeType===9?da.body:da.nodeName==="HTML"?da.ownerDocument.body:da).removeChild(s.stateNode)}catch(r){Pt(s,t,r)}else try{da.removeChild(s.stateNode)}catch(r){Pt(s,t,r)}break;case 18:da!==null&&(ps?(e=da,Wm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),pi(e)):Wm(da,s.stateNode));break;case 4:n=da,i=ps,da=s.stateNode.containerInfo,ps=!0,Tn(e,t,s),da=n,ps=i;break;case 0:case 11:case 14:case 15:Fn(2,s,t),Ta||Fn(4,s,t),Tn(e,t,s);break;case 1:Ta||(cn(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"&&Yu(s,t,n)),Tn(e,t,s);break;case 21:Tn(e,t,s);break;case 22:Ta=(n=Ta)||s.memoizedState!==null,Tn(e,t,s),Ta=n;break;default:Tn(e,t,s)}}function Iu(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{pi(e)}catch(s){Pt(t,t.return,s)}}}function em(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{pi(e)}catch(s){Pt(t,t.return,s)}}function Qp(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Qu),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Qu),t;default:throw Error(o(435,e.tag))}}function Qr(e,t){var s=Qp(e);t.forEach(function(n){if(!s.has(n)){s.add(n);var i=nx.bind(null,e,n);n.then(i,i)}})}function xs(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var i=s[n],r=e,d=t,x=d;e:for(;x!==null;){switch(x.tag){case 27:if(sl(x.type)){da=x.stateNode,ps=!1;break e}break;case 5:da=x.stateNode,ps=!1;break e;case 3:case 4:da=x.stateNode.containerInfo,ps=!0;break e}x=x.return}if(da===null)throw Error(o(160));Ku(r,d,i),da=null,ps=!1,r=i.alternate,r!==null&&(r.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)tm(t,e),t=t.sibling}var Ks=null;function tm(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:xs(t,e),hs(e),n&4&&(Fn(3,e,e.return),Vi(3,e),Fn(5,e,e.return));break;case 1:xs(t,e),hs(e),n&512&&(Ta||s===null||cn(s,s.return)),n&64&&_n&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?n:s.concat(n))));break;case 26:var i=Ks;if(xs(t,e),hs(e),n&512&&(Ta||s===null||cn(s,s.return)),n&4){var r=s!==null?s.memoizedState:null;if(n=e.memoizedState,s===null)if(n===null)if(e.stateNode===null){e:{n=e.type,s=e.memoizedProps,i=i.ownerDocument||i;t:switch(n){case"title":r=i.getElementsByTagName("title")[0],(!r||r[cs]||r[ra]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=i.createElement(n),i.head.insertBefore(r,i.querySelector("head > title"))),Pa(r,n,s),r[ra]=e,Oe(r),n=r;break e;case"link":var d=tf("link","href",i).get(n+(s.href||""));if(d){for(var x=0;x<d.length;x++)if(r=d[x],r.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&r.getAttribute("rel")===(s.rel==null?null:s.rel)&&r.getAttribute("title")===(s.title==null?null:s.title)&&r.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){d.splice(x,1);break t}}r=i.createElement(n),Pa(r,n,s),i.head.appendChild(r);break;case"meta":if(d=tf("meta","content",i).get(n+(s.content||""))){for(x=0;x<d.length;x++)if(r=d[x],r.getAttribute("content")===(s.content==null?null:""+s.content)&&r.getAttribute("name")===(s.name==null?null:s.name)&&r.getAttribute("property")===(s.property==null?null:s.property)&&r.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&r.getAttribute("charset")===(s.charSet==null?null:s.charSet)){d.splice(x,1);break t}}r=i.createElement(n),Pa(r,n,s),i.head.appendChild(r);break;default:throw Error(o(468,n))}r[ra]=e,Oe(r),n=r}e.stateNode=n}else af(i,e.type,e.stateNode);else e.stateNode=ef(i,n,e.memoizedProps);else r!==n?(r===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):r.count--,n===null?af(i,e.type,e.stateNode):ef(i,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Xo(e,e.memoizedProps,s.memoizedProps)}break;case 27:xs(t,e),hs(e),n&512&&(Ta||s===null||cn(s,s.return)),s!==null&&n&4&&Xo(e,e.memoizedProps,s.memoizedProps);break;case 5:if(xs(t,e),hs(e),n&512&&(Ta||s===null||cn(s,s.return)),e.flags&32){i=e.stateNode;try{Un(i,"")}catch(Ze){Pt(e,e.return,Ze)}}n&4&&e.stateNode!=null&&(i=e.memoizedProps,Xo(e,i,s!==null?s.memoizedProps:i)),n&1024&&(Qo=!0);break;case 6:if(xs(t,e),hs(e),n&4){if(e.stateNode===null)throw Error(o(162));n=e.memoizedProps,s=e.stateNode;try{s.nodeValue=n}catch(Ze){Pt(e,e.return,Ze)}}break;case 3:if(uc=null,i=Ks,Ks=oc(t.containerInfo),xs(t,e),Ks=i,hs(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{pi(t.containerInfo)}catch(Ze){Pt(e,e.return,Ze)}Qo&&(Qo=!1,am(e));break;case 4:n=Ks,Ks=oc(e.stateNode.containerInfo),xs(t,e),hs(e),Ks=n;break;case 12:xs(t,e),hs(e);break;case 31:xs(t,e),hs(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Qr(e,n)));break;case 13:xs(t,e),hs(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Jr=F()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Qr(e,n)));break;case 22:i=e.memoizedState!==null;var T=s!==null&&s.memoizedState!==null,Y=_n,re=Ta;if(_n=Y||i,Ta=re||T,xs(t,e),Ta=re,_n=Y,hs(e),n&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(s===null||T||_n||Ta||El(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){T=s=t;try{if(r=T.stateNode,i)d=r.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{x=T.stateNode;var he=T.memoizedProps.style,Z=he!=null&&he.hasOwnProperty("display")?he.display:null;x.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Ze){Pt(T,T.return,Ze)}}}else if(t.tag===6){if(s===null){T=t;try{T.stateNode.nodeValue=i?"":T.memoizedProps}catch(Ze){Pt(T,T.return,Ze)}}}else if(t.tag===18){if(s===null){T=t;try{var ee=T.stateNode;i?Ym(ee,!0):Ym(T.stateNode,!1)}catch(Ze){Pt(T,T.return,Ze)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(s=n.retryQueue,s!==null&&(n.retryQueue=null,Qr(e,s))));break;case 19:xs(t,e),hs(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Qr(e,n)));break;case 30:break;case 21:break;default:xs(t,e),hs(e)}}function hs(e){var t=e.flags;if(t&2){try{for(var s,n=e.return;n!==null;){if(Pu(n)){s=n;break}n=n.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var i=s.stateNode,r=Po(e);Zr(e,r,i);break;case 5:var d=s.stateNode;s.flags&32&&(Un(d,""),s.flags&=-33);var x=Po(e);Zr(e,x,d);break;case 3:case 4:var T=s.stateNode.containerInfo,Y=Po(e);Zo(e,Y,T);break;default:throw Error(o(161))}}catch(re){Pt(e,e.return,re)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function am(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;am(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function kn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Fu(e,t.alternate,t),t=t.sibling}function El(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Fn(4,t,t.return),El(t);break;case 1:cn(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&Yu(t,t.return,s),El(t);break;case 27:Ki(t.stateNode);case 26:case 5:cn(t,t.return),El(t);break;case 22:t.memoizedState===null&&El(t);break;case 30:El(t);break;default:El(t)}e=e.sibling}}function En(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,i=e,r=t,d=r.flags;switch(r.tag){case 0:case 11:case 15:En(i,r,s),Vi(4,r);break;case 1:if(En(i,r,s),n=r,i=n.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(Y){Pt(n,n.return,Y)}if(n=r,i=n.updateQueue,i!==null){var x=n.stateNode;try{var T=i.shared.hiddenCallbacks;if(T!==null)for(i.shared.hiddenCallbacks=null,i=0;i<T.length;i++)Dd(T[i],x)}catch(Y){Pt(n,n.return,Y)}}s&&d&64&&Wu(r),Gi(r,r.return);break;case 27:Zu(r);case 26:case 5:En(i,r,s),s&&n===null&&d&4&&Xu(r),Gi(r,r.return);break;case 12:En(i,r,s);break;case 31:En(i,r,s),s&&d&4&&Iu(i,r);break;case 13:En(i,r,s),s&&d&4&&em(i,r);break;case 22:r.memoizedState===null&&En(i,r,s),Gi(r,r.return);break;case 30:break;default:En(i,r,s)}t=t.sibling}}function Fo(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Ei(s))}function Jo(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ei(e))}function Is(e,t,s,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)sm(e,t,s,n),t=t.sibling}function sm(e,t,s,n){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Is(e,t,s,n),i&2048&&Vi(9,t);break;case 1:Is(e,t,s,n);break;case 3:Is(e,t,s,n),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ei(e)));break;case 12:if(i&2048){Is(e,t,s,n),e=t.stateNode;try{var r=t.memoizedProps,d=r.id,x=r.onPostCommit;typeof x=="function"&&x(d,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(T){Pt(t,t.return,T)}}else Is(e,t,s,n);break;case 31:Is(e,t,s,n);break;case 13:Is(e,t,s,n);break;case 23:break;case 22:r=t.stateNode,d=t.alternate,t.memoizedState!==null?r._visibility&2?Is(e,t,s,n):Wi(e,t):r._visibility&2?Is(e,t,s,n):(r._visibility|=2,si(e,t,s,n,(t.subtreeFlags&10256)!==0||!1)),i&2048&&Fo(d,t);break;case 24:Is(e,t,s,n),i&2048&&Jo(t.alternate,t);break;default:Is(e,t,s,n)}}function si(e,t,s,n,i){for(i=i&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,d=t,x=s,T=n,Y=d.flags;switch(d.tag){case 0:case 11:case 15:si(r,d,x,T,i),Vi(8,d);break;case 23:break;case 22:var re=d.stateNode;d.memoizedState!==null?re._visibility&2?si(r,d,x,T,i):Wi(r,d):(re._visibility|=2,si(r,d,x,T,i)),i&&Y&2048&&Fo(d.alternate,d);break;case 24:si(r,d,x,T,i),i&&Y&2048&&Jo(d.alternate,d);break;default:si(r,d,x,T,i)}t=t.sibling}}function Wi(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,n=t,i=n.flags;switch(n.tag){case 22:Wi(s,n),i&2048&&Fo(n.alternate,n);break;case 24:Wi(s,n),i&2048&&Jo(n.alternate,n);break;default:Wi(s,n)}t=t.sibling}}var Yi=8192;function ni(e,t,s){if(e.subtreeFlags&Yi)for(e=e.child;e!==null;)nm(e,t,s),e=e.sibling}function nm(e,t,s){switch(e.tag){case 26:ni(e,t,s),e.flags&Yi&&e.memoizedState!==null&&Rx(s,Ks,e.memoizedState,e.memoizedProps);break;case 5:ni(e,t,s);break;case 3:case 4:var n=Ks;Ks=oc(e.stateNode.containerInfo),ni(e,t,s),Ks=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Yi,Yi=16777216,ni(e,t,s),Yi=n):ni(e,t,s));break;default:ni(e,t,s)}}function lm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Xi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var n=t[s];Ha=n,rm(n,e)}lm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)im(e),e=e.sibling}function im(e){switch(e.tag){case 0:case 11:case 15:Xi(e),e.flags&2048&&Fn(9,e,e.return);break;case 3:Xi(e);break;case 12:Xi(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Fr(e)):Xi(e);break;default:Xi(e)}}function Fr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var n=t[s];Ha=n,rm(n,e)}lm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Fn(8,t,t.return),Fr(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,Fr(t));break;default:Fr(t)}e=e.sibling}}function rm(e,t){for(;Ha!==null;){var s=Ha;switch(s.tag){case 0:case 11:case 15:Fn(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var n=s.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Ei(s.memoizedState.cache)}if(n=s.child,n!==null)n.return=s,Ha=n;else e:for(s=e;Ha!==null;){n=Ha;var i=n.sibling,r=n.return;if(Ju(n),n===s){Ha=null;break e}if(i!==null){i.return=r,Ha=i;break e}Ha=r}}}var Fp={getCacheForType:function(e){var t=Ya(Ca),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return Ya(Ca).controller.signal}},Jp=typeof WeakMap=="function"?WeakMap:Map,Vt=0,It=null,vt=null,_t=0,Xt=0,ks=null,Jn=!1,li=!1,Ko=!1,Sn=0,pa=0,Kn=0,Sl=0,Io=0,Es=0,ii=0,Pi=null,gs=null,e0=!1,Jr=0,cm=0,Kr=1/0,Ir=null,In=null,za=0,el=null,ri=null,An=0,t0=0,a0=null,om=null,Zi=0,s0=null;function Ss(){return(Vt&2)!==0&&_t!==0?_t&-_t:b.T!==null?o0():Ds()}function dm(){if(Es===0)if((_t&536870912)===0||At){var e=ka;ka<<=1,(ka&3932160)===0&&(ka=262144),Es=e}else Es=536870912;return e=_s.current,e!==null&&(e.flags|=32),Es}function ys(e,t,s){(e===It&&(Xt===2||Xt===9)||e.cancelPendingCommit!==null)&&(ci(e,0),tl(e,_t,Es,!1)),Ke(e,s),((Vt&2)===0||e!==It)&&(e===It&&((Vt&2)===0&&(Sl|=s),pa===4&&tl(e,_t,Es,!1)),on(e))}function um(e,t,s){if((Vt&6)!==0)throw Error(o(327));var n=!s&&(t&127)===0&&(t&e.expiredLanes)===0||Xe(e,t),i=n?ex(e,t):l0(e,t,!0),r=n;do{if(i===0){li&&!n&&tl(e,t,0,!1);break}else{if(s=e.current.alternate,r&&!Kp(s)){i=l0(e,t,!1),r=!1;continue}if(i===2){if(r=t,e.errorRecoveryDisabledLanes&r)var d=0;else d=e.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){t=d;e:{var x=e;i=Pi;var T=x.current.memoizedState.isDehydrated;if(T&&(ci(x,d).flags|=256),d=l0(x,d,!1),d!==2){if(Ko&&!T){x.errorRecoveryDisabledLanes|=r,Sl|=r,i=4;break e}r=gs,gs=i,r!==null&&(gs===null?gs=r:gs.push.apply(gs,r))}i=d}if(r=!1,i!==2)continue}}if(i===1){ci(e,0),tl(e,t,0,!0);break}e:{switch(n=e,r=i,r){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:tl(n,t,Es,!Jn);break e;case 2:gs=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(i=Jr+300-F(),10<i)){if(tl(n,t,Es,!Jn),Ea(n,0,!0)!==0)break e;An=t,n.timeoutHandle=Vm(mm.bind(null,n,s,gs,Ir,e0,t,Es,Sl,ii,Jn,r,"Throttled",-0,0),i);break e}mm(n,s,gs,Ir,e0,t,Es,Sl,ii,Jn,r,null,-0,0)}}break}while(!0);on(e)}function mm(e,t,s,n,i,r,d,x,T,Y,re,he,Z,ee){if(e.timeoutHandle=-1,he=t.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zs},nm(t,r,he);var Ze=(r&62914560)===r?Jr-F():(r&4194048)===r?cm-F():0;if(Ze=Bx(he,Ze),Ze!==null){An=r,e.cancelPendingCommit=Ze(vm.bind(null,e,t,r,s,n,i,d,x,T,re,he,null,Z,ee)),tl(e,r,d,!Y);return}}vm(e,t,r,s,n,i,d,x,T)}function Kp(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var n=0;n<s.length;n++){var i=s[n],r=i.getSnapshot;i=i.value;try{if(!Cs(r(),i))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function tl(e,t,s,n){t&=~Io,t&=~Sl,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var i=t;0<i;){var r=31-Bt(i),d=1<<r;n[r]=-1,i&=~d}s!==0&&Et(e,s,t)}function ec(){return(Vt&6)===0?(Qi(0),!1):!0}function n0(){if(vt!==null){if(Xt===0)var e=vt.return;else e=vt,vn=jl=null,vo(e),Kl=null,Ai=0,e=vt;for(;e!==null;)Gu(e.alternate,e),e=e.return;vt=null}}function ci(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,yx(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),An=0,n0(),It=e,vt=s=yn(e.current,null),_t=t,Xt=0,ks=null,Jn=!1,li=Xe(e,t),Ko=!1,ii=Es=Io=Sl=Kn=pa=0,gs=Pi=null,e0=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var i=31-Bt(n),r=1<<i;t|=e[i],n&=~r}return Sn=t,jr(),s}function fm(e,t){pt=null,b.H=Hi,t===Jl||t===Er?(t=Ed(),Xt=3):t===ro?(t=Ed(),Xt=4):Xt=t===Bo?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ks=t,vt===null&&(pa=1,Gr(e,$s(t,e.current)))}function pm(){var e=_s.current;return e===null?!0:(_t&4194048)===_t?qs===null:(_t&62914560)===_t||(_t&536870912)!==0?e===qs:!1}function xm(){var e=b.H;return b.H=Hi,e===null?Hi:e}function hm(){var e=b.A;return b.A=Fp,e}function tc(){pa=4,Jn||(_t&4194048)!==_t&&_s.current!==null||(li=!0),(Kn&134217727)===0&&(Sl&134217727)===0||It===null||tl(It,_t,Es,!1)}function l0(e,t,s){var n=Vt;Vt|=2;var i=xm(),r=hm();(It!==e||_t!==t)&&(Ir=null,ci(e,t)),t=!1;var d=pa;e:do try{if(Xt!==0&&vt!==null){var x=vt,T=ks;switch(Xt){case 8:n0(),d=6;break e;case 3:case 2:case 9:case 6:_s.current===null&&(t=!0);var Y=Xt;if(Xt=0,ks=null,oi(e,x,T,Y),s&&li){d=0;break e}break;default:Y=Xt,Xt=0,ks=null,oi(e,x,T,Y)}}Ip(),d=pa;break}catch(re){fm(e,re)}while(!0);return t&&e.shellSuspendCounter++,vn=jl=null,Vt=n,b.H=i,b.A=r,vt===null&&(It=null,_t=0,jr()),d}function Ip(){for(;vt!==null;)gm(vt)}function ex(e,t){var s=Vt;Vt|=2;var n=xm(),i=hm();It!==e||_t!==t?(Ir=null,Kr=F()+500,ci(e,t)):li=Xe(e,t);e:do try{if(Xt!==0&&vt!==null){t=vt;var r=ks;t:switch(Xt){case 1:Xt=0,ks=null,oi(e,t,r,1);break;case 2:case 9:if(Td(r)){Xt=0,ks=null,ym(t);break}t=function(){Xt!==2&&Xt!==9||It!==e||(Xt=7),on(e)},r.then(t,t);break e;case 3:Xt=7;break e;case 4:Xt=5;break e;case 7:Td(r)?(Xt=0,ks=null,ym(t)):(Xt=0,ks=null,oi(e,t,r,7));break;case 5:var d=null;switch(vt.tag){case 26:d=vt.memoizedState;case 5:case 27:var x=vt;if(d?sf(d):x.stateNode.complete){Xt=0,ks=null;var T=x.sibling;if(T!==null)vt=T;else{var Y=x.return;Y!==null?(vt=Y,ac(Y)):vt=null}break t}}Xt=0,ks=null,oi(e,t,r,5);break;case 6:Xt=0,ks=null,oi(e,t,r,6);break;case 8:n0(),pa=6;break e;default:throw Error(o(462))}}tx();break}catch(re){fm(e,re)}while(!0);return vn=jl=null,b.H=n,b.A=i,Vt=s,vt!==null?0:(It=null,_t=0,jr(),pa)}function tx(){for(;vt!==null&&!pe();)gm(vt)}function gm(e){var t=qu(e.alternate,e,Sn);e.memoizedProps=e.pendingProps,t===null?ac(e):vt=t}function ym(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=Ru(s,t,t.pendingProps,t.type,void 0,_t);break;case 11:t=Ru(s,t,t.pendingProps,t.type.render,t.ref,_t);break;case 5:vo(t);default:Gu(s,t),t=vt=hd(t,Sn),t=qu(s,t,Sn)}e.memoizedProps=e.pendingProps,t===null?ac(e):vt=t}function oi(e,t,s,n){vn=jl=null,vo(t),Kl=null,Ai=0;var i=t.return;try{if(Gp(e,i,t,s,_t)){pa=1,Gr(e,$s(s,e.current)),vt=null;return}}catch(r){if(i!==null)throw vt=i,r;pa=1,Gr(e,$s(s,e.current)),vt=null;return}t.flags&32768?(At||n===1?e=!0:li||(_t&536870912)!==0?e=!1:(Jn=e=!0,(n===2||n===9||n===3||n===6)&&(n=_s.current,n!==null&&n.tag===13&&(n.flags|=16384))),bm(t,e)):ac(t)}function ac(e){var t=e;do{if((t.flags&32768)!==0){bm(t,Jn);return}e=t.return;var s=Xp(t.alternate,t,Sn);if(s!==null){vt=s;return}if(t=t.sibling,t!==null){vt=t;return}vt=t=e}while(t!==null);pa===0&&(pa=5)}function bm(e,t){do{var s=Pp(e.alternate,e);if(s!==null){s.flags&=32767,vt=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){vt=e;return}vt=e=s}while(e!==null);pa=6,vt=null}function vm(e,t,s,n,i,r,d,x,T){e.cancelPendingCommit=null;do sc();while(za!==0);if((Vt&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(r=t.lanes|t.childLanes,r|=Xc,$t(e,s,r,d,x,T),e===It&&(vt=It=null,_t=0),ri=t,el=e,An=s,t0=r,a0=i,om=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,lx(ke,function(){return Mm(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=b.T,b.T=null,i=O.p,O.p=2,d=Vt,Vt|=4;try{Zp(e,t,s)}finally{Vt=d,O.p=i,b.T=n}}za=1,jm(),Nm(),wm()}}function jm(){if(za===1){za=0;var e=el,t=ri,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=b.T,b.T=null;var n=O.p;O.p=2;var i=Vt;Vt|=4;try{tm(t,e);var r=g0,d=rd(e.containerInfo),x=r.focusedElem,T=r.selectionRange;if(d!==x&&x&&x.ownerDocument&&id(x.ownerDocument.documentElement,x)){if(T!==null&&qc(x)){var Y=T.start,re=T.end;if(re===void 0&&(re=Y),"selectionStart"in x)x.selectionStart=Y,x.selectionEnd=Math.min(re,x.value.length);else{var he=x.ownerDocument||document,Z=he&&he.defaultView||window;if(Z.getSelection){var ee=Z.getSelection(),Ze=x.textContent.length,lt=Math.min(T.start,Ze),Kt=T.end===void 0?lt:Math.min(T.end,Ze);!ee.extend&&lt>Kt&&(d=Kt,Kt=lt,lt=d);var H=ld(x,lt),z=ld(x,Kt);if(H&&z&&(ee.rangeCount!==1||ee.anchorNode!==H.node||ee.anchorOffset!==H.offset||ee.focusNode!==z.node||ee.focusOffset!==z.offset)){var W=he.createRange();W.setStart(H.node,H.offset),ee.removeAllRanges(),lt>Kt?(ee.addRange(W),ee.extend(z.node,z.offset)):(W.setEnd(z.node,z.offset),ee.addRange(W))}}}}for(he=[],ee=x;ee=ee.parentNode;)ee.nodeType===1&&he.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<he.length;x++){var xe=he[x];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}xc=!!h0,g0=h0=null}finally{Vt=i,O.p=n,b.T=s}}e.current=t,za=2}}function Nm(){if(za===2){za=0;var e=el,t=ri,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=b.T,b.T=null;var n=O.p;O.p=2;var i=Vt;Vt|=4;try{Fu(e,t.alternate,t)}finally{Vt=i,O.p=n,b.T=s}}za=3}}function wm(){if(za===4||za===3){za=0,ye();var e=el,t=ri,s=An,n=om;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?za=5:(za=0,ri=el=null,Cm(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(In=null),Oa(s),t=t.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(rt,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=b.T,i=O.p,O.p=2,b.T=null;try{for(var r=e.onRecoverableError,d=0;d<n.length;d++){var x=n[d];r(x.value,{componentStack:x.stack})}}finally{b.T=t,O.p=i}}(An&3)!==0&&sc(),on(e),i=e.pendingLanes,(s&261930)!==0&&(i&42)!==0?e===s0?Zi++:(Zi=0,s0=e):Zi=0,Qi(0)}}function Cm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ei(t)))}function sc(){return jm(),Nm(),wm(),Mm()}function Mm(){if(za!==5)return!1;var e=el,t=t0;t0=0;var s=Oa(An),n=b.T,i=O.p;try{O.p=32>s?32:s,b.T=null,s=a0,a0=null;var r=el,d=An;if(za=0,ri=el=null,An=0,(Vt&6)!==0)throw Error(o(331));var x=Vt;if(Vt|=4,im(r.current),sm(r,r.current,d,s),Vt=x,Qi(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(rt,r)}catch{}return!0}finally{O.p=i,b.T=n,Cm(e,t)}}function _m(e,t,s){t=$s(s,t),t=Ro(e.stateNode,t,2),e=Pn(e,t,2),e!==null&&(Ke(e,2),on(e))}function Pt(e,t,s){if(e.tag===3)_m(e,e,s);else for(;t!==null;){if(t.tag===3){_m(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(In===null||!In.has(n))){e=$s(s,e),s=Tu(2),n=Pn(t,s,2),n!==null&&(ku(s,n,t,e),Ke(n,2),on(n));break}}t=t.return}}function i0(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new Jp;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(s)||(Ko=!0,i.add(s),e=ax.bind(null,e,t,s),t.then(e,e))}function ax(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,It===e&&(_t&s)===s&&(pa===4||pa===3&&(_t&62914560)===_t&&300>F()-Jr?(Vt&2)===0&&ci(e,0):Io|=s,ii===_t&&(ii=0)),on(e)}function Tm(e,t){t===0&&(t=js()),e=yl(e,t),e!==null&&(Ke(e,t),on(e))}function sx(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Tm(e,s)}function nx(e,t){var s=0;switch(e.tag){case 31:case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(s=i.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(o(314))}n!==null&&n.delete(t),Tm(e,s)}function lx(e,t){return Fa(e,t)}var nc=null,di=null,r0=!1,lc=!1,c0=!1,al=0;function on(e){e!==di&&e.next===null&&(di===null?nc=di=e:di=di.next=e),lc=!0,r0||(r0=!0,rx())}function Qi(e,t){if(!c0&&lc){c0=!0;do for(var s=!1,n=nc;n!==null;){if(e!==0){var i=n.pendingLanes;if(i===0)var r=0;else{var d=n.suspendedLanes,x=n.pingedLanes;r=(1<<31-Bt(42|e)+1)-1,r&=i&~(d&~x),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(s=!0,Am(n,r))}else r=_t,r=Ea(n,n===It?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(r&3)===0||Xe(n,r)||(s=!0,Am(n,r));n=n.next}while(s);c0=!1}}function ix(){km()}function km(){lc=r0=!1;var e=0;al!==0&&gx()&&(e=al);for(var t=F(),s=null,n=nc;n!==null;){var i=n.next,r=Em(n,t);r===0?(n.next=null,s===null?nc=i:s.next=i,i===null&&(di=s)):(s=n,(e!==0||(r&3)!==0)&&(lc=!0)),n=i}za!==0&&za!==5||Qi(e),al!==0&&(al=0)}function Em(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var d=31-Bt(r),x=1<<d,T=i[d];T===-1?((x&s)===0||(x&n)!==0)&&(i[d]=as(x,t)):T<=t&&(e.expiredLanes|=x),r&=~x}if(t=It,s=_t,s=Ea(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,s===0||e===t&&(Xt===2||Xt===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&te(n),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Xe(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(n!==null&&te(n),Oa(s)){case 2:case 8:s=be;break;case 32:s=ke;break;case 268435456:s=ze;break;default:s=ke}return n=Sm.bind(null,e),s=Fa(s,n),e.callbackPriority=t,e.callbackNode=s,t}return n!==null&&n!==null&&te(n),e.callbackPriority=2,e.callbackNode=null,2}function Sm(e,t){if(za!==0&&za!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(sc()&&e.callbackNode!==s)return null;var n=_t;return n=Ea(e,e===It?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(um(e,n,t),Em(e,F()),e.callbackNode!=null&&e.callbackNode===s?Sm.bind(null,e):null)}function Am(e,t){if(sc())return null;um(e,t,!0)}function rx(){bx(function(){(Vt&6)!==0?Fa(X,ix):km()})}function o0(){if(al===0){var e=Ql;e===0&&(e=Te,Te<<=1,(Te&261888)===0&&(Te=256)),al=e}return al}function zm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ml(""+e)}function Dm(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function cx(e,t,s,n,i){if(t==="submit"&&s&&s.stateNode===i){var r=zm((i[ha]||null).action),d=n.submitter;d&&(t=(t=d[ha]||null)?zm(t.formAction):d.getAttribute("formAction"),t!==null&&(r=t,d=null));var x=new Dt("action","action",null,n,i);e.push({event:x,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(al!==0){var T=d?Dm(i,d):new FormData(i);Eo(s,{pending:!0,data:T,method:i.method,action:r},null,T)}}else typeof r=="function"&&(x.preventDefault(),T=d?Dm(i,d):new FormData(i),Eo(s,{pending:!0,data:T,method:i.method,action:r},r,T))},currentTarget:i}]})}}for(var d0=0;d0<Yc.length;d0++){var u0=Yc[d0],ox=u0.toLowerCase(),dx=u0[0].toUpperCase()+u0.slice(1);Js(ox,"on"+dx)}Js(dd,"onAnimationEnd"),Js(ud,"onAnimationIteration"),Js(md,"onAnimationStart"),Js("dblclick","onDoubleClick"),Js("focusin","onFocus"),Js("focusout","onBlur"),Js(_p,"onTransitionRun"),Js(Tp,"onTransitionStart"),Js(kp,"onTransitionCancel"),Js(fd,"onTransitionEnd"),Nt("onMouseEnter",["mouseout","mouseover"]),Nt("onMouseLeave",["mouseout","mouseover"]),Nt("onPointerEnter",["pointerout","pointerover"]),Nt("onPointerLeave",["pointerout","pointerover"]),Ie("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ie("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ie("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ie("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ie("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ie("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ux=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fi));function Om(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],i=n.event;n=n.listeners;e:{var r=void 0;if(t)for(var d=n.length-1;0<=d;d--){var x=n[d],T=x.instance,Y=x.currentTarget;if(x=x.listener,T!==r&&i.isPropagationStopped())break e;r=x,i.currentTarget=Y;try{r(i)}catch(re){vr(re)}i.currentTarget=null,r=T}else for(d=0;d<n.length;d++){if(x=n[d],T=x.instance,Y=x.currentTarget,x=x.listener,T!==r&&i.isPropagationStopped())break e;r=x,i.currentTarget=Y;try{r(i)}catch(re){vr(re)}i.currentTarget=null,r=T}}}}function jt(e,t){var s=t[ss];s===void 0&&(s=t[ss]=new Set);var n=e+"__bubble";s.has(n)||(Rm(t,e,2,!1),s.add(n))}function m0(e,t,s){var n=0;t&&(n|=4),Rm(s,e,n,t)}var ic="_reactListening"+Math.random().toString(36).slice(2);function f0(e){if(!e[ic]){e[ic]=!0,Be.forEach(function(s){s!=="selectionchange"&&(ux.has(s)||m0(s,!1,e),m0(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ic]||(t[ic]=!0,m0("selectionchange",!1,t))}}function Rm(e,t,s,n){switch(uf(t)){case 2:var i=Hx;break;case 8:i=Lx;break;default:i=k0}s=i.bind(null,t,s,e),i=void 0,!h||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,s,{capture:!0,passive:i}):e.addEventListener(t,s,!0):i!==void 0?e.addEventListener(t,s,{passive:i}):e.addEventListener(t,s,!1)}function p0(e,t,s,n,i){var r=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var d=n.tag;if(d===3||d===4){var x=n.stateNode.containerInfo;if(x===i)break;if(d===4)for(d=n.return;d!==null;){var T=d.tag;if((T===3||T===4)&&d.stateNode.containerInfo===i)return;d=d.return}for(;x!==null;){if(d=we(x),d===null)return;if(T=d.tag,T===5||T===6||T===26||T===27){n=r=d;continue e}x=x.parentNode}}n=n.return}Rc(function(){var Y=r,re=ns(s),he=[];e:{var Z=pd.get(e);if(Z!==void 0){var ee=Dt,Ze=e;switch(e){case"keypress":if(st(s)===0)break e;case"keydown":case"keyup":ee=Ga;break;case"focusin":Ze="focus",ee=Qt;break;case"focusout":Ze="blur",ee=Qt;break;case"beforeblur":case"afterblur":ee=Qt;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Le;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=ta;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=xl;break;case dd:case ud:case md:ee=Ns;break;case fd:ee=nt;break;case"scroll":case"scrollend":ee=Zt;break;case"wheel":ee=us;break;case"copy":case"cut":case"paste":ee=Aa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=fn;break;case"toggle":case"beforetoggle":ee=Na}var lt=(t&4)!==0,Kt=!lt&&(e==="scroll"||e==="scrollend"),H=lt?Z!==null?Z+"Capture":null:Z;lt=[];for(var z=Y,W;z!==null;){var xe=z;if(W=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||W===null||H===null||(xe=fl(z,H),xe!=null&&lt.push(Ji(z,xe,W))),Kt)break;z=z.return}0<lt.length&&(Z=new ee(Z,Ze,null,s,re),he.push({event:Z,listeners:lt}))}}if((t&7)===0){e:{if(Z=e==="mouseover"||e==="pointerover",ee=e==="mouseout"||e==="pointerout",Z&&s!==va&&(Ze=s.relatedTarget||s.fromElement)&&(we(Ze)||Ze[ba]))break e;if((ee||Z)&&(Z=re.window===re?re:(Z=re.ownerDocument)?Z.defaultView||Z.parentWindow:window,ee?(Ze=s.relatedTarget||s.toElement,ee=Y,Ze=Ze?we(Ze):null,Ze!==null&&(Kt=j(Ze),lt=Ze.tag,Ze!==Kt||lt!==5&&lt!==27&&lt!==6)&&(Ze=null)):(ee=null,Ze=Y),ee!==Ze)){if(lt=Le,xe="onMouseLeave",H="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(lt=fn,xe="onPointerLeave",H="onPointerEnter",z="pointer"),Kt=ee==null?Z:qe(ee),W=Ze==null?Z:qe(Ze),Z=new lt(xe,z+"leave",ee,s,re),Z.target=Kt,Z.relatedTarget=W,xe=null,we(re)===Y&&(lt=new lt(H,z+"enter",Ze,s,re),lt.target=W,lt.relatedTarget=Kt,xe=lt),Kt=xe,ee&&Ze)t:{for(lt=mx,H=ee,z=Ze,W=0,xe=H;xe;xe=lt(xe))W++;xe=0;for(var at=z;at;at=lt(at))xe++;for(;0<W-xe;)H=lt(H),W--;for(;0<xe-W;)z=lt(z),xe--;for(;W--;){if(H===z||z!==null&&H===z.alternate){lt=H;break t}H=lt(H),z=lt(z)}lt=null}else lt=null;ee!==null&&Bm(he,Z,ee,lt,!1),Ze!==null&&Kt!==null&&Bm(he,Kt,Ze,lt,!0)}}e:{if(Z=Y?qe(Y):window,ee=Z.nodeName&&Z.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Z.type==="file")var Lt=I0;else if(hn(Z))if(ed)Lt=wp;else{Lt=jp;var Je=vp}else ee=Z.nodeName,!ee||ee.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?Y&&wi(Y.elementType)&&(Lt=I0):Lt=Np;if(Lt&&(Lt=Lt(e,Y))){fs(he,Lt,s,re);break e}Je&&Je(e,Z,Y),e==="focusout"&&Y&&Z.type==="number"&&Y.memoizedProps.value!=null&&Os(Z,"number",Z.value)}switch(Je=Y?qe(Y):window,e){case"focusin":(hn(Je)||Je.contentEditable==="true")&&(ql=Je,Vc=Y,_i=null);break;case"focusout":_i=Vc=ql=null;break;case"mousedown":Gc=!0;break;case"contextmenu":case"mouseup":case"dragend":Gc=!1,cd(he,s,re);break;case"selectionchange":if(Mp)break;case"keydown":case"keyup":cd(he,s,re)}var gt;if(sa)e:{switch(e){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else Fs?Qs(e,s)&&(Tt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Tt="onCompositionStart");Tt&&(ms&&s.locale!=="ko"&&(Fs||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&Fs&&(gt=He()):(_e=re,Ee="value"in _e?_e.value:_e.textContent,Fs=!0)),Je=rc(Y,Tt),0<Je.length&&(Tt=new Rs(Tt,e,null,s,re),he.push({event:Tt,listeners:Je}),gt?Tt.data=gt:(gt=xn(s),gt!==null&&(Tt.data=gt)))),(gt=wa?Bc(e,s):$c(e,s))&&(Tt=rc(Y,"onBeforeInput"),0<Tt.length&&(Je=new Rs("onBeforeInput","beforeinput",null,s,re),he.push({event:Je,listeners:Tt}),Je.data=gt)),cx(he,e,Y,s,re)}Om(he,t)})}function Ji(e,t,s){return{instance:e,listener:t,currentTarget:s}}function rc(e,t){for(var s=t+"Capture",n=[];e!==null;){var i=e,r=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||r===null||(i=fl(e,s),i!=null&&n.unshift(Ji(e,i,r)),i=fl(e,t),i!=null&&n.push(Ji(e,i,r))),e.tag===3)return n;e=e.return}return[]}function mx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Bm(e,t,s,n,i){for(var r=t._reactName,d=[];s!==null&&s!==n;){var x=s,T=x.alternate,Y=x.stateNode;if(x=x.tag,T!==null&&T===n)break;x!==5&&x!==26&&x!==27||Y===null||(T=Y,i?(Y=fl(s,r),Y!=null&&d.unshift(Ji(s,Y,T))):i||(Y=fl(s,r),Y!=null&&d.push(Ji(s,Y,T)))),s=s.return}d.length!==0&&e.push({event:t,listeners:d})}var fx=/\r\n?/g,px=/\u0000|\uFFFD/g;function $m(e){return(typeof e=="string"?e:""+e).replace(fx,`
`).replace(px,"")}function Um(e,t){return t=$m(t),$m(e)===t}function Jt(e,t,s,n,i,r){switch(s){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||Un(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&Un(e,""+n);break;case"className":Ps(e,"class",n);break;case"tabIndex":Ps(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Ps(e,s,n);break;case"style":yr(e,n,r);break;case"data":if(t!=="object"){Ps(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(s);break}n=ml(""+n),e.setAttribute(s,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(s==="formAction"?(t!=="input"&&Jt(e,t,"name",i.name,i,null),Jt(e,t,"formEncType",i.formEncType,i,null),Jt(e,t,"formMethod",i.formMethod,i,null),Jt(e,t,"formTarget",i.formTarget,i,null)):(Jt(e,t,"encType",i.encType,i,null),Jt(e,t,"method",i.method,i,null),Jt(e,t,"target",i.target,i,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(s);break}n=ml(""+n),e.setAttribute(s,n);break;case"onClick":n!=null&&(e.onclick=Zs);break;case"onScroll":n!=null&&jt("scroll",e);break;case"onScrollEnd":n!=null&&jt("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(o(61));if(s=n.__html,s!=null){if(i.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}s=ml(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,""+n):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":n===!0?e.setAttribute(s,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,n):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(s,n):e.removeAttribute(s);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(s):e.setAttribute(s,n);break;case"popover":jt("beforetoggle",e),jt("toggle",e),Xs(e,"popover",n);break;case"xlinkActuate":qa(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":qa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":qa(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":qa(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":qa(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":qa(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":qa(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":qa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":qa(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":Xs(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=br.get(s)||s,Xs(e,s,n))}}function x0(e,t,s,n,i,r){switch(s){case"style":yr(e,n,r);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(o(61));if(s=n.__html,s!=null){if(i.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"children":typeof n=="string"?Un(e,n):(typeof n=="number"||typeof n=="bigint")&&Un(e,""+n);break;case"onScroll":n!=null&&jt("scroll",e);break;case"onScrollEnd":n!=null&&jt("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Zs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ut.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(i=s.endsWith("Capture"),t=s.slice(2,i?s.length-7:void 0),r=e[ha]||null,r=r!=null?r[s]:null,typeof r=="function"&&e.removeEventListener(t,r,i),typeof n=="function")){typeof r!="function"&&r!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,n,i);break e}s in e?e[s]=n:n===!0?e.setAttribute(s,""):Xs(e,s,n)}}}function Pa(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",e),jt("load",e);var n=!1,i=!1,r;for(r in s)if(s.hasOwnProperty(r)){var d=s[r];if(d!=null)switch(r){case"src":n=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Jt(e,t,r,d,s,null)}}i&&Jt(e,t,"srcSet",s.srcSet,s,null),n&&Jt(e,t,"src",s.src,s,null);return;case"input":jt("invalid",e);var x=r=d=i=null,T=null,Y=null;for(n in s)if(s.hasOwnProperty(n)){var re=s[n];if(re!=null)switch(n){case"name":i=re;break;case"type":d=re;break;case"checked":T=re;break;case"defaultChecked":Y=re;break;case"value":r=re;break;case"defaultValue":x=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(o(137,t));break;default:Jt(e,t,n,re,s,null)}}mn(e,r,x,T,Y,d,i,!1);return;case"select":jt("invalid",e),n=d=r=null;for(i in s)if(s.hasOwnProperty(i)&&(x=s[i],x!=null))switch(i){case"value":r=x;break;case"defaultValue":d=x;break;case"multiple":n=x;default:Jt(e,t,i,x,s,null)}t=r,s=d,e.multiple=!!n,t!=null?Ve(e,!!n,t,!1):s!=null&&Ve(e,!!n,s,!0);return;case"textarea":jt("invalid",e),r=i=n=null;for(d in s)if(s.hasOwnProperty(d)&&(x=s[d],x!=null))switch(d){case"value":n=x;break;case"defaultValue":i=x;break;case"children":r=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(o(91));break;default:Jt(e,t,d,x,s,null)}hr(e,n,i,r);return;case"option":for(T in s)if(s.hasOwnProperty(T)&&(n=s[T],n!=null))switch(T){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Jt(e,t,T,n,s,null)}return;case"dialog":jt("beforetoggle",e),jt("toggle",e),jt("cancel",e),jt("close",e);break;case"iframe":case"object":jt("load",e);break;case"video":case"audio":for(n=0;n<Fi.length;n++)jt(Fi[n],e);break;case"image":jt("error",e),jt("load",e);break;case"details":jt("toggle",e);break;case"embed":case"source":case"link":jt("error",e),jt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in s)if(s.hasOwnProperty(Y)&&(n=s[Y],n!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Jt(e,t,Y,n,s,null)}return;default:if(wi(t)){for(re in s)s.hasOwnProperty(re)&&(n=s[re],n!==void 0&&x0(e,t,re,n,s,void 0));return}}for(x in s)s.hasOwnProperty(x)&&(n=s[x],n!=null&&Jt(e,t,x,n,s,null))}function xx(e,t,s,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,d=null,x=null,T=null,Y=null,re=null;for(ee in s){var he=s[ee];if(s.hasOwnProperty(ee)&&he!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":T=he;default:n.hasOwnProperty(ee)||Jt(e,t,ee,null,n,he)}}for(var Z in n){var ee=n[Z];if(he=s[Z],n.hasOwnProperty(Z)&&(ee!=null||he!=null))switch(Z){case"type":r=ee;break;case"name":i=ee;break;case"checked":Y=ee;break;case"defaultChecked":re=ee;break;case"value":d=ee;break;case"defaultValue":x=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(o(137,t));break;default:ee!==he&&Jt(e,t,Z,ee,n,he)}}ea(e,d,x,T,Y,re,r,i);return;case"select":ee=d=x=Z=null;for(r in s)if(T=s[r],s.hasOwnProperty(r)&&T!=null)switch(r){case"value":break;case"multiple":ee=T;default:n.hasOwnProperty(r)||Jt(e,t,r,null,n,T)}for(i in n)if(r=n[i],T=s[i],n.hasOwnProperty(i)&&(r!=null||T!=null))switch(i){case"value":Z=r;break;case"defaultValue":x=r;break;case"multiple":d=r;default:r!==T&&Jt(e,t,i,r,n,T)}t=x,s=d,n=ee,Z!=null?Ve(e,!!s,Z,!1):!!n!=!!s&&(t!=null?Ve(e,!!s,t,!0):Ve(e,!!s,s?[]:"",!1));return;case"textarea":ee=Z=null;for(x in s)if(i=s[x],s.hasOwnProperty(x)&&i!=null&&!n.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Jt(e,t,x,null,n,i)}for(d in n)if(i=n[d],r=s[d],n.hasOwnProperty(d)&&(i!=null||r!=null))switch(d){case"value":Z=i;break;case"defaultValue":ee=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(o(91));break;default:i!==r&&Jt(e,t,d,i,n,r)}xr(e,Z,ee);return;case"option":for(var Ze in s)if(Z=s[Ze],s.hasOwnProperty(Ze)&&Z!=null&&!n.hasOwnProperty(Ze))switch(Ze){case"selected":e.selected=!1;break;default:Jt(e,t,Ze,null,n,Z)}for(T in n)if(Z=n[T],ee=s[T],n.hasOwnProperty(T)&&Z!==ee&&(Z!=null||ee!=null))switch(T){case"selected":e.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:Jt(e,t,T,Z,n,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lt in s)Z=s[lt],s.hasOwnProperty(lt)&&Z!=null&&!n.hasOwnProperty(lt)&&Jt(e,t,lt,null,n,Z);for(Y in n)if(Z=n[Y],ee=s[Y],n.hasOwnProperty(Y)&&Z!==ee&&(Z!=null||ee!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(o(137,t));break;default:Jt(e,t,Y,Z,n,ee)}return;default:if(wi(t)){for(var Kt in s)Z=s[Kt],s.hasOwnProperty(Kt)&&Z!==void 0&&!n.hasOwnProperty(Kt)&&x0(e,t,Kt,void 0,n,Z);for(re in n)Z=n[re],ee=s[re],!n.hasOwnProperty(re)||Z===ee||Z===void 0&&ee===void 0||x0(e,t,re,Z,n,ee);return}}for(var H in s)Z=s[H],s.hasOwnProperty(H)&&Z!=null&&!n.hasOwnProperty(H)&&Jt(e,t,H,null,n,Z);for(he in n)Z=n[he],ee=s[he],!n.hasOwnProperty(he)||Z===ee||Z==null&&ee==null||Jt(e,t,he,Z,n,ee)}function Hm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),n=0;n<s.length;n++){var i=s[n],r=i.transferSize,d=i.initiatorType,x=i.duration;if(r&&x&&Hm(d)){for(d=0,x=i.responseEnd,n+=1;n<s.length;n++){var T=s[n],Y=T.startTime;if(Y>x)break;var re=T.transferSize,he=T.initiatorType;re&&Hm(he)&&(T=T.responseEnd,d+=re*(T<x?1:(x-Y)/(T-Y)))}if(--n,t+=8*(r+d)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var h0=null,g0=null;function cc(e){return e.nodeType===9?e:e.ownerDocument}function Lm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function y0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var b0=null;function gx(){var e=window.event;return e&&e.type==="popstate"?e===b0?!1:(b0=e,!0):(b0=null,!1)}var Vm=typeof setTimeout=="function"?setTimeout:void 0,yx=typeof clearTimeout=="function"?clearTimeout:void 0,Gm=typeof Promise=="function"?Promise:void 0,bx=typeof queueMicrotask=="function"?queueMicrotask:typeof Gm<"u"?function(e){return Gm.resolve(null).then(e).catch(vx)}:Vm;function vx(e){setTimeout(function(){throw e})}function sl(e){return e==="head"}function Wm(e,t){var s=t,n=0;do{var i=s.nextSibling;if(e.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"||s==="/&"){if(n===0){e.removeChild(i),pi(t);return}n--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")n++;else if(s==="html")Ki(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Ki(s);for(var r=s.firstChild;r;){var d=r.nextSibling,x=r.nodeName;r[cs]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&r.rel.toLowerCase()==="stylesheet"||s.removeChild(r),r=d}}else s==="body"&&Ki(e.ownerDocument.body);s=i}while(s);pi(t)}function Ym(e,t){var s=e;e=0;do{var n=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=n}while(s)}function v0(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":v0(s),Sa(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function jx(e,t,s,n){for(;e.nodeType===1;){var i=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[cs])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=Vs(e.nextSibling),e===null)break}return null}function Nx(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Vs(e.nextSibling),e===null))return null;return e}function Xm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Vs(e.nextSibling),e===null))return null;return e}function j0(e){return e.data==="$?"||e.data==="$~"}function N0(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function wx(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var n=function(){t(),s.removeEventListener("DOMContentLoaded",n)};s.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Vs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var w0=null;function Pm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return Vs(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function Zm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function Qm(e,t,s){switch(t=cc(s),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Ki(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Sa(e)}var Gs=new Map,Fm=new Set;function oc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var zn=O.d;O.d={f:Cx,r:Mx,D:_x,C:Tx,L:kx,m:Ex,X:Ax,S:Sx,M:zx};function Cx(){var e=zn.f(),t=ec();return e||t}function Mx(e){var t=Qe(e);t!==null&&t.tag===5&&t.type==="form"?fu(t):zn.r(e)}var ui=typeof document>"u"?null:document;function Jm(e,t,s){var n=ui;if(n&&typeof t=="string"&&t){var i=St(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof s=="string"&&(i+='[crossorigin="'+s+'"]'),Fm.has(i)||(Fm.add(i),e={rel:e,crossOrigin:s,href:t},n.querySelector(i)===null&&(t=n.createElement("link"),Pa(t,"link",e),Oe(t),n.head.appendChild(t)))}}function _x(e){zn.D(e),Jm("dns-prefetch",e,null)}function Tx(e,t){zn.C(e,t),Jm("preconnect",e,t)}function kx(e,t,s){zn.L(e,t,s);var n=ui;if(n&&e&&t){var i='link[rel="preload"][as="'+St(t)+'"]';t==="image"&&s&&s.imageSrcSet?(i+='[imagesrcset="'+St(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(i+='[imagesizes="'+St(s.imageSizes)+'"]')):i+='[href="'+St(e)+'"]';var r=i;switch(t){case"style":r=mi(e);break;case"script":r=fi(e)}Gs.has(r)||(e=_({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),Gs.set(r,e),n.querySelector(i)!==null||t==="style"&&n.querySelector(Ii(r))||t==="script"&&n.querySelector(er(r))||(t=n.createElement("link"),Pa(t,"link",e),Oe(t),n.head.appendChild(t)))}}function Ex(e,t){zn.m(e,t);var s=ui;if(s&&e){var n=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+St(n)+'"][href="'+St(e)+'"]',r=i;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=fi(e)}if(!Gs.has(r)&&(e=_({rel:"modulepreload",href:e},t),Gs.set(r,e),s.querySelector(i)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(er(r)))return}n=s.createElement("link"),Pa(n,"link",e),Oe(n),s.head.appendChild(n)}}}function Sx(e,t,s){zn.S(e,t,s);var n=ui;if(n&&e){var i=Yt(n).hoistableStyles,r=mi(e);t=t||"default";var d=i.get(r);if(!d){var x={loading:0,preload:null};if(d=n.querySelector(Ii(r)))x.loading=5;else{e=_({rel:"stylesheet",href:e,"data-precedence":t},s),(s=Gs.get(r))&&C0(e,s);var T=d=n.createElement("link");Oe(T),Pa(T,"link",e),T._p=new Promise(function(Y,re){T.onload=Y,T.onerror=re}),T.addEventListener("load",function(){x.loading|=1}),T.addEventListener("error",function(){x.loading|=2}),x.loading|=4,dc(d,t,n)}d={type:"stylesheet",instance:d,count:1,state:x},i.set(r,d)}}}function Ax(e,t){zn.X(e,t);var s=ui;if(s&&e){var n=Yt(s).hoistableScripts,i=fi(e),r=n.get(i);r||(r=s.querySelector(er(i)),r||(e=_({src:e,async:!0},t),(t=Gs.get(i))&&M0(e,t),r=s.createElement("script"),Oe(r),Pa(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(i,r))}}function zx(e,t){zn.M(e,t);var s=ui;if(s&&e){var n=Yt(s).hoistableScripts,i=fi(e),r=n.get(i);r||(r=s.querySelector(er(i)),r||(e=_({src:e,async:!0,type:"module"},t),(t=Gs.get(i))&&M0(e,t),r=s.createElement("script"),Oe(r),Pa(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(i,r))}}function Km(e,t,s,n){var i=(i=De.current)?oc(i):null;if(!i)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=mi(s.href),s=Yt(i).hoistableStyles,n=s.get(t),n||(n={type:"style",instance:null,count:0,state:null},s.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=mi(s.href);var r=Yt(i).hoistableStyles,d=r.get(e);if(d||(i=i.ownerDocument||i,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,d),(r=i.querySelector(Ii(e)))&&!r._p&&(d.instance=r,d.state.loading=5),Gs.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Gs.set(e,s),r||Dx(i,e,s,d.state))),t&&n===null)throw Error(o(528,""));return d}if(t&&n!==null)throw Error(o(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=fi(s),s=Yt(i).hoistableScripts,n=s.get(t),n||(n={type:"script",instance:null,count:0,state:null},s.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function mi(e){return'href="'+St(e)+'"'}function Ii(e){return'link[rel="stylesheet"]['+e+"]"}function Im(e){return _({},e,{"data-precedence":e.precedence,precedence:null})}function Dx(e,t,s,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),Pa(t,"link",s),Oe(t),e.head.appendChild(t))}function fi(e){return'[src="'+St(e)+'"]'}function er(e){return"script[async]"+e}function ef(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+St(s.href)+'"]');if(n)return t.instance=n,Oe(n),n;var i=_({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Oe(n),Pa(n,"style",i),dc(n,s.precedence,e),t.instance=n;case"stylesheet":i=mi(s.href);var r=e.querySelector(Ii(i));if(r)return t.state.loading|=4,t.instance=r,Oe(r),r;n=Im(s),(i=Gs.get(i))&&C0(n,i),r=(e.ownerDocument||e).createElement("link"),Oe(r);var d=r;return d._p=new Promise(function(x,T){d.onload=x,d.onerror=T}),Pa(r,"link",n),t.state.loading|=4,dc(r,s.precedence,e),t.instance=r;case"script":return r=fi(s.src),(i=e.querySelector(er(r)))?(t.instance=i,Oe(i),i):(n=s,(i=Gs.get(r))&&(n=_({},s),M0(n,i)),e=e.ownerDocument||e,i=e.createElement("script"),Oe(i),Pa(i,"link",n),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,dc(n,s.precedence,e));return t.instance}function dc(e,t,s){for(var n=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=n.length?n[n.length-1]:null,r=i,d=0;d<n.length;d++){var x=n[d];if(x.dataset.precedence===t)r=x;else if(r!==i)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function C0(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function M0(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var uc=null;function tf(e,t,s){if(uc===null){var n=new Map,i=uc=new Map;i.set(s,n)}else i=uc,n=i.get(s),n||(n=new Map,i.set(s,n));if(n.has(e))return n;for(n.set(e,null),s=s.getElementsByTagName(e),i=0;i<s.length;i++){var r=s[i];if(!(r[cs]||r[ra]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var d=r.getAttribute(t)||"";d=e+d;var x=n.get(d);x?x.push(r):n.set(d,[r])}}return n}function af(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function Ox(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function sf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Rx(e,t,s,n){if(s.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var i=mi(n.href),r=t.querySelector(Ii(i));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=mc.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=r,Oe(r);return}r=t.ownerDocument||t,n=Im(n),(i=Gs.get(i))&&C0(n,i),r=r.createElement("link"),Oe(r);var d=r;d._p=new Promise(function(x,T){d.onload=x,d.onerror=T}),Pa(r,"link",n),s.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=mc.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var _0=0;function Bx(e,t){return e.stylesheets&&e.count===0&&pc(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var n=setTimeout(function(){if(e.stylesheets&&pc(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&_0===0&&(_0=62500*hx());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&pc(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>_0?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(i)}}:null}function mc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)pc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var fc=null;function pc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,fc=new Map,t.forEach($x,e),fc=null,mc.call(e))}function $x(e,t){if(!(t.state.loading&4)){var s=fc.get(e);if(s)var n=s.get(null);else{s=new Map,fc.set(e,s);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var d=i[r];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(s.set(d.dataset.precedence,d),n=d)}n&&s.set(null,n)}i=t.instance,d=i.getAttribute("data-precedence"),r=s.get(d)||n,r===n&&s.set(null,i),s.set(d,i),this.count++,n=mc.bind(this),i.addEventListener("load",n),i.addEventListener("error",n),r?r.parentNode.insertBefore(i,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var tr={$$typeof:ae,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function Ux(e,t,s,n,i,r,d,x,T){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ja(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ja(0),this.hiddenUpdates=Ja(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function nf(e,t,s,n,i,r,d,x,T,Y,re,he){return e=new Ux(e,t,s,d,T,Y,re,he,x),t=1,r===!0&&(t|=24),r=Ms(3,null,null,t),e.current=r,r.stateNode=e,t=no(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:n,isDehydrated:s,cache:t},co(r),e}function lf(e){return e?(e=Wl,e):Wl}function rf(e,t,s,n,i,r){i=lf(i),n.context===null?n.context=i:n.pendingContext=i,n=Xn(t),n.payload={element:s},r=r===void 0?null:r,r!==null&&(n.callback=r),s=Pn(e,n,t),s!==null&&(ys(s,e,t),Di(s,e,t))}function cf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function T0(e,t){cf(e,t),(e=e.alternate)&&cf(e,t)}function of(e){if(e.tag===13||e.tag===31){var t=yl(e,67108864);t!==null&&ys(t,e,67108864),T0(e,67108864)}}function df(e){if(e.tag===13||e.tag===31){var t=Ss();t=La(t);var s=yl(e,t);s!==null&&ys(s,e,t),T0(e,t)}}var xc=!0;function Hx(e,t,s,n){var i=b.T;b.T=null;var r=O.p;try{O.p=2,k0(e,t,s,n)}finally{O.p=r,b.T=i}}function Lx(e,t,s,n){var i=b.T;b.T=null;var r=O.p;try{O.p=8,k0(e,t,s,n)}finally{O.p=r,b.T=i}}function k0(e,t,s,n){if(xc){var i=E0(n);if(i===null)p0(e,t,n,hc,s),mf(e,n);else if(Vx(i,e,t,s,n))n.stopPropagation();else if(mf(e,n),t&4&&-1<qx.indexOf(e)){for(;i!==null;){var r=Qe(i);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var d=it(r.pendingLanes);if(d!==0){var x=r;for(x.pendingLanes|=2,x.entangledLanes|=2;d;){var T=1<<31-Bt(d);x.entanglements[1]|=T,d&=~T}on(r),(Vt&6)===0&&(Kr=F()+500,Qi(0))}}break;case 31:case 13:x=yl(r,2),x!==null&&ys(x,r,2),ec(),T0(r,2)}if(r=E0(n),r===null&&p0(e,t,n,hc,s),r===i)break;i=r}i!==null&&n.stopPropagation()}else p0(e,t,n,null,s)}}function E0(e){return e=ns(e),S0(e)}var hc=null;function S0(e){if(hc=null,e=we(e),e!==null){var t=j(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=v(t),e!==null)return e;e=null}else if(s===31){if(e=w(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return hc=e,null}function uf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Re()){case X:return 2;case be:return 8;case ke:case Ue:return 32;case ze:return 268435456;default:return 32}default:return 32}}var A0=!1,nl=null,ll=null,il=null,ar=new Map,sr=new Map,rl=[],qx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mf(e,t){switch(e){case"focusin":case"focusout":nl=null;break;case"dragenter":case"dragleave":ll=null;break;case"mouseover":case"mouseout":il=null;break;case"pointerover":case"pointerout":ar.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sr.delete(t.pointerId)}}function nr(e,t,s,n,i,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:r,targetContainers:[i]},t!==null&&(t=Qe(t),t!==null&&of(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Vx(e,t,s,n,i){switch(t){case"focusin":return nl=nr(nl,e,t,s,n,i),!0;case"dragenter":return ll=nr(ll,e,t,s,n,i),!0;case"mouseover":return il=nr(il,e,t,s,n,i),!0;case"pointerover":var r=i.pointerId;return ar.set(r,nr(ar.get(r)||null,e,t,s,n,i)),!0;case"gotpointercapture":return r=i.pointerId,sr.set(r,nr(sr.get(r)||null,e,t,s,n,i)),!0}return!1}function ff(e){var t=we(e.target);if(t!==null){var s=j(t);if(s!==null){if(t=s.tag,t===13){if(t=v(s),t!==null){e.blockedOn=t,Rn(e.priority,function(){df(s)});return}}else if(t===31){if(t=w(s),t!==null){e.blockedOn=t,Rn(e.priority,function(){df(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=E0(e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);va=n,s.target.dispatchEvent(n),va=null}else return t=Qe(s),t!==null&&of(t),e.blockedOn=s,!1;t.shift()}return!0}function pf(e,t,s){gc(e)&&s.delete(t)}function Gx(){A0=!1,nl!==null&&gc(nl)&&(nl=null),ll!==null&&gc(ll)&&(ll=null),il!==null&&gc(il)&&(il=null),ar.forEach(pf),sr.forEach(pf)}function yc(e,t){e.blockedOn===t&&(e.blockedOn=null,A0||(A0=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Gx)))}var bc=null;function xf(e){bc!==e&&(bc=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){bc===e&&(bc=null);for(var t=0;t<e.length;t+=3){var s=e[t],n=e[t+1],i=e[t+2];if(typeof n!="function"){if(S0(n||s)===null)continue;break}var r=Qe(s);r!==null&&(e.splice(t,3),t-=3,Eo(r,{pending:!0,data:i,method:s.method,action:n},n,i))}}))}function pi(e){function t(T){return yc(T,e)}nl!==null&&yc(nl,e),ll!==null&&yc(ll,e),il!==null&&yc(il,e),ar.forEach(t),sr.forEach(t);for(var s=0;s<rl.length;s++){var n=rl[s];n.blockedOn===e&&(n.blockedOn=null)}for(;0<rl.length&&(s=rl[0],s.blockedOn===null);)ff(s),s.blockedOn===null&&rl.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(n=0;n<s.length;n+=3){var i=s[n],r=s[n+1],d=i[ha]||null;if(typeof r=="function")d||xf(s);else if(d){var x=null;if(r&&r.hasAttribute("formAction")){if(i=r,d=r[ha]||null)x=d.formAction;else if(S0(i)!==null)continue}else x=d.action;typeof x=="function"?s[n+1]=x:(s.splice(n,3),n-=3),xf(s)}}}function hf(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(d){return i=d})},focusReset:"manual",scroll:"manual"})}function t(){i!==null&&(i(),i=null),n||setTimeout(s,20)}function s(){if(!n&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),i!==null&&(i(),i=null)}}}function z0(e){this._internalRoot=e}vc.prototype.render=z0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var s=t.current,n=Ss();rf(s,n,e,t,null,null)},vc.prototype.unmount=z0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rf(e.current,2,null,e,null,null),ec(),t[ba]=null}};function vc(e){this._internalRoot=e}vc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ds();e={blockedOn:null,target:e,priority:t};for(var s=0;s<rl.length&&t!==0&&t<rl[s].priority;s++);rl.splice(s,0,e),s===0&&ff(e)}};var gf=c.version;if(gf!=="19.2.0")throw Error(o(527,gf,"19.2.0"));O.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=y(t),e=e!==null?k(e):null,e=e===null?null:e.stateNode,e};var Wx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:b,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{rt=jc.inject(Wx),zt=jc}catch{}}return ir.createRoot=function(e,t){if(!p(e))throw Error(o(299));var s=!1,n="",i=wu,r=Cu,d=Mu;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=nf(e,1,!1,null,null,s,n,null,i,r,d,hf),e[ba]=t.current,f0(e),new z0(t)},ir.hydrateRoot=function(e,t,s){if(!p(e))throw Error(o(299));var n=!1,i="",r=wu,d=Cu,x=Mu,T=null;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onUncaughtError!==void 0&&(r=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError),s.formState!==void 0&&(T=s.formState)),t=nf(e,1,!0,t,s??null,n,i,T,r,d,x,hf),t.context=lf(null),s=t.current,n=Ss(),n=La(n),i=Xn(n),i.callback=null,Pn(s,i,n),s=n,t.current.lanes=s,Ke(t,s),on(t),e[ba]=t.current,f0(e),new vc(t)},ir.version="19.2.0",ir}var Tf;function eh(){if(Tf)return O0.exports;Tf=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(c){console.error(c)}}return l(),O0.exports=Ix(),O0.exports}var th=eh(),V=F0();const Ws=Xx(V),ah=[1,2,5],Al={price:{livingCostWeight:.15,taxCostWeight:.1},wage:{livingCostWeight:.1,taxCostWeight:.1},market:{virtualDemandPerPop:.01,supplyDemandWeight:1,inventoryTargetDays:200,inventoryPriceImpact:.25,demandElasticity:.5,outputVariation:.2}},Me={food:{name:"",icon:"Wheat",color:"text-yellow-400",basePrice:1.6,minPrice:.16,maxPrice:16,defaultOwner:"peasant",unlockEpoch:0,tags:["essential","raw_material"],marketConfig:{supplyDemandWeight:.6,inventoryTargetDays:300,inventoryPriceImpact:.15,demandElasticity:.2,outputVariation:.2}},wood:{name:"",icon:"Trees",color:"text-emerald-400",basePrice:3.2,minPrice:.32,maxPrice:32,defaultOwner:"lumberjack",unlockEpoch:0,tags:["raw_material"],marketConfig:{supplyDemandWeight:.7,inventoryTargetDays:250,inventoryPriceImpact:.2,demandElasticity:.3,outputVariation:.2}},stone:{name:"",icon:"Pickaxe",color:"text-stone-400",basePrice:4.5,minPrice:.45,maxPrice:45,defaultOwner:"miner",unlockEpoch:0,tags:["raw_material"],marketConfig:{supplyDemandWeight:.7,inventoryTargetDays:250,inventoryPriceImpact:.2,demandElasticity:.3,outputVariation:.2}},cloth:{name:"",icon:"Shirt",color:"text-indigo-300",basePrice:2.5,minPrice:.25,maxPrice:25,defaultOwner:"artisan",unlockEpoch:0,tags:["essential","raw_material","manufactured"],marketConfig:{supplyDemandWeight:.8,inventoryTargetDays:200,inventoryPriceImpact:.25,demandElasticity:.4,outputVariation:.2}},brick:{name:"",icon:"Home",color:"text-red-400",basePrice:9.5,minPrice:.95,maxPrice:95,defaultOwner:"artisan",unlockEpoch:0,unlockTech:"pottery",tags:["industrial"],marketConfig:{supplyDemandWeight:1,inventoryTargetDays:150,inventoryPriceImpact:.3,demandElasticity:.5,outputVariation:.2}},tools:{name:"",icon:"Anvil",color:"text-blue-300",basePrice:12.5,minPrice:1.25,maxPrice:125,defaultOwner:"artisan",unlockEpoch:0,unlockTech:"tool_making",tags:["industrial"],marketConfig:{supplyDemandWeight:1.2,inventoryTargetDays:300,inventoryPriceImpact:.35,demandElasticity:.6,outputVariation:.2}},plank:{name:"",icon:"Hammer",color:"text-amber-600",basePrice:7.5,minPrice:.75,maxPrice:75,defaultOwner:"worker",unlockEpoch:1,unlockTech:"tools",tags:["industrial"],marketConfig:{supplyDemandWeight:1,inventoryTargetDays:150,inventoryPriceImpact:.3,demandElasticity:.5,outputVariation:.2}},copper:{name:"",icon:"Pickaxe",color:"text-orange-400",basePrice:8.5,minPrice:.85,maxPrice:85,defaultOwner:"miner",unlockEpoch:1,unlockTech:"copper_mining",tags:["raw_material"],marketConfig:{supplyDemandWeight:.9,inventoryTargetDays:200,inventoryPriceImpact:.25,demandElasticity:.4,outputVariation:.2}},dye:{name:"",icon:"Droplets",color:"text-pink-500",basePrice:7.5,minPrice:.75,maxPrice:75,defaultOwner:"artisan",unlockEpoch:1,tags:["industrial","raw_material"],marketConfig:{supplyDemandWeight:1.1,inventoryTargetDays:120,inventoryPriceImpact:.35,demandElasticity:.6,outputVariation:.2}},papyrus:{name:"",icon:"ScrollText",color:"text-lime-300",basePrice:10,minPrice:1,maxPrice:100,defaultOwner:"scribe",unlockEpoch:2,unlockTech:"papyrus_cultivation",tags:["raw_material","manufactured"],marketConfig:{supplyDemandWeight:1.1,inventoryTargetDays:150,inventoryPriceImpact:.3,demandElasticity:.5,outputVariation:.2}},delicacies:{name:"",icon:"UtensilsCrossed",color:"text-rose-400",basePrice:18,minPrice:1.8,maxPrice:180,defaultOwner:"artisan",unlockEpoch:2,unlockTech:"culinary_arts",tags:["luxury","manufactured"],marketConfig:{supplyDemandWeight:1.5,inventoryTargetDays:80,inventoryPriceImpact:.45,demandElasticity:1.3,outputVariation:.2}},furniture:{name:"",icon:"Armchair",color:"text-amber-500",basePrice:20,minPrice:2,maxPrice:200,defaultOwner:"artisan",unlockEpoch:2,unlockTech:"carpentry",tags:["luxury","manufactured"],marketConfig:{supplyDemandWeight:1.5,inventoryTargetDays:100,inventoryPriceImpact:.4,demandElasticity:1.2,outputVariation:.2}},ale:{name:"",icon:"Wine",color:"text-purple-400",basePrice:13,minPrice:1.3,maxPrice:130,defaultOwner:"artisan",unlockEpoch:2,unlockTech:"brewing",tags:["luxury","manufactured"],marketConfig:{supplyDemandWeight:1.6,inventoryTargetDays:8,inventoryPriceImpact:.5,demandElasticity:1.5,outputVariation:.2}},fine_clothes:{name:"",icon:"Shirt",color:"text-purple-400",basePrice:24,minPrice:2.4,maxPrice:240,defaultOwner:"artisan",unlockEpoch:2,tags:["luxury","manufactured"],marketConfig:{supplyDemandWeight:1.6,inventoryTargetDays:100,inventoryPriceImpact:.5,demandElasticity:1.5,outputVariation:.2}},iron:{name:"",icon:"Pickaxe",color:"text-zinc-400",basePrice:11.5,minPrice:1.15,maxPrice:115,defaultOwner:"miner",unlockEpoch:2,unlockTech:"ironworking",tags:["raw_material"],marketConfig:{supplyDemandWeight:.8,inventoryTargetDays:250,inventoryPriceImpact:.2,demandElasticity:.3,outputVariation:.2}},spice:{name:"",icon:"Leaf",color:"text-amber-400",basePrice:20,minPrice:2,maxPrice:200,defaultOwner:"merchant",unlockEpoch:4,unlockTech:"cartography",tags:["essential","manufactured"],marketConfig:{supplyDemandWeight:1.4,inventoryTargetDays:120,inventoryPriceImpact:.4,demandElasticity:.9,outputVariation:.2}},coffee:{name:"",icon:"Coffee",color:"text-amber-700",basePrice:18,minPrice:1.8,maxPrice:180,defaultOwner:"merchant",unlockEpoch:5,unlockTech:"coffee_agronomy",tags:["essential","manufactured"],marketConfig:{supplyDemandWeight:1.2,inventoryTargetDays:150,inventoryPriceImpact:.35,demandElasticity:.8,outputVariation:.2}},coal:{name:"",icon:"Flame",color:"text-slate-300",basePrice:11,minPrice:1.1,maxPrice:110,defaultOwner:"miner",unlockEpoch:6,unlockTech:"coal_gasification",tags:["raw_material"],marketConfig:{supplyDemandWeight:.9,inventoryTargetDays:200,inventoryPriceImpact:.25,demandElasticity:.4,outputVariation:.2}},steel:{name:"",icon:"Cog",color:"text-gray-300",basePrice:30,minPrice:3,maxPrice:300,defaultOwner:"engineer",unlockEpoch:6,unlockTech:"steel_alloys",tags:["industrial"],marketConfig:{supplyDemandWeight:1,inventoryTargetDays:180,inventoryPriceImpact:.3,demandElasticity:.5,outputVariation:.2}},silver:{name:"",icon:"Coins",color:"text-slate-200",type:"currency",basePrice:1,minPrice:1,maxPrice:1,unlockEpoch:0,tags:["currency"]},science:{name:"",icon:"Cpu",color:"text-cyan-400",basePrice:5,minPrice:.5,maxPrice:50,defaultOwner:"official",unlockEpoch:0,tags:["special","manufactured"],marketConfig:{supplyDemandWeight:.5,inventoryTargetDays:400,inventoryPriceImpact:.15,demandElasticity:.2,outputVariation:.1}},culture:{name:"",icon:"ScrollText",color:"text-pink-400",basePrice:2,minPrice:.25,maxPrice:10,defaultOwner:"cleric",unlockEpoch:1,unlockTech:"amphitheater_design",tags:["special","manufactured"],marketConfig:{supplyDemandWeight:.6,inventoryTargetDays:350,inventoryPriceImpact:.2,demandElasticity:.3,outputVariation:.15}},maxPop:{name:"",icon:"Users",color:"text-blue-400",type:"virtual",tags:["special"]},militaryCapacity:{name:"",icon:"Shield",color:"text-red-400",type:"virtual",tags:["special"]}},xa=[{id:0,name:"",color:"text-stone-400",bg:"bg-stone-900",tileColor:"bg-stone-700",req:{science:0},cost:{},bonuses:{desc:""}},{id:1,name:"",color:"text-orange-400",bg:"bg-orange-950",tileColor:"bg-orange-800",req:{science:600,population:25},cost:{food:600,wood:350,stone:120,silver:60},bonuses:{desc:"",gatherBonus:.15,militaryBonus:.1}},{id:2,name:"",color:"text-amber-300",bg:"bg-amber-900",tileColor:"bg-amber-700",req:{science:1800,population:90,culture:250},cost:{food:1e3,wood:500,brick:180,silver:250,tools:60},bonuses:{desc:"",gatherBonus:.2,cultureBonus:.15,scienceBonus:.1}},{id:3,name:"",color:"text-blue-400",bg:"bg-blue-950",tileColor:"bg-blue-800",req:{science:4500,population:170,culture:600},cost:{food:1800,wood:1e3,brick:500,iron:250,papyrus:100,silver:300},bonuses:{desc:"",gatherBonus:.25,cultureBonus:.2}},{id:4,name:"",color:"text-cyan-300",bg:"bg-cyan-900",tileColor:"bg-cyan-700",req:{science:8e3,population:320,culture:1400},cost:{food:2600,plank:700,brick:600,iron:350,silver:400},bonuses:{desc:"",gatherBonus:.3,scienceBonus:.2,militaryBonus:.1}},{id:5,name:"",color:"text-purple-400",bg:"bg-purple-950",tileColor:"bg-purple-800",req:{science:12e3,population:450,culture:2500},cost:{food:3500,plank:800,papyrus:300,spice:200,silver:500},bonuses:{desc:"",cultureBonus:.3,scienceBonus:.3}},{id:6,name:"",color:"text-gray-200",bg:"bg-gray-800",tileColor:"bg-gray-600",req:{science:2e4,population:650,culture:4e3},cost:{food:5e3,brick:1200,iron:800,tools:500,spice:200,silver:800},bonuses:{desc:"",gatherBonus:.4,industryBonus:.5,scienceBonus:.3}}],Fe={peasant:{name:"",icon:"Wheat",weight:1,tax:1,headTaxBase:.01,desc:"",wealthWeight:1,influenceBase:.5,startingWealth:15,defaultResource:"food",needs:{food:.55,cloth:.05,ale:.02,culture:.02},buffs:{satisfied:{desc:"",taxIncome:.1,production:.05},dissatisfied:{desc:"",taxIncome:-.2,production:-.1}}},lumberjack:{name:"",icon:"Trees",weight:.8,tax:1.2,headTaxBase:.02,desc:"",wealthWeight:1,influenceBase:.4,startingWealth:18,defaultResource:"wood",needs:{food:.75,cloth:.07,ale:.02,culture:.02},buffs:{satisfied:{desc:"",production:.06},dissatisfied:{desc:"",production:-.1}}},serf:{name:"",icon:"Users",weight:.5,tax:2,headTaxBase:.015,desc:"",wealthWeight:.5,influenceBase:.3,startingWealth:8,defaultResource:"food",needs:{food:.6,cloth:.05,ale:.02,culture:.015},buffs:{satisfied:{desc:"",production:.08},dissatisfied:{desc:"",production:-.15}}},worker:{name:"",icon:"Hammer",weight:2,tax:3,headTaxBase:.03,desc:"",wealthWeight:2,influenceBase:1,startingWealth:30,defaultResource:"plank",needs:{food:.7,cloth:.08,tools:.03,ale:.05,culture:.04},buffs:{satisfied:{desc:"",industryBonus:.15},dissatisfied:{desc:"",industryBonus:-.25}}},artisan:{name:"",icon:"Anvil",weight:1.5,tax:3.5,headTaxBase:.035,desc:"",wealthWeight:2.5,influenceBase:1.2,startingWealth:45,defaultResource:"tools",needs:{food:.65,cloth:.1,tools:.04,ale:.05,furniture:.02,culture:.05},buffs:{satisfied:{desc:"",production:.1},dissatisfied:{desc:"",production:-.15}}},miner:{name:"",icon:"Pickaxe",weight:1.2,tax:2.5,headTaxBase:.025,desc:"",wealthWeight:1.5,influenceBase:.8,startingWealth:25,defaultResource:"stone",needs:{food:.85,cloth:.08,ale:.02,culture:.03},buffs:{satisfied:{desc:"",gatherBonus:.1},dissatisfied:{desc:"",stability:-.1}}},merchant:{name:"",icon:"Coins",weight:6,tax:5,headTaxBase:.09,desc:"",wealthWeight:8,influenceBase:3.5,startingWealth:30,defaultResource:"spice",needs:{delicacies:.45,cloth:.12,spice:.15,furniture:.08,plank:.05,ale:.1,fine_clothes:.05,culture:.08},buffs:{satisfied:{desc:"",taxIncome:.15,gatherBonus:.05},dissatisfied:{desc:"",taxIncome:-.2,stability:-.1}},tradeConfig:{minProfitMargin:.1,maxPurchaseAmount:10,exportProbability:.5,maxInventoryRatio:.1,minWealthForTrade:10,tradeDuration:3,tradeCooldown:0,enableDebugLog:!0}},navigator:{name:"",icon:"Compass",weight:4,tax:3,headTaxBase:.06,desc:"",wealthWeight:3,influenceBase:2.5,startingWealth:80,defaultResource:"spice",needs:{food:.7,cloth:.1,spice:.1,ale:.1,culture:.06},buffs:{satisfied:{desc:"",gatherBonus:.1},dissatisfied:{desc:"",gatherBonus:-.1,stability:-.1}}},scribe:{name:"",icon:"Feather",weight:2.5,tax:2,headTaxBase:.04,desc:"",wealthWeight:2.5,influenceBase:1.5,startingWealth:55,defaultResource:"papyrus",needs:{food:.6,cloth:.1,papyrus:.06,furniture:.02,culture:.07},buffs:{satisfied:{desc:"",scienceBonus:.15},dissatisfied:{desc:"",scienceBonus:-.2}}},soldier:{name:"",icon:"Swords",weight:3,tax:1,headTaxBase:.04,desc:"",wealthWeight:2,influenceBase:2,startingWealth:35,defaultResource:"tools",needs:{food:.95,cloth:.08,ale:.05,culture:.03},buffs:{satisfied:{desc:"",militaryPower:.2},dissatisfied:{desc:"",militaryPower:-.3,stability:-.2}}},cleric:{name:"",icon:"Cross",weight:4,tax:.5,headTaxBase:.05,desc:"",wealthWeight:3,influenceBase:3,startingWealth:45,defaultResource:"culture",needs:{food:.6,cloth:.09,papyrus:.035,ale:.035,culture:.06},buffs:{satisfied:{desc:"",cultureBonus:.2,stability:.1},dissatisfied:{desc:"",cultureBonus:-.15,stability:-.1}}},official:{name:"",icon:"ScrollText",weight:5,tax:2,headTaxBase:.08,desc:"",wealthWeight:5,influenceBase:4,startingWealth:80,defaultResource:"science",needs:{delicacies:.385,cloth:.12,papyrus:.08,coffee:.04,furniture:.06,stone:.02,fine_clothes:.06,culture:.09},buffs:{satisfied:{desc:"",taxIncome:.1},dissatisfied:{desc:"",taxIncome:-.2}}},landowner:{name:"",icon:"Castle",weight:10,tax:5,headTaxBase:.07,desc:"",wealthWeight:10,influenceBase:5,startingWealth:150,defaultResource:"food",needs:{delicacies:.5,cloth:.15,spice:.12,furniture:.1,brick:.05,plank:.05,fine_clothes:.08,culture:.1},buffs:{satisfied:{desc:"",taxIncome:.15,stability:.15},dissatisfied:{desc:"",taxIncome:-.3,stability:-.25}}},capitalist:{name:"",icon:"Briefcase",weight:15,tax:8,headTaxBase:.08,desc:"",wealthWeight:20,influenceBase:6,startingWealth:200,defaultResource:"steel",needs:{delicacies:.3,cloth:.14,coffee:.072,furniture:.072,steel:.02,culture:.11},buffs:{satisfied:{desc:"",industryBonus:.25,scienceBonus:.15},dissatisfied:{desc:"",industryBonus:-.3,taxIncome:-.25}}},knight:{name:"",icon:"Shield",weight:8,tax:2,headTaxBase:.09,desc:"",wealthWeight:8,influenceBase:4,startingWealth:120,defaultResource:"tools",needs:{delicacies:.75,cloth:.15,coffee:.05,furniture:.08,ale:.1,culture:.08},buffs:{satisfied:{desc:"",militaryPower:.25,stability:.1},dissatisfied:{desc:"",militaryPower:-.2,stability:-.15}}},engineer:{name:"",icon:"Cog",weight:7,tax:6,headTaxBase:.1,desc:"",wealthWeight:6,influenceBase:3.5,startingWealth:160,defaultResource:"steel",needs:{food:.8,cloth:.12,coffee:.08,ale:.05,furniture:.05,culture:.07},buffs:{satisfied:{desc:"",industryBonus:.2,scienceBonus:.1},dissatisfied:{desc:"",industryBonus:-.25}}},unemployed:{name:"",icon:"AlertTriangle",weight:.2,tax:1,headTaxBase:.01,desc:"",wealthWeight:.2,influenceBase:.3,startingWealth:5,needs:{food:.45,cloth:.05},buffs:{satisfied:{desc:"",stability:.02},dissatisfied:{desc:"",stability:-.1}}}},is=[{id:"farm",name:"",desc:"",baseCost:{wood:12},output:{food:3.5},jobs:{peasant:2},owner:"peasant",epoch:0,cat:"gather",visual:{icon:"Wheat",color:"bg-yellow-700",text:"text-yellow-200"},marketConfig:{price:{livingCostWeight:.15,taxCostWeight:.2},wage:{livingCostWeight:.08,taxCostWeight:.05}}},{id:"trading_post",name:"",desc:"",baseCost:{wood:50,stone:10},output:{food:2},jobs:{merchant:1},owner:"merchant",epoch:0,cat:"civic",requiresTech:"barter",visual:{icon:"Handshake",color:"bg-amber-800",text:"text-amber-200"}},{id:"large_estate",name:"",desc:"",baseCost:{wood:100,plank:25},output:{food:12},jobs:{serf:6,landowner:1},owner:"landowner",epoch:3,cat:"gather",requiresTech:"feudalism",visual:{icon:"Castle",color:"bg-amber-800",text:"text-amber-200"}},{id:"lumber_camp",name:"",desc:"",baseCost:{food:18},input:{},output:{wood:2.2},jobs:{lumberjack:2},owner:"lumberjack",epoch:0,cat:"gather",visual:{icon:"Trees",color:"bg-emerald-800",text:"text-emerald-200"},marketConfig:{price:{livingCostWeight:.1,taxCostWeight:.15},wage:{livingCostWeight:.05,taxCostWeight:.05}}},{id:"quarry",name:"",desc:"",baseCost:{wood:55},input:{},output:{stone:1.7},jobs:{miner:2},owner:"miner",epoch:0,cat:"gather",visual:{icon:"Pickaxe",color:"bg-stone-600",text:"text-stone-200"},marketConfig:{price:{livingCostWeight:.1,taxCostWeight:.15},wage:{livingCostWeight:.05,taxCostWeight:.05}}},{id:"copper_mine",name:"",desc:"",baseCost:{food:120,wood:120},input:{tools:.02},output:{copper:.35},jobs:{miner:3},owner:"miner",epoch:1,cat:"gather",requiresTech:"copper_mining",visual:{icon:"Gem",color:"bg-orange-700",text:"text-orange-200"},marketConfig:{price:{livingCostWeight:.2,taxCostWeight:.25},wage:{livingCostWeight:.1,taxCostWeight:.1}}},{id:"reed_works",name:"",desc:"",baseCost:{food:140,wood:80},output:{papyrus:.4},jobs:{peasant:2},owner:"peasant",epoch:2,cat:"gather",requiresTech:"papyrus_cultivation",visual:{icon:"ScrollText",color:"bg-lime-800",text:"text-lime-200"},marketConfig:{price:{livingCostWeight:.1,taxCostWeight:.15},wage:{livingCostWeight:.05,taxCostWeight:.05}}},{id:"culinary_kitchen",name:"",desc:"",baseCost:{wood:100,stone:60,brick:30},input:{tools:.1,food:1.5},output:{delicacies:1.5},jobs:{artisan:2,peasant:1},owner:"artisan",epoch:2,cat:"industry",requiresTech:"culinary_arts",visual:{icon:"UtensilsCrossed",color:"bg-rose-800",text:"text-rose-200"}},{id:"brewery",name:"",desc:"",baseCost:{wood:90,stone:50,brick:25},input:{food:1.2,wood:.2},output:{ale:1.2},jobs:{artisan:2},owner:"artisan",epoch:2,cat:"industry",requiresTech:"brewing",visual:{icon:"Wine",color:"bg-purple-800",text:"text-purple-200"},marketConfig:{price:{livingCostWeight:.4,taxCostWeight:.5},wage:{livingCostWeight:.25,taxCostWeight:.25}}},{id:"furniture_workshop",name:"",desc:"",baseCost:{plank:120,stone:80},input:{tools:.1,plank:1,cloth:.3},output:{furniture:1.2},jobs:{artisan:3},owner:"artisan",epoch:2,cat:"industry",requiresTech:"carpentry",visual:{icon:"Armchair",color:"bg-amber-800",text:"text-amber-200"},marketConfig:{price:{livingCostWeight:.3,taxCostWeight:.4},wage:{livingCostWeight:.15,taxCostWeight:.15}}},{id:"loom_house",name:"",desc:"",baseCost:{wood:35,food:20},output:{cloth:1.2},jobs:{peasant:2},owner:"peasant",epoch:0,cat:"industry",visual:{icon:"Shirt",color:"bg-indigo-800",text:"text-indigo-200"}},{id:"dye_works",name:"",desc:"",baseCost:{wood:60,stone:20},input:{food:.5},output:{dye:.4},jobs:{peasant:2},owner:"artisan",epoch:1,cat:"industry",visual:{icon:"Paintbrush",color:"bg-pink-800",text:"text-pink-200"}},{id:"tailor_workshop",name:"",desc:"",baseCost:{wood:100,stone:40},input:{tools:.04,cloth:1,dye:.2},output:{fine_clothes:.8,culture:.1},jobs:{artisan:2},owner:"artisan",epoch:2,cat:"industry",requiresTech:"tools",visual:{icon:"Package",color:"bg-indigo-900",text:"text-indigo-100"}},{id:"mine",name:"",desc:"",baseCost:{plank:120,food:220},input:{tools:.04},output:{iron:.35},jobs:{miner:5,capitalist:1},owner:"capitalist",epoch:2,cat:"gather",requiresTech:"ironworking",visual:{icon:"Mountain",color:"bg-zinc-700",text:"text-zinc-200"},marketConfig:{price:{livingCostWeight:.2,taxCostWeight:.25},wage:{livingCostWeight:.1,taxCostWeight:.1}}},{id:"coffee_plantation",name:"",desc:"",baseCost:{wood:200,spice:30},output:{coffee:.4},jobs:{serf:4,merchant:1},owner:"merchant",epoch:5,cat:"gather",requiresTech:"coffee_agronomy",visual:{icon:"Coffee",color:"bg-amber-900",text:"text-amber-200"}},{id:"coal_mine",name:"",desc:"",baseCost:{plank:200,tools:60},input:{tools:.1},output:{coal:.45},jobs:{miner:6,capitalist:1},owner:"capitalist",epoch:6,cat:"gather",requiresTech:"coal_gasification",visual:{icon:"Flame",color:"bg-slate-700",text:"text-slate-100"},marketConfig:{price:{livingCostWeight:.2,taxCostWeight:.25},wage:{livingCostWeight:.1,taxCostWeight:.1}}},{id:"hut",name:"",desc:"",baseCost:{wood:20,food:20},output:{maxPop:3},epoch:0,cat:"civic",visual:{icon:"Tent",color:"bg-orange-800",text:"text-orange-200"}},{id:"house",name:"",desc:"",baseCost:{plank:60,brick:40},output:{maxPop:6},epoch:2,cat:"civic",requiresTech:"urban_planning",visual:{icon:"Home",color:"bg-amber-700",text:"text-amber-100"}},{id:"granary",name:"",desc:"",baseCost:{wood:120,brick:40},output:{maxPop:6},epoch:1,cat:"civic",requiresTech:"granary_architecture",visual:{icon:"Boxes",color:"bg-yellow-900",text:"text-yellow-200"}},{id:"town_hall",name:"",desc:"",baseCost:{brick:200,plank:200},input:{brick:.2,papyrus:.02},output:{},jobs:{official:5},epoch:3,cat:"civic",requiresTech:"bureaucracy",visual:{icon:"Scale",color:"bg-slate-800",text:"text-slate-200"}},{id:"church",name:"",desc:"",baseCost:{stone:150,plank:50},output:{culture:.8,silver:.5},jobs:{cleric:3},owner:"cleric",epoch:3,cat:"civic",requiresTech:"theology",visual:{icon:"Cross",color:"bg-purple-900",text:"text-purple-200"}},{id:"amphitheater",name:"",desc:"",baseCost:{stone:200,brick:80},output:{culture:1.2},jobs:{cleric:2},owner:"cleric",epoch:1,cat:"civic",requiresTech:"amphitheater_design",visual:{icon:"Music2",color:"bg-rose-900",text:"text-rose-200"}},{id:"navigator_school",name:"",desc:"",baseCost:{wood:160,papyrus:80},output:{science:.6,culture:.2},jobs:{navigator:2,scribe:1,official:1},owner:"official",epoch:4,cat:"civic",requiresTech:"navigator_schooling",visual:{icon:"Navigation",color:"bg-cyan-900",text:"text-cyan-200"}},{id:"coffee_house",name:"",desc:"",baseCost:{plank:140,coffee:40},input:{coffee:.4},output:{culture:1,science:1},jobs:{merchant:1,scribe:2},owner:"merchant",epoch:5,cat:"civic",requiresTech:"coffeehouse_philosophy",visual:{icon:"Coffee",color:"bg-brown-900",text:"text-amber-200"}},{id:"rail_depot",name:"",desc:"",baseCost:{steel:180,coal:120},input:{coal:.4},output:{silver:1.5,maxPop:2},jobs:{engineer:2,merchant:2,capitalist:1},owner:"capitalist",epoch:6,cat:"civic",requiresTech:"rail_network",visual:{icon:"Train",color:"bg-gray-900",text:"text-gray-100"}},{id:"sawmill",name:"",desc:"",baseCost:{wood:75,stone:35},input:{wood:1.2},output:{plank:1.8},jobs:{worker:2,artisan:1},owner:"artisan",epoch:1,requiresTech:"tools",cat:"industry",visual:{icon:"Hammer",color:"bg-amber-900",text:"text-amber-300"},marketConfig:{price:{livingCostWeight:.2,taxCostWeight:.25},wage:{livingCostWeight:.1,taxCostWeight:.1}}},{id:"brickworks",name:"",desc:"",baseCost:{wood:140,stone:90},input:{stone:1,wood:.3},output:{brick:1.6},jobs:{artisan:2},owner:"artisan",epoch:0,cat:"industry",requiresTech:"pottery",visual:{icon:"Factory",color:"bg-red-900",text:"text-red-300"}},{id:"stone_tool_workshop",name:"",desc:"",baseCost:{wood:40,stone:25},input:{wood:1,stone:.8},output:{tools:.5},jobs:{artisan:2},owner:"artisan",epoch:0,cat:"industry",requiresTech:"tool_making",visual:{icon:"Hammer",color:"bg-stone-700",text:"text-stone-200"},marketConfig:{price:{livingCostWeight:.2,taxCostWeight:.25},wage:{livingCostWeight:.1,taxCostWeight:.1}}},{id:"bronze_foundry",name:"",desc:"",baseCost:{wood:140,stone:75,copper:35},input:{copper:.6,wood:.4},output:{tools:1},jobs:{artisan:3},owner:"artisan",epoch:1,cat:"industry",requiresTech:"bronze_working",visual:{icon:"Anvil",color:"bg-orange-800",text:"text-amber-200"},marketConfig:{price:{livingCostWeight:.3,taxCostWeight:.35},wage:{livingCostWeight:.2,taxCostWeight:.2}}},{id:"iron_tool_workshop",name:"",desc:"",baseCost:{plank:150,brick:80},input:{wood:.5,iron:.8},output:{tools:1.5},jobs:{artisan:3},owner:"artisan",epoch:2,cat:"industry",requiresTech:"ironworking",visual:{icon:"Cog",color:"bg-zinc-800",text:"text-zinc-200"},marketConfig:{price:{livingCostWeight:.3,taxCostWeight:.35},wage:{livingCostWeight:.2,taxCostWeight:.2}}},{id:"factory",name:"",desc:"",baseCost:{brick:400,steel:200},input:{steel:.2,coal:.2},output:{tools:1.2},jobs:{worker:10,engineer:2,capitalist:1},owner:"capitalist",epoch:6,requiresTech:"industrialization",cat:"industry",visual:{icon:"Factory",color:"bg-blue-900",text:"text-blue-200"}},{id:"printing_house",name:"",desc:"",baseCost:{brick:200,papyrus:80},input:{papyrus:.4,coffee:.1},output:{science:1.2},jobs:{artisan:2,scribe:2,capitalist:1},owner:"capitalist",epoch:5,cat:"industry",requiresTech:"printing_press",visual:{icon:"BookOpen",color:"bg-indigo-900",text:"text-indigo-200"}},{id:"steel_foundry",name:"",desc:"",baseCost:{brick:300,iron:200},input:{iron:.4,coal:.4},output:{steel:.4},jobs:{engineer:3,worker:4,capitalist:1},owner:"capitalist",epoch:6,cat:"industry",requiresTech:"steel_alloys",visual:{icon:"Cog",color:"bg-gray-900",text:"text-gray-200"}},{id:"library",name:"",desc:"",baseCost:{wood:200,stone:60},output:{science:.8},jobs:{scribe:3},owner:"scribe",epoch:0,cat:"civic",visual:{icon:"Landmark",color:"bg-cyan-800",text:"text-cyan-200"}},{id:"market",name:"",desc:"",baseCost:{plank:100},input:{brick:.05},output:{food:2},jobs:{merchant:2},owner:"merchant",epoch:1,requiresTech:"caravan_trade",cat:"civic",visual:{icon:"Handshake",color:"bg-yellow-800",text:"text-yellow-200"}},{id:"dockyard",name:"",desc:"",baseCost:{plank:200,tools:40},input:{wood:.5},output:{spice:.35},jobs:{navigator:2,worker:2,merchant:1},owner:"merchant",epoch:4,cat:"industry",requiresTech:"cartography",visual:{icon:"Anchor",color:"bg-sky-900",text:"text-sky-200"}},{id:"trade_port",name:"",desc:"",baseCost:{plank:220,spice:60},input:{spice:.3},output:{food:2},jobs:{merchant:3},owner:"merchant",epoch:4,cat:"civic",requiresTech:"charter_companies",visual:{icon:"Ship",color:"bg-indigo-900",text:"text-indigo-200"}},{id:"barracks",name:"",desc:"",baseCost:{wood:80,stone:40},output:{militaryCapacity:10},epoch:0,cat:"military",visual:{icon:"Shield",color:"bg-red-900",text:"text-red-200"}},{id:"training_ground",name:"",desc:"",baseCost:{plank:150,brick:80,iron:30},output:{militaryCapacity:20},epoch:2,cat:"military",requiresTech:"military_training",visual:{icon:"Swords",color:"bg-red-800",text:"text-red-100"}},{id:"fortress",name:"",desc:"",baseCost:{brick:300,iron:150,steel:50},output:{militaryCapacity:40},epoch:4,cat:"military",requiresTech:"fortification",visual:{icon:"Castle",color:"bg-red-950",text:"text-red-100"}}],fr=[{id:"barter",name:"",desc:"",cost:{science:50},epoch:0},{id:"stone_axes",name:"",desc:" 25%",cost:{science:50},epoch:0,effects:{buildings:{lumber_camp:.25}}},{id:"flint_knapping",name:"",desc:" 25%",cost:{science:70},epoch:0,effects:{buildings:{quarry:.25}}},{id:"animal_husbandry",name:"",desc:" 20 ",cost:{science:80},epoch:0,effects:{passive:{food:20}}},{id:"pottery",name:"",desc:" +10%",cost:{science:100},epoch:0,effects:{buildings:{farm:.1}}},{id:"tool_making",name:"",desc:"",cost:{science:90},epoch:0},{id:"basic_irrigation",name:"",desc:" 15%",cost:{science:120},epoch:0,effects:{buildings:{farm:.15}}},{id:"oral_tradition",name:"",desc:" 15%",cost:{science:110},epoch:0,effects:{buildings:{library:.15}}},{id:"communal_granary",name:"",desc:" +10",cost:{science:130},epoch:0,effects:{maxPop:10}},{id:"river_fishing",name:"",desc:" 10  0.2 ",cost:{science:150},epoch:0,effects:{passive:{food:10,silver:.2}}},{id:"wheel",name:"",desc:" +20%",cost:{science:160},epoch:0,effects:{categories:{gather:.2}}},{id:"tools",name:"",desc:" +5%",cost:{science:250},epoch:1,effects:{categories:{industry:.05}}},{id:"copper_mining",name:"",desc:" +25%",cost:{science:280},epoch:1,effects:{buildings:{copper_mine:.25}}},{id:"bronze_working",name:"",desc:" +30% +15%",cost:{science:320},epoch:1,effects:{buildings:{bronze_foundry:.3,mine:.15}}},{id:"horse_collar",name:"",desc:" 10%",cost:{science:260},epoch:1,effects:{buildings:{farm:.1,large_estate:.1}}},{id:"caravan_trade",name:"",desc:" +35%",cost:{science:300},epoch:1,effects:{buildings:{market:.35}}},{id:"granary_architecture",name:"",desc:" +25% +5 ",cost:{science:320},epoch:1,effects:{buildings:{granary:.25},maxPop:5}},{id:"ritual_priesthood",name:"",desc:" 15%",cost:{science:340},epoch:3,effects:{buildings:{church:.15}}},{id:"papyrus_cultivation",name:"",desc:" +20%",cost:{science:450},epoch:2,effects:{buildings:{reed_works:.2}}},{id:"culinary_arts",name:"",desc:"",cost:{science:480},epoch:2,effects:{buildings:{culinary_kitchen:.2}}},{id:"brewing",name:"",desc:"",cost:{science:460},epoch:2,effects:{buildings:{brewery:.2}}},{id:"carpentry",name:"",desc:"",cost:{science:500},epoch:2,effects:{buildings:{furniture_workshop:.2}}},{id:"library_catalogs",name:"",desc:" +25%",cost:{science:470},epoch:2,effects:{buildings:{library:.25}}},{id:"amphitheater_design",name:"",desc:" +30%",cost:{science:490},epoch:1,effects:{buildings:{amphitheater:.3}}},{id:"urban_planning",name:"",desc:" +20% +10",cost:{science:520},epoch:2,effects:{buildings:{house:.2},maxPop:10}},{id:"republican_code",name:"",desc:"",cost:{science:560},epoch:2,effects:{}},{id:"road_system",name:"",desc:" +10%",cost:{science:600},epoch:2,effects:{categories:{gather:.1}}},{id:"feudalism",name:"",desc:" +15%",cost:{science:1e3},epoch:3,effects:{buildings:{large_estate:.15}}},{id:"theology",name:"",desc:" +30%",cost:{science:1100},epoch:3,effects:{buildings:{church:.3}}},{id:"bureaucracy",name:"",desc:"",cost:{science:1200},epoch:3,effects:{}},{id:"three_field_system",name:"",desc:" +15% ",cost:{science:1100},epoch:3,effects:{buildings:{farm:.15,large_estate:.15}}},{id:"stone_keep_engineering",name:"",desc:" 10%",cost:{science:1150},epoch:3,effects:{buildings:{hut:.1,house:.1}}},{id:"ironworking",name:"",desc:" +30%",cost:{science:1500},epoch:2,effects:{buildings:{mine:.3}}},{id:"cartography",name:"",desc:" +25%",cost:{science:1800},epoch:4,effects:{buildings:{dockyard:.25}}},{id:"charter_companies",name:"",desc:" +30% +1 ",cost:{science:1900},epoch:4,effects:{buildings:{trade_port:.3},passive:{silver:1}}},{id:"navigator_schooling",name:"",desc:" 30%",cost:{science:2e3},epoch:4,effects:{buildings:{navigator_school:.3}}},{id:"naval_artillery",name:"",desc:" 15% ",cost:{science:2100},epoch:4,effects:{buildings:{dockyard:.15}}},{id:"colonial_ledgers",name:"",desc:"",cost:{science:2200},epoch:4,effects:{}},{id:"spice_monopolies",name:"",desc:" 15% ",cost:{science:2300},epoch:4,effects:{buildings:{trade_port:.15}}},{id:"coffee_agronomy",name:"",desc:" +30%",cost:{science:3200},epoch:5,effects:{buildings:{coffee_plantation:.3}}},{id:"coffeehouse_philosophy",name:"",desc:" +35% +0.4 ",cost:{science:3400},epoch:5,effects:{buildings:{coffee_house:.35},passive:{culture:.4}}},{id:"printing_press",name:"",desc:" 35% ",cost:{science:3600},epoch:5,effects:{buildings:{printing_house:.35}}},{id:"public_schooling",name:"",desc:" +25%  +0.2 ",cost:{science:3800},epoch:5,effects:{buildings:{library:.25},passive:{culture:.2}}},{id:"social_contract",name:"",desc:"",cost:{science:4e3},epoch:5,effects:{}},{id:"salon_debates",name:"",desc:" 15%",cost:{science:4200},epoch:5,effects:{buildings:{amphitheater:.15}}},{id:"coal_gasification",name:"",desc:" +30%",cost:{science:5200},epoch:6,effects:{buildings:{coal_mine:.3}}},{id:"steel_alloys",name:"",desc:" +30%",cost:{science:5400},epoch:6,effects:{buildings:{steel_foundry:.3}}},{id:"industrialization",name:"",desc:" +10%",cost:{science:6e3},epoch:6,effects:{categories:{industry:.1}}},{id:"steam_power",name:"",desc:" +20% ",cost:{science:6400},epoch:6,effects:{categories:{industry:.2}}},{id:"chemical_fertilizer",name:"",desc:" +20% ",cost:{science:6e3},epoch:6,effects:{buildings:{farm:.2,large_estate:.2}}},{id:"rail_network",name:"",desc:" +30% +10%",cost:{science:6200},epoch:6,effects:{buildings:{rail_depot:.3},categories:{gather:.1}}},{id:"precision_tools",name:"",desc:" +25%",cost:{science:6400},epoch:6,effects:{buildings:{factory:.25}}},{id:"military_training",name:"",desc:"",cost:{science:800},epoch:2},{id:"fortification",name:"",desc:"",cost:{science:2400},epoch:4}],X0=[{id:"emergency_rationing",name:"",desc:" -30% -15 -20",category:"social",unlockEpoch:0,cost:{},effects:[" -30%"],drawbacks:[" -15"," -20"],modifiers:{needsReduction:.3,stability:-.15,classApproval:{all:-20}},active:!1},{id:"clan_mobilization",name:"",desc:" +50% -30%",category:"economy",unlockEpoch:0,cost:{},effects:[" +50% "],drawbacks:[" -30%",""],modifiers:{categories:{gather:.5,industry:-.3},scienceBonus:-1},active:!1},{id:"theocracy",name:"",desc:" +40% +20 -30%",category:"culture",unlockEpoch:1,cost:{},effects:[" +40%"," +20"],drawbacks:[" -30%"],modifiers:{cultureBonus:.4,stability:.2,scienceBonus:-.3},active:!1},{id:"overtime_work",name:"",desc:" +40%/ -30 -10%",category:"economy",unlockEpoch:2,cost:{},effects:[" +40%"],drawbacks:["/ -30"," -10%"],modifiers:{categories:{industry:.4},classApproval:{worker:-30,artisan:-30},maxPop:-.1},active:!1},{id:"currency_devaluation",name:"",desc:" +50% -10",category:"economy",unlockEpoch:3,cost:{},effects:[" +50%"],drawbacks:[""," -10"],modifiers:{tradeIncome:.5,stability:-.1},active:!1},{id:"praetorian_guard",name:"",desc:" +30% 10 ",category:"military",unlockEpoch:3,cost:{},effects:[" +30%"],drawbacks:[" -10 "],modifiers:{militaryBonus:.3,passive:{silver:-10}},active:!1}],sh=[{id:"stone_clan",name:"",type:"",color:"text-amber-400",desc:"",appearEpoch:0,expireEpoch:1,marketVolatility:.45,aggression:.65,wealth:350,economyTraits:{resourceBias:{food:1.3,wood:1.1,stone:.8}}},{id:"dawn_tribe",name:"",type:"",color:"text-emerald-400",desc:"",appearEpoch:0,expireEpoch:2,marketVolatility:.25,aggression:.2,wealth:420,economyTraits:{resourceBias:{food:1.4,wood:.9,plank:.7,culture:.5}}},{id:"saffron_city",name:"",type:"",color:"text-orange-300",desc:"",appearEpoch:1,expireEpoch:3,marketVolatility:.33,aggression:.45,wealth:900,economyTraits:{resourceBias:{copper:1.5,brick:1.2,spice:1.2,wood:.8}}},{id:"marble_league",name:"",type:"",color:"text-blue-300",desc:"",appearEpoch:2,expireEpoch:4,marketVolatility:.28,aggression:.35,wealth:1400,economyTraits:{resourceBias:{papyrus:1.5,culture:1.6,stone:1.1,silver:.9}}},{id:"high_kingdom",name:"",type:"",color:"text-red-400",desc:"",appearEpoch:3,expireEpoch:4,marketVolatility:.34,aggression:.6,wealth:1600,economyTraits:{resourceBias:{food:1.3,iron:1.4,tools:1.1,culture:.8}}},{id:"sunset_armada",name:"",type:"",color:"text-amber-500",desc:"",appearEpoch:4,expireEpoch:5,marketVolatility:.37,aggression:.55,wealth:1900,economyTraits:{resourceBias:{spice:1.7,plank:1.3,tools:1.2,silver:1.1}}},{id:"lumiere_republic",name:"",type:"",color:"text-purple-300",desc:"",appearEpoch:5,expireEpoch:6,marketVolatility:.26,aggression:.3,wealth:2100,economyTraits:{resourceBias:{coffee:1.5,culture:1.7,papyrus:1.3,science:1.4}}},{id:"industrial_consortium",name:"",type:"",color:"text-orange-400",desc:"",appearEpoch:6,expireEpoch:7,marketVolatility:.24,aggression:.45,wealth:2600,economyTraits:{resourceBias:{coal:1.6,steel:1.5,tools:1.4,silver:1.2}}},{id:"steppe_horde",name:"",type:"",color:"text-yellow-300",desc:"",appearEpoch:2,expireEpoch:4,marketVolatility:.42,aggression:.75,wealth:1200,culturalTraits:{militaryFocus:!0,tradingStyle:"aggressive",diplomaticModifier:-.1},economyTraits:{resourceBias:{food:1.5,iron:1.2,tools:.9,culture:.6}},specialAbilities:[{type:"raid_bonus",value:.3,desc:" +30%"},{type:"cavalry_discount",value:.2,desc:" -20%"}]},{id:"desert_caravan",name:"",type:"",color:"text-amber-200",desc:"",appearEpoch:2,expireEpoch:5,marketVolatility:.22,aggression:.25,wealth:1800,culturalTraits:{tradingStyle:"merchant",diplomaticModifier:.15,marketExpertise:!0},economyTraits:{resourceBias:{spice:2,silver:1.4,culture:1.2,food:.7}},specialAbilities:[{type:"trade_bonus",value:.25,desc:" +25%"},{type:"market_stability",value:.15,desc:" -15%"}]},{id:"jungle_empire",name:"",type:"",color:"text-green-400",desc:"",appearEpoch:1,expireEpoch:4,marketVolatility:.35,aggression:.4,wealth:1100,culturalTraits:{religiousFocus:!0,scientificAdvancement:.2,isolationist:!0},economyTraits:{resourceBias:{culture:1.8,science:1.5,papyrus:1.3,stone:1.2}},specialAbilities:[{type:"culture_bonus",value:.2,desc:" +20%"},{type:"science_bonus",value:.15,desc:" +15%"}]},{id:"mountain_clans",name:"",type:"",color:"text-slate-300",desc:"",appearEpoch:1,expireEpoch:3,marketVolatility:.38,aggression:.5,wealth:800,culturalTraits:{defensiveFocus:!0,miningExpertise:!0,isolationist:!0},economyTraits:{resourceBias:{stone:1.8,iron:1.6,copper:1.4,food:.8}},specialAbilities:[{type:"mining_bonus",value:.25,desc:" +25%"},{type:"defense_bonus",value:.3,desc:" +30%"}]},{id:"river_confederation",name:"",type:"",color:"text-cyan-400",desc:"",appearEpoch:1,expireEpoch:3,marketVolatility:.28,aggression:.3,wealth:1e3,culturalTraits:{agriculturalFocus:!0,engineeringAdvanced:!0,peacefulTrade:!0},economyTraits:{resourceBias:{food:2,papyrus:1.4,brick:1.2,culture:1.1}},specialAbilities:[{type:"food_production",value:.3,desc:" +30%"},{type:"population_growth",value:.15,desc:" +15%"}]},{id:"island_thalassocracy",name:"",type:"",color:"text-teal-300",desc:"",appearEpoch:3,expireEpoch:5,marketVolatility:.32,aggression:.4,wealth:1700,culturalTraits:{navalSupremacy:!0,tradingStyle:"maritime",explorationBonus:.25},economyTraits:{resourceBias:{plank:1.6,spice:1.5,tools:1.3,silver:1.2}},specialAbilities:[{type:"naval_bonus",value:.35,desc:" +35%"},{type:"trade_route",value:.2,desc:" +20%"}]},{id:"northern_principality",name:"",type:"",color:"text-blue-200",desc:"",appearEpoch:3,expireEpoch:5,marketVolatility:.36,aggression:.55,wealth:1400,culturalTraits:{militaryTradition:!0,resourcefulSurvival:!0,honorCode:!0},economyTraits:{resourceBias:{wood:1.7,plank:1.5,iron:1.3,food:.9}},specialAbilities:[{type:"winter_warfare",value:.25,desc:" +25%"},{type:"lumber_efficiency",value:.2,desc:" +20%"}]},{id:"silk_empire",name:"",type:"",color:"text-rose-300",desc:"",appearEpoch:2,expireEpoch:6,marketVolatility:.25,aggression:.35,wealth:2200,culturalTraits:{culturalHegemony:!0,bureaucraticEfficiency:.2,tradingStyle:"monopolistic"},economyTraits:{resourceBias:{culture:2,papyrus:1.6,silver:1.4,science:1.3}},specialAbilities:[{type:"culture_influence",value:.3,desc:" +30%"}]},{id:"nomad_confederation",name:"",type:"",color:"text-orange-200",desc:"",appearEpoch:1,expireEpoch:3,marketVolatility:.48,aggression:.7,wealth:700,culturalTraits:{mobilityFocus:!0,raidingCulture:!0,adaptability:.25},economyTraits:{resourceBias:{food:1.4,wood:1.1,tools:.9,culture:.7}},specialAbilities:[{type:"mobility_bonus",value:.4,desc:" +40%"},{type:"raid_frequency",value:.3,desc:" +30%"}]},{id:"theocratic_order",name:"",type:"",color:"text-yellow-100",desc:"",appearEpoch:3,expireEpoch:5,marketVolatility:.31,aggression:.65,wealth:1500,culturalTraits:{religiousFervor:!0,militaryDiscipline:.25,missionaryZeal:!0},economyTraits:{resourceBias:{culture:1.6,iron:1.4,tools:1.3,silver:1.2}},specialAbilities:[{type:"holy_war",value:.3,desc:" +30%"},{type:"morale_bonus",value:.25,desc:" +25%"}]},{id:"merchant_republic",name:"",type:"",color:"text-emerald-300",desc:"",appearEpoch:4,expireEpoch:6,marketVolatility:.2,aggression:.25,wealth:2400,culturalTraits:{financialExpertise:!0,tradingStyle:"capitalist",diplomaticModifier:.2},economyTraits:{resourceBias:{silver:1.8,culture:1.4,science:1.3,spice:1.2}},specialAbilities:[{type:"banking_system",value:.25,desc:" +25%"},{type:"trade_network",value:.3,desc:" +30%"}]},{id:"revolutionary_state",name:"",type:"",color:"text-red-300",desc:"",appearEpoch:5,expireEpoch:7,marketVolatility:.4,aggression:.6,wealth:1900,culturalTraits:{revolutionaryZeal:!0,massConscription:.3,ideologicalExport:!0},economyTraits:{resourceBias:{culture:1.5,science:1.4,iron:1.3,food:1.2}},specialAbilities:[{type:"conscription",value:.35,desc:" +35%"},{type:"revolutionary_fervor",value:.2,desc:" +20%"}]}],op=(l,c)=>{const m={0:{light:["militia","slinger"],medium:["militia","slinger"],heavy:["militia","slinger"]},1:{light:["militia","slinger","spearman"],medium:["spearman","archer","light_cavalry"],heavy:["spearman","archer","light_cavalry","swordsman"]},2:{light:["spearman","archer","light_cavalry"],medium:["heavy_infantry","crossbowman","knight"],heavy:["heavy_infantry","crossbowman","knight","swordsman"]},3:{light:["heavy_infantry","crossbowman","knight"],medium:["heavy_infantry","crossbowman","knight"],heavy:["heavy_infantry","crossbowman","knight"]},4:{light:["musketeer","dragoon"],medium:["musketeer","dragoon","cannon"],heavy:["musketeer","dragoon","cannon"]},5:{light:["rifleman","modern_infantry"],medium:["rifleman","modern_infantry","tank"],heavy:["rifleman","modern_infantry","tank","artillery"]},6:{light:["modern_infantry","tank"],medium:["modern_infantry","tank","modern_artillery"],heavy:["modern_infantry","tank","modern_artillery"]}},o=m[Math.min(l,6)]||m[0];return o[c]||o.medium},dp=[{id:"raid",name:"",desc:"",difficulty:"",difficultyLevel:1,unitScale:"light",baseUnitCount:{min:6,max:10},enemyUnits:[],loot:{food:[40,120],wood:[20,60],silver:[60,140]},influence:{win:5,lose:-4},winScore:8,loseScore:6,wealthDamage:15},{id:"assault",name:"",desc:"",difficulty:"",difficultyLevel:2,unitScale:"medium",baseUnitCount:{min:12,max:18},enemyUnits:[],loot:{food:[60,160],iron:[20,50],silver:[150,240]},influence:{win:10,lose:-6},winScore:15,loseScore:10,wealthDamage:30},{id:"siege",name:"",desc:"",difficulty:"",difficultyLevel:3,unitScale:"heavy",baseUnitCount:{min:15,max:25},enemyUnits:[],loot:{food:[80,180],wood:[40,100],tools:[10,25],silver:[200,320]},influence:{win:14,lose:-10},winScore:22,loseScore:14,wealthDamage:45}],nh=[{id:"welcome",title:"",icon:"Globe",iconColor:"text-blue-400",lead:"",paragraphs:["",'""'],callouts:[{tone:"info",icon:"Lightbulb",title:"",text:""}]},{id:"market_economy",title:"",icon:"TrendingUp",iconColor:"text-emerald-400",lead:"",paragraphs:['""'],cards:[{icon:"Coins",iconColor:"text-yellow-400",title:"",text:""},{icon:"BarChart",iconColor:"text-blue-400",title:"",text:""},{icon:"ArrowUpCircle",iconColor:"text-emerald-400",title:"",text:""}],callouts:[{tone:"tip",icon:"Lightbulb",title:"",text:'""  '}]},{id:"resources",title:"",icon:"Package",iconColor:"text-yellow-400",paragraphs:[""],cards:[{icon:"Wheat",iconColor:"text-yellow-400",title:"",text:""},{icon:"Factory",iconColor:"text-blue-400",title:"",text:""},{icon:"Pickaxe",iconColor:"text-emerald-400",title:"",text:""}]},{id:"population",title:"",icon:"Users",iconColor:"text-blue-400",lead:"",paragraphs:[""],cards:[{icon:"Wheat",iconColor:"text-yellow-400",title:"",text:""},{icon:"Home",iconColor:"text-blue-400",title:"",text:""},{icon:"Users",iconColor:"text-purple-400",title:"",text:'""'},{icon:"Heart",iconColor:"text-red-400",title:"",text:""}]},{id:"technology",title:"",icon:"Cpu",iconColor:"text-purple-400",lead:"",paragraphs:[""],cards:[{icon:"BookOpen",iconColor:"text-blue-400",title:"",text:""},{icon:"TrendingUp",iconColor:"text-yellow-400",title:"",text:""},{icon:"Zap",iconColor:"text-purple-400",title:"",text:""}]},{id:"trade_diplomacy",title:"",icon:"Globe",iconColor:"text-cyan-400",lead:"",paragraphs:[""],cards:[{icon:"Handshake",iconColor:"text-emerald-400",title:"",text:""},{icon:"Flag",iconColor:"text-blue-400",title:"",text:""},{icon:"Swords",iconColor:"text-red-400",title:"",text:""}],callouts:[{tone:"tip",icon:"Lightbulb",title:"",text:""}]},{id:"government",title:"",icon:"Gavel",iconColor:"text-amber-400",lead:"",paragraphs:[""],cards:[{icon:"Scale",iconColor:"text-blue-400",title:"",text:""},{icon:"Gavel",iconColor:"text-amber-400",title:"",text:""},{icon:"AlertTriangle",iconColor:"text-red-400",title:"",text:""}],callouts:[{tone:"warning",icon:"AlertTriangle",title:"",text:'"" '}]},{id:"autosave",title:"",icon:"Save",iconColor:"text-emerald-400",paragraphs:["",""],cards:[{icon:"Clock",iconColor:"text-emerald-300",title:"",text:""},{icon:"Save",iconColor:"text-green-200",title:"",text:""},{icon:"Download",iconColor:"text-purple-300",title:"",text:""}],callouts:[{tone:"warning",icon:"AlertTriangle",title:"",text:""}]},{id:"journey",title:"",icon:"Sparkles",iconColor:"text-yellow-400",lead:"",paragraphs:[""," "," "," "," "," "],callouts:[{tone:"success",icon:"Check",title:"",text:""},{tone:"info",icon:"Gift",title:"",text:" 2 "},{tone:"tip",icon:"MessageSquare",title:"",text:""}],wikiPrompt:{text:"",buttonLabel:""},footerNote:""}],up=[{id:"plague_outbreak",name:"",icon:"AlertTriangle",image:null,description:"",triggerConditions:{minPopulation:500,minEpoch:1},options:[{id:"quarantine",text:"",description:"",effects:{resources:{food:-100,silver:-50},population:-50,stability:-5,approval:{peasant:-10,merchant:-15}}},{id:"pray",text:"",description:"",effects:{resources:{silver:-20},population:-100,stability:5,approval:{peasant:10,clergy:15}}},{id:"ignore",text:"",description:"",effects:{population:-200,stability:-15,approval:{peasant:-20,merchant:-15}}}]},{id:"merchant_caravan",name:"",icon:"Users",image:null,description:"",triggerConditions:{minEpoch:1},options:[{id:"trade",text:"",description:"",effects:{resources:{silver:-100,delicacies:50,furniture:50,fine_clothes:50,tools:30},approval:{merchant:15}}},{id:"tax",text:"",description:"",effects:{resources:{silver:50},approval:{merchant:-10}}},{id:"refuse",text:"",description:"",effects:{stability:-3,approval:{merchant:-15,peasant:-5}}}]},{id:"good_harvest",name:"",icon:"Sun",image:null,description:"",triggerConditions:{minEpoch:0},options:[{id:"store",text:"",description:"",effects:{resources:{food:300},approval:{peasant:10}}},{id:"sell",text:"",description:"",effects:{resources:{food:100,silver:150},approval:{merchant:15,peasant:-5}}},{id:"celebrate",text:"",description:"",effects:{resources:{food:50,silver:-30},stability:10,approval:{peasant:20,merchant:5}}}]},{id:"technological_breakthrough",name:"",icon:"Lightbulb",image:null,description:"",triggerConditions:{minEpoch:2,minScience:100},options:[{id:"invest",text:"",description:"",effects:{resources:{silver:-200,tools:-50},science:50,approval:{artisan:20,merchant:10}}},{id:"gradual",text:"",description:"",effects:{resources:{silver:-50},science:20,approval:{artisan:10}}},{id:"monopoly",text:"",description:"",effects:{resources:{silver:100},science:10,stability:-5,approval:{artisan:-15,merchant:-10}}}]},{id:"natural_disaster",name:"",icon:"CloudRain",image:null,description:"",triggerConditions:{minPopulation:300},options:[{id:"relief",text:"",description:"",effects:{resources:{silver:-150,food:-100,wood:-100},stability:5,approval:{peasant:20,merchant:5}}},{id:"rebuild",text:"",description:"",effects:{resources:{silver:-100,wood:-150,stone:-100},approval:{peasant:15,artisan:10}}},{id:"minimal",text:"",description:"",effects:{resources:{food:-50},stability:-10,approval:{peasant:-15,merchant:-10}}}]},{id:"stone_age_hungry_peasants",name:"",icon:"Wheat",image:null,description:"",triggerConditions:{minEpoch:0,maxEpoch:0,classConditions:{peasant:{minPop:15,maxWealth:250,minApproval:0,maxApproval:55}}},options:[{id:"share_food",text:"",description:"",effects:{resources:{food:-120},stability:5,approval:{peasant:18}}},{id:"organize_hunt",text:"",description:"",effects:{resources:{food:60},stability:-3,approval:{peasant:8}}},{id:"ignore_hunger",text:"",description:"",effects:{stability:-8,approval:{peasant:-18}}}]},{id:"stone_age_elder_council",name:"",icon:"ScrollText",image:null,description:"",triggerConditions:{minEpoch:0,classConditions:{peasant:{minPop:10},cleric:{maxPop:2,maxApproval:70}}},options:[{id:"ritual_apology",text:"",description:"",effects:{stability:4,approval:{peasant:10,cleric:5}}},{id:"gift_to_elder",text:"",description:"",effects:{resources:{silver:-40},stability:2,approval:{peasant:-5,cleric:12}}},{id:"reject_council",text:"",description:"",effects:{stability:-6,approval:{peasant:-8,cleric:-6}}}]},{id:"bronze_age_miner_unrest",name:"",icon:"Pickaxe",image:null,description:"",triggerConditions:{minEpoch:1,classConditions:{miner:{minPop:12,maxApproval:55}}},options:[{id:"improve_safety",text:"",description:"",effects:{resources:{wood:-80,stone:-60},stability:6,approval:{miner:18,worker:5}}},{id:"raise_wage",text:"",description:"",effects:{resources:{silver:-120},stability:3,approval:{miner:15}}},{id:"crackdown_miner",text:"",description:"",effects:{stability:-10,approval:{miner:-20,soldier:8}}}]},{id:"bronze_age_merchant_boom",name:"",icon:"Coins",image:null,description:"",triggerConditions:{minEpoch:1,classConditions:{merchant:{minPop:3,minInfluenceShare:.18,minWealthShare:.18}}},options:[{id:"support_merchant",text:"",description:"",effects:{resources:{silver:200},stability:-3,approval:{merchant:20,peasant:-6}}},{id:"tax_merchant",text:"",description:"",effects:{resources:{silver:120},stability:1,approval:{merchant:-10,peasant:4}}},{id:"protect_peasant",text:"",description:"",effects:{stability:4,approval:{merchant:-12,peasant:10}}}]},{id:"classical_scribe_salon",name:"",icon:"BookOpen",image:null,description:"",triggerConditions:{minEpoch:2,minScience:800,classConditions:{scribe:{minPop:4},scribe:{minInfluenceShare:.12,minApproval:60}}},options:[{id:"fund_academy",text:"",description:"",effects:{resources:{papyrus:-80,silver:-100,science:120},approval:{scribe:15}}},{id:"guide_public_opinion",text:"",description:"",effects:{stability:6,approval:{scribe:5,peasant:6}}},{id:"limit_discussion",text:"",description:"",effects:{stability:3,approval:{scribe:-12,landowner:8}}}]},{id:"classical_landowner_pressure",name:"",icon:"Castle",image:null,description:"",triggerConditions:{minEpoch:2,classConditions:{landowner:{minWealthShare:.25,minInfluenceShare:.2},peasant:{maxApproval:55}}},options:[{id:"grant_privileges",text:"",description:"",effects:{stability:4,approval:{landowner:18,peasant:-10,serf:-8}}},{id:"balance_reform",text:"",description:"",effects:{stability:-4,approval:{landowner:-12,peasant:12}}},{id:"stand_with_people",text:"",description:"",effects:{stability:-10,approval:{landowner:-22,peasant:20}}}]},{id:"feudal_knight_parade",name:"",icon:"Shield",image:null,description:"",triggerConditions:{minEpoch:3,classConditions:{knight:{minPop:3,minInfluenceShare:.15},soldier:{maxApproval:70}}},options:[{id:"hold_tournament",text:"",description:"",effects:{resources:{food:-150,silver:-120},stability:6,approval:{knight:15,soldier:8,peasant:4}}},{id:"praise_soldiers",text:"",description:"",effects:{stability:3,approval:{soldier:15,knight:-8}}},{id:"limit_knight_power",text:"",description:"",effects:{stability:-8,approval:{knight:-20,landowner:-10}}}]},{id:"feudal_cleric_scandal",name:"",icon:"Cross",image:null,description:"",triggerConditions:{minEpoch:3,classConditions:{cleric:{minWealthShare:.15,maxApproval:80}}},options:[{id:"reform_monastery",text:"",description:"",effects:{resources:{silver:150},stability:4,approval:{cleric:-10,peasant:8}}},{id:"cover_up",text:"",description:"",effects:{stability:-6,approval:{cleric:10,peasant:-12}}},{id:"tax_church",text:"",description:"",effects:{resources:{silver:80},stability:-2,approval:{cleric:-15,peasant:5}}}]},{id:"age_of_exploration_merchant_monopoly",name:"",icon:"Ship",image:null,description:"",triggerConditions:{minEpoch:4,classConditions:{merchant:{minInfluenceShare:.25,minWealthShare:.25}}},options:[{id:"charter_company",text:"",description:"",effects:{resources:{silver:250},stability:3,approval:{merchant:20,peasant:-8,worker:-6}}},{id:"break_monopoly",text:"",description:"",effects:{stability:-5,approval:{merchant:-15,peasant:8,worker:6}}},{id:"raise_tariff",text:"",description:"",effects:{resources:{silver:180},stability:-2,approval:{merchant:-10}}}]},{id:"age_of_exploration_colonial_unrest",name:"",icon:"Globe2",image:null,description:"",triggerConditions:{minEpoch:4,classConditions:{worker:{minPop:20,maxApproval:55},miner:{maxApproval:55}}},options:[{id:"send_commissioner",text:"",description:"",effects:{resources:{silver:-120},stability:5,approval:{worker:10,miner:10}}},{id:"use_force",text:"",description:"",effects:{stability:-12,approval:{worker:-20,miner:-20,soldier:10}}},{id:"cut_tax",text:"",description:"",effects:{resources:{silver:-80},stability:3,approval:{worker:8,miner:8,merchant:6}}}]},{id:"enlightenment_pamphlet_storm",name:"",icon:"FileText",image:null,description:"",triggerConditions:{minEpoch:5,classConditions:{scribe:{minPop:5},scribe:{minInfluenceShare:.18,minApproval:70}}},options:[{id:"allow_debate",text:"",description:"",effects:{resources:{science:160,culture:120},stability:-6,approval:{scribe:18,peasant:4}}},{id:"censor_print",text:"",description:"",effects:{stability:4,approval:{scribe:-12,cleric:8}}},{id:"coopt_scribes",text:"",description:"",effects:{resources:{silver:-150},stability:5,approval:{scribe:10,official:6}}}]},{id:"enlightenment_coffeehouse_circle",name:"",icon:"Coffee",image:null,description:"",triggerConditions:{minEpoch:5,classConditions:{merchant:{minInfluenceShare:.18},engineer:{minInfluenceShare:.12}}},options:[{id:"support_innovation_club",text:"",description:"",effects:{resources:{silver:-180,science:120},approval:{engineer:15,merchant:10}}},{id:"monitor_circle",text:"",description:"",effects:{stability:3,approval:{official:6,merchant:-6}}},{id:"tax_coffee",text:"",description:"",effects:{resources:{silver:90},approval:{merchant:-8,engineer:-5,peasant:3}}}]},{id:"industrial_general_strike",name:"",icon:"Hammer",image:null,description:"",triggerConditions:{minEpoch:6,classConditions:{worker:{minPop:30,maxApproval:50,maxWealthDelta:5}}},options:[{id:"agree_partial",text:"",description:"",effects:{resources:{silver:-250},stability:6,approval:{worker:20,capitalist:-8}}},{id:"bring_in_replacements",text:"",description:"",effects:{stability:-10,approval:{worker:-20,peasant:-6,capitalist:10}}},{id:"negotiate_commission",text:"",description:"",effects:{stability:4,approval:{worker:12,capitalist:-4,official:6}}}]},{id:"industrial_capitalist_boom",name:"",icon:"Briefcase",image:null,description:"",triggerConditions:{minEpoch:6,classConditions:{capitalist:{minWealthShare:.3,minInfluenceShare:.22,minWealthDelta:40}}},options:[{id:"encourage_investment",text:"",description:"",effects:{resources:{science:80},stability:4,approval:{capitalist:18,worker:-6}}},{id:"tax_windfall",text:"",description:"",effects:{resources:{silver:260},stability:-5,approval:{capitalist:-20,worker:10,peasant:6}}},{id:"fund_welfare",text:"",description:"",effects:{resources:{silver:-150},stability:8,approval:{worker:16,capitalist:4}}}]},{id:"comet_sighted",name:"",icon:"Sparkles",image:null,description:"",triggerConditions:{minEpoch:1},options:[{id:"divine_omen",text:"",description:"",effects:{stability:10,approval:{cleric:15,peasant:10,scribe:-10}}},{id:"scientific_phenomenon",text:"",description:"",effects:{resources:{science:150},approval:{scribe:15,cleric:-10}}},{id:"ignore_comet",text:"",description:"",effects:{stability:-5,approval:{peasant:-5}}}]},{id:"inventor_plea",name:"",icon:"Lightbulb",image:null,description:"",triggerConditions:{minEpoch:5,classConditions:{engineer:{minPop:5},capitalist:{minPop:2}}},options:[{id:"fund_invention",text:"",description:"",effects:{resources:{silver:-500,iron:-150,tools:-80,science:400},approval:{engineer:20,capitalist:15,scribe:10}}},{id:"limited_support",text:"",description:"",effects:{resources:{silver:-150,wood:-100,science:150},approval:{engineer:10,capitalist:5}}},{id:"reject_invention",text:"",description:"",effects:{approval:{engineer:-15,scribe:-5,capitalist:-5}}}]},{id:"great_flood",name:"",icon:"Waves",image:null,description:"",triggerConditions:{minPopulation:100},options:[{id:"organize_rescue",text:"",description:"",effects:{resources:{silver:-200,food:-150,wood:-100},population:-20,stability:10,approval:{peasant:25,official:10}}},{id:"build_dams",text:"",description:"",effects:{resources:{stone:-200,wood:-150},population:-50,stability:-5,approval:{peasant:-15,capitalist:10,landowner:5}}},{id:"let_it_be",text:"",description:"",effects:{population:-100,stability:-15,approval:{peasant:-30,cleric:-10}}}]},{id:"stone_age_new_water",name:"",icon:"Waves",image:null,description:"",triggerConditions:{minEpoch:0,maxEpoch:0,resources:{food:{max:100}}},options:[{id:"develop_water_source",text:"",description:"",effects:{resources:{wood:-30,food:80},maxPop:8,stability:5,approval:{peasant:12}}},{id:"secret_protection",text:"",description:"",effects:{resources:{food:20},stability:-3,approval:{peasant:-5,cleric:5}}},{id:"ignore_water_source",text:"",description:"",effects:{stability:-5,approval:{peasant:-8}}}]},{id:"stone_age_stranger_footprints",name:"",icon:"Users",image:null,description:"",triggerConditions:{minEpoch:0,maxEpoch:0,minPopulation:15},options:[{id:"ambush_expel",text:"",description:"",effects:{resources:{food:-20},approval:{soldier:10}},randomEffects:[{chance:.25,effects:{population:-1,stability:-5,approval:{peasant:-5}}}]},{id:"leave_gifts",text:"",description:"",effects:{resources:{food:-40,wood:-10},culture:20,stability:5,approval:{peasant:8,cleric:5}}},{id:"increase_patrol",text:"",description:"",effects:{resources:{food:-15},stability:-2,approval:{soldier:5}}}]},{id:"stone_age_harsh_winter",name:"",icon:"CloudRain",image:null,description:"",triggerConditions:{minEpoch:0,maxEpoch:0,minPopulation:20,resources:{food:{max:150}}},options:[{id:"distribute_rations",text:"",description:"",effects:{resources:{food:-150,wood:-80},population:-5,stability:10,approval:{peasant:15}}},{id:"encourage_hunting",text:"",description:"",effects:{population:-10,resources:{food:100},stability:-8,approval:{soldier:12,peasant:-15}}},{id:"sacrifice_weak",text:"",description:"",effects:{population:-20,stability:-20,approval:{peasant:-30,cleric:-15}}}]},{id:"stone_age_unexpected_discovery",name:"",icon:"Gem",image:null,description:"",triggerConditions:{minEpoch:0,maxEpoch:0,resources:{science:{max:50}}},options:[{id:"research_stones",text:"",description:"",effects:{resources:{wood:-15,science:60},stability:3,approval:{artisan:15,peasant:5}}},{id:"worship_stones",text:"",description:"",effects:{resources:{culture:40},stability:8,approval:{cleric:20,artisan:-8}}},{id:"disregard_stones",text:"",description:"",effects:{stability:-3,approval:{peasant:-5}}}]},{id:"stone_age_tribal_legend",name:"",icon:"BookOpen",image:null,description:"",triggerConditions:{minEpoch:0,maxEpoch:0,minPopulation:25,minStability:50,resources:{science:{max:100}}},options:[{id:"send_expedition",text:"",description:"",effects:{resources:{food:-60,science:100,culture:70},population:-5,stability:5,approval:{soldier:15}}},{id:"forbid_exploration",text:"",description:"",effects:{resources:{culture:-20},stability:3,approval:{soldier:-10,peasant:-5}}},{id:"encourage_legends",text:"",description:"",effects:{resources:{culture:80},stability:6,approval:{cleric:12,scribe:8}}}]},{id:"bronze_age_bronze_vein",name:"",icon:"Gem",image:null,description:"",triggerConditions:{minEpoch:1,maxEpoch:1,minPopulation:30},options:[{id:"immediate_mine",text:"",description:"",effects:{resources:{copper:150,iron:50,wood:-50},population:-5,stability:-5,approval:{miner:15,peasant:-8}}},{id:"research_mining",text:"",description:"",effects:{resources:{science:80,silver:-30},approval:{scribe:10,miner:5}}},{id:"secret_mine",text:"",description:"",effects:{resources:{copper:50,iron:20},stability:-3,approval:{peasant:-5}}}]},{id:"bronze_age_merchant_plea",name:"",icon:"Handshake",image:null,description:"",triggerConditions:{minEpoch:1,maxEpoch:1,minPopulation:40,classConditions:{merchant:{minPop:1}}},options:[{id:"send_escort",text:"",description:"",effects:{resources:{silver:100,food:-30},population:-2,stability:5,approval:{merchant:20,soldier:10}}},{id:"provide_aid",text:"",description:"",effects:{resources:{food:-50,wood:-20},stability:3,approval:{merchant:10,peasant:5}}},{id:"refuse_aid",text:"",description:"",effects:{stability:-5,approval:{merchant:-15,soldier:-5}}}]},{id:"bronze_age_drought",name:"",icon:"Droplets",image:null,description:"",triggerConditions:{minEpoch:1,maxEpoch:1,minPopulation:50,resources:{food:{max:200}}},options:[{id:"build_irrigation",text:"",description:"",effects:{resources:{wood:-80,stone:-40,food:50},stability:8,approval:{peasant:20,worker:10}}},{id:"intensive_hunt",text:"/",description:"",effects:{resources:{food:120},population:-8,stability:-5,approval:{peasant:-10,soldier:10}}},{id:"seek_tribute",text:"",description:"",effects:{resources:{food:150},stability:-10,approval:{soldier:15,peasant:-15}}}]},{id:"bronze_age_new_priest",name:"",icon:"Cross",image:null,description:"",triggerConditions:{minEpoch:1,maxEpoch:1,minPopulation:35,classConditions:{cleric:{minPop:1}}},options:[{id:"endorse_priest",text:"",description:"",effects:{resources:{culture:100},stability:10,approval:{cleric:20,peasant:15,scribe:-10}}},{id:"limit_power",text:"",description:"",effects:{stability:-5,approval:{cleric:-15,peasant:-5,landowner:5}}},{id:"challenge_divinity",text:"",description:"",effects:{resources:{science:50},stability:-15,approval:{cleric:-25,peasant:-20,scribe:15}}}]},{id:"bronze_age_skirmish",name:"",icon:"Swords",image:null,description:"",triggerConditions:{minEpoch:1,maxEpoch:1,minPopulation:60,classConditions:{soldier:{minPop:2}}},options:[{id:"declare_war",text:"",description:"",effects:{stability:-10,approval:{soldier:20,peasant:-10}}},{id:"send_emissary",text:"",description:"",effects:{resources:{silver:-50,food:-30},stability:5,approval:{merchant:10,peasant:8}}},{id:"fortify_border",text:"",description:"",effects:{resources:{wood:-100,stone:-50},stability:-3,approval:{soldier:5,peasant:-5}}}]},{id:"classical_philosopher_challenge",name:"",icon:"BookOpen",image:null,description:"",triggerConditions:{minEpoch:2,maxEpoch:2,minPopulation:80,classConditions:{scribe:{minPop:2},cleric:{minPop:2}}},options:[{id:"embrace_philosophy",text:"",description:"",effects:{resources:{science:250,culture:150},approval:{scribe:20,cleric:-15,peasant:-5}}},{id:"public_debate",text:"",description:"",effects:{resources:{science:100,culture:80},stability:-8,approval:{scribe:10,cleric:-5}}},{id:"exile_philosopher",text:"",description:"",effects:{stability:5,approval:{cleric:15,landowner:10,scribe:-25}}}]},{id:"classical_written_law",name:"",icon:"Gavel",image:null,description:"",triggerConditions:{minEpoch:2,maxEpoch:2,minPopulation:120,classConditions:{official:{minPop:3},merchant:{minPop:5}}},options:[{id:"establish_just_code",text:"",description:"",effects:{resources:{silver:-150,papyrus:-50},stability:15,approval:{official:15,merchant:10,peasant:5,landowner:-10}}},{id:"favor_elite_code",text:"",description:"",effects:{resources:{silver:-80},stability:-5,approval:{landowner:20,official:5,merchant:-15,peasant:-10}}},{id:"maintain_oral_tradition",text:"",description:"",effects:{stability:-10,approval:{official:-5,merchant:-10,peasant:-5}}}]},{id:"classical_artistic_patronage",name:"",icon:"Palette",image:null,description:"",triggerConditions:{minEpoch:2,maxEpoch:2,buildingConditions:{amphitheater:{min:1}}},options:[{id:"fund_grand_performance",text:"",description:"",effects:{resources:{silver:-200,culture:200},stability:8,approval:{cleric:15,scribe:10,peasant:5}}},{id:"offer_limited_support",text:"",description:"",effects:{resources:{silver:-80,culture:80},approval:{cleric:5,scribe:5}}},{id:"dismiss_as_frivolous",text:"",description:"",effects:{resources:{culture:-50},approval:{scribe:-10,cleric:-5}}}]},{id:"classical_aqueduct_proposal",name:"",icon:"Waves",image:null,description:"",triggerConditions:{minEpoch:2,maxEpoch:2,minPopulation:150},options:[{id:"build_aqueduct",text:"",description:"",effects:{resources:{silver:-400,stone:-300,brick:-150},maxPop:25,stability:15,approval:{peasant:20,worker:15,official:10}}},{id:"build_smaller_version",text:"",description:"",effects:{resources:{silver:-150,stone:-120},maxPop:10,stability:5,approval:{peasant:8,worker:5}}},{id:"dig_more_wells",text:"",description:"",effects:{resources:{wood:-50},stability:-5,approval:{peasant:-5,scribe:-8}}}]},{id:"feudal_guild_charter",name:"",icon:"Gavel",image:null,description:"",triggerConditions:{minEpoch:3,maxEpoch:3,classConditions:{artisan:{minPop:10,minInfluenceShare:.1},merchant:{minPop:5}}},options:[{id:"grant_charter",text:"",description:"",effects:{resources:{culture:120},stability:5,approval:{artisan:20,merchant:-10}}},{id:"regulate_guilds",text:"",description:"",effects:{resources:{silver:80},stability:-3,approval:{artisan:-8,official:10}}},{id:"suppress_guilds",text:"",description:"",effects:{stability:-8,approval:{artisan:-25,merchant:15}}}]},{id:"feudal_crusade_call",name:"",icon:"Cross",image:null,description:"",triggerConditions:{minEpoch:3,maxEpoch:3,classConditions:{knight:{minPop:2},cleric:{minPop:3}}},options:[{id:"fund_crusade",text:"",description:"",effects:{resources:{silver:-300,food:-200},population:-15,approval:{knight:25,cleric:20,merchant:-15}}},{id:"offer_prayers",text:"",description:"",effects:{stability:-5,approval:{cleric:10,knight:-10}}},{id:"denounce_call",text:"",description:"",effects:{stability:-10,approval:{cleric:-20,knight:-15,merchant:15,scribe:10}}}]},{id:"feudal_levy_dispute",name:"",icon:"ShieldAlert",image:null,description:"",triggerConditions:{minEpoch:3,maxEpoch:3,classConditions:{landowner:{minPop:3,minInfluenceShare:.15},knight:{minPop:1}}},options:[{id:"force_compliance",text:"",description:"",effects:{stability:-15,approval:{landowner:-25,soldier:15,official:10}}},{id:"accept_scutage",text:"",description:"",effects:{resources:{silver:250},stability:-5,approval:{landowner:15,knight:-10}}},{id:"forgive_levy",text:"",description:"",effects:{stability:5,approval:{landowner:20,knight:-15,official:-10}}}]},{id:"feudal_university_founding",name:"",icon:"Landmark",image:null,description:"",triggerConditions:{minEpoch:3,maxEpoch:3,minPopulation:200,classConditions:{scribe:{minPop:5},cleric:{minPop:5}}},options:[{id:"grant_university_charter",text:"",description:"",effects:{resources:{silver:-250,science:300,culture:200},approval:{scribe:25,cleric:15,landowner:-10}}},{id:"church_control",text:"",description:"",effects:{resources:{culture:150},stability:5,approval:{cleric:20,scribe:-15,landowner:5}}},{id:"reject_university",text:"",description:"",effects:{approval:{scribe:-20,cleric:-10}}}]},{id:"feudal_plague_doctor",name:"",icon:"Heart",image:null,description:"",triggerConditions:{minEpoch:3,maxEpoch:4,minPopulation:150},options:[{id:"hire_doctor",text:"",description:"",effects:{resources:{silver:-100,science:80},population:10,stability:5,approval:{peasant:15,cleric:-10}}},{id:"let_him_practice",text:"",description:"",effects:{population:5,stability:-3,approval:{peasant:5,merchant:5}}},{id:"expel_as_charlatan",text:"",description:"",effects:{population:-10,stability:-8,approval:{peasant:-15,cleric:15}}}]},{id:"exploration_new_world",name:"",icon:"Globe",image:null,description:"",triggerConditions:{minEpoch:4,maxEpoch:4,classConditions:{navigator:{minPop:3}}},options:[{id:"fund_colonial_expedition",text:"",description:"",effects:{resources:{silver:-500,food:-300,plank:-200,tools:-100},population:-20,approval:{navigator:25,merchant:20,soldier:15}}},{id:"establish_trading_post",text:"",description:"",effects:{resources:{silver:-200,plank:-80},population:-5,approval:{navigator:15,merchant:15}}},{id:"sell_maps",text:"",description:"",effects:{resources:{silver:400},approval:{navigator:-25,merchant:-10}}}]},{id:"exploration_renaissance_artist",name:"",icon:"Palette",image:null,description:"",triggerConditions:{minEpoch:4,maxEpoch:5,classConditions:{scribe:{minPop:8},artisan:{minPop:10}}},options:[{id:"patronize_masterpiece",text:"",description:"",effects:{resources:{silver:-400,culture:350,science:150},stability:10,approval:{scribe:20,artisan:15,cleric:10}}},{id:"modest_commission",text:"",description:"",effects:{resources:{silver:-120,culture:100},approval:{scribe:8,artisan:5}}},{id:"dismiss_artist",text:"",description:"",effects:{approval:{scribe:-15,artisan:-10}}}]},{id:"exploration_banking_family",name:"",icon:"Landmark",image:null,description:"",triggerConditions:{minEpoch:4,maxEpoch:5,classConditions:{merchant:{minPop:10,minWealthShare:.2},capitalist:{minPop:1}}},options:[{id:"charter_private_bank",text:"",description:"",effects:{resources:{silver:150},stability:-5,approval:{merchant:25,capitalist:20,landowner:-10}}},{id:"establish_state_bank",text:"",description:"",effects:{resources:{silver:-300},stability:10,approval:{official:20,merchant:-15,capitalist:-10}}},{id:"forbid_banking",text:"",description:"",effects:{stability:-8,approval:{merchant:-20,capitalist:-15,cleric:15}}}]},{id:"exploration_mercenary_offer",name:"",icon:"Swords",image:null,description:"",triggerConditions:{minEpoch:4,maxEpoch:5,classConditions:{soldier:{minPop:10}}},options:[{id:"hire_mercenaries",text:"",description:"",effects:{resources:{silver:-400},stability:-8,approval:{soldier:20,knight:-10}}},{id:"one_time_contract",text:"",description:"",effects:{resources:{silver:-250},approval:{soldier:10}}},{id:"reject_offer",text:"",description:"",effects:{approval:{soldier:-5,knight:10}}}]},{id:"exploration_gunpowder_plot",name:"",icon:"Bomb",image:null,description:"",triggerConditions:{minEpoch:4,maxEpoch:5,minStability:0,maxStability:40},options:[{id:"raid_hideout",text:"",description:"",effects:{stability:15,approval:{official:15,landowner:10}}},{id:"public_warning",text:"",description:"",effects:{resources:{silver:-100},stability:5,approval:{peasant:-8,merchant:-5}}},{id:"ignore_threat",text:"",description:"",effects:{},randomEffects:[{chance:.25,effects:{population:-15,stability:-20,approval:{peasant:-10}}}]}]}];function lh(l,c){if(!l.triggerConditions)return!0;const m=l.triggerConditions;if(m.minPopulation&&c.population<m.minPopulation||m.minEpoch!==void 0&&c.epoch<m.minEpoch||m.maxEpoch!==void 0&&c.epoch>m.maxEpoch||m.minScience&&c.resources.science<m.minScience)return!1;if(m.classConditions){const o=c.popStructure||{},p=c.classApproval||{},j=c.classInfluence||{},v=c.classWealth||{},w=c.classWealthDelta||{},g=c.classIncome||{};let y=c.totalInfluence;(!y||y<=0)&&(y=Object.values(j).reduce((_,E)=>_+(E||0),0));let k=c.totalWealth;(!k||k<=0)&&(k=Object.values(v).reduce((_,E)=>_+(E||0),0));for(const _ in m.classConditions){const E=m.classConditions[_];if(!E)continue;const U=o[_]||0,D=p[_]??50,M=j[_]||0,A=v[_]||0,S=w[_]||0,ie=g[_]||0,ae=y>0?M/y:0,ce=k>0?A/k:0;if(E.minPop!==void 0&&U<E.minPop||E.maxPop!==void 0&&U>E.maxPop||E.minApproval!==void 0&&D<E.minApproval||E.maxApproval!==void 0&&D>E.maxApproval||E.minInfluenceShare!==void 0&&ae<E.minInfluenceShare||E.maxInfluenceShare!==void 0&&ae>E.maxInfluenceShare||E.minWealth!==void 0&&A<E.minWealth||E.maxWealth!==void 0&&A>E.maxWealth||E.minWealthShare!==void 0&&ce<E.minWealthShare||E.maxWealthShare!==void 0&&ce>E.maxWealthShare||E.minWealthDelta!==void 0&&S<E.minWealthDelta||E.maxWealthDelta!==void 0&&S>E.maxWealthDelta||E.minIncome!==void 0&&ie<E.minIncome||E.maxIncome!==void 0&&ie>E.maxIncome)return!1}}return!0}function ih(l){const c=up.filter(o=>lh(o,l));if(c.length===0)return null;const m=Math.floor(Math.random()*c.length);return c[m]}const gi=3;function rh(l,c,m,o){const p=[];if(m>20){const v=Math.floor(c*1.5),w=Math.ceil(v*gi),g=Math.ceil(w/365),y=Math.floor((l.wealth||800)/100*50),k=Math.max(6,Math.floor(y*.04));p.push({id:"demand_more",text:"",description:`${v}50%`,effects:{resources:{silver:v}},callback:()=>o(!0,"demand_more",v)}),p.push({id:"demand_installment",text:"",description:`${g}${g*365}`,effects:{},callback:()=>o(!0,"installment",g)}),p.push({id:"demand_population",text:"",description:` ${k}`,effects:{},callback:()=>o(!0,"population",k)}),p.push({id:"accept_standard",text:"",description:`${c}`,effects:{resources:{silver:c}},callback:()=>o(!0,"standard",c)})}else if(m>10){const v=Math.ceil(c*gi),w=Math.ceil(v/365),g=Math.floor((l.wealth||800)/100*50),y=Math.max(4,Math.floor(g*.02));p.push({id:"accept",text:"",description:`${c}`,effects:{resources:{silver:c}},callback:()=>o(!0,"standard",c)}),p.push({id:"demand_installment",text:"",description:`${w}${w*365}`,effects:{},callback:()=>o(!0,"installment",w)}),p.push({id:"demand_population",text:"",description:` ${y}`,effects:{},callback:()=>o(!0,"population",y)})}else p.push({id:"accept",text:"",description:`${c}`,effects:{resources:{silver:c}},callback:()=>o(!0,"standard",c)});p.push({id:"reject",text:"",description:"",effects:{},callback:()=>o(!1)});let j="";return m>20?j=`${l.name}${c}`:m>10?j=`${l.name}${c}`:j=`${l.name}${c}`,{id:`enemy_peace_request_${l.id}_${Date.now()}`,name:`${l.name}`,icon:"HandHeart",image:null,description:j,isDiplomaticEvent:!0,options:p}}function ch(l,c,m,o,p){const j=[];if(c>15){const w=Math.min(l.wealth||0,Math.ceil(c*50+o*3)),g=Math.min(l.wealth||0,Math.ceil(c*40+o*2)),y=Math.ceil(w*gi),k=Math.ceil(y/365),_=Math.floor((l.wealth||800)/100*50),E=Math.max(5,Math.floor(_*.03));j.push({id:"demand_high",text:"",description:`${w}`,effects:{},callback:()=>p("demand_high",w)}),j.push({id:"demand_installment",text:"",description:`${k}${k*365}`,effects:{},callback:()=>p("demand_installment",k)}),j.push({id:"demand_population",text:"",description:` ${E}`,effects:{},callback:()=>p("demand_population",E)}),j.push({id:"demand_standard",text:"",description:`${g}`,effects:{},callback:()=>p("demand_standard",g)}),j.push({id:"peace_only",text:"",description:"",effects:{},callback:()=>p("peace_only",0)})}else if(c>0){const w=Math.min(l.wealth||0,Math.ceil(c*40+o*2)),g=Math.ceil(w*gi),y=Math.ceil(g/365),k=Math.floor((l.wealth||800)/100*50),_=Math.max(5,Math.floor(k*.01));j.push({id:"demand_tribute",text:"",description:`${w}`,effects:{},callback:()=>p("demand_tribute",w)}),j.push({id:"demand_installment",text:"",description:`${y}${y*365}`,effects:{},callback:()=>p("demand_installment",y)}),j.push({id:"demand_population",text:"",description:` ${_}`,effects:{},callback:()=>p("demand_population",_)}),j.push({id:"peace_only",text:"",description:"",effects:{},callback:()=>p("peace_only",0)})}else if(c<-10){const w=Math.max(150,Math.ceil(Math.abs(c)*35+m*6)),g=Math.ceil(w*gi),y=Math.ceil(g/365),k=Math.floor((l.population||1e3)*.05);j.push({id:"pay_high",text:`${w}`,description:"",effects:{},callback:()=>p("pay_high",w)}),j.push({id:"pay_installment",text:"",description:`${y}${y*365}`,effects:{},callback:()=>p("pay_installment",y)}),j.push({id:"offer_population",text:` ${k}`,description:"",effects:{},callback:()=>p("offer_population",k)})}else if(c<0){const w=Math.max(100,Math.ceil(Math.abs(c)*30+m*5)),g=Math.ceil(w*gi),y=Math.ceil(g/365),k=Math.floor((l.population||1e3)*.03);j.push({id:"pay_standard",text:`${w}`,description:"",effects:{},callback:()=>p("pay_standard",w)}),j.push({id:"pay_installment",text:"",description:`${y}${y*365}`,effects:{},callback:()=>p("pay_installment",y)}),j.push({id:"offer_population",text:` ${k}`,description:"",effects:{},callback:()=>p("offer_population",k)})}else j.push({id:"peace_only",text:"",description:"",effects:{},callback:()=>p("peace_only",0)});j.push({id:"cancel",text:"",description:"",effects:{},callback:()=>p("cancel",0)});let v="";return c>15?v=`${l.name}`:c>0?v=`${l.name}`:c<-10?v=`${l.name}`:c<0?v=`${l.name}`:v=`${l.name}`,{id:`player_peace_proposal_${l.id}_${Date.now()}`,name:`${l.name}`,icon:"HandHeart",image:null,description:v,isDiplomaticEvent:!0,options:j}}const Da={militia:{id:"militia",name:"",desc:"",epoch:0,icon:"Users",category:"infantry",attack:6,defense:4,speed:3,range:1,recruitCost:{food:25,wood:12},maintenanceCost:{food:.35,silver:.12},trainingTime:2,populationCost:1,abilities:[""],counters:{},weakAgainst:["cavalry","archer"]},slinger:{id:"slinger",name:"",desc:"",epoch:0,icon:"Target",category:"archer",attack:6,defense:2,speed:3,range:3,recruitCost:{food:30,wood:15,stone:5},maintenanceCost:{food:.4,silver:.15},trainingTime:3,populationCost:1,abilities:[""],counters:{infantry:1.2},weakAgainst:["cavalry"]},spearman:{id:"spearman",name:"",desc:"",epoch:1,icon:"Swords",category:"infantry",attack:12,defense:9,speed:3,range:1,recruitCost:{food:55,wood:35,iron:12},maintenanceCost:{food:.55,silver:.35},trainingTime:4,populationCost:1,abilities:[""],counters:{cavalry:1.8},weakAgainst:["archer"]},archer:{id:"archer",name:"",desc:"",epoch:1,icon:"Target",category:"archer",attack:14,defense:6,speed:4,range:4,recruitCost:{food:65,wood:45,silver:25},maintenanceCost:{food:.65,silver:.45},trainingTime:5,populationCost:1,abilities:["",""],counters:{infantry:1.5},weakAgainst:["cavalry"]},light_cavalry:{id:"light_cavalry",name:"",desc:"",epoch:1,icon:"Horse",category:"cavalry",attack:15,defense:6,speed:8,range:1,recruitCost:{food:100,silver:50,iron:20},maintenanceCost:{food:1,silver:.8},trainingTime:6,populationCost:1,abilities:["",""],counters:{archer:1.6},weakAgainst:["infantry"]},heavy_infantry:{id:"heavy_infantry",name:"",desc:"",epoch:2,icon:"Shield",category:"infantry",attack:18,defense:15,speed:2,range:1,recruitCost:{food:120,iron:50,silver:60},maintenanceCost:{food:.8,silver:.6},trainingTime:8,populationCost:1,abilities:["",""],counters:{cavalry:1.4},weakAgainst:["archer"]},crossbowman:{id:"crossbowman",name:"",desc:"",epoch:2,icon:"Target",category:"archer",attack:20,defense:8,speed:3,range:5,recruitCost:{food:100,wood:60,iron:40,silver:40},maintenanceCost:{food:.7,silver:.5},trainingTime:7,populationCost:1,abilities:["",""],counters:{infantry:1.6,cavalry:1.2},weakAgainst:[]},knight:{id:"knight",name:"",desc:"",epoch:2,icon:"Shield",category:"cavalry",attack:28,defense:20,speed:6,range:1,recruitCost:{food:220,iron:90,silver:140},maintenanceCost:{food:1.6,silver:1.3},trainingTime:10,populationCost:1,abilities:["","",""],counters:{archer:1.8,infantry:1.3},weakAgainst:["infantry"]},musketeer:{id:"musketeer",name:"",desc:"",epoch:3,icon:"Zap",category:"infantry",attack:30,defense:12,speed:3,range:3,recruitCost:{food:150,iron:60,tools:20,silver:80},maintenanceCost:{food:1,silver:.8,tools:.1},trainingTime:9,populationCost:1,abilities:["",""],counters:{cavalry:1.5,infantry:1.3},weakAgainst:[]},cannon:{id:"cannon",name:"",desc:"",epoch:3,icon:"Bomb",category:"siege",attack:50,defense:10,speed:1,range:6,recruitCost:{food:200,iron:150,tools:50,silver:200},maintenanceCost:{food:1.5,silver:1.5,tools:.3},trainingTime:15,populationCost:3,abilities:["",""],counters:{infantry:1.8,archer:1.8},weakAgainst:["cavalry"]},dragoon:{id:"dragoon",name:"",desc:"",epoch:3,icon:"Horse",category:"cavalry",attack:35,defense:15,speed:7,range:2,recruitCost:{food:250,iron:80,tools:30,silver:150},maintenanceCost:{food:1.8,silver:1.5,tools:.15},trainingTime:12,populationCost:1,abilities:["",""],counters:{archer:1.7,infantry:1.4},weakAgainst:[]},infantry_modern:{id:"infantry_modern",name:"",desc:"",epoch:4,icon:"Zap",category:"infantry",attack:45,defense:25,speed:4,range:4,recruitCost:{food:300,iron:100,tools:50,silver:200,science:50},maintenanceCost:{food:1.5,silver:1.2,tools:.2},trainingTime:10,populationCost:1,abilities:["",""],counters:{infantry:1.4,archer:1.5},weakAgainst:[]},tank:{id:"tank",name:"",desc:"",epoch:4,icon:"Truck",category:"cavalry",attack:65,defense:45,speed:5,range:3,recruitCost:{food:550,iron:350,tools:180,silver:450,science:120},maintenanceCost:{food:2.2,silver:2.8,tools:.6},trainingTime:20,populationCost:3,abilities:["","",""],counters:{infantry:2,cavalry:1.5,archer:1.8},weakAgainst:[]},artillery:{id:"artillery",name:"",desc:"",epoch:4,icon:"Bomb",category:"siege",attack:80,defense:15,speed:2,range:8,recruitCost:{food:400,iron:250,tools:100,silver:350,science:80},maintenanceCost:{food:2.5,silver:2,tools:.4},trainingTime:18,populationCost:4,abilities:["","",""],counters:{infantry:2.2,archer:2,siege:1.5},weakAgainst:["cavalry"]}},J0=(l={})=>{let c=0;return Object.entries(l).forEach(([m,o])=>{if(o<=0)return;const p=Da[m];if(!p)return;const j=p.maintenanceCost?.food||0;c+=j*o}),c},Ec=(l,c,m=0)=>{let o=0;return Object.entries(l).forEach(([p,j])=>{if(j<=0)return;const v=Da[p];if(!v)return;let w=(v.attack+v.defense)*j;const g=c-v.epoch;g>0&&(w*=1+g*.1),o+=w}),o*=1+m,o},kf=(l,c)=>{let m=1,o=0;return Object.entries(l).forEach(([p,j])=>{if(j<=0)return;const v=Da[p];v&&Object.entries(c).forEach(([w,g])=>{if(g<=0)return;const y=Da[w];if(y&&v.counters[y.category]){const k=v.counters[y.category],_=j*g/100;m+=(k-1)*_,o++}})}),{multiplier:m,counterCount:o}},mp=(l,c)=>{const{army:m,epoch:o,militaryBuffs:p=0}=l,{army:j,epoch:v,militaryBuffs:w=0,wealth:g=1e3}=c;let y=Ec(m,o,p),k=Ec(j,v,w);const _=kf(m,j),E=kf(j,m);y*=_.multiplier,k*=E.multiplier,k*=1.2;const U=.85+Math.random()*.3,D=.85+Math.random()*.3;y*=U,k*=D;const M=y+k,A=y/M,S=k/M,ie=A>.5,ae=Math.abs(A-.5)>.3,ce=ie?.1+S*.3:.3+S*.5,Ce=ie?.4+A*.6:.2+A*.3,oe={},se={};Object.entries(m).forEach(([de,Q])=>{oe[de]=Math.floor(Q*ce)}),Object.entries(j).forEach(([de,Q])=>{se[de]=Math.floor(Q*Ce)});let B={};if(ie){const de=ae?.3:.15;B={food:Math.floor(g*de*.4),wood:Math.floor(g*de*.2),silver:Math.floor(g*de*.3),iron:Math.floor(g*de*.1)}}return{victory:ie,decisive:ae,attackerPower:Math.floor(y),defenderPower:Math.floor(k),attackerAdvantage:(A*100).toFixed(1),defenderAdvantage:(S*100).toFixed(1),attackerLosses:oe,defenderLosses:se,attackerCounter:_.counterCount,defenderCounter:E.counterCount,loot:B,battleReport:oh({victory:ie,decisive:ae,attackerPower:y,defenderPower:k,attackerCounter:_.counterCount,defenderCounter:E.counterCount,attackerLosses:oe,defenderLosses:se,loot:B})}},oh=l=>{const{victory:c,decisive:m,attackerPower:o,defenderPower:p,attackerCounter:j,defenderCounter:v,attackerLosses:w,defenderLosses:g,loot:y}=l;let k=[];c?m?k.push(" "):k.push(" "):m?k.push(" "):k.push(" "),k.push(` ${Math.floor(o)} vs  ${Math.floor(p)}`),j>0&&k.push(`  ${j} `),v>0&&k.push(`  ${v} `);const _=Object.values(w).reduce((U,D)=>U+D,0),E=Object.values(g).reduce((U,D)=>U+D,0);if(k.push(`${_} `),k.push(`${E} `),c&&y){const U=Object.entries(y).filter(([D,M])=>M>0).map(([D,M])=>`${D} ${M}`).join(", ");U&&k.push(`${U}`)}return k},fp=l=>{const c={};return Object.entries(l).forEach(([m,o])=>{if(o<=0)return;const p=Da[m];p&&Object.entries(p.maintenanceCost).forEach(([j,v])=>{c[j]=(c[j]||0)+v*o})}),c},dh=l=>{let c=0;return Object.entries(l).forEach(([m,o])=>{if(o<=0)return;const p=Da[m];p&&(c+=p.populationCost*o)}),c},uh={food_chain:{id:"food_chain",name:"",desc:"",unlockEpoch:0,stages:[{stage:"extraction",name:"",buildings:["farm","large_estate"],output:"food",efficiency:1,workers:["peasant","serf"]},{stage:"storage",name:"",buildings:["granary"],input:"food",output:"food",efficiency:1.1,bonus:{preservation:.05}},{stage:"processing",name:"",buildings:["culinary_kitchen"],input:"food",output:"delicacies",ratio:1.6,efficiency:1,workers:["artisan","peasant"]},{stage:"consumption",name:"",consumers:["all_classes"],input:"food"},{stage:"consumption",name:"",consumers:["merchant","official","landowner","capitalist","knight"],input:"delicacies",bonus:{approval:.1,stability:.05}}],upgrades:[{id:"irrigation",name:"",unlockEpoch:1,cost:{stone:200,wood:150},bonus:{efficiency:.15,output:.1}},{id:"crop_rotation",name:"",unlockEpoch:2,cost:{science:500},bonus:{efficiency:.2,sustainability:.15}},{id:"mechanized_farming",name:"",unlockEpoch:6,cost:{steel:300,tools:200},bonus:{efficiency:.4,workers:-.3}}]},wood_chain:{id:"wood_chain",name:"",desc:"",unlockEpoch:0,stages:[{stage:"extraction",name:"",buildings:["lumber_camp"],output:"wood",efficiency:1,workers:["lumberjack"]},{stage:"processing",name:"",buildings:["sawmill"],input:"wood",output:"plank",ratio:2.5,efficiency:1,workers:["worker","artisan"]},{stage:"advanced",name:"",buildings:["furniture_workshop"],input:["wood","stone"],output:"furniture",ratio:2.2,efficiency:1,workers:["artisan"]},{stage:"consumption",name:"",consumers:["buildings","ships","tools"],input:["wood","plank"]},{stage:"consumption",name:"",consumers:["merchant","official","landowner","capitalist","knight"],input:"furniture",bonus:{approval:.08,culture:.05}}],upgrades:[{id:"forestry_management",name:"",unlockEpoch:2,cost:{science:400,silver:200},bonus:{efficiency:.15,sustainability:.2}},{id:"advanced_sawmill",name:"",unlockEpoch:4,cost:{iron:150,tools:100},bonus:{processing:.25,waste:-.15}}]},textile_chain:{id:"textile_chain",name:"",desc:"",unlockEpoch:0,stages:[{stage:"extraction",name:"",buildings:["loom_house"],output:"cloth",efficiency:1,workers:["peasant"]},{stage:"processing",name:"",buildings:["dye_works"],input:"food",output:"dye",ratio:.4,efficiency:1,workers:["peasant","artisan"]},{stage:"advanced",name:"",buildings:["tailor_workshop"],input:["cloth","dye"],output:"fine_clothes",ratio:.8,efficiency:1,workers:["artisan"],bonus:{culture:.1}},{stage:"consumption",name:"",consumers:["all_classes"],input:"cloth",bonus:{approval:.05,stability:.02}},{stage:"consumption",name:"",consumers:["merchant","landowner","official","capitalist","knight"],input:"fine_clothes",bonus:{approval:.1,culture:.05}}],upgrades:[{id:"loom_standardization",name:"",unlockEpoch:1,cost:{wood:80,stone:30},bonus:{cloth_output:.2,efficiency:.15}},{id:"dyeworks_expansion",name:"",unlockEpoch:2,cost:{papyrus:60,silver:150},bonus:{dye_output:.25,efficiency:.15}}]},mining_chain:{id:"mining_chain",name:"",desc:"",unlockEpoch:1,stages:[{stage:"extraction",name:"",buildings:["quarry","copper_mine","mine","coal_mine"],output:["stone","copper","iron","coal"],efficiency:1,workers:["miner"]},{stage:"processing",name:"",buildings:["smelter","forge"],input:["copper","iron","coal"],output:["tools","steel"],efficiency:1,workers:["artisan","engineer"]},{stage:"advanced",name:"",buildings:["factory","steel_mill"],input:["iron","coal","tools"],output:"steel",efficiency:1,workers:["engineer","worker"]},{stage:"consumption",name:"",consumers:["military","buildings","machinery"],input:["tools","steel","iron"]}],upgrades:[{id:"deep_mining",name:"",unlockEpoch:3,cost:{iron:200,tools:150},bonus:{extraction:.25,depth:2}},{id:"blast_furnace",name:"",unlockEpoch:5,cost:{brick:300,coal:200},bonus:{processing:.35,efficiency:.2}},{id:"industrial_complex",name:"",unlockEpoch:6,cost:{steel:500,coal:400},bonus:{efficiency:.5,output:.3}}]},knowledge_chain:{id:"knowledge_chain",name:"",desc:"",unlockEpoch:2,stages:[{stage:"extraction",name:"",buildings:["reed_works"],output:"papyrus",efficiency:1,workers:["peasant","scribe"]},{stage:"processing",name:"",buildings:["library","scriptorium"],input:"papyrus",output:"culture",efficiency:1,workers:["scribe","scholar"]},{stage:"advanced",name:"",buildings:["printing_house","university"],input:["papyrus","culture"],output:["culture","science"],efficiency:1.2,workers:["scholar","scribe"]},{stage:"consumption",name:"",consumers:["education","research"],input:["culture","science"]}],upgrades:[{id:"printing_press",name:"",unlockEpoch:5,cost:{iron:150,tools:100},bonus:{efficiency:.4,spread:.5}},{id:"public_library",name:"",unlockEpoch:4,cost:{brick:300,papyrus:200},bonus:{access:.3,culture:.2}}]},luxury_chain:{id:"luxury_chain",name:"",desc:"",unlockEpoch:4,stages:[{stage:"extraction",name:"",buildings:["spice_market","coffee_plantation"],output:["spice","coffee"],efficiency:1,workers:["merchant","serf"]},{stage:"processing",name:"",buildings:["coffee_house","trade_port"],input:["spice","coffee"],output:"culture",efficiency:1,workers:["merchant","artisan"]},{stage:"consumption",name:"",consumers:["noble","merchant","scholar"],input:["spice","coffee"],bonus:{approval:.15}}],upgrades:[{id:"trade_network",name:"",unlockEpoch:5,cost:{silver:500,plank:200},bonus:{efficiency:.3,price:.2}},{id:"luxury_monopoly",name:"",unlockEpoch:5,cost:{silver:800},bonus:{profit:.5,influence:.25}}]},military_chain:{id:"military_chain",name:"",desc:"",unlockEpoch:1,stages:[{stage:"extraction",name:"",buildings:["mine","copper_mine"],output:["iron","copper"],efficiency:1,workers:["miner"]},{stage:"processing",name:"",buildings:["forge","armory"],input:["iron","copper","coal"],output:"weapons",efficiency:1,workers:["artisan","engineer"]},{stage:"advanced",name:"",buildings:["barracks","training_ground"],input:["weapons","food"],output:"military_power",efficiency:1,workers:["soldier"]},{stage:"consumption",name:"",consumers:["defense","conquest","patrol"],input:["military_power","food","silver"]}],upgrades:[{id:"standardized_weapons",name:"",unlockEpoch:4,cost:{iron:300,tools:200},bonus:{efficiency:.25,cost:-.15}},{id:"military_logistics",name:"",unlockEpoch:5,cost:{silver:600,plank:300},bonus:{supply:.3,mobility:.2}},{id:"arms_factory",name:"",unlockEpoch:6,cost:{steel:400,coal:300},bonus:{production:.5,quality:.3}}]}},mh=12,Nc=30,fh=["","","","","","","","","","","",""],H0=[{name:"",months:[3,4,5]},{name:"",months:[6,7,8]},{name:"",months:[9,10,11]},{name:"",months:[12,1,2]}],Sc=(l=0)=>{const c=Math.max(0,Math.floor(l))+1,m=mh*Nc,o=Math.floor((c-1)/m)+1,p=(c-1)%m+1,j=Math.floor((p-1)/Nc)+1,v=(p-1)%Nc+1,w=fh[j-1]||`${j}`,g=H0.find(k=>k.months.includes(j))||H0[0],y=g.months.indexOf(j)*Nc+v;return{totalDays:c,year:o,month:j,monthName:w,day:v,dayOfYear:p,season:g.name,seasonIndex:H0.indexOf(g),seasonDay:y,formatted:`${o} ${g.name}  ${w}${v}`}},wc="civ_game_save_data_v1",rr="civ_game_autosave_v1",Ef={food:200,wood:200,stone:200,cloth:80,plank:0,brick:0,iron:0,tools:0,copper:0,papyrus:0,spice:0,coffee:0,coal:0,steel:0,silver:200,science:0,culture:300},Sf=()=>{const l={};return Object.keys(Fe).forEach(c=>{l[c]=Fe[c].startingWealth||0}),l},Af=()=>{const l={};return Object.keys(Fe).forEach(c=>{l[c]=[]}),l},zf=()=>{const l={};return Object.keys(Fe).forEach(c=>{l[c]=[]}),l},Df=()=>{const l={};return Object.keys(Fe).forEach(c=>{l[c]={pop:[],income:[],expense:[]}}),{treasury:[],tax:[],population:[],class:l}},Of=()=>({pendingTrades:[],lastTradeTime:0}),Rf=()=>({routes:[]}),pp=l=>{if(l==="silver")return!1;const c=Me[l];return c?!c.type||c.type!=="virtual":!1},Bf=()=>{const l={};return Object.keys(Me).forEach(c=>{pp(c)&&(l[c]=Math.max(.5,Me[c].basePrice||1))}),{prices:l,demand:{},supply:{},wages:{},priceHistory:{},supplyHistory:{},demandHistory:{}}},$f=()=>{const l={};return Object.keys(Fe).forEach(c=>{l[c]=1}),l},Uf=()=>{const l={};return Object.keys(Me).forEach(c=>{pp(c)&&(l[c]=.05)}),l},Hf=()=>({}),Lf=()=>sh.map(l=>{const c={};l.economyTraits?.resourceBias&&Object.entries(l.economyTraits.resourceBias).forEach(([v,w])=>{w>1?c[v]=Math.floor(500*(1.2+Math.random()*.6)):w<1?c[v]=Math.floor(500*(.2+Math.random()*.3)):c[v]=Math.floor(500*(.8+Math.random()*.4))});const o=l.wealth??800,p=Math.floor(o*.5),j=1e3+Math.floor(Math.random()*500);return{...l,relation:50,warScore:l.warScore??0,isAtWar:l.isAtWar??!1,wealth:o,budget:p,inventory:c,enemyLosses:0,warDuration:0,warStartDay:null,militaryStrength:1,population:j,economyTraits:{...l.economyTraits,baseWealth:o,basePopulation:j}}}),ph=()=>{const[l,c]=V.useState(Ef),[m,o]=V.useState(5),[p,j]=V.useState({}),[v,w]=V.useState(10),[g,y]=V.useState(0),[k,_]=V.useState({}),[E,U]=V.useState([]),[D,M]=V.useState(0),[A,S]=V.useState("build"),[ie,ae]=V.useState(1),[ce,Ce]=V.useState(!1),[oe,se]=V.useState(60),[B,de]=V.useState(!0),[Q,I]=V.useState(()=>Date.now()),[ge,ve]=V.useState(!1),G=V.useRef(null),[me,b]=V.useState(X0),[O,R]=V.useState(Lf()),[ne,L]=V.useState({}),[u,C]=V.useState({}),[$,J]=V.useState(Sf()),[le,De]=V.useState({}),[fe,Ge]=V.useState({}),[K,We]=V.useState({}),[xt,P]=V.useState(Af()),[je,Ae]=V.useState(zf()),[Se,Ye]=V.useState(0),[bt,ua]=V.useState(0),[Gt,Fa]=V.useState([]),[te,pe]=V.useState([]),[ye,F]=V.useState({}),[Re,X]=V.useState(50),[be,ke]=V.useState(null),[Ue,ze]=V.useState(null),[$e,ot]=V.useState({}),[rt,zt]=V.useState(!1),[kt,Bt]=V.useState(Df()),[vs,zs]=V.useState(0),[rs,Te]=V.useState({}),[ka,ts]=V.useState([]),[it,Ea]=V.useState(null),[Xe,as]=V.useState(null),[js,Ja]=V.useState(1.5),[Ke,$t]=V.useState(null),[Et,dt]=V.useState([]),[Wt,La]=V.useState(1),[Oa,Ds]=V.useState(Of),[Rn,Ra]=V.useState(Rf),[ra,ha]=V.useState({income:0,expense:0}),[ba,ss]=V.useState(null),[un,en]=V.useState(()=>!localStorage.getItem("tutorial_completed")),[tn,cs]=V.useState(null),[Sa,we]=V.useState([]),[Qe,qe]=V.useState([" 1 "]),[Yt,Oe]=V.useState([]),[Be,Ut]=V.useState({}),[Ie,Nt]=V.useState({total:0,breakdown:{headTax:0,industryTax:0,subsidy:0},efficiency:1}),[Ka,yt]=V.useState({headTaxRates:$f(),resourceTaxRates:Uf(),businessTaxRates:Hf()}),[Ba,Bn]=V.useState({}),[Xs,Ps]=V.useState({}),[qa,$a]=V.useState(Bf());V.useEffect(()=>()=>{G.current&&clearTimeout(G.current)},[]);const os=St=>{qe(ea=>[St,...ea].slice(0,8))};V.useEffect(()=>{if(!(typeof window>"u"))try{const St=localStorage.getItem(rr);if(!St)return;const ea=localStorage.getItem(wc);if(!ea){os(" ");return}const mn=JSON.parse(St),Os=JSON.parse(ea);(mn?.updatedAt||0)>(Os?.updatedAt||0)&&os(" ")}catch(St){console.warn("Auto-save detection failed:",St)}},[]);const Ol=()=>{ve(!0),G.current&&clearTimeout(G.current),G.current=setTimeout(()=>{ve(!1),G.current=null},1e3)};return{resources:l,setResources:c,market:qa,setMarket:$a,population:m,setPopulation:o,popStructure:p,setPopStructure:j,maxPop:v,setMaxPop:w,maxPopBonus:g,setMaxPopBonus:y,buildings:k,setBuildings:_,techsUnlocked:E,setTechsUnlocked:U,epoch:D,setEpoch:M,daysElapsed:vs,setDaysElapsed:zs,activeTab:A,setActiveTab:S,gameSpeed:ie,setGameSpeed:ae,isPaused:ce,setIsPaused:Ce,autoSaveInterval:oe,setAutoSaveInterval:se,isAutoSaveEnabled:B,setIsAutoSaveEnabled:de,lastAutoSaveTime:Q,setLastAutoSaveTime:I,isSaving:ge,decrees:me,setDecrees:b,nations:O,setNations:R,selectedTarget:it,setSelectedTarget:Ea,classApproval:ne,setClassApproval:L,classInfluence:u,setClassInfluence:C,classWealth:$,setClassWealth:J,classWealthDelta:le,setClassWealthDelta:De,classIncome:fe,setClassIncome:Ge,classExpense:K,setClassExpense:We,classWealthHistory:xt,setClassWealthHistory:P,classNeedsHistory:je,setClassNeedsHistory:Ae,totalInfluence:Se,setTotalInfluence:Ye,totalWealth:bt,setTotalWealth:ua,activeBuffs:Gt,setActiveBuffs:Fa,activeDebuffs:te,setActiveDebuffs:pe,classInfluenceShift:ye,setClassInfluenceShift:F,stability:Re,setStability:X,stratumDetailView:be,setStratumDetailView:ke,resourceDetailView:Ue,setResourceDetailView:ze,classShortages:$e,setClassShortages:ot,populationDetailView:rt,setPopulationDetailView:zt,history:kt,setHistory:Bt,army:rs,setArmy:Te,militaryQueue:ka,setMilitaryQueue:ts,battleResult:Xe,setBattleResult:as,militaryWageRatio:js,setMilitaryWageRatio:Ja,festivalModal:Ke,setFestivalModal:$t,activeFestivalEffects:Et,setActiveFestivalEffects:dt,lastFestivalYear:Wt,setLastFestivalYear:La,merchantState:Oa,setMerchantState:Ds,tradeRoutes:Rn,setTradeRoutes:Ra,tradeStats:ra,setTradeStats:ha,showTutorial:un,setShowTutorial:en,currentEvent:tn,setCurrentEvent:cs,eventHistory:Sa,setEventHistory:we,playerInstallmentPayment:ba,setPlayerInstallmentPayment:ss,logs:Qe,setLogs:qe,clicks:Yt,setClicks:Oe,rates:Be,setRates:Ut,taxes:Ie,setTaxes:Nt,taxPolicies:Ka,setTaxPolicies:yt,jobFill:Ba,setJobFill:Bn,jobsAvailable:Xs,setJobsAvailable:Ps,saveGame:({source:St="manual"}={})=>{try{const ea=Date.now(),Os={resources:l,population:m,popStructure:p,maxPop:v,maxPopBonus:g,buildings:k,techsUnlocked:E,epoch:D,activeTab:A,gameSpeed:ie,isPaused:ce,decrees:me,nations:O,classApproval:ne,classInfluence:u,classWealth:$,classWealthDelta:le,classIncome:fe,classExpense:K,classWealthHistory:xt,classNeedsHistory:je,totalInfluence:Se,totalWealth:bt,activeBuffs:Gt,activeDebuffs:te,classInfluenceShift:ye,stability:Re,stratumDetailView:be,resourceDetailView:Ue,classShortages:$e,populationDetailView:rt,history:kt,daysElapsed:vs,army:rs,militaryQueue:ka,selectedTarget:it,battleResult:Xe,militaryWageRatio:js,festivalModal:Ke,activeFestivalEffects:Et,lastFestivalYear:Wt,showTutorial:un,currentEvent:tn,eventHistory:Sa,logs:Qe,clicks:Yt,rates:Be,taxes:Ie,taxPolicies:Ka,jobFill:Ba,market:qa,merchantState:Oa,tradeRoutes:Rn,tradeStats:ra,autoSaveInterval:oe,isAutoSaveEnabled:B,lastAutoSaveTime:St==="auto"?ea:Q,updatedAt:ea,saveSource:St},Ve=St==="auto"?rr:wc;localStorage.setItem(Ve,JSON.stringify(Os)),Ol(),St==="auto"?I(ea):os(" ")}catch(ea){console.error(`${St==="auto"?"Auto":"Manual"} save failed:`,ea),os(St==="auto"?` ${ea.message}`:` ${ea.message}`),ve(!1)}},loadGame:({source:St="manual"}={})=>{try{const ea=St==="auto"?rr:wc,mn=St==="auto"?"":"",Os=localStorage.getItem(ea);if(!Os){os(` ${mn}`);return}const Ve=JSON.parse(Os);c(Ve.resources||Ef),o(Ve.population??5),j(Ve.popStructure||{}),w(Ve.maxPop??10),y(Ve.maxPopBonus||0),_(Ve.buildings||{}),U(Ve.techsUnlocked||[]),M(Ve.epoch??0),S(Ve.activeTab||"build"),ae(Ve.gameSpeed??1),Ce(Ve.isPaused??!1),b(Ve.decrees||X0),R(Ve.nations||Lf()),L(Ve.classApproval||{}),C(Ve.classInfluence||{}),J(Ve.classWealth||Sf()),De(Ve.classWealthDelta||{}),Ge(Ve.classIncome||{}),We(Ve.classExpense||{}),P(Ve.classWealthHistory||Af()),Ae(Ve.classNeedsHistory||zf()),Ye(Ve.totalInfluence||0),ua(Ve.totalWealth||0),Fa(Ve.activeBuffs||[]),pe(Ve.activeDebuffs||[]),F(Ve.classInfluenceShift||{}),X(Ve.stability??50),ke(Ve.stratumDetailView||null),ze(Ve.resourceDetailView||null),ot(Ve.classShortages||{}),zt(Ve.populationDetailView||!1),Bt(Ve.history||Df()),zs(Ve.daysElapsed||0),Te(Ve.army||{}),ts(Ve.militaryQueue||[]),Ea(Ve.selectedTarget||null),as(Ve.battleResult||null),Ja(Ve.militaryWageRatio||1.5),$t(Ve.festivalModal||null),dt(Ve.activeFestivalEffects||[]),La(Ve.lastFestivalYear||1),en(Ve.showTutorial??!0),cs(Ve.currentEvent||null),we(Ve.eventHistory||[]),qe(Ve.logs||[]),Oe(Ve.clicks||[]),Ut(Ve.rates||{}),Nt(Ve.taxes||{total:0,breakdown:{headTax:0,industryTax:0,subsidy:0},efficiency:1}),yt(Ve.taxPolicies||{headTaxRates:$f(),resourceTaxRates:Uf(),businessTaxRates:Hf()}),Bn(Ve.jobFill||{}),$a(Ve.market||Bf()),Ds(Ve.merchantState||Of()),Ra(Ve.tradeRoutes||Rf()),ha(Ve.tradeStats||{income:0,expense:0}),se(Ve.autoSaveInterval??60),de(Ve.isAutoSaveEnabled??!0),I(Ve.lastAutoSaveTime||Date.now()),os(St==="auto"?" ":" ")}catch(ea){console.error("Load game failed:",ea),os(` ${ea.message}`)}},hasAutoSave:()=>typeof window>"u"?!1:!!localStorage.getItem(rr),resetGame:()=>{typeof window>"u"||!window.confirm("")||(localStorage.removeItem(wc),localStorage.removeItem(rr),window.location.reload())}}},ur=(l,c,m=[])=>{const o=Me[l];return!(!o||o.unlockTech&&!m.includes(o.unlockTech)||typeof o.unlockEpoch=="number"&&o.unlockEpoch>c)},bi=(l,c,m=[])=>{if(!l)return{};const o={};for(const[p,j]of Object.entries(l))ur(p,c,m)&&(o[p]=j);return o},qf=l=>Me[l]?.basePrice||1,mr=(l,c,m=0)=>{if(!c)return qf(l);const o=qf(l),p=c?.economyTraits?.resourceBias?.[l]??1,j=c.inventory?.[l]||0,v=500,w=Math.max(1,(c.wealth||1e3)/1e3),g=c.epoch||0,y=Math.pow(2,g),k=v*w*y,_=k>0?j/k:1,E=Math.max(0,1-_),U=Math.max(0,_-1),D=1+Math.min(2.5,E*.9),M=1-Math.min(.95,U*.6),A=D*M,ie=1+(Math.max(.6,Math.min(1.6,p))-1)*.25;let ae=o*ie*A;return ae=Math.max(o*.25,Math.min(o*3,ae)),Math.max(.5,parseFloat(ae.toFixed(2)))},xh=(l="")=>l?l.split("").reduce((c,m)=>c+m.charCodeAt(0),0):0,dr=(l,c={},m=0)=>{const p=Math.max(1,(c.wealth||1e3)/1e3),j=c.epoch||0,v=Math.pow(2,j),w=500*p*v,g=typeof c.marketVolatility=="number"?c.marketVolatility:.3,y=c?.inventory?.[l]||0,k=xh(l),_=Math.sin(m*.05+k),E=w*(1+_*g),U=E*.9,D=E*1.1,M=Math.max(0,U-y),A=Math.max(0,y-D);return{isShortage:M>0,isSurplus:A>0,shortageAmount:M,surplusAmount:A,target:E}},bs=["official","cleric","capitalist","landowner","knight","engineer","navigator","merchant","soldier","scribe","worker","artisan","miner","lumberjack","serf","peasant"],Vf=.1,hh=new Set(["science","culture"]),As=l=>{if(l==="silver")return!1;const c=Me[l];return c?hh.has(l)?!0:!c.type||c.type!=="virtual":!1},gh=30,yh=(l={})=>{const c={...l};return Object.keys(Fe).forEach(m=>{c[m]===void 0&&(c[m]=Fe[m]?.startingWealth||0)}),c},or=l=>l==="silver"?1:Me[l]?.basePrice||1,xi=.5,Cc=1,bh=(l={},c={},m={})=>{const o={};return Object.entries(Fe).forEach(([p,j])=>{let v=0,w=0;const g=j.needs||{};Object.entries(g).forEach(([_,E])=>{if(!E||E<=0)return;const U=l?.[_]??Me[_]?.basePrice??or(_);if(!Number.isFinite(U)||U<=0)return;const D=Math.max(0,m?.[_]||0);v+=E*U,w+=E*U*D});const y=Math.max(0,j.headTaxBase??0),k=Math.max(0,c?.[p]??1);w+=y*k,o[p]={needsCost:Number.isFinite(v)?v:0,taxCost:Number.isFinite(w)?w:0}}),o},Mc=(l={},c={})=>{const m=Number.isFinite(c.livingCostWeight)?c.livingCostWeight:1,o=Number.isFinite(c.taxCostWeight)?c.taxCostWeight:1,p={};return Object.entries(l).forEach(([j,v])=>{const w=v?.needsCost||0,g=v?.taxCost||0;p[j]=Math.max(0,w*m+g*o)}),p},vh=fr.reduce((l,c)=>(l[c.id]=c,l),{}),P0=(l={},c=1)=>{if(!l||typeof l!="object")return{};const m={};return Object.entries(l).forEach(([o,p])=>{typeof p=="number"?m[o]=p*c:p&&typeof p=="object"&&!Array.isArray(p)?m[o]=P0(p,c):m[o]=p}),m},jh=({res:l,wealth:c,popStructure:m,supply:o,demand:p,nations:j,tick:v,taxPolicies:w,taxBreakdown:g,getLocalPrice:y,roleExpense:k,roleWagePayout:_,pendingTrades:E=[],lastTradeTime:U=0,gameSpeed:D=1,logs:M})=>{const A=m?.merchant||0;if(A<=0)return{pendingTrades:E,lastTradeTime:U};const S=w?.resourceTaxRates||{},ie=b=>S[b]||0,ae=Array.isArray(j)?j.filter(b=>b&&(b.inventory||b.economyTraits)):[],ce={},Ce=b=>{if(ce[b]!==void 0)return ce[b];if(ae.length===0)return ce[b]=null,null;let O=0,R=0;ae.forEach(L=>{const u=mr(b,L,v);Number.isFinite(u)&&u>0&&(O+=u,R+=1)});const ne=R>0?O/R:null;return ce[b]=ne,ne},oe=Fe.merchant?.tradeConfig||{minProfitMargin:.1,maxPurchaseAmount:20,exportProbability:.5,maxInventoryRatio:.3,minWealthForTrade:10,tradeDuration:3,tradeCooldown:0,enableDebugLog:!1},se=[];E.forEach(b=>{b.daysRemaining-=1,b.daysRemaining<=0?(_.merchant=(_.merchant||0)+b.revenue,b.type==="import"&&(l[b.resource]=(l[b.resource]||0)+b.amount,o[b.resource]=(o[b.resource]||0)+b.amount),oe.enableDebugLog&&console.log("[]  :",{type:b.type==="export"?"":"",resource:b.resource,amount:b.amount,revenue:b.revenue,profit:b.profit})):se.push(b)}),oe.enableDebugLog&&console.log("[]  :",{tick:v,lastTradeTime:U,pendingTradesCount:E.length,updatedPendingTradesCount:se.length,merchantCount:m.merchant||0});const B=v-U;if(!(B>=oe.tradeCooldown))return oe.enableDebugLog&&console.log(`[]   ${(oe.tradeCooldown-B).toFixed(1)} `),{pendingTrades:se,lastTradeTime:U};const Q=Object.keys(Me).filter(b=>As(b)),I=[],ge=[];Q.forEach(b=>{const O=y(b),R=Ce(b),ne=l[b]||0;if(R===null||O===null)return;const L=R-O,u=Math.abs(L)/O,C=R>O&&u>=oe.minProfitMargin&&ne>0,$=R<O&&u>=oe.minProfitMargin;C&&I.push(b),$&&ge.push(b)});const ve=A>100?100:A,G=A>100?A/100:1,me=Math.min(ve,50);for(let b=0;b<me;b++){const O=c.merchant||0;if(O<=oe.minWealthForTrade)break;const R=Math.random(),ne=O/(ve-b);if(R<oe.exportProbability&&I.length>0){const L=I[Math.floor(Math.random()*I.length)],u=y(L),C=Ce(L);if(C===null||u===null||C<=u)continue;const $=ie(L),J=u*(1+$),le=J>0?ne/J:3,fe=(l[L]||0)/G*oe.maxInventoryRatio,Ge=Math.min(oe.maxPurchaseAmount,le,fe);if(Ge<=.1)continue;const K=u*Ge,We=K*$,xt=C*Ge;let P=K,je=0;if(We<0){const Ye=Math.abs(We);(l.silver||0)>=Ye*G?(P-=Ye,je=-Ye):M.push(` ${Me[L]?.name||L} `)}else P+=We,je=We;const Ae=xt-P,Se=P>0?Ae/P:Ae>0?1/0:-1/0;if(Se>=oe.minProfitMargin){const Ye=Ge*G,bt=P*G,ua=je*G;if((c.merchant||0)>=bt&&(l[L]||0)>=Ye){if(oe.enableDebugLog&&L==="cloth"&&console.log("[]  :",{amount:Ye,cost:bt,expectedRevenue:xt*G,expectedProfit:Ae*G,profitMargin:(Se*100).toFixed(2)+"%",daysUntilSale:oe.tradeDuration}),c.merchant-=bt,k.merchant=(k.merchant||0)+bt,ua<0){const Gt=Math.abs(ua);l.silver-=Gt,g.subsidy+=Gt}else g.industryTax+=ua;l[L]=Math.max(0,(l[L]||0)-Ye),o[L]=Math.max(0,(o[L]||0)-Ye),se.push({type:"export",resource:L,amount:Ye,revenue:xt*G,profit:Ae*G,daysRemaining:3}),U=v}}}else if(ge.length>0){const L=ge[Math.floor(Math.random()*ge.length)],u=y(L),C=Ce(L);if(C===null||u===null||C>=u)continue;const $=ie(L),J=C,le=J>0?ne/J:3,De=Math.min(oe.maxPurchaseAmount,le);if(De<=.1)continue;const fe=C*De,Ge=u*De,K=Ge*$;let We=Ge,xt=0;if(K<0){const Ae=Math.abs(K);(l.silver||0)>=Ae*G?(We+=Ae,xt=-Ae):M.push(` ${Me[L]?.name||L} `)}else We-=K,xt=K;const P=We-fe,je=fe>0?P/fe:P>0?1/0:-1/0;if(je>=oe.minProfitMargin){const Ae=De*G,Se=fe*G,Ye=We*G,bt=xt*G;if((c.merchant||0)>=Se){if(oe.enableDebugLog&&L==="cloth"&&console.log("[]  :",{amount:Ae,cost:Se,expectedNetRevenue:Ye,expectedProfit:Ye-Se,profitMargin:(je*100).toFixed(2)+"%",daysUntilSale:oe.tradeDuration}),c.merchant-=Se,k.merchant=(k.merchant||0)+Se,bt<0){const ua=Math.abs(bt);l.silver-=ua,g.subsidy+=ua}else g.industryTax+=bt;se.push({type:"import",resource:L,amount:Ae,revenue:Ye,profit:Ye-Se,daysRemaining:3}),U=v}}}}return oe.enableDebugLog&&console.log("[]  :",{pendingTradesCount:se.length,lastTradeTime:U,pendingTrades:se.map(b=>({type:b.type,resource:b.resource,amount:b.amount,daysRemaining:b.daysRemaining}))}),{pendingTrades:se,lastTradeTime:U}},Nh=({resources:l,buildings:c,population:m,popStructure:o={},decrees:p,gameSpeed:j,epoch:v,market:w,classWealth:g,classApproval:y={},activeBuffs:k=[],activeDebuffs:_=[],taxPolicies:E,army:U={},militaryWageRatio:D=1,militaryQueue:M=[],nations:A=[],tick:S=0,techsUnlocked:ie=[],activeFestivalEffects:ae=[],classWealthHistory:ce,classNeedsHistory:Ce,merchantState:oe={pendingTrades:[],lastTradeTime:0},maxPopBonus:se=0})=>{console.log("[TICK START]",S);const B={...l},de={...w?.prices||{}},Q=E||{},I=Q.headTaxRates||{},ge=Q.resourceTaxRates||{},ve=Q.businessTaxRates||{},G=bh(de,I,ge);Mc(G,Al?.price||{});const me=Mc(G,Al?.wage||{}),b=w?.wages||{},O=f=>{const h=me?.[f];return!Number.isFinite(h)||h<=0?Cc*.8:Math.max(Cc*.8,h*1.1)},R=f=>{const h=b?.[f];if(Number.isFinite(h)&&h>0)return Math.max(xi,h);const q=Fe[f]?.startingWealth;return Number.isFinite(q)&&q>0?Math.max(Cc*.5,q/40,O(f)):Math.max(Ea,O(f))},ne={},L={},u=yh(g),C=f=>{const h=I[f];return typeof h=="number"?h:1},$=f=>{const h=ge[f];return typeof h=="number"?h:0},J=f=>{const h=ve[f];return typeof h=="number"?h:0},le={headTax:0,industryTax:0,businessTax:0,subsidy:0},De={},fe={gather:1,industry:1,civic:1,military:1},Ge={};let K=0,We=0,xt=0,P=0,je=0,Ae=0;const Se=(f,h)=>{if(!f||typeof h!="number")return;const q=1+h;!Number.isFinite(q)||q<=0||(De[f]=(De[f]||1)*q)},Ye=(f,h)=>{if(!f||typeof h!="number")return;const q=1+h;!Number.isFinite(q)||q<=0||(fe[f]=(fe[f]||1)*q)},bt=(f,h)=>{!f||typeof h!="number"||(Ge[f]=(Ge[f]||0)+h)},ua=(f={})=>{if(f){if(f.buildings&&Object.entries(f.buildings).forEach(([h,q])=>Se(h,q)),f.categories&&Object.entries(f.categories).forEach(([h,q])=>Ye(h,q)),f.passive&&Object.entries(f.passive).forEach(([h,q])=>bt(h,q)),f.maxPop){const h=f.maxPop;h>-1&&h<1&&h!==0?We+=h:K+=h}f.production&&(xt+=f.production),f.industry&&(P+=f.industry),f.taxIncome&&(je+=f.taxIncome),f.needsReduction&&(Ae+=f.needsReduction)}};ie.forEach(f=>{const h=vh[f];!h||!h.effects||ua(h.effects)}),p.forEach(f=>{!f||!f.active||!f.modifiers||ua(f.modifiers)}),ae.forEach(f=>{!f||!f.effects||ua(f.effects)});const Gt=f=>(de[f]||(de[f]=or(f)),de[f]=Math.max(xi,de[f]),de[f]),Fa=(f,h,q)=>{if(!(h<=0)&&(B[f]=(B[f]||0)+h,As(f))){L[f]=(L[f]||0)+h;const Ee=Gt(f)*h,Pe=$(f),He=Ee*Pe;let st=Ee;if(!(He>0)){if(He<0){const et=Math.abs(He);(B.silver||0)>=et?(B.silver-=et,st=Ee+et,le.subsidy+=et):S%30===0&&dt.push(`  ${Me[f]?.name||f} `)}}X[q]=(X[q]||0)+st}},te={},pe=c,ye=new Set,F={},Re={},X={},be={},ke={};let Ue=5,ze=0;Ue+=K,Ue+=se,dh(U);const $e=J0(U),ot=Object.values(U).reduce((f,h)=>f+h,0);bs.forEach(f=>F[f]=0),bs.forEach(f=>{Re[f]={totalSlots:0,weightedWage:0},X[f]=0});const rt={};Object.keys(Fe).forEach(f=>{rt[f]=0}),Object.keys(Fe).forEach(f=>{}),Object.keys(Fe).forEach(f=>{});const zt=()=>{Object.entries(X).forEach(([f,h])=>{if(h<=0){be[f]=h;return}const q=be[f]||0,_e=h-q;_e>0&&(u[f]=(u[f]||0)+_e),be[f]=h})};console.log("[TICK] Processing buildings..."),is.forEach(f=>{const h=pe[f.id]||0;if(h>0){if(f.output?.maxPop&&(Ue+=f.output.maxPop*h),f.output?.militaryCapacity&&(ze+=f.output.militaryCapacity*h),f.jobs)for(let q in f.jobs)F[q]+=f.jobs[q]*h;f.output&&Object.entries(f.output).forEach(([q,_e])=>{Me[q]&&(_e||0)>0&&ye.add(q)})}}),console.log("[TICK] Buildings processed. militaryCapacity:",ze);const kt=new Set;if(is.forEach(f=>{const h=(f.epoch??0)<=v,q=!f.requiresTech||ie.includes(f.requiresTech);h&&q&&f.output&&Object.entries(f.output).forEach(([_e,Ee])=>{Me[_e]&&(Ee||0)>0&&kt.add(_e)})}),We!==0){const f=Math.max(0,1+We);Ue=Math.max(0,Ue*f)}const Bt=(M||[]).filter(f=>f.status==="waiting").length,vs=(M||[]).filter(f=>f.status==="training").length,zs=ot+Bt+vs;console.log("[TICK] Adding soldier jobs. currentArmy:",ot,"waiting:",Bt,"training:",vs,"total:",zs),zs>0&&(F.soldier=(F.soldier||0)+zs),console.log("[TICK] Soldier jobs added. jobsAvailable.soldier:",F.soldier),console.log("[TICK] Starting population allocation...");const rs=o&&Object.keys(o).length>0,Te={};let ka=0;if(rs){bs.forEach(h=>{const q=o[h]||0;Te[h]=Math.max(0,q)}),Te.unemployed=Math.max(0,o.unemployed||0);const f=bs.reduce((h,q)=>h+(Te[q]||0),0)+(Te.unemployed||0);if(ka=m-f,ka>0)Te.unemployed=(Te.unemployed||0)+ka;else if(ka<0){let h=-ka;const q=Math.min(Te.unemployed||0,h);if(q>0&&(Te.unemployed-=q,h-=q),h>0){const _e=bs.reduce((Ee,Pe)=>Ee+(Te[Pe]||0),0);if(_e>0){const Ee=h;bs.forEach((Pe,He)=>{if(h<=0)return;const st=Te[Pe]||0;if(st<=0)return;const et=st/_e;let tt=Math.floor(et*Ee);tt<=0&&h>0&&(tt=1),He===bs.length-1?tt=Math.min(st,h):tt=Math.min(st,Math.min(tt,h)),!(tt<=0)&&(Te[Pe]=st-tt,h-=tt)}),h>0&&bs.forEach(Pe=>{if(h<=0)return;const He=Te[Pe]||0;if(He<=0)return;const st=Math.min(He,h);Te[Pe]=He-st,h-=st})}}}}else{let f=m;bs.forEach(h=>{const q=Math.max(0,F[h]||0),_e=Math.min(f,q);Te[h]=_e,f-=_e}),Te.unemployed=Math.max(0,f),bs.forEach(h=>{Te[h]=0}),Te.unemployed=m}Te.unemployed=Math.max(0,Te.unemployed||0);let ts=0,it=0;Object.keys(Te).forEach(f=>{const h=Te[f]||0,q=b[f]||0;h>0&&q>0&&(ts+=q*h,it+=h)});const Ea=it>0?ts/it:Cc;bs.forEach(f=>{const h=Te[f]||0,q=Math.max(0,F[f]||0);if(h>q){const _e=h-q,Ee=u[f]||0,Pe=h>0?Ee/h:0;if(Te[f]=q,Te.unemployed=(Te.unemployed||0)+_e,Pe>0){const He=Pe*_e;u[f]=Math.max(0,Ee-He),u.unemployed=(u.unemployed||0)+He}}});const as=Math.max(0,1),js=f=>{const h=R(f),_e=(Fe[f]?.headTaxBase??.01)*C(f)*as;return h-Math.max(0,_e)};console.log("[vacancy debug] diff =",ka,", unemployed =",Te.unemployed||0);const Ja=bs.map((f,h)=>{const q=Math.max(0,F[f]||0),_e=Te[f]||0,Ee=Math.max(0,q-_e);return f==="soldier"&&console.log("[SOLDIER VACANCY] slots:",q,"current:",_e,"vacancy:",Ee),Ee<=0?null:{role:f,vacancy:Ee,netIncome:js(f),priorityIndex:h}}).filter(Boolean).sort((f,h)=>h.netIncome!==f.netIncome?h.netIncome-f.netIncome:f.priorityIndex-h.priorityIndex);console.log("[VACANCY RANKING]",Ja.map(f=>`${f.role}:${f.vacancy}`).join(", ")),Ja.forEach(f=>{const h=Te.unemployed||0;if(h<=0)return;const q=Math.min(f.vacancy,h);if(q<=0)return;const _e=u.unemployed||0,Ee=h>0?_e/h:0;if(Te[f.role]=(Te[f.role]||0)+q,Te.unemployed=Math.max(0,h-q),f.role==="soldier"&&console.log("[SOLDIER HIRING] hired:",q,"new soldier count:",Te[f.role]),Ee>0){const Pe=Ee*q;u.unemployed=Math.max(0,_e-Pe),u[f.role]=(u[f.role]||0)+Pe}});const Ke={},$t={},Et={},dt=[],Wt={};Object.entries(Ge).forEach(([f,h])=>{if(!h)return;const q=h,_e=B[f]||0;if(q>=0)B[f]=_e+q,te[f]=(te[f]||0)+q;else{const Ee=Math.abs(q),Pe=Math.min(_e,Ee);Pe>0&&(B[f]=_e-Pe,te[f]=(te[f]||0)-Pe)}});const La={},Ds=1-Math.max(0,Math.min(.95,Ae||0));Object.keys(Fe).forEach(f=>{const h=Te[f]||0;if(h===0)return;const q=Fe[f];u[f]===void 0&&(u[f]=q.startingWealth||0);const _e=C(f),Ee=Fe[f]?.headTaxBase??.01,Pe=h*Ee*_e*as;if(Pe!==0){const He=u[f]||0;if(Pe>0){const st=Math.min(He,Pe);u[f]=He-st,le.headTax+=st,rt[f]=(rt[f]||0)+st}else{const st=-Pe,et=B.silver||0;et>=st&&(B.silver=et-st,u[f]=He+st,le.subsidy+=st,X[f]=(X[f]||0)+st)}}Ke[f]=y[f]??50,(Ke[f]||0)<=0&&(La[f]=!0)});const Rn=p.some(f=>f.id==="forced_labor"&&f.active);console.log("[TICK] Starting production loop..."),is.forEach(f=>{const h=pe[f.id]||0;if(h===0)return;const q=f.owner||"state";u[q]===void 0&&(u[q]=Fe[q]?.startingWealth||0);let _e=1;const Ee=xa[v];Ee&&Ee.bonuses&&(f.cat==="gather"&&Ee.bonuses.gatherBonus&&(_e*=1+Ee.bonuses.gatherBonus),f.cat==="industry"&&Ee.bonuses.industryBonus&&(_e*=1+Ee.bonuses.industryBonus));let Pe=1,He=1;k.forEach(ue=>{ue.production&&(Pe+=ue.production),ue.industryBonus&&(He+=ue.industryBonus)}),_.forEach(ue=>{ue.production&&(Pe+=ue.production),ue.industryBonus&&(He+=ue.industryBonus)}),Pe*=1+xt,He*=1+P,(f.cat==="gather"||f.cat==="civic")&&(_e*=Pe),f.cat==="industry"&&(_e*=He),ie.includes("wheel")&&f.cat==="gather"&&(_e*=1.2),ie.includes("pottery")&&f.id==="farm"&&(_e*=1.1),ie.includes("basic_irrigation")&&f.id==="farm"&&(_e*=1.15);const st=fe[f.cat];st&&st!==1&&(_e*=st);const et=De[f.id];et&&et!==1&&(_e*=et);let tt=1,ct=0,ht=0;const Dt={};let Ht=0;const Zt=[];if(f.jobs){Wt[f.id]=Wt[f.id]||{};for(let ue in f.jobs){const nt=f.jobs[ue]*h;Re[ue]||(Re[ue]={totalSlots:0,weightedWage:0}),ct+=nt;const Mt=F[ue],us=Te[ue],na=Mt>0?Math.min(1,us/Mt):0,Na=nt*na;ht+=Na,Wt[f.id][ue]=Na;const ma=Math.max(0,nt-Na);if(ma>.001){const sa=ma>=1?Math.floor(ma):1;(ke[ue]||(ke[ue]=[])).push({buildingId:f.id,buildingName:f.name||f.id,availableSlots:sa})}if(ue!==q&&Na>0){const sa=Dt[ue]??R(ue),Rt=O(ue),wa=Math.max(sa,Rt);Dt[ue]=wa,Ht+=Na*wa,Zt.push({role:ue,roleSlots:nt,filled:Na,baseWage:wa})}}if(ct>0&&(tt=ht/ct),ct>0&&ht<=0)return}_e*=tt,Rn&&(f.jobs?.serf||f.jobs?.miner)&&(_e*=1.2);const wt=_e;let Ot=1,ft=0,ut=!1;if(f.input)for(const[ue,nt]of Object.entries(f.input)){if(!ur(ue,v,ie))continue;const Mt=nt*h,us=Mt*wt;if(us<=0)continue;const na=B[ue]||0;if(na<=0?Ot=0:Ot=Math.min(Ot,na/us),As(ue)){const Na=Gt(ue),ma=$(ue);ft+=Mt*Na*(1+ma)}}let Le=wt*Math.max(0,Math.min(1,Ot));if(f.cat==="gather"&&Ot===0&&f.input){Le=wt*.2,ut=!0,ft=0;const ue=Object.keys(f.input).map(nt=>Me[nt]?.name||nt).join("");S%30===0&&dt.push(` ${f.name}  ${ue}20%`)}let Ct=0,ta=!1;if(f.output)for(const[ue,nt]of Object.entries(f.output)){if(ue==="maxPop"||!As(ue))continue;ta=!0;const us=nt*h*Gt(ue),na=$(ue),Na=us*(1-na);Ct+=Na}const Ua=wt>0?Ht/wt:Ht,Qt=Ct*Le,ds=ft*Le,Ns=Ua*Le,an=Math.max(0,Qt-ds),Aa=Ns>0?an/Ns:1,Ia=Number.isFinite(Aa)?Aa>=1?Math.min(1.4,1+(Aa-1)*.35):Math.max(.65,1-(1-Aa)*.5):1,Rs=Ua*Ia,pl=Rs*Le,ca=J(f.id),Va=ca*h*Le,oa=ft+Rs;let aa=Le;if(ta){const ue=ds+pl+Math.max(0,Va);if(ue>0&&Qt<=0)aa=0;else if(ue>0&&Qt<ue*.98){const nt=Math.max(0,Math.min(1,Qt/ue));aa=Le*nt}}if(oa>0){const nt=(u[q]||0)/oa;aa=Math.min(aa,Math.max(0,nt))}(!Number.isFinite(aa)||aa<0)&&(aa=0);const ja=.3;let Ga=1;La[q]&&(Ga=Math.min(Ga,ja)),f.jobs&&Object.keys(f.jobs).forEach(ue=>{La[ue]&&(Ga=Math.min(Ga,ja))}),aa*=Ga;const Hl=wt>0?Math.min(1,aa/wt):0;let fn=0;if(f.input&&!ut)for(const[ue,nt]of Object.entries(f.input)){if(!ur(ue,v,ie))continue;const Mt=nt*h*aa;if(!Mt||Mt<=0)continue;const us=B[ue]||0,na=Math.min(Mt,us);if(As(ue)){const Na=Gt(ue),ma=$(ue),sa=na*Na,Rt=sa*ma;let wa=sa;if(Rt<0){const ms=Math.abs(Rt);(B.silver||0)>=ms?(B.silver-=ms,le.subsidy+=ms,wa-=ms):S%20===0&&dt.push(` ${f.name}  ${Me[ue]?.name||ue} `)}else Rt>0&&(le.industryTax+=Rt,wa+=Rt);u[q]=Math.max(0,(u[q]||0)-wa),rt[q]=(rt[q]||0)+wa,ne[ue]=(ne[ue]||0)+na}na<=0||(B[ue]=us-na,te[ue]=(te[ue]||0)-na)}f.jobs&&Object.entries(f.jobs).forEach(([ue,nt])=>{const Mt=nt*h;Mt<=0||(Re[ue]||(Re[ue]={totalSlots:0,weightedWage:0}),Re[ue].totalSlots+=Mt)});const Ci=Zt.map(ue=>{const nt=ue.baseWage*Hl*Ia,Mt=nt*ue.filled;return fn+=Mt,{...ue,expectedSlotWage:nt}});let xl=0;if(fn>0){const ue=u[q]||0,nt=Math.min(ue,fn);u[q]=ue-nt,rt[q]=(rt[q]||0)+nt,xl=nt/fn}if(Ci.forEach(ue=>{const nt=ue.expectedSlotWage*xl;if(Re[ue.role].weightedWage+=nt*ue.roleSlots,ue.filled>0&&nt>0){const Mt=nt*ue.filled;X[ue.role]=(X[ue.role]||0)+Mt}}),f.output)for(const[ue,nt]of Object.entries(f.output)){let Mt=nt*h*aa;if(!(!Mt||Mt<=0)){if(As(ue)&&ue!=="silver"){const na=Me[ue]?.marketConfig||{},Na=Al?.market||{},ma=na.outputVariation!==void 0?na.outputVariation:Na.outputVariation||.2,sa=1+(Math.random()*2-1)*ma;Mt*=sa}if(ue==="maxPop"){B[ue]=(B[ue]||0)+Mt;continue}As(ue)?(Fa(ue,Mt,q),te[ue]=(te[ue]||0)+Mt):B[ue]=(B[ue]||0)+Mt}}if(ca!==0&&h>0){const ue=ca*h*aa;if(ue>0){const nt=u[q]||0;nt>=ue?(u[q]=nt-ue,le.businessTax+=ue):S%30===0&&nt<ue*.5&&dt.push(` ${Fe[q]?.name||q}  ${f.name} `)}else if(ue<0){const nt=Math.abs(ue),Mt=B.silver||0;Mt>=nt?(B.silver=Mt-nt,u[q]=(u[q]||0)+nt,X[q]=(X[q]||0)+nt,le.subsidy+=nt):S%30===0&&dt.push(`  ${f.name} `)}}if(f.id==="market"){const ue=f.owner||"merchant",nt=(Te[ue]||0)>0,Mt=S%5===0;if(nt&&Mt){let na=u[ue]||0;if(!(na<=0)){const Na=[];if(Object.entries(B).forEach(([ma,sa])=>{if(!As(ma)||ma==="silver"||(sa||0)<=300||(te[ma]||0)<0)return;const Rt=Gt(ma);Na.push({resource:ma,stock:sa,localPrice:Rt})}),Na.length>0){const ma=[];if(Object.keys(Me).forEach(sa=>{if(!As(sa)||sa==="silver")return;const Rt=B[sa]||0,wa=te[sa]||0,ms=Math.max(0,(ne[sa]||0)-(L[sa]||0)),pn=Math.max(0,200-Rt),ws=wa<0?Math.abs(wa):0,Qs=Math.max(ms,pn,ws);if(Qs<=0)return;const xn=Math.max(xi,Gt(sa)*1.15),Fs=Qs*xn;Fs<=0||ma.push({resource:sa,shortageAmount:Qs,importPrice:xn,requiredValue:Fs})}),ma.length>0){ma.sort((Rt,wa)=>wa.requiredValue-Rt.requiredValue);const sa=10;ma.forEach(Rt=>{if(na<=0)return;let wa=Rt.shortageAmount,ms=Rt.requiredValue;for(const pn of Na){if(na<=0||wa<=0||ms<=0)break;const ws=pn.resource,Qs=pn.localPrice;if(Qs<=0)continue;const xn=B[ws]||0;if(xn<=0)continue;const Fs=ms/Qs,Bc=xn*.05,$c=na/Qs,sn=Math.min(Fs,Bc,$c);if(!Number.isFinite(sn)||sn<=0)continue;const hn=sn*Qs;if(na-=hn,u[ue]=na,rt[ue]=(rt[ue]||0)+hn,B[ws]=Math.max(0,xn-sn),L[ws]=(L[ws]||0)+sn,te[ws]=(te[ws]||0)-sn,pn.stock=Math.max(0,pn.stock-sn),ms=Math.max(0,ms-hn),Rt.importPrice<=0)continue;let fs=hn/Rt.importPrice;if(!Number.isFinite(fs)||fs<=0||(fs=Math.min(fs,wa),fs<=0))continue;const nn=fs*Rt.importPrice;u[ue]+=nn,na+=nn,B[Rt.resource]=(B[Rt.resource]||0)+fs,L[Rt.resource]=(L[Rt.resource]||0)+fs,te[Rt.resource]=(te[Rt.resource]||0)+fs,wa=Math.max(0,wa-fs);const gn=nn-hn;if(gn>0&&(be[ue]=(be[ue]||0)+gn,X[ue]=(X[ue]||0)+gn),nn>sa){const Uc=Me[ws]?.name||ws,Ll=Me[Rt.resource]?.name||Rt.resource;dt.push(`  ${hn.toFixed(1)}  ${sn.toFixed(1)} ${Uc} ${fs.toFixed(1)} ${Ll}`)}}})}}}}}f.jobs&&Object.entries(f.jobs).forEach(([ue,nt])=>{const Mt=nt*h;Mt<=0||(Re[ue].totalSlots+=Mt,ue!==q&&(Re[ue].weightedWage+=0*Mt,Wt[f.id]?.[ue]))})});const Ra=Math.max(0,D??0),ra=Gt("food"),ha=$e*ra*Ra;if(ha>0){const f=ha,h=B.silver||0;h>=f?(B.silver=h-f,te.silver=(te.silver||0)-f,X.soldier=(X.soldier||0)+f):f>0&&dt.push("")}console.log("[TICK] Production loop completed."),zt(),console.log("[TICK] Starting needs calculation...");const ba={},ss={};Object.keys(Fe).forEach(f=>{const h=Fe[f],q=Te[f]||0;if(q===0||!h.needs){ba[f]={satisfactionRatio:1,totalTrackedNeeds:0},ss[f]=[];return}let _e=0,Ee=0;const Pe=[];for(const[He,st]of Object.entries(h.needs)){if(h.defaultResource&&h.defaultResource===He)continue;const et=Me[He];if(et&&et.unlockTech){if(!ie.includes(et.unlockTech))continue}else if(et&&typeof et.unlockEpoch=="number"&&et.unlockEpoch>v)continue;if(!kt.has(He))continue;let tt=st*q*Ds;if(tt<=0)continue;if(As(He)){const Dt=et?.marketConfig||{},Ht=Al?.market||{},Zt=Dt.demandElasticity!==void 0?Dt.demandElasticity:Ht.demandElasticity||.5,wt=h.startingWealth||1,ut=1+((u[f]||0)/Math.max(1,q)/wt-1)*.5,Le=Gt(He),Ct=et.basePrice||1,ta=Le/Ct,Ua=Math.pow(ta,-Zt),Qt=.8+Math.random()*.4;tt*=ut*Ua*Qt,tt=Math.max(0,tt),tt=Math.min(tt,st*q*Ds*3)}const ct=B[He]||0;let ht=0;if(As(He)){const Dt=Gt(He),Ht=Dt*(1+$(He)),Zt=Ht>0?Math.min(tt,(u[f]||0)/Ht):tt,wt=Math.min(tt,ct,Zt);if(wt>0){B[He]=ct-wt,te[He]=(te[He]||0)-wt;const ft=$(He),ut=wt*Dt,Le=ut*ft;let Ct=ut;if(Le<0){const ta=Math.abs(Le);(B.silver||0)>=ta?(B.silver-=ta,le.subsidy+=ta,Ct-=ta):S%20===0&&dt.push(` ${Fe[f]?.name||f}  ${Me[He]?.name||He} `)}else Le>0&&(le.industryTax+=Le,Ct+=Le);u[f]=Math.max(0,(u[f]||0)-Ct),rt[f]=(rt[f]||0)+Ct,ht=wt,ne[He]=(ne[He]||0)+wt}const Ot=tt>0?ht/tt:1;if(_e+=Ot,Ee+=1,Ot<.99){const ft=Zt>=tt*.99,ut=ct>=tt*.99;let Le="both";ft&&!ut?Le="outOfStock":!ft&&ut&&(Le="unaffordable"),Pe.push({resource:He,reason:Le})}}else{const Dt=Math.min(tt,ct);Dt>0&&(B[He]=ct-Dt,ht=Dt);const Ht=tt>0?ht/tt:1;_e+=Ht,Ee+=1,Ht<.99&&Pe.push({resource:He,reason:"outOfStock"})}}ba[f]={satisfactionRatio:Ee>0?_e/Ee:1,totalTrackedNeeds:Ee},ss[f]=Pe});let un=0,en=0;Object.keys(Fe).forEach(f=>{const h=Te[f]||0;if(h<=0)return;en+=h;const q=ba[f]?.satisfactionRatio??1;un+=q*h});const cs=.3+.7*(en>0?un/en:1);cs<.999&&(Object.entries(te).forEach(([f,h])=>{const q=Me[f];if(!(!q||f==="silver"||q.type&&q.type==="virtual")&&h>0){const _e=h*(1-cs);te[f]=h-_e,B[f]=Math.max(0,(B[f]||0)-_e)}}),dt.push("")),p.forEach(f=>{if(f.active&&(f.id==="forced_labor"&&(Te.serf>0&&(Ke.serf=Math.max(0,(Ke.serf||50)-20)),Te.miner>0&&(Ke.miner=Math.max(0,(Ke.miner||50)-15)),Te.landowner>0&&(Ke.landowner=Math.min(100,(Ke.landowner||50)+10))),f.id==="tithe")){Te.cleric>0&&(Ke.cleric=Math.max(0,(Ke.cleric||50)-10));const h=(Te.cleric||0)*2*as;if(h>0){const q=u.cleric||0,_e=Math.min(q,h);u.cleric=Math.max(0,q-_e),le.headTax+=_e,rt.cleric=(rt.cleric||0)+_e}}}),Object.keys(Fe).forEach(f=>{const h=Te[f]||0;if(h===0)return;const q=ba[f],_e=q?.satisfactionRatio??1;let Ee=70;const Pe=C(f),He=Fe[f]?.headTaxBase??.01,st=Math.max(0,He*Pe*as),et=(X[f]||0)/Math.max(1,h);et>.001&&st>et*.5?Ee=Math.min(Ee,40):Pe<.6&&(Ee+=5);const tt=q?.totalTrackedNeeds??0,ct=(ss[f]||[]).length;ct>0&&tt>0&&(ct>=tt?Ee=Math.min(Ee,0):Ee=Math.min(Ee,30));const ht=(Ce||{})[f];if(ht&&ht.length>0){let ut=0;for(let Le=ht.length-1;Le>=0&&ut<20&&ht[Le]>=.95;Le--)ut+=1;if(ut>=3){const Le=Math.min(15,ut*.6);Ee=Math.min(100,Ee+Le)}}const Dt=(ce||{})[f];if(Dt&&Dt.length>=20){const Ot=Dt.slice(-10).reduce((ut,Le)=>ut+Le,0)/10,ft=Dt.slice(-20,-10).reduce((ut,Le)=>ut+Le,0)/10;if(ft>1){const ut=(Ot-ft)/ft,Le=Math.min(15,Math.abs(ut)*50);ut>.05?Ee+=Le:ut<-.05&&(Ee-=Le)}}if(_e>1.5&&(Ee=Math.min(100,Ee+10)),f==="unemployed"){const ft=2+h/Math.max(1,m)*30;Ee-=ft}const Ht=Ke[f]||50;let wt=Ht+(Ee-Ht)*.08;Ke[f]=Math.max(0,Math.min(100,wt))}),(Te.unemployed||0)===0&&y.unemployed!==void 0&&(Ke.unemployed=Math.min(100,y.unemployed+5));let Sa=m,we=0;Object.keys(Fe).forEach(f=>{Et[f]=Math.max(0,u[f]||0)});let Qe=Object.values(Et).reduce((f,h)=>f+h,0);Object.keys(Fe).forEach(f=>{const h=Te[f]||0;if(h===0)return;const q=Fe[f],_e=Et[f]||0,Ee=Qe>0?_e/Qe:0;$t[f]=q.influenceBase*h+Ee*10});let qe=Object.values($t).reduce((f,h)=>f+h,0),Yt=0,Oe=0;Object.keys(Fe).forEach(f=>{const h=Te[f]||0;if(h===0)return;const q=Ke[f]||50;if(q>=25)return;const _e=qe>0?($t[f]||0)/qe:0,Ee=Fe[f]?.name||f;if(q<20&&_e<.07){const Pe=Math.max(.03,(20-q)/200),He=Math.min(h,Math.max(1,Math.floor(h*Pe)));if(He>0){const tt=u[f]||0,ht=(h>0?tt/h:0)*He;ht>0&&(u[f]=Math.max(0,tt-ht))}Yt+=He;const st=(ss[f]||[]).map(tt=>{const ct=typeof tt=="string"?tt:tt.resource,ht=typeof tt=="string"?"outOfStock":tt.reason,Dt=Me[ct]?.name||ct;return ht==="unaffordable"?`${Dt}()`:ht==="outOfStock"?`${Dt}()`:ht==="both"?`${Dt}()`:Dt}).join(""),et=st?`${st}`:"";dt.push(`${Ee} ${He}  ${(He*(u[f]||0)/Math.max(1,h)).toFixed(1)} ${et}`)}else if(_e>=.12){const Pe=Math.min(.2,.05+_e*.15);Oe+=Pe;const He=(ss[f]||[]).map(et=>{const tt=typeof et=="string"?et:et.resource,ct=typeof et=="string"?"outOfStock":et.reason,ht=Me[tt]?.name||tt;return ct==="unaffordable"?`${ht}()`:ct==="outOfStock"?`${ht}()`:ct==="both"?`${ht}()`:ht}).join(""),st=He?`${He}`:"";dt.push(`${Ee} ${st}`)}});const Be=[],Ut=[];Object.keys(Fe).forEach(f=>{const h=Fe[f];if(!h.buffs||(Te[f]||0)===0)return;const q=Ke[f]||50,_e=(ba[f]?.satisfactionRatio??1)>=.9,Ee=qe>0?($t[f]||0)/qe:0,Pe=Ee>.8?2:Ee>.5?1.5:1,He=q>=85&&Ee>=.3,st=q>=85&&_e;if((He||st)&&h.buffs.satisfied){const et=P0(h.buffs.satisfied,Pe);Be.push({class:f,...et})}else if(q<40&&h.buffs.dissatisfied&&Ee>=.3){const et=P0(h.buffs.dissatisfied,Pe);Ut.push({class:f,...et})}});let Ie=0,Nt=0;Object.keys(Fe).forEach(f=>{if((Te[f]||0)===0)return;const q=Ke[f]||50,_e=$t[f]||0,Ee=qe>0?_e/qe:0;Ie+=q*Ee,Nt+=Ee});let Ka=Nt>0?Ie:50,yt=0;Be.forEach(f=>{f.stability&&(yt+=f.stability)}),Ut.forEach(f=>{f.stability&&(yt+=f.stability)}),yt-=Oe;const Ba=Math.max(0,Math.min(100,Ka+yt)),Xs=Math.min(1.5,Math.max(.5,1+(Ba-50)/100)),Ps=v;let qa=0;const $a=(A||[]).map(f=>{const h={...f};if(!(Ps>=(f.appearEpoch??0)&&(f.expireEpoch==null||Ps<=f.expireEpoch)))return h.isAtWar&&(h.isAtWar=!1,h.warDuration=0,h.warScore=0,h.warStartDay=void 0,dt.push(`  ${h.name} `)),h;h.inventory?h.inventory={...h.inventory}:h.inventory={},typeof h.budget!="number"&&(h.budget=(h.wealth||800)*.5);const _e=h.economyTraits?.resourceBias||{},Ee=Object.keys(Me).filter(As);Ee.length>0&&Ee.forEach(Zt=>{const wt=_e[Zt]??1,Ot=h.inventory[Zt]||0,ft=500,ut=3*j,Le=3*j,Ct=ut*wt,ta=Le/Math.max(wt,.25),Ua=Ot/ft;let Qt=1,ds=1;Ua>1.5?(Qt*=.5,ds*=1.15):Ua>1.1?(Qt*=.8,ds*=1.05):Ua<.5?(Qt*=1.5,ds*=.85):Ua<.9&&(Qt*=1.2,ds*=.95);const Ns=(ft-Ot)*.01*j,an=(Math.random()-.5)*ft*.3*j,Aa=Ct*Qt,Ia=ta*ds,Rs=Aa-Ia+Ns+an,pl=ft*.2,ca=ft*3,Va=Ot+Rs;h.inventory[Zt]=Math.max(pl,Math.min(ca,Va))});const Pe=(h.wealth||800)*.5,He=.02,st=Pe-h.budget;if(h.budget=h.budget+st*He*j,h.budget=Math.max(0,h.budget),h.isAtWar){if(h.warDuration=(h.warDuration||0)+1,Ps>=1){const Ot=Math.max(0,-(h.warScore||0)),ft=Math.min(.18,.02+(h.aggression||.2)*.04+Ot/400);if(Math.random()<ft){const ut=Math.max(h.appearEpoch||0,Math.min(v,h.expireEpoch??v)),Le=h.militaryStrength??1,Ct=Math.max(.3,Math.min(1.5,(h.wealth||500)/800)),ta=1+(h.aggression||.2),Ua=1+Math.max(-.5,(h.warScore||0)/120),Qt=.05+(h.aggression||.2)*.05+Ot/1200,ds=Le*Ct*ta*Ua,Ns={},an=op(ut,"light"),Aa=2+Math.random()*4,Ia=Math.floor(Aa*ds);an.forEach(ca=>{if(Da[ca]){const Va=.5+Math.random()*.8,oa=Math.floor(Ia/an.length*Va);oa>0&&(Ns[ca]=oa)}});const Rs={...U};if(Object.values(Rs).reduce((ca,Va)=>ca+Va,0)===0){const ca=Math.floor((B.food||0)*Qt),Va=Math.floor((B.silver||0)*(Qt/2));ca>0&&(B.food=Math.max(0,(B.food||0)-ca)),Va>0&&(B.silver=Math.max(0,(B.silver||0)-Va));const oa=Math.min(3,Math.max(1,Math.floor(Qt*20)));we+=oa;const aa={nationName:h.name,victory:!1,attackerArmy:Ns,defenderArmy:{},attackerLosses:{},defenderLosses:{},foodLoss:ca,silverLoss:Va,popLoss:oa,ourPower:0,enemyPower:0},ja=`RAID_EVENT${JSON.stringify(aa)}`;console.log("[SIMULATION] Pushing raid log (no army):",ja),dt.push(ja),h.warScore=(h.warScore||0)-8}else{const ca={army:Ns,epoch:ut,militaryBuffs:.1},Va={army:Rs,epoch:v,militaryBuffs:0,wealth:(B.food||0)+(B.silver||0)+(B.wood||0)},oa=mp(ca,Va);let aa=0,ja=0,Ga=0;oa.victory&&(aa=Math.floor((B.food||0)*Qt),ja=Math.floor((B.silver||0)*(Qt/2)),aa>0&&(B.food=Math.max(0,(B.food||0)-aa)),ja>0&&(B.silver=Math.max(0,(B.silver||0)-ja)),Ga=Math.min(3,Math.max(1,Math.floor(Qt*20))),we+=Ga),Object.entries(oa.defenderLosses||{}).forEach(([ue,nt])=>{U[ue]&&(U[ue]=Math.max(0,U[ue]-nt))});const Hl=Object.values(oa.attackerLosses||{}).reduce((ue,nt)=>ue+(nt||0),0);Hl>0&&(h.enemyLosses=(h.enemyLosses||0)+Hl);const fn=oa.victory?-8:6;h.warScore=(h.warScore||0)+fn;const Ci={nationName:h.name,victory:!oa.victory,attackerArmy:Ns,defenderArmy:Rs,attackerLosses:oa.attackerLosses||{},defenderLosses:oa.defenderLosses||{},foodLoss:aa,silverLoss:ja,popLoss:Ga,ourPower:oa.defenderPower,enemyPower:oa.attackerPower,battleReport:oa.battleReport||[]},xl=`RAID_EVENT${JSON.stringify(Ci)}`;console.log("[SIMULATION] Pushing raid log (with army):",xl),dt.push(xl)}}}const Zt=Number.isFinite(h.lastPeaceRequestDay)?h.lastPeaceRequestDay:-1/0,wt=S-Zt>=gh;if((h.warScore||0)>12&&wt){const Ot=Math.min(.5,.03+(h.warScore||0)/120+(h.warDuration||0)/400)+Math.min(.15,(h.enemyLosses||0)/500);if(Math.random()<Ot){const ft=Math.ceil((h.warScore||0)*30+(h.enemyLosses||0)*2),ut=Math.max(200,Math.floor((h.wealth||800)*.1)),Le=Math.floor((h.wealth||800)*.8),Ct=Math.min(Le,Math.max(ut,ft));dt.push(` ${h.name}  ${Ct} `),h.isPeaceRequesting=!0,h.peaceTribute=Ct,h.lastPeaceRequestDay=S}}}else h.warDuration&&(h.warDuration=0);const et=h.relation??50,tt=h.aggression??.2,ct=Math.max(0,(50-et)/70),ht=Ba<35?.02:0,Dt=Ps>=1?Math.min(.08,tt*.04+ct*.04+ht):0,Ht=h.peaceTreatyUntil&&S<h.peaceTreatyUntil;if(!h.isAtWar&&!Ht&&et<35&&Math.random()<Dt&&(h.isAtWar=!0,h.warStartDay=S,h.warDuration=0,dt.push(` ${h.name} `)),h.installmentPayment&&h.installmentPayment.remainingDays>0){const Zt=h.installmentPayment.amount;B.silver=(B.silver||0)+Zt,qa+=Zt,h.installmentPayment.paidAmount+=Zt,h.installmentPayment.remainingDays-=1,h.installmentPayment.remainingDays===0&&(dt.push(` ${h.name} ${h.installmentPayment.totalAmount}`),delete h.installmentPayment)}if(!h.isAtWar){const Zt=h.militaryStrength??1;Zt<1&&(h.militaryStrength=Math.min(1,Zt+.005));const wt=h.economyTraits?.baseWealth||h.wealth||800,Ot=h.wealth||0;if(Ot<wt){const Le=Math.max(1,wt*.002);h.wealth=Math.min(wt,Ot+Le)}const ft=h.economyTraits?.basePopulation||1e3,ut=h.population??ft;if(ut<ft){const Le=Math.max(1,ft*.003);h.population=Math.min(ft,ut+Le)}}return h});if((B.food||0)>m*1.5&&m<Ue){const f=Math.max(0,(Ba-50)/150),h=Math.max(.15,.5-Math.min(.35,f));if(Math.random()>h){const q=Math.min(3,Math.max(1,Math.floor(m*.02)));Sa=Math.min(Ue,Sa+q)}}(B.food||0)<=0&&(B.food=0,Math.random()>.9&&Sa>2&&(Sa=Sa-1,dt.push("")));const os=we+Yt;os>0&&(Sa=Math.max(0,Sa-os)),Object.keys(B).forEach(f=>{B[f]<0&&(B[f]=0)});const Ol=le.headTax*Xs,ul=le.industryTax*Xs,Rl=le.businessTax*Xs,$n=Ol+ul+Rl,Ni=$n+qa;B.silver=(B.silver||0)+Ni,te.silver=(te.silver||0)+Ni,console.log("[TICK] Starting price and wage updates...");const St={...de},ea={},mn=.35;Object.entries(Re).forEach(([f,h])=>{let q=0;const _e=Te[f]||0;if(_e>0){const He=X[f]||0,st=rt[f]||0;q=(He-st)/_e}else h.weightedWage>0&&h.totalSlots>0?q=h.weightedWage/h.totalSlots:q=b[f]||0;q=Math.max(0,q);const Ee=b[f]||0,Pe=Ee+(q-Ee)*mn;ea[f]=parseFloat(Pe.toFixed(2))});const Os=Math.max(0,Sa??m??0),Ve=Al?.market||{},xr=Math.max(0,Ve.supplyDemandWeight??1),hr=Math.max(0,Ve.virtualDemandPerPop||0),Un=Math.max(.1,Ve.inventoryTargetDays??1.5),Oc=Math.max(0,Ve.inventoryPriceImpact??.25);Object.keys(Me).forEach(f=>{if(!As(f))return;const h=Me[f],q=h?.marketConfig||{};q.supplyDemandWeight!==void 0&&Math.max(0,q.supplyDemandWeight);const _e=q.virtualDemandPerPop!==void 0?Math.max(0,q.virtualDemandPerPop):hr,Ee=q.inventoryTargetDays!==void 0?Math.max(.1,q.inventoryTargetDays):Un;q.inventoryPriceImpact!==void 0&&Math.max(0,q.inventoryPriceImpact),L[f];const Pe=ne[f]||0,He=_e*Os,et=(Pe+He)/j,tt=B[f]||0,ct=et>0?tt/et:Ee,ht=[];let Dt=0;is.forEach(Le=>{const Ct=Le.output?.[f];if(!Ct||Ct<=0)return;const ta=pe[Le.id]||0;if(ta<=0)return;const Ua=Le.marketConfig||{},Qt=Ua.price||Al?.price||{},ds=Ua.wage||Al?.wage||{};Mc(G,Qt);const Ns=Mc(G,ds);Le.input&&Object.entries(Le.input).forEach(([ja,Ga])=>{!Ga||Ga<=0||(de[ja]||or(ja),$(ja))});const an=Le.owner&&Le.jobs&&Le.jobs[Le.owner];Le.jobs&&!an&&Object.entries(Le.jobs).forEach(([ja,Ga])=>{!Ga||Ga<=0||ea[ja]||R(ja)}),E?.businessTaxRates?.[Le.id],Le.businessTaxBase,Le.owner&&(Ns[Le.owner]||0)*(Le.jobs[Le.owner]||0);const Aa=ct/Ee;let Ia=1;Aa<.5?Ia=1+(1-Aa*2)*5:Aa<1?Ia=1+(1-Aa)*1:Aa>2?(Ia=1-(Aa-2)*.3,Ia=Math.max(.1,Ia)):Aa>1&&(Ia=1-(Aa-1)*.3);let ca=or(f)*Ia;const Va=h.minPrice??xi,oa=h.maxPrice;ca=Math.max(ca,Va),oa!==void 0&&(ca=Math.min(ca,oa));const aa=Ct*ta;Dt+=aa,ht.push({price:ca,output:aa})});let Ht=0;if(Dt>0&&ht.length>0){let Le=0;ht.forEach(Ct=>{Le+=Ct.price*Ct.output}),Ht=Le/Dt}else{const Le=or(f),Ct=ct/Ee;let ta=1;Ct<.5?ta=1+(1-Ct*2)*5:Ct<1?ta=1+(1-Ct)*1:Ct>2?(ta=1-(Ct-2)*.3,ta=Math.max(.1,ta)):Ct>1&&(ta=1-(Ct-1)*.3),Ht=Le*ta;const Ua=h.minPrice??xi,Qt=h.maxPrice;Ht=Math.max(Ht,Ua),Qt!==void 0&&(Ht=Math.min(Ht,Qt))}const Zt=de[f]||Ht,wt=Zt+(Ht-Zt)*.1,Ot=h.minPrice??xi,ft=h.maxPrice;let ut=wt;ut=Math.max(ut,Ot),ft!==void 0&&(ut=Math.min(ut,ft)),St[f]=parseFloat(ut.toFixed(2))});const gr=f=>{const h=(ce||{})[f];if(!h||h.length<2)return null;const q=h[h.length-1],_e=h[h.length-2],Ee=Math.max(1,o?.[f]||0);return(q-_e)/Ee},yr=f=>{const h=ke[f];return!h||h.length===0?!1:h.some(q=>q&&q.availableSlots>0)},wi=(f,h)=>{const q=ke[f];if(!q||q.length===0||h<=0)return null;let _e=-1,Ee=0;for(let et=0;et<q.length;et++){const tt=q[et];if(!tt)continue;const ct=tt.availableSlots>=1?Math.floor(tt.availableSlots):tt.availableSlots>0?1:0;ct>Ee&&(Ee=ct,_e=et)}if(_e===-1||Ee<=0)return null;const Pe=q[_e],He=Math.min(h,Ee),st={buildingId:Pe.buildingId,buildingName:Pe.buildingName,count:He};return Pe.availableSlots-=He,Pe.availableSlots<=0&&q.splice(_e,1),st},br={};bs.forEach(f=>{br[f]=Math.max(0,(F[f]||0)-(Te[f]||0))});const Bl=bs.map(f=>{const h=Te[f]||0,q=Et[f]||0,_e=g?.[f]||0,Ee=q-_e,Pe=h>0?q/h:0,He=h>0?Ee/h:0,st=X[f]||0,et=rt[f]||0,ct=(st-et)/Math.max(1,h),ht=ea[f]||R(f),Ht=(Fe[f]?.headTaxBase??.01)*C(f)*as,Zt=ht-Ht,wt=gr(f),Ot=wt!==null?wt:He,ut=Ot!==0?Ot:ct!==0?ct:Zt,Le=Pe>0?Pe*.002:0,Ct=ut+Le;return{role:f,pop:h,perCap:Pe,perCapDelta:He,potentialIncome:Ct,vacancy:br[f]||0}}),ml=Bl.reduce((f,h)=>h.pop>0?f+h.pop:f,0),Zs=ml>0?Bl.reduce((f,h)=>f+h.potentialIncome*h.pop,0)/ml:0,va=Bl.filter(f=>f.pop>0&&f.role!=="soldier"&&(f.potentialIncome<Zs*.7||f.perCapDelta<-.5)).reduce((f,h)=>!f||h.potentialIncome<f.potentialIncome||h.potentialIncome===f.potentialIncome&&h.perCapDelta<f.perCapDelta?h:f,null);let ns=null;if(va&&(ns=Bl.filter(f=>f.role!==va.role&&f.vacancy>0&&yr(f.role)&&f.potentialIncome>va.potentialIncome*1.3).reduce((f,h)=>!f||h.potentialIncome>f.potentialIncome?h:(h.potentialIncome===f.potentialIncome&&h.perCapDelta>f.perCapDelta,f),null)),va&&ns){let f=null,h=Math.floor(va.pop*Vf);if(h<=0&&va.pop>0&&Vf>0&&(h=1),h=Math.min(h,ns.vacancy),h>0){const q=wi(ns.role,h);!q||q.count<=0?h=0:(h=q.count,f=q)}if(h>0){const q=u[va.role]||0,Ee=(va.pop>0?q/va.pop:0)*h;Ee>0&&(u[va.role]=Math.max(0,q-Ee),u[ns.role]=(u[ns.role]||0)+Ee),Te[va.role]=Math.max(0,va.pop-h),Te[ns.role]=(Te[ns.role]||0)+h;const Pe=Fe[va.role]?.name||va.role,He=Fe[ns.role]?.name||ns.role,st=((ns.potentialIncome-va.potentialIncome)/Math.max(.01,va.potentialIncome)*100).toFixed(0),et=f?.buildingName?`${f.buildingName}`:"";dt.push(` ${h}  ${Pe}  ${He}${et} ${st}%`)}}const Hn=Et.merchant||0,Ln=jh({res:B,wealth:u,popStructure:Te,supply:L,demand:ne,nations:$a,tick:S,taxPolicies:Q,taxBreakdown:le,getLocalPrice:Gt,roleExpense:rt,roleWagePayout:X,pendingTrades:oe.pendingTrades||[],lastTradeTime:oe.lastTradeTime||0,gameSpeed:j,logs:dt});zt();const $l=Math.max(0,u.merchant||0),Ul=$l-Hn;if(Ul!==0){Et.merchant=$l,Qe+=Ul;const f=Fe.merchant;if(f){const h=Te.merchant||0,q=f.influenceBase*h+(Qe>0?$l/Qe*10:0),_e=q-($t.merchant||0);$t.merchant=q,qe+=_e}}const fl={total:$n-le.subsidy+qa,efficiency:Xs,breakdown:{headTax:Ol,industryTax:ul,businessTax:Rl,subsidy:le.subsidy,warIndemnity:qa}};return console.log("[TICK END]",S,"militaryCapacity:",ze),{resources:B,rates:te,popStructure:Te,maxPop:Ue,militaryCapacity:ze,population:Sa,classApproval:Ke,classInfluence:$t,classWealth:Et,totalInfluence:qe,totalWealth:Qe,activeBuffs:Be,activeDebuffs:Ut,stability:Ba,logs:dt,market:{prices:St,demand:ne,supply:L,wages:ea,needsShortages:ss},classIncome:X,classExpense:rt,jobFill:Wt,jobsAvailable:F,taxes:fl,needsShortages:ss,needsReport:ba,nations:$a,merchantState:Ln}},wh={epoch0:[{id:"stone_harvest_blessing",name:"",description:"",icon:"Wheat",type:"temporary",duration:360,effects:{categories:{gather:.25}},flavorText:""},{id:"stone_fertility_rite",name:"",description:"",icon:"Users",type:"temporary",duration:360,effects:{maxPop:5},flavorText:""},{id:"stone_tool_innovation",name:"",description:"",icon:"Wrench",type:"permanent",effects:{production:.05},flavorText:""},{id:"stone_hunting_ritual",name:"",description:"",icon:"Target",type:"temporary",duration:360,effects:{categories:{gather:.2},stability:.1},flavorText:""},{id:"stone_fire_mastery",name:"",description:"",icon:"Flame",type:"permanent",effects:{industry:.06},flavorText:""},{id:"stone_tribal_unity",name:"",description:"",icon:"Heart",type:"temporary",duration:360,effects:{stability:.2},flavorText:""},{id:"stone_cave_painting",name:"",description:"",icon:"Image",type:"permanent",effects:{cultureBonus:.08},flavorText:""},{id:"stone_elder_wisdom",name:"",description:"",icon:"BookOpen",type:"temporary",duration:360,effects:{production:.15,stability:.15},flavorText:""},{id:"stone_spirit_dance",name:"",description:"",icon:"Music",type:"temporary",duration:360,effects:{maxPop:8,stability:.12},flavorText:""},{id:"stone_stone_working",name:"",description:"",icon:"Hammer",type:"permanent",effects:{categories:{gather:.1}},flavorText:""}],epoch1:[{id:"bronze_trade_fair",name:"",description:"",icon:"ShoppingCart",type:"temporary",duration:360,effects:{taxIncome:.3},flavorText:""},{id:"bronze_military_parade",name:"",description:"",icon:"Shield",type:"temporary",duration:360,effects:{militaryBonus:.15},flavorText:""},{id:"bronze_metallurgy_advance",name:"",description:"",icon:"Flame",type:"permanent",effects:{industry:.08},flavorText:""},{id:"bronze_irrigation_festival",name:"",description:"",icon:"Droplet",type:"temporary",duration:360,effects:{categories:{gather:.35}},flavorText:""},{id:"bronze_writing_system",name:"",description:"",icon:"FileText",type:"permanent",effects:{cultureBonus:.1,scienceBonus:.1},flavorText:""},{id:"bronze_warrior_training",name:"",description:"",icon:"Swords",type:"temporary",duration:360,effects:{militaryBonus:.25,stability:.15},flavorText:""},{id:"bronze_merchant_guild",name:"",description:"",icon:"Coins",type:"permanent",effects:{taxIncome:.12},flavorText:""},{id:"bronze_temple_blessing",name:"",description:"",icon:"Church",type:"temporary",duration:360,effects:{production:.18,stability:.2,cultureBonus:.15},flavorText:""},{id:"bronze_wheel_invention",name:"",description:"",icon:"Circle",type:"permanent",effects:{production:.08,taxIncome:.1},flavorText:""},{id:"bronze_bronze_age_prosperity",name:"",description:"",icon:"TrendingUp",type:"temporary",duration:360,effects:{industry:.25,maxPop:12,taxIncome:.2},flavorText:""}],epoch2:[{id:"classical_philosophy_debate",name:"",description:"",icon:"BookOpen",type:"temporary",duration:360,effects:{scienceBonus:.25,cultureBonus:.25},flavorText:""},{id:"classical_olympic_games",name:"",description:"",icon:"Award",type:"temporary",duration:360,effects:{stability:.15,maxPop:10},flavorText:""},{id:"classical_architecture_school",name:"",description:"",icon:"Building",type:"permanent",effects:{categories:{industry:.1}},flavorText:""},{id:"classical_library_foundation",name:"",description:"",icon:"Library",type:"permanent",effects:{scienceBonus:.12,cultureBonus:.12},flavorText:""},{id:"classical_senate_reform",name:"",description:"",icon:"Scale",type:"temporary",duration:360,effects:{stability:.25},flavorText:""},{id:"classical_aqueduct_celebration",name:"",description:"",icon:"Waves",type:"temporary",duration:360,effects:{maxPop:15,production:.2},flavorText:""},{id:"classical_legion_triumph",name:"",description:"",icon:"Trophy",type:"temporary",duration:360,effects:{militaryBonus:.3,taxIncome:.25,stability:.18},flavorText:""},{id:"classical_theater_arts",name:"",description:"",icon:"Drama",type:"permanent",effects:{cultureBonus:.15,stability:.08},flavorText:""},{id:"classical_trade_routes",name:"",description:"",icon:"Route",type:"permanent",effects:{taxIncome:.15,production:.08},flavorText:""},{id:"classical_golden_age",name:"",description:"",icon:"Sun",type:"temporary",duration:360,effects:{production:.25,scienceBonus:.3,cultureBonus:.3,stability:.2},flavorText:""}],epoch3:[{id:"feudal_knights_tournament",name:"",description:"",icon:"Sword",type:"temporary",duration:360,effects:{militaryBonus:.2,cultureBonus:.15},flavorText:""},{id:"feudal_harvest_festival",name:"",description:"",icon:"Leaf",type:"temporary",duration:360,effects:{categories:{gather:.3},taxIncome:.2},flavorText:""},{id:"feudal_guild_system",name:"",description:"",icon:"Users",type:"permanent",effects:{production:.05},flavorText:""},{id:"feudal_castle_construction",name:"",description:"",icon:"Castle",type:"temporary",duration:360,effects:{militaryBonus:.25,stability:.2},flavorText:""},{id:"feudal_monastery_learning",name:"",description:"",icon:"BookHeart",type:"permanent",effects:{scienceBonus:.1,cultureBonus:.12},flavorText:""},{id:"feudal_manor_system",name:"",description:"",icon:"Home",type:"temporary",duration:360,effects:{production:.22,taxIncome:.25,categories:{gather:.2}},flavorText:""},{id:"feudal_crusade_fervor",name:"",description:"",icon:"Cross",type:"temporary",duration:360,effects:{militaryBonus:.35,cultureBonus:.2,stability:.15},flavorText:""},{id:"feudal_market_charter",name:"",description:"",icon:"Store",type:"permanent",effects:{taxIncome:.18},flavorText:""},{id:"feudal_chivalry_code",name:"",description:"",icon:"Heart",type:"permanent",effects:{militaryBonus:.12,cultureBonus:.1,stability:.08},flavorText:""},{id:"feudal_feudal_prosperity",name:"",description:"",icon:"Crown",type:"temporary",duration:360,effects:{production:.2,maxPop:18,stability:.18},flavorText:""}],epoch4:[{id:"exploration_discovery_expo",name:"",description:"",icon:"Compass",type:"temporary",duration:360,effects:{scienceBonus:.3,taxIncome:.25},flavorText:""},{id:"exploration_naval_review",name:"",description:"",icon:"Anchor",type:"temporary",duration:360,effects:{militaryBonus:.25,stability:.2},flavorText:""},{id:"exploration_navigation_school",name:"",description:"",icon:"Map",type:"permanent",effects:{production:.1,scienceBonus:.08},flavorText:""},{id:"exploration_colonial_trade",name:"",description:"",icon:"Ship",type:"temporary",duration:360,effects:{taxIncome:.4,production:.15},flavorText:""},{id:"exploration_cartography",name:"",description:"",icon:"MapPin",type:"permanent",effects:{scienceBonus:.12,taxIncome:.15},flavorText:""},{id:"exploration_spice_trade",name:"",description:"",icon:"Coffee",type:"temporary",duration:360,effects:{taxIncome:.35,cultureBonus:.2,stability:.15},flavorText:""},{id:"exploration_printing_press",name:"",description:"",icon:"Printer",type:"permanent",effects:{cultureBonus:.15,scienceBonus:.15},flavorText:""},{id:"exploration_renaissance_art",name:"",description:"",icon:"Palette",type:"temporary",duration:360,effects:{cultureBonus:.4,stability:.25,scienceBonus:.2},flavorText:""},{id:"exploration_gunpowder_weapons",name:"",description:"",icon:"Zap",type:"permanent",effects:{militaryBonus:.18,industry:.1},flavorText:""},{id:"exploration_age_of_discovery",name:"",description:"",icon:"Globe",type:"temporary",duration:360,effects:{production:.25,scienceBonus:.3,taxIncome:.35,stability:.2},flavorText:""}],epoch5:[{id:"enlightenment_science_fair",name:"",description:"",icon:"Microscope",type:"temporary",duration:360,effects:{scienceBonus:.4},flavorText:""},{id:"enlightenment_salon_culture",name:"",description:"",icon:"Coffee",type:"temporary",duration:360,effects:{cultureBonus:.35},flavorText:""},{id:"enlightenment_education_reform",name:"",description:"",icon:"GraduationCap",type:"permanent",effects:{scienceBonus:.12,cultureBonus:.12},flavorText:""},{id:"enlightenment_constitution",name:"",description:"",icon:"FileText",type:"temporary",duration:360,effects:{stability:.35,cultureBonus:.2},flavorText:""},{id:"enlightenment_encyclopedia",name:"",description:"",icon:"Book",type:"permanent",effects:{scienceBonus:.18,cultureBonus:.15},flavorText:""},{id:"enlightenment_free_trade",name:"",description:"",icon:"TrendingUp",type:"temporary",duration:360,effects:{taxIncome:.4,production:.25,stability:.15},flavorText:""},{id:"enlightenment_scientific_method",name:"",description:"",icon:"Beaker",type:"permanent",effects:{scienceBonus:.2,production:.1},flavorText:""},{id:"enlightenment_industrial_dawn",name:"",description:"",icon:"Cog",type:"temporary",duration:360,effects:{industry:.35,production:.3,scienceBonus:.2},flavorText:""},{id:"enlightenment_human_rights",name:"",description:"",icon:"Users",type:"permanent",effects:{stability:.15,cultureBonus:.12},flavorText:""},{id:"enlightenment_age_of_reason",name:"",description:"",icon:"Brain",type:"temporary",duration:360,effects:{scienceBonus:.35,cultureBonus:.35,stability:.25},flavorText:""}],epoch6:[{id:"industrial_world_fair",name:"",description:"",icon:"Globe",type:"temporary",duration:360,effects:{production:.2,scienceBonus:.25,cultureBonus:.25,taxIncome:.3},flavorText:""},{id:"industrial_labor_movement",name:"",description:"",icon:"Briefcase",type:"temporary",duration:360,effects:{stability:.25,industry:.2},flavorText:""},{id:"industrial_assembly_line",name:"",description:"",icon:"Factory",type:"permanent",effects:{industry:.15,production:.12},flavorText:""},{id:"industrial_railway_network",name:"",description:"",icon:"Train",type:"temporary",duration:360,effects:{taxIncome:.35,production:.3},flavorText:""},{id:"industrial_steel_production",name:"",description:"",icon:"Hammer",type:"permanent",effects:{industry:.18,militaryBonus:.15,production:.1},flavorText:""},{id:"industrial_telegraph_system",name:"",description:"",icon:"Radio",type:"temporary",duration:360,effects:{taxIncome:.25,stability:.2},flavorText:""},{id:"industrial_public_health",name:"",description:"",icon:"Heart",type:"permanent",effects:{maxPop:25,stability:.12,production:.08},flavorText:""},{id:"industrial_urbanization",name:"",description:"",icon:"Building2",type:"temporary",duration:360,effects:{maxPop:30,industry:.25,taxIncome:.3},flavorText:""},{id:"industrial_electricity",name:"",description:"",icon:"Zap",type:"permanent",effects:{production:.15,industry:.2,scienceBonus:.15,cultureBonus:.1},flavorText:""},{id:"industrial_golden_era",name:"",description:"",icon:"Award",type:"temporary",duration:360,effects:{production:.3,industry:.35,taxIncome:.4,stability:.25},flavorText:""}],epoch7:[{id:"modern_innovation_summit",name:"",description:"",icon:"Lightbulb",type:"temporary",duration:360,effects:{scienceBonus:.5,production:.25},flavorText:""},{id:"modern_cultural_renaissance",name:"",description:"",icon:"Palette",type:"temporary",duration:360,effects:{cultureBonus:.45,stability:.3},flavorText:""},{id:"modern_digital_revolution",name:"",description:"",icon:"Cpu",type:"permanent",effects:{production:.15,scienceBonus:.15,cultureBonus:.15},flavorText:""},{id:"modern_space_program",name:"",description:"",icon:"Rocket",type:"temporary",duration:360,effects:{scienceBonus:.45,cultureBonus:.35,stability:.25},flavorText:""},{id:"modern_internet_age",name:"",description:"",icon:"Wifi",type:"permanent",effects:{scienceBonus:.2,cultureBonus:.18,taxIncome:.2},flavorText:""},{id:"modern_green_energy",name:"",description:"",icon:"Leaf",type:"temporary",duration:360,effects:{production:.3,stability:.28,industry:.25},flavorText:""},{id:"modern_ai_revolution",name:"",description:"AI",icon:"Brain",type:"permanent",effects:{scienceBonus:.25,production:.2,industry:.2},flavorText:""},{id:"modern_biotech_breakthrough",name:"",description:"",icon:"Dna",type:"temporary",duration:360,effects:{maxPop:40,scienceBonus:.4,stability:.22},flavorText:""},{id:"modern_global_cooperation",name:"",description:"",icon:"Globe",type:"permanent",effects:{stability:.2,taxIncome:.25,cultureBonus:.15},flavorText:""},{id:"modern_information_age",name:"",description:"",icon:"Database",type:"temporary",duration:360,effects:{scienceBonus:.45,cultureBonus:.4,production:.3,stability:.25},flavorText:""}]},Ch=l=>{const c=`epoch${l}`;return wh[c]||[]},Mh=l=>{const c=Ch(l);if(c.length<=3)return[...c];const m=[...c];for(let o=m.length-1;o>0;o--){const p=Math.floor(Math.random()*(o+1));[m[o],m[p]]=[m[p],m[o]]}return m.slice(0,3)},_h=(l,c,m,o,p,j)=>{const{tradeRoutes:v,nations:w,resources:g,daysElapsed:y,market:k,popStructure:_}=l,E=v.routes||[],U=.05,D=.1,M=_?.merchant||0,A=[],S=[];let ie=0,ae=0;return E.forEach((ce,Ce)=>{if(Ce>=M)return;const{nationId:oe,resource:se,type:B}=ce,de=w.find(ve=>ve.id===oe);if(!de){A.push(ce);return}if(de.isAtWar)return;const Q=dr(se,de,y),I=k?.prices?.[se]??(Me[se]?.basePrice||1),ge=mr(se,de,y);if(B==="export"){if(!Q.isShortage||Q.shortageAmount<=0)return;const ve=g[se]||0,me=Math.max(0,ve-500);if(me<=D)return;const b=Math.min(me,Q.shortageAmount)*U;if(b<D)return;const O=I*b,R=ge*b,ne=R-O;if(o(L=>({...L,silver:(L.silver||0)+ne,[se]:Math.max(0,(L[se]||0)-b)})),ie+=ne,p(L=>L.map(u=>u.id===oe?{...u,budget:Math.max(0,(u.budget||0)-R),inventory:{...u.inventory,[se]:((u.inventory||{})[se]||0)+b}}:u)),b>=1){const L=ne>=0?` ${ne.toFixed(1)}`:` ${Math.abs(ne).toFixed(1)}`;S.push(`  ${b.toFixed(1)} ${Me[se]?.name||se}  ${de.name} ${I.toFixed(1)}   ${ge.toFixed(1)}${L} `)}}else if(B==="import"){if(!Q.isSurplus||Q.surplusAmount<=0)return;const ve=Q.surplusAmount*U;if(ve<D)return;const G=ge*ve,me=I*ve,b=me-G;if((g.silver||0)<G)return;if(o(O=>({...O,silver:(O.silver||0)+b,[se]:(O[se]||0)+ve})),ae+=G,ie+=me,p(O=>O.map(R=>R.id===oe?{...R,budget:(R.budget||0)+G,inventory:{...R.inventory,[se]:Math.max(0,((R.inventory||{})[se]||0)-ve)}}:R)),ve>=1){const O=b>=0?` ${b.toFixed(1)}`:` ${Math.abs(b).toFixed(1)}`;S.push(`  ${ve.toFixed(1)} ${Me[se]?.name||se}  ${de.name} ${ge.toFixed(1)}   ${I.toFixed(1)}${O} `)}}}),A.length>0&&j(ce=>({...ce,routes:ce.routes.filter(Ce=>!A.some(oe=>oe.nationId===Ce.nationId&&oe.resource===Ce.resource&&oe.type===Ce.type))})),S.forEach(ce=>m(ce)),{income:ie,expense:ae}},Th=(l,c,m)=>{const{resources:o,setResources:p,market:j,setMarket:v,buildings:w,population:g,popStructure:y,setPopulation:k,epoch:_,techsUnlocked:E,decrees:U,gameSpeed:D,isPaused:M,setIsPaused:A,nations:S,setNations:ie,setPopStructure:ae,setMaxPop:ce,maxPopBonus:Ce,setRates:oe,setTaxes:se,setClassApproval:B,classApproval:de,setClassInfluence:Q,setClassWealth:I,setClassWealthDelta:ge,setClassIncome:ve,setClassExpense:G,classWealthHistory:me,setClassWealthHistory:b,classNeedsHistory:O,setClassNeedsHistory:R,setTotalInfluence:ne,setTotalWealth:L,setActiveBuffs:u,setActiveDebuffs:C,setStability:$,setLogs:J,taxPolicies:le,classWealth:De,setClassShortages:fe,activeBuffs:Ge,activeDebuffs:K,army:We,setArmy:xt,militaryQueue:P,setMilitaryQueue:je,jobFill:Ae,setJobFill:Se,jobsAvailable:Ye,setJobsAvailable:bt,setDaysElapsed:ua,daysElapsed:Gt,militaryWageRatio:Fa,classInfluenceShift:te,setClassInfluenceShift:pe,setFestivalModal:ye,activeFestivalEffects:F,setActiveFestivalEffects:Re,lastFestivalYear:X,setLastFestivalYear:be,setHistory:ke,autoSaveInterval:Ue,isAutoSaveEnabled:ze,lastAutoSaveTime:$e,saveGame:ot,merchantState:rt,setMerchantState:zt,tradeRoutes:kt,setTradeRoutes:Bt,tradeStats:vs,setTradeStats:zs}=l,rs=V.useRef({resources:o,market:j,buildings:w,population:g,popStructure:y,maxPopBonus:Ce,epoch:_,techsUnlocked:E,decrees:U,gameSpeed:D,nations:S,classWealth:De,army:We,militaryQueue:P,jobFill:Ae,jobsAvailable:Ye,activeBuffs:Ge,activeDebuffs:K,taxPolicies:le,classWealthHistory:me,classNeedsHistory:O,militaryWageRatio:Fa,classApproval:de,daysElapsed:Gt,activeFestivalEffects:F,lastFestivalYear:X,isPaused:M,autoSaveInterval:Ue,isAutoSaveEnabled:ze,lastAutoSaveTime:$e,merchantState:rt,tradeRoutes:kt,actions:m,tradeStats:vs}),Te=V.useRef(l.saveGame);V.useEffect(()=>{Te.current=l.saveGame},[l.saveGame]),V.useEffect(()=>{rs.current={resources:o,market:j,buildings:w,population:g,epoch:_,popStructure:y,maxPopBonus:Ce,techsUnlocked:E,decrees:U,gameSpeed:D,nations:S,classWealth:De,army:We,militaryQueue:P,jobFill:Ae,activeBuffs:Ge,activeDebuffs:K,taxPolicies:le,classWealthHistory:me,classNeedsHistory:O,militaryWageRatio:Fa,classApproval:de,daysElapsed:Gt,activeFestivalEffects:F,lastFestivalYear:X,isPaused:M,autoSaveInterval:Ue,isAutoSaveEnabled:ze,lastAutoSaveTime:$e,merchantState:rt,tradeRoutes:kt,actions:m,tradeStats:vs}},[o,j,w,g,y,Ce,_,E,U,D,S,De,We,P,Ae,Ye,Ge,K,le,me,O,Fa,de,Gt,F,X,M,Ue,ze,$e,rt,kt,vs,m]),V.useEffect(()=>{if(M){const it=setInterval(()=>{const Ea=rs.current;if(Ea.isAutoSaveEnabled){const Xe=Math.max(5,Ea.autoSaveInterval||60);Date.now()-(Ea.lastAutoSaveTime||0)>=Xe*1e3&&Te.current&&(Te.current({source:"auto"}),rs.current.lastAutoSaveTime=Date.now())}},1e3);return()=>clearInterval(it)}const ka=1e3/Math.max(1,D),ts=setInterval(()=>{const it=rs.current;if(it.isAutoSaveEnabled){const we=Math.max(5,it.autoSaveInterval||60);Date.now()-(it.lastAutoSaveTime||0)>=we*1e3&&Te.current&&(Te.current({source:"auto"}),rs.current.lastAutoSaveTime=Date.now())}const Ea=Sc(it.daysElapsed||0);if(Sc((it.daysElapsed||0)+1),Ea.year>(it.lastFestivalYear||0)){const we=Mh(it.epoch);we.length>0&&(ye({options:we,year:Ea.year}),be(Ea.year),A(!0))}const Xe=Nh({...it,tick:it.daysElapsed||0,gameSpeed:1,activeFestivalEffects:it.activeFestivalEffects||[]}),as=fp(We),js={...Xe.resources};Object.entries(as).forEach(([we,Qe])=>{const qe=Qe;qe<=0||(js[we]=Math.max(0,(js[we]||0)-qe))}),p(js);const Ja={...Xe.classWealth},Ke=Object.values(Ja).reduce((we,Qe)=>we+Qe,0),Et={...it.market?.priceHistory||{}},Wt={...it.market?.supplyHistory||{}},Oa={...it.market?.demandHistory||{}},Ds=60;Object.keys(Xe.market?.prices||{}).forEach(we=>{const Qe=Xe.market?.prices?.[we];Et[we]||(Et[we]=[]),Et[we]=[...Et[we],Qe],Et[we].length>Ds&&Et[we].shift(),Wt[we]||(Wt[we]=[]),Wt[we]=[...Wt[we],Xe.market?.supply?.[we]||0],Wt[we].length>Ds&&Wt[we].shift(),Oa[we]||(Oa[we]=[]),Oa[we]=[...Oa[we],Xe.market?.demand?.[we]||0],Oa[we].length>Ds&&Oa[we].shift()});const Ra={...it.classWealthHistory||{}},ra=120;Object.entries(Xe.classWealth||{}).forEach(([we,Qe])=>{const qe=Ra[we]?[...Ra[we]]:[];qe.push(Qe),qe.length>ra&&qe.shift(),Ra[we]=qe});const ba={...it.classNeedsHistory||{}},ss=120;Object.entries(Xe.needsReport||{}).forEach(([we,Qe])=>{const qe=ba[we]?[...ba[we]]:[];qe.push(Qe.satisfactionRatio),qe.length>ss&&qe.shift(),ba[we]=qe});const un={...Xe.market||{},priceHistory:Et,supplyHistory:Wt,demandHistory:Oa},en=90;ke(we=>{const Qe=(Ut=[],Ie)=>{const Nt=[...Ut,Ie];return Nt.length>en&&Nt.shift(),Nt},qe=we||{},Yt={...qe,treasury:Qe(qe.treasury,Xe.resources?.silver||0),tax:Qe(qe.tax,Xe.taxes?.total||0),population:Qe(qe.population,Xe.population||0)},Oe=qe.class||{},Be={...Oe};return Object.keys(Fe).forEach(Ut=>{const Ie=Oe[Ut]||{pop:[],income:[],expense:[]};Be[Ut]={pop:Qe(Ie.pop,Xe.popStructure?.[Ut]||0),income:Qe(Ie.income,Xe.classIncome?.[Ut]||0),expense:Qe(Ie.expense,Xe.classExpense?.[Ut]||0)}}),Yt.class=Be,Yt}),ae(Xe.popStructure),ce(Xe.maxPop),oe(Xe.rates),oe(Xe.rates||{}),B(Xe.classApproval);const tn={...Xe.classInfluence||{}};Object.entries(te||{}).forEach(([we,Qe])=>{Qe&&(tn[we]=(tn[we]||0)+Qe)}),Q(tn);const cs={};Object.keys(Ja).forEach(we=>{const Qe=it.classWealth?.[we]||0;cs[we]=Ja[we]-Qe}),I(Ja),ge(cs),ve(Xe.classIncome||{}),G(Xe.classExpense||{}),b(Ra),R(ba),ne(Xe.totalInfluence),L(Ke),u(Xe.activeBuffs),C(Xe.activeDebuffs),$(Xe.stability),se(Xe.taxes||{total:0,breakdown:{headTax:0,industryTax:0,subsidy:0},efficiency:1}),v(un),fe(Xe.needsShortages||{}),zt(we=>{const Qe=Xe.merchantState||it.merchantState||{pendingTrades:[],lastTradeTime:0};return we===Qe?we:Qe}),Xe.nations&&ie(Xe.nations),Xe.jobFill&&Se(Xe.jobFill),Xe.jobsAvailable&&bt(Xe.jobsAvailable),ua(we=>we+1);let Sa={income:0,expense:0};if(it.tradeRoutes&&it.tradeRoutes.routes&&it.tradeRoutes.routes.length>0){const we=_h(it,Xe,c,p,ie,Bt);we&&(Sa=we)}if(zs(Sa),l.playerInstallmentPayment&&l.playerInstallmentPayment.remainingDays>0){const we=l.playerInstallmentPayment,Qe=we.amount;(it.resources.silver||0)>=Qe?(p(qe=>({...qe,silver:(qe.silver||0)-Qe})),l.setPlayerInstallmentPayment(qe=>({...qe,paidAmount:qe.paidAmount+Qe,remainingDays:qe.remainingDays-1})),we.remainingDays===1&&(c(` ${we.totalAmount}`),l.setPlayerInstallmentPayment(null))):(c(" "),ie(qe=>qe.map(Yt=>Yt.id===we.nationId?{...Yt,isAtWar:!0,warStartDay:it.daysElapsed||0,warDuration:0,relation:Math.max(0,(Yt.relation||0)-50),peaceTreatyUntil:void 0}:Yt)),l.setPlayerInstallmentPayment(null))}if(F.length>0){const we=F.filter(Qe=>Qe.type==="permanent"?!0:(it.daysElapsed||0)-(Qe.activatedAt||0)<(Qe.duration||360));we.length!==F.length&&Re(we)}if(pe(we=>{if(!we||Object.keys(we).length===0)return we||{};const Qe={};return Object.entries(we).forEach(([qe,Yt])=>{const Oe=Yt*.9;Math.abs(Oe)>=.1&&(Qe[qe]=Oe)}),Object.keys(Qe).length>0?Qe:{}}),Xe.population!==it.population&&k(Xe.population),Xe.logs.length){J(Qe=>[...Xe.logs,...Qe].slice(0,8));const we=it.actions;if(console.log("[EVENT DEBUG] actions:",!!we,"triggerDiplomaticEvent:",!!we?.triggerDiplomaticEvent),we&&we.triggerDiplomaticEvent){console.log("[EVENT DEBUG] Checking logs:",Xe.logs),console.log("[EVENT DEBUG] Total logs count:",Xe.logs.length);const Qe=Array.isArray(Xe.logs)?Xe.logs.find(qe=>typeof qe=="string"&&qe.includes("RAID_EVENT")):null;if(Qe&&we.setBattleResult)try{const qe=Qe.indexOf("{");if(qe!==-1){const Yt=Qe.slice(qe),Oe=JSON.parse(Yt);let Be=`${Oe.nationName}

`;Oe.victory?(Be+=`

`,Be+=`
`,Be+=`${Oe.ourPower||0}
`,Be+=`${Oe.enemyPower||0}
`,Oe.battleReport&&Oe.battleReport.length>0&&(Be+=`
`+Oe.battleReport.join(`
`))):(Oe.ourPower?(Be+=`

`,Be+=`
`,Be+=`${Oe.ourPower||0}
`,Be+=`${Oe.enemyPower||0}
`,Oe.battleReport&&Oe.battleReport.length>0&&(Be+=`
`+Oe.battleReport.join(`
`))):Be+=`

`,Be+=`

`,Oe.foodLoss>0&&(Be+=`${Oe.foodLoss}
`),Oe.silverLoss>0&&(Be+=`${Oe.silverLoss}
`),Oe.popLoss>0&&(Be+=`${Oe.popLoss}
`));const Ut={victory:!!Oe.victory,missionName:`${Oe.nationName}`,missionDesc:Oe.victory?"":"",nationName:Oe.nationName,ourPower:Oe.ourPower||0,enemyPower:Oe.enemyPower||0,powerRatio:(Oe.enemyPower||0)>0?(Oe.ourPower||0)/Oe.enemyPower:0,score:0,losses:Oe.defenderLosses||{},attackerLosses:Oe.attackerLosses||{},enemyLosses:Oe.attackerLosses||{},defenderLosses:Oe.defenderLosses||{},resourcesGained:{},description:Be,foodLoss:Oe.foodLoss||0,silverLoss:Oe.silverLoss||0,popLoss:Oe.popLoss||0,isRaid:!0};console.log("[EVENT DEBUG] Raid battle result created (pre-loop):",Ut),we.setBattleResult(Ut)}}catch(qe){console.error("[EVENT DEBUG] Failed to parse raid event log:",qe)}Xe.logs.forEach((qe,Yt)=>{if(console.log(`[EVENT DEBUG] Log ${Yt}:`,qe),console.log(`[EVENT DEBUG] Log ${Yt} includes RAID_EVENT:`,qe.includes("RAID_EVENT")),qe.includes("")){const Oe=qe.match(/ (.+) /);if(Oe){const Be=Oe[1],Ut=Xe.nations?.find(Ie=>Ie.name===Be);if(Ut){const{createWarDeclarationEvent:Ie}=require("../config/events"),Nt=Ie(Ut,()=>{});we.triggerDiplomaticEvent(Nt)}}}if(qe.includes("")){console.log("[EVENT DEBUG] Peace request detected in log:",qe);const Oe=qe.match(/ (.+)  (\d+) /);if(console.log("[EVENT DEBUG] Regex match result:",Oe),Oe){const Be=Oe[1],Ut=parseInt(Oe[2],10);console.log("[EVENT DEBUG] Looking for nation:",Be),console.log("[EVENT DEBUG] result.nations:",Xe.nations?.map(Nt=>({name:Nt.name,isPeaceRequesting:Nt.isPeaceRequesting})));const Ie=Xe.nations?.find(Nt=>Nt.name===Be);if(console.log("[EVENT DEBUG] Found nation:",Ie?.name,"isPeaceRequesting:",Ie?.isPeaceRequesting),Ie&&Ie.isPeaceRequesting){console.log("[EVENT DEBUG] Creating peace request event..."),console.log("[EVENT DEBUG] Parameters:",{nation:Ie.name,nationId:Ie.id,tribute:Ut,warScore:Ie.warScore||0,population:Ie.population});try{const Nt=rh(Ie,Ut,Ie.warScore||0,(Ka,yt,Ba)=>{Ka?we.handleEnemyPeaceAccept(Ie.id,yt,Ba||Ut):we.handleEnemyPeaceReject(Ie.id)});console.log("[EVENT DEBUG] Event created:",Nt),console.log("[EVENT DEBUG] Calling triggerDiplomaticEvent..."),we.triggerDiplomaticEvent(Nt),console.log("[EVENT DEBUG] triggerDiplomaticEvent called")}catch(Nt){console.error("[EVENT DEBUG] Error creating or triggering event:",Nt)}ie(Nt=>Nt.map(Ka=>Ka.id===Ie.id?{...Ka,isPeaceRequesting:!1}:Ka))}}}if(qe.includes("RAID_EVENT")){console.log("[EVENT DEBUG] Raid detected in log:",qe);try{const Oe=qe.replace("RAID_EVENT",""),Be=JSON.parse(Oe);console.log("[EVENT DEBUG] Parsed raid data:",Be);const Ut=Xe.nations?.find(Ie=>Ie.name===Be.nationName);if(console.log("[EVENT DEBUG] Found nation for raid:",Ut?.name),Ut&&we.setBattleResult){console.log("[EVENT DEBUG] Creating raid battle result...");let Ie=`${Be.nationName}

`;Be.victory?(Ie+=` 

`,Ie+=`
`,Ie+=`${Be.ourPower}
`,Ie+=`${Be.enemyPower}

`,Be.battleReport&&Be.battleReport.length>0&&(Ie+=Be.battleReport.join(`
`))):(Be.ourPower===0?Ie+=` 

`:(Ie+=` 

`,Ie+=`
`,Ie+=`${Be.ourPower}
`,Ie+=`${Be.enemyPower}

`,Be.battleReport&&Be.battleReport.length>0&&(Ie+=Be.battleReport.join(`
`)+`

`)),Ie+=`
`,Be.foodLoss>0&&(Ie+=`-${Be.foodLoss}
`),Be.silverLoss>0&&(Ie+=`-${Be.silverLoss}
`),Be.popLoss>0&&(Ie+=`-${Be.popLoss}
`));const Nt={victory:Be.victory,missionName:`${Be.nationName}`,missionDesc:Be.victory?"":"",nationName:Be.nationName,ourPower:Be.ourPower||0,enemyPower:Be.enemyPower||0,powerRatio:Be.enemyPower>0?Be.ourPower/Be.enemyPower:0,score:0,losses:Be.defenderLosses||{},attackerLosses:Be.attackerLosses||{},enemyLosses:Be.attackerLosses||{},defenderLosses:Be.defenderLosses||{},resourcesGained:{},description:Ie,foodLoss:Be.foodLoss||0,silverLoss:Be.silverLoss||0,popLoss:Be.popLoss||0,isRaid:!0};console.log("[EVENT DEBUG] Raid battle result created:",Nt),we.setBattleResult(Nt),console.log("[EVENT DEBUG] setBattleResult called")}}catch(Oe){console.error("[EVENT DEBUG] Error parsing or processing raid event:",Oe)}}})}}je(we=>{const Qe=Xe.popStructure?.soldier||0,qe=Object.values(it.army).reduce((yt,Ba)=>yt+Ba,0),Yt=we.filter(yt=>yt.status==="waiting").length,Oe=we.filter(yt=>yt.status==="training").length,Be=qe+Oe,Ut=Math.max(0,Qe-Be);console.log("[TRAINING QUEUE] currentSoldierPop:",Qe,"currentArmyCount:",qe,"waitingCount:",Yt,"trainingCount:",Oe,"occupiedJobs:",Be,"availableJobsForNewTraining:",Ut);let Ie=Ut;const Nt=we.map(yt=>yt.status==="waiting"&&Ie>0?(Ie--,c(` ${Da[yt.unitId].name}  ${yt.totalTime} `),{...yt,status:"training",remainingTime:yt.totalTime}):yt.status==="training"?{...yt,remainingTime:yt.remainingTime-1}:yt),Ka=Nt.filter(yt=>yt.status==="training"&&yt.remainingTime<=0);return Ka.length>0&&(xt(yt=>{const Ba={...yt};return Ka.forEach(Bn=>{Ba[Bn.unitId]=(Ba[Bn.unitId]||0)+1}),Ba}),Ka.forEach(yt=>{c(` ${Da[yt.unitId].name} `)})),Nt.filter(yt=>!(yt.status==="training"&&yt.remainingTime<=0))})},ka);return()=>clearInterval(ts)},[D,M,We,F,ye,Re,be,X,A])},zl=l=>{const c=new(window.AudioContext||window.webkitAudioContext),m={click:()=>{const o=c.createOscillator(),p=c.createGain();o.connect(p),p.connect(c.destination),o.frequency.value=800,o.type="sine",p.gain.setValueAtTime(.3,c.currentTime),p.gain.exponentialRampToValueAtTime(.01,c.currentTime+.1),o.start(c.currentTime),o.stop(c.currentTime+.1)},success:()=>{const o=c.createOscillator(),p=c.createGain();o.connect(p),p.connect(c.destination),o.frequency.setValueAtTime(523,c.currentTime),o.frequency.setValueAtTime(659,c.currentTime+.1),o.frequency.setValueAtTime(784,c.currentTime+.2),o.type="sine",p.gain.setValueAtTime(.3,c.currentTime),p.gain.exponentialRampToValueAtTime(.01,c.currentTime+.3),o.start(c.currentTime),o.stop(c.currentTime+.3)},error:()=>{const o=c.createOscillator(),p=c.createGain();o.connect(p),p.connect(c.destination),o.frequency.setValueAtTime(200,c.currentTime),o.frequency.setValueAtTime(150,c.currentTime+.1),o.type="sawtooth",p.gain.setValueAtTime(.3,c.currentTime),p.gain.exponentialRampToValueAtTime(.01,c.currentTime+.2),o.start(c.currentTime),o.stop(c.currentTime+.2)},coin:()=>{const o=c.createOscillator(),p=c.createGain();o.connect(p),p.connect(c.destination),o.frequency.setValueAtTime(988,c.currentTime),o.frequency.exponentialRampToValueAtTime(1319,c.currentTime+.1),o.type="sine",p.gain.setValueAtTime(.3,c.currentTime),p.gain.exponentialRampToValueAtTime(.01,c.currentTime+.15),o.start(c.currentTime),o.stop(c.currentTime+.15)},build:()=>{const o=c.currentTime;[0,.15].forEach((p,j)=>{const v=c.createOscillator(),w=c.createGain(),g=c.createBiquadFilter();v.connect(g),g.connect(w),w.connect(c.destination),v.type="triangle";const y=j===1?220:200;v.frequency.setValueAtTime(y,o+p),v.frequency.exponentialRampToValueAtTime(y*.5,o+p+.1),g.type="lowpass",g.frequency.setValueAtTime(800,o+p),g.frequency.linearRampToValueAtTime(300,o+p+.1),w.gain.setValueAtTime(0,o+p),w.gain.linearRampToValueAtTime(.6,o+p+.01),w.gain.exponentialRampToValueAtTime(.01,o+p+.15),v.start(o+p),v.stop(o+p+.2)})},research:()=>{const o=c.createOscillator(),p=c.createGain();o.connect(p),p.connect(c.destination),o.frequency.setValueAtTime(440,c.currentTime),o.frequency.setValueAtTime(554,c.currentTime+.05),o.frequency.setValueAtTime(659,c.currentTime+.1),o.frequency.setValueAtTime(880,c.currentTime+.15),o.type="sine",p.gain.setValueAtTime(.25,c.currentTime),p.gain.exponentialRampToValueAtTime(.01,c.currentTime+.25),o.start(c.currentTime),o.stop(c.currentTime+.25)},battle:()=>{const o=c.createOscillator(),p=c.createGain();o.connect(p),p.connect(c.destination),o.frequency.setValueAtTime(100,c.currentTime),o.frequency.linearRampToValueAtTime(50,c.currentTime+.3),o.type="sawtooth",p.gain.setValueAtTime(.4,c.currentTime),p.gain.exponentialRampToValueAtTime(.01,c.currentTime+.4),o.start(c.currentTime),o.stop(c.currentTime+.4)},victory:()=>{const o=c.createOscillator(),p=c.createGain();o.connect(p),p.connect(c.destination),o.frequency.setValueAtTime(523,c.currentTime),o.frequency.setValueAtTime(659,c.currentTime+.1),o.frequency.setValueAtTime(784,c.currentTime+.2),o.frequency.setValueAtTime(1047,c.currentTime+.3),o.type="sine",p.gain.setValueAtTime(.3,c.currentTime),p.gain.exponentialRampToValueAtTime(.01,c.currentTime+.5),o.start(c.currentTime),o.stop(c.currentTime+.5)},levelup:()=>{const o=c.createOscillator(),p=c.createGain();o.connect(p),p.connect(c.destination),o.frequency.setValueAtTime(440,c.currentTime),o.frequency.setValueAtTime(554,c.currentTime+.1),o.frequency.setValueAtTime(659,c.currentTime+.2),o.frequency.setValueAtTime(880,c.currentTime+.3),o.frequency.setValueAtTime(1109,c.currentTime+.4),o.type="sine",p.gain.setValueAtTime(.3,c.currentTime),p.gain.exponentialRampToValueAtTime(.01,c.currentTime+.6),o.start(c.currentTime),o.stop(c.currentTime+.6)},notification:()=>{const o=c.createOscillator(),p=c.createGain();o.connect(p),p.connect(c.destination),o.frequency.setValueAtTime(800,c.currentTime),o.frequency.setValueAtTime(1e3,c.currentTime+.05),o.type="sine",p.gain.setValueAtTime(.25,c.currentTime),p.gain.exponentialRampToValueAtTime(.01,c.currentTime+.15),o.start(c.currentTime),o.stop(c.currentTime+.15)}};return m[l]||m.click},ol={CLICK:"click",SUCCESS:"success",ERROR:"error",COIN:"coin",BUILD:"build",RESEARCH:"research",BATTLE:"battle",VICTORY:"victory",LEVEL_UP:"levelup",NOTIFICATION:"notification",EVENT:"event"},kh=(l,c)=>{const{resources:m,setResources:o,market:p,buildings:j,setBuildings:v,epoch:w,setEpoch:g,population:y,techsUnlocked:k,setTechsUnlocked:_,setDecrees:E,setClicks:U,army:D,setArmy:M,militaryQueue:A,setMilitaryQueue:S,setBattleResult:ie,nations:ae,setNations:ce,setClassInfluenceShift:Ce,daysElapsed:oe,currentEvent:se,setCurrentEvent:B,eventHistory:de,setEventHistory:Q,classApproval:I,setClassApproval:ge,stability:ve,setStability:G,setPopulation:me,setMaxPop:b,setMaxPopBonus:O,tradeRoutes:R,setTradeRoutes:ne,jobsAvailable:L}=l,u=te=>{if(!te)return 1;const pe=Me[te]?.basePrice||1;return p?.prices?.[te]??pe},C=()=>{if(w>=xa.length-1)return!1;const te=xa[w+1];if(te.req.science&&m.science<te.req.science||te.req.population&&y<te.req.population||te.req.culture&&m.culture<te.req.culture)return!1;for(let ye in te.cost)if((m[ye]||0)<te.cost[ye])return!1;const pe=Object.entries(te.cost).reduce((ye,[F,Re])=>ye+Re*u(F),0);return!((m.silver||0)<pe)},$=()=>{if(!C())return;const te=xa[w+1],pe={...m},ye=Object.entries(te.cost).reduce((F,[Re,X])=>F+X*u(Re),0);for(let F in te.cost)pe[F]-=te.cost[F];pe.silver=Math.max(0,(pe.silver||0)-ye),o(pe),g(w+1),c(`  ${te.name}`);try{const F=zl(ol.LEVEL_UP);F&&F()}catch(F){console.warn("Failed to play level up sound:",F)}},J=te=>{const pe=is.find(ke=>ke.id===te),ye=j[te]||0,F={};for(let ke in pe.baseCost)F[ke]=pe.baseCost[ke]*Math.pow(1.15,ye);if(!Object.entries(F).every(([ke,Ue])=>(m[ke]||0)>=Ue)){c(` ${pe.name}`);return}const X=Object.entries(F).reduce((ke,[Ue,ze])=>ke+ze*u(Ue),0);if((m.silver||0)<X){c("");return}const be={...m};Object.entries(F).forEach(([ke,Ue])=>{be[ke]=Math.max(0,(be[ke]||0)-Ue)}),be.silver=Math.max(0,(be.silver||0)-X),o(be),v(ke=>({...ke,[te]:(ke[te]||0)+1})),c(` ${pe.name}`);try{const ke=zl(ol.BUILD);ke&&ke()}catch(ke){console.warn("Failed to play build sound:",ke)}},le=te=>{(j[te]||0)>0&&(v(pe=>({...pe,[te]:pe[te]-1})),c(` ${is.find(pe=>pe.id===te).name}`))},De=te=>{const pe=fr.find(X=>X.id===te);if(!pe)return;if(k.includes(te)){c(` ${pe.name}`);return}if(pe.epoch>w){c(` ${xa[pe.epoch].name}  ${pe.name}`);return}let ye=!0;for(let X in pe.cost)if((m[X]||0)<pe.cost[X]){ye=!1;break}if(!ye){c(` ${pe.name}`);return}const F=Object.entries(pe.cost).reduce((X,[be,ke])=>X+ke*u(be),0);if((m.silver||0)<F){c("");return}const Re={...m};for(let X in pe.cost)Re[X]-=pe.cost[X];Re.silver=Math.max(0,(Re.silver||0)-F),o(Re),_(X=>[...X,te]),c(` ${pe.name}`);try{const X=zl(ol.RESEARCH);X&&X()}catch(X){console.warn("Failed to play research sound:",X)}},fe=te=>{let pe=null,ye="";if(E(F=>F.map(Re=>{if(Re.id!==te)return Re;const X=Re.unlockEpoch??0;return X>w?(pe=X,ye=Re.name||"",Re):{...Re,active:!Re.active}})),pe!==null&&c){const F=xa[pe]?.name||` ${pe+1} `;c(`${F}${ye||""}`)}},Ge=te=>{U(pe=>[...pe,{id:Date.now(),x:te.clientX,y:te.clientY,text:"+1",color:"text-white"}]),o(pe=>({...pe,food:pe.food+1,wood:pe.wood+1}))},K=te=>{const pe=Da[te];if(!pe)return;if(pe.epoch>w){c(` ${xa[pe.epoch].name}  ${pe.name}`);return}let ye=!0;for(let X in pe.recruitCost)if((m[X]||0)<pe.recruitCost[X]){ye=!1;break}if(!ye){c(` ${pe.name}`);return}const F=Object.entries(pe.recruitCost).reduce((X,[be,ke])=>X+ke*u(be),0);if((m.silver||0)<F){c("");return}const Re={...m};for(let X in pe.recruitCost)Re[X]-=pe.recruitCost[X];Re.silver=Math.max(0,(Re.silver||0)-F),o(Re),S(X=>[...X,{unitId:te,status:"waiting",remainingTime:pe.trainingTime,totalTime:pe.trainingTime}]),c(` ${pe.name}...`)},We=te=>{(D[te]||0)>0&&(M(pe=>({...pe,[te]:pe[te]-1})),c(` ${Da[te].name}`))},xt=te=>{S(pe=>{if(te<0||te>=pe.length)return pe;const ye=pe[te],F=Da[ye.unitId],Re=pe.filter((X,be)=>be!==te);if(ye.status==="waiting"||ye.status==="training"){const X={};for(let Ue in F.recruitCost)X[Ue]=Math.floor(F.recruitCost[Ue]*.5);const be=Object.entries(F.recruitCost).reduce((Ue,[ze,$e])=>Ue+$e*u(ze),0),ke=Math.floor(be*.5);o(Ue=>{const ze={...Ue};for(let $e in X)ze[$e]=(ze[$e]||0)+X[$e];return ze.silver=(ze.silver||0)+ke,ze}),c(` ${F.name}50%`)}return Re})},P=(te,pe)=>{const ye=dp.find(Ke=>Ke.id===te);if(!ye){c("");return}const F=ae.find(Ke=>Ke.id===pe);if(!F){c("");return}if(!F.isAtWar){c(`${F.name} `);return}if(Object.values(D).reduce((Ke,$t)=>Ke+$t,0)===0){c("");return}const X={army:D,epoch:w,militaryBuffs:0},be=Math.max(F.appearEpoch||0,Math.min(w,F.expireEpoch??w)),ke=F.militaryStrength??1,Ue=Math.max(.3,Math.min(1.5,(F.wealth||500)/800)),ze=1+(F.aggression||.2),$e=1+Math.max(-.5,(F.warScore||0)/120),ot=ke*Ue*ze*$e,rt=ye.unitScale||"medium",zt=op(be,rt),kt={},Bt=ye.baseUnitCount||{min:10,max:15},vs=Bt.min+Math.random()*(Bt.max-Bt.min),zs=Math.floor(vs*ot);zt.forEach((Ke,$t)=>{if(Da[Ke]){const Et=.5+Math.random()*.8,dt=Math.floor(zs/zt.length*Et);dt>0&&(kt[Ke]=dt)}});const rs={army:kt,epoch:be,militaryBuffs:ye.enemyBuff||0,wealth:F.wealth||500},Te=mp(X,rs);let ka={};if(Te.victory){const Ke={};(Et=>{Object.entries(Et||{}).forEach(([dt,Wt])=>{Wt>0&&(Ke[dt]=(Ke[dt]||0)+Math.floor(Wt))})})(Te.loot||{}),Object.entries(ye.loot||{}).forEach(([Et,dt])=>{if(!Array.isArray(dt)||dt.length<2)return;const[Wt,La]=dt,Oa=Math.floor(Wt+Math.random()*(La-Wt+1));Oa>0&&(Ke[Et]=(Ke[Et]||0)+Oa)}),ka=Ke,Object.keys(Ke).length>0&&o(Et=>{const dt={...Et};return Object.entries(Ke).forEach(([Wt,La])=>{dt[Wt]=(dt[Wt]||0)+La}),dt})}M(Ke=>{const $t={...Ke};return Object.entries(Te.attackerLosses||{}).forEach(([Et,dt])=>{$t[Et]=Math.max(0,($t[Et]||0)-dt)}),$t});const ts=Te.victory?ye.influence?.win||0:ye.influence?.lose||0;ts!==0&&Ce(Ke=>({...Ke,soldier:(Ke?.soldier||0)+ts}));const it=Object.values(Te.defenderLosses||{}).reduce((Ke,$t)=>Ke+$t,0),Ea=ye.wealthDamage||20,Xe=Te.victory?Math.min(F.wealth||0,Math.max(50,it*Ea)):0,as=Te.victory?ye.winScore||10:-(ye.loseScore||8),js=Te.victory?Math.min(.15,it*.005+Xe/1e4):0,Ja=Te.victory?Math.floor(it*.8):0;ce(Ke=>Ke.map($t=>{if($t.id!==pe)return $t;const Et=$t.militaryStrength??1,dt=Math.max(.2,Et-js),Wt=$t.population??1e3,La=Math.max(100,Wt-Ja);return{...$t,wealth:Math.max(0,($t.wealth||0)-Xe),warScore:($t.warScore||0)+as,enemyLosses:($t.enemyLosses||0)+it,militaryStrength:dt,population:La}})),ie({victory:Te.victory,actionType:ye.id,missionName:ye.name,missionDesc:ye.desc,missionDifficulty:ye.difficulty,ourPower:Te.attackerPower,enemyPower:Te.defenderPower,powerRatio:Te.defenderPower>0?Te.attackerPower/Te.defenderPower:Te.attackerPower,score:Number(Te.attackerAdvantage||0),losses:Te.attackerLosses||{},enemyLosses:Te.defenderLosses||{},resourcesGained:ka,nationName:F.name,description:(Te.battleReport||[]).join(`
`)}),c(Te.victory?`  ${F.name} `:`  ${F.name} `);try{const Ke=zl(Te.victory?ol.VICTORY:ol.BATTLE);Ke&&Ke()}catch(Ke){console.warn("Failed to play battle sound:",Ke)}},je=(te,pe,ye={})=>{const F=ae.find(X=>X.id===te);if(!F)return;const Re=X=>Math.max(0,Math.min(100,X));if(F.isAtWar&&(pe==="gift"||pe==="trade"||pe==="import"||pe==="demand")){c(`${F.name} `);return}switch(pe){case"gift":{const X=ye.amount||500;if((m.silver||0)<X){c("");return}o(be=>({...be,silver:be.silver-X})),ce(be=>be.map(ke=>ke.id===te?{...ke,relation:Re((ke.relation||0)+10),wealth:(ke.wealth||0)+X}:ke)),c(` ${F.name} `);break}case"trade":{const X=ye.resource,be=Math.max(1,Math.floor(ye.amount||5));if(!X||!Me[X]||Me[X].type==="virtual"||X==="silver"){c("");return}if((m[X]||0)<be){c("");return}const ke=dr(X,F,oe),Ue=Math.floor(ke.shortageAmount);if(!ke.isShortage||Ue<=0){c(`${F.name}  ${Me[X].name} `);return}if(be>Ue)return c(`${F.name}  ${Me[X].name}  ${Ue}  ${be}`),ye.amount=Ue,je(te,pe,ye);const ze=u(X),$e=mr(X,F,oe),rt=$e*be,zt=$e-ze;o(kt=>({...kt,silver:kt.silver+rt,[X]:Math.max(0,(kt[X]||0)-be)})),ce(kt=>kt.map(Bt=>Bt.id===te?{...Bt,budget:Math.max(0,(Bt.budget||0)-rt),inventory:{...Bt.inventory,[X]:((Bt.inventory||{})[X]||0)+be},relation:Re((Bt.relation||0)+(zt>0?2:0))}:Bt)),c(` ${F.name}  ${be}${Me[X].name} ${rt.toFixed(1)}  ${zt>=0?"+":""}${zt.toFixed(2)}`);break}case"import":{const X=ye.resource,be=Math.max(1,Math.floor(ye.amount||5));if(!X||!Me[X]||Me[X].type==="virtual"||X==="silver"){c("");return}const ke=dr(X,F,oe),Ue=Math.floor(ke.surplusAmount);if(!ke.isSurplus||Ue<=0){c(`${F.name}  ${Me[X].name} `);return}if(be>Ue)return c(`${F.name}  ${Me[X].name}  ${Ue}  ${be}`),ye.amount=Ue,je(te,pe,ye);const ze=u(X),$e=mr(X,F,oe),ot=$e*be;if((m.silver||0)<ot){c("");return}const rt=ze-$e;o(zt=>({...zt,silver:zt.silver-ot,[X]:(zt[X]||0)+be})),ce(zt=>zt.map(kt=>kt.id===te?{...kt,budget:(kt.budget||0)+ot,inventory:{...kt.inventory,[X]:Math.max(0,((kt.inventory||{})[X]||0)-be)},relation:Re((kt.relation||0)+(rt>0?2:0))}:kt)),c(` ${F.name}  ${be}${Me[X].name} ${ot.toFixed(1)}  ${rt>=0?"+":""}${rt.toFixed(2)}`);break}case"demand":{const X=Ec(D,w),be=Math.max(.1,X/(X+200)*.6+(F.relation||0)/300);if(Math.random()<be){const ke=Math.min(F.wealth||0,Math.ceil(150+X*.25));o(Ue=>({...Ue,silver:Ue.silver+ke})),ce(Ue=>Ue.map(ze=>ze.id===te?{...ze,wealth:Math.max(0,(ze.wealth||0)-ke),relation:Re((ze.relation||0)-30)}:ze)),c(`${F.name}  ${ke} `)}else{const ke=Math.random()<.4+(F.aggression||0)*.4;ce(Ue=>Ue.map(ze=>ze.id===te?{...ze,relation:Re((ze.relation||0)-40),isAtWar:ke?!0:ze.isAtWar,warStartDay:ke?oe:ze.warStartDay,warDuration:ke?0:ze.warDuration}:ze)),c(`${F.name} ${ke?"":""}`)}break}case"declare_war":if(F.peaceTreatyUntil&&oe<F.peaceTreatyUntil){const X=F.peaceTreatyUntil-oe;c(` ${F.name}  ${X} `);return}ce(X=>X.map(be=>be.id===te?{...be,relation:0,isAtWar:!0,warScore:0,warStartDay:oe,warDuration:0,enemyLosses:0,peaceTreatyUntil:void 0}:be)),c(` ${F.name} `);break;case"peace":{if(!F.isAtWar){c("");return}const X=F.warScore||0,be=F.warDuration||0,ke=F.enemyLosses||0,Ue=ch(F,X,be,ke,(ze,$e)=>{Ye(te,ze,$e)});Gt(Ue);break}}},Ae=(te,pe,ye)=>{const F=ae.find(X=>X.id===te);if(!F)return;const Re=oe+365;pe==="installment"?(ce(X=>X.map(be=>be.id===te?{...be,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,isPeaceRequesting:!1,relation:Math.max(35,be.relation||0),peaceTreatyUntil:Re,installmentPayment:{amount:ye,remainingDays:365,totalAmount:ye*365,paidAmount:0}}:be)),c(`${F.name} ${ye} ${ye*365}`)):pe==="population"?(O(X=>X+ye),me(X=>X+ye),ce(X=>X.map(be=>be.id===te?{...be,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,isPeaceRequesting:!1,population:Math.max(100,(be.population||1e3)-ye),relation:Math.max(35,be.relation||0),peaceTreatyUntil:Re}:be)),c(`${F.name} ${ye} `)):(o(X=>({...X,silver:(X.silver||0)+ye})),ce(X=>X.map(be=>be.id===te?{...be,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,isPeaceRequesting:!1,wealth:Math.max(0,(be.wealth||0)-ye),relation:Math.max(35,be.relation||0),peaceTreatyUntil:Re}:be)),c(`${F.name} ${ye} `))},Se=te=>{ce(pe=>pe.map(ye=>ye.id===te?{...ye,isPeaceRequesting:!1}:ye)),c(`${ae.find(pe=>pe.id===te)?.name||""}`)},Ye=(te,pe,ye)=>{if(pe==="cancel"){c("");return}const F=ae.find(ze=>ze.id===te);if(!F)return;const Re=ze=>Math.max(0,Math.min(100,ze)),X=F.warScore||0,be=F.warDuration||0,ke=F.enemyLosses||0,Ue=oe+365;if(pe==="demand_high")X/100+Math.min(.4,ke/250)+Math.min(.2,be/250)>.7||(F.wealth||0)<=0?(o($e=>({...$e,silver:($e.silver||0)+ye})),ce($e=>$e.map(ot=>ot.id===te?{...ot,wealth:Math.max(0,(ot.wealth||0)-ye),isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,relation:Re((ot.relation||0)+5),peaceTreatyUntil:Ue}:ot)),c(`${F.name}  ${ye} `)):c(`${F.name} `);else if(pe==="demand_installment")X/90+Math.min(.45,ke/220)+Math.min(.25,be/220)>.65?(ce($e=>$e.map(ot=>ot.id===te?{...ot,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,relation:Re((ot.relation||0)+8),peaceTreatyUntil:Ue,installmentPayment:{amount:ye,remainingDays:365,totalAmount:ye*365,paidAmount:0}}:ot)),c(`${F.name}  ${ye} ${ye*365}`)):c(`${F.name} `);else if(pe==="demand_population")X/95+Math.min(.42,ke/230)+Math.min(.23,be/230)>.68?(O($e=>$e+ye),me($e=>$e+ye),ce($e=>$e.map(ot=>ot.id===te?{...ot,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,population:Math.max(100,(ot.population||1e3)-ye),relation:Re((ot.relation||0)+7),peaceTreatyUntil:Ue}:ot)),c(`${F.name}  ${ye} `)):c(`${F.name} `);else if(pe==="demand_standard"||pe==="demand_tribute")X/80+Math.min(.5,ke/200)+Math.min(.3,be/200)>.6||(F.wealth||0)<=0?(o($e=>({...$e,silver:($e.silver||0)+ye})),ce($e=>$e.map(ot=>ot.id===te?{...ot,wealth:Math.max(0,(ot.wealth||0)-ye),isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,relation:Re((ot.relation||0)+10),peaceTreatyUntil:Ue}:ot)),c(`${F.name}  ${ye} `)):c(`${F.name} `);else if(pe==="peace_only")Math.max(.3,X/60+Math.min(.4,ke/150))>.5?(ce($e=>$e.map(ot=>ot.id===te?{...ot,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,relation:Re((ot.relation||0)+15),peaceTreatyUntil:Ue}:ot)),c(`${F.name} `)):c(`${F.name} `);else if(pe==="pay_installment")ce(ze=>ze.map($e=>$e.id===te?{...$e,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,relation:Re(28),peaceTreatyUntil:Ue}:$e)),l.setPlayerInstallmentPayment({nationId:te,amount:ye,remainingDays:365,totalAmount:ye*365,paidAmount:0}),c(` ${F.name}  ${ye} ${ye*365}`);else if(pe==="offer_population"){if(y<ye){c("");return}O(ze=>Math.max(-y+1,ze-ye)),me(ze=>Math.max(1,ze-ye)),ce(ze=>ze.map($e=>$e.id===te?{...$e,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,population:($e.population||1e3)+ye,relation:Re(27),peaceTreatyUntil:Ue}:$e)),c(` ${ye}  ${F.name} `)}else if(pe==="pay_standard"||pe==="pay_high"){if((m.silver||0)<ye){c("");return}o(ze=>({...ze,silver:(ze.silver||0)-ye})),ce(ze=>ze.map($e=>$e.id===te?{...$e,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,wealth:($e.wealth||0)+ye,relation:Re(pe==="pay_high"?25:30),peaceTreatyUntil:Ue}:$e)),c(` ${ye}  ${F.name} `)}},bt=(te,pe,ye={})=>{const F=ae.find(ke=>ke.id===te);if(!F)return;const{resource:Re,type:X}=ye;if(!Re||!X)return;if(!Me[Re]||Me[Re].type==="virtual"||Re==="silver"){c("");return}const be=Me[Re];if((be.unlockEpoch??0)>w){c(`${be.name} `);return}if(pe==="create"){const ke=L?.merchant||0,Ue=R.routes.length;if(ke>0&&Ue>=ke){c(`${ke}`);return}if(F.isAtWar){c(` ${F.name} `);return}if(R.routes.some(rt=>rt.nationId===te&&rt.resource===Re&&rt.type===X)){c("");return}const $e=dr(Re,F,oe);if(X==="export"){if(!$e.isShortage||$e.shortageAmount<=0){c(`${F.name}  ${be.name} `);return}}else if(X==="import"&&(!$e.isSurplus||$e.surplusAmount<=0)){c(`${F.name}  ${be.name} `);return}ne(rt=>({...rt,routes:[...rt.routes,{nationId:te,resource:Re,type:X,createdAt:oe}]}));const ot=X==="export"?"":"";c(`  ${be.name} ${ot} ${F.name}`)}else if(pe==="cancel"){if(!R.routes.some(ze=>ze.nationId===te&&ze.resource===Re&&ze.type===X)){c("");return}ne(ze=>({...ze,routes:ze.routes.filter($e=>!($e.nationId===te&&$e.resource===Re&&$e.type===X))}));const Ue=X==="export"?"":"";c(`  ${be.name} ${Ue} ${F.name}`)}},ua=()=>{if(se)return;const te=ih(l);te&&(B(te),c(` ${te.name}`),zl(ol.EVENT),l.setIsPaused(!0))},Gt=te=>{if(console.log("[TRIGGER EVENT] Called with event:",te),console.log("[TRIGGER EVENT] Current event:",se),se){console.log("[TRIGGER EVENT] Blocked: already have an event showing");return}console.log("[TRIGGER EVENT] Setting current event..."),B(te),c(` ${te.name}`),zl(ol.EVENT),l.setIsPaused(!0),console.log("[TRIGGER EVENT] Event triggered successfully")};return{canUpgradeEpoch:C,upgradeEpoch:$,buyBuilding:J,sellBuilding:le,researchTech:De,toggleDecree:fe,manualGather:Ge,recruitUnit:K,disbandUnit:We,cancelTraining:xt,launchBattle:P,handleDiplomaticAction:je,handleEnemyPeaceAccept:Ae,handleEnemyPeaceReject:Se,handlePlayerPeaceProposal:Ye,handleTradeRouteAction:bt,triggerRandomEvent:ua,triggerDiplomaticEvent:Gt,handleEventOption:(te,pe)=>{let ye=up.find(be=>be.id===te);if(!ye&&se&&se.id===te&&(ye=se),!ye)return;const F=(be={})=>{be.resources&&o(ke=>{const Ue={...ke};return Object.entries(be.resources).forEach(([ze,$e])=>{Ue[ze]=Math.max(0,(Ue[ze]||0)+$e)}),Ue}),be.population&&me(ke=>Math.max(1,ke+be.population)),be.stability&&G(ke=>Math.max(0,Math.min(100,ke+be.stability))),be.science&&o(ke=>({...ke,science:Math.max(0,(ke.science||0)+be.science)})),be.approval&&ge(ke=>{const Ue={...ke};return Object.entries(be.approval).forEach(([ze,$e])=>{Ue[ze]=Math.max(0,Math.min(100,(Ue[ze]||50)+$e))}),Ue})},Re=pe.effects||{},X=Array.isArray(pe.randomEffects)?pe.randomEffects:[];F(Re),X.forEach(be=>{const ke=typeof be.chance=="number"?be.chance:0;ke>0&&Math.random()<ke&&F(be.effects||{})}),pe.callback&&typeof pe.callback=="function"&&pe.callback(),Q(be=>[{eventId:te,eventName:ye.name,optionId:pe.id,optionText:pe.text,timestamp:Date.now(),day:oe},...be].slice(0,50)),c(`${pe.text}`),B(null)},setBattleResult:ie}};function K0(){const[l,c]=V.useState(!0),[m,o]=V.useState(.5);V.useEffect(()=>{try{const g=localStorage.getItem("sound_settings");if(g){const y=JSON.parse(g);c(y.enabled!==!1),o(y.volume??.5)}}catch(g){console.warn("Failed to load sound settings:",g)}},[]);const p=V.useCallback((g,y)=>{try{localStorage.setItem("sound_settings",JSON.stringify({enabled:g,volume:y}))}catch(k){console.warn("Failed to save sound settings:",k)}},[]),j=V.useCallback(g=>{if(l)try{const y=zl(g);y&&y()}catch(y){console.warn(`Failed to play sound ${g}:`,y)}},[l]),v=V.useCallback(()=>{const g=!l;c(g),p(g,m)},[l,m,p]),w=V.useCallback(g=>{const y=Math.max(0,Math.min(1,g));o(y),p(l,y)},[l,p]);return{enabled:l,volume:m,playSound:j,toggleSound:v,setVolume:w,SOUND_TYPES:ol}}const Gf={0:{name:"",primaryColor:"#d97706",secondaryColor:"#92400e",accentColor:"#fbbf24",bgGradient:"linear-gradient(135deg, #1a1410 0%, #2c1810 50%, #1a1410 100%)",bgColor:"#1a1410",surfaceColor:"rgba(34, 24, 14, 0.92)",surfaceAltColor:"rgba(61, 36, 21, 0.85)",surfaceMutedColor:"rgba(32, 22, 14, 0.7)",surfaceTranslucent:"rgba(32, 22, 14, 0.55)",textMutedColor:"rgba(254, 243, 199, 0.7)",bgPattern:"stone",textColor:"#fef3c7",borderColor:"rgba(217, 119, 6, 0.4)",glowColor:"rgba(217, 119, 6, 0.5)",metalHighlight:"rgba(251, 191, 36, 0.3)",shadowDepth:"0 4px 12px rgba(0, 0, 0, 0.5), 0 2px 6px rgba(217, 119, 6, 0.3)",atmosphere:"primitive",icon:""},1:{name:"",primaryColor:"#ea580c",secondaryColor:"#9a3412",accentColor:"#fb923c",bgGradient:"linear-gradient(135deg, #1c1410 0%, #2d1c10 50%, #1c1410 100%)",bgColor:"#1c1410",surfaceColor:"rgba(40, 22, 12, 0.92)",surfaceAltColor:"rgba(70, 30, 12, 0.85)",surfaceMutedColor:"rgba(38, 21, 12, 0.68)",surfaceTranslucent:"rgba(38, 21, 12, 0.52)",textMutedColor:"rgba(254, 215, 170, 0.7)",bgPattern:"bronze",textColor:"#fed7aa",borderColor:"rgba(234, 88, 12, 0.4)",glowColor:"rgba(234, 88, 12, 0.5)",metalHighlight:"rgba(251, 146, 60, 0.35)",shadowDepth:"0 4px 12px rgba(0, 0, 0, 0.5), 0 2px 6px rgba(205, 127, 50, 0.4)",atmosphere:"ancient",icon:""},2:{name:"",primaryColor:"#dc2626",secondaryColor:"#991b1b",accentColor:"#f87171",bgGradient:"linear-gradient(135deg, #1a1010 0%, #2c1010 50%, #1a1010 100%)",bgColor:"#1a1010",surfaceColor:"rgba(36, 14, 14, 0.92)",surfaceAltColor:"rgba(58, 18, 18, 0.85)",surfaceMutedColor:"rgba(34, 12, 12, 0.68)",surfaceTranslucent:"rgba(34, 12, 12, 0.52)",textMutedColor:"rgba(254, 202, 202, 0.75)",bgPattern:"marble",textColor:"#fecaca",borderColor:"rgba(220, 38, 38, 0.4)",glowColor:"rgba(220, 38, 38, 0.5)",metalHighlight:"rgba(248, 113, 113, 0.3)",shadowDepth:"0 6px 16px rgba(0, 0, 0, 0.6), 0 3px 8px rgba(220, 38, 38, 0.4)",atmosphere:"classical",icon:""},3:{name:"",primaryColor:"#7c3aed",secondaryColor:"#5b21b6",accentColor:"#a78bfa",bgGradient:"linear-gradient(135deg, #14101a 0%, #1c102c 50%, #14101a 100%)",bgColor:"#14101a",surfaceColor:"rgba(24, 16, 32, 0.92)",surfaceAltColor:"rgba(34, 20, 48, 0.85)",surfaceMutedColor:"rgba(20, 12, 28, 0.68)",surfaceTranslucent:"rgba(20, 12, 28, 0.52)",textMutedColor:"rgba(233, 213, 255, 0.75)",bgPattern:"castle",textColor:"#e9d5ff",borderColor:"rgba(124, 58, 237, 0.4)",glowColor:"rgba(124, 58, 237, 0.5)",metalHighlight:"rgba(167, 139, 250, 0.35)",shadowDepth:"0 6px 16px rgba(0, 0, 0, 0.6), 0 3px 8px rgba(124, 58, 237, 0.4)",atmosphere:"medieval",icon:""},4:{name:"",primaryColor:"#0891b2",secondaryColor:"#155e75",accentColor:"#22d3ee",bgGradient:"linear-gradient(135deg, #10141a 0%, #102c2c 50%, #10141a 100%)",bgColor:"#10141a",surfaceColor:"rgba(14, 26, 32, 0.9)",surfaceAltColor:"rgba(18, 38, 44, 0.85)",surfaceMutedColor:"rgba(12, 22, 28, 0.66)",surfaceTranslucent:"rgba(12, 22, 28, 0.5)",textMutedColor:"rgba(207, 250, 254, 0.75)",bgPattern:"compass",textColor:"#cffafe",borderColor:"rgba(8, 145, 178, 0.4)",glowColor:"rgba(8, 145, 178, 0.5)",metalHighlight:"rgba(34, 211, 238, 0.35)",shadowDepth:"0 6px 16px rgba(0, 0, 0, 0.6), 0 3px 8px rgba(8, 145, 178, 0.4)",atmosphere:"exploration",icon:""},5:{name:"",primaryColor:"#2563eb",secondaryColor:"#1e40af",accentColor:"#60a5fa",bgGradient:"linear-gradient(135deg, #10141a 0%, #101c2c 50%, #10141a 100%)",bgColor:"#10141a",surfaceColor:"rgba(18, 28, 48, 0.9)",surfaceAltColor:"rgba(20, 38, 66, 0.85)",surfaceMutedColor:"rgba(14, 24, 40, 0.66)",surfaceTranslucent:"rgba(14, 24, 40, 0.5)",textMutedColor:"rgba(219, 234, 254, 0.78)",bgPattern:"book",textColor:"#dbeafe",borderColor:"rgba(37, 99, 235, 0.4)",glowColor:"rgba(37, 99, 235, 0.5)",metalHighlight:"rgba(96, 165, 250, 0.35)",shadowDepth:"0 6px 16px rgba(0, 0, 0, 0.6), 0 3px 8px rgba(37, 99, 235, 0.4)",atmosphere:"enlightenment",icon:""},6:{name:"",primaryColor:"#4f46e5",secondaryColor:"#3730a3",accentColor:"#818cf8",bgGradient:"linear-gradient(135deg, #12141a 0%, #1c1c2c 50%, #12141a 100%)",bgColor:"#12141a",surfaceColor:"rgba(18, 18, 32, 0.92)",surfaceAltColor:"rgba(24, 26, 46, 0.85)",surfaceMutedColor:"rgba(16, 18, 30, 0.68)",surfaceTranslucent:"rgba(16, 18, 30, 0.52)",textMutedColor:"rgba(224, 231, 255, 0.8)",bgPattern:"gear",textColor:"#e0e7ff",borderColor:"rgba(79, 70, 229, 0.4)",glowColor:"rgba(79, 70, 229, 0.5)",metalHighlight:"rgba(129, 140, 248, 0.35)",shadowDepth:"0 8px 20px rgba(0, 0, 0, 0.7), 0 4px 10px rgba(79, 70, 229, 0.4)",atmosphere:"industrial",icon:""},7:{name:"",primaryColor:"#8b5cf6",secondaryColor:"#6d28d9",accentColor:"#a78bfa",bgGradient:"linear-gradient(135deg, #14101a 0%, #1c142c 50%, #14101a 100%)",bgColor:"#14101a",surfaceColor:"rgba(22, 16, 32, 0.92)",surfaceAltColor:"rgba(32, 18, 48, 0.85)",surfaceMutedColor:"rgba(18, 10, 32, 0.68)",surfaceTranslucent:"rgba(18, 10, 32, 0.52)",textMutedColor:"rgba(237, 233, 254, 0.8)",bgPattern:"circuit",textColor:"#ede9fe",borderColor:"rgba(139, 92, 246, 0.3)",glowColor:"rgba(139, 92, 246, 0.4)",atmosphere:"modern",icon:""}},Ac=l=>Gf[l]||Gf[0],Eh=l=>{const c=Ac(l),m=document.documentElement;m.style.setProperty("--theme-primary",c.primaryColor),m.style.setProperty("--theme-secondary",c.secondaryColor),m.style.setProperty("--theme-accent",c.accentColor),m.style.setProperty("--theme-text",c.textColor),m.style.setProperty("--theme-text-muted",c.textMutedColor||"rgba(255, 255, 255, 0.75)"),m.style.setProperty("--theme-border",c.borderColor),m.style.setProperty("--theme-highlight",c.metalHighlight||c.accentColor),m.style.setProperty("--theme-glow",c.glowColor),m.style.setProperty("--theme-bg-gradient",c.bgGradient),m.style.setProperty("--theme-bg",c.bgColor||"#0f0a08"),m.style.setProperty("--theme-surface",c.surfaceColor||"rgba(34, 24, 14, 0.92)"),m.style.setProperty("--theme-surface-alt",c.surfaceAltColor||c.surfaceColor||"rgba(34, 24, 14, 0.85)"),m.style.setProperty("--theme-surface-muted",c.surfaceMutedColor||"rgba(34, 24, 14, 0.65)"),m.style.setProperty("--theme-surface-trans",c.surfaceTranslucent||"rgba(34, 24, 14, 0.5)"),m.style.setProperty("--theme-shadow",c.shadowDepth||"0 4px 12px rgba(0, 0, 0, 0.5)")},Wf={stone:`
    <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="stone-pattern" x="0" y="0" width="50" height="50" patternUnits="userSpaceOnUse">
          <circle cx="10" cy="10" r="2" fill="rgba(217, 119, 6, 0.1)" />
          <circle cx="30" cy="25" r="3" fill="rgba(217, 119, 6, 0.08)" />
          <circle cx="45" cy="15" r="2.5" fill="rgba(217, 119, 6, 0.09)" />
          <path d="M0 0 L10 10 M40 40 L50 50" stroke="rgba(217, 119, 6, 0.05)" stroke-width="1" />
        </pattern>
      </defs>
      <rect width="100" height="100" fill="url(#stone-pattern)" />
    </svg>
  `,bronze:`
    <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="bronze-pattern" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
          <path d="M10 10 L20 10 L20 0 M40 0 L40 10 L50 10" stroke="rgba(234, 88, 12, 0.1)" stroke-width="1.5" fill="none" />
          <circle cx="30" cy="30" r="1.5" fill="rgba(234, 88, 12, 0.12)" />
        </pattern>
      </defs>
      <rect width="100" height="100" fill="url(#bronze-pattern)" />
    </svg>
  `,marble:`
    <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="marble-pattern" x="0" y="0" width="80" height="80" patternUnits="userSpaceOnUse">
          <path d="M0 20 L80 20 M0 40 L80 40 M0 60 L80 60" stroke="rgba(220, 38, 38, 0.05)" stroke-width="1" />
          <path d="M20 0 L20 80 M40 0 L40 80 M60 0 L60 80" stroke="rgba(220, 38, 38, 0.05)" stroke-width="1" />
          <circle cx="40" cy="40" r="15" stroke="rgba(220, 38, 38, 0.08)" stroke-width="1" fill="none" />
        </pattern>
      </defs>
      <rect width="100" height="100" fill="url(#marble-pattern)" />
    </svg>
  `,castle:`
    <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="castle-pattern" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse">
          <rect x="0" y="30" width="10" height="10" fill="rgba(124, 58, 237, 0.08)" />
          <rect x="15" y="30" width="10" height="10" fill="rgba(124, 58, 237, 0.08)" />
          <rect x="30" y="30" width="10" height="10" fill="rgba(124, 58, 237, 0.08)" />
          <path d="M5 30 L5 20 M20 30 L20 20 M35 30 L35 20" stroke="rgba(124, 58, 237, 0.1)" stroke-width="1" />
        </pattern>
      </defs>
      <rect width="100" height="100" fill="url(#castle-pattern)" />
    </svg>
  `,compass:`
    <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="compass-pattern" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
          <circle cx="30" cy="30" r="20" stroke="rgba(8, 145, 178, 0.08)" stroke-width="1" fill="none" />
          <path d="M30 10 L30 50 M10 30 L50 30" stroke="rgba(8, 145, 178, 0.1)" stroke-width="1" />
          <path d="M30 30 L35 20 L30 25 L25 20 Z" fill="rgba(8, 145, 178, 0.12)" />
        </pattern>
      </defs>
      <rect width="100" height="100" fill="url(#compass-pattern)" />
    </svg>
  `,book:`
    <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="book-pattern" x="0" y="0" width="50" height="50" patternUnits="userSpaceOnUse">
          <rect x="10" y="10" width="20" height="30" stroke="rgba(37, 99, 235, 0.1)" stroke-width="1" fill="none" />
          <path d="M15 15 L25 15 M15 20 L25 20 M15 25 L25 25" stroke="rgba(37, 99, 235, 0.08)" stroke-width="0.5" />
        </pattern>
      </defs>
      <rect width="100" height="100" fill="url(#book-pattern)" />
    </svg>
  `,gear:`
    <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="gear-pattern" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
          <circle cx="30" cy="30" r="12" stroke="rgba(79, 70, 229, 0.1)" stroke-width="2" fill="none" />
          <circle cx="30" cy="30" r="6" fill="rgba(79, 70, 229, 0.08)" />
          <rect x="28" y="18" width="4" height="6" fill="rgba(79, 70, 229, 0.1)" />
          <rect x="28" y="36" width="4" height="6" fill="rgba(79, 70, 229, 0.1)" />
          <rect x="18" y="28" width="6" height="4" fill="rgba(79, 70, 229, 0.1)" />
          <rect x="36" y="28" width="6" height="4" fill="rgba(79, 70, 229, 0.1)" />
        </pattern>
      </defs>
      <rect width="100" height="100" fill="url(#gear-pattern)" />
    </svg>
  `,circuit:`
    <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="circuit-pattern" x="0" y="0" width="50" height="50" patternUnits="userSpaceOnUse">
          <path d="M0 25 L15 25 M35 25 L50 25 M25 0 L25 15 M25 35 L25 50" stroke="rgba(139, 92, 246, 0.1)" stroke-width="1" />
          <circle cx="25" cy="25" r="3" fill="rgba(139, 92, 246, 0.12)" />
          <rect x="13" y="23" width="4" height="4" fill="rgba(139, 92, 246, 0.1)" />
          <rect x="33" y="23" width="4" height="4" fill="rgba(139, 92, 246, 0.1)" />
        </pattern>
      </defs>
      <rect width="100" height="100" fill="url(#circuit-pattern)" />
    </svg>
  `},Sh=l=>{const c=Wf[l]||Wf.stone;return`data:image/svg+xml,${encodeURIComponent(c.trim())}`};window.matchMedia("(prefers-reduced-motion: reduce)").matches;const Ah=l=>(V.useEffect(()=>{Eh(l);const c=Ac(l),m=Sh(c.bgPattern);document.body.style.backgroundImage=`${c.bgGradient}, url("${m}")`,document.body.style.backgroundColor=c.bgColor||"#0f0a08",document.body.style.color=c.textColor||"",document.body.style.backgroundAttachment="fixed",document.body.style.backgroundSize="cover, 100px 100px";const o=document.querySelector('meta[name="theme-color"]');return o&&o.setAttribute("content",c.primaryColor),()=>{}},[l]),Ac(l));const zh=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Dh=l=>l.replace(/^([A-Z])|[\s-_]+(\w)/g,(c,m,o)=>o?o.toUpperCase():m.toLowerCase()),Yf=l=>{const c=Dh(l);return c.charAt(0).toUpperCase()+c.slice(1)},xp=(...l)=>l.filter((c,m,o)=>!!c&&c.trim()!==""&&o.indexOf(c)===m).join(" ").trim(),Oh=l=>{for(const c in l)if(c.startsWith("aria-")||c==="role"||c==="title")return!0};var Rh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Bh=V.forwardRef(({color:l="currentColor",size:c=24,strokeWidth:m=2,absoluteStrokeWidth:o,className:p="",children:j,iconNode:v,...w},g)=>V.createElement("svg",{ref:g,...Rh,width:c,height:c,stroke:l,strokeWidth:o?Number(m)*24/Number(c):m,className:xp("lucide",p),...!j&&!Oh(w)&&{"aria-hidden":"true"},...w},[...v.map(([y,k])=>V.createElement(y,k)),...Array.isArray(j)?j:[j]]));const Ne=(l,c)=>{const m=V.forwardRef(({className:o,...p},j)=>V.createElement(Bh,{ref:j,iconNode:c,className:xp(`lucide-${zh(Yf(l))}`,`lucide-${l}`,o),...p}));return m.displayName=Yf(l),m};const $h=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Uh=Ne("activity",$h);const Hh=[["path",{d:"M12 6v16",key:"nqf5sj"}],["path",{d:"m19 13 2-1a9 9 0 0 1-18 0l2 1",key:"y7qv08"}],["path",{d:"M9 11h6",key:"1fldmi"}],["circle",{cx:"12",cy:"4",r:"2",key:"muu5ef"}]],Lh=Ne("anchor",Hh);const qh=[["path",{d:"M7 10H6a4 4 0 0 1-4-4 1 1 0 0 1 1-1h4",key:"1hjpb6"}],["path",{d:"M7 5a1 1 0 0 1 1-1h13a1 1 0 0 1 1 1 7 7 0 0 1-7 7H8a1 1 0 0 1-1-1z",key:"1qn45f"}],["path",{d:"M9 12v5",key:"3anwtq"}],["path",{d:"M15 12v5",key:"5xh3zn"}],["path",{d:"M5 20a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3 1 1 0 0 1-1 1H6a1 1 0 0 1-1-1",key:"1fi4x8"}]],Vh=Ne("anvil",qh);const Gh=[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"1qyhux"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]],Wh=Ne("armchair",Gh);const Yh=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],Xh=Ne("arrow-down-left",Yh);const Ph=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Zh=Ne("arrow-down",Ph);const Qh=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Fh=Ne("arrow-right",Qh);const Jh=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Kh=Ne("arrow-up-right",Jh);const Ih=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],e1=Ne("arrow-up",Ih);const t1=[["circle",{cx:"11",cy:"13",r:"9",key:"hd149"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95",key:"jp4j1b"}],["path",{d:"m22 2-1.5 1.5",key:"ay92ug"}]],a1=Ne("bomb",t1);const s1=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],n1=Ne("book-open",s1);const l1=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],i1=Ne("book",l1);const r1=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],c1=Ne("boxes",r1);const o1=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],d1=Ne("briefcase",o1);const u1=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],m1=Ne("building",u1);const f1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],p1=Ne("calendar",f1);const x1=[["path",{d:"M10 5V3",key:"1y54qe"}],["path",{d:"M14 5V3",key:"m6isi"}],["path",{d:"M15 21v-3a3 3 0 0 0-6 0v3",key:"lbp5hj"}],["path",{d:"M18 3v8",key:"2ollhf"}],["path",{d:"M18 5H6",key:"98imr9"}],["path",{d:"M22 11H2",key:"1lmjae"}],["path",{d:"M22 9v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9",key:"1rly83"}],["path",{d:"M6 3v8",key:"csox7g"}]],h1=Ne("castle",x1);const g1=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],y1=Ne("chart-no-axes-column-increasing",g1);const b1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],v1=Ne("check",b1);const j1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],N1=Ne("circle-arrow-up",j1);const w1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],C1=Ne("circle-question-mark",w1);const M1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],_1=Ne("circle-x",M1);const T1=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],k1=Ne("clock",T1);const E1=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],S1=Ne("coffee",E1);const A1=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]],z1=Ne("cog",A1);const D1=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],O1=Ne("coins",D1);const R1=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],B1=Ne("compass",R1);const $1=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],U1=Ne("cpu",$1);const H1=[["path",{d:"M4 9a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h4a1 1 0 0 1 1 1v4a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-4a1 1 0 0 1 1-1h4a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-4a1 1 0 0 1-1-1V4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4a1 1 0 0 1-1 1z",key:"1xbrqy"}]],L1=Ne("cross",H1);const q1=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],V1=Ne("crown",q1);const G1=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],W1=Ne("dollar-sign",G1);const Y1=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],X1=Ne("download",Y1);const P1=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],Z1=Ne("droplets",P1);const Q1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],F1=Ne("eye",Q1);const J1=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],K1=Ne("factory",J1);const I1=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z",key:"b19h5q"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z",key:"h7h5ge"}]],eg=Ne("fast-forward",I1);const tg=[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]],ag=Ne("feather",tg);const sg=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ng=Ne("file-text",sg);const lg=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],ig=Ne("flag",lg);const rg=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],cg=Ne("flame",rg);const og=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]],dg=Ne("gavel",og);const ug=[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]],mg=Ne("gem",ug);const fg=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],pg=Ne("gift",fg);const xg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],hg=Ne("globe",xg);const gg=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],yg=Ne("hammer",gg);const bg=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],vg=Ne("handshake",bg);const jg=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Ng=Ne("heart",jg);const wg=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Cg=Ne("house",wg);const Mg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],_g=Ne("info",Mg);const Tg=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],kg=Ne("landmark",Tg);const Eg=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],Sg=Ne("leaf",Eg);const Ag=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],zg=Ne("lightbulb",Ag);const Dg=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Og=Ne("list",Dg);const Rg=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Bg=Ne("lock",Rg);const $g=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Ug=Ne("menu",$g);const Hg=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Lg=Ne("message-square",Hg);const qg=[["path",{d:"M5 12h14",key:"1ays0h"}]],Vg=Ne("minus",qg);const Gg=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],Wg=Ne("mountain",Gg);const Yg=[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]],Xg=Ne("music-2",Yg);const Pg=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Zg=Ne("navigation",Pg);const Qg=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Fg=Ne("package",Qg);const Jg=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],Kg=Ne("paintbrush",Jg);const Ig=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],ey=Ne("pause",Ig);const ty=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3L11 9.999",key:"1lw9ds"}],["path",{d:"M15.973 4.027A13 13 0 0 0 5.902 2.373c-1.398.342-1.092 2.158.277 2.601a19.9 19.9 0 0 1 5.822 3.024",key:"ffj4ej"}],["path",{d:"M16.001 11.999a19.9 19.9 0 0 1 3.024 5.824c.444 1.369 2.26 1.676 2.603.278A13 13 0 0 0 20 8.069",key:"8tj4zw"}],["path",{d:"M18.352 3.352a1.205 1.205 0 0 0-1.704 0l-5.296 5.296a1.205 1.205 0 0 0 0 1.704l2.296 2.296a1.205 1.205 0 0 0 1.704 0l5.296-5.296a1.205 1.205 0 0 0 0-1.704z",key:"hh6h97"}]],ay=Ne("pickaxe",ty);const sy=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ny=Ne("play",sy);const ly=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],iy=Ne("plus",ly);const ry=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],cy=Ne("save",ry);const oy=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],dy=Ne("scale",oy);const uy=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],my=Ne("scroll-text",uy);const fy=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],py=Ne("settings",fy);const xy=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],hy=Ne("shield-alert",xy);const gy=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],yy=Ne("shield",gy);const by=[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]],vy=Ne("ship",by);const jy=[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]],Ny=Ne("shirt",jy);const wy=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Cy=Ne("shopping-cart",wy);const My=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],_y=Ne("skull",My);const Ty=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],ky=Ne("sliders-vertical",Ty);const Ey=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Sy=Ne("sparkles",Ey);const Ay=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],zy=Ne("star",Ay);const Dy=[["path",{d:"m11 19-6-6",key:"s7kpr"}],["path",{d:"m5 21-2-2",key:"1kw20b"}],["path",{d:"m8 16-4 4",key:"1oqv8h"}],["path",{d:"M9.5 17.5 21 6V3h-3L6.5 14.5",key:"pkxemp"}]],Oy=Ne("sword",Dy);const Ry=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],By=Ne("swords",Ry);const $y=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Uy=Ne("table",$y);const Hy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ly=Ne("target",Hy);const qy=[["path",{d:"M3.5 21 14 3",key:"1szst5"}],["path",{d:"M20.5 21 10 3",key:"1310c3"}],["path",{d:"M15.5 21 12 15l-3.5 6",key:"1ddtfw"}],["path",{d:"M2 21h20",key:"1nyx9w"}]],Vy=Ne("tent",qy);const Gy=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],Wy=Ne("thumbs-down",Gy);const Yy=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],Xy=Ne("thumbs-up",Yy);const Py=[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]],Zy=Ne("tram-front",Py);const Qy=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Fy=Ne("trash-2",Qy);const Jy=[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]],Ky=Ne("trees",Jy);const Iy=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],eb=Ne("trending-down",Iy);const tb=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ab=Ne("trending-up",tb);const sb=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],nb=Ne("triangle-alert",sb);const lb=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],ib=Ne("truck",lb);const rb=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],cb=Ne("user-check",rb);const ob=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],db=Ne("user-cog",ob);const ub=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],mb=Ne("user",ub);const fb=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Xf=Ne("users",fb);const pb=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],xb=Ne("utensils-crossed",pb);const hb=[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]],gb=Ne("wheat",hb);const yb=[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]],bb=Ne("wine",yb);const vb=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jb=Ne("x",vb);const Nb=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],wb=Ne("zap",Nb),Cb={Hammer:yg,Pickaxe:ay,Trees:Ky,Wheat:gb,Anvil:Vh,ScrollText:my,Users:Xf,Globe:hg,Activity:Uh,Crown:V1,Swords:By,Handshake:vg,ArrowUpCircle:N1,Cpu:U1,Home:Cg,Settings:py,Castle:h1,Tent:Vy,Landmark:kg,Factory:K1,Zap:wb,Trash2:Fy,Scale:dy,BookOpen:n1,Coins:O1,Gavel:dg,Shield:yy,Cross:L1,Briefcase:d1,UserCog:db,Play:ny,Pause:ey,FastForward:eg,ArrowRight:Fh,TrendingUp:ab,Package:Fg,Sparkles:Sy,ThumbsUp:Xy,ThumbsDown:Wy,X:jb,Target:Ly,Bomb:a1,Truck:ib,Plus:iy,Minus:Vg,AlertTriangle:nb,Info:_g,Gift:pg,Lightbulb:zg,BarChart:y1,MessageSquare:Lg,Eye:F1,Flag:ig,Sword:Oy,UserCheck:cb,Clock:k1,Check:v1,ArrowUp:e1,ArrowDown:Zh,Calendar:p1,Heart:Ng,User:mb,Skull:_y,Star:zy,TrendingDown:eb,Leaf:Sg,Coffee:S1,Flame:cg,Cog:z1,Gem:mg,Mountain:Wg,Boxes:c1,Music2:Xg,Navigation:Zg,Train:Zy,Anchor:Lh,Ship:vy,Book:i1,Sliders:ky,Lock:Bg,FileText:ng,Shirt:Ny,ShieldAlert:hy,ShoppingCart:Cy,ArrowUpRight:Kh,Compass:B1,Feather:ag,UtensilsCrossed:xb,Armchair:Wh,Wine:bb,ArrowDownLeft:Xh,DollarSign:W1,XCircle:_1,HelpCircle:C1,List:Og,Paintbrush:Kg,Droplets:Z1,Save:cy,Download:X1,Table:Uy,Building:m1,Menu:Ug,Horse:Xf},Mb=l=>Cb[l],N=({name:l,size:c=16,className:m})=>{const o=Mb(l);return o?a.jsx(o,{size:c,className:m}):null},_b=({x:l,y:c,text:m,color:o,onComplete:p})=>(V.useEffect(()=>{const j=setTimeout(p,800);return()=>clearTimeout(j)},[p]),a.jsx("div",{className:`fixed pointer-events-none font-bold text-lg z-50 animate-float-up ${o}`,style:{left:l,top:c},children:m})),_c=({position:l="top-left",size:c=24,className:m=""})=>{const o={"top-left":"top-0 left-0","top-right":"top-0 right-0 rotate-90","bottom-left":"bottom-0 left-0 -rotate-90","bottom-right":"bottom-0 right-0 rotate-180"};return a.jsxs("svg",{className:`absolute ${o[l]} ${m}`,width:c,height:c,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M2 2 L8 2 M2 2 L2 8 M2 2 L6 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",opacity:"0.6"}),a.jsx("path",{d:"M1 1 L1 10 M1 1 L10 1",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round",opacity:"0.3"})]})},Tb=({className:l=""})=>a.jsxs("div",{className:`relative h-px my-4 ${l}`,children:[a.jsxs("svg",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",width:"100%",height:"2",preserveAspectRatio:"none",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"divider-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[a.jsx("stop",{offset:"0%",stopColor:"currentColor",stopOpacity:"0"}),a.jsx("stop",{offset:"20%",stopColor:"currentColor",stopOpacity:"0.3"}),a.jsx("stop",{offset:"50%",stopColor:"currentColor",stopOpacity:"0.6"}),a.jsx("stop",{offset:"80%",stopColor:"currentColor",stopOpacity:"0.3"}),a.jsx("stop",{offset:"100%",stopColor:"currentColor",stopOpacity:"0"})]})}),a.jsx("line",{x1:"0",y1:"1",x2:"100%",y2:"1",stroke:"url(#divider-gradient)",strokeWidth:"2"})]}),a.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-gray-900 px-3",children:a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 12 12",className:"text-amber-500",children:[a.jsx("path",{d:"M6 0 L12 6 L6 12 L0 6 Z",fill:"currentColor",opacity:"0.8"}),a.jsx("path",{d:"M6 2 L10 6 L6 10 L2 6 Z",fill:"currentColor",opacity:"0.4"})]})})]}),Z0=({opacity:l=.03,className:c=""})=>a.jsxs("svg",{className:`absolute inset-0 w-full h-full pointer-events-none ${c}`,style:{opacity:l},children:[a.jsx("defs",{children:a.jsxs("pattern",{id:"ancient-pattern",x:"0",y:"0",width:"100",height:"100",patternUnits:"userSpaceOnUse",children:[a.jsx("path",{d:"M0 20 L20 20 L20 0 M40 0 L40 20 L60 20 M60 40 L40 40 L40 60 M20 60 L20 40 L0 40",stroke:"currentColor",strokeWidth:"1",fill:"none",opacity:"0.5"}),a.jsx("circle",{cx:"10",cy:"10",r:"1",fill:"currentColor",opacity:"0.3"}),a.jsx("circle",{cx:"50",cy:"50",r:"1",fill:"currentColor",opacity:"0.3"}),a.jsx("circle",{cx:"90",cy:"90",r:"1",fill:"currentColor",opacity:"0.3"}),a.jsx("line",{x1:"0",y1:"0",x2:"20",y2:"20",stroke:"currentColor",strokeWidth:"0.5",opacity:"0.2"}),a.jsx("line",{x1:"80",y1:"80",x2:"100",y2:"100",stroke:"currentColor",strokeWidth:"0.5",opacity:"0.2"})]})}),a.jsx("rect",{width:"100%",height:"100%",fill:"url(#ancient-pattern)",className:"text-amber-600"})]}),kb=({children:l,className:c="",variant:m="ancient"})=>{const o={ancient:"glass-ancient",epic:"glass-epic",monument:"glass-monument"};return a.jsxs("div",{className:`relative ${o[m]} rounded-xl p-6 ${c}`,children:[a.jsx(_c,{position:"top-left",className:"text-amber-500/60"}),a.jsx(_c,{position:"top-right",className:"text-amber-500/60"}),a.jsx(_c,{position:"bottom-left",className:"text-amber-500/60"}),a.jsx(_c,{position:"bottom-right",className:"text-amber-500/60"}),a.jsx(Z0,{opacity:.02}),a.jsx("div",{className:"relative z-10",children:l})]})},Eb=({gameState:l,taxes:c,netSilverPerDay:m,tradeStats:o={income:0,expense:0},armyFoodNeed:p,onResourceDetailClick:j,onPopulationDetailClick:v,onStrataClick:w,onMarketClick:g,onEmpireSceneClick:y,gameControls:k})=>{const[_,E]=V.useState(!1),[U,D]=V.useState(!1),M=Sc(l.daysElapsed||0),A=l.market?.prices?.food??(Me.food?.basePrice||1),S=l.militaryWageRatio||1,ie=p*A*S,ae=o?.income||0,ce=o?.expense||0,Ce=ae-ce,oe=m>=0?"text-green-300":"text-red-300",se=m>=0?"text-green-300 bg-green-900/20 hover:bg-green-900/40":"text-red-300 bg-red-900/20 hover:bg-red-900/40",B=m>=0?"TrendingUp":"TrendingDown",de=Ce>=0?"text-emerald-300":"text-red-300",Q=Ce>=0?"text-emerald-300 bg-emerald-900/20 border-emerald-500/30":"text-red-300 bg-red-900/20 border-red-500/30",I=xa[l.epoch]?.color||"text-blue-400",ge=ve=>ve>=1e6?(ve/1e6).toFixed(1)+"M":ve>=1e3?(ve/1e3).toFixed(1)+"K":Math.floor(ve).toString();return Object.entries(Me).filter(([ve,G])=>!(G.type==="virtual"||G.type==="currency"||typeof G.unlockEpoch=="number"&&G.unlockEpoch>l.epoch)).slice(0,6),a.jsxs("header",{className:"relative glass-epic border-b border-theme-border shadow-epic overflow-visible",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-ancient-ink/50 via-ancient-stone/30 to-ancient-ink/50 opacity-50 overflow-hidden"}),a.jsx("div",{className:"absolute inset-0 animate-shimmer overflow-hidden",style:{backgroundImage:"linear-gradient(90deg, transparent 0%, rgba(212, 175, 55, 0.1) 50%, transparent 100%)",backgroundSize:"200% 100%"}}),a.jsxs("div",{className:"max-w-[1920px] mx-auto px-3 sm:px-4 py-2 sm:py-3 relative z-10",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-4 mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-ancient-gold to-ancient-bronze rounded-lg blur-md opacity-50 group-hover:opacity-75 transition-opacity"}),a.jsx("div",{className:"relative bg-gradient-to-br from-ancient-gold/20 to-ancient-bronze/20 p-1.5 sm:p-2 rounded-lg border border-ancient-gold/30 shadow-glow-gold animate-pulse-gold",children:a.jsx(N,{name:"Globe",size:16,className:"sm:w-5 sm:h-5 text-ancient-gold"})})]}),a.jsxs("div",{className:"hidden sm:block",children:[a.jsx("h1",{className:"font-epic font-bold text-xs sm:text-base leading-none text-monument",children:""}),a.jsx("span",{className:"text-[10px] sm:text-xs font-bold uppercase text-ancient tracking-wider",children:xa[l.epoch]?.name})]}),a.jsx("div",{className:"sm:hidden",children:a.jsx("span",{className:`text-xs font-bold ${I}`,children:xa[l.epoch]?.name})})]}),a.jsxs("button",{onClick:()=>{window.innerWidth<1024&&y&&y()},className:"relative group flex items-center gap-1.5 sm:gap-2 glass-ancient px-2 sm:px-3 py-1 sm:py-1.5 rounded-full border border-ancient-gold/20 hover:border-ancient-gold/40 hover:shadow-glow-gold transition-all",children:[a.jsx(N,{name:"Calendar",size:14,className:"text-ancient-gold sm:w-4 sm:h-4"}),a.jsxs("div",{className:"text-[10px] sm:text-xs leading-tight",children:[a.jsxs("div",{className:"font-bold text-ancient",children:[" ",M.year,"   ",M.season]}),a.jsxs("div",{className:"text-[9px] sm:text-[10px] text-ancient-bronze hidden sm:block",children:[M.monthName,M.day,"   x",l.gameSpeed]})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between gap-1.5 sm:gap-3 pb-1",children:[a.jsxs("div",{className:"relative flex items-center gap-1.5 sm:gap-3 flex-wrap flex-1",children:[a.jsxs("button",{onClick:()=>j("silver"),onMouseEnter:()=>E(!0),className:"relative flex items-center gap-1 sm:gap-1.5 glass-ancient px-2 sm:px-3 py-1.5 rounded-full border border-ancient-gold/30 hover:border-ancient-gold/60 hover:shadow-glow-gold transition-all flex-shrink-0 group overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-ancient-gold/10 via-ancient-gold/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx(N,{name:"Coins",size:14,className:"text-ancient-gold sm:w-4 sm:h-4 relative z-10"}),a.jsx("span",{className:"font-mono text-xs sm:text-sm font-bold text-ancient relative z-10",children:ge(l.resources.silver||0)}),a.jsxs("div",{onClick:ve=>{ve.stopPropagation(),E(G=>!G)},className:`flex items-center gap-0.5 text-[10px] px-1 sm:px-1.5 py-0.5 rounded-full transition-colors cursor-pointer ${se}`,children:[a.jsx(N,{name:B,size:10}),a.jsxs("span",{className:`font-mono ${oe}`,children:[m>=0?"+":"",m.toFixed(0)]})]}),Math.abs(Ce)>=.1&&a.jsxs("div",{className:`hidden sm:flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full border ${Q}`,children:[a.jsx(N,{name:"Ship",size:10,className:Ce>=0?"text-emerald-300":"text-red-300"}),a.jsxs("span",{className:`font-mono ${de}`,children:[Ce>=0?"+":"",Ce.toFixed(0)]})]})]}),_&&a.jsxs("div",{onMouseLeave:()=>E(!1),className:"absolute top-full left-0 mt-2 w-72 bg-gray-900/95 backdrop-blur-md border border-gray-700/70 rounded-xl p-4 shadow-glass z-[60] animate-slide-up",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-300 mb-3",children:[a.jsx("span",{className:"font-semibold",children:" ()"}),a.jsx("button",{onClick:()=>E(!1),children:a.jsx(N,{name:"X",size:16,className:"text-gray-400 hover:text-white"})})]}),a.jsxs("div",{className:"text-xs text-gray-400 space-y-2",children:[a.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-800",children:[a.jsx("span",{children:""}),a.jsxs("span",{className:"text-yellow-200 font-mono",children:["+",c.breakdown?.headTax?.toFixed(2)||"0.00"]})]}),a.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-800",children:[a.jsx("span",{children:""}),a.jsxs("span",{className:"text-yellow-200 font-mono",children:["+",c.breakdown?.industryTax?.toFixed(2)||"0.00"]})]}),a.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-800",children:[a.jsx("span",{children:""}),a.jsxs("span",{className:"text-yellow-200 font-mono",children:["+",c.breakdown?.businessTax?.toFixed(2)||"0.00"]})]}),a.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-800",children:[a.jsx("span",{children:""}),a.jsxs("div",{className:"text-right",children:[a.jsxs("span",{className:`${de} font-mono block`,children:[Ce>=0?"+":"",Ce.toFixed(2)]}),a.jsxs("span",{className:"text-[10px] text-gray-500",children:[" ",ae.toFixed(1)," /  ",ce.toFixed(1)]})]})]}),c.breakdown?.warIndemnity>0&&a.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-800",children:[a.jsx("span",{children:""}),a.jsxs("span",{className:"text-yellow-200 font-mono",children:["+",c.breakdown.warIndemnity.toFixed(2)]})]}),c.breakdown?.subsidy>0&&a.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-800",children:[a.jsx("span",{children:""}),a.jsxs("span",{className:"text-red-300 font-mono",children:["-",c.breakdown.subsidy.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-800",children:[a.jsx("span",{children:""}),a.jsxs("span",{className:"text-red-300 font-mono",children:["-",ie.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between pt-2 font-semibold",children:[a.jsx("span",{className:"text-white",children:""}),a.jsxs("span",{className:`${oe} font-mono text-sm`,children:[m>=0?"+":"",m.toFixed(2)]})]})]})]}),a.jsxs("button",{onClick:v,className:"relative group flex items-center gap-1 sm:gap-1.5 glass-ancient px-2 sm:px-3 py-1.5 rounded-full border border-blue-400/30 hover:border-blue-400/60 hover:shadow-glow transition-all flex-shrink-0 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-blue-400/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx(N,{name:"Users",size:14,className:"text-blue-300 sm:w-4 sm:h-4 relative z-10"}),a.jsxs("div",{className:"flex items-baseline gap-0.5 relative z-10",children:[a.jsx("span",{className:"font-mono text-xs sm:text-sm font-bold text-blue-200",children:ge(l.population)}),a.jsxs("span",{className:"text-[9px] sm:text-[10px] text-gray-400",children:["/",ge(l.maxPop)]})]})]}),a.jsxs("button",{onClick:w,className:"lg:hidden relative group flex items-center gap-1 glass-ancient px-2 py-1.5 rounded-full border border-purple-400/40 hover:border-purple-300/60 transition-all flex-shrink-0 overflow-hidden",title:"",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/20 via-purple-400/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx(N,{name:"Users",size:14,className:"text-purple-200 relative z-10"}),a.jsx("span",{className:"text-[10px] text-purple-100 font-semibold relative z-10",children:""})]}),a.jsxs("button",{onClick:g,className:"lg:hidden relative group flex items-center gap-1 glass-ancient px-2 py-1.5 rounded-full border border-amber-400/40 hover:border-amber-300/60 transition-all flex-shrink-0 overflow-hidden",title:"",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500/20 via-amber-400/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx(N,{name:"Package",size:14,className:"text-amber-200 relative z-10"}),a.jsx("span",{className:"text-[10px] text-amber-100 font-semibold relative z-10",children:""})]})]}),k&&a.jsx("div",{className:"hidden lg:flex items-center flex-shrink-0",children:k})]})]})]})},Sb=({activeTab:l,onTabChange:c,epoch:m=0})=>{const o=[{id:"build",label:"",icon:"Hammer",indicator:"from-amber-300 via-amber-200 to-amber-300"},{id:"military",label:"",icon:"Swords",indicator:"from-red-300 via-red-200 to-red-300"},{id:"tech",label:"",icon:"Cpu",indicator:"from-cyan-300 via-cyan-200 to-cyan-300"},{id:"politics",label:"",icon:"Gavel",indicator:"from-purple-300 via-purple-200 to-purple-300"},{id:"diplo",label:"",icon:"Globe",indicator:"from-blue-300 via-blue-200 to-blue-300"}];return a.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 lg:hidden pb-safe-bottom border-t border-theme-border shadow-metal-md backdrop-blur-md bg-gradient-to-r from-ancient-ink/95 via-gray-950/90 to-ancient-ink/95",role:"tablist","aria-label":"",children:a.jsx("div",{className:"relative max-w-2xl mx-auto px-3 py-2 flex items-stretch",children:o.map((p,j)=>{const v=l===p.id;return a.jsxs(Ws.Fragment,{children:[a.jsxs("button",{type:"button",role:"tab","aria-label":p.label,"aria-selected":v,onClick:()=>c(p.id),className:`
                  relative flex-1 min-w-[56px] h-full flex flex-col items-center justify-center gap-1
                  px-3 py-2 transition-colors duration-150 text-[10px] font-semibold tracking-wide
                  ${v?"bg-white/10 text-white shadow-inner border border-white/10":"text-white/65 hover:text-white border border-transparent"}
                `,children:[a.jsx(N,{name:p.icon,size:20,className:v?"text-white drop-shadow":"text-white/70"}),a.jsx("span",{className:"uppercase tracking-[0.2em] text-[9px]",children:p.label}),v&&a.jsx("div",{className:`absolute -bottom-0.5 left-0 right-0 h-0.5 bg-gradient-to-r ${p.indicator}`})]}),j<o.length-1&&a.jsx("span",{className:"w-px bg-white/10 mx-1 my-1","aria-hidden":"true"})]},p.id)})})})},cr=(...l)=>l.filter(Boolean).join(" "),Pf=({isPaused:l,gameSpeed:c,onPauseToggle:m,onSpeedChange:o,onSave:p,onLoadManual:j,onLoadAuto:v,onSettings:w,onReset:g,onTutorial:y,onWiki:k,autoSaveAvailable:_,menuDirection:E="down",onTriggerEvent:U})=>{const[D,M]=V.useState(!1),[A,S]=V.useState(!1),[ie,ae]=V.useState(!1),ce=V.useRef(null),Ce=V.useRef(null),{playSound:oe,SOUND_TYPES:se}=K0();return V.useEffect(()=>{const B=de=>{ce.current&&!ce.current.contains(de.target)&&(M(!1),S(!1)),Ce.current&&!Ce.current.contains(de.target)&&ae(!1)};return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[]),a.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[a.jsxs("div",{className:"flex items-center rounded-xl border border-ancient-gold/20 glass-ancient overflow-hidden shadow-epic",children:[a.jsxs("button",{onClick:()=>{oe(se.CLICK),m()},className:cr("px-3 py-2 transition-all flex items-center gap-2 text-xs font-bold min-h-[40px]",l?"glass-ancient border-r border-green-500/30 text-green-300 hover:bg-green-500/10":"glass-ancient border-r border-orange-500/30 text-orange-300 hover:bg-orange-500/10"),title:l?"":"",children:[a.jsx(N,{name:l?"Play":"Pause",size:14}),a.jsx("span",{className:"hidden sm:inline",children:l?"":""})]}),a.jsx("div",{className:"w-px h-5 bg-ancient-gold/20 self-center"}),ah.map(B=>a.jsx("button",{onClick:()=>{oe(se.CLICK),o(B),l&&m()},disabled:l,className:cr("px-3 py-2 text-xs font-bold transition-all min-h-[40px]",l?"text-ancient-stone/50 cursor-not-allowed":"hover:bg-ancient-gold/10",c===B&&!l?"bg-gradient-to-b from-ancient-gold/30 to-ancient-bronze/20 text-ancient-gold border-x border-ancient-gold/30":l?"":"text-ancient-parchment"),title:l?"":`${B}`,children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("span",{children:[B,"x"]}),B>1&&a.jsx(N,{name:"FastForward",size:12})]})},B))]}),"      ",a.jsxs("div",{className:"relative",ref:ce,children:[a.jsxs("button",{onClick:()=>M(!D),className:"px-3 py-2 glass-ancient border border-ancient-gold/20 rounded-xl transition-all flex items-center gap-2 text-xs font-semibold text-ancient-parchment shadow-epic hover:border-ancient-gold/40 hover:glow-gold min-h-[40px]",title:"",children:[a.jsx(N,{name:"Menu",size:14,className:"text-ancient-gold"}),a.jsx("span",{className:"hidden lg:inline",children:""})]}),D&&a.jsxs("div",{className:cr("absolute right-0 w-44 rounded-xl border border-ancient-gold/30 glass-epic shadow-monument py-1 z-[70] animate-slide-up",E==="up"?"bottom-full mb-2 origin-bottom-right":"top-full mt-2 origin-top-right"),children:[a.jsxs("button",{onClick:()=>{p(),M(!1)},className:"w-full flex items-center px-4 py-2 text-xs font-semibold text-green-300 hover:bg-ancient-gold/10 transition-colors rounded-lg",children:[a.jsx(N,{name:"Save",size:14}),a.jsx("span",{className:"ml-2",children:""})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>S(!A),className:"w-full flex items-center justify-between px-4 py-2 text-xs font-semibold text-purple-300 hover:bg-ancient-gold/10 transition-colors rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(N,{name:"Upload",size:14}),a.jsx("span",{className:"ml-2",children:""})]}),a.jsx(N,{name:A?"ChevronDown":"ChevronRight",size:12})]}),A&&a.jsxs("div",{className:"absolute right-full top-0 mr-1 w-40 rounded-xl border border-ancient-gold/30 glass-epic shadow-monument py-1 animate-slide-up",children:[a.jsxs("button",{onClick:()=>{j(),M(!1),S(!1)},className:"w-full flex items-center px-4 py-2 text-xs font-semibold text-ancient-parchment hover:bg-ancient-gold/10 transition-colors rounded-lg",children:[a.jsx(N,{name:"Upload",size:12}),a.jsx("span",{className:"ml-2",children:""})]}),a.jsxs("button",{onClick:()=>{_&&(v(),M(!1),S(!1))},disabled:!_,className:cr("w-full flex items-center justify-between px-4 py-2 text-xs font-semibold transition-colors rounded-lg",_?"text-amber-300 hover:bg-ancient-gold/10":"text-ancient-stone/50 cursor-not-allowed"),children:[a.jsx("span",{className:"ml-2",children:""}),a.jsx(N,{name:"Clock",size:12})]})]})]}),a.jsxs("button",{onClick:()=>{w(),M(!1)},className:"w-full flex items-center px-4 py-2 text-xs font-semibold text-ancient-parchment hover:bg-ancient-gold/10 transition-colors rounded-lg",children:[a.jsx(N,{name:"Settings",size:14}),a.jsx("span",{className:"ml-2",children:""})]}),a.jsx("div",{className:"my-1 h-px bg-gradient-to-r from-transparent via-ancient-gold/30 to-transparent"}),a.jsxs("button",{onClick:()=>{confirm("")&&(g(),M(!1))},className:"w-full flex items-center px-4 py-2 text-xs font-semibold text-red-300 hover:bg-red-500/10 transition-colors rounded-lg",children:[a.jsx(N,{name:"RefreshCw",size:14}),a.jsx("span",{className:"ml-2",children:""})]})]})]}),a.jsxs("div",{className:"relative",ref:Ce,children:[a.jsxs("button",{onClick:()=>ae(!ie),className:"px-3 py-2 glass-ancient border border-blue-500/30 rounded-xl transition-all flex items-center gap-2 text-xs font-semibold text-blue-300 shadow-epic hover:border-blue-500/50 hover:bg-blue-500/10 min-h-[40px]",title:"",children:[a.jsx(N,{name:"HelpCircle",size:14}),a.jsx("span",{className:"hidden lg:inline",children:""})]}),ie&&a.jsxs("div",{className:cr("absolute right-0 w-40 rounded-xl border border-ancient-gold/30 glass-epic shadow-monument py-1 z-[70] animate-slide-up",E==="up"?"bottom-full mb-2 origin-bottom-right":"top-full mt-2 origin-top-right"),children:[a.jsxs("button",{onClick:()=>{y(),ae(!1)},className:"w-full flex items-center px-4 py-2 text-xs font-semibold text-ancient-parchment hover:bg-ancient-gold/10 transition-colors rounded-lg",children:[a.jsx(N,{name:"BookOpen",size:12}),a.jsx("span",{className:"ml-2",children:""})]}),a.jsxs("button",{onClick:()=>{k(),ae(!1)},className:"w-full flex items-center px-4 py-2 text-xs font-semibold text-ancient-parchment hover:bg-ancient-gold/10 transition-colors rounded-lg",children:[a.jsx(N,{name:"Book",size:12}),a.jsx("span",{className:"ml-2",children:""})]})]})]})]})};var On=cp();const Dn=({isOpen:l,onClose:c,children:m,title:o,showHeader:p=!0,preventBackdropClose:j=!1,showCloseButton:v=!0,preventEscapeClose:w=!1})=>{const[g,y]=V.useState(!1);V.useEffect(()=>{if(w)return;const E=U=>{U.key==="Escape"&&k()};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[w]);const k=()=>{y(!0),setTimeout(()=>{c(),y(!1)},300)};if(!l)return null;const _=g?"animate-sheet-out":"animate-sheet-in";return On.createPortal(a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center lg:items-center",role:"dialog","aria-modal":"true",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 animate-fade-in",onClick:j?void 0:k}),a.jsx("div",{className:`relative w-full max-w-2xl bg-gray-800 border-t-2 lg:border-2 border-gray-700 rounded-t-2xl lg:rounded-2xl shadow-2xl flex flex-col max-h-[85vh] ${_} lg:animate-slide-up`,children:p?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex-shrink-0 p-4 border-b border-theme-border flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:o}),v&&a.jsx("button",{onClick:k,className:"p-2 rounded-full hover:bg-gray-700",children:a.jsx(N,{name:"X",size:20,className:"text-gray-400"})})]}),a.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:m})]}):a.jsxs("div",{className:"relative flex-1 p-4 overflow-y-auto",children:[v&&a.jsx("button",{onClick:k,className:"absolute top-3 right-3 z-10 p-2 rounded-full bg-gray-900/50 hover:bg-gray-700/80 transition-colors",children:a.jsx(N,{name:"X",size:20,className:"text-gray-400"})}),m]})})]}),document.body)},Ab=(l,c)=>{if(l==="silver")return 1;const m=Me[l]?.basePrice||1;return c?.prices?.[l]??m},Ys=(l={},c)=>Object.entries(l).reduce((m,[o,p])=>p?m+p*Ab(o,c):m,0),dn=l=>`${Math.ceil(l)} `,L0=({title:l,icon:c,children:m,className:o=""})=>a.jsxs("div",{className:`bg-gray-900/50 p-3 rounded-lg border border-gray-700/80 ${o}`,children:[a.jsxs("h4",{className:"text-xs font-semibold text-gray-300 mb-2 flex items-center gap-1.5",children:[a.jsx(N,{name:c,size:16}),l]}),a.jsx("div",{className:"space-y-1 text-xs",children:m})]}),q0=({label:l,value:c,valueClass:m="text-white"})=>a.jsxs("div",{className:"flex justify-between items-center py-0.5",children:[a.jsx("span",{className:"text-gray-300",children:l}),a.jsx("span",{className:`font-mono font-semibold ${m}`,children:c})]}),zb=({building:l,gameState:c,onBuy:m,onSell:o,taxPolicies:p,onUpdateTaxPolicies:j})=>{if(!l||!c)return null;const{resources:v,epoch:w,techsUnlocked:g,market:y,buildings:k,jobFill:_}=c,E=k[l.id]||0,[U,D]=V.useState(null),M=R=>!R||R==="silver"?1:y?.prices?.[R]??(Me[R]?.basePrice||0),A=R=>{const ne=Object.entries(R.output||{}).reduce((C,[$,J])=>C+M($)*J,0),L=Object.entries(R.input||{}).reduce((C,[$,J])=>C+M($)*J,0),u=Object.entries(R.jobs||{}).reduce((C,[$,J])=>C+(y?.wages?.[$]||0)*J,0);return ne-L-u},S=R=>{const ne=A(R);let L=0,u=1;return R.owner&&R.jobs?.[R.owner]&&(u=R.jobs[R.owner],L=(y?.wages?.[R.owner]||0)*u),(ne+L)/u},ie=R=>{const ne=k[R.id]||0,L={};for(let u in R.baseCost)L[u]=Math.ceil(R.baseCost[u]*Math.pow(1.15,ne));return L};A(l);const ae=S(l),ce=ie(l),Ce=Ys(ce,y),oe=bi(l.output,w,g),se=bi(l.input,w,g),B=Object.entries(ce).every(([R,ne])=>(v[R]||0)>=ne),de=(v.silver||0)>=Ce,Q=B&&de,I=(l.jobs?.[l.owner]||0)*E,ge=ae*I,ve=p?.businessTaxRates?.[l.id]??1,G=l.businessTaxBase??.1,me=G*ve,b=R=>{D(R)},O=()=>{if(U===null||!j)return;const R=parseFloat(U),ne=Number.isNaN(R)?1:R;j(L=>({...L,businessTaxRates:{...L?.businessTaxRates||{},[l.id]:ne}})),D(null)};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-4 p-1",children:[a.jsx("div",{className:`flex-shrink-0 w-16 h-16 rounded-lg ${l.visual.color} flex items-center justify-center shadow-lg`,children:a.jsx(N,{name:l.visual.icon,size:36,className:l.visual.text})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:l.name}),a.jsx("p",{className:"text-sm text-gray-300 mt-1",children:l.desc}),l.owner&&a.jsxs("div",{className:"mt-2 inline-flex items-center gap-1.5 text-xs text-yellow-200 bg-yellow-900/40 border border-yellow-600/40 rounded-full px-2.5 py-1",children:[a.jsx(N,{name:"User",size:12}),a.jsxs("span",{className:"font-semibold",children:[": ",Fe[l.owner]?.name||l.owner]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[a.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-lg border border-gray-700/80",children:[a.jsx("div",{className:"text-xs text-gray-400 mb-1",children:""}),a.jsx("div",{className:"text-2xl font-bold text-white",children:E})]}),a.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-lg border border-gray-700/80",children:[a.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-gray-400 mb-1",children:[a.jsx("span",{children:""})," ",a.jsx(N,{name:"Coins",size:12,className:"text-yellow-400"})]}),a.jsx("div",{className:`text-2xl font-bold ${ae>=0?"text-green-400":"text-red-400"}`,children:ae.toFixed(2)}),a.jsx("div",{className:"text-[10px] text-gray-500 -mt-1",children:"()"})]}),a.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-lg border border-gray-700/80",children:[a.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-gray-400 mb-1",children:[a.jsx("span",{children:""})," ",a.jsx(N,{name:"Coins",size:12,className:"text-yellow-400"})]}),a.jsx("div",{className:`text-2xl font-bold ${ge>=0?"text-green-400":"text-red-400"}`,children:ge.toFixed(1)}),a.jsxs("div",{className:"text-[10px] text-gray-500 -mt-1",children:["( ",Math.round(I)," )"]})]})]}),j&&a.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-lg border border-gray-700/80",children:[a.jsxs("h4",{className:"text-xs font-semibold text-gray-300 mb-2 flex items-center gap-1.5",children:[a.jsx(N,{name:"Sliders",size:16,className:"text-yellow-400"}),""]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-[10px] text-gray-400 mb-0.5 leading-none",children:""}),a.jsx("input",{type:"text",inputMode:"decimal",step:"0.05",value:U??ve,onChange:R=>b(R.target.value),onBlur:O,onKeyDown:R=>{R.key==="Enter"&&(O(),R.target.blur())},className:"w-full bg-gray-800/70 border border-gray-600 text-sm text-gray-200 rounded px-2 py-1 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-center",placeholder:""})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[10px] text-gray-400 mb-0.5 leading-none",children:" ()"}),a.jsxs("div",{className:"bg-gray-800/50 rounded px-2 py-1.5 text-center",children:[a.jsxs("span",{className:`text-sm font-bold font-mono ${me>0?"text-yellow-300":me<0?"text-green-300":"text-gray-400"}`,children:[me<0?" ":"",Math.abs(me).toFixed(3)]}),a.jsx(N,{name:me>0?"TrendingUp":me<0?"TrendingDown":"Coins",size:12,className:`inline-block ml-1 ${me>0?"text-yellow-400":me<0?"text-green-400":"text-gray-500"}`})]})]})]}),a.jsxs("p",{className:"text-[10px] text-gray-500 mt-1.5",children:[" = (",G.toFixed(2),")  "]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(Object.keys(oe).length>0||Object.keys(se).length>0)&&a.jsxs(L0,{title:" ()",icon:"ArrowRightLeft",children:[Object.entries(oe).map(([R,ne])=>a.jsx(q0,{label:Me[R]?.name||R,value:`+${ne}`,valueClass:"text-green-400"},`out-${R}`)),Object.entries(se).map(([R,ne])=>a.jsx(q0,{label:Me[R]?.name||R,value:`-${ne}`,valueClass:"text-red-400"},`in-${R}`)),Object.keys(oe).length===0&&Object.keys(se).length===0&&a.jsx("p",{className:"text-gray-500 text-center text-xs",children:""})]}),l.jobs&&Object.keys(l.jobs).length>0&&a.jsx(L0,{title:"",icon:"Users",children:Object.entries(l.jobs).map(([R,ne],L)=>{const u=ne*E,C=_?.[l.id]?.[R]??0,$=Math.min(C,u),J=u>0?$/u*100:0,le=y?.wages?.[R]||0;return a.jsxs("div",{className:L>0?"pt-2 mt-2 border-t border-gray-700/60":"",children:[a.jsxs("div",{className:"flex justify-between items-center text-xs mb-0.5",children:[a.jsx("span",{className:"text-gray-200 font-semibold",children:Fe[R]?.name||R}),a.jsxs("span",{className:"text-yellow-300 font-mono",children:[": ",le.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between text-[11px] text-gray-400 mb-1",children:[a.jsxs("span",{children:[" ",ne]}),a.jsxs("span",{children:[" ",Math.round(u)]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${J}%`}})}),a.jsxs("span",{className:"text-gray-300 font-mono text-[11px] w-20 text-right",children:[Math.round($),"/",Math.round(u)]})]})]},R)})}),a.jsxs(L0,{title:"",icon:"Hammer",className:"md:col-span-2",children:[a.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:Object.entries(ce).map(([R,ne])=>{const L=(v[R]||0)>=ne;return a.jsx(q0,{label:Me[R]?.name||R,value:`${ne}`,valueClass:L?"text-green-400":"text-red-400"},R)})}),a.jsx("div",{className:"pt-2 mt-2 border-t border-gray-700/60",children:a.jsxs("div",{className:"flex justify-between items-center py-0.5",children:[a.jsxs("span",{className:"text-gray-300 flex items-center gap-1.5",children:[a.jsx(N,{name:"Coins",size:14,className:"text-yellow-400"})," "]}),a.jsx("span",{className:`font-mono font-semibold ${de?"text-green-400":"text-red-400"}`,children:dn(Ce)})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[a.jsxs("button",{onClick:()=>m&&m(l.id),disabled:!Q,className:"w-full px-4 py-3 rounded-lg text-sm font-bold transition-all bg-green-600 hover:bg-green-500 text-white shadow-lg hover:shadow-green-500/30 disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed disabled:shadow-none flex items-center justify-center gap-2",children:[a.jsx(N,{name:"Plus",size:16}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{children:""}),a.jsxs("span",{className:"font-mono",children:["(",dn(Ce),")"]})]})]}),E>0&&a.jsxs("button",{onClick:()=>o&&o(l.id),className:"w-full px-4 py-3 bg-red-700 hover:bg-red-600 text-white rounded-lg text-sm font-bold transition-all shadow-lg hover:shadow-red-600/30 flex items-center justify-center gap-2",children:[a.jsx(N,{name:"Minus",size:16}),a.jsx("span",{children:""})]})]})]})},Zf=({resources:l,rates:c,market:m,epoch:o=0,onDetailClick:p})=>{const j=w=>{const g=Math.floor(w);return g>=1e6?(g/1e6).toFixed(2)+"M":g>=1e3?(g/1e3).toFixed(1)+"k":g.toString()},v=w=>{if(!m)return Me[w]?.basePrice||1;const g=Me[w]?.basePrice||1;return m.prices?.[w]??g};return a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"grid grid-cols-[1fr,auto,auto,auto] items-center gap-x-2 text-[10px] text-ancient-stone border-b border-ancient-gold/20 pb-1.5 px-1",children:[a.jsxs("span",{className:"text-left font-semibold tracking-wide flex items-center gap-1",children:[a.jsx(N,{name:"Layers",size:10,className:"text-ancient-gold"}),""]}),a.jsx("span",{className:"min-w-[45px] text-right font-semibold",children:""}),a.jsx("span",{className:"min-w-[55px] text-right font-semibold",children:""}),a.jsx("span",{className:"min-w-[45px] text-right font-semibold",children:""})]}),Object.entries(Me).map(([w,g])=>{if(g.type==="virtual"||g.type==="currency"||typeof g.unlockEpoch=="number"&&g.unlockEpoch>o)return null;const y=l[w]||0,k=c[w]||0,_=v(w);return a.jsxs("div",{className:"relative group grid grid-cols-[1fr,auto,auto,auto] items-center gap-x-2 text-xs p-1.5 rounded-lg transition-all cursor-pointer overflow-hidden border border-ancient-gold/10 hover:border-ancient-gold/30 hover:bg-ancient-gold/5 hover:shadow-glow-gold",onClick:()=>p&&p(w),title:"",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-ancient-gold/0 via-ancient-gold/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsxs("div",{className:"flex items-center gap-1.5 overflow-hidden relative z-10",children:[a.jsx(N,{name:g.icon,size:16,className:`${g.color} shrink-0`}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("p",{className:"text-[11px] text-ancient-parchment font-semibold truncate leading-tight group-hover:text-ancient",children:g.name})})]}),a.jsx("span",{className:"font-mono font-bold text-ancient-parchment min-w-[45px] text-right relative z-10 group-hover:text-ancient",children:j(y)}),a.jsxs("div",{className:"flex items-center justify-end gap-0.5 font-mono text-ancient-stone opacity-80 min-w-[55px] text-[10px] relative z-10 group-hover:text-ancient-gold",children:[a.jsx("span",{children:_.toFixed(2)}),a.jsx(N,{name:"Coins",size:10,className:"text-ancient-gold"})]}),a.jsx("span",{className:`font-mono min-w-[45px] text-right relative z-10 transition-colors ${k>0?"text-green-400 group-hover:text-green-300":k<0?"text-red-400 group-hover:text-red-300":"text-ancient-stone opacity-70"}`,children:k!==0?`${k>0?"+":""}${k.toFixed(1)}`:"--"})]},w)})]})},Qf={production:{label:"",type:"percent"},industryBonus:{label:"",type:"percent"},stability:{label:"",type:"percent"},taxIncome:{label:"",type:"percent"},militaryPower:{label:"",type:"percent"},cultureBonus:{label:"",type:"percent"},scienceBonus:{label:"",type:"percent"}},Db=(l,c)=>c==="flat"?`${l>0?"+":""}${l}`:`${l>0?"+":""}${(l*100).toFixed(0)}%`,dl=(l={})=>{const c=[];return Object.entries(Qf).forEach(([m,{label:o,type:p}])=>{typeof l[m]=="number"&&l[m]!==0&&c.push(`${o} ${Db(l[m],p)}`)}),Object.entries(l).forEach(([m,o])=>{Qf[m]||["desc","class","source","name","description"].includes(m)||typeof o=="number"&&o!==0&&c.push(`${m} ${o>0?"+":""}${o}`)}),c},Ff=({popStructure:l,classApproval:c,classInfluence:m,stability:o,activeBuffs:p=[],activeDebuffs:j=[],classWealth:v={},classWealthDelta:w={},classShortages:g={},classIncome:y={},classExpense:k={},onDetailClick:_,dayScale:E=1,hideTitle:U=!1})=>{const D=Math.max(E,1e-4),M=S=>S>=70?"text-green-400":S>=40?"text-yellow-400":"text-red-400",A=V.useMemo(()=>Object.entries(Fe).map(([S,ie])=>{const ae=l[S]||0,ce=c[S]||50,Ce=m[S]||0,oe=v[S]??0,se=(y[S]||0)/D,B=(k[S]||0)/D,de=se/Math.max(ae,1),Q=B/Math.max(ae,1),I=(w[S]||0)/D,ge=I!=null?I/Math.max(ae,1):de-Q,ve=g[S]||[];return{key:S,info:ie,count:ae,approval:ce,influence:Ce,wealthValue:oe,incomePerCapita:de,expensePerCapita:Q,netIncomePerCapita:ge,shortages:ve}}).filter(S=>S.count>0),[l,c,m,v,w,y,k,g,D]);return a.jsxs("div",{className:"glass-epic p-1.5 rounded-xl border border-ancient-gold/20 shadow-epic min-h-[460px] flex flex-col relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-ancient-ink/50 via-ancient-stone/20 to-ancient-ink/50 opacity-50"}),a.jsx("div",{className:"absolute inset-0 opacity-[0.02]",children:a.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("pattern",{id:"strata-pattern",x:"0",y:"0",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:a.jsx("circle",{cx:"20",cy:"20",r:"1",fill:"currentColor",className:"text-ancient-gold"})}),a.jsx("rect",{width:"100%",height:"100%",fill:"url(#strata-pattern)"})]})}),a.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[!U&&a.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-1 gap-1.5 flex-shrink-0",children:[a.jsxs("h3",{className:"text-xs font-bold text-ancient flex items-center gap-1.5",children:[a.jsx(N,{name:"Users",size:14,className:"text-ancient-gold"}),""]}),a.jsxs("div",{className:"flex items-center gap-0.5",children:[a.jsx(N,{name:"TrendingUp",size:12,className:o>=70?"text-green-400":o>=40?"text-yellow-400":"text-red-400"}),a.jsxs("span",{className:`text-[10px] font-bold ${o>=70?"text-green-400":o>=40?"text-yellow-400":"text-red-400"}`,children:[o.toFixed(0),"%"]})]})]}),U&&a.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-1.5 flex-shrink-0 bg-ancient-ink/30 rounded-lg px-2 py-1 border border-ancient-gold/20",children:[a.jsx("span",{className:"text-[10px] text-ancient-stone",children:""}),a.jsx(N,{name:"TrendingUp",size:12,className:o>=70?"text-green-400":o>=40?"text-yellow-400":"text-red-400"}),a.jsxs("span",{className:`text-[11px] font-bold ${o>=70?"text-green-400":o>=40?"text-yellow-400":"text-red-400"}`,children:[o.toFixed(0),"%"]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto pr-0.5 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800 hover:scrollbar-thumb-gray-500",style:{maxHeight:"calc(100vh - 520px)",minHeight:"300px"},children:[a.jsxs("div",{className:"lg:hidden grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-1.5",children:[A.map(S=>{const ie=ae=>ae>=70?`linear-gradient(to right, rgba(34, 197, 94, 0.15) 0%, rgba(34, 197, 94, 0.15) ${ae}%, rgba(31, 41, 55, 0.5) ${ae}%, rgba(31, 41, 55, 0.5) 100%)`:ae>=40?`linear-gradient(to right, rgba(234, 179, 8, 0.15) 0%, rgba(234, 179, 8, 0.15) ${ae}%, rgba(31, 41, 55, 0.5) ${ae}%, rgba(31, 41, 55, 0.5) 100%)`:`linear-gradient(to right, rgba(239, 68, 68, 0.15) 0%, rgba(239, 68, 68, 0.15) ${ae}%, rgba(31, 41, 55, 0.5) ${ae}%, rgba(31, 41, 55, 0.5) 100%)`;return a.jsx("div",{className:"relative rounded-lg overflow-hidden hover:scale-[1.02] transition-all cursor-pointer border border-ancient-gold/30 shadow-ancient hover:shadow-glow-gold backdrop-blur-sm",style:{background:ie(S.approval)},onClick:()=>_&&_(S.key),children:a.jsxs("div",{className:"relative z-10 p-1",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx("div",{className:"w-6 h-6 bg-ancient-ink/60 rounded flex items-center justify-center flex-shrink-0 border border-ancient-gold/20",children:a.jsx(N,{name:S.info.icon,size:12,className:"text-ancient-gold"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[10px] font-bold text-ancient-parchment truncate leading-tight",children:S.info.name}),a.jsx("div",{className:"text-[8px] text-ancient-stone font-mono leading-none",children:S.count})]}),S.shortages.length>0&&a.jsx("div",{className:"flex-shrink-0",children:a.jsx(N,{name:"AlertTriangle",size:10,className:"text-red-400 animate-pulse drop-shadow-[0_0_3px_rgba(248,113,113,0.8)]"})})]}),a.jsx("div",{className:"bg-ancient-ink/60 rounded px-1 py-0.5 backdrop-blur-sm border border-ancient-gold/10",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[8px] text-ancient-stone leading-none",children:""}),a.jsxs("span",{className:`text-[9px] font-bold font-mono leading-none ${S.netIncomePerCapita>=0?"text-green-300":"text-red-300"}`,children:[S.netIncomePerCapita>=0?"+":"",S.netIncomePerCapita.toFixed(1)]})]})})]})},`grid-${S.key}`)}),A.length===0&&a.jsx("div",{className:"col-span-full text-center text-ancient-stone opacity-70 text-[10px] py-4",children:""})]}),a.jsx("div",{className:"hidden lg:block space-y-1",children:A.map(({key:S,info:ie,count:ae,approval:ce,influence:Ce,wealthValue:oe,incomePerCapita:se,expensePerCapita:B,netIncomePerCapita:de,shortages:Q})=>a.jsxs("div",{className:"glass-ancient p-1.5 rounded-lg hover:bg-ancient-gold/10 transition-all cursor-pointer border border-ancient-gold/20 hover:border-ancient-gold/40 hover:shadow-glow-gold",onClick:()=>_&&_(S),children:[a.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(N,{name:ie.icon,size:10,className:"text-ancient-gold"}),a.jsx("span",{className:"text-[10px] font-semibold text-ancient-parchment",children:ie.name}),a.jsxs("span",{className:"text-[8px] text-ancient-stone",children:[ae,""]})]}),a.jsxs("span",{className:`text-[9px] font-semibold font-mono ${M(ce)}`,children:[ce.toFixed(0),"%"]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-0.5 text-[8px] mb-0.5 bg-ancient-ink/30 px-1 py-0.5 rounded border border-ancient-gold/10",children:[a.jsxs("div",{className:"flex items-center gap-0.5",title:"",children:[a.jsx("span",{className:"text-ancient-stone",children:""}),a.jsxs("span",{className:"text-green-300 font-mono",children:["+",se.toFixed(1)]})]}),a.jsxs("div",{className:"flex items-center gap-0.5 justify-center",title:"",children:[a.jsx("span",{className:"text-ancient-stone",children:""}),a.jsxs("span",{className:"text-red-300 font-mono",children:["-",B.toFixed(1)]})]}),a.jsxs("div",{className:"flex items-center gap-0.5 justify-end",title:"",children:[a.jsx("span",{className:"text-ancient-stone",children:""}),a.jsxs("span",{className:`font-mono ${de>=0?"text-green-300":"text-red-300"}`,children:[de>0?"+":"",de.toFixed(1)]})]})]}),a.jsx("div",{className:"mb-0.5",children:a.jsx("div",{className:"w-full bg-ancient-ink/50 rounded-full h-0.5 border border-ancient-gold/10",children:a.jsx("div",{className:`h-0.5 rounded-full transition-all ${ce>=70?"bg-green-500":ce>=40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${ce}%`}})})}),a.jsxs("div",{className:"flex items-center justify-between text-[8px]",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-ancient-stone",children:""}),a.jsx("span",{className:"text-purple-400 font-semibold font-mono",children:Ce.toFixed(1)})]}),a.jsxs("div",{className:"flex items-center gap-0.5",title:"",children:[a.jsx(N,{name:"Coins",size:8,className:"text-ancient-gold"}),a.jsx("span",{className:"text-ancient-parchment font-mono",children:oe.toFixed(0)})]})]}),Q.length>0&&(()=>{const I=Q.some(O=>{const R=typeof O=="string"?"outOfStock":O.reason;return R==="outOfStock"||R==="both"}),ge=Q.some(O=>{const R=typeof O=="string"?"outOfStock":O.reason;return R==="unaffordable"||R==="both"});let ve="",G="AlertTriangle",me="bg-red-900/30",b="border-red-500/40";return I&&ge?(ve="&",G="XCircle",me="bg-red-900/40",b="border-red-600/50"):ge?(ve="",G="DollarSign",me="bg-orange-900/30",b="border-orange-500/40"):I&&(ve="",G="Package",me="bg-red-900/30",b="border-red-500/40"),a.jsxs("div",{className:`flex items-center gap-0.5 text-[8px] text-red-300 flex-wrap ${me} border ${b} rounded px-1 py-0.5 mt-0.5`,children:[a.jsx(N,{name:G,size:10,className:"text-red-400 animate-pulse"}),a.jsxs("span",{className:"text-red-200 font-semibold",children:[ve,":"]}),a.jsx("div",{className:"flex items-center gap-0.5 flex-wrap",children:Q.map((O,R)=>{const ne=typeof O=="string"?O:O.resource,L=typeof O=="string"?"outOfStock":O.reason,u=Me[ne];let C="AlertTriangle",$="",J="bg-red-800/60",le="border-red-500/60";return L==="unaffordable"?(C="DollarSign",$="",J="bg-orange-800/60",le="border-orange-500/60"):L==="outOfStock"?(C="Package",$="",J="bg-red-800/60",le="border-red-500/60"):L==="both"&&(C="XCircle",$="",J="bg-red-900/80",le="border-red-600/80"),a.jsxs("span",{className:`px-0.5 py-0.5 ${J} border ${le} rounded flex items-center gap-0.5 animate-pulse`,title:`${u?.name||ne} ${$}`,children:[a.jsx(N,{name:C,size:8,className:"text-red-200"}),a.jsx(N,{name:u?.icon||"HelpCircle",size:9,className:"text-red-200"}),a.jsx("span",{className:"text-red-100 font-medium text-[8px]",children:u?.name||ne})]},`${S}-${ne}-${R}`)})})]})})()]},S))})]}),a.jsxs("div",{className:"mt-1 pt-1 border-t border-ancient-gold/20 flex-shrink-0",children:[a.jsxs("h4",{className:"text-[9px] font-bold text-ancient-stone mb-0.5 flex items-center gap-0.5",children:[a.jsx(N,{name:"Activity",size:10,className:"text-ancient-gold"}),""]}),a.jsxs("div",{className:"space-y-0.5 text-[8px] max-h-16 overflow-y-auto pr-0.5 scrollbar-thin scrollbar-thumb-ancient-gold/40 scrollbar-track-ancient-ink/30",children:[p.map((S,ie)=>{const ae=dl(S);return a.jsxs("div",{className:"text-green-400 leading-tight",children:[a.jsxs("div",{className:"flex items-center gap-0.5",children:[a.jsx(N,{name:"ArrowUp",size:8}),a.jsx("span",{className:"font-semibold",children:S.desc||""})]}),ae.length>0&&a.jsx("div",{className:"text-ancient-parchment opacity-80 ml-2 text-[7px]",children:ae.join("")})]},`buff-${ie}`)}),j.map((S,ie)=>{const ae=dl(S);return a.jsxs("div",{className:"text-red-400 leading-tight",children:[a.jsxs("div",{className:"flex items-center gap-0.5",children:[a.jsx(N,{name:"ArrowDown",size:8}),a.jsx("span",{className:"font-semibold",children:S.desc||""})]}),ae.length>0&&a.jsx("div",{className:"text-ancient-parchment opacity-70 ml-2 text-[7px]",children:ae.join("")})]},`debuff-${ie}`)}),p.length===0&&j.length===0&&a.jsx("span",{className:"text-ancient-stone opacity-60 text-[8px] italic",children:""})]})]}),a.jsxs("button",{onClick:()=>_&&_("all"),className:"w-full mt-1 px-1.5 py-0.5 glass-ancient hover:bg-ancient-gold/20 text-ancient-parchment text-[9px] rounded-lg transition-all border border-ancient-gold/30 hover:border-ancient-gold/50 flex items-center justify-center gap-0.5 flex-shrink-0 hover:shadow-glow-gold",children:[a.jsx(N,{name:"Info",size:9,className:"text-ancient-gold"}),""]})]})]})},Ob=({stratumKey:l,popStructure:c,classApproval:m,classInfluence:o,classWealth:p,classWealthDelta:j={},classIncome:v,classExpense:w,classShortages:g,activeBuffs:y=[],activeDebuffs:k=[],dayScale:_=1,taxPolicies:E,onUpdateTaxPolicies:U,onClose:D})=>{const M=Math.max(_,1e-4),A=Fe[l],[S,ie]=V.useState(null);if(!A)return a.jsxs("div",{className:"text-center text-gray-400 py-8",children:[a.jsx(N,{name:"AlertCircle",size:32,className:"mx-auto mb-2"}),a.jsx("p",{children:""})]});const ae=c[l]||0,ce=m[l]||50,Ce=o[l]||0,oe=p[l]??0,se=(v[l]||0)/M,B=(w[l]||0)/M,de=se/Math.max(ae,1),Q=B/Math.max(ae,1),I=(j[l]||0)/M,ge=I!=null?I/Math.max(ae,1):de-Q,ve=g[l]||[],G=E?.headTaxRates?.[l]??1,me=L=>{ie(L)},b=()=>{if(S===null||!U)return;const L=parseFloat(S),u=Number.isNaN(L)?1:L;U(C=>({...C,headTaxRates:{...C?.headTaxRates||{},[l]:u}})),ie(null)},O=L=>L>=70?"text-green-400":L>=40?"text-yellow-400":"text-red-400",R=y.filter(L=>!L.targetClass||L.targetClass===l),ne=k.filter(L=>!L.targetClass||L.targetClass===l);return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-700",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-700 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(N,{name:A.icon,size:24,className:"text-gray-300"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-lg font-bold text-white leading-tight",children:A.name}),a.jsx("p",{className:"text-xs text-gray-400 leading-tight truncate",children:A.desc})]})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-1.5",children:[a.jsxs("div",{className:"bg-gray-700/50 rounded p-1.5 border border-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[a.jsx(N,{name:"Users",size:12,className:"text-blue-400"}),a.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""})]}),a.jsx("div",{className:"text-sm font-bold text-white font-mono leading-none",children:ae})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded p-1.5 border border-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[a.jsx(N,{name:"Heart",size:12,className:"text-pink-400"}),a.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""})]}),a.jsxs("div",{className:`text-sm font-bold font-mono leading-none ${O(ce)}`,children:[ce.toFixed(0),"%"]})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded p-1.5 border border-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[a.jsx(N,{name:"Zap",size:12,className:"text-purple-400"}),a.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""})]}),a.jsx("div",{className:"text-sm font-bold text-purple-300 font-mono leading-none",children:Ce.toFixed(0)})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded p-1.5 border border-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[a.jsx(N,{name:"Coins",size:12,className:"text-yellow-400"}),a.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""})]}),a.jsx("div",{className:"text-sm font-bold text-yellow-300 font-mono leading-none",children:oe.toFixed(0)})]})]}),U&&a.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[a.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[a.jsx(N,{name:"Sliders",size:12,className:"text-yellow-400"}),""]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-[9px] text-gray-400 mb-0.5 leading-none",children:""}),a.jsx("input",{type:"text",inputMode:"decimal",step:"0.05",value:S??G,onChange:L=>me(L.target.value),onBlur:b,onKeyDown:L=>{L.key==="Enter"&&(b(),L.target.blur())},className:"w-full bg-gray-900/70 border border-gray-600 text-sm text-gray-200 rounded px-2 py-1 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-center",placeholder:""})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[9px] text-gray-400 mb-0.5 leading-none",children:" ()"}),a.jsxs("div",{className:"bg-gray-800/50 rounded px-2 py-1.5 text-center",children:[a.jsxs("span",{className:`text-sm font-bold font-mono ${A.headTaxBase*G>0?"text-yellow-300":A.headTaxBase*G<0?"text-green-300":"text-gray-400"}`,children:[A.headTaxBase*G<0?" ":"",Math.abs((A.headTaxBase||.01)*G).toFixed(3)]}),a.jsx(N,{name:A.headTaxBase*G>0?"TrendingUp":A.headTaxBase*G<0?"TrendingDown":"Coins",size:12,className:`inline-block ml-1 ${A.headTaxBase*G>0?"text-yellow-400":A.headTaxBase*G<0?"text-green-400":"text-gray-500"}`})]})]})]}),a.jsx("p",{className:"text-[10px] text-gray-500 mt-1.5",children:" =   "})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[a.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[a.jsx(N,{name:"TrendingUp",size:12,className:"text-green-400"}),""]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-[9px] text-gray-400 mb-0.5 leading-none",children:""}),a.jsxs("div",{className:"text-sm font-bold text-green-400 font-mono leading-none",children:["+",de.toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[9px] text-gray-400 mb-0.5 leading-none",children:""}),a.jsxs("div",{className:"text-sm font-bold text-red-400 font-mono leading-none",children:["-",Q.toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[9px] text-gray-400 mb-0.5 leading-none",children:""}),a.jsxs("div",{className:`text-sm font-bold font-mono leading-none ${ge>=0?"text-green-400":"text-red-400"}`,children:[ge>=0?"+":"",ge.toFixed(2)]})]})]})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[a.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[a.jsx(N,{name:"Package",size:12,className:"text-amber-400"}),""]}),A.needs&&Object.keys(A.needs).length>0?a.jsx("div",{className:"space-y-1.5",children:Object.entries(A.needs).map(([L,u])=>{const C=Me[L],$=ve.find(P=>(typeof P=="string"?P:P.resource)===L),J=!!$,le=$&&typeof $!="string"?$.reason:"outOfStock";let De="CheckCircle",fe="text-green-400",Ge=" ",K="bg-green-900/20",We="border-green-500/30",xt="";return J&&(le==="unaffordable"?(De="DollarSign",fe="text-orange-400",Ge=" ",K="bg-orange-900/20",We="border-orange-500/40",xt=""):le==="outOfStock"?(De="XCircle",fe="text-red-400",Ge=" ",K="bg-red-900/20",We="border-red-500/40",xt=""):le==="both"&&(De="AlertTriangle",fe="text-red-500",Ge=" ",K="bg-red-900/30",We="border-red-500/50",xt="")),a.jsxs("div",{className:`rounded p-2 border ${We} ${K} ${J?"animate-pulse":""}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("div",{className:"w-7 h-7 bg-gray-800/60 rounded flex items-center justify-center flex-shrink-0",children:a.jsx(N,{name:C?.icon||"HelpCircle",size:16,className:C?.color||"text-gray-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-xs font-bold text-white leading-tight",children:C?.name||L}),a.jsx("div",{className:"text-[9px] text-gray-400 leading-tight truncate",children:C?.desc||""})]})]}),a.jsxs("div",{className:"bg-gray-800/40 rounded px-2 py-1 mb-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""}),a.jsx("span",{className:"text-[10px] font-bold text-white font-mono leading-none",children:u})]}),a.jsxs("div",{className:"flex items-center justify-between mt-0.5",children:[a.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""}),a.jsx("span",{className:"text-[10px] font-bold text-blue-300 font-mono leading-none",children:(u*ae).toFixed(0)})]})]}),a.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded ${K}`,children:[a.jsx(N,{name:De,size:12,className:fe}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:`text-[10px] font-bold ${fe} leading-tight`,children:Ge}),xt&&a.jsx("div",{className:`text-[9px] ${fe} leading-tight truncate`,children:xt})]})]})]},L)})}):a.jsx("div",{className:"text-center text-gray-400 text-[10px] py-2",children:""})]}),(R.length>0||ne.length>0)&&a.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[a.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[a.jsx(N,{name:"Activity",size:12,className:"text-blue-400"}),""]}),a.jsxs("div",{className:"space-y-1",children:[R.map((L,u)=>{const C=dl(L);return a.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded p-1.5",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[a.jsx(N,{name:"ArrowUp",size:10,className:"text-green-400"}),a.jsx("span",{className:"text-[10px] font-semibold text-green-300 leading-tight",children:L.desc||""})]}),C.length>0&&a.jsx("div",{className:"text-[9px] text-gray-300 ml-4 leading-tight",children:C.join("")})]},`buff-${u}`)}),ne.map((L,u)=>{const C=dl(L);return a.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded p-1.5",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[a.jsx(N,{name:"ArrowDown",size:10,className:"text-red-400"}),a.jsx("span",{className:"text-[10px] font-semibold text-red-300 leading-tight",children:L.desc||""})]}),C.length>0&&a.jsx("div",{className:"text-[9px] text-gray-300 ml-4 leading-tight",children:C.join("")})]},`debuff-${u}`)})]})]})]})},Rb=({logs:l})=>a.jsxs("div",{className:"glass-epic p-3 rounded-2xl border border-ancient-gold/20 shadow-epic relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-ancient-ink/60 via-ancient-stone/30 to-ancient-ink/60 opacity-60"}),a.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",children:a.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[a.jsxs("pattern",{id:"log-panel-pattern",width:"80",height:"80",patternUnits:"userSpaceOnUse",children:[a.jsx("path",{d:"M0 20 H80 M0 60 H80",stroke:"currentColor",strokeWidth:"0.5",className:"text-ancient-gold/10"}),a.jsx("path",{d:"M20 0 V80 M60 0 V80",stroke:"currentColor",strokeWidth:"0.5",className:"text-ancient-gold/10"}),a.jsx("circle",{cx:"40",cy:"40",r:"2",fill:"currentColor",className:"text-ancient-gold/30"})]}),a.jsx("rect",{width:"100%",height:"100%",fill:"url(#log-panel-pattern)"})]})}),a.jsxs("div",{className:"relative z-10 flex flex-col gap-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-sm font-bold text-ancient flex items-center gap-2",children:[a.jsx(N,{name:"ScrollText",size:16,className:"text-ancient-gold"}),""]}),a.jsxs("span",{className:"text-[11px] text-ancient-stone opacity-80",children:[" ",l.length," "]})]}),a.jsx("div",{className:"space-y-1.5 max-h-48 overflow-y-auto pr-1 scrollbar-thin scrollbar-thumb-ancient-gold/40",children:l.length===0?a.jsx("p",{className:"text-xs text-ancient-stone opacity-70 italic text-center py-4",children:""}):l.map((c,m)=>a.jsxs("div",{className:"text-xs text-ancient-parchment glass-ancient border border-ancient-gold/10 rounded-lg px-2 py-1.5 hover:border-ancient-gold/30 transition-all animate-fade-in",children:[a.jsxs("span",{className:"text-ancient-gold/60 font-mono text-[10px] mr-2",children:["#",m+1]}),c]},m))})]})]}),Bb=({isAutoSaveEnabled:l,autoSaveInterval:c,onToggleAutoSave:m,onIntervalChange:o,lastAutoSaveTime:p,onManualSave:j,onManualLoad:v,onAutoLoad:w,autoSaveAvailable:g,isSaving:y,onClose:k})=>{const{enabled:_,volume:E,toggleSound:U,setVolume:D,playSound:M,SOUND_TYPES:A}=K0(),S=()=>{if(!p)return"";try{return new Date(p).toLocaleTimeString()}catch{return""}};return a.jsxs("div",{className:"bg-gray-900/90 backdrop-blur border border-gray-700 rounded-xl p-4 space-y-4 shadow-lg",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-sm font-bold text-gray-200 flex items-center gap-2",children:[a.jsx(N,{name:"Sliders",size:16})," "]}),a.jsxs("div",{className:"flex items-center gap-2",children:[y&&a.jsxs("div",{className:"flex items-center gap-1 text-emerald-300 text-[11px]",children:[a.jsx(N,{name:"Activity",size:12,className:"animate-spin"}),a.jsx("span",{children:""})]}),k&&a.jsx("button",{type:"button",onClick:k,className:"p-1 rounded-full bg-gray-800/80 hover:bg-gray-700 border border-gray-600 text-gray-300 transition-colors",title:"",children:a.jsx(N,{name:"X",size:14})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-300",children:[a.jsx("span",{children:""}),a.jsx("span",{className:l?"text-emerald-300":"text-gray-500",children:l?"":""})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer",checked:l,onChange:ie=>m(ie.target.checked)}),a.jsx("div",{className:"w-10 h-5 bg-gray-700 rounded-full peer peer-checked:bg-emerald-600 transition-colors"}),a.jsx("div",{className:`absolute left-1 top-1 w-3 h-3 rounded-full bg-white transition-transform ${l?"translate-x-5":""}`})]})]}),a.jsxs("div",{className:"space-y-2 text-xs text-gray-300",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[c," "]})]}),a.jsx("input",{type:"range",min:15,max:300,step:15,value:c,onChange:ie=>o(Number(ie.target.value)),className:"w-full accent-emerald-500"}),a.jsx("p",{className:"text-[11px] text-gray-400",children:" 15  5 "})]}),a.jsxs("div",{className:"text-[11px] text-gray-400 flex items-center gap-2",children:[a.jsx(N,{name:"Clock",size:12,className:"text-gray-500"}),a.jsxs("span",{children:["",S()]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("button",{type:"button",onClick:j,className:"flex items-center justify-center gap-1 px-3 py-2 rounded-lg bg-emerald-700/30 hover:bg-emerald-700/50 border border-emerald-500/30 text-emerald-200 transition-colors",children:[a.jsx(N,{name:"Save",size:14}),""]}),a.jsxs("button",{type:"button",onClick:v,className:"flex items-center justify-center gap-1 px-3 py-2 rounded-lg bg-purple-700/30 hover:bg-purple-700/50 border border-purple-500/30 text-purple-200 transition-colors",children:[a.jsx(N,{name:"Download",size:14}),""]}),a.jsxs("button",{type:"button",onClick:w,disabled:!g,className:`col-span-2 flex items-center justify-center gap-1 px-3 py-2 rounded-lg border transition-colors ${g?"bg-amber-700/30 hover:bg-amber-700/50 border-amber-500/30 text-amber-200":"bg-gray-700/40 border-gray-600 text-gray-400 cursor-not-allowed"}`,title:g?"":"",children:[a.jsx(N,{name:"Clock",size:14}),""]})]}),a.jsxs("div",{className:"text-[11px] text-gray-400 flex items-center gap-2",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${g?"bg-emerald-400":"bg-gray-500"}`}),g?"":""]}),a.jsxs("div",{className:"border-t border-gray-700 pt-4 space-y-4",children:[a.jsxs("h4",{className:"text-sm font-bold text-gray-200 flex items-center gap-2",children:[a.jsx(N,{name:"Volume2",size:16})," "]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-300",children:[a.jsx("span",{children:""}),a.jsx("span",{className:_?"text-emerald-300":"text-gray-500",children:_?"":""})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer",checked:_,onChange:()=>{U(),_||setTimeout(()=>M(A.SUCCESS),100)}}),a.jsx("div",{className:"w-10 h-5 bg-gray-700 rounded-full peer peer-checked:bg-emerald-600 transition-colors"}),a.jsx("div",{className:`absolute left-1 top-1 w-3 h-3 rounded-full bg-white transition-transform ${_?"translate-x-5":""}`})]})]}),_&&a.jsxs("div",{className:"space-y-2 text-xs text-gray-300",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[Math.round(E*100),"%"]})]}),a.jsx("input",{type:"range",min:0,max:100,step:5,value:E*100,onChange:ie=>D(Number(ie.target.value)/100),className:"w-full accent-emerald-500"})]}),_&&a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsx("button",{type:"button",onClick:()=>M(A.CLICK),className:"flex items-center justify-center gap-1 px-2 py-1.5 rounded-lg bg-gray-700/50 hover:bg-gray-700 border border-gray-600 text-gray-300 transition-colors",children:""}),a.jsx("button",{type:"button",onClick:()=>M(A.SUCCESS),className:"flex items-center justify-center gap-1 px-2 py-1.5 rounded-lg bg-gray-700/50 hover:bg-gray-700 border border-gray-600 text-gray-300 transition-colors",children:""}),a.jsx("button",{type:"button",onClick:()=>M(A.BUILD),className:"flex items-center justify-center gap-1 px-2 py-1.5 rounded-lg bg-gray-700/50 hover:bg-gray-700 border border-gray-600 text-gray-300 transition-colors",children:""}),a.jsx("button",{type:"button",onClick:()=>M(A.BATTLE),className:"flex items-center justify-center gap-1 px-2 py-1.5 rounded-lg bg-gray-700/50 hover:bg-gray-700 border border-gray-600 text-gray-300 transition-colors",children:""})]})]})]})};function Jf({daysElapsed:l=0,season:c="",population:m=0,stability:o=100,wealth:p=0,epoch:j=0}){const[v,w]=V.useState(0),[g,y]=V.useState(.5),[k,_]=V.useState(1),E=V.useMemo(()=>Math.random().toString(36).substr(2,9),[]),U=85;V.useEffect(()=>{const Q=setInterval(()=>{w(ge=>(ge+.002)%1)},50),I=setInterval(()=>{y(Math.random()),_(.5+Math.random()*1.5)},15e3);return()=>{clearInterval(Q),clearInterval(I)}},[]);const D=V.useMemo(()=>{const Q=v;let I,ge,ve,G;const me=110-Math.sin((Q-.2)*(Math.PI/.6))*100,b=20+(Q-.2)/.6*160;let O=Q<.5?Q+1:Q;const R=110-Math.sin((O-.7)*(Math.PI/.6))*100,ne=20+(O-.7)/.6*160;if(Q<.25){const L=Q/.25;I=`rgb(${20+L*100}, ${30+L*120}, ${60+L*130})`,ge=`rgb(${40+L*120}, ${60+L*140}, ${100+L*135})`,ve=1-L*2,G="#ffccbc"}else if(Q<.75)I="#4fc3f7",ge="#b3e5fc",ve=0,G="#ffffff";else{const L=(Q-.75)/.25;I=`rgb(${25+(1-L)*10}, ${25+(1-L)*20}, ${60+(1-L)*60})`,ge="rgb(10, 10, 30)",ve=L*2,G="#546e7a"}return{from:I,to:ge,sunX:b,sunY:me,moonX:ne,moonY:R,starOpacity:ve,cloudColor:G}},[v]),M=V.useMemo(()=>{const Q={:{ground:["#8bc34a","#c5e1a5"],grass:"#8bc34a",bush:"#7cb342",treeTrunk:"#795548",treeLeaf:"#66bb6a",flower:"#f48fb1",particles:"#f8bbd0",mountain1:["#6b8e7f","#4a6b5c"],mountain2:["#7fa89b","#5d7f72"]},:{ground:["#558b2f","#8bc34a"],grass:"#558b2f",bush:"#33691e",treeTrunk:"#5d4037",treeLeaf:"#2e7d32",flower:null,particles:"#fff176",mountain1:["#546e7a","#37474f"],mountain2:["#607d8b","#455a64"]},:{ground:["#d7ccc8","#efebe9"],grass:"#d7ccc8",bush:"#ffb74d",treeTrunk:"#4e342e",treeLeaf:["#ff7043","#ffca28","#d84315"],flower:null,particles:"#d84315",mountain1:["#8d6e63","#5d4037"],mountain2:["#a1887f","#6d4c41"]},:{ground:["#eceff1","#ffffff"],grass:"#cfd8dc",bush:"#b0bec5",treeTrunk:"#3e2723",treeLeaf:"#ffffff",flower:null,particles:"#ffffff",mountain1:["#b0bec5","#78909c"],mountain2:["#cfd8dc","#90a4ae"]}};return Q[c]||Q.},[c]),A=V.useMemo(()=>j===0?{type:"tent",color:"#a1887f",detail:"none"}:j<=2?{type:"clay",color:"#d7ccc8",roof:"#a1887f"}:j<=4?{type:"timber",color:"#795548",roof:"#3e2723"}:j<=6?{type:"brick",color:"#b71c1c",roof:"#263238",detail:"chimney"}:{type:"modern",color:"#cfd8dc",roof:"#607d8b",detail:"glass"},[j]),S=V.useMemo(()=>{const Q=Math.min(Math.floor(m/5),15);return Array.from({length:Q}).map((ge,ve)=>{const G=Math.sin(ve*132.1)*10,me=Math.floor(ve/5),b=(2-me)*4,O=U+b+2,R=1-me*.15;return{x:20+ve*35%160+G,y:O,scale:R,id:ve}}).sort((ge,ve)=>ge.y-ve.y)},[m]),ie=V.useMemo(()=>{const Q=Math.min(Math.floor(m/3),8);return Array.from({length:Q}).map((I,ge)=>({id:ge,startX:10+Math.random()*180,y:U+2+Math.random()*10,duration:15+Math.random()*10,delay:-Math.random()*20,scale:.5+Math.random()*.3,color:["#5d4037","#3e2723","#4e342e"][Math.floor(Math.random()*3)]})).sort((I,ge)=>I.y-ge.y)},[m]),ae=V.useMemo(()=>{const Q=[],ge=ve=>{const G=Math.sin(ve+123.45)*1e4;return G-Math.floor(G)};for(let ve=0;ve<60;ve++){const G=ge(ve*1.1),me=ge(ve*2.2),b=ge(ve*3.3);let O="grass";me>.5&&(O="bush"),me>.8&&(O="tree");const R=G,ne=U+2+R*35,L=-20+ge(ve*99)*240;let u=.5+R*.8;O==="grass"&&(u*=.6);let C=0;Array.isArray(M.treeLeaf)&&(C=Math.floor(b*M.treeLeaf.length)),Q.push({id:ve,type:O,x:L,y:ne,scale:u,flip:b>.5?1:-1,variant:b,colorIdx:C})}return Q.sort((ve,G)=>ve.y-G.y)},[c,M]),ce=(100-o)/100*.8,Ce=g<ce,oe=o<80||g<.7,se=o<30&&Ce,de=Math.min(100,p/20+o/2+m/2)>70;return a.jsxs("div",{className:"relative w-full h-48 md:h-64 rounded-xl overflow-hidden border border-gray-700 shadow-2xl bg-gray-900 group select-none",children:[a.jsx("style",{children:`
        @keyframes cloud-drift { from { transform: translateX(-50px); } to { transform: translateX(250px); } }
        @keyframes twinkle { 0%, 100% { opacity: 0.3; transform: scale(0.8); } 50% { opacity: 1; transform: scale(1.2); } }
        @keyframes sway { 0%, 100% { transform: rotate(-3deg); } 50% { transform: rotate(3deg); } }
        @keyframes grass-sway { 0%, 100% { transform: rotate(-5deg); } 50% { transform: rotate(5deg); } }
        @keyframes smoke { 0% { opacity: 0.7; transform: translateY(0) scale(1); } 100% { opacity: 0; transform: translateY(-18px) scale(2.5); } }
        @keyframes rain { 0% { transform: translateY(-20px) translateX(${k*-5}px); opacity: 0; } 50% { opacity: 0.8; } 100% { transform: translateY(20px) translateX(${k*5}px); opacity: 0; } }
        @keyframes walk { 0% { transform: translateX(0) scaleX(1); } 45% { transform: translateX(40px) scaleX(1); } 50% { transform: translateX(40px) scaleX(-1); } 95% { transform: translateX(0) scaleX(-1); } 100% { transform: translateX(0) scaleX(1); } }
        @keyframes bob { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-0.8px); } }
        @keyframes float-up { 0% { opacity: 0.8; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-25px); } }
        @keyframes shimmer { 0%, 100% { opacity: 0.4; } 50% { opacity: 0.8; } }
        
        .cloud-anim { animation: cloud-drift linear infinite; }
        .tree-sway { transform-origin: bottom center; animation: sway 4s ease-in-out infinite; transform-box: fill-box; }
        .grass-sway { transform-origin: bottom center; animation: grass-sway 2s ease-in-out infinite; transform-box: fill-box; }
        .rain-drop { animation: rain 0.5s linear infinite; }
        .pedestrian-walk { animation: walk linear infinite; }
        .pedestrian-bob { animation: bob 0.5s ease-in-out infinite; }
        .smoke-particle { animation: smoke 2.5s ease-out infinite; }
        .star-twinkle { animation: twinkle 3s ease-in-out infinite; }
        .float-particle { animation: float-up 3s ease-out infinite; }
        .shimmer-effect { animation: shimmer 2s ease-in-out infinite; }
        
        path, circle, ellipse, rect, line { transition: fill 2s ease-in-out, stroke 2s ease-in-out, opacity 2s ease-in-out; }
      `}),a.jsxs("svg",{viewBox:"0 0 200 150",preserveAspectRatio:"xMidYMid slice",className:"w-full h-full block",style:{background:`linear-gradient(to bottom, ${D.from}, ${D.to})`,transition:"background 2s ease-in-out"},children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:`mountainGrad1-${E}`,x1:"0",x2:"0",y1:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:M.mountain1[0]}),a.jsx("stop",{offset:"100%",stopColor:M.mountain1[1]})]}),a.jsxs("linearGradient",{id:`mountainGrad2-${E}`,x1:"0",x2:"0",y1:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:M.mountain2[0]}),a.jsx("stop",{offset:"100%",stopColor:M.mountain2[1]})]}),a.jsxs("linearGradient",{id:`groundGrad-${E}`,x1:"0",x2:"0",y1:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:M.ground[0]}),a.jsx("stop",{offset:"100%",stopColor:M.ground[1]})]}),a.jsxs("radialGradient",{id:`sunGlow-${E}`,children:[a.jsx("stop",{offset:"0%",stopColor:"#fff176",stopOpacity:"0.8"}),a.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]})]}),a.jsxs("g",{id:"sky",children:[a.jsx("g",{style:{opacity:D.starOpacity,transition:"opacity 3s ease-in-out"},children:[...Array(15)].map((Q,I)=>a.jsx("circle",{cx:Math.random()*200,cy:Math.random()*60,r:Math.random()*.6+.2,fill:"#fff",className:"star-twinkle",style:{animationDelay:`${I*.2}s`}},`s${I}`))}),D.sunY<130&&a.jsxs("g",{transform:`translate(${D.sunX}, ${D.sunY})`,children:[a.jsx("circle",{r:"12",fill:`url(#sunGlow-${E})`,opacity:"0.6"}),a.jsx("circle",{r:"5",fill:"#fdd835"})]}),D.moonY<130&&a.jsxs("g",{transform:`translate(${D.moonX}, ${D.moonY})`,children:[a.jsx("circle",{r:"4",fill:"#f5f5f5"}),a.jsx("circle",{r:"4",fill:"#000",fillOpacity:"0.2",cx:"1.5",cy:"-1.5"})]})]}),a.jsxs("g",{id:"background",children:[a.jsx("path",{d:"M0,70 L30,40 L60,55 L100,30 L140,50 L180,35 L200,55 L200,150 L0,150 Z",fill:`url(#mountainGrad1-${E})`,opacity:"0.85"}),a.jsx("path",{d:"M-10,80 L40,60 L80,75 L120,55 L160,70 L200,60 L220,75 L220,150 L-10,150 Z",fill:`url(#mountainGrad2-${E})`,opacity:"0.95"})]}),a.jsx("path",{d:"M-10,85 Q100,83 210,85 L210,150 L-10,150 Z",fill:`url(#groundGrad-${E})`,style:{transition:"fill 2s ease-in-out"}}),ae.map(Q=>a.jsx("g",{transform:`translate(${Q.x}, ${Q.y})`,children:a.jsxs("g",{transform:`scale(${Q.scale*Q.flip}, ${Q.scale})`,children:[Q.type==="grass"&&a.jsx("g",{className:"grass-sway",style:{animationDuration:`${1.5+Q.variant}s`},children:a.jsx("path",{d:"M0,0 Q-1,-4 0,-5 M2,0 Q1,-3 2,-4 M-2,0 Q-3,-3 -2,-4",stroke:M.grass,strokeWidth:"0.5",fill:"none",opacity:"0.8"})}),Q.type==="bush"&&a.jsxs("g",{className:"tree-sway",style:{animationDuration:`${3+Q.variant}s`},children:[a.jsx("ellipse",{cx:"0",cy:"0",rx:"4",ry:"1.5",fill:"#000",opacity:"0.2"}),a.jsx("circle",{cx:"-2",cy:"-2",r:"2.5",fill:M.bush}),a.jsx("circle",{cx:"2",cy:"-2",r:"2.5",fill:M.bush}),a.jsx("circle",{cx:"0",cy:"-3.5",r:"3",fill:M.bush}),a.jsx("circle",{cx:"-1",cy:"-3",r:"1",fill:"#fff",opacity:"0.1"})]}),Q.type==="tree"&&a.jsxs("g",{className:"tree-sway",style:{animationDuration:`${4+Q.variant}s`},children:[a.jsx("ellipse",{cx:"0",cy:"0.5",rx:"5",ry:"1.5",fill:"#000",opacity:"0.2"}),a.jsx("path",{d:"M-1,0 L-0.8,-8 L0.8,-8 L1,0 Z",fill:M.treeTrunk}),c===""?a.jsxs("g",{transform:"translate(0, -8)",stroke:M.treeTrunk,strokeWidth:"0.5",children:[a.jsx("line",{x1:"0",y1:"0",x2:"-3",y2:"-4"}),a.jsx("line",{x1:"0",y1:"0",x2:"3",y2:"-4"}),a.jsx("line",{x1:"0",y1:"-2",x2:"-2",y2:"-5"}),a.jsx("line",{x1:"0",y1:"-2",x2:"2",y2:"-5"}),a.jsx("path",{d:"M-3,-4 Q0,-5 3,-4",stroke:"#fff",strokeWidth:"0.8",opacity:"0.8",fill:"none"})]}):a.jsx("g",{transform:"translate(0, -9)",children:(()=>{const I=Array.isArray(M.treeLeaf)?M.treeLeaf[Q.colorIdx]:M.treeLeaf;return a.jsxs(a.Fragment,{children:[a.jsx("circle",{cx:"-2.5",cy:"1",r:"3.5",fill:I}),a.jsx("circle",{cx:"2.5",cy:"1",r:"3.5",fill:I}),a.jsx("circle",{cx:"0",cy:"-2",r:"4",fill:I}),a.jsx("circle",{cx:"-1.5",cy:"-2.5",r:"1.5",fill:"#fff",opacity:"0.1"}),M.flower&&Q.variant>.6&&a.jsxs("g",{fill:M.flower,children:[a.jsx("circle",{cx:"-2",cy:"-1",r:"0.8"}),a.jsx("circle",{cx:"2",cy:"0",r:"0.6"}),a.jsx("circle",{cx:"0",cy:"-3",r:"0.7"})]})]})})()})]})]})},`veg-${Q.id}`)),S.map(Q=>a.jsxs("g",{transform:`translate(${Q.x}, ${Q.y}) scale(${Q.scale})`,children:[a.jsx("ellipse",{cx:"5",cy:"0.5",rx:"7",ry:"1.8",fill:"#000",opacity:"0.25"}),A.type==="tent"&&a.jsxs("g",{children:[a.jsx("path",{d:"M0,0 L5,-10 L10,0 Z",fill:A.color,stroke:"#8d6e63",strokeWidth:"0.3"}),a.jsx("line",{x1:"5",y1:"-10",x2:"5",y2:"0",stroke:"#6d4c41",strokeWidth:"0.4"}),a.jsx("path",{d:"M2,0 L5,-6 L8,0",fill:"none",stroke:"#6d4c41",strokeWidth:"0.3"})]}),(A.type==="clay"||A.type==="timber")&&a.jsxs("g",{children:[a.jsx("rect",{x:"1",y:"-7",width:"8",height:"7",fill:A.color}),a.jsx("rect",{x:"1",y:"-7",width:"1",height:"7",fill:"#000",opacity:"0.15"}),a.jsx("rect",{x:"8",y:"-7",width:"1",height:"7",fill:"#fff",opacity:"0.1"}),a.jsx("path",{d:"M0,-7 L5,-12 L10,-7 Z",fill:A.roof}),a.jsx("path",{d:"M0,-7 L5,-12 L5,-7 Z",fill:"#000",opacity:"0.2"}),a.jsx("rect",{x:"3.5",y:"-4",width:"3",height:"4",fill:"#3e2723",rx:"0.3"}),a.jsx("circle",{cx:"6",cy:"-2",r:"0.3",fill:"#ffd54f"}),a.jsx("rect",{x:"1.5",y:"-5.5",width:"1.5",height:"1.5",fill:v>.7||v<.2?"#ffb74d":"#90a4ae",opacity:"0.7"})]}),(A.type==="brick"||A.type==="modern")&&a.jsxs("g",{children:[a.jsx("rect",{x:"0",y:"-10",width:"10",height:"10",fill:A.color}),a.jsx("rect",{x:"0",y:"-10",width:"1.5",height:"10",fill:"#000",opacity:"0.15"}),a.jsx("rect",{x:"8.5",y:"-10",width:"1.5",height:"10",fill:"#fff",opacity:"0.1"}),a.jsx("path",{d:"M-1,-10 L5,-14 L11,-10 Z",fill:A.roof}),a.jsx("path",{d:"M-1,-10 L5,-14 L5,-10 Z",fill:"#000",opacity:"0.25"}),a.jsxs("g",{children:[a.jsx("rect",{x:"1.5",y:"-8.5",width:"2.5",height:"2.5",fill:v>.7||v<.2?"#ffeb3b":"#cfd8dc",opacity:v>.7||v<.2?.9:.6,rx:"0.2"}),a.jsx("line",{x1:"2.75",y1:"-8.5",x2:"2.75",y2:"-6",stroke:"#37474f",strokeWidth:"0.2"}),a.jsx("line",{x1:"1.5",y1:"-7.25",x2:"4",y2:"-7.25",stroke:"#37474f",strokeWidth:"0.2"}),a.jsx("rect",{x:"6",y:"-8.5",width:"2.5",height:"2.5",fill:v>.7||v<.2?"#ffeb3b":"#cfd8dc",opacity:v>.7||v<.2?.9:.6,rx:"0.2"}),a.jsx("line",{x1:"7.25",y1:"-8.5",x2:"7.25",y2:"-6",stroke:"#37474f",strokeWidth:"0.2"}),a.jsx("line",{x1:"6",y1:"-7.25",x2:"8.5",y2:"-7.25",stroke:"#37474f",strokeWidth:"0.2"})]}),a.jsx("rect",{x:"3.5",y:"-4.5",width:"3",height:"4.5",fill:"#4e342e",rx:"0.3"}),a.jsx("circle",{cx:"6",cy:"-2.5",r:"0.3",fill:"#ffd54f"}),A.detail==="chimney"&&a.jsxs("g",{transform:"translate(7.5, -14)",children:[a.jsx("rect",{x:"-0.5",y:"0",width:"1.5",height:"4",fill:"#3e2723"}),a.jsx("rect",{x:"-0.5",y:"0",width:"0.3",height:"4",fill:"#000",opacity:"0.2"}),a.jsx("circle",{cy:"-1",r:"1.2",fill:"#e0e0e0",opacity:"0.7",className:"smoke-particle",style:{animationDelay:`${Q.id*.5}s`}}),a.jsx("circle",{cy:"-1",r:"0.8",fill:"#f5f5f5",opacity:"0.5",className:"smoke-particle",style:{animationDelay:`${Q.id*.5+.3}s`}})]}),A.detail==="glass"&&p>1e3&&a.jsx("rect",{x:"1",y:"-9",width:"8",height:"1",fill:"#4fc3f7",opacity:"0.3"})]})]},`h-${Q.id}`)),ie.map(Q=>a.jsx("g",{transform:`translate(${Q.startX}, ${Q.y}) scale(${Q.scale})`,children:a.jsx("g",{style:{animation:`walk ${Q.duration}s linear infinite`,animationDelay:`${Q.delay}s`},children:a.jsxs("g",{className:"pedestrian-bob",children:[a.jsx("circle",{cx:"0",cy:"-5.5",r:"1.2",fill:Q.color}),a.jsx("ellipse",{cx:"0",cy:"-3",rx:"1.2",ry:"2",fill:Q.color}),a.jsx("line",{x1:"-1.2",y1:"-3.5",x2:"-2",y2:"-1.5",stroke:Q.color,strokeWidth:"0.6",strokeLinecap:"round"}),a.jsx("line",{x1:"1.2",y1:"-3.5",x2:"2",y2:"-1.5",stroke:Q.color,strokeWidth:"0.6",strokeLinecap:"round"}),a.jsx("line",{x1:"-0.5",y1:"-1",x2:"-1",y2:"1",stroke:Q.color,strokeWidth:"0.8",strokeLinecap:"round"}),a.jsx("line",{x1:"0.5",y1:"-1",x2:"1",y2:"1",stroke:Q.color,strokeWidth:"0.8",strokeLinecap:"round"}),a.jsx("ellipse",{cx:"0",cy:"1.2",rx:"1.5",ry:"0.5",fill:"#000",opacity:"0.2"})]})})},`ped-${Q.id}`)),a.jsxs("g",{id:"weather",children:[oe&&a.jsxs("g",{opacity:"0.8",style:{transition:"opacity 2s ease-in-out"},children:[a.jsxs("g",{className:"cloud-anim",style:{animationDuration:`${60/k}s`},children:[a.jsx("ellipse",{cx:"20",cy:"25",rx:"12",ry:"6",fill:D.cloudColor,opacity:"0.7"}),a.jsx("ellipse",{cx:"30",cy:"23",rx:"15",ry:"7",fill:D.cloudColor,opacity:"0.8"}),a.jsx("ellipse",{cx:"42",cy:"25",rx:"13",ry:"6",fill:D.cloudColor,opacity:"0.7"}),a.jsx("ellipse",{cx:"30",cy:"28",rx:"18",ry:"5",fill:D.cloudColor,opacity:"0.6"})]}),a.jsxs("g",{className:"cloud-anim",style:{animationDuration:`${45/k}s`,animationDelay:"-10s"},children:[a.jsx("ellipse",{cx:"100",cy:"18",rx:"14",ry:"7",fill:D.cloudColor,opacity:"0.75"}),a.jsx("ellipse",{cx:"112",cy:"16",rx:"16",ry:"8",fill:D.cloudColor,opacity:"0.85"}),a.jsx("ellipse",{cx:"125",cy:"18",rx:"14",ry:"7",fill:D.cloudColor,opacity:"0.75"}),a.jsx("ellipse",{cx:"112",cy:"22",rx:"20",ry:"6",fill:D.cloudColor,opacity:"0.65"})]})]}),Ce&&c!==""&&[...Array(50)].map((Q,I)=>{const ge=Math.random()*240-20,ve=k*3;return a.jsx("line",{x1:ge,y1:0,x2:ge+ve,y2:20,stroke:"#4fc3f7",strokeWidth:"0.4",strokeOpacity:"0.6",className:"rain-drop",style:{animationDuration:`${.4+Math.random()*.3}s`,animationDelay:`${Math.random()}s`}},`rain-${I}`)}),c===""&&g<.6&&[...Array(30)].map((Q,I)=>a.jsx("circle",{cx:Math.random()*240-20,cy:Math.random()*120,r:Math.random()*1.2+.5,fill:"#ffffff",opacity:"0.8",className:"rain-drop",style:{animationDuration:`${1+Math.random()}s`,animationDelay:`${Math.random()}s`}},`snow-${I}`)),p>800&&!se&&[...Array(8)].map((Q,I)=>a.jsxs("g",{children:[a.jsx("circle",{cx:40+Math.random()*120,cy:95,r:"1",fill:"#ffd700",className:"smoke-particle",style:{animationDelay:`${I*.3}s`}}),a.jsx("circle",{cx:40+Math.random()*120,cy:95,r:"0.5",fill:"#ffeb3b",className:"smoke-particle",style:{animationDelay:`${I*.3+.15}s`}})]},`wealth-${I}`)),de&&v>.2&&v<.8&&a.jsx("g",{opacity:"0.4",children:[...Array(3)].map((Q,I)=>a.jsx("line",{x1:D.sunX,y1:D.sunY,x2:30+I*70,y2:100,stroke:"#fff176",strokeWidth:"0.5",opacity:"0.3",className:"shimmer-effect",style:{animationDelay:`${I*.5}s`}},`ray-${I}`))}),o<70&&a.jsx("rect",{x:"0",y:"0",width:"200",height:"150",fill:"#000",opacity:Math.max(0,(70-o)/200),style:{transition:"opacity 3s ease-in-out"}})]})]}),a.jsxs("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-b from-gray-900/80 to-transparent px-3 py-2 flex items-center justify-between text-xs pointer-events-none z-10",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{style:{color:M.treeLeaf&&!Array.isArray(M.treeLeaf)?M.treeLeaf:M.grass},className:"text-sm",children:""}),a.jsx("span",{className:"text-white text-[11px] font-medium",children:c})]}),a.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-300",children:[a.jsxs("span",{children:["T",j]}),a.jsx("span",{className:"text-gray-500",children:"|"}),a.jsxs("span",{children:["",m]})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[o<40&&a.jsx("span",{className:"text-red-400 animate-pulse",children:""}),o>=40&&o<70&&a.jsx("span",{className:"text-yellow-400",children:""}),Ce&&a.jsx("span",{className:"text-blue-300",children:""}),de&&a.jsx("span",{className:"text-yellow-400",children:""}),p>1500&&a.jsx("span",{className:"text-amber-400",children:""}),a.jsx("span",{className:"text-gray-300",children:v>.25&&v<.75?"":""})]})]})]})}const $b=({building:l,count:c,epoch:m,techsUnlocked:o,jobFill:p,anchorElement:j,cost:v,resources:w})=>{if(!l||!j)return null;const[g,y]=V.useState({top:0,left:0}),k=V.useRef(null);return V.useEffect(()=>{if(j&&k.current){const _=j.getBoundingClientRect(),E=k.current.getBoundingClientRect();let U=_.top,D=_.right+8;D+E.width>window.innerWidth&&(D=_.left-E.width-8),U<0&&(U=0),U+E.height>window.innerHeight&&(U=window.innerHeight-E.height),y({top:U,left:D})}},[j,l,c]),On.createPortal(a.jsxs("div",{ref:k,className:"fixed w-72 bg-gray-800 border border-gray-600 rounded-lg shadow-2xl p-3 z-[9999] pointer-events-none animate-fade-in-fast",style:{top:`${g.top}px`,left:`${g.left}px`},children:[a.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:l.name}),a.jsx("p",{className:"text-xs text-gray-300 mb-2",children:l.desc}),l.owner&&a.jsxs("div",{className:"text-[10px] text-yellow-200 bg-yellow-900/40 border border-yellow-600/40 rounded px-2 py-1 mb-2 inline-flex items-center gap-1",children:[a.jsx(N,{name:"User",size:10,className:"text-yellow-300"}),": ",Fe[l.owner]?.name||l.owner]}),v&&Object.keys(v).length>0&&a.jsxs("div",{className:"glass-ancient rounded px-2 py-1.5 mb-2 text-xs border border-ancient-gold/20",children:[a.jsx("div",{className:"text-[10px] text-gray-300 mb-1",children:""}),Object.entries(v).map(([_,E])=>{const U=(w[_]||0)>=E;return a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-200",children:Me[_]?.name||_}),a.jsx("span",{className:`font-mono ${U?"text-green-400":"text-red-400"}`,children:E})]},`cost-${_}`)})]}),(()=>{const _=bi(l.output,m,o),E=bi(l.input,m,o);return Object.keys(_).length===0&&Object.keys(E).length===0?null:a.jsxs("div",{className:"glass-ancient rounded px-2 py-1.5 mb-2 text-xs border border-ancient-gold/20",children:[a.jsx("div",{className:"text-[10px] text-gray-300 mb-1",children:"/"}),Object.entries(_).map(([U,D])=>a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-200",children:Me[U]?.name||U}),a.jsxs("span",{className:"text-green-400 font-mono",children:["+",D]})]},`out-${U}`)),Object.entries(E).map(([U,D])=>a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-200",children:Me[U]?.name||U}),a.jsxs("span",{className:"text-red-400 font-mono",children:["-",D]})]},`in-${U}`))]})})(),l.jobs&&a.jsxs("div",{className:"glass-ancient rounded px-2 py-1.5 mb-2 text-xs border border-ancient-gold/20",children:[a.jsx("div",{className:"text-[10px] text-gray-300 mb-1",children:""}),Object.entries(l.jobs).map(([_,E])=>{const U=E*c,D=p?.[l.id]?.[_]??0,M=U>0?Math.min(1,D/U)*100:0;return a.jsxs("div",{className:"mb-1.5",children:[a.jsxs("div",{className:"flex justify-between text-[11px] text-gray-300",children:[a.jsx("span",{className:"text-gray-200 font-semibold",children:Fe[_]?.name||_}),a.jsxs("span",{className:"font-mono text-gray-200",children:[Math.round(D),"/",Math.round(U)]})]}),a.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 mb-0.5",children:[a.jsxs("span",{children:[" ",E]}),a.jsxs("span",{children:[" ",Math.round(U)]})]}),a.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1",children:a.jsx("div",{className:"h-1 rounded-full bg-blue-500",style:{width:`${M}%`}})})]},_)})]}),a.jsx("div",{className:"text-[10px] text-center text-gray-400 pt-1 border-t border-gray-700",children:""})]}),document.body)},Ub=({building:l,count:c,affordable:m,silverCost:o,ownerIncome:p,onBuy:j,onSell:v,onShowDetails:w,cost:g,onMouseEnter:y,onMouseLeave:k,epoch:_,techsUnlocked:E,jobFill:U,resources:D})=>{const M=N;return a.jsxs("div",{className:"group relative flex flex-col h-full glass-ancient border border-ancient-gold/30 rounded-xl p-2 text-center transition-all hover:border-ancient-gold/50 hover:shadow-glow-gold",onMouseEnter:y,onMouseLeave:k,children:[a.jsxs("div",{className:"flex-grow flex flex-col items-center cursor-pointer",onClick:()=>w(l.id),children:[a.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center mb-1 bg-ancient-ink/70 border border-ancient-gold/30 shadow-inner",children:a.jsx(M,{name:l.visual.icon,size:16,className:`${l.visual.text} drop-shadow-sm`})}),a.jsxs("div",{className:"flex items-baseline gap-0.5",children:[a.jsx("h4",{className:"text-[11px] font-bold text-ancient-parchment leading-tight truncate max-w-[70px]",children:l.name}),c>0&&a.jsxs("p",{className:"text-[9px] font-bold text-ancient-gold drop-shadow-sm",children:["",c]})]})]}),c>0&&a.jsxs("div",{className:"space-y-0.5 text-[9px] my-1",children:[l.jobs&&Object.keys(l.jobs).length>0&&a.jsx("div",{className:"bg-gray-900/40 rounded px-1 py-0.5",children:Object.entries(l.jobs).map(([A,S])=>{const ie=S*c,ae=U?.[l.id]?.[A]??0,ce=ie>0?Math.min(1,ae/ie)*100:0;return a.jsxs("div",{className:"flex items-center gap-0.5",title:`${Fe[A]?.name}: ${Math.round(ae)}/${Math.round(ie)}`,children:[a.jsx(N,{name:Fe[A]?.icon||"User",size:8,className:"text-gray-400 flex-shrink-0"}),a.jsx("div",{className:"flex-1 bg-gray-700 rounded-full h-1",children:a.jsx("div",{className:"h-1 rounded-full bg-green-500",style:{width:`${ce}%`}})}),a.jsxs("span",{className:"font-mono text-[8px] text-gray-300 whitespace-nowrap",children:[Math.round(ae),"/",Math.round(ie)]})]},A)})}),(()=>{const A=bi(l.output,_,E);return Object.keys(A).length===0?null:a.jsx("div",{className:"bg-gray-900/40 rounded px-1 py-0.5",children:a.jsx("div",{className:"flex flex-wrap gap-0.5 justify-center",children:Object.entries(A).map(([S,ie])=>{const ae=Object.values(l.jobs||{}).reduce((se,B)=>se+B*c,0),ce=Object.values(U?.[l.id]||{}).reduce((se,B)=>se+B,0),Ce=ae>0?Math.min(1,ce/ae):1,oe=ie*c*Ce;return a.jsxs("div",{className:"flex items-center gap-0.5 text-green-300",title:`${Me[S]?.name} - : ${ie} / : ${oe.toFixed(1)}`,children:[a.jsx(N,{name:Me[S]?.icon||"Box",size:8}),a.jsxs("span",{className:"font-mono text-[9px]",children:["+",oe.toFixed(0)]})]},S)})})})})()]}),a.jsxs("div",{className:"mt-1 space-y-0.5",children:[a.jsxs("button",{onClick:A=>{A.stopPropagation(),j(l.id)},disabled:!m,className:`w-full px-1.5 py-0.5 rounded text-[9px] font-semibold transition-all ${m?"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white shadow-sm hover:shadow-md":"bg-gray-700 text-gray-400 cursor-not-allowed"} flex items-center justify-center gap-0.5`,children:[a.jsx(N,{name:"Plus",size:8}),a.jsx("span",{className:m?"":"text-red-300",children:dn(o)})]}),c>0&&a.jsxs("button",{onClick:A=>{A.stopPropagation(),v(l.id)},className:"w-full px-1.5 py-0.5 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white rounded text-[9px] font-semibold transition-all shadow-sm hover:shadow-md flex items-center justify-center gap-0.5",children:[a.jsx(N,{name:"Minus",size:8}),a.jsx("span",{children:""})]})]})]})},Hb=({buildings:l,resources:c,epoch:m,techsUnlocked:o,popStructure:p={},jobFill:j={},onBuy:v,onSell:w,onShowDetails:g,market:y})=>{const[k,_]=V.useState({building:null,element:null}),E=window.matchMedia("(hover: hover)").matches,U=(B,de,Q,I)=>{E&&_({building:de,element:B.currentTarget,cost:Q,resources:I})},D=new Set(["maxPop"]),M=B=>{if(!B||B==="silver")return 1;const de=Me[B];return!de||D.has(B)?0:y?.prices?.[B]??de.basePrice??0},A=(B,de)=>{if(de===0)return 0;const Q=Object.values(B.jobs||{}).reduce((ne,L)=>ne+L*de,0),I=Object.values(j?.[B.id]||{}).reduce((ne,L)=>ne+L,0),ge=Q>0?Math.min(1,I/Q):1,ve=Object.entries(B.output||{}).reduce((ne,[L,u])=>ne+M(L)*u*ge,0),G=Object.entries(B.input||{}).reduce((ne,[L,u])=>ne+M(L)*u*ge,0),me=Object.entries(j?.[B.id]||{}).reduce((ne,[L,u])=>{const C=y?.wages?.[L]??0;return ne+C*(u/de)},0),b=ve-G-me,O=B.owner&&y?.wages?.[B.owner]?y.wages[B.owner]*(B.jobs[B.owner]||0):0,R=B.jobs?.[B.owner]||1;return(b+O)/R},S=B=>!(B.epoch>m||B.requiresTech&&!o.includes(B.requiresTech)),ie=B=>{const de=l[B.id]||0,Q={};for(let I in B.baseCost)Q[I]=Math.ceil(B.baseCost[I]*Math.pow(1.15,de));return Q},ae={gather:{name:"",icon:"Wheat",color:"text-yellow-400"},industry:{name:"",icon:"Factory",color:"text-blue-400"},civic:{name:"",icon:"Home",color:"text-green-400"},military:{name:"",icon:"Swords",color:"text-red-400"}},ce=[{key:"all",label:""},{key:"gather",label:""},{key:"industry",label:""},{key:"civic",label:""},{key:"military",label:""}],[Ce,oe]=V.useState("all"),se=Ce==="all"?Object.entries(ae):Object.entries(ae).filter(([B])=>B===Ce);return a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex flex-wrap gap-2 pb-1 border-b border-gray-700/60 mb-3",children:ce.map(B=>{const de=B.key===Ce;return a.jsx("button",{onClick:()=>oe(B.key),className:`px-3 py-1.5 rounded-full text-xs font-semibold transition-colors ${de?"bg-blue-600 text-white shadow-inner":"bg-gray-700/70 text-gray-300 hover:bg-gray-600/60"}`,"aria-pressed":de,children:B.label},B.key)})}),se.map(([B,de])=>{const Q=is.filter(I=>I.cat===B);return a.jsxs("div",{className:"glass-ancient p-4 rounded-xl border border-ancient-gold/30",children:[a.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[a.jsx(N,{name:de.icon,size:16,className:de.color}),de.name]}),a.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 2xl:grid-cols-10 gap-1.5",children:Q.filter(I=>S(I)).map(I=>{const ge=ie(I),ve=Ys(ge,y),G=Object.entries(ge).every(([ne,L])=>(c[ne]||0)>=L),me=(c.silver||0)>=ve,b=G&&me,O=l[I.id]||0,R=A(I,O);return a.jsx(Ub,{building:I,count:O,affordable:b,silverCost:ve,ownerIncome:R,cost:ge,onBuy:v,onSell:w,onMouseEnter:ne=>U(ne,I,ge,c),onMouseLeave:()=>E&&_({building:null,element:null}),epoch:m,techsUnlocked:o,jobFill:j,resources:c,onShowDetails:g},I.id)})})]},B)}),a.jsx($b,{building:k.building,anchorElement:k.element,count:k.building&&l[k.building.id]||0,epoch:m,techsUnlocked:o,jobFill:j,cost:k.cost,resources:c})]})},Lb=({unit:l,resources:c,market:m,militaryWageRatio:o,anchorElement:p})=>{if(!l||!p)return null;const[j,v]=V.useState({top:0,left:0}),w=V.useRef(null);V.useEffect(()=>{if(p&&w.current){const k=p.getBoundingClientRect(),_=w.current.getBoundingClientRect();let E=k.top,U=k.right+8;U+_.width>window.innerWidth&&(U=k.left-_.width-8),E<0&&(E=0),E+_.height>window.innerHeight&&(E=window.innerHeight-_.height),v({top:E,left:U})}},[p,l]);const g=Ys(l.recruitCost,m),y=m?.prices?.food??(Me.food?.basePrice||1);return On.createPortal(a.jsxs("div",{ref:w,className:"fixed w-72 bg-gray-800 border border-gray-600 rounded-lg shadow-2xl p-3 z-[9999] pointer-events-none animate-fade-in-fast",style:{top:`${j.top}px`,left:`${j.left}px`},children:[a.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:l.name}),a.jsx("p",{className:"text-xs text-gray-400 mb-2",children:l.type}),a.jsxs("div",{className:"bg-gray-900/50 rounded px-2 py-1.5 mb-2",children:[a.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:""}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(N,{name:"Sword",size:12,className:"text-red-400"}),a.jsx("span",{className:"text-gray-300",children:":"}),a.jsx("span",{className:"text-white",children:l.attack})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(N,{name:"Shield",size:12,className:"text-blue-400"}),a.jsx("span",{className:"text-gray-300",children:":"}),a.jsx("span",{className:"text-white",children:l.defense})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(N,{name:"Zap",size:12,className:"text-yellow-400"}),a.jsx("span",{className:"text-gray-300",children:":"}),a.jsx("span",{className:"text-white",children:l.speed})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(N,{name:"Clock",size:12,className:"text-purple-400"}),a.jsx("span",{className:"text-gray-300",children:":"}),a.jsxs("span",{className:"text-white",children:[l.trainingTime,""]})]})]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs mt-2 pt-2 border-t border-gray-700",children:[a.jsx(N,{name:"Coins",size:12,className:"text-yellow-400"}),a.jsx("span",{className:"text-gray-300",children:":"}),a.jsxs("span",{className:"text-yellow-300",children:[((l.maintenanceCost?.food||0)*y*o).toFixed(2)," /"]})]})]}),a.jsxs("div",{className:"bg-gray-900/50 rounded px-2 py-1.5",children:[a.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:""}),Object.entries(l.recruitCost).map(([k,_])=>a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-300",children:Me[k]?.name||k}),a.jsxs("span",{className:(c[k]||0)>=_?"text-green-400":"text-red-400",children:[_," (",(c[k]||0).toFixed(1),")"]})]},k)),a.jsxs("div",{className:"flex justify-between text-xs pt-1 border-t border-gray-700 mt-1",children:[a.jsx("span",{className:"text-gray-300",children:""}),a.jsx("span",{className:(c.silver||0)>=g?"text-green-400":"text-red-400",children:dn(g)})]})]})]}),document.body)},qb=({army:l,militaryQueue:c,resources:m,epoch:o,population:p,buildings:j={},nations:v=[],selectedTarget:w,onRecruit:g,onDisband:y,onCancelTraining:k,onSelectTarget:_,onLaunchBattle:E,market:U,militaryWageRatio:D=1,onUpdateWageRatio:M,techsUnlocked:A=[],onShowUnitDetails:S})=>{const[ie,ae]=V.useState({unit:null,element:null}),ce=window.matchMedia("(hover: hover)").matches,Ce=(u,C)=>{ce&&ae({unit:C,element:u.currentTarget})},oe=Object.values(l).reduce((u,C)=>u+C,0),se=(c||[]).filter(u=>u.status==="waiting").length,B=(c||[]).filter(u=>u.status==="training").length,de=oe+se+B;let Q=0;Object.entries(j).forEach(([u,C])=>{const $=is.find(J=>J.id===u);$&&$.output?.militaryCapacity&&(Q+=$.output.militaryCapacity*C)});const I=fp(l),ge=J0(l),ve=U?.prices?.food??(Me.food?.basePrice||1),G=ge*ve*D,me=Ec(l,o),b=(v||[]).filter(u=>u.isAtWar&&o>=(u.appearEpoch??0)&&(u.expireEpoch==null||o<=u.expireEpoch)),O=b.find(u=>u.id===w)||b[0]||null;Ws.useEffect(()=>{!O&&b.length>0&&_&&_(b[0].id)},[O,b,_]);const R=u=>{if(!Array.isArray(u)||u.length<2)return"";const[C,$]=u;return`${C}-${$}`},ne=u=>{if(u.epoch>o)return!1;for(let $ in u.recruitCost)if((m[$]||0)<u.recruitCost[$])return!1;const C=Ys(u.recruitCost,U);return!((m.silver||0)<C||de+1>Q)},L=u=>{if(u.epoch>o)return` ${EPOCHS[u.epoch].name}`;for(let $ in u.recruitCost)if((m[$]||0)<u.recruitCost[$])return` ${Me[$]?.name||$}`;const C=Ys(u.recruitCost,U);return(m.silver||0)<C?` ${C.toFixed(1)} `:de+1>Q?`${de}/${Q}`:""};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[a.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[a.jsx(N,{name:"Shield",size:16,className:"text-red-400"}),""]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(N,{name:"Users",size:14,className:"text-blue-400"}),a.jsx("span",{className:"text-xs text-gray-400",children:""})]}),a.jsx("p",{className:"text-lg font-bold text-white",children:oe})]}),a.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(N,{name:"Castle",size:14,className:"text-red-400"}),a.jsx("span",{className:"text-xs text-gray-400",children:""})]}),a.jsxs("p",{className:`text-lg font-bold ${de>Q?"text-red-400":"text-white"}`,children:[de," / ",Q]})]}),a.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(N,{name:"Clock",size:14,className:"text-yellow-400"}),a.jsx("span",{className:"text-xs text-gray-400",children:""})]}),a.jsx("p",{className:"text-lg font-bold text-white",children:c.length})]})]}),(()=>{const u=bi(I,o,A);return Object.keys(u).length>0&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-2",children:""}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(u).map(([C,$])=>a.jsxs("span",{className:`text-xs px-2 py-1 rounded ${(m[C]||0)>=$?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:[Me[C]?.name||C,": -",$.toFixed(1),"/"]},C))})]})})(),a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-2",children:""}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(N,{name:"Coins",size:14,className:"text-yellow-400"}),a.jsxs("span",{className:"text-yellow-300 font-mono",children:["-",G.toFixed(2)," "]})]}),a.jsxs("div",{className:"mt-2 flex items-center gap-2 text-[11px] text-gray-400",children:[a.jsx("span",{children:""}),a.jsx("input",{type:"number",step:"0.1",value:D,onChange:u=>M&&M(parseFloat(u.target.value)||0),className:"w-20 bg-gray-900/60 border border-gray-700 rounded px-2 py-0.5 text-xs text-gray-100"}),a.jsx("span",{className:"text-gray-500",children:" =     "})]})]})]}),a.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[a.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[a.jsx(N,{name:"Plus",size:16,className:"text-green-400"}),""]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2",children:Object.entries(Da).filter(([,u])=>u.epoch<=o).map(([u,C])=>{const $=Ys(C.recruitCost,U),J=ne(C);return a.jsxs("div",{onMouseEnter:le=>Ce(le,C),onMouseLeave:()=>ce&&ae({unit:null,element:null}),onClick:()=>S&&S(C),className:`group relative p-2 rounded-lg border transition-all cursor-pointer ${J?"glass-ancient border border-ancient-gold/30 hover:border-red-500/60 hover:shadow-glow-gold":"bg-gray-700/50 border border-ancient-gold/20"}`,children:[a.jsxs("div",{className:"flex flex-col items-center mb-2",children:[a.jsx("div",{className:"w-12 h-12 bg-red-900/30 rounded-full flex items-center justify-center mb-1",children:a.jsx(N,{name:"Swords",size:24,className:"text-red-400"})}),a.jsx("h4",{className:"text-xs font-bold text-white text-center leading-tight",children:C.name}),a.jsxs("p",{className:"text-[10px] text-gray-400",children:["",l[u]||0]})]}),a.jsxs("div",{className:"space-y-1 text-[10px] mb-2",children:[a.jsxs("div",{className:"bg-gray-900/40 rounded px-1.5 py-1 flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"/"}),a.jsxs("span",{className:"text-white",children:[C.attack,"/",C.defense]})]}),a.jsxs("div",{className:"bg-gray-900/40 rounded px-1.5 py-1 flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:""}),a.jsx("span",{className:"text-yellow-400",children:C.speed})]}),a.jsxs("div",{className:"bg-gray-900/40 rounded px-1.5 py-1 flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:""}),a.jsxs("span",{className:"text-yellow-300",children:[((C.maintenanceCost?.food||0)*ve*D).toFixed(1),"/"]})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:le=>{le.stopPropagation(),g(u)},disabled:!J,title:J?"":L(C),className:`w-full px-2 py-1 rounded text-[10px] font-semibold transition-colors ${J?"bg-green-600 hover:bg-green-500 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-1",children:[a.jsx(N,{name:"Plus",size:10}),a.jsx("span",{className:(m.silver||0)<$?"text-red-300":"",children:dn($)})]})}),(l[u]||0)>0&&a.jsxs("button",{onClick:le=>{le.stopPropagation(),y(u)},className:"w-full px-2 py-1 bg-red-600 hover:bg-red-500 text-white rounded text-[10px] font-semibold transition-colors flex items-center justify-center gap-1",children:[a.jsx(N,{name:"Minus",size:10}),""]})]})]},u)})})]}),c.length>0&&a.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[a.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[a.jsx(N,{name:"Clock",size:16,className:"text-yellow-400"}),""]}),a.jsx("div",{className:"space-y-2",children:c.map((u,C)=>{const $=Da[u.unitId],J=u.status==="waiting",le=J?0:(u.totalTime-u.remainingTime)/u.totalTime*100;return a.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${J?"bg-gray-700/30 border border-dashed border-gray-600":"bg-gray-700/50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(N,{name:J?"UserPlus":"User",size:14,className:J?"text-gray-400":"text-blue-400"}),a.jsx("span",{className:`text-sm ${J?"text-gray-400":"text-white"}`,children:$.name}),J&&a.jsx("span",{className:"text-xs text-yellow-400",children:"..."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[!J&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-32 bg-gray-600 rounded-full h-2",children:a.jsx("div",{className:"bg-yellow-500 h-2 rounded-full transition-all",style:{width:`${le}%`}})}),a.jsxs("span",{className:"text-xs text-gray-400 w-12 text-right",children:[u.remainingTime,"s"]})]}),J&&a.jsx("span",{className:"text-xs text-gray-500 w-44 text-right",children:""}),a.jsx("button",{onClick:()=>k&&k(C),className:"ml-2 p-1 rounded hover:bg-red-900/30 text-red-400 hover:text-red-300 transition-colors",title:"50%",children:a.jsx(N,{name:"X",size:14})})]})]},C)})})]}),a.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[a.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[a.jsx(N,{name:"Swords",size:16,className:"text-red-400"}),""]}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-3",children:[a.jsxs("span",{children:["",a.jsx("span",{className:"text-white font-semibold",children:me.toFixed(0)})]}),a.jsxs("span",{children:["",a.jsx("span",{className:"text-white font-semibold",children:oe})]})]}),b.length===0?a.jsx("div",{className:"p-3 rounded bg-gray-900/40 border border-gray-700 text-xs text-gray-400",children:""}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-gray-400 mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:""}),a.jsx("select",{value:O?.id||"",onChange:u=>_&&_(u.target.value),className:"bg-gray-900/60 border border-gray-700 text-white rounded px-2 py-1",children:b.map(u=>a.jsxs("option",{value:u.id,children:[u.name,"   ",u.warScore||0]},u.id))})]}),O&&a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs("span",{children:["",O.warScore||0]}),a.jsxs("span",{children:["",O.enemyLosses||0]}),a.jsxs("span",{children:["",Math.floor(O.wealth||0)]}),a.jsxs("span",{children:["",Math.floor((O.militaryStrength??1)*100),"%"]}),a.jsxs("span",{children:["",Math.floor(O.population||1e3)]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:dp.map(u=>{const C=(u.enemyUnits||[]).reduce((J,le)=>J+(le.min||0),0),$=(u.enemyUnits||[]).reduce((J,le)=>J+(le.max||le.min||0),0);return a.jsxs("div",{className:"p-3 rounded-lg border border-gray-700 bg-gray-900/40 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-base font-bold text-white flex items-center gap-2",children:[u.name,a.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-gray-700 text-gray-200",children:u.difficulty})]}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:u.desc})]}),a.jsx(N,{name:"Target",size:18,className:"text-red-300"})]}),a.jsxs("div",{className:"space-y-2 text-xs text-gray-300",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-400",children:""}),a.jsxs("span",{children:[C,"-",$," "]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-400 mb-1",children:""}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[Object.entries(u.loot||{}).map(([J,le])=>a.jsxs("span",{className:"px-2 py-0.5 bg-yellow-900/20 rounded border border-yellow-600/30 text-[11px] text-yellow-200",children:[Me[J]?.name||J," ",R(le)]},J)),Object.keys(u.loot||{}).length===0&&a.jsx("span",{className:"text-gray-500",children:""})]})]}),u.influence&&a.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[a.jsx("span",{className:"text-gray-400",children:""}),a.jsxs("span",{className:"text-green-400",children:[" +",u.influence.win]}),a.jsxs("span",{className:"text-red-400",children:[" ",u.influence.lose]})]})]}),a.jsxs("button",{onClick:()=>E(u.id,O?.id),disabled:oe===0||!O,className:"px-3 py-2 bg-red-600 hover:bg-red-500 disabled:bg-gray-600 disabled:text-gray-300 disabled:cursor-not-allowed text-white rounded text-sm font-semibold transition-colors flex items-center justify-center gap-2",children:[a.jsx(N,{name:"Sword",size:14}),""]})]},u.id)})})]}),oe===0&&a.jsx("p",{className:"text-xs text-yellow-400 mt-2",children:" "})]}),a.jsx(Lb,{unit:ie.unit,anchorElement:ie.element,resources:m,market:U,militaryWageRatio:D})]})},hp={gatherBonus:{label:"",type:"percent"},industryBonus:{label:"",type:"percent"},cultureBonus:{label:"",type:"percent"},scienceBonus:{label:"",type:"percent"},militaryBonus:{label:"",type:"percent"}},Vb=(l,c)=>{if(hp[l]?.type==="flat")return`${c>0?"+":""}${c}`;const o=typeof c=="number"?c:Number(c)||0;return`${o>0?"+":""}${(o*100).toFixed(0)}%`},zc=is.reduce((l,c)=>{if(!c.requiresTech)return l;const m=c.requiresTech;return l[m]||(l[m]=[]),l[m].push(c.name||c.id),l},{}),kc=l=>Math.min(1,Math.max(0,l)),Gb=(l,c=1)=>{if(typeof l!="string")return`rgba(255, 255, 255, ${kc(c)})`;const m=l.replace("#",""),o=m.length===3?m.split("").map(g=>g+g).join(""):m,p=Number.parseInt(o,16);if(Number.isNaN(p))return`rgba(255, 255, 255, ${kc(c)})`;const j=p>>16&255,v=p>>8&255,w=p&255;return`rgba(${j}, ${v}, ${w}, ${kc(c)})`},Kf=l=>l.replace(/rgba?\(/,"").replace(")","").split(",").map(c=>parseFloat(c.trim())).filter(c=>!Number.isNaN(c)),hi=(l,c=1)=>{const m=kc(c);if(!l)return`rgba(255, 255, 255, ${m})`;const o=l.trim();if(o.startsWith("#"))return Gb(o,m);if(o.startsWith("rgba")){const p=Kf(o);if(p.length>=3){const[j,v,w]=p;return`rgba(${j}, ${v}, ${w}, ${m})`}}if(o.startsWith("rgb")){const p=Kf(o);if(p.length>=3){const[j,v,w]=p;return`rgba(${j}, ${v}, ${w}, ${m})`}}return o},Wb=({tech:l,status:c,resources:m,market:o,anchorElement:p})=>{if(!l||!p)return null;const[j,v]=V.useState({top:0,left:0}),w=V.useRef(null);V.useEffect(()=>{if(p&&w.current){const y=p.getBoundingClientRect(),k=w.current.getBoundingClientRect();let _=y.top,E=y.right+8;E+k.width>window.innerWidth&&(E=y.left-k.width-8),_<0&&(_=0),_+k.height>window.innerHeight&&(_=window.innerHeight-k.height),v({top:_,left:E})}},[p,l]);const g=Ys(l.cost,o);return On.createPortal(a.jsxs("div",{ref:w,className:"fixed w-80 bg-gray-800 border border-gray-600 rounded-lg shadow-2xl p-3 z-[9999] pointer-events-none animate-fade-in-fast",style:{top:`${j.top}px`,left:`${j.left}px`},children:[a.jsxs("h5",{className:"text-sm font-bold text-white mb-1 flex items-center gap-1",children:[l.name,c==="unlocked"&&a.jsx(N,{name:"Check",size:14,className:"text-green-400"})]}),a.jsx("p",{className:"text-xs text-gray-400 mb-2",children:l.desc}),l.effect&&a.jsxs("div",{className:"bg-blue-900/30 rounded px-2 py-1.5 mb-2",children:[a.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:""}),a.jsx("p",{className:"text-xs text-blue-300",children:l.effect})]}),zc[l.id]?.length>0&&a.jsxs("div",{className:"bg-amber-900/30 rounded px-2 py-1.5 mb-2",children:[a.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:""}),a.jsx("p",{className:"text-xs text-amber-300",children:zc[l.id].join("")})]}),c!=="unlocked"&&a.jsxs("div",{className:"bg-gray-900/50 rounded px-2 py-1.5",children:[a.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:""}),Object.entries(l.cost).map(([y,k])=>a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-300",children:Me[y]?.name||y}),a.jsxs("span",{className:(m[y]||0)>=k?"text-green-400":"text-red-400",children:[Math.round(k)," (",Math.round(m[y]||0),")"]})]},y)),a.jsxs("div",{className:"flex justify-between text-xs pt-1 border-t border-gray-700 mt-1",children:[a.jsx("span",{className:"text-gray-300",children:""}),a.jsx("span",{className:(m.silver||0)>=g?"text-green-400":"text-red-400",children:dn(g)})]})]})]}),document.body)},Yb=({techsUnlocked:l,epoch:c,resources:m,population:o,onResearch:p,onUpgradeEpoch:j,canUpgradeEpoch:v,market:w,onShowTechDetails:g})=>{const[y,k]=V.useState({tech:null,element:null}),_=window.matchMedia("(hover: hover)").matches,E=(u,C)=>{_&&k({tech:C,element:u.currentTarget})},U=V.useCallback(u=>{if(l.includes(u.id)||u.epoch>c)return!1;for(let $ in u.cost)if((m[$]||0)<u.cost[$])return!1;const C=Ys(u.cost,w);return!((m.silver||0)<C)},[l,c,m,w]),D=u=>l.includes(u.id)?"unlocked":u.epoch>c?"locked":"available",M=V.useMemo(()=>fr.reduce((u,C)=>(u[C.epoch]||(u[C.epoch]=[]),u[C.epoch].push(C),u),{}),[]),[A,S]=V.useState(()=>{const u=new Set;return Object.keys(M).forEach(C=>{const $=parseInt(C,10),le=(M[$]||[]).some(De=>!l.includes(De.id));($===c||le)&&u.add($)}),u}),[ie,ae]=V.useState(!1);V.useEffect(()=>{S(u=>{if(u.has(c))return u;const C=new Set(u);return C.add(c),C})},[c]);const ce=V.useMemo(()=>Object.keys(M).map(Number).filter(u=>u<=c).sort((u,C)=>u-C),[M,c]),Ce=V.useMemo(()=>ce.reduce((u,C)=>{const $=M[C]||[],J=$.length,le=$.filter(fe=>l.includes(fe.id)).length,De=$.some(fe=>U(fe));return u[C]={techs:$,total:J,researchedCount:le,isCompleted:J>0&&le===J,hasResearchable:De},u},{}),[ce,M,l,U]),oe=ce.length>0&&ce.every(u=>A.has(u)),se=u=>{S(C=>{const $=new Set(C);return $.has(u)?$.delete(u):$.add(u),$})},B=()=>{S(()=>oe?new Set:new Set(ce))},de=typeof c=="number"&&c>=0&&c<xa.length?c:0,Q=xa[de],I=de<xa.length-1?xa[de+1]:null,ge=I?Ys(I.cost,w):0,ve=I?(m.silver||0)>=ge:!0,G=Math.min(de+1,xa.length-1),me=Ac(G),b=me?.accentColor||me?.primaryColor,O=V.useMemo(()=>me?{backgroundImage:`linear-gradient(135deg, ${hi(me.secondaryColor||me.primaryColor,.35)}, ${hi(me.primaryColor,.85)})`,borderColor:me.borderColor||me.primaryColor,boxShadow:`0 20px 45px ${me.glowColor||hi(me.primaryColor,.4)}`}:{},[me]),R=V.useMemo(()=>me?{backgroundImage:`linear-gradient(90deg, ${hi(me.secondaryColor||me.primaryColor,.95)}, ${hi(me.primaryColor,.95)})`,color:me.textColor||"#fff",borderColor:me.borderColor||me.primaryColor,boxShadow:`0 12px 30px ${me.glowColor||hi(me.primaryColor,.35)}`}:{},[me]),ne=c<xa.length-1&&!!I,L=ne&&v()&&ve;return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative p-4 rounded-2xl border-2 shadow-epic overflow-hidden transition-all",style:O,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[a.jsx(N,{name:"Crown",size:20,className:"drop-shadow",style:{color:b}}),"",Q?.name||""]}),a.jsx("p",{className:"text-xs text-gray-300 mt-1",children:Q?.description||""})]}),ne&&a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),a.jsx("p",{className:"text-sm font-bold",style:{color:me?.textColor||"#fff"},children:I.name})]})]}),Q?.bonuses&&a.jsxs("div",{className:"mb-3 p-3 bg-black/20 rounded",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-2",children:""}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(Q.bonuses).map(([u,C])=>u==="desc"?null:a.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[a.jsx(N,{name:"TrendingUp",size:12,className:"text-green-400"}),a.jsxs("span",{className:"text-gray-300",children:[hp[u]?.label||Me[u]?.name||u,":",a.jsx("span",{className:"text-green-400 ml-1",children:Vb(u,C)})]})]},u))})]}),ne&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-2",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[I.req.science&&a.jsxs("span",{className:`text-xs px-2 py-1 rounded ${(m.science||0)>=I.req.science?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:[Me.science?.name||"",": ",(m.science||0).toFixed(0)," / ",I.req.science]}),I.req.population&&a.jsxs("span",{className:`text-xs px-2 py-1 rounded ${o>=I.req.population?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:[": ",o," / ",I.req.population]}),I.req.culture&&a.jsxs("span",{className:`text-xs px-2 py-1 rounded ${(m.culture||0)>=I.req.culture?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:[Me.culture?.name||"",": ",(m.culture||0).toFixed(0)," / ",I.req.culture]})]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(I.cost).map(([u,C])=>a.jsxs("span",{className:`text-xs px-2 py-1 rounded ${(m[u]||0)>=C?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:[Me[u]?.name||u,": ",C]},u))}),a.jsxs("div",{className:"flex items-center justify-between text-xs mt-2",children:[a.jsx("span",{className:"text-gray-400",children:""}),a.jsx("span",{className:ve?"text-slate-100 font-semibold":"text-red-400 font-semibold",children:dn(ge)})]})]}),a.jsx("button",{onClick:j,disabled:!L,className:`w-full px-4 py-3 rounded-lg text-sm font-bold transition-all border-2 ${L?"shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed border-gray-600"}`,style:L?R:void 0,children:L?a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsx(N,{name:"ArrowUp",size:16})," ",I.name]}):""})]}),c===xa.length-1&&a.jsx("div",{className:"text-center py-2",children:a.jsx("p",{className:"text-sm text-yellow-400",children:" "})})]}),a.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[a.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[a.jsx(N,{name:"Lightbulb",size:16,className:"text-yellow-400"}),""]}),a.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-4",children:[a.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-300 cursor-pointer select-none",children:[a.jsx("input",{type:"checkbox",className:"form-checkbox rounded border-ancient-gold/30 text-purple-400 focus:ring-purple-500",checked:ie,onChange:u=>ae(u.target.checked)}),""]}),a.jsx("button",{onClick:B,className:"text-xs px-3 py-1.5 rounded border border-ancient-gold/30 text-ancient-parchment hover:border-purple-400 hover:text-ancient transition-colors",children:oe?"":""})]}),a.jsx("div",{className:"space-y-4",children:ce.map(u=>{const C=xa[u],$=Ce[u],J=A.has(u),le=$?.isCompleted?" ":`${$?.researchedCount||0}/${$?.total||0}`,De=$?.isCompleted?"text-green-400":"text-gray-300",fe=$?.techs||[],Ge=ie?fe.filter(K=>!l.includes(K.id)):fe;return a.jsxs("div",{className:`border rounded-lg ${$?.hasResearchable?"border-yellow-400/70":"border-gray-700"} bg-gray-900/40`,children:[a.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm text-purple-200",onClick:()=>se(u),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(N,{name:J?"ArrowDown":"ArrowRight",size:16,className:"text-purple-300"}),a.jsx("span",{className:"font-bold",children:C?.name}),$?.hasResearchable&&a.jsx("span",{className:"h-2 w-2 rounded-full bg-yellow-300 animate-pulse"})]}),a.jsx("div",{className:`text-xs font-semibold ${De}`,children:le})]}),J&&a.jsx("div",{className:"border-t border-gray-800 px-3 py-4",children:Ge.length>0?a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2",children:Ge.map(K=>{const We=D(K),xt=Ys(K.cost,w),P=U(K);return a.jsxs("div",{onMouseEnter:je=>E(je,K),onMouseLeave:()=>_&&k({tech:null,element:null}),onClick:()=>g&&g(K,We),className:`group relative p-2 rounded-lg border transition-all cursor-pointer ${We==="unlocked"?"bg-green-900/20 border-green-600":P?"glass-ancient border border-ancient-gold/30 hover:border-blue-400/70 hover:shadow-glow-gold":"bg-gray-700/50 border border-ancient-gold/20"}`,children:[a.jsxs("div",{className:"flex flex-col items-center mb-2",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-900/30 rounded-full flex items-center justify-center mb-1",children:We==="unlocked"?a.jsx(N,{name:"Check",size:24,className:"text-green-400"}):a.jsx(N,{name:"Lightbulb",size:24,className:"text-blue-400"})}),a.jsx("h5",{className:"text-xs font-bold text-white text-center leading-tight",children:K.name})]}),We!=="unlocked"&&a.jsxs("div",{className:"space-y-1 text-[10px] mb-2",children:[zc[K.id]?.length>0&&a.jsxs("div",{className:"bg-amber-900/30 rounded px-1.5 py-1 text-center text-amber-300",children:["",zc[K.id].length,""]}),K.effect&&a.jsx("div",{className:"bg-blue-900/30 rounded px-1.5 py-1 text-center text-blue-300",children:""})]}),We==="unlocked"?a.jsx("div",{className:"text-center py-1 bg-green-900/30 rounded text-[10px] text-green-400 font-semibold",children:" "}):a.jsx("button",{onClick:je=>{je.stopPropagation(),p(K.id)},disabled:!P,className:`w-full px-2 py-1 rounded text-[10px] font-semibold transition-colors ${P?"bg-blue-600 hover:bg-blue-500 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-1",children:[a.jsx(N,{name:"Zap",size:10}),a.jsx("span",{className:(m.silver||0)<xt?"text-red-300":"",children:dn(xt)})]})})]},K.id)})}):a.jsx("p",{className:"text-xs text-gray-400 text-center",children:ie?"":""})})]},u)})})]}),a.jsx(Wb,{tech:y.tech,anchorElement:y.element,status:y.tech?D(y.tech):null,resources:m,market:w})]})},If={upper:{name:"",keys:["merchant","official","landowner","capitalist","knight","engineer"]},middle:{name:"",keys:["worker","artisan","miner","soldier","cleric","scribe","navigator"]},lower:{name:"",keys:["unemployed","peasant","serf","lumberjack","slave"]}},Q0={basic:{name:"",keys:["food","wood","stone","cloth"]},industrial:{name:"",keys:["brick","plank","copper","tools","dye","iron","coal","steel"]},consumer:{name:"",keys:["papyrus","delicacies","furniture","ale","fine_clothes","spice","coffee"]}},ep=new Set(Object.values(Q0).flatMap(l=>l.keys)),tp=({resourceKey:l,info:c,rate:m,hasSupply:o,draftRate:p,onDraftChange:j,onCommit:v})=>{const w=m??0,g=w<0,y=Math.abs(w*100).toFixed(0),k=g?"text-green-300":"text-blue-300";return a.jsxs("div",{className:`bg-gray-900/40 p-2 rounded-lg border flex flex-col justify-between transition-opacity ${o?"border-gray-700/60":"border-gray-800/50 opacity-50"}`,children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[a.jsx(N,{name:c.icon||"Box",size:14,className:c.color||"text-gray-400"}),a.jsx("span",{className:"font-semibold text-gray-300 text-xs flex-grow whitespace-nowrap overflow-hidden text-ellipsis",children:c.name}),!o&&a.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 flex-shrink-0",title:""})]}),a.jsx("div",{className:"text-center my-0.5",children:a.jsxs("span",{className:`${k} text-lg`,children:[g?` ${y}`:`${y}`,a.jsx("span",{className:"text-xs",children:"%"})]})})]}),a.jsx("input",{type:"text",inputMode:"numeric",step:"0.01",value:p??(w*100).toFixed(0),onChange:_=>j(l,_.target.value),onBlur:()=>v(l),onKeyDown:_=>{_.key==="Enter"&&(v(l),_.target.blur())},className:"w-full bg-gray-900/70 border border-gray-600 text-[11px] text-gray-200 rounded px-1.5 py-0.5 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-center",placeholder:"%"})]})},Xb=({building:l,multiplier:c,buildingCount:m,draftMultiplier:o,onDraftChange:p,onCommit:j})=>{const v=l.businessTaxBase??.1,w=c??1,g=w*v,y=g<0,k=g>0,_=y?"text-green-300":"text-yellow-300",E=y?"border-green-700/60":k?"border-yellow-700/60":"border-gray-700/60",U=l.visual?.color||"bg-gray-700",D=l.visual?.text||"text-gray-200";return a.jsxs("div",{className:`bg-gray-900/40 p-1.5 rounded-lg border ${E} flex flex-col gap-1 transition-all ${m>0?"":"opacity-50"}`,children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[a.jsx("div",{className:`${U} ${D} p-0.5 rounded`,children:a.jsx(N,{name:l.visual?.icon||"Building",size:14})}),a.jsx("span",{className:"font-semibold text-gray-300 text-xs flex-grow whitespace-nowrap overflow-hidden text-ellipsis",children:l.name}),a.jsx("span",{className:"text-gray-500 text-[10px] font-mono",children:m})]}),a.jsxs("div",{className:"text-center my-0.5",children:[y?a.jsxs("div",{className:"flex items-center justify-center gap-1",children:[a.jsx(N,{name:"TrendingDown",size:12,className:"text-green-400"}),a.jsxs("span",{className:`${_} text-sm font-semibold`,children:[" ",Math.abs(g).toFixed(2)]})]}):k?a.jsxs("div",{className:"flex items-center justify-center gap-1",children:[a.jsx(N,{name:"TrendingUp",size:12,className:"text-yellow-400"}),a.jsx("span",{className:`${_} text-sm font-semibold`,children:g.toFixed(2)})]}):a.jsx("span",{className:"text-gray-500 text-sm",children:""}),a.jsxs("div",{className:"text-[10px] text-gray-500 mt-0",children:["// (",v.toFixed(2),")"]})]})]}),a.jsx("input",{type:"text",inputMode:"decimal",step:"0.05",value:o??w??1,onChange:M=>p(l.id,M.target.value),onBlur:()=>j(l.id),onKeyDown:M=>{M.key==="Enter"&&(j(l.id),M.target.blur())},className:"w-full bg-gray-900/70 border border-gray-600 text-[11px] text-gray-200 rounded px-1.5 py-0 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-center",placeholder:""})]})},Pb=({decrees:l,onToggle:c,taxPolicies:m,onUpdateTaxPolicies:o,popStructure:p={},buildings:j={},market:v={},epoch:w=0,techsUnlocked:g=[],onShowDecreeDetails:y,jobFill:k={},jobsAvailable:_={}})=>{const E={economy:{name:"",icon:"Coins",color:"text-yellow-400"},military:{name:"",icon:"Shield",color:"text-red-400"},culture:{name:"",icon:"Book",color:"text-purple-400"},social:{name:"",icon:"Users",color:"text-blue-400"}},U=(l||[]).filter(P=>(P.unlockEpoch??0)<=w),D=(l||[]).filter(P=>(P.unlockEpoch??0)>w),M=D.length>0?D.reduce((P,je)=>{const Ae=je.unlockEpoch??1/0;return Ae<P?Ae:P},1/0):null,A=Number.isFinite(M)?xa[M]?.name||` ${M+1} `:null,S=U.filter(P=>P.active).length,ie=U.length-S,ae=U.length>0?(S/U.length*100).toFixed(0):"0",ce=U.reduce((P,je)=>{const Ae=je.category||"social";return P[Ae]||(P[Ae]=[]),P[Ae].push(je),P},{}),Ce=m?.headTaxRates||{},oe=m?.resourceTaxRates||{},se=m?.businessTaxRates||{},[B,de]=Ws.useState({}),[Q,I]=Ws.useState({}),[ge,ve]=Ws.useState({}),[G,me]=Ws.useState("head"),b=Ws.useMemo(()=>Object.keys(Fe).filter(P=>{const je=Fe[P];return!(je.unlockEpoch!==void 0&&je.unlockEpoch>w||je.unlockTech&&!g.includes(je.unlockTech))}),[w,g]),O=Ws.useMemo(()=>b.filter(P=>P==="unemployed"?!0:(_[P]||0)>0),[b,_]),R=(P,je)=>{de(Ae=>({...Ae,[P]:je}))},ne=P=>{if(B[P]===void 0)return;const je=parseFloat(B[P]),Ae=Number.isNaN(je)?1:je;o(Se=>({...Se,headTaxRates:{...Se?.headTaxRates||{},[P]:Ae}})),de(Se=>{const Ye={...Se};return delete Ye[P],Ye})},L=(P,je)=>{I(Ae=>({...Ae,[P]:je}))},u=P=>{if(Q[P]===void 0)return;const je=parseFloat(Q[P]),Se=(Number.isNaN(je)?0:je)/100;o(Ye=>({...Ye,resourceTaxRates:{...Ye?.resourceTaxRates||{},[P]:Se}})),I(Ye=>{const bt={...Ye};return delete bt[P],bt})},C=(P,je)=>{ve(Ae=>({...Ae,[P]:je}))},$=P=>{if(ge[P]===void 0)return;const je=parseFloat(ge[P]),Ae=Number.isNaN(je)?1:je;o(Se=>({...Se,businessTaxRates:{...Se?.businessTaxRates||{},[P]:Ae}})),ve(Se=>{const Ye={...Se};return delete Ye[P],Ye})},J=Ws.useMemo(()=>Object.keys(Me).filter(P=>{const je=Me[P];return je.type&&(je.type==="virtual"||je.type==="currency")?!1:ur(P,w,g)}),[w,g]),De=Ws.useMemo(()=>{if(J.length===0)return[];const P=[];return Object.values(Q0).forEach(je=>{je.keys.forEach(Ae=>{J.includes(Ae)&&P.push(Ae)})}),J.forEach(je=>{P.includes(je)||P.push(je)}),P},[J]).map(P=>[P,Me[P]]).filter(([,P])=>P&&(!P.type||P.type!=="virtual"&&P.type!=="currency")),fe=Ws.useMemo(()=>is.filter(P=>(j[P.id]||0)>0).sort((P,je)=>{const Ae=j[P.id]||0,Se=j[je.id]||0;return P.cat!==je.cat?P.cat.localeCompare(je.cat):Se-Ae}),[j]),Ge=Ws.useMemo(()=>{const P={gather:{name:"",buildings:[]},industry:{name:"",buildings:[]},civic:{name:"",buildings:[]}};return fe.forEach(je=>{const Ae=je.cat||"civic";P[Ae]&&P[Ae].buildings.push(je)}),P},[fe]),K=P=>{const je=Fe[P]||{},Ae=je.headTaxBase??.01,Ye=(Ce[P]??1)*Ae,bt=p[P]||0,ua=bt>0,Gt=Ye<0,Fa=Ye>0;return a.jsxs("div",{className:`bg-gray-900/40 p-1.5 rounded-md border text-xs flex flex-col gap-1 ${ua?Gt?"border-green-700/60":Fa?"border-yellow-700/60":"border-gray-700/60":"border-gray-800 opacity-60"}`,children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(N,{name:je.icon||"User",size:14,className:"text-gray-400"}),a.jsx("span",{className:"font-semibold text-gray-300 flex-grow",children:je.name||P}),a.jsxs("span",{className:"text-gray-500 text-[10px] font-mono",children:[bt.toLocaleString()," "]})]}),a.jsx("div",{className:"flex items-center justify-center gap-0.5",children:Gt?a.jsxs(a.Fragment,{children:[a.jsx(N,{name:"TrendingDown",size:12,className:"text-green-400"}),a.jsxs("span",{className:"font-mono text-green-300 whitespace-nowrap text-[11px]",children:[" ",Math.abs(Ye).toFixed(3),"/"]})]}):Fa?a.jsxs(a.Fragment,{children:[a.jsx(N,{name:"TrendingUp",size:12,className:"text-yellow-400"}),a.jsxs("span",{className:"font-mono text-yellow-300 whitespace-nowrap text-[11px]",children:[Ye.toFixed(3),"/"]})]}):a.jsx("span",{className:"font-mono text-gray-500 whitespace-nowrap text-[11px]",children:""})}),a.jsx("div",{className:"flex items-center gap-1",children:a.jsx("input",{type:"text",inputMode:"decimal",step:"0.05",value:B[P]??Ce[P]??1,onChange:te=>R(P,te.target.value),onBlur:()=>ne(P),onKeyDown:te=>{te.key==="Enter"&&(ne(P),te.target.blur())},className:"w-full bg-gray-900/70 border border-gray-600 text-[11px] text-gray-200 rounded px-1 py-0 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-center",placeholder:""})})]},P)},We=new Set(Object.values(If).flatMap(P=>P.keys)),xt=(P,je)=>{const Ae=je.filter(([Se])=>P.keys.includes(Se));return Ae.length===0?null:a.jsxs("div",{className:"mb-4",children:[a.jsx("h5",{className:"text-xs font-semibold text-gray-400 mb-2",children:P.name}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2",children:Ae.map(([Se,Ye])=>a.jsx(tp,{resourceKey:Se,info:Ye,rate:oe[Se],hasSupply:(v?.supply?.[Se]||0)>0,draftRate:Q[Se],onDraftChange:L,onCommit:u},Se))})]},P.name)};return a.jsxs("div",{className:"space-y-4",children:[o&&a.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[a.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[a.jsx(N,{name:"DollarSign",size:16,className:"text-yellow-400"}),""]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 border-b border-gray-700",children:[a.jsx("button",{onClick:()=>me("head"),className:`flex-1 min-w-[90px] px-4 py-2 text-sm font-semibold transition-all ${G==="head"?"text-yellow-300 border-b-2 border-yellow-400":"text-gray-400 hover:text-gray-300"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(N,{name:"Users",size:14}),""]})}),a.jsx("button",{onClick:()=>me("resource"),className:`flex-1 min-w-[90px] px-4 py-2 text-sm font-semibold transition-all ${G==="resource"?"text-blue-300 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(N,{name:"Package",size:14}),""]})}),a.jsx("button",{onClick:()=>me("business"),className:`flex-1 min-w-[90px] px-4 py-2 text-sm font-semibold transition-all ${G==="business"?"text-green-300 border-b-2 border-green-400":"text-gray-400 hover:text-gray-300"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(N,{name:"Building",size:14}),""]})})]}),G==="head"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 p-3 rounded-lg text-xs text-blue-100",children:[a.jsxs("p",{className:"flex items-center gap-2 mb-1",children:[a.jsx(N,{name:"Info",size:12,className:"text-blue-400"}),a.jsx("span",{className:"font-semibold",children:""})]}),a.jsx("p",{children:""})]}),Object.entries(If).map(([P,je])=>{const Ae=O.filter(Se=>je.keys.includes(Se));return Ae.length===0?null:a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-semibold text-gray-400 mb-2",children:je.name}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2",children:Ae.map(Se=>K(Se))})]},P)}),O.filter(P=>!We.has(P)).length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-semibold text-gray-400 mb-2",children:""}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2",children:O.filter(P=>!We.has(P)).map(P=>K(P))})]})]}),G==="resource"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 p-3 rounded-lg text-xs text-blue-100",children:[a.jsxs("p",{className:"flex items-center gap-2 mb-1",children:[a.jsx(N,{name:"Info",size:12,className:"text-blue-400"}),a.jsx("span",{className:"font-semibold",children:""})]}),a.jsx("p",{children:""})]}),Object.values(Q0).map(P=>xt(P,De)),De.filter(([P])=>!ep.has(P)).length>0&&a.jsxs("div",{children:[a.jsx("h5",{className:"text-xs font-semibold text-gray-400 mb-2",children:""}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2",children:De.filter(([P])=>!ep.has(P)).map(([P,je])=>a.jsx(tp,{resourceKey:P,info:je,rate:oe[P],hasSupply:(v?.supply?.[P]||0)>0,draftRate:Q[P],onDraftChange:L,onCommit:u},P))})]})]}),G==="business"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 p-3 rounded-lg text-xs text-blue-100",children:[a.jsxs("p",{className:"flex items-center gap-2 mb-1",children:[a.jsx(N,{name:"Info",size:12,className:"text-blue-400"}),a.jsx("span",{className:"font-semibold",children:""})]}),a.jsx("p",{children:""})]}),Object.entries(Ge).map(([P,je])=>je.buildings.length===0?null:a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-semibold text-gray-400 mb-2",children:je.name}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2",children:je.buildings.map(Ae=>a.jsx(Xb,{building:Ae,multiplier:se[Ae.id],buildingCount:j[Ae.id]||0,draftMultiplier:ge[Ae.id],onDraftChange:C,onCommit:$},Ae.id))})]},P)),fe.length===0&&a.jsxs("div",{className:"text-center text-gray-500 py-8",children:[a.jsx(N,{name:"Building",size:32,className:"mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:""})]})]})]}),U.length===0&&a.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-600/30 p-4 rounded-lg text-xs text-yellow-100",children:[a.jsxs("p",{className:"font-semibold mb-1 flex items-center gap-2",children:[a.jsx(N,{name:"Lock",size:14,className:"text-yellow-300"}),""]}),a.jsxs("p",{children:[" ",A||""," "]})]}),Object.entries(E).map(([P,je])=>{const Ae=ce[P]||[];return Ae.length===0?null:a.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[a.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[a.jsx(N,{name:je.icon,size:16,className:je.color}),je.name]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2",children:Ae.map(Se=>a.jsxs("div",{onClick:()=>y&&y(Se),className:`group relative p-2 rounded-lg border transition-all cursor-pointer ${Se.active?"bg-green-900/20 border-green-600 shadow-lg":"bg-gray-700/50 border-gray-600 hover:border-purple-500 hover:shadow-lg"}`,children:[a.jsxs("div",{className:"flex flex-col items-center mb-2",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-1 ${Se.active?"bg-green-900/40":"bg-purple-900/30"}`,children:Se.active?a.jsx(N,{name:"Check",size:24,className:"text-green-400"}):a.jsx(N,{name:"FileText",size:24,className:"text-purple-400"})}),a.jsx("h4",{className:"text-xs font-bold text-white text-center leading-tight",children:Se.name}),Se.active&&a.jsx("span",{className:"text-[10px] text-green-400 mt-0.5",children:""})]}),a.jsxs("div",{className:"space-y-1 text-[10px] mb-2",children:[Se.effects&&Se.effects.length>0&&a.jsxs("div",{className:"bg-green-900/30 rounded px-1.5 py-1 text-center text-green-300",children:[Se.effects.length,""]}),Se.drawbacks&&Se.drawbacks.length>0&&a.jsxs("div",{className:"bg-red-900/30 rounded px-1.5 py-1 text-center text-red-300",children:[Se.drawbacks.length,""]})]}),a.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),c(Se.id)},className:`w-full px-2 py-1 rounded text-[10px] font-semibold transition-all ${Se.active?"bg-red-600 hover:bg-red-500 text-white":"bg-green-600 hover:bg-green-500 text-white"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-1",children:[a.jsx(N,{name:Se.active?"X":"Check",size:10}),Se.active?"":""]})}),a.jsxs("div",{className:"hidden lg:block absolute left-full top-0 ml-2 w-80 bg-gray-800 border border-gray-600 rounded-lg shadow-2xl p-3 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 pointer-events-none",children:[a.jsxs("h4",{className:"text-sm font-bold text-white mb-1 flex items-center gap-2",children:[Se.name,Se.active&&a.jsx("span",{className:"px-2 py-0.5 bg-green-600 text-white text-xs rounded",children:""})]}),a.jsx("p",{className:"text-xs text-gray-400 mb-2",children:Se.desc}),Se.effects&&Se.effects.length>0&&a.jsxs("div",{className:"bg-green-900/30 rounded px-2 py-1.5 mb-2",children:[a.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:""}),a.jsx("div",{className:"space-y-1",children:Se.effects.map((Ye,bt)=>a.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[a.jsx(N,{name:"Plus",size:12,className:"text-green-400"}),a.jsx("span",{className:"text-green-300",children:Ye})]},bt))})]}),Se.drawbacks&&Se.drawbacks.length>0&&a.jsxs("div",{className:"bg-red-900/30 rounded px-2 py-1.5",children:[a.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:""}),a.jsx("div",{className:"space-y-1",children:Se.drawbacks.map((Ye,bt)=>a.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[a.jsx(N,{name:"Minus",size:12,className:"text-red-400"}),a.jsx("span",{className:"text-red-300",children:Ye})]},bt))})]})]})]},Se.id))})]},P)}),a.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[a.jsxs("h3",{className:"text-sm font-bold mb-2 flex items-center gap-2 text-gray-300",children:[a.jsx(N,{name:"FileText",size:16,className:"text-blue-400"}),""]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[a.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),a.jsx("p",{className:"text-lg font-bold text-white",children:U.length})]}),a.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),a.jsx("p",{className:"text-lg font-bold text-green-400",children:S})]}),a.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),a.jsx("p",{className:"text-lg font-bold text-gray-400",children:ie})]}),a.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),a.jsxs("p",{className:"text-lg font-bold text-blue-400",children:[ae,"%"]})]}),a.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),a.jsx("p",{className:"text-lg font-bold text-yellow-300",children:D.length})]})]}),D.length>0&&a.jsxs("p",{className:"text-[11px] text-gray-400 mt-3",children:[" ",D.length," ",A?` ${A}`:"",""]})]})]})},ap=(l=0)=>l>=80?{label:"",color:"text-green-300",bg:"bg-green-900/20"}:l>=60?{label:"",color:"text-blue-300",bg:"bg-blue-900/20"}:l>=40?{label:"",color:"text-gray-300",bg:"bg-gray-800/40"}:l>=20?{label:"",color:"text-yellow-300",bg:"bg-yellow-900/20"}:{label:"",color:"text-red-300",bg:"bg-red-900/20"},Zb=({nations:l=[],epoch:c=0,market:m={},resources:o={},daysElapsed:p=0,onDiplomaticAction:j,tradeRoutes:v={routes:[]},onTradeRouteAction:w,playerInstallmentPayment:g=null,jobsAvailable:y={},popStructure:k={}})=>{const[_,E]=V.useState(null),[U,D]=V.useState(10),M=V.useMemo(()=>Object.entries(Me).filter(([G,me])=>me.type!=="virtual"&&G!=="silver"&&(me.unlockEpoch??0)<=c),[c]),A=V.useMemo(()=>l.filter(G=>c>=(G.appearEpoch??0)&&(G.expireEpoch==null||c<=G.expireEpoch)),[l,c]);V.useEffect(()=>{!_&&A.length>0?E(A[0].id):_&&!A.some(G=>G.id===_)&&E(A[0]?.id||null)},[_,A]);const S=A.find(G=>G.id===_)||A[0]||null,ie=S?ap(S.relation):null,ae=A.filter(G=>(G.relation||0)>=80).length,ce=A.filter(G=>G.isAtWar).length,Ce=y?.merchant||0,oe=k?.merchant||0,se=v.routes.length,B=Math.min(se,oe),de=(G,me,b)=>!v||!v.routes||!Array.isArray(v.routes)?!1:v.routes.some(O=>O.nationId===G&&O.resource===me&&O.type===b),Q=(G,me)=>{if(!S||!w)return;de(S.id,G,me)?w(S.id,"cancel",{resource:G,type:me}):w(S.id,"create",{resource:G,type:me})},I=(G,me)=>{j&&j(G,me)},ge=G=>m?.prices?.[G]??(Me[G]?.basePrice||1),ve=G=>G?.isAtWar?(G.warScore||0)>0?"":(G.warScore||0)<0?"":"":null;return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"hidden md:flex gap-2 text-xs",children:[a.jsxs("div",{className:"bg-gray-800/60 px-2 py-1 rounded border border-gray-700",children:[a.jsx("span",{className:"text-gray-400",children:":"}),a.jsx("span",{className:"text-white font-bold ml-1",children:A.length})]}),a.jsxs("div",{className:"bg-green-900/20 px-2 py-1 rounded border border-green-600/20",children:[a.jsx("span",{className:"text-gray-400",children:":"}),a.jsx("span",{className:"text-green-300 font-bold ml-1",children:ae})]}),a.jsxs("div",{className:"bg-red-900/20 px-2 py-1 rounded border border-red-600/30",children:[a.jsx("span",{className:"text-gray-400",children:":"}),a.jsx("span",{className:"text-red-300 font-bold ml-1",children:ce})]}),a.jsxs("div",{className:"bg-blue-900/20 px-2 py-1 rounded border border-blue-600/20",children:[a.jsx("span",{className:"text-gray-400",children:":"}),a.jsxs("span",{className:`font-bold ml-1 ${B<se?"text-yellow-300":"text-blue-300"}`,children:[B,"/",se]}),a.jsxs("span",{className:"text-gray-500 text-[10px] ml-1",children:["(:",Ce,")"]})]}),a.jsxs("div",{className:"bg-amber-900/20 px-2 py-1 rounded border border-amber-600/20",children:[a.jsx("span",{className:"text-gray-400",children:":"}),a.jsxs("span",{className:"text-amber-300 font-bold ml-1",children:[oe,"/",Ce]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-3 h-[calc(100vh-180px)] md:h-[600px]",children:[a.jsxs("div",{className:"bg-gray-800/40 rounded-lg border border-gray-700 flex flex-col overflow-hidden",children:[a.jsx("div",{className:"px-2 py-1.5 border-b border-gray-700/80 text-[10px] uppercase tracking-wide text-gray-400",children:""}),a.jsxs("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-900 hover:scrollbar-thumb-gray-500",children:[A.map((G,me)=>{if(!G)return null;const b=ap(G.relation||0),O=G.id===S?.id;return a.jsxs("button",{onClick:()=>E(G.id),className:`w-full flex items-center gap-2 px-2 py-1.5 text-left transition-colors border-b border-gray-700/60 focus:outline-none ${O?"bg-blue-900/30 border-l-2 border-l-blue-400":"hover:bg-gray-800/60"} ${me===A.length-1?"border-b-0":""}`,children:[a.jsx(N,{name:"Flag",size:14,className:G.color||"text-gray-300"}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"text-xs font-semibold text-white truncate",children:G.name||""}),a.jsx("span",{className:`px-1 py-0.5 rounded text-[9px] ${b.bg} ${b.color}`,children:b.label})]})}),a.jsx(N,{name:G.isAtWar===!0?"Swords":"ShieldCheck",size:12,className:G.isAtWar===!0?"text-red-400":"text-green-400"})]},G.id)}),A.length===0&&a.jsx("div",{className:"p-3 text-xs text-gray-400",children:""})]})]}),a.jsx("div",{className:"xl:col-span-2 space-y-2 max-h-[calc(100vh-180px)] md:max-h-[600px] overflow-y-auto pr-1 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800 hover:scrollbar-thumb-gray-500",children:S?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gray-800/60 p-2 rounded-lg border border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(N,{name:"Globe",size:14,className:"text-amber-300"}),a.jsx("h3",{className:"text-sm font-bold text-white",children:S?.name||""}),ie&&a.jsx("span",{className:`px-1.5 py-0.5 text-[9px] rounded ${ie.bg} ${ie.color}`,children:ie.label})]}),a.jsx(N,{name:S?.isAtWar===!0?"Swords":"ShieldCheck",size:14,className:S?.isAtWar===!0?"text-red-400":"text-green-400"})]}),a.jsxs("div",{className:"flex gap-1.5 text-xs",children:[a.jsxs("button",{className:"flex-1 px-2 py-1.5 bg-green-600 hover:bg-green-500 rounded text-white flex items-center justify-center gap-1",onClick:()=>I(S.id,"gift"),children:[a.jsx(N,{name:"Gift",size:12})," "]}),a.jsxs("button",{className:"flex-1 px-2 py-1.5 bg-yellow-600 hover:bg-yellow-500 rounded text-white flex items-center justify-center gap-1",onClick:()=>I(S.id,"demand"),children:[a.jsx(N,{name:"ShieldAlert",size:12})," "]}),a.jsxs("button",{className:`flex-1 px-2 py-1.5 rounded text-white flex items-center justify-center gap-1 ${S.isAtWar?"bg-purple-600 hover:bg-purple-500":"bg-red-600 hover:bg-red-500"}`,onClick:()=>I(S.id,S?.isAtWar===!0?"peace":"declare_war"),children:[a.jsx(N,{name:S?.isAtWar===!0?"Flag":"Swords",size:12}),S?.isAtWar===!0?"":""]})]})]}),a.jsxs("div",{className:"bg-gray-800/60 p-2 rounded-lg border border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("h3",{className:"text-xs font-bold text-white flex items-center gap-1",children:[a.jsx(N,{name:"Route",size:12,className:"text-blue-300"}),""]}),a.jsxs("div",{className:"text-[10px] text-gray-400",children:[a.jsx("div",{children:""}),a.jsxs("div",{className:"mt-0.5",children:[a.jsxs("span",{className:B<se?"text-yellow-400":"text-blue-400",children:[": ",B,"/",se]}),a.jsx("span",{className:"text-gray-500 mx-1",children:"|"}),a.jsxs("span",{className:se>=Ce?"text-red-400":"text-green-400",children:[": ",Ce]}),a.jsx("span",{className:"text-gray-500 mx-1",children:"|"}),a.jsxs("span",{className:"text-amber-400",children:[": ",oe,"/",Ce]})]})]})]}),B<se&&a.jsxs("div",{className:"mb-2 p-2 bg-yellow-900/30 border border-yellow-600/30 rounded text-[10px] text-yellow-300",children:[a.jsx(N,{name:"AlertTriangle",size:12,className:"inline mr-1"})," ",se-B," "]}),se>=Ce&&a.jsxs("div",{className:"mb-2 p-2 bg-red-900/30 border border-red-600/30 rounded text-[10px] text-red-300",children:[a.jsx(N,{name:"AlertCircle",size:12,className:"inline mr-1"}),""]}),a.jsx("div",{className:"space-y-1",children:M.map(([G,me])=>{if(!S)return null;const b=ge(G),O=mr(G,S,p),R=O-b,ne=dr(G,S,p)||{},L=Math.floor(ne.shortageAmount||0),u=Math.floor(ne.surplusAmount||0);if(!((me.unlockEpoch??0)<=c))return null;const $=S?.isAtWar||!1,J=de(S.id,G,"export"),le=de(S.id,G,"import");return a.jsxs("div",{className:"bg-gray-900/40 rounded p-1.5 border border-gray-700/50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(N,{name:me.icon||"Box",size:12,className:me.color||"text-gray-400"}),a.jsx("span",{className:"text-xs font-semibold text-white",children:me.name})]}),a.jsxs("div",{className:"flex items-center gap-1 text-[10px]",children:[ne.isShortage&&a.jsxs("span",{className:"text-red-400 font-mono",children:["",L]}),ne.isSurplus&&a.jsxs("span",{className:"text-green-400 font-mono",children:["",u]})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[a.jsxs("div",{className:"flex gap-2 text-gray-400",children:[a.jsxs("span",{children:[": ",a.jsx("span",{className:"text-white font-mono",children:b.toFixed(1)})]}),a.jsxs("span",{children:[": ",a.jsx("span",{className:`font-mono ${R>0?"text-green-300":"text-red-300"}`,children:O.toFixed(1)})]})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsxs("button",{className:`px-1.5 py-0.5 rounded text-white flex items-center gap-0.5 ${J?"bg-red-600 hover:bg-red-500":$?"bg-gray-600 cursor-not-allowed":"bg-teal-600 hover:bg-teal-500"}`,onClick:()=>Q(G,"export"),disabled:$&&!J,title:$&&!J?"":"",children:[a.jsx(N,{name:J?"X":"ArrowUpRight",size:10}),J?"":""]}),a.jsxs("button",{className:`px-1.5 py-0.5 rounded text-white flex items-center gap-0.5 ${le?"bg-red-600 hover:bg-red-500":$?"bg-gray-600 cursor-not-allowed":"bg-purple-600 hover:bg-purple-500"}`,onClick:()=>Q(G,"import"),disabled:$&&!le,title:$&&!le?"":"",children:[a.jsx(N,{name:le?"X":"ArrowDownLeft",size:10}),le?"":""]})]})]})]},G)})})]}),S.peaceTreatyUntil&&p<S.peaceTreatyUntil&&a.jsxs("div",{className:"bg-green-900/20 p-2 rounded-lg border border-green-600/30 mb-2",children:[a.jsxs("h3",{className:"text-xs font-bold text-white flex items-center gap-1 mb-1.5",children:[a.jsx(N,{name:"HandHeart",size:12,className:"text-green-300"}),""]}),a.jsxs("p",{className:"text-[10px] text-gray-300",children:[": ",a.jsx("span",{className:"text-green-300 font-bold",children:S.peaceTreatyUntil-p})]}),S.installmentPayment&&a.jsxs("p",{className:"text-[10px] text-gray-300 mt-1",children:[":  ",a.jsx("span",{className:"text-yellow-300 font-bold",children:S.installmentPayment.amount}),"   ",S.installmentPayment.remainingDays," "]})]}),S.isAtWar&&a.jsxs("div",{className:"bg-red-900/20 p-2 rounded-lg border border-red-600/30",children:[a.jsxs("h3",{className:"text-xs font-bold text-white flex items-center gap-1 mb-1.5",children:[a.jsx(N,{name:"AlertTriangle",size:12,className:"text-red-300"}),""]}),a.jsx("div",{className:"flex items-center justify-between text-[10px] mb-1.5",children:a.jsxs("div",{className:"flex gap-2 text-gray-300",children:[a.jsxs("span",{children:[": ",a.jsx("span",{className:"text-red-300 font-bold",children:S.warScore?.toFixed(0)||0})]}),a.jsxs("span",{children:[": ",a.jsx("span",{className:"text-white font-bold",children:S.warDuration||0})]}),a.jsxs("span",{children:[": ",a.jsx("span",{className:"text-white font-bold",children:S.enemyLosses||0})]}),a.jsxs("span",{children:[": ",a.jsxs("span",{className:`font-bold ${(S.militaryStrength??1)>.7?"text-green-300":(S.militaryStrength??1)>.4?"text-yellow-300":"text-red-300"}`,children:[Math.floor((S.militaryStrength??1)*100),"%"]})]})]})}),a.jsx("p",{className:"text-[10px] text-gray-400 mb-1.5",children:ve(S)}),a.jsx("button",{className:"w-full px-2 py-1.5 bg-red-600 hover:bg-red-500 text-white rounded text-xs font-semibold",onClick:()=>I(S.id,"peace"),children:""})]}),g&&g.nationId===S.id&&a.jsxs("div",{className:"bg-yellow-900/20 p-2 rounded-lg border border-yellow-600/30 mt-2",children:[a.jsxs("h3",{className:"text-xs font-bold text-white flex items-center gap-1 mb-1.5",children:[a.jsx(N,{name:"Coins",size:12,className:"text-yellow-300"}),""]}),a.jsxs("p",{className:"text-[10px] text-gray-300",children:[": ",a.jsx("span",{className:"text-yellow-300 font-bold",children:g.amount})," "]}),a.jsxs("p",{className:"text-[10px] text-gray-300 mt-1",children:[": ",a.jsx("span",{className:"text-white font-bold",children:g.remainingDays})]}),a.jsxs("p",{className:"text-[10px] text-gray-300 mt-1",children:[": ",a.jsx("span",{className:"text-green-300 font-bold",children:g.paidAmount})," /",a.jsxs("span",{className:"text-white font-bold",children:[" ",g.totalAmount]})," "]})]})]}):a.jsx("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700 text-sm text-gray-400",children:""})})]})]})},Qb=({result:l,onClose:c})=>{const[m,o]=V.useState(!1);if(!l)return null;const p=()=>{o(!0),setTimeout(()=>{c()},300)},j=m?"animate-sheet-out":"animate-sheet-in";return On.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end lg:items-center justify-center p-2",children:[a.jsx("div",{className:"absolute inset-0 bg-ancient-ink/90 backdrop-blur-sm animate-fade-in",onClick:p}),a.jsxs("div",{className:`relative w-full max-w-2xl glass-monument border-2 border-ancient-gold/40 rounded-t-2xl lg:rounded-2xl shadow-monument flex flex-col max-h-[90vh] overflow-hidden ${j} lg:animate-slide-up`,children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-ancient-ink/80 via-ancient-stone/20 to-ancient-ink/70 opacity-70"}),a.jsx("div",{className:"absolute inset-0 opacity-[0.04] pointer-events-none",children:a.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[a.jsxs("pattern",{id:"battle-result-pattern",x:"0",y:"0",width:"80",height:"80",patternUnits:"userSpaceOnUse",children:[a.jsx("circle",{cx:"10",cy:"10",r:"1",fill:"currentColor",className:"text-ancient-gold/50"}),a.jsx("circle",{cx:"70",cy:"70",r:"1",fill:"currentColor",className:"text-ancient-gold/30"}),a.jsx("path",{d:"M0 0 L80 0 L80 80",stroke:"currentColor",strokeWidth:"0.4",className:"text-ancient-gold/10",fill:"none"})]}),a.jsx("rect",{width:"100%",height:"100%",fill:"url(#battle-result-pattern)"})]})}),a.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[a.jsxs("div",{className:`flex-shrink-0 p-4 border-b border-ancient-gold/20 ${l.victory?"bg-gradient-to-r from-emerald-900/40 to-blue-900/30":"bg-gradient-to-r from-red-900/50 to-ancient-ink/60"}`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-ancient-ink/60 border border-ancient-gold/30 flex items-center justify-center flex-shrink-0 shadow-inner",children:a.jsx(N,{name:l.victory?"Trophy":"Skull",size:26,className:l.victory?"text-ancient-gold":"text-red-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h2",{className:"text-lg font-bold text-ancient leading-tight flex items-center gap-2",children:[l.victory?"?? ?????":"?? ????...",typeof l.score=="number"&&a.jsxs("span",{className:"px-2 py-0.5 text-[10px] rounded-full border border-ancient-gold/30 text-ancient-parchment bg-ancient-ink/40",children:["?? ",l.score.toFixed(0)]})]}),a.jsxs("p",{className:"text-[11px] text-ancient-parchment opacity-80 leading-tight truncate",children:[l.missionName||"????"," ",l.missionDifficulty&&`????${l.missionDifficulty}?`,l.nationName&&` ? ???${l.nationName}`]})]}),a.jsx("button",{onClick:p,className:"p-2 rounded-full hover:bg-ancient-gold/10 transition-colors flex-shrink-0 text-ancient-stone",children:a.jsx(N,{name:"X",size:18})})]}),l.missionDesc&&a.jsx("p",{className:"text-[11px] text-ancient-stone mt-2 leading-snug",children:l.missionDesc})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[(!l.isRaid||l.isRaid&&l.ourPower>0)&&a.jsxs("div",{className:"glass-ancient rounded-xl border border-ancient-gold/20 p-3 shadow-ancient",children:[a.jsxs("h3",{className:"text-[11px] font-bold mb-2 flex items-center gap-1 text-ancient-parchment",children:[a.jsx(N,{name:"BarChart",size:14,className:"text-ancient-gold"}),""]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"bg-ancient-ink/50 border border-ancient-gold/10 rounded-lg p-2",children:[a.jsx("p",{className:"text-[10px] text-ancient-stone mb-1 leading-none",children:""}),a.jsx("p",{className:"text-base font-bold text-ancient font-mono leading-none",children:l.ourPower?.toFixed(0)||0})]}),a.jsxs("div",{className:"bg-ancient-ink/50 border border-ancient-gold/10 rounded-lg p-2",children:[a.jsx("p",{className:"text-[10px] text-ancient-stone mb-1 leading-none",children:""}),a.jsx("p",{className:"text-base font-bold text-red-400 font-mono leading-none",children:l.enemyPower?.toFixed(0)||0})]}),a.jsxs("div",{className:"bg-ancient-ink/50 border border-ancient-gold/10 rounded-lg p-2",children:[a.jsx("p",{className:"text-[10px] text-ancient-stone mb-1 leading-none",children:""}),a.jsxs("p",{className:`text-base font-bold font-mono leading-none ${l.powerRatio>1?"text-green-400":"text-red-400"}`,children:[l.powerRatio?.toFixed(2)||0,"x"]})]}),a.jsxs("div",{className:"bg-ancient-ink/50 border border-ancient-gold/10 rounded-lg p-2",children:[a.jsx("p",{className:"text-[10px] text-ancient-stone mb-1 leading-none",children:""}),a.jsx("p",{className:"text-base font-bold text-purple-400 font-mono leading-none",children:l.score?.toFixed(0)||0})]})]})]}),(!l.isRaid||l.isRaid&&Object.keys(l.losses||l.defenderLosses||{}).length>0)&&a.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[a.jsxs("h3",{className:"text-[10px] font-bold mb-1.5 flex items-center gap-1 text-white",children:[a.jsx(N,{name:"Heart",size:12,className:"text-red-400"}),""]}),Object.keys(l.losses||l.defenderLosses||l.attackerLosses||{}).length>0?a.jsx("div",{className:"space-y-1",children:Object.entries(l.losses||l.defenderLosses||l.attackerLosses||{}).map(([v,w])=>{const g=Da[v];return!g||w===0?null:a.jsxs("div",{className:"flex items-center justify-between bg-red-900/20 border border-red-600/30 p-1.5 rounded",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(N,{name:"User",size:12,className:"text-red-400"}),a.jsx("span",{className:"text-[10px] text-white leading-none",children:g.name})]}),a.jsxs("span",{className:"text-[10px] font-bold text-red-400 font-mono leading-none",children:["-",w]})]},v)})}):a.jsxs("div",{className:"text-center py-2 bg-green-900/20 border border-green-600/30 rounded",children:[a.jsx(N,{name:"Check",size:16,className:"text-green-400 mx-auto mb-1"}),a.jsx("p",{className:"text-[10px] text-green-300 leading-tight",children:""})]})]}),(l.enemyLosses||l.attackerLosses)&&Object.keys(l.enemyLosses||l.attackerLosses||{}).length>0&&a.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[a.jsxs("h3",{className:"text-[10px] font-bold mb-1.5 flex items-center gap-1 text-white",children:[a.jsx(N,{name:"Skull",size:12,className:"text-gray-400"}),""]}),a.jsx("div",{className:"space-y-1",children:Object.entries(l.enemyLosses||l.attackerLosses||{}).map(([v,w])=>{const g=Da[v];return!g||w===0?null:a.jsxs("div",{className:"flex items-center justify-between bg-gray-800/50 p-1.5 rounded",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(N,{name:"User",size:12,className:"text-gray-400"}),a.jsx("span",{className:"text-[10px] text-white leading-none",children:g?.name||v})]}),a.jsxs("span",{className:"text-[10px] font-bold text-gray-400 font-mono leading-none",children:["-",w]})]},v)})})]}),l.isRaid&&(l.foodLoss>0||l.silverLoss>0)&&a.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[a.jsxs("h3",{className:"text-[10px] font-bold mb-1.5 flex items-center gap-1 text-white",children:[a.jsx(N,{name:"AlertTriangle",size:12,className:"text-red-400"}),""]}),a.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[l.foodLoss>0&&a.jsxs("div",{className:"flex items-center justify-between bg-red-900/20 border border-red-600/30 p-1.5 rounded",children:[a.jsx("span",{className:"text-[10px] text-gray-300 leading-none",children:""}),a.jsxs("span",{className:"text-[10px] font-bold text-red-400 font-mono leading-none",children:["-",l.foodLoss]})]}),l.silverLoss>0&&a.jsxs("div",{className:"flex items-center justify-between bg-red-900/20 border border-red-600/30 p-1.5 rounded",children:[a.jsx("span",{className:"text-[10px] text-gray-300 leading-none",children:""}),a.jsxs("span",{className:"text-[10px] font-bold text-red-400 font-mono leading-none",children:["-",l.silverLoss]})]})]})]}),l.isRaid&&l.popLoss>0&&a.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[a.jsxs("h3",{className:"text-[10px] font-bold mb-1.5 flex items-center gap-1 text-white",children:[a.jsx(N,{name:"Users",size:12,className:"text-red-400"}),""]}),a.jsx("div",{className:"bg-red-900/20 border border-red-600/30 p-1.5 rounded",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[10px] text-gray-300 leading-none",children:""}),a.jsxs("span",{className:"text-[10px] font-bold text-red-400 font-mono leading-none",children:["-",l.popLoss]})]})})]}),l.victory&&l.resourcesGained&&Object.keys(l.resourcesGained).length>0&&a.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[a.jsxs("h3",{className:"text-[10px] font-bold mb-1.5 flex items-center gap-1 text-white",children:[a.jsx(N,{name:"Gift",size:12,className:"text-yellow-400"}),""]}),a.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:Object.entries(l.resourcesGained).map(([v,w])=>a.jsxs("div",{className:"flex items-center justify-between bg-yellow-900/20 border border-yellow-600/30 p-1.5 rounded",children:[a.jsx("span",{className:"text-[10px] text-gray-300 leading-none",children:Me[v]?.name||v}),a.jsxs("span",{className:"text-[10px] font-bold text-yellow-400 font-mono leading-none",children:["+",w]})]},v))})]})]}),a.jsx("div",{className:"flex-shrink-0 p-3 border-t border-gray-700 bg-gray-800/50",children:a.jsx("button",{onClick:p,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-bold transition-colors",children:""})})]})]})]}),document.body)},V0=l=>Number.isFinite(l)?Math.abs(l)>=1e3?l.toFixed(0):Math.abs(l)>=100?l.toFixed(1):Math.abs(l)>=1?l.toFixed(2):l.toFixed(3):"--",sp=(l,{color:c,label:m})=>{const o=Array.isArray(l)?l.filter(Number.isFinite):[],p={min:o.length?Math.min(...o):0,max:o.length?Math.max(...o):0,current:o.length?o[o.length-1]:0};return{color:c,label:m,data:o,stats:p}},yi=({data:l=[],data2:c=[],color:m="#34d399",color2:o="#f87171",label:p="",label2:j="",height:v=128})=>{const w=sp(l,{color:m,label:p}),g=sp(c,{color:o,label:j}),y=w.data.length>0,k=g.data.length>0;if(!y&&!k)return a.jsx("div",{className:"flex h-32 flex-col items-center justify-center text-xs text-gray-500",children:a.jsx("p",{children:""})});const _=320,E=10,U=[...w.data,...g.data],D=Math.min(...U),M=Math.max(...U),A=(M-D)*.1||1,S=D-A,ie=M+A,ae=Math.max(ie-S,1),ce=Math.max(w.data.length,g.data.length,2),Ce=ce>1?(_-E*2)/(ce-1):0,oe=I=>{if(!I.length)return"";const ge=ce-I.length;return I.map((ve,G)=>{const me=E+(ge+G)*Ce,b=(ve-S)/ae,O=v-E-b*(v-E*2);return`${me.toFixed(1)},${O.toFixed(1)}`}).join(" ")},se=oe(w.data),B=oe(g.data),de=({color:I,text:ge})=>a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[a.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:I}}),a.jsx("span",{children:ge})]}),Q=({title:I,stats:ge})=>a.jsxs("div",{className:"text-[11px] text-gray-400",children:[a.jsx("p",{className:"text-xs text-gray-300",children:I}),a.jsxs("div",{className:"mt-1 flex gap-4 font-mono",children:[a.jsxs("span",{children:["Max ",V0(ge.max)]}),a.jsxs("span",{children:["Min ",V0(ge.min)]}),a.jsxs("span",{children:["Now ",V0(ge.current)]})]})]});return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex flex-wrap gap-4",children:[y&&a.jsx(de,{color:w.color,text:w.label}),k&&a.jsx(de,{color:g.color,text:g.label})]}),a.jsx("div",{className:"relative h-32 w-full overflow-hidden rounded-xl border border-gray-800/60 bg-gray-950/50",children:a.jsxs("svg",{viewBox:`0 0 ${_} ${v}`,preserveAspectRatio:"none",className:"h-full w-full",children:[[.25,.5,.75].map(I=>{const ge=v-E-I*(v-E*2);return a.jsx("line",{x1:E,x2:_-E,y1:ge,y2:ge,stroke:"rgba(255,255,255,0.05)",strokeWidth:"1"},I)}),k&&a.jsx("polyline",{points:B,stroke:g.color,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.7"}),y&&a.jsx("polyline",{points:se,stroke:w.color,strokeWidth:"2.5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})]})}),y&&a.jsx(Q,{title:w.label,stats:w.stats}),k&&a.jsx(Q,{title:g.label,stats:g.stats})]})},Fb=({popStructure:l,classApproval:c,classInfluence:m,activeBuffs:o,activeDebuffs:p,stability:j,onClose:v})=>a.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[100] p-4",children:a.jsxs("div",{className:"bg-gray-800 rounded-lg border-2 border-gray-700 max-w-4xl w-full max-h-[90vh] flex flex-col",children:[a.jsx("div",{className:"p-4 md:p-6 border-b border-gray-700",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:""}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx(N,{name:"Heart",size:16,className:`flex-shrink-0 ${j>=70?"text-green-400":j>=40?"text-yellow-400":"text-red-400 animate-pulse"}`}),a.jsx("span",{className:"text-sm text-gray-300",children:":"}),a.jsxs("span",{className:`text-sm font-bold ${j>=70?"text-green-400":j>=40?"text-yellow-400":"text-red-400"}`,children:[Math.floor(j),"%"]})]})]}),a.jsx("button",{onClick:v,className:"p-2 hover:bg-gray-700 rounded-lg flex-shrink-0",children:a.jsx(N,{name:"X",size:20,className:"text-gray-400"})})]})}),a.jsx("div",{className:"p-6 overflow-y-auto",children:a.jsxs("table",{className:"w-full text-left table-auto",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-600",children:[a.jsx("th",{className:"p-2 text-sm font-semibold text-gray-300",children:""}),a.jsx("th",{className:"p-2 text-sm font-semibold text-gray-300",children:""}),a.jsx("th",{className:"p-2 text-sm font-semibold text-gray-300",children:""}),a.jsx("th",{className:"p-2 text-sm font-semibold text-gray-300",children:""}),a.jsx("th",{className:"p-2 text-sm font-semibold text-gray-300",children:""})]})}),a.jsx("tbody",{children:Object.keys(Fe).map(w=>{const g=Fe[w],y=l[w]||0;if(y===0)return null;const k=c[w]||50,_=m[w]||0,E=o.filter(D=>D.class===w||D.source===w),U=p.filter(D=>D.class===w||D.source===w);return a.jsxs("tr",{className:"border-b border-gray-700 hover:bg-gray-700/50",children:[a.jsxs("td",{className:"p-2 text-sm text-white flex items-center gap-2",children:[a.jsx(N,{name:g.icon,size:16})," ",g.name]}),a.jsx("td",{className:"p-2 text-sm text-gray-300",children:y}),a.jsx("td",{className:"p-2 text-sm",children:a.jsxs("span",{className:k>=70?"text-green-400":k>=40?"text-yellow-400":"text-red-400",children:[k.toFixed(0),"%"]})}),a.jsx("td",{className:"p-2 text-sm text-purple-400",children:_.toFixed(1)}),a.jsxs("td",{className:"p-2 text-xs space-y-1",children:[E.map((D,M)=>{const A=dl(D);return a.jsxs("div",{className:"text-green-400",children:[a.jsx("span",{className:"font-semibold",children:D.desc||""}),A.length>0&&a.jsxs("span",{className:"text-gray-300 ml-2",children:["(",A.join(""),")"]})]},M)}),U.map((D,M)=>{const A=dl(D);return a.jsxs("div",{className:"text-red-400",children:[a.jsx("span",{className:"font-semibold",children:D.desc||""}),A.length>0&&a.jsxs("span",{className:"text-gray-300 ml-2",children:["(",A.join(""),")"]})]},M)})]})]},w)})})]})}),a.jsx("div",{className:"p-6 border-t border-gray-700 bg-gray-800/50",children:a.jsx("button",{onClick:v,className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-bold transition-colors",children:""})})]})}),np=[{id:"overview",label:"",description:""},{id:"economy",label:"",description:""},{id:"needs",label:"",description:""}],Jb=({stratumKey:l,popStructure:c,classApproval:m,classInfluence:o,classWealth:p,classWealthHistory:j={},totalInfluence:v,totalWealth:w,activeBuffs:g,activeDebuffs:y,epoch:k=0,techsUnlocked:_=[],history:E={},stability:U=50,onClose:D})=>{const[M,A]=V.useState("overview");if(!l||l==="all")return a.jsx(Fb,{popStructure:c,classApproval:m,classInfluence:o,activeBuffs:g,activeDebuffs:y,stability:U,onClose:D});const S=Fe[l];if(!S)return null;const ie=np.find(b=>b.id===M),ae=c[l]||0,ce=m[l]||50,Ce=o[l]||0,oe=p[l]||0,se=Object.values(c).reduce((b,O)=>b+O,0),B=se>0?ae/se*100:0,de=v>0?Ce/v*100:0,Q=w>0?oe/w*100:0,I=g.filter(b=>b.class===l||b.source===l),ge=y.filter(b=>b.class===l||b.source===l),ve=j[l]||[],G=E?.class?.[l]||{pop:[],income:[],expense:[]},me=(b=[])=>{if(!b||b.length<=1)return null;const O=260,R=90,ne=Math.max(...b),L=Math.min(...b),u=ne-L||1,C=b.map(($,J)=>{const le=b.length>1?J/(b.length-1)*O:O,De=R-($-L)/u*R;return`${le},${De}`}).join(" ");return a.jsx("svg",{viewBox:`0 0 ${O} ${R}`,preserveAspectRatio:"none",className:"w-full h-24 text-emerald-300 stroke-current fill-none",children:a.jsx("polyline",{points:C,strokeWidth:"2"})})};return a.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[100] p-4",children:a.jsxs("div",{className:"bg-gray-800 rounded-lg border-2 border-gray-700 max-w-3xl w-full max-h-[90vh] flex flex-col overflow-hidden",children:[a.jsx("div",{className:"p-4 md:p-6 border-b border-gray-700 bg-gradient-to-r from-purple-900/50 to-blue-900/50",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-start gap-2 md:gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:"p-2 md:p-3 bg-gray-700 rounded-lg flex-shrink-0",children:a.jsx(N,{name:S.icon,size:24,className:"text-blue-400 md:w-8 md:h-8"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-lg md:text-2xl font-bold text-white",children:S.name}),a.jsx("p",{className:"text-xs md:text-sm text-gray-300 mt-1",children:S.description}),a.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 mt-2",children:[a.jsx(N,{name:"Heart",size:14,className:`flex-shrink-0 ${U>=70?"text-green-400":U>=40?"text-yellow-400":"text-red-400 animate-pulse"}`}),a.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:":"}),a.jsxs("span",{className:`text-xs md:text-sm font-bold ${U>=70?"text-green-400":U>=40?"text-yellow-400":"text-red-400"}`,children:[Math.floor(U),"%"]})]})]})]}),a.jsx("button",{onClick:D,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors flex-shrink-0",children:a.jsx(N,{name:"X",size:20,className:"text-gray-400 md:w-6 md:h-6"})})]})}),a.jsx("div",{className:"border-b border-gray-700 bg-gray-800/60 px-6 pt-4",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-3 pb-4",children:[np.map(b=>a.jsx("button",{type:"button",className:`rounded-full px-4 py-1.5 text-sm font-semibold ${b.id===M?"bg-indigo-500/20 text-indigo-200":"text-gray-400 hover:text-white"}`,onClick:()=>A(b.id),children:b.label},b.id)),ie?.description&&a.jsx("span",{className:"text-sm text-gray-500",children:ie.description})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[M==="overview"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[a.jsx(N,{name:"BarChart",size:16,className:"text-blue-400"}),""]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),a.jsx("p",{className:"text-lg font-bold text-white",children:ae}),a.jsxs("p",{className:"text-xs text-blue-400 mt-1",children:[B.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),a.jsxs("p",{className:`text-lg font-bold ${ce>=70?"text-green-400":ce>=40?"text-yellow-400":"text-red-400"}`,children:[ce.toFixed(0),"%"]})]}),a.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),a.jsx("p",{className:"text-lg font-bold text-purple-400",children:Ce.toFixed(1)}),a.jsxs("p",{className:"text-xs text-purple-400 mt-1",children:[de.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),a.jsx("p",{className:"text-lg font-bold text-yellow-400",children:oe.toFixed(0)}),a.jsxs("p",{className:"text-xs text-yellow-400 mt-1",children:[Q.toFixed(1),"%"]})]})]})]}),(I.length>0||ge.length>0)&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[a.jsx(N,{name:"Zap",size:16,className:"text-yellow-400"}),""]}),a.jsxs("div",{className:"space-y-2",children:[I.map((b,O)=>{const R=dl(b);return a.jsxs("div",{className:"flex items-start gap-2 bg-green-900/20 border border-green-600/30 p-3 rounded",children:[a.jsx(N,{name:"TrendingUp",size:14,className:"text-green-400 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-semibold text-green-300",children:b.desc||b.name||""}),R.length>0&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:R.join("")})]})]},`buff-${O}`)}),ge.map((b,O)=>{const R=dl(b);return a.jsxs("div",{className:"flex items-start gap-2 bg-red-900/20 border border-red-600/30 p-3 rounded",children:[a.jsx(N,{name:"TrendingDown",size:14,className:"text-red-400 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-semibold text-red-300",children:b.desc||b.name||""}),R.length>0&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:R.join("")})]})]},`debuff-${O}`)})]})]}),a.jsx("div",{className:"bg-blue-900/20 border border-blue-500/30 p-4 rounded",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(N,{name:"Lightbulb",size:20,className:"text-blue-400 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-2",children:""}),a.jsxs("ul",{className:"space-y-1 text-xs text-gray-300",children:[ce<40&&a.jsx("li",{children:" "}),Ce>v*.3&&a.jsx("li",{children:" "}),ae>se*.4&&a.jsx("li",{children:" "}),ce>=70&&a.jsx("li",{children:" "})]})]})]})})]}),M==="economy"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[a.jsx(N,{name:"Activity",size:16,className:"text-cyan-400"}),""]}),a.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[a.jsxs("div",{className:"bg-gray-700/40 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-2",children:""}),a.jsx(yi,{data:G.pop,color:"#38bdf8",label:""})]}),a.jsxs("div",{className:"bg-gray-700/40 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-2",children:""}),a.jsx(yi,{data:G.income,color:"#4ade80",label:""})]}),a.jsxs("div",{className:"bg-gray-700/40 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-2",children:""}),a.jsx(yi,{data:G.expense,color:"#f87171",label:""})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[a.jsx(N,{name:"TrendingUp",size:16,className:"text-emerald-400"}),""]}),a.jsx("div",{className:"bg-gray-700/40 p-3 rounded",children:me(ve)||a.jsx("p",{className:"text-xs text-gray-500",children:""})})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[a.jsx(N,{name:"Star",size:16,className:"text-yellow-400"}),""]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),a.jsxs("p",{className:"text-sm text-white",children:[S.wealthWeight,"x"]})]}),a.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),a.jsx("p",{className:"text-sm text-white",children:S.influenceBase})]})]})]})]}),M==="needs"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[a.jsx(N,{name:"Package",size:16,className:"text-green-400"}),""]}),a.jsx("div",{className:"space-y-2",children:(()=>{const O=Object.entries(S.needs||{}).filter(([R])=>ur(R,k,_));return O.length>0?O.map(([R,ne])=>{const L=Me[R]?.name||R;return a.jsxs("div",{className:"flex items-center justify-between bg-gray-700/50 p-3 rounded",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(N,{name:"Package",size:14,className:"text-blue-400"}),a.jsx("span",{className:"text-sm text-white",children:L})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-bold text-white",children:[ne,"//"]}),a.jsxs("p",{className:"text-xs text-gray-400",children:[": ",(ne*ae).toFixed(1),"/"]})]})]},R)}):a.jsx("p",{className:"text-xs text-gray-500 italic",children:""})})()})]}),S.satisfiedEffects&&S.satisfiedEffects.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[a.jsx(N,{name:"ThumbsUp",size:16,className:"text-green-400"}),""]}),a.jsx("div",{className:"space-y-2",children:S.satisfiedEffects.map((b,O)=>a.jsxs("div",{className:"flex items-start gap-2 bg-green-900/20 border border-green-600/30 p-3 rounded",children:[a.jsx(N,{name:"Plus",size:14,className:"text-green-400 flex-shrink-0 mt-0.5"}),a.jsx("p",{className:"text-sm text-green-300",children:b})]},O))})]}),S.dissatisfiedEffects&&S.dissatisfiedEffects.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[a.jsx(N,{name:"ThumbsDown",size:16,className:"text-red-400"}),""]}),a.jsx("div",{className:"space-y-2",children:S.dissatisfiedEffects.map((b,O)=>a.jsxs("div",{className:"flex items-start gap-2 bg-red-900/20 border border-red-600/30 p-3 rounded",children:[a.jsx(N,{name:"Minus",size:14,className:"text-red-400 flex-shrink-0 mt-0.5"}),a.jsx("p",{className:"text-sm text-red-300",children:b})]},O))})]})]})]}),a.jsx("div",{className:"p-6 border-t border-gray-700 bg-gray-800/50",children:a.jsx("button",{onClick:D,className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-bold transition-colors",children:""})})]})})},Za=l=>!Number.isFinite(l)||l===0?"0":Math.abs(l)>=10?l.toFixed(1):Math.abs(l)>=1?l.toFixed(2):l.toFixed(3),lp=l=>l?Array.isArray(l)?l:[l]:[],ip=({series:l=[],height:c=220})=>{const m=l.map(D=>({...D,data:Array.isArray(D.data)?D.data:[],color:D.color||"#60a5fa"})).filter(D=>D.data.length>0),o=m.flatMap(D=>D.data.filter(M=>Number.isFinite(M)));if(!m.length||!o.length)return a.jsx("div",{className:"flex h-48 items-center justify-center text-sm text-gray-500",children:""});let p=Math.min(...o),j=Math.max(...o);if(j===p){const D=Math.abs(j)*.1||1;j+=D,p-=D}const v=Math.max(j-p,1),w=640,g=40,y=Math.max(...m.map(D=>D.data.length)),k=y>1?(w-g*2)/(y-1):0,_=4,E=Array.from({length:_+1},(D,M)=>({value:p+v/_*M,y:c-g-(p+v/_*M-p)/v*(c-g*2)})),U=D=>{const M=y-D.length,A=D.map((ie,ae)=>{if(!Number.isFinite(ie))return null;const ce=M+ae,Ce=g+ce*k,oe=(ie-p)/v,se=c-g-oe*(c-g*2);return{x:Ce,y:se}}).filter(Boolean);return A.length?{pathD:A.map((ie,ae)=>`${ae===0?"M":"L"}${ie.x.toFixed(2)} ${ie.y.toFixed(2)}`).join(" "),coords:A}:null};return a.jsxs("div",{className:"w-full",children:[a.jsx("div",{className:"mb-4 flex flex-wrap gap-4 text-sm",children:m.map(D=>a.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[a.jsx("span",{className:"h-3 w-3 rounded-full",style:{backgroundColor:D.color}}),D.label]},D.label))}),a.jsx("div",{className:"relative h-56 w-full overflow-hidden rounded-2xl bg-gray-950/60",children:a.jsxs("svg",{viewBox:`0 0 ${w} ${c}`,preserveAspectRatio:"none",className:"h-full w-full",children:[E.map(({value:D,y:M},A)=>a.jsxs("g",{children:[a.jsx("line",{x1:g,x2:w-g/2,y1:M,y2:M,stroke:"rgba(255,255,255,0.08)",strokeWidth:"1"}),a.jsx("text",{x:g-10,y:M+4,fill:"rgba(255,255,255,0.45)",fontSize:"10",textAnchor:"end",children:D.toFixed(1)})]},`grid-${A}`)),a.jsx("line",{x1:g,x2:w-g/2,y1:c-g,y2:c-g,stroke:"rgba(255,255,255,0.15)",strokeWidth:"1"}),m.map(D=>{const M=U(D.data);return M?a.jsxs("g",{children:[a.jsx("path",{d:M.pathD,stroke:D.color,strokeWidth:"2.5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),M.coords.map((A,S)=>a.jsx("circle",{cx:A.x,cy:A.y,r:"3",fill:D.color,stroke:"rgba(15,23,42,0.8)",strokeWidth:"1"},`${D.label}-${S}`))]},`series-${D.label}`):null})]})})]})},G0=({resourceKey:l,label:c,subLabel:m,highlight:o=!1})=>{const p=l?Me[l]:null,j=p?.icon||"Package",v=p?.color||"text-indigo-300";return a.jsxs("div",{className:`flex min-w-[96px] flex-col items-center rounded-2xl border px-4 py-3 text-center ${o?"border-emerald-400/80 bg-emerald-400/10":"border-gray-800/80 bg-gray-900/70"}`,children:[a.jsx("div",{className:"rounded-full border border-gray-800/60 bg-gray-950/70 p-2",children:a.jsx(N,{name:j,size:20,className:v})}),a.jsx("p",{className:"mt-2 text-sm font-semibold text-white",children:c||p?.name||""}),m&&a.jsx("p",{className:"text-xs text-gray-400",children:m})]})},Kb=l=>l?Object.values(uh).map(c=>{let m=!1;const o=new Set,p=new Set;return c.stages.forEach(j=>{const v=lp(j.input),w=lp(j.output);w.includes(l)&&(m=!0,v.forEach(g=>{Me[g]&&o.add(g)})),v.includes(l)&&(m=!0,w.forEach(g=>{Me[g]&&g!==l&&p.add(g)}))}),m?{id:c.id,name:c.name,desc:c.desc,inputs:Array.from(o),outputs:Array.from(p)}:null}).filter(Boolean):[],W0=[{id:"market",label:"",description:""},{id:"analysis",label:"",description:""},{id:"chain",label:"",description:""}],Ib=({resourceKey:l,resources:c={},market:m,buildings:o={},popStructure:p={},army:j={},history:v={},onClose:w,taxPolicies:g,onUpdateTaxPolicies:y})=>{const[k,_]=V.useState(W0[0].id),[E,U]=V.useState(!1),D=Me[l],M=l==="silver",A=V.useMemo(()=>{const K=m?.priceHistory?.[l];return K?[...K]:[]},[m,l]),[S,ie]=V.useState(null),ae=g?.resourceTaxRates?.[l]??0,ce=K=>{ie(K)},Ce=()=>{if(S===null||!y)return;const K=parseFloat(S),xt=(Number.isNaN(K)?0:K)/100;y(P=>({...P,resourceTaxRates:{...P?.resourceTaxRates||{},[l]:xt}})),ie(null)},oe=V.useMemo(()=>{const K=m?.supplyHistory?.[l];return K?[...K]:[]},[m,l]),se=V.useMemo(()=>{const K=m?.demandHistory?.[l];return K?[...K]:[]},[m,l]),B=V.useMemo(()=>Kb(l),[l]),{stratumDemand:de,buildingDemand:Q,armyDemand:I,buildingSupply:ge}=V.useMemo(()=>{if(!D)return{stratumDemand:[],buildingDemand:[],armyDemand:[],buildingSupply:[]};const K=Object.entries(Fe).reduce((je,[Ae,Se])=>{const Ye=Se.needs?.[l]||0,bt=p[Ae]||0;return!Ye||!bt||je.push({key:Ae,name:Se.name,icon:Se.icon,amount:Ye*bt,formula:`${bt}  ${Ye}`}),je},[]),We=is.reduce((je,Ae)=>{const Se=Ae.input?.[l]||0,Ye=o[Ae.id]||0;return!Se||!Ye||je.push({id:Ae.id,name:Ae.name,amount:Se*Ye,formula:`${Ye}   ${Se}`}),je},[]),xt=is.reduce((je,Ae)=>{const Se=Ae.output?.[l]||0,Ye=o[Ae.id]||0;return!Se||!Ye||je.push({id:Ae.id,name:Ae.name,amount:Se*Ye,formula:`${Ye}   ${Se}`}),je},[]),P=Object.entries(Da).reduce((je,[Ae,Se])=>{const Ye=Se.maintenanceCost?.[l]||0,bt=j[Ae]||0;return!Ye||!bt||je.push({id:Ae,name:Se.name,amount:Ye*bt,formula:`${bt}   ${Ye}`}),je},[]);return{stratumDemand:K,buildingDemand:We,armyDemand:P,buildingSupply:xt}},[D,l,p,o,j]);if(!l||!D)return null;const ve=()=>{U(!0),setTimeout(()=>{w()},300)},G=E?"animate-sheet-out":"animate-sheet-in",me=v?.treasury||[],b=v?.tax||[],O=me.length?me[me.length-1]:c[l]||0,R=b.length?b[b.length-1]:0,ne=de.reduce((K,We)=>K+We.amount,0)+Q.reduce((K,We)=>K+We.amount,0)+I.reduce((K,We)=>K+We.amount,0),L=ge.reduce((K,We)=>K+We.amount,0),u=c[l]||0,C=m?.supply?.[l]||0,$=m?.demand?.[l]||0,J=m?.prices?.[l]??D.basePrice??0,le=A.length>=2?A[A.length-1]-A[A.length-2]:0,De=oe[oe.length-1]??C,fe=se[se.length-1]??$,Ge=W0.find(K=>K.id===k);return On.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end justify-center lg:items-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/70 animate-fade-in",onClick:ve}),a.jsxs("div",{className:`relative w-full max-w-4xl bg-gray-800 border-t-2 lg:border-2 border-gray-700 rounded-t-2xl lg:rounded-2xl shadow-2xl flex flex-col max-h-[92vh] ${G} lg:animate-slide-up`,children:[a.jsx("div",{className:"flex-shrink-0 p-2 lg:p-3 border-b border-gray-700 bg-gradient-to-r from-gray-900 to-gray-800",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-9 h-9 lg:w-10 lg:h-10 border border-gray-700 bg-gray-900/60 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(N,{name:D.icon,size:20,className:D.color})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-sm lg:text-base font-bold text-white leading-tight",children:D.name}),a.jsxs("p",{className:"text-[9px] lg:text-[10px] text-gray-400 leading-tight truncate",children:[" ",u.toFixed(1)," ",M?" ":`  ${J.toFixed(2)}`]})]}),a.jsx("button",{onClick:ve,className:"p-1.5 lg:p-2 rounded-full hover:bg-gray-700 flex-shrink-0",children:a.jsx(N,{name:"X",size:16,className:"text-gray-400"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:M?a.jsxs("div",{className:"space-y-2 lg:space-y-3 p-2 lg:p-3",children:[a.jsxs("div",{className:"grid gap-1.5 lg:gap-2 grid-cols-2",children:[a.jsxs("div",{className:"rounded-lg border border-yellow-500/30 bg-yellow-500/5 p-2 lg:p-2.5",children:[a.jsx("p",{className:"text-[8px] lg:text-[9px] uppercase tracking-wide text-yellow-300/80 leading-none",children:""}),a.jsx("p",{className:"mt-1 text-base lg:text-lg font-bold text-yellow-200 font-mono leading-none",children:O.toFixed(0)}),a.jsxs("p",{className:"mt-0.5 lg:mt-1 text-[8px] lg:text-[9px] text-yellow-200/80 leading-none",children:[" ",(c[l]||0).toFixed(0)]})]}),a.jsxs("div",{className:"rounded-lg border border-emerald-500/30 bg-emerald-500/5 p-2 lg:p-2.5",children:[a.jsx("p",{className:"text-[8px] lg:text-[9px] uppercase tracking-wide text-emerald-300/80 leading-none",children:""}),a.jsx("p",{className:"mt-1 text-base lg:text-lg font-bold text-emerald-200 font-mono leading-none",children:Za(R)}),a.jsx("p",{className:"mt-0.5 lg:mt-1 text-[8px] lg:text-[9px] text-emerald-200/80 leading-none",children:""})]})]}),a.jsxs("div",{className:"rounded-lg border border-blue-500/30 bg-blue-500/5 p-2",children:[a.jsx("p",{className:"text-[8px] lg:text-[9px] uppercase tracking-wide text-blue-200/80 leading-none mb-0.5 lg:mb-1",children:""}),a.jsx("p",{className:"text-[9px] lg:text-[10px] text-blue-100/80 leading-snug lg:leading-relaxed",children:",,"})]}),!M&&y&&a.jsxs("div",{className:"rounded-lg border border-emerald-500/30 bg-emerald-500/5 p-3",children:[a.jsx("p",{className:"text-[9px] uppercase tracking-wide text-emerald-300/80 leading-none mb-2",children:""}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",inputMode:"decimal",step:"1",value:S??(ae*100).toFixed(0),onChange:K=>ce(K.target.value),onBlur:Ce,onKeyDown:K=>{K.key==="Enter"&&(Ce(),K.target.blur())},className:"w-24 bg-gray-800/70 border border-gray-600 text-sm text-gray-200 rounded px-2 py-1 focus:ring-1 focus:ring-emerald-500 focus:border-emerald-500 text-center",placeholder:"%"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-sm font-semibold text-emerald-200",children:[": ",(ae*100).toFixed(0),"%"]}),a.jsx("p",{className:"text-[10px] text-gray-400",children:""})]})]})]}),a.jsxs("div",{className:"rounded-lg border border-blue-500/30 bg-blue-500/5 p-2",children:[a.jsx("p",{className:"text-[8px] lg:text-[9px] uppercase tracking-wide text-blue-200/80 leading-none mb-0.5 lg:mb-1",children:""}),a.jsx("p",{className:"text-[9px] lg:text-[10px] text-blue-100/80 leading-snug lg:leading-relaxed",children:",,"})]}),a.jsxs("div",{className:"space-y-1.5 lg:space-y-2",children:[a.jsxs("div",{className:"rounded-lg border border-gray-700 bg-gray-900/60 p-2",children:[a.jsxs("div",{className:"mb-1.5 lg:mb-2 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[8px] lg:text-[9px] uppercase tracking-wide text-gray-500 leading-none",children:""}),a.jsxs("p",{className:"text-xs lg:text-sm font-semibold text-white leading-tight mt-0.5",children:[" ",(c[l]||0).toFixed(0)," "]})]}),a.jsx(N,{name:"Coins",size:14,className:"text-yellow-200"})]}),a.jsx(yi,{data:me,color:"#facc15",label:""})]}),a.jsxs("div",{className:"rounded-lg border border-gray-700 bg-gray-900/60 p-2",children:[a.jsxs("div",{className:"mb-1.5 lg:mb-2 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[8px] lg:text-[9px] uppercase tracking-wide text-gray-500 leading-none",children:""}),a.jsxs("p",{className:"text-xs lg:text-sm font-semibold text-white leading-tight mt-0.5",children:[" ",Za(R)," / "]})]}),a.jsx(N,{name:"Activity",size:14,className:"text-emerald-300"})]}),a.jsx(yi,{data:b,color:"#34d399",label:""})]})]})]}):a.jsxs("div",{className:"flex h-full flex-col",children:[a.jsxs("div",{className:"border-b border-gray-700 bg-gray-900/70 px-2 lg:px-3 pt-1.5 lg:pt-2 flex-shrink-0",children:[a.jsx("div",{className:"flex items-center gap-1.5 lg:gap-2 overflow-x-auto pb-1.5 lg:pb-2",children:W0.map(K=>a.jsx("button",{type:"button",className:`rounded-full px-2.5 lg:px-3 py-1 text-[9px] lg:text-[10px] font-semibold whitespace-nowrap ${K.id===k?"bg-emerald-500/20 text-emerald-300":"text-gray-400 hover:text-white"}`,onClick:()=>_(K.id),children:K.label},K.id))}),Ge&&a.jsx("p",{className:"text-[8px] lg:text-[9px] text-gray-500 pb-1 leading-tight",children:Ge.description})]}),a.jsxs("div",{className:"flex-1 space-y-2 lg:space-y-3 p-2 lg:p-3 overflow-y-auto",children:[!M&&y&&a.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-emerald-500/30 bg-emerald-950/40 p-2.5 lg:p-4",children:[a.jsx("p",{className:"text-[10px] lg:text-xs uppercase tracking-wide text-gray-500 mb-1.5 lg:mb-2",children:""}),a.jsxs("div",{className:"flex items-center gap-2 lg:gap-4",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"text",inputMode:"decimal",value:S??(ae*100).toFixed(0),onChange:K=>ce(K.target.value),onBlur:Ce,onKeyDown:K=>{K.key==="Enter"&&(Ce(),K.target.blur())},className:"w-16 lg:w-24 bg-gray-800/70 border border-gray-600 text-base lg:text-lg font-mono text-gray-200 rounded-lg px-1.5 lg:px-2 py-1 focus:ring-1 focus:ring-emerald-500 focus:border-emerald-500 text-center"}),a.jsx("span",{className:"text-base lg:text-lg font-semibold text-emerald-300",children:"%"})]}),a.jsxs("div",{className:"text-right flex-1",children:[a.jsx("p",{className:`text-base lg:text-lg font-bold ${ae>0?"text-yellow-300":ae<0?"text-green-300":"text-gray-400"}`,children:ae>0?"":ae<0?"":""}),a.jsx("p",{className:"text-[10px] lg:text-xs text-gray-400",children:""})]})]}),a.jsx("p",{className:"text-[10px] lg:text-xs text-gray-400 mt-1.5 lg:mt-2",children:""})]}),k==="market"&&a.jsxs("div",{className:"space-y-3 lg:space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2 lg:gap-4",children:[a.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-gray-800 bg-gray-950/60 p-2.5 lg:p-4",children:[a.jsx("p",{className:"text-[10px] lg:text-xs uppercase tracking-wide text-gray-500",children:""}),a.jsx("p",{className:"mt-1 lg:mt-2 text-2xl lg:text-3xl font-bold text-white",children:u.toFixed(1)}),a.jsxs("p",{className:"mt-1 lg:mt-2 text-xs lg:text-sm text-gray-400",children:[" ",Za(De-fe||0)]})]}),a.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-gray-800 bg-gray-950/60 p-2.5 lg:p-4",children:[a.jsx("p",{className:"text-[10px] lg:text-xs uppercase tracking-wide text-gray-500",children:""}),a.jsxs("div",{className:"mt-1 lg:mt-2 flex items-center gap-2 lg:gap-3 text-white",children:[a.jsx("span",{className:"text-2xl lg:text-3xl font-bold",children:J.toFixed(2)}),a.jsxs("span",{className:`flex items-center gap-0.5 lg:gap-1 text-xs lg:text-sm ${le>0?"text-emerald-400":le<0?"text-rose-400":"text-gray-400"}`,children:[a.jsx(N,{name:le>=0?"ArrowUp":"ArrowDown",size:14}),le>=0?"+":"",Za(le)]})]}),a.jsx("p",{className:"mt-1 lg:mt-2 text-xs lg:text-sm text-gray-400",children:""})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 lg:gap-3",children:[a.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-gray-800 bg-gray-950/60 p-2 lg:p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-[10px] lg:text-xs uppercase tracking-wide text-gray-500",children:""}),a.jsx(N,{name:"TrendingUp",size:14,className:"text-sky-300"})]}),a.jsx(ip,{series:[{label:"",color:"#60a5fa",data:A}]}),a.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-1.5",children:[a.jsxs("div",{className:"rounded-lg border border-gray-800/60 bg-gray-900/60 p-1.5 text-center",children:[a.jsx("p",{className:"text-[9px] lg:text-[10px] text-gray-500",children:""}),a.jsx("p",{className:"text-sm lg:text-base font-bold text-white",children:J.toFixed(2)})]}),a.jsxs("div",{className:"rounded-lg border border-gray-800/60 bg-gray-900/60 p-1.5 text-center",children:[a.jsx("p",{className:"text-[9px] lg:text-[10px] text-gray-500",children:""}),a.jsxs("p",{className:`text-sm lg:text-base font-bold ${le>0?"text-emerald-300":le<0?"text-rose-300":"text-white"}`,children:[le>=0?"+":"",Za(le)]})]})]})]}),a.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-gray-800 bg-gray-950/60 p-2 lg:p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-[10px] lg:text-xs uppercase tracking-wide text-gray-500",children:""}),a.jsx(N,{name:"Activity",size:14,className:"text-emerald-300"})]}),a.jsx(ip,{series:[{label:"",color:"#34d399",data:oe},{label:"",color:"#f87171",data:se}]}),a.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-1.5",children:[a.jsxs("div",{className:"rounded-lg border border-gray-800/60 bg-gray-900/60 p-1.5 text-center",children:[a.jsx("p",{className:"text-[9px] lg:text-[10px] text-gray-500",children:""}),a.jsx("p",{className:"text-sm lg:text-base font-bold text-emerald-300",children:Za(De)})]}),a.jsxs("div",{className:"rounded-lg border border-gray-800/60 bg-gray-900/60 p-1.5 text-center",children:[a.jsx("p",{className:"text-[9px] lg:text-[10px] text-gray-500",children:""}),a.jsx("p",{className:"text-sm lg:text-base font-bold text-rose-300",children:Za(fe)})]}),a.jsxs("div",{className:"rounded-lg border border-gray-800/60 bg-gray-900/60 p-1.5 text-center",children:[a.jsx("p",{className:"text-[9px] lg:text-[10px] text-gray-500",children:""}),a.jsx("p",{className:"text-sm lg:text-base font-bold text-white",children:Za((De||0)-(fe||0))})]})]})]})]})]}),k==="analysis"&&a.jsxs("div",{className:"grid gap-3 lg:gap-6 lg:grid-cols-2",children:[a.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-gray-800 bg-gray-950/60 p-3 lg:p-5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] lg:text-xs uppercase tracking-wide text-gray-500",children:""}),a.jsxs("p",{className:"text-base lg:text-xl font-semibold text-white",children:[" ",Za(ne)]})]}),a.jsx(N,{name:"TrendingUp",size:18,className:"text-rose-300"})]}),a.jsxs("div",{className:"mt-2 lg:mt-4 space-y-2 lg:space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs lg:text-sm font-semibold text-gray-300",children:""}),a.jsx("div",{className:"mt-1.5 lg:mt-2 space-y-1.5 lg:space-y-2",children:de.length?de.map(K=>a.jsxs("div",{className:"flex items-center justify-between rounded-lg lg:rounded-xl border border-gray-800/60 bg-gray-900/60 p-2 lg:p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[a.jsx("div",{className:"rounded-lg lg:rounded-xl bg-gray-900/80 p-1.5 lg:p-2",children:a.jsx(N,{name:K.icon,size:16,className:"text-amber-300"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs lg:text-sm font-semibold text-white",children:K.name}),a.jsx("p",{className:"text-[10px] lg:text-xs text-gray-500",children:K.formula})]})]}),a.jsx("p",{className:"text-sm lg:text-base font-bold text-rose-200",children:Za(K.amount)})]},K.key)):a.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs lg:text-sm font-semibold text-gray-300",children:"/"}),a.jsx("div",{className:"mt-1.5 lg:mt-2 space-y-1.5 lg:space-y-2",children:Q.length?Q.map(K=>a.jsxs("div",{className:"flex items-center justify-between rounded-lg lg:rounded-xl border border-gray-800/60 bg-gray-900/60 p-2 lg:p-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs lg:text-sm font-semibold text-white",children:K.name}),a.jsx("p",{className:"text-[10px] lg:text-xs text-gray-500",children:K.formula})]}),a.jsx("p",{className:"text-sm lg:text-base font-bold text-rose-200",children:Za(K.amount)})]},K.id)):a.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs lg:text-sm font-semibold text-gray-300",children:""}),a.jsx("div",{className:"mt-1.5 lg:mt-2 space-y-1.5 lg:space-y-2",children:I.length?I.map(K=>a.jsxs("div",{className:"flex items-center justify-between rounded-lg lg:rounded-xl border border-gray-800/60 bg-gray-900/60 p-2 lg:p-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs lg:text-sm font-semibold text-white",children:K.name}),a.jsx("p",{className:"text-[10px] lg:text-xs text-gray-500",children:K.formula})]}),a.jsx("p",{className:"text-sm lg:text-base font-bold text-rose-200",children:Za(K.amount)})]},K.id)):a.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""})})]})]})]}),a.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-gray-800 bg-gray-950/60 p-3 lg:p-5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] lg:text-xs uppercase tracking-wide text-gray-500",children:""}),a.jsxs("p",{className:"text-base lg:text-xl font-semibold text-white",children:[" ",Za(L)]})]}),a.jsx(N,{name:"TrendingDown",size:18,className:"text-emerald-300"})]}),a.jsx("div",{className:"mt-2 lg:mt-4 space-y-1.5 lg:space-y-2",children:ge.length?ge.map(K=>a.jsxs("div",{className:"flex items-center justify-between rounded-lg lg:rounded-xl border border-gray-800/60 bg-gray-900/60 p-2 lg:p-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs lg:text-sm font-semibold text-white",children:K.name}),a.jsx("p",{className:"text-[10px] lg:text-xs text-gray-500",children:K.formula})]}),a.jsx("p",{className:"text-sm lg:text-base font-bold text-emerald-200",children:Za(K.amount)})]},K.id)):a.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""})}),a.jsxs("div",{className:"mt-2 lg:mt-4 rounded-lg lg:rounded-xl border border-gray-800/60 bg-gray-900/60 p-2.5 lg:p-4 text-xs lg:text-sm text-gray-400",children:[" ",Za(L),"   ",Za(C),"  "," ",Za(ne-C)]})]})]}),k==="chain"&&a.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-gray-800 bg-gray-950/60 p-3 lg:p-5",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] lg:text-xs uppercase tracking-wide text-gray-500",children:""}),a.jsx("p",{className:"text-base lg:text-xl font-semibold text-white",children:""})]})}),a.jsx("div",{className:"mt-2 lg:mt-4 space-y-2 lg:space-y-4",children:B.length?B.map(K=>a.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-gray-800/60 bg-gray-900/60 p-3 lg:p-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-base lg:text-lg font-semibold text-white",children:K.name}),a.jsx("p",{className:"text-xs lg:text-sm text-gray-400",children:K.desc})]})}),a.jsxs("div",{className:"mt-2 lg:mt-4 flex flex-wrap items-center gap-2 lg:gap-4",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:(K.inputs.length?K.inputs:[null]).map((We,xt)=>{const P=We?Me[We]:null;return a.jsx(G0,{resourceKey:We,label:P?.name||"/",subLabel:P?"":""},`${K.id}-input-${We||xt}`)})}),a.jsx(N,{name:"ArrowRight",size:16,className:"text-gray-500"}),a.jsx(G0,{resourceKey:l,label:D.name,subLabel:"",highlight:!0}),a.jsx(N,{name:"ArrowRight",size:16,className:"text-gray-500"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:(K.outputs.length?K.outputs:[null]).map((We,xt)=>{const P=We?Me[We]:null;return a.jsx(G0,{resourceKey:We,label:P?.name||"",subLabel:P?"":""},`${K.id}-output-${We||xt}`)})})]})]},K.id)):a.jsx("div",{className:"rounded-lg lg:rounded-xl border border-gray-800/60 bg-gray-900/60 p-4 lg:p-6 text-center text-xs lg:text-sm text-gray-500",children:""})})]})]})]})})]})]}),document.body)},e2=({isOpen:l,onClose:c,population:m=0,maxPop:o=0,popStructure:p={},history:j={}})=>{const[v,w]=V.useState(!1);if(!l)return null;const g=()=>{w(!0),setTimeout(()=>{c()},300)},y=v?"animate-sheet-out":"animate-sheet-in",k=j?.population||[],_=Object.keys(Fe).map(E=>{const U=p[E]||0,D=m>0?U/m*100:0;return{key:E,name:Fe[E].name,icon:Fe[E].icon,count:U,percent:D}}).filter(E=>E.count>0).sort((E,U)=>U.count-E.count);return On.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end justify-center lg:items-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/70 animate-fade-in",onClick:g}),a.jsxs("div",{className:`relative w-full max-w-2xl bg-gray-800 border-t-2 lg:border-2 border-gray-700 rounded-t-2xl lg:rounded-2xl shadow-2xl flex flex-col max-h-[90vh] ${y} lg:animate-slide-up`,children:[a.jsx("div",{className:"flex-shrink-0 p-3 border-b border-gray-700 bg-gray-900/70",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-500/10 border border-blue-500/40 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(N,{name:"Users",size:24,className:"text-blue-300"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-base font-bold text-white leading-tight",children:""}),a.jsxs("p",{className:"text-[10px] text-gray-400 leading-tight",children:[" ",m," / ",o]})]}),a.jsx("button",{onClick:g,className:"p-2 rounded-full hover:bg-gray-700 flex-shrink-0",children:a.jsx(N,{name:"X",size:18,className:"text-gray-400"})})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[a.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[a.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[9px] uppercase tracking-wide text-gray-500 leading-none",children:""}),a.jsxs("p",{className:"text-sm font-semibold text-white leading-tight mt-0.5",children:[" ",m,"    ",o]})]}),a.jsx(N,{name:"Activity",size:16,className:"text-blue-300"})]}),a.jsx(yi,{data:k,color:"#60a5fa",label:""})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[a.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[9px] uppercase tracking-wide text-gray-500 leading-none",children:""}),a.jsx("p",{className:"text-sm font-semibold text-white leading-tight mt-0.5",children:""})]}),a.jsx(N,{name:"Layers",size:16,className:"text-purple-300"})]}),a.jsx("div",{className:"space-y-2",children:_.length?_.map(E=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between text-[10px] text-gray-300",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(N,{name:E.icon,size:14,className:"text-amber-300"}),a.jsx("span",{className:"leading-none",children:E.name})]}),a.jsxs("div",{className:"text-[9px] text-gray-400 font-mono leading-none",children:[E.count,"   ",E.percent.toFixed(1),"%"]})]}),a.jsx("div",{className:"mt-1 h-1.5 rounded-full bg-gray-800",children:a.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-400 to-purple-500",style:{width:`${Math.min(E.percent,100)}%`}})})]},E.key)):a.jsx("p",{className:"text-[10px] text-gray-500 text-center py-2",children:""})})]})]}),a.jsx("div",{className:"flex-shrink-0 p-3 border-t border-gray-700 bg-gray-800/50",children:a.jsx("button",{onClick:g,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-bold transition-colors",children:""})})]})]}),document.body)},t2=({festivalOptions:l,year:c,epoch:m,onSelect:o})=>{const[p,j]=V.useState(null),[v,w]=V.useState(null),[g,y]=V.useState(!1);if(!l||l.length===0)return null;const k=xa[m]||xa[0],_=g?"animate-sheet-out":"animate-sheet-in",E=()=>{p&&(y(!0),setTimeout(()=>{o(p)},300))},U=M=>M||"Star",D=M=>{const A=[];return M.categories&&Object.entries(M.categories).forEach(([S,ie])=>{const ae=(ie*100).toFixed(0),ce=S==="gather"?"":S==="industry"?"":S;A.push(`${ce} +${ae}%`)}),M.production&&A.push(` +${(M.production*100).toFixed(0)}%`),M.industry&&A.push(` +${(M.industry*100).toFixed(0)}%`),M.scienceBonus&&A.push(` +${(M.scienceBonus*100).toFixed(0)}%`),M.cultureBonus&&A.push(` +${(M.cultureBonus*100).toFixed(0)}%`),M.militaryBonus&&A.push(` +${(M.militaryBonus*100).toFixed(0)}%`),M.taxIncome&&A.push(` +${(M.taxIncome*100).toFixed(0)}%`),M.stability&&A.push(` +${(M.stability*100).toFixed(0)}%`),M.maxPop&&A.push(` +${M.maxPop}`),A};return On.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end justify-center lg:items-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 animate-fade-in"}),a.jsxs("div",{className:`relative w-full max-w-4xl bg-gray-800 border-t-2 lg:border-2 border-yellow-500/50 rounded-t-2xl lg:rounded-2xl shadow-2xl flex flex-col max-h-[92vh] ${_} lg:animate-slide-up`,children:[a.jsx("div",{className:"flex-shrink-0 p-3 border-b border-gray-700 bg-gradient-to-r from-yellow-900/50 via-orange-900/50 to-red-900/50",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1.5",children:[a.jsx(N,{name:"Sparkles",size:20,className:"text-yellow-400 animate-pulse"}),a.jsx("h2",{className:"text-base font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 via-yellow-400 to-orange-400",children:"  "}),a.jsx(N,{name:"Sparkles",size:20,className:"text-yellow-400 animate-pulse"})]}),a.jsxs("p",{className:"text-sm text-white font-semibold leading-tight",children:[" ",c," "]}),a.jsxs("p",{className:"text-[10px] text-gray-300 leading-tight mt-0.5",children:[a.jsx("span",{className:`font-bold ${k.color}`,children:k.name}),"  "]})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:[a.jsx("div",{className:"bg-blue-900/20 border border-blue-500/30 p-2 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(N,{name:"Info",size:14,className:"text-blue-400 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-[10px] text-gray-300 leading-relaxed",children:[a.jsx("p",{className:"font-semibold text-blue-300 mb-0.5 leading-tight",children:""}),a.jsx("p",{children:""}),a.jsxs("p",{className:"mt-0.5",children:[a.jsx("span",{className:"text-yellow-400",children:" "})," 360",a.jsx("span",{className:"text-purple-400 ml-1",children:" "})," "]})]})]})}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:l.map((M,A)=>{const S=p?.id===M.id,ie=M.type==="permanent",ae=D(M.effects);return a.jsx("div",{className:"relative cursor-pointer transition-all duration-200",onClick:()=>j(M),children:a.jsxs("div",{className:`rounded-lg border-2 overflow-hidden ${S?ie?"border-purple-400 bg-purple-900/30":"border-yellow-400 bg-yellow-900/30":"border-gray-600 bg-gray-700/50"}`,children:[a.jsx("div",{className:`px-2 py-1 text-center text-[9px] font-bold ${ie?"bg-gradient-to-r from-purple-600 to-purple-800 text-purple-100":"bg-gradient-to-r from-yellow-600 to-orange-600 text-yellow-100"}`,children:ie?" ":" 1"}),a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("div",{className:`p-2 rounded-lg ${ie?"bg-purple-600/30":"bg-yellow-600/30"}`,children:a.jsx(N,{name:U(M.icon),size:20,className:ie?"text-purple-300":"text-yellow-300"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("h3",{className:"text-sm font-bold text-white leading-tight",children:M.name})}),S&&a.jsx("div",{className:`p-1 rounded-full ${ie?"bg-purple-500":"bg-yellow-500"}`,children:a.jsx(N,{name:"Check",size:14,className:"text-white"})})]}),a.jsx("p",{className:"text-[10px] text-gray-300 mb-1.5 leading-relaxed",children:M.description}),a.jsx("div",{className:"space-y-1 mb-1.5",children:ae.map((ce,Ce)=>a.jsxs("div",{className:`flex items-center gap-1.5 text-[9px] p-1 rounded ${ie?"bg-purple-900/30 border border-purple-600/30":"bg-yellow-900/30 border border-yellow-600/30"}`,children:[a.jsx(N,{name:"Plus",size:10,className:ie?"text-purple-400":"text-yellow-400"}),a.jsx("span",{className:"text-gray-200 leading-none",children:ce})]},Ce))}),a.jsx("div",{className:"pt-1.5 border-t border-gray-600",children:a.jsxs("p",{className:"text-[9px] text-gray-400 italic leading-relaxed",children:['"',M.flavorText,'"']})})]})]})},M.id)})}),!p&&a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-[10px] text-gray-400 animate-pulse leading-tight",children:" "})})]}),a.jsx("div",{className:"flex-shrink-0 p-3 border-t border-gray-700 bg-gray-800/50",children:a.jsx("button",{onClick:E,disabled:!p,className:`w-full px-4 py-2 rounded-lg text-sm font-bold transition-all ${p?"bg-gradient-to-r from-yellow-600 via-orange-600 to-red-600 hover:from-yellow-500 hover:via-orange-500 hover:to-red-500 text-white shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:p?` ${p.name}`:""})})]})]}),document.body)},a2=({show:l,onComplete:c,onSkip:m,onOpenWiki:o})=>{const[p,j]=V.useState(0),[v,w]=V.useState(!1);if(!l)return null;const g=nh,y=g[p],k=p===0,_=p===g.length-1,E=()=>{_?(w(!0),setTimeout(()=>{c()},300)):j(A=>A+1)},U=()=>{k||j(A=>A-1)},D=()=>{w(!0),setTimeout(()=>{m()},300)},M=v?"animate-sheet-out":"animate-sheet-in";return On.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end justify-center lg:items-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/90 animate-fade-in"}),a.jsxs("div",{className:`relative w-full max-w-3xl bg-gray-900/95 backdrop-blur border-t-2 lg:border-2 border-blue-500/50 rounded-t-2xl lg:rounded-2xl shadow-2xl flex flex-col max-h-[92vh] ${M} lg:animate-slide-up`,children:[a.jsx("div",{className:"h-1.5 bg-gray-800 rounded-t-2xl lg:rounded-t-xl overflow-hidden flex-shrink-0",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${(p+1)/g.length*100}%`}})}),a.jsx("div",{className:"flex-shrink-0 p-3 border-b border-gray-700",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(N,{name:y.icon,size:24,className:y.iconColor})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-base font-bold text-white leading-tight",children:y.title}),a.jsxs("p",{className:"text-[10px] text-gray-400 leading-tight",children:[" ",p+1," / ",g.length]})]}),a.jsx("button",{onClick:D,className:"px-2 py-1 text-[10px] text-gray-400 hover:text-white hover:bg-gray-800 rounded transition-colors flex-shrink-0",children:""})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:a.jsx(n2,{step:y,onOpenWiki:o,isLastStep:_})}),a.jsxs("div",{className:"flex-shrink-0 p-3 border-t border-gray-700 flex items-center justify-between gap-2",children:[a.jsxs("button",{onClick:U,disabled:k,className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-semibold transition-colors ${k?"text-gray-600 cursor-not-allowed":"text-white bg-gray-700 hover:bg-gray-600"}`,children:[a.jsx(N,{name:"ChevronLeft",size:14}),a.jsx("span",{className:"hidden sm:inline",children:""})]}),a.jsx("div",{className:"flex gap-1.5",children:g.map((A,S)=>a.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-colors ${S===p?"bg-blue-500":"bg-gray-700"}`},S))}),a.jsx("button",{onClick:E,className:"flex items-center gap-1 px-4 py-1.5 rounded-lg text-xs font-semibold bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white transition-all shadow-lg",children:_?a.jsxs(a.Fragment,{children:[a.jsx(N,{name:"Play",size:14}),""]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"hidden sm:inline",children:""}),a.jsx(N,{name:"ChevronRight",size:14})]})})]})]})]}),document.body)},s2={info:{container:"bg-blue-900/30 border-blue-500/30",text:"text-blue-200"},success:{container:"bg-emerald-900/30 border-emerald-500/30",text:"text-emerald-200"},warning:{container:"bg-amber-900/30 border-amber-500/30",text:"text-amber-200"},tip:{container:"bg-purple-900/30 border-purple-500/30",text:"text-purple-200"}},n2=({step:l,onOpenWiki:c,isLastStep:m})=>l?a.jsxs("div",{className:"space-y-2",children:[l.lead&&a.jsx("p",{className:"text-sm text-white font-semibold leading-tight",children:l.lead}),l.paragraphs?.map((o,p)=>a.jsx("p",{className:"text-[11px] text-gray-300 leading-relaxed",children:o},p)),l.cards?.length>0&&a.jsx("div",{className:"space-y-1.5",children:l.cards.map((o,p)=>a.jsxs("div",{className:"bg-gray-700/50 p-2 rounded-lg border border-gray-600",children:[a.jsxs("p",{className:"text-[11px] text-white font-semibold mb-1 flex items-center gap-1.5 leading-tight",children:[o.icon&&a.jsx(N,{name:o.icon,size:14,className:o.iconColor||"text-white"}),o.title]}),a.jsx("p",{className:"text-[10px] text-gray-300 leading-relaxed",children:o.text})]},`${o.title}-${p}`))}),l.callouts?.length>0&&a.jsx("div",{className:"space-y-1.5",children:l.callouts.map((o,p)=>{const j=s2[o.tone]||{container:"bg-gray-800/40 border-gray-700",text:"text-gray-200"};return a.jsxs("div",{className:`p-2 rounded-lg border ${j.container} ${j.text}`,children:[a.jsxs("p",{className:"text-[10px] font-semibold flex items-center gap-1.5 text-white leading-tight",children:[o.icon&&a.jsx(N,{name:o.icon,size:14,className:"text-current"}),o.title]}),a.jsx("p",{className:"text-[10px] mt-1 leading-relaxed",children:o.text})]},`${o.title}-${p}`)})}),l.wikiPrompt&&a.jsxs("div",{className:"bg-indigo-900/30 border border-indigo-500/40 p-2 rounded-lg space-y-2",children:[a.jsxs("p",{className:"text-indigo-200 flex items-center gap-1.5 text-[10px] leading-tight",children:[a.jsx(N,{name:"BookOpen",size:14,className:"text-indigo-300"}),l.wikiPrompt.text]}),typeof c=="function"&&a.jsxs("button",{type:"button",onClick:c,className:"px-3 py-1.5 rounded-lg bg-indigo-600/30 border border-indigo-500/50 text-[10px] font-semibold text-indigo-100 hover:bg-indigo-600/50 transition-colors flex items-center gap-1.5",children:[a.jsx(N,{name:"Book",size:14}),l.wikiPrompt.buttonLabel||""]})]}),l.footerNote&&a.jsx("p",{className:"text-center text-sm text-yellow-300 font-bold mt-3 leading-tight",children:l.footerNote}),m&&!l.footerNote&&a.jsx("p",{className:"text-center text-sm text-yellow-300 font-bold mt-3 leading-tight",children:""})]}):null,l2=[{id:"mech_quickstart",name:"",icon:"Zap",summary:"",content:[{type:"h4",text:" "},{type:"p",text:""},{type:"h4",text:" "},{type:"list",items:["","","","","",""]},{type:"h4",text:" "},{type:"p",text:"10"},{type:"list",items:["1. ","2. ","3. ",'4. """"',"5. 50020"]},{type:"p",text:"10-30"},{type:"list",items:["1. ","2. ","3. ",'4. ""',"5. "]},{type:"h4",text:" "},{type:"list",items:["1x/2x/5x","","","","",""]}]},{id:"mech_economy",name:"",icon:"Coins",summary:"",content:[{type:"h4",text:"1. "},{type:"p",text:""},{type:"list",items:[" (Supply) + "," (Demand) +  + "," > ",""]},{type:"h4",text:"2. "},{type:"p",text:"-"},{type:"list",items:[" (Head Tax)"," (Resource Tax)"," (Business Tax)"," ()"]},{type:"h4",text:"2.1 "},{type:"p",text:""},{type:"list",items:["",'"    "',"","","",""]},{type:"h4",text:"2.2 "},{type:"list",items:["","","","",""]},{type:"h4",text:"3. "},{type:"p",text:'""'},{type:"list",items:["","",""]},{type:"h4",text:"4. "},{type:"p",text:""},{type:"list",items:["3","320%","",""]}]},{id:"mech_price_calculation",name:"",icon:"TrendingUp",summary:"",content:[{type:"h4",text:" "},{type:"p",text:""},{type:"h4",text:" "},{type:"p",text:""},{type:"list",items:[" = ( + ) / "," = (  )"," = (  )"," = max(  0.8,   1.05)"," marketConfig.wage "]},{type:"p",text:"210=2020=20/20=1.0"},{type:"h4",text:" "},{type:"p",text:""},{type:"list",items:[" = ( + ) / "," =   virtualDemandPerPop","pressure = tanh(ln()  0.9)  supplyDemandWeight"," = 1 + pressure  (3.5 - 1)"," = 1 + pressure  (1 - 0.7)"]},{type:"p",text:"supplyDemandWeight  marketConfig "},{type:"list",items:["0.6","1.5","1.0"]},{type:"p",text:"=2.0pressure0.552.375"},{type:"h4",text:" "},{type:"p",text:""},{type:"list",items:[" =  / "," =   inventoryTargetDays"," = max(0.3, 1 + (1 - )  inventoryPriceImpact)",""]},{type:"p",text:"inventoryTargetDays  inventoryPriceImpact "},{type:"list",items:["300.15","100.4","200.25"]},{type:"p",text:"1002000.5=1+(1-0.5)0.25=1.125"},{type:"h4",text:" "},{type:"list",items:[" =     ","max(,   0.6)","max(, PRICE_FLOOR)"," =  + ( - )  0.1",""]},{type:"h4",text:" "},{type:"p",text:" marketConfig "},{type:"list",items:["price.livingCostWeight","price.taxCostWeight","wage.livingCostWeight","wage.taxCostWeight"]},{type:"p",text:""},{type:"list",items:["price: {livingCostWeight: 0.15, taxCostWeight: 0.2}","wage: {livingCostWeight: 0.08, taxCostWeight: 0.05}",""]},{type:"p",text:""},{type:"list",items:["price: {livingCostWeight: 0.3, taxCostWeight: 0.4}","wage: {livingCostWeight: 0.15, taxCostWeight: 0.15}",""]},{type:"h4",text:" "},{type:"list",items:["1.  marketConfig ","2.  wage ","3.  supplyDemandWeight ","4.  inventoryPriceImpact ","5.  =     ","6. 60%","7. 10%"]},{type:"h4",text:" "},{type:"list",items:[" +  = "," +  = ","","",""]},{type:"h4",text:" "},{type:"list",items:["","","","",""]}]},{id:"mech_strata",name:"",icon:"Users",summary:"",content:[{type:"h4",text:"1. "},{type:"p",text:""},{type:"list",items:[" <  (MaxPop)"," >   1.5",""," (0)"]},{type:"h4",text:"2.  () "},{type:"p",text:'""'},{type:"list",items:["",'""+',"",""]},{type:"h4",text:"3. "},{type:"p",text:"Buff/Debuff"},{type:"list",items:["","","",""]},{type:"h4",text:"4. "},{type:"p",text:""},{type:"list",items:["","",""]}]},{id:"mech_military",name:"",icon:"Swords",summary:"",content:[{type:"h4",text:"1. "},{type:"p",text:""},{type:"list",items:["  / (+50%~80% )","   (+50% )","/   (+80% )","/ "]},{type:"h4",text:"2. "},{type:"p",text:" = (+)      "},{type:"p",text:"Buff"},{type:"h4",text:"3. "},{type:"p",text:" > 2:1"},{type:"h4",text:"4. "},{type:"list",items:["30%","","",""]},{type:"h4",text:"5. "},{type:"list",items:["","+","","",""]}]},{id:"mech_tech",name:"",icon:"Cpu",summary:"",content:[{type:"h4",text:"1. "},{type:"p",text:""},{type:"list",items:["","","",""]},{type:"h4",text:"2. "},{type:"p",text:""},{type:"list",items:["+15%+10%","+20%+15%+10%","+25%+20%+15%","+30%+25%+20%","+35%+30%+25%","+40%+35%+30%","+50%+40%+35%"]},{type:"h4",text:"3. "},{type:"p",text:""},{type:"list",items:["","","",""]},{type:"h4",text:"4. "},{type:"list",items:["","","",""]}]},{id:"mech_diplomacy",name:"",icon:"Globe",summary:"",content:[{type:"h4",text:"1. "},{type:"p",text:""},{type:"list",items:["-100 +100","","",""]},{type:"h4",text:"2. "},{type:"list",items:["","","","",""]},{type:"h4",text:"3. "},{type:"list",items:["","",""]},{type:"h4",text:"4. "},{type:"list",items:["","","","",""]},{type:"h4",text:"5. "},{type:"p",text:""},{type:"list",items:["","","","",""]}]},{id:"mech_decrees",name:"",icon:"Gavel",summary:"",content:[{type:"h4",text:"1. "},{type:"p",text:""},{type:"list",items:["","","",""]},{type:"h4",text:"2. "},{type:"list",items:["",""]},{type:"h4",text:"3. "},{type:"p",text:""},{type:"list",items:["+30%-20","+25%-10%","+50%-20%","+30%",""]},{type:"h4",text:"4. "},{type:"p",text:""},{type:"list",items:["","","","",""]},{type:"h4",text:"5. "},{type:"list",items:["","","","",""]}]},{id:"mech_buildings",name:"",icon:"Home",summary:"",content:[{type:"h4",text:"1. "},{type:"list",items:["","","",""]},{type:"h4",text:"2. "},{type:"list",items:["","","",""]},{type:"h4",text:"3. "},{type:"p",text:""},{type:"list",items:["","","","",""]},{type:"h4",text:"4. "},{type:"list",items:["","","","",""]},{type:"h4",text:"5. "},{type:"list",items:["","","",""]}]},{id:"mech_festivals",name:"",icon:"PartyPopper",summary:"",content:[{type:"h4",text:"1. "},{type:"list",items:["","",""]},{type:"h4",text:"2. "},{type:"p",text:"3"},{type:"list",items:["1+50%","+10%",""]},{type:"h4",text:"3. "},{type:"p",text:""},{type:"list",items:["","","",""]},{type:"h4",text:"4. "},{type:"list",items:["","//","","","+10%"]},{type:"h4",text:"5. "},{type:"list",items:["+30%1","20%1","+40%1","+12%","+15%"]}]},{id:"mech_advanced",name:"",icon:"Trophy",summary:"",content:[{type:"h4",text:"1. "},{type:"list",items:["","","","",""]},{type:"h4",text:"2. "},{type:"list",items:["","","","++",""]},{type:"h4",text:"3. "},{type:"list",items:["","","","",""]},{type:"h4",text:"4. "},{type:"list",items:["","","","",""]},{type:"h4",text:"5. "},{type:"p",text:""},{type:"list",items:["","","","",""]},{type:"h4",text:"6. "},{type:"list",items:["","","",""]}]}],Tc=[{id:"mechanics",label:"",icon:"BookOpen"},{id:"economy",label:"",icon:"Users"},{id:"buildings",label:"",icon:"Home"},{id:"military",label:"",icon:"Shield"},{id:"technologies",label:"",icon:"Cpu"},{id:"decrees",label:"",icon:"Gavel"},{id:"resources",label:"",icon:"Package"}],i2={gather:"",industry:"",civic:"",military:""},r2={infantry:"",archer:"",cavalry:"",siege:"",support:""},c2=(fr||[]).reduce((l,c)=>(l[c.id]=c.name,l),{}),o2=Object.entries(Fe||{}).reduce((l,[c,m])=>(l[c]=m?.name||c,l),{}),gp=l=>c2[l]||l,yp=l=>o2[l]||l,rp=d2();function d2(){return{mechanics:l2.map(l=>({id:l.id,name:l.name,summary:l.summary,icon:l.icon,iconColor:"text-blue-300",type:"mechanics",data:l.content})),economy:Object.entries(Fe||{}).map(([l,c])=>({id:l,name:c?.name||l,summary:c?.desc,icon:c?.icon||"Users",iconColor:"text-amber-200",type:"economy",data:c})),buildings:(is||[]).map(l=>({id:l.id,name:l.name,summary:l.desc,icon:l.visual?.icon||"Home",iconColor:l.visual?.text||"text-slate-200",type:"building",data:l})),military:Object.values(Da||{}).map(l=>({id:l.id,name:l.name,summary:l.desc,icon:l.icon||"Swords",iconColor:"text-red-200",type:"military",data:l})),technologies:(fr||[]).map(l=>({id:l.id,name:l.name,summary:l.desc,icon:"Cpu",iconColor:"text-purple-200",type:"technology",data:l})),decrees:(X0||[]).map(l=>({id:l.id,name:l.name,summary:l.desc,icon:"Gavel",iconColor:"text-amber-200",type:"decree",data:l})),resources:Object.entries(Me||{}).map(([l,c])=>({id:l,name:c?.name||l,summary:c?.tags?.map(m=>m==="raw_material"?"":m==="manufactured"?"":m==="luxury"?"":m==="essential"?"":m==="special"?"":m==="virtual"?"":m==="currency"?"":m==="industrial"?"":m).join("  "),icon:c?.icon||"Package",iconColor:c?.color||"text-slate-200",type:"resource",data:{...c,id:l}}))}}const Qa=l=>typeof l!="number"?l:Math.abs(l)>=100?l.toFixed(0):Math.abs(l-Math.round(l))<.001?Math.round(l).toString():l.toFixed(2),pr=l=>l==null||Number.isNaN(l)?void 0:xa[l]?.name||` ${l+1} `,bp=l=>Me?.[l]||{name:l},Dc=(l,c="")=>l?Array.isArray(l)?l:typeof l=="string"?[l]:typeof l=="number"?[`${c}${c?": ":""}${Qa(l)}`]:typeof l=="object"?Object.entries(l).flatMap(([m,o])=>{let p=m;m==="production"?p="":m==="taxIncome"?p="":m==="stability"?p="":m==="scienceBonus"?p="":m==="cultureBonus"?p="":m==="industry"?p="":m==="gather"?p="":m==="maxPop"&&(p="");const j=c?`${c}  ${p}`:p;return typeof o=="object"&&!Array.isArray(o)?Dc(o,j):Array.isArray(o)?o.map(v=>`${j}: ${v}`):[`${j}: ${Qa(o)}`]}):[]:[],Dl=(l,c)=>{if(!c||typeof c!="object")return null;const m=Object.entries(c);return m.length?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-gray-400",children:l}),a.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(([o,p])=>{const j=bp(o);return a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gray-800/70 text-gray-200 text-xs border border-gray-700",children:[j.icon&&a.jsx(N,{name:j.icon,size:14,className:j.color||"text-gray-200"}),a.jsx("span",{children:j.name||o}),p!==void 0&&a.jsx("span",{className:"font-mono text-[11px]",children:Qa(p)})]},`${l}-${o}`)})})]}):null},u2=l=>{if(!l||typeof l!="object")return null;const c=Object.entries(l);return c.length?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-gray-400",children:""}),a.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(([m,o])=>{const p=Fe?.[m];return a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gray-800/70 text-gray-200 text-xs border border-gray-700",children:[p?.icon&&a.jsx(N,{name:p.icon,size:14,className:"text-slate-200"}),a.jsx("span",{children:p?.name||m}),a.jsxs("span",{className:"font-mono text-[11px]",children:["x",Qa(o)]})]},`job-${m}`)})})]}):null},vi=(l,c)=>!c||!c.length?null:a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-gray-400",children:l}),a.jsx("ul",{className:"list-disc list-inside text-gray-200 text-sm space-y-1",children:c.map((m,o)=>a.jsx("li",{children:m},`${l}-${o}`))})]}),ji=({rows:l})=>!l||!l.length?null:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map(c=>a.jsxs("div",{className:"bg-gray-800/60 rounded-lg p-3 border border-gray-700",children:[a.jsx("p",{className:"text-xs text-gray-400",children:c.label}),a.jsx("p",{className:"text-sm text-white font-semibold mt-1",children:c.value})]},c.label))}),m2=({buffs:l})=>{if(!l)return null;const c=Object.entries(l);return c.length?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:c.map(([m,o])=>{const{desc:p,...j}=o||{};return a.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400",children:m==="satisfied"?"":""}),a.jsx("p",{className:"text-sm text-gray-200 mt-1 font-semibold",children:p}),vi("",Dc(j))]},m)})}):null},f2=({tags:l})=>!l||!l.length?null:a.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(c=>a.jsx("span",{className:"px-2 py-0.5 text-[11px] uppercase tracking-wide bg-gray-800/70 border border-gray-700 rounded-full text-gray-300",children:c},c))}),p2=({show:l,onClose:c})=>{const[m,o]=V.useState(Tc[0].id),[p,j]=V.useState(""),[v,w]=V.useState(null),[g,y]=V.useState(!0);V.useEffect(()=>{l&&w(M=>M||(rp[m]?.[0]?.id??null))},[l,m]);const k=V.useMemo(()=>rp[m]||[],[m]),_=p.trim().toLowerCase(),E=V.useMemo(()=>_?k.filter(M=>`${M.name} ${M.summary||""}`.toLowerCase().includes(_)):k,[k,_]);V.useEffect(()=>{if(!E.length){w(null);return}E.some(M=>M.id===v)||w(E[0].id)},[E,v]);const U=E.find(M=>M.id===v)||k.find(M=>M.id===v)||E[0],D=M=>{w(M),y(!1)};return l?a.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-0 sm:p-4",children:a.jsxs("div",{className:"bg-gray-900/95 backdrop-blur-lg sm:rounded-2xl border-t sm:border border-indigo-500/40 shadow-2xl w-full max-w-6xl h-full sm:h-[90vh] flex flex-col overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-6 py-2 sm:py-4 border-b border-gray-800 bg-gray-900",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] sm:text-xs uppercase tracking-widest text-indigo-400 mb-0.5 sm:mb-1",children:"CIVILIZATION KNOWLEDGE BASE"}),a.jsxs("h2",{className:"text-base sm:text-2xl font-bold text-white flex items-center gap-1 sm:gap-2",children:[a.jsx(N,{name:"BookOpen",size:18,className:"text-indigo-300 sm:w-6 sm:h-6"}),""]})]}),a.jsx("button",{onClick:c,className:"p-1.5 sm:p-2 rounded-lg border border-gray-700 text-gray-300 hover:text-white hover:border-gray-500 transition-colors","aria-label":"",children:a.jsx(N,{name:"X",size:18,className:"sm:w-5 sm:h-5"})})]}),a.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[a.jsxs("aside",{className:`${g?"flex":"hidden"} lg:flex w-full lg:w-72 border-r border-gray-800 bg-gray-900/60 flex-col overflow-y-auto absolute lg:relative inset-0 lg:inset-auto z-10`,children:[a.jsx("div",{className:"grid grid-cols-2 gap-1 sm:gap-2 p-2 sm:p-4",children:Tc.map(M=>{const A=M.id===m;return a.jsxs("button",{type:"button",onClick:()=>o(M.id),className:`flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border text-[10px] sm:text-xs font-medium transition-colors ${A?"border-indigo-400 bg-indigo-900/40 text-indigo-100":"border-gray-700 text-gray-400 hover:text-gray-100 hover:border-gray-500"}`,children:[a.jsx(N,{name:M.icon,size:12,className:"sm:w-3.5 sm:h-3.5"}),a.jsx("span",{className:"truncate",children:M.label})]},M.id)})}),a.jsx("div",{className:"px-2 sm:px-4 pb-2",children:a.jsxs("div",{className:"relative",children:[a.jsx(N,{name:"Search",size:12,className:"text-gray-500 absolute left-2 sm:left-3 top-1/2 -translate-y-1/2 sm:w-3.5 sm:h-3.5"}),a.jsx("input",{type:"text",value:p,onChange:M=>j(M.target.value),placeholder:`${Tc.find(M=>M.id===m)?.label}...`,className:"w-full bg-gray-800/70 border border-gray-700 rounded-lg pl-7 sm:pl-9 pr-2 sm:pr-3 py-1.5 sm:py-2 text-[11px] sm:text-xs text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto px-2 sm:px-3 pb-4 space-y-0.5 sm:space-y-1",children:E.length===0?a.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 px-2 py-3 sm:py-4 text-center border border-dashed border-gray-800 rounded-lg",children:""}):E.map(M=>{const A=M.id===v;return a.jsxs("button",{type:"button",onClick:()=>D(M.id),className:`w-full text-left px-2 sm:px-3 py-1.5 sm:py-2.5 rounded-lg sm:rounded-xl border transition-all ${A?"bg-indigo-900/30 border-indigo-500/40 shadow-sm":"bg-transparent border-transparent hover:bg-gray-800/50 hover:border-gray-700"}`,children:[a.jsxs("p",{className:`text-xs sm:text-sm font-semibold flex items-center gap-1 sm:gap-2 ${A?"text-indigo-200":"text-gray-300"}`,children:[a.jsx(N,{name:M.icon||"Bookmark",size:12,className:`${A?"text-indigo-300":M.iconColor} sm:w-3.5 sm:h-3.5`}),a.jsx("span",{className:"truncate",children:M.name})]}),M.summary&&a.jsx("p",{className:"text-[10px] sm:text-[11px] text-gray-500 mt-0.5 truncate ml-4 sm:ml-6",children:M.summary})]},M.id)})})]}),a.jsx("section",{className:`${g?"hidden":"flex"} lg:flex flex-1 flex-col bg-gray-900/30 overflow-hidden`,children:U?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-3 sm:p-6 border-b border-gray-800 bg-gray-800/20",children:[a.jsxs("button",{onClick:()=>y(!0),className:"lg:hidden mb-2 flex items-center gap-1 text-indigo-300 hover:text-white text-xs font-semibold bg-indigo-900/30 hover:bg-indigo-900/60 border border-indigo-500/40 rounded-full px-3 py-1 transition-all",children:[a.jsx(N,{name:"ChevronLeft",size:14}),a.jsx("span",{children:""})]}),a.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[a.jsx("div",{className:"p-2 sm:p-3 rounded-lg sm:rounded-2xl bg-gray-800 shadow-lg border border-gray-700",children:a.jsx(N,{name:U.icon||"Book",size:20,className:`${U.iconColor} sm:w-8 sm:h-8`})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-[10px] sm:text-xs uppercase tracking-widest text-indigo-400 mb-0.5 sm:mb-1",children:Tc.find(M=>M.id===m)?.label}),a.jsx("h3",{className:"text-lg sm:text-3xl font-bold text-white truncate",children:U.name}),U.summary&&a.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-0.5 sm:mt-1 line-clamp-2",children:U.summary})]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-8 space-y-4 sm:space-y-8",children:x2(U)})]}):a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500 opacity-50 p-4",children:[a.jsx(N,{name:"BookOpen",size:48,className:"mb-3 sm:w-16 sm:h-16 sm:mb-4"}),a.jsx("p",{className:"text-xs sm:text-base text-center",children:""})]})})]})]})}):null},x2=l=>{const{data:c,type:m}=l;if(!c)return a.jsx("p",{className:"text-gray-400",children:""});switch(m){case"mechanics":return h2(c);case"economy":return g2(c);case"building":return y2(c);case"military":return b2(c);case"technology":return v2(c);case"decree":return j2(c);case"resource":return N2(c);default:return a.jsx("div",{className:"space-y-4",children:a.jsx("p",{className:"text-gray-300",children:l.summary||""})})}},h2=l=>Array.isArray(l)?a.jsx("div",{className:"space-y-3 sm:space-y-6 max-w-3xl",children:l.map((c,m)=>c.type==="h4"?a.jsx("h4",{className:"text-sm sm:text-lg font-bold text-indigo-300 mt-3 sm:mt-6 mb-1 sm:mb-2 pb-1 sm:pb-2 border-b border-gray-700",children:c.text},m):c.type==="p"?a.jsx("p",{className:"text-gray-300 leading-5 sm:leading-7 text-xs sm:text-sm",children:c.text},m):c.type==="list"?a.jsx("ul",{className:"list-disc list-inside space-y-1 sm:space-y-2 bg-gray-800/40 p-2 sm:p-4 rounded-lg border border-gray-700/50",children:c.items.map((o,p)=>a.jsx("li",{className:"text-gray-300 text-xs sm:text-sm leading-tight sm:leading-normal",children:o},p))},m):null)}):null,g2=l=>{const c=[l.weight!==void 0&&{label:"",value:Qa(l.weight)},l.tax!==void 0&&{label:" ()",value:Qa(l.tax)},l.headTaxBase!==void 0&&{label:"",value:`${Qa(l.headTaxBase)} /`},l.wealthWeight!==void 0&&{label:"",value:Qa(l.wealthWeight)},l.influenceBase!==void 0&&{label:"",value:Qa(l.influenceBase)},l.startingWealth!==void 0&&{label:"",value:`${Qa(l.startingWealth)} `},l.defaultResource&&{label:"",value:bp(l.defaultResource).name}].filter(Boolean);return a.jsxs("div",{className:"space-y-3 sm:space-y-6",children:[a.jsx("div",{className:"bg-gray-800/40 p-2 sm:p-4 rounded-lg sm:rounded-xl border border-gray-700/50",children:a.jsx("p",{className:"text-gray-300 leading-relaxed text-xs sm:text-sm",children:l.desc})}),a.jsx(ji,{rows:c}),Dl("",l.needs),a.jsx(m2,{buffs:l.buffs})]})},y2=l=>{const c=[l.cat&&{label:"",value:i2[l.cat]||l.cat},l.owner&&{label:"",value:yp(l.owner)},(l.epoch!==void 0||l.unlockEpoch!==void 0)&&{label:"",value:pr(l.epoch??l.unlockEpoch)},l.requiresTech&&{label:"",value:gp(l.requiresTech)}].filter(Boolean);return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gray-800/40 p-4 rounded-xl border border-gray-700/50",children:a.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:l.desc})}),a.jsx(ji,{rows:c}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Dl("",l.baseCost),Dl("",l.output),Dl("",l.input),u2(l.jobs)]})]})},b2=l=>{const c=[l.category&&{label:"",value:r2[l.category]||l.category},l.epoch!==void 0&&{label:"",value:pr(l.epoch)},l.populationCost!==void 0&&{label:"",value:Qa(l.populationCost)},l.trainingTime!==void 0&&{label:" ()",value:Qa(l.trainingTime)},l.attack!==void 0&&{label:"",value:Qa(l.attack)},l.defense!==void 0&&{label:"",value:Qa(l.defense)},l.speed!==void 0&&{label:"",value:Qa(l.speed)},l.range!==void 0&&{label:"",value:Qa(l.range)}].filter(Boolean);return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gray-800/40 p-4 rounded-xl border border-gray-700/50",children:a.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:l.desc})}),a.jsx(ji,{rows:c}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Dl("",l.recruitCost),Dl("",l.maintenanceCost)]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[vi("",l.abilities),vi("",Dc(l.counters).map(m=>m.replace("infantry","").replace("cavalry","").replace("archer","").replace("siege","")))]})]})},v2=l=>{const c=[l.epoch!==void 0&&{label:"",value:pr(l.epoch)}].filter(Boolean);return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gray-800/40 p-4 rounded-xl border border-gray-700/50",children:a.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:l.desc})}),a.jsx(ji,{rows:c}),Dl("",l.cost),vi("",Dc(l.effects))]})},j2=l=>{const c=[l.category&&{label:"",value:l.category==="economy"?"":l.category==="military"?"":l.category==="culture"?"":""},l.unlockEpoch!==void 0&&{label:"",value:pr(l.unlockEpoch)}].filter(Boolean);return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gray-800/40 p-4 rounded-xl border border-gray-700/50",children:a.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:l.desc})}),a.jsx(ji,{rows:c}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx("div",{className:"p-4 bg-green-900/20 border border-green-800/30 rounded-lg",children:vi("",l.effects)}),a.jsx("div",{className:"p-4 bg-red-900/20 border border-red-800/30 rounded-lg",children:vi("",l.drawbacks)})]})]})},N2=l=>{const c=[l.basePrice!==void 0&&{label:"",value:`${Qa(l.basePrice)} `},l.type&&{label:"",value:l.type==="currency"?"":l.type==="virtual"?"":""},l.unlockEpoch!==void 0&&{label:"",value:pr(l.unlockEpoch)},l.unlockTech&&{label:"",value:gp(l.unlockTech)},l.defaultOwner&&{label:"",value:yp(l.defaultOwner)}].filter(Boolean);return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gray-800/40 p-4 rounded-xl border border-gray-700/50",children:a.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:l.desc||""})}),a.jsx(ji,{rows:c}),a.jsx(f2,{tags:l.tags})]})},w2=({unit:l,resources:c,market:m,militaryWageRatio:o=1,army:p={},onRecruit:j,onDisband:v,onClose:w})=>{if(!l)return a.jsxs("div",{className:"text-center text-gray-400 py-8",children:[a.jsx(N,{name:"AlertCircle",size:32,className:"mx-auto mb-2"}),a.jsx("p",{children:""})]});const g=Ys(l.recruitCost,m),y=m?.prices?.food??(Me.food?.basePrice||1),k=(l.maintenanceCost?.food||0)*y*o,_=Object.entries(l.recruitCost).every(([D,M])=>(c[D]||0)>=M)&&(c.silver||0)>=g,E=p[l.id]||0,U=E>0;return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-700",children:[a.jsx("div",{className:"w-12 h-12 bg-red-900/30 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(N,{name:"Swords",size:24,className:"text-red-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-lg font-bold text-white leading-tight",children:l.name}),a.jsx("p",{className:"text-xs text-gray-400 leading-tight truncate",children:l.type})]})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-1.5",children:[a.jsxs("div",{className:"bg-gray-700/50 rounded p-1.5 border border-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[a.jsx(N,{name:"Sword",size:12,className:"text-red-400"}),a.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""})]}),a.jsx("div",{className:"text-sm font-bold text-white font-mono leading-none",children:l.attack})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded p-1.5 border border-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[a.jsx(N,{name:"Shield",size:12,className:"text-blue-400"}),a.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""})]}),a.jsx("div",{className:"text-sm font-bold text-white font-mono leading-none",children:l.defense})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded p-1.5 border border-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[a.jsx(N,{name:"Zap",size:12,className:"text-yellow-400"}),a.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""})]}),a.jsx("div",{className:"text-sm font-bold text-yellow-300 font-mono leading-none",children:l.speed})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded p-1.5 border border-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[a.jsx(N,{name:"Clock",size:12,className:"text-purple-400"}),a.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""})]}),a.jsxs("div",{className:"text-sm font-bold text-purple-300 font-mono leading-none",children:[l.trainingTime,""]})]})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[a.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[a.jsx(N,{name:"Package",size:12,className:"text-amber-400"}),""]}),a.jsxs("div",{className:"space-y-1",children:[Object.entries(l.recruitCost).map(([D,M])=>{const A=Me[D],S=(c[D]||0)>=M;return a.jsx("div",{className:"bg-gray-800/40 rounded px-2 py-1",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(N,{name:A?.icon||"Box",size:14,className:A?.color||"text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-300",children:A?.name||D})]}),a.jsxs("span",{className:`text-xs font-bold font-mono ${S?"text-green-400":"text-red-400"}`,children:[M," (",(c[D]||0).toFixed(1),")"]})]})},D)}),a.jsx("div",{className:"bg-gray-800/40 rounded px-2 py-1 border-t border-gray-700 mt-1",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(N,{name:"Coins",size:14,className:"text-yellow-400"}),a.jsx("span",{className:"text-xs text-gray-300",children:""})]}),a.jsx("span",{className:`text-xs font-bold font-mono ${(c.silver||0)>=g?"text-green-400":"text-red-400"}`,children:dn(g)})]})})]})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[a.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[a.jsx(N,{name:"TrendingDown",size:12,className:"text-red-400"}),""]}),a.jsxs("div",{className:"bg-gray-800/40 rounded px-2 py-1.5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-[9px] text-gray-400",children:""}),a.jsx("span",{className:"text-xs font-bold text-white font-mono",children:l.maintenanceCost?.food||0})]}),a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-[9px] text-gray-400",children:""}),a.jsxs("span",{className:"text-xs font-bold text-white font-mono",children:[y.toFixed(2)," "]})]}),a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-[9px] text-gray-400",children:""}),a.jsxs("span",{className:"text-xs font-bold text-white font-mono",children:["",o.toFixed(2)]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-1 border-t border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(N,{name:"Coins",size:12,className:"text-yellow-400"}),a.jsx("span",{className:"text-xs text-gray-300",children:""})]}),a.jsxs("span",{className:"text-sm font-bold text-yellow-300 font-mono",children:[k.toFixed(2)," /"]})]})]})]}),l.desc&&a.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[a.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1 flex items-center gap-1",children:[a.jsx(N,{name:"Info",size:12,className:"text-blue-400"}),""]}),a.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:l.desc})]}),a.jsx("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(N,{name:"Users",size:14,className:"text-blue-400"}),a.jsx("span",{className:"text-xs text-gray-300",children:""})]}),a.jsxs("span",{className:"text-sm font-bold text-white font-mono",children:[E," "]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[a.jsxs("button",{onClick:()=>{j&&(j(l.id),w())},disabled:!_||!j,className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-bold text-sm transition-all ${_&&j?"bg-green-600 hover:bg-green-500 text-white shadow-lg hover:shadow-xl active:scale-95":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[a.jsx(N,{name:"Plus",size:18}),a.jsx("span",{children:""})]}),a.jsxs("button",{onClick:()=>{v&&(v(l.id),w())},disabled:!U||!v,className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-bold text-sm transition-all ${U&&v?"bg-red-600 hover:bg-red-500 text-white shadow-lg hover:shadow-xl active:scale-95":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[a.jsx(N,{name:"Minus",size:18}),a.jsx("span",{children:""})]})]})]})},C2=is.reduce((l,c)=>{if(!c.requiresTech)return l;const m=c.requiresTech;return l[m]||(l[m]=[]),l[m].push(c.name||c.id),l},{}),M2=({tech:l,status:c,resources:m,market:o,onResearch:p,onClose:j})=>{if(!l)return a.jsxs("div",{className:"text-center text-gray-400 py-8",children:[a.jsx(N,{name:"AlertCircle",size:32,className:"mx-auto mb-2"}),a.jsx("p",{children:""})]});const v=Ys(l.cost,o),w=c==="unlocked",g=C2[l.id]||[],y=!w&&Object.entries(l.cost).every(([k,_])=>(m[k]||0)>=_)&&(m.silver||0)>=v;return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-700",children:[a.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0 ${w?"bg-green-900/30":"bg-blue-900/30"}`,children:w?a.jsx(N,{name:"Check",size:24,className:"text-green-400"}):a.jsx(N,{name:"Lightbulb",size:24,className:"text-blue-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h2",{className:"text-lg font-bold text-white leading-tight flex items-center gap-2",children:[l.name,w&&a.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-600 text-white rounded",children:""})]}),a.jsx("p",{className:"text-xs text-gray-400 leading-tight truncate",children:l.desc})]})]}),l.effect&&a.jsxs("div",{className:"bg-blue-900/30 rounded p-2 border border-blue-500/30",children:[a.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[a.jsx(N,{name:"Sparkles",size:12,className:"text-blue-400"}),""]}),a.jsx("p",{className:"text-xs text-blue-300 leading-relaxed",children:l.effect})]}),g.length>0&&a.jsxs("div",{className:"bg-amber-900/30 rounded p-2 border border-amber-500/30",children:[a.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[a.jsx(N,{name:"Building",size:12,className:"text-amber-400"}),""]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:g.map((k,_)=>a.jsx("span",{className:"text-xs px-2 py-0.5 bg-amber-900/40 border border-amber-600/40 rounded text-amber-300",children:k},_))})]}),!w&&a.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[a.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[a.jsx(N,{name:"Package",size:12,className:"text-purple-400"}),""]}),a.jsxs("div",{className:"space-y-1",children:[Object.entries(l.cost).map(([k,_])=>{const E=Me[k],U=(m[k]||0)>=_;return a.jsx("div",{className:"bg-gray-800/40 rounded px-2 py-1",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(N,{name:E?.icon||"Box",size:14,className:E?.color||"text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-300",children:E?.name||k})]}),a.jsxs("span",{className:`text-xs font-bold font-mono ${U?"text-green-400":"text-red-400"}`,children:[Math.round(_)," (",Math.round(m[k]||0),")"]})]})},k)}),a.jsx("div",{className:"bg-gray-800/40 rounded px-2 py-1 border-t border-gray-700 mt-1",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(N,{name:"Coins",size:14,className:"text-yellow-400"}),a.jsx("span",{className:"text-xs text-gray-300",children:""})]}),a.jsx("span",{className:`text-xs font-bold font-mono ${(m.silver||0)>=v?"text-green-400":"text-red-400"}`,children:dn(v)})]})})]})]}),w&&a.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded p-3 text-center",children:[a.jsx(N,{name:"CheckCircle",size:32,className:"text-green-400 mx-auto mb-2"}),a.jsx("p",{className:"text-sm font-bold text-green-300",children:""}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:""})]}),!w&&a.jsx("div",{className:"pt-2",children:a.jsxs("button",{onClick:()=>{p&&(p(l.id),j())},disabled:!y||!p,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-bold text-sm transition-all ${y&&p?"bg-blue-600 hover:bg-blue-500 text-white shadow-lg hover:shadow-xl active:scale-95":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[a.jsx(N,{name:"Lightbulb",size:18}),a.jsx("span",{children:""})]})})]})},_2=({decree:l,onToggle:c,onClose:m})=>{if(!l)return a.jsxs("div",{className:"text-center text-gray-400 py-8",children:[a.jsx(N,{name:"AlertCircle",size:32,className:"mx-auto mb-2"}),a.jsx("p",{children:""})]});const o=l.active;return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-700",children:[a.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0 ${o?"bg-green-900/40":"bg-purple-900/30"}`,children:o?a.jsx(N,{name:"Check",size:24,className:"text-green-400"}):a.jsx(N,{name:"FileText",size:24,className:"text-purple-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h2",{className:"text-lg font-bold text-white leading-tight flex items-center gap-2",children:[l.name,o&&a.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-600 text-white rounded",children:""})]}),a.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:l.desc})]})]}),a.jsx("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-gray-400",children:""}),a.jsxs("span",{className:"text-xs font-bold text-white",children:[l.category==="economy"&&"",l.category==="military"&&"",l.category==="culture"&&"",l.category==="social"&&""]})]})}),l.effects&&l.effects.length>0&&a.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded p-2",children:[a.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[a.jsx(N,{name:"TrendingUp",size:12,className:"text-green-400"}),""]}),a.jsx("div",{className:"space-y-1",children:l.effects.map((p,j)=>a.jsxs("div",{className:"flex items-start gap-1.5 bg-green-900/20 rounded px-2 py-1",children:[a.jsx(N,{name:"Plus",size:14,className:"text-green-400 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-xs text-green-300 leading-relaxed",children:p})]},j))})]}),l.drawbacks&&l.drawbacks.length>0&&a.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded p-2",children:[a.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[a.jsx(N,{name:"TrendingDown",size:12,className:"text-red-400"}),""]}),a.jsx("div",{className:"space-y-1",children:l.drawbacks.map((p,j)=>a.jsxs("div",{className:"flex items-start gap-1.5 bg-red-900/20 rounded px-2 py-1",children:[a.jsx(N,{name:"Minus",size:14,className:"text-red-400 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-xs text-red-300 leading-relaxed",children:p})]},j))})]}),l.unlockEpoch!==void 0&&l.unlockEpoch>0&&a.jsx("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-gray-400",children:""}),a.jsxs("span",{className:"text-xs font-bold text-purple-300",children:[" ",l.unlockEpoch+1]})]})}),a.jsxs("div",{className:`rounded p-3 border ${o?"bg-green-900/20 border-green-500/30":"bg-gray-700/50 border-gray-600"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(N,{name:o?"CheckCircle":"Circle",size:20,className:o?"text-green-400":"text-gray-400"}),a.jsx("span",{className:`text-sm font-bold ${o?"text-green-300":"text-gray-300"}`,children:o?"":""})]}),a.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:o?"":'""'}),"      "]}),a.jsx("div",{className:"pt-2",children:a.jsxs("button",{onClick:()=>{c&&(c(l.id),m())},disabled:!c,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-bold text-sm transition-all ${c?o?"bg-red-600 hover:bg-red-500 text-white shadow-lg hover:shadow-xl active:scale-95":"bg-green-600 hover:bg-green-500 text-white shadow-lg hover:shadow-xl active:scale-95":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[a.jsx(N,{name:o?"XCircle":"CheckCircle",size:18}),a.jsx("span",{children:o?"":""})]})})]})},T2=({event:l,onSelectOption:c,onClose:m})=>{if(!l)return null;const o=v=>Me&&Me[v]?.name||v,p=v=>Fe&&Fe[v]?.name||v,j=v=>{c(l.id,v),m()};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`flex-shrink-0 w-16 h-16 rounded-lg flex items-center justify-center shadow-lg ${l.isDiplomaticEvent?"bg-gradient-to-br from-blue-500 to-purple-600":"bg-gradient-to-br from-yellow-500 to-orange-600"}`,children:a.jsx(N,{name:l.icon,size:32,className:"text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:l.name}),l.isDiplomaticEvent&&a.jsx("span",{className:"inline-block px-2 py-1 text-xs font-semibold bg-blue-600/30 text-blue-300 rounded",children:""})]})]}),l.image&&a.jsx("div",{className:"w-full h-48 bg-gray-700 rounded-lg overflow-hidden",children:a.jsx("img",{src:l.image,alt:l.name,className:"w-full h-full object-cover"})}),a.jsx("div",{className:"bg-gray-700/50 rounded-lg p-4 border border-gray-600",children:a.jsx("p",{className:"text-gray-200 leading-relaxed",children:l.description})}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:""}),l.options.map(v=>a.jsx("button",{onClick:()=>j(v),className:"w-full text-left bg-gray-700 hover:bg-gray-600 rounded-lg p-4 border border-gray-600 hover:border-yellow-500 transition-all group",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-white font-semibold mb-1 group-hover:text-yellow-400 transition-colors",children:v.text}),v.description&&a.jsx("p",{className:"text-gray-400 text-sm mb-2",children:v.description}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[v.effects.resources&&Object.entries(v.effects.resources).map(([w,g])=>a.jsxs("span",{className:`text-xs px-2 py-1 rounded ${g>0?"bg-green-900/50 text-green-300":"bg-red-900/50 text-red-300"}`,children:[o(w),": ",g>0?"+":"",g]},w)),v.effects.population&&a.jsxs("span",{className:`text-xs px-2 py-1 rounded ${v.effects.population>0?"bg-green-900/50 text-green-300":"bg-red-900/50 text-red-300"}`,children:[": ",v.effects.population>0?"+":"",v.effects.population]}),v.effects.stability&&a.jsxs("span",{className:`text-xs px-2 py-1 rounded ${v.effects.stability>0?"bg-green-900/50 text-green-300":"bg-red-900/50 text-red-300"}`,children:[": ",v.effects.stability>0?"+":"",v.effects.stability]}),v.effects.science&&a.jsxs("span",{className:`text-xs px-2 py-1 rounded ${v.effects.science>0?"bg-green-900/50 text-green-300":"bg-red-900/50 text-red-300"}`,children:[": ",v.effects.science>0?"+":"",v.effects.science]}),v.effects.approval&&Object.entries(v.effects.approval).map(([w,g])=>a.jsxs("span",{className:`text-xs px-2 py-1 rounded ${g>0?"bg-green-900/50 text-green-300":"bg-red-900/50 text-red-300"}`,children:[p(w),": ",g>0?"+":"",g]},w))]})]}),a.jsx(N,{name:"ChevronRight",size:20,className:"text-gray-500 group-hover:text-yellow-400 transition-colors flex-shrink-0 mt-1"})]})},v.id))]}),a.jsx("div",{className:"bg-blue-900/30 border border-blue-700/50 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(N,{name:"Info",size:16,className:"text-blue-400 flex-shrink-0 mt-0.5"}),a.jsx("p",{className:"text-blue-300 text-sm",children:""})]})})]})};function k2(){const l=ph();return l?a.jsx(E2,{gameState:l}):(console.error("gameState is null or undefined"),a.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:""}),a.jsx("p",{children:""})]})}))}function E2({gameState:l}){Ah(l.epoch);const c=fe=>{l?.setLogs&&l.setLogs(Ge=>[fe,...Ge].slice(0,8))},m=kh(l,c);Th(l,c,m);const{playSound:o,SOUND_TYPES:p}=K0(),[j,v]=V.useState(!1),w=V.useRef(null),[g,y]=V.useState(!1);V.useEffect(()=>{const fe=l.daysElapsed||0;if(w.current==null){w.current=fe;return}if(l.isPaused||l.currentEvent)return;fe-w.current>=30&&(w.current=fe,Math.random()<.1&&m.triggerRandomEvent())},[l.daysElapsed,l.isPaused,l.currentEvent,m]);const[k,_]=V.useState(!1),[E,U]=V.useState(!1),[D,M]=V.useState(!1),[A,S]=V.useState({type:null,data:null}),ie=fe=>{if(!fe)return;const Ge={...fe,activatedAt:l.daysElapsed||0};l.setActiveFestivalEffects(We=>[...We,Ge]),l.setFestivalModal(null),l.setIsPaused(!1);const K=fe.type==="permanent"?"":"";c(` ${fe.name}${K}`)},ae=(fe,Ge)=>{const K=Ge||{};m.handleEventOption(fe,Ge),o(p.CLICK),l.setIsPaused(!1);const We=K.type==="permanent"?"":"";c(` ${K.name}${We}`)},ce=()=>{l.setShowTutorial(!1),localStorage.setItem("tutorial_completed","true"),c(" ")},Ce=()=>{l.setShowTutorial(!1),localStorage.setItem("tutorial_completed","true"),c(" ")},oe=()=>{l.setShowTutorial(!0),c(" ")},se=fe=>{l.setClicks(Ge=>[...Ge,{id:Date.now(),x:fe.clientX,y:fe.clientY,text:"+1",color:"text-white"}]),l.setResources(Ge=>({...Ge,silver:(Ge.silver||0)+1}))},B=fe=>{const Ge=is.find(K=>K.id===fe);Ge&&S({type:"building",data:Ge})},de=()=>S({type:null,data:null}),Q=fe=>{S({type:"stratum",data:fe})},I=fe=>{S({type:"unit",data:fe})},ge=(fe,Ge)=>{S({type:"tech",data:{tech:fe,status:Ge}})},ve=fe=>{S({type:"decree",data:fe})},G=l.taxes||{total:0,breakdown:{headTax:0,industryTax:0,subsidy:0},efficiency:1},me=J0(l.army||{}),b=l.market?.prices?.food??(Me.food?.basePrice||1),O=l.militaryWageRatio||1,R=me*b*O,ne=l.tradeStats||{income:0,expense:0},L=(ne.income||0)-(ne.expense||0),u=G.total+L-R,C=Sc(l.daysElapsed||0),$=l.hasAutoSave(),J=()=>{l.saveGame()},le=()=>{l.loadGame({source:"manual"})},De=()=>{if(!l.hasAutoSave()){c(" ");return}l.loadGame({source:"auto"})};return a.jsxs("div",{className:"min-h-screen font-epic text-theme-text transition-all duration-1000 relative",children:[a.jsx(Z0,{opacity:.03,className:"fixed inset-0 z-0 text-ancient-gold"}),l.clicks.map(fe=>a.jsx(_b,{...fe,onComplete:()=>l.setClicks(Ge=>Ge.filter(K=>K.id!==fe.id))},fe.id)),a.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 glass-epic border-b border-theme-border",children:a.jsx(Eb,{gameState:l,taxes:G,netSilverPerDay:u,tradeStats:ne,armyFoodNeed:me,onResourceDetailClick:fe=>l.setResourceDetailView(fe),onPopulationDetailClick:()=>l.setPopulationDetailView(!0),onStrataClick:()=>v(!0),onMarketClick:()=>y(!0),onEmpireSceneClick:()=>M(!0),gameControls:a.jsx(Pf,{isPaused:l.isPaused,gameSpeed:l.gameSpeed,onPauseToggle:()=>l.setIsPaused(!l.isPaused),onSpeedChange:fe=>l.setGameSpeed(fe),onSave:J,onLoadManual:le,onLoadAuto:De,onSettings:()=>_(!0),onReset:()=>l.resetGame(),onTutorial:oe,onWiki:()=>U(!0),autoSaveAvailable:$,onTriggerEvent:m.triggerRandomEvent})})}),a.jsx("div",{className:"lg:hidden fixed bottom-24 right-4 z-40",children:a.jsx("div",{className:"flex flex-col-reverse gap-2 scale-95 origin-bottom-right",children:a.jsx(Pf,{isPaused:l.isPaused,gameSpeed:l.gameSpeed,onPauseToggle:()=>l.setIsPaused(!l.isPaused),onSpeedChange:fe=>l.setGameSpeed(fe),onSave:J,onLoadManual:le,onLoadAuto:De,onSettings:()=>_(!0),onReset:()=>l.resetGame(),onTutorial:oe,onWiki:()=>U(!0),menuDirection:"up",autoSaveAvailable:$,onTriggerEvent:m.triggerRandomEvent})})}),a.jsx("div",{className:"h-24 lg:h-32"}),a.jsx("main",{className:"max-w-[1920px] mx-auto px-3 sm:px-4 py-4 pb-24 lg:pb-4",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 sm:gap-4",children:[a.jsxs("aside",{className:"hidden lg:block lg:col-span-2 space-y-4 order-2 lg:order-1",children:[a.jsxs(kb,{variant:"ancient",className:"p-3 animate-fade-in-up",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-ancient-gold blur-md opacity-50"}),a.jsx(N,{name:"Package",size:16,className:"text-ancient-gold relative"})]}),a.jsx("h3",{className:"text-sm font-bold text-ancient",children:""})]}),a.jsx(Tb,{className:"text-ancient-gold/50 mb-3"}),a.jsx(Zf,{resources:l.resources,rates:l.rates,market:l.market,epoch:l.epoch,onDetailClick:fe=>l.setResourceDetailView(fe)})]}),a.jsx(Ff,{popStructure:l.popStructure,classApproval:l.classApproval,classInfluence:l.classInfluence,stability:l.stability,population:l.population,activeBuffs:l.activeBuffs,activeDebuffs:l.activeDebuffs,classWealth:l.classWealth,classWealthDelta:l.classWealthDelta,classShortages:l.classShortages,classIncome:l.classIncome,classExpense:l.classExpense,dayScale:1,onDetailClick:Q}),a.jsxs("button",{onClick:se,className:"relative w-full py-3 btn-epic rounded-xl font-bold shadow-epic active:scale-95 transition-all flex items-center justify-center gap-2 overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-600/20 via-emerald-500/30 to-emerald-600/20 animate-shimmer"}),a.jsx(N,{name:"Pickaxe",size:16,className:"relative z-10"}),a.jsx("span",{className:"relative z-10",children:""})]})]}),a.jsx("section",{className:"lg:col-span-8 space-y-3 sm:space-y-4 order-1 lg:order-2",children:a.jsxs("div",{className:"relative glass-epic rounded-2xl border border-theme-border shadow-monument overflow-hidden min-h-[500px] animate-epic-entrance",children:[a.jsx(Z0,{opacity:.02,className:"absolute inset-0 text-ancient-gold"}),a.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-ancient-gold/50 to-transparent"}),a.jsxs("div",{className:"hidden lg:flex border-b border-ancient-gold/20 bg-gradient-to-r from-ancient-ink/50 via-ancient-stone/30 to-ancient-ink/50 overflow-x-auto relative",children:[a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-ancient-gold/30 to-transparent"}),[{id:"build",label:"",icon:"Hammer"},{id:"military",label:"",icon:"Swords"},{id:"tech",label:"",icon:"Cpu"},{id:"politics",label:"",icon:"Gavel"},{id:"diplo",label:"",icon:"Globe"}].map(fe=>a.jsxs("button",{onClick:()=>l.setActiveTab(fe.id),className:`relative flex-1 min-w-[80px] py-3 flex items-center justify-center gap-2 text-sm font-bold transition-all group ${l.activeTab===fe.id?"text-ancient border-b-2 border-ancient-gold shadow-glow-gold":"text-gray-400 hover:text-ancient-gold"}`,children:[l.activeTab===fe.id&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-ancient-gold/10 to-transparent"}),a.jsx(N,{name:fe.icon,size:16,className:"relative z-10"}),a.jsx("span",{className:"relative z-10",children:fe.label}),l.activeTab!==fe.id&&a.jsx("div",{className:"absolute inset-0 bg-ancient-gold/0 group-hover:bg-ancient-gold/5 transition-colors"})]},fe.id))]}),a.jsxs("div",{className:"p-3 sm:p-4 relative",children:[l.activeTab==="build"&&a.jsx(Hb,{buildings:l.buildings,resources:l.resources,epoch:l.epoch,techsUnlocked:l.techsUnlocked,popStructure:l.popStructure,jobFill:l.jobFill,onBuy:m.buyBuilding,onSell:m.sellBuilding,market:l.market,onShowDetails:B}),l.activeTab==="military"&&a.jsx(qb,{army:l.army,militaryQueue:l.militaryQueue,resources:l.resources,epoch:l.epoch,population:l.population,buildings:l.buildings,nations:l.nations,selectedTarget:l.selectedTarget,onRecruit:m.recruitUnit,onDisband:m.disbandUnit,onCancelTraining:m.cancelTraining,onSelectTarget:l.setSelectedTarget,onLaunchBattle:m.launchBattle,market:l.market,militaryWageRatio:l.militaryWageRatio,onUpdateWageRatio:l.setMilitaryWageRatio,techsUnlocked:l.techsUnlocked,onShowUnitDetails:I}),l.activeTab==="tech"&&a.jsx(Yb,{techsUnlocked:l.techsUnlocked,epoch:l.epoch,resources:l.resources,population:l.population,onResearch:m.researchTech,onUpgradeEpoch:m.upgradeEpoch,canUpgradeEpoch:m.canUpgradeEpoch,market:l.market,onShowTechDetails:ge}),l.activeTab==="politics"&&a.jsx(Pb,{decrees:l.decrees,onToggle:m.toggleDecree,taxPolicies:l.taxPolicies,onUpdateTaxPolicies:l.setTaxPolicies,popStructure:l.popStructure,buildings:l.buildings,market:l.market,epoch:l.epoch,techsUnlocked:l.techsUnlocked,onShowDecreeDetails:ve,jobFill:l.jobFill,jobsAvailable:l.jobsAvailable}),l.activeTab==="diplo"&&a.jsx(Zb,{nations:l.nations,epoch:l.epoch,market:l.market,resources:l.resources,daysElapsed:l.daysElapsed,onDiplomaticAction:m.handleDiplomaticAction,tradeRoutes:l.tradeRoutes,onTradeRouteAction:m.handleTradeRouteAction,playerInstallmentPayment:l.playerInstallmentPayment,jobsAvailable:l.jobsAvailable,popStructure:l.popStructure})]})]})}),a.jsxs("aside",{className:"hidden lg:block lg:col-span-2 order-3 space-y-4",children:[a.jsx("div",{className:"bg-gray-900/60 backdrop-blur-md rounded-xl border border-white/10 shadow-glass overflow-hidden",children:a.jsx(Jf,{daysElapsed:l.daysElapsed,season:C.season,population:l.population,stability:l.stability,wealth:l.resources.silver,epoch:l.epoch})}),a.jsx(Rb,{logs:l.logs}),a.jsxs("div",{className:"bg-blue-900/20 backdrop-blur-sm border border-blue-500/20 p-4 rounded-xl text-xs text-gray-300 space-y-2 shadow-md",children:[a.jsxs("h4",{className:"font-bold text-blue-300 flex items-center gap-2",children:[a.jsx(N,{name:"Lightbulb",size:14}),""]}),a.jsxs("p",{children:[" ",a.jsx("span",{className:"text-white",children:""}),""]}),a.jsxs("p",{children:[" ",a.jsx("span",{className:"text-white",children:""}),"",a.jsx("span",{className:"text-yellow-300",children:""}),""]}),a.jsxs("p",{children:[" ",a.jsx("span",{className:"text-white",children:""}),"",a.jsx("b",{children:""}),"",a.jsx("b",{children:""}),"",a.jsx("b",{children:""}),""]}),a.jsxs("p",{children:[" ",a.jsx("span",{className:"text-white",children:""}),""]})]}),a.jsxs("div",{className:"bg-emerald-900/20 backdrop-blur-sm border border-emerald-500/20 p-4 rounded-xl text-xs text-gray-200 space-y-3 shadow-md",children:[a.jsxs("h4",{className:"font-bold text-emerald-300 flex items-center gap-2",children:[a.jsx(N,{name:"BookOpen",size:14}),""]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-white font-semibold",children:"1. "}),a.jsxs("p",{children:["",a.jsx("span",{className:"text-yellow-300",children:""}),""]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-white font-semibold",children:"2. "}),a.jsxs("p",{children:["",a.jsx("span",{className:"text-green-300",children:""}),"",a.jsx("span",{className:"text-white",children:""}),""]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-white font-semibold",children:"3. "}),a.jsxs("p",{children:["",a.jsx("span",{className:"text-white",children:""}),"",a.jsx("span",{className:"text-white",children:""}),""]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-white font-semibold",children:"4. "}),a.jsxs("p",{children:["",a.jsx("span",{className:"text-blue-300",children:""}),""]})]})]})]})]})}),a.jsx(Sb,{activeTab:l.activeTab,onTabChange:fe=>l.setActiveTab(fe),epoch:l.epoch}),a.jsx(Dn,{isOpen:A.type==="building",onClose:de,title:A.data?.name||"",showHeader:!1,children:A.type==="building"&&a.jsx(zb,{building:A.data,gameState:l,onBuy:m.buyBuilding,onSell:m.sellBuilding,taxPolicies:l.taxPolicies,onUpdateTaxPolicies:l.setTaxPolicies})}),a.jsx(Dn,{isOpen:A.type==="stratum",onClose:de,title:"",showHeader:!0,children:A.type==="stratum"&&a.jsx(Ob,{stratumKey:A.data,popStructure:l.popStructure,classApproval:l.classApproval,classInfluence:l.classInfluence,classWealth:l.classWealth,classWealthDelta:l.classWealthDelta,classIncome:l.classIncome,classExpense:l.classExpense,classShortages:l.classShortages,activeBuffs:l.activeBuffs,activeDebuffs:l.activeDebuffs,dayScale:1,taxPolicies:l.taxPolicies,onUpdateTaxPolicies:l.setTaxPolicies,onClose:de})}),a.jsx(Dn,{isOpen:A.type==="unit",onClose:de,title:"",showHeader:!0,children:A.type==="unit"&&a.jsx(w2,{unit:A.data,resources:l.resources,market:l.market,militaryWageRatio:l.militaryWageRatio,army:l.army,onRecruit:m.recruitUnit,onDisband:m.disbandUnit,onClose:de})}),a.jsx(Dn,{isOpen:A.type==="tech",onClose:de,title:"",showHeader:!0,children:A.type==="tech"&&A.data&&a.jsx(M2,{tech:A.data.tech,status:A.data.status,resources:l.resources,market:l.market,onResearch:m.researchTech,onClose:de})}),a.jsx(Dn,{isOpen:A.type==="decree",onClose:de,title:"",showHeader:!0,children:A.type==="decree"&&a.jsx(_2,{decree:A.data,onToggle:m.toggleDecree,onClose:de})}),a.jsx(Dn,{isOpen:j,onClose:()=>v(!1),title:"",showHeader:!0,children:a.jsx(Ff,{popStructure:l.popStructure,classApproval:l.classApproval,classInfluence:l.classInfluence,stability:l.stability,population:l.population,activeBuffs:l.activeBuffs,activeDebuffs:l.activeDebuffs,classWealth:l.classWealth,classWealthDelta:l.classWealthDelta,classShortages:l.classShortages,classIncome:l.classIncome,classExpense:l.classExpense,dayScale:1,onDetailClick:Q,hideTitle:!0})}),a.jsx(Dn,{isOpen:g,onClose:()=>y(!1),title:"",showHeader:!0,children:a.jsx(Zf,{resources:l.resources,rates:l.rates,market:l.market,epoch:l.epoch,onDetailClick:fe=>{y(!1),l.setResourceDetailView(fe)}})}),a.jsx(Dn,{isOpen:D,onClose:()=>M(!1),title:` - ${C.season}  ${C.year}`,showHeader:!0,children:a.jsx("div",{className:"bg-gray-900/60 backdrop-blur-md rounded-lg border border-white/10 shadow-glass overflow-hidden",children:a.jsx(Jf,{daysElapsed:l.daysElapsed,season:C.season,population:l.population,stability:l.stability,wealth:l.resources.silver,epoch:l.epoch})})}),l.battleResult&&a.jsx(Qb,{result:l.battleResult,onClose:()=>l.setBattleResult(null)}),l.stratumDetailView&&a.jsx(Jb,{stratumKey:l.stratumDetailView,popStructure:l.popStructure,classApproval:l.classApproval,classInfluence:l.classInfluence,classWealth:l.classWealth,classWealthHistory:l.classWealthHistory,totalInfluence:l.totalInfluence,totalWealth:l.totalWealth,activeBuffs:l.activeBuffs,activeDebuffs:l.activeDebuffs,epoch:l.epoch,techsUnlocked:l.techsUnlocked,history:l.history,stability:l.stability,onClose:()=>l.setStratumDetailView(null)}),l.resourceDetailView&&a.jsx(Ib,{resourceKey:l.resourceDetailView,resources:l.resources,market:l.market,buildings:l.buildings,popStructure:l.popStructure,army:l.army,history:l.history,onClose:()=>l.setResourceDetailView(null),taxPolicies:l.taxPolicies,onUpdateTaxPolicies:l.setTaxPolicies}),l.populationDetailView&&a.jsx(e2,{isOpen:l.populationDetailView,onClose:()=>l.setPopulationDetailView(!1),population:l.population,maxPop:l.maxPop,popStructure:l.popStructure,history:l.history}),l.festivalModal&&a.jsx(t2,{festivalOptions:l.festivalModal.options,year:l.festivalModal.year,epoch:l.epoch,onSelect:ie}),a.jsx(Dn,{isOpen:!!l.currentEvent,onClose:()=>l.setCurrentEvent(null),title:"",showHeader:!0,preventBackdropClose:!0,showCloseButton:!l.currentEvent?.options?.length,preventEscapeClose:!!l.currentEvent?.options?.length,children:l.currentEvent&&a.jsx(T2,{event:l.currentEvent,onSelectOption:ae,onClose:()=>l.setCurrentEvent(null)})}),a.jsx(a2,{show:l.showTutorial,onComplete:ce,onSkip:Ce,onOpenWiki:()=>U(!0)}),a.jsx(p2,{show:E,onClose:()=>U(!1)}),k&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:()=>_(!1),"aria-hidden":"true"}),a.jsx("div",{className:"relative w-full max-w-lg z-10",children:a.jsx(Bb,{isAutoSaveEnabled:l.isAutoSaveEnabled,autoSaveInterval:l.autoSaveInterval,onToggleAutoSave:l.setIsAutoSaveEnabled,onIntervalChange:l.setAutoSaveInterval,lastAutoSaveTime:l.lastAutoSaveTime,onManualSave:J,onManualLoad:le,onAutoLoad:De,autoSaveAvailable:$,isSaving:l.isSaving,onClose:()=>_(!1)})})]})]})}window.addEventListener("error",l=>{console.error("Global error:",l.error)});window.addEventListener("unhandledrejection",l=>{console.error("Unhandled promise rejection:",l.reason)});const Y0=document.getElementById("root");if(!Y0)console.error("Root element not found!"),document.body.innerHTML='<div style="color: white; background: #1a1a1a; padding: 20px; font-family: sans-serif;"><h1></h1><p> index.html </p></div>';else try{th.createRoot(Y0).render(a.jsx(k2,{})),console.log("App rendered successfully")}catch(l){console.error("Failed to render app:",l),Y0.innerHTML='<div style="color: white; background: #1a1a1a; padding: 20px; font-family: sans-serif;"><h1></h1><p>'+l.message+"</p></div>"}
