(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))c(m);new MutationObserver(m=>{for(const b of m)if(b.type==="childList")for(const g of b.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&c(g)}).observe(document,{childList:!0,subtree:!0});function d(m){const b={};return m.integrity&&(b.integrity=m.integrity),m.referrerPolicy&&(b.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?b.credentials="include":m.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function c(m){if(m.ep)return;m.ep=!0;const b=d(m);fetch(m.href,b)}})();function Dx(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var vd={exports:{}},il={};var Ym;function Px(){if(Ym)return il;Ym=1;var s=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function d(c,m,b){var g=null;if(b!==void 0&&(g=""+b),m.key!==void 0&&(g=""+m.key),"key"in m){b={};for(var v in m)v!=="key"&&(b[v]=m[v])}else b=m;return m=b.ref,{$$typeof:s,type:c,key:g,ref:m!==void 0?m:null,props:b}}return il.Fragment=o,il.jsx=d,il.jsxs=d,il}var Xm;function Rx(){return Xm||(Xm=1,vd.exports=Px()),vd.exports}var t=Rx(),jd={exports:{}},rl={},Nd={exports:{}},wd={};var Zm;function zx(){return Zm||(Zm=1,(function(s){function o(_,B){var re=_.length;_.push(B);e:for(;0<re;){var F=re-1>>>1,me=_[F];if(0<m(me,B))_[F]=B,_[re]=me,re=F;else break e}}function d(_){return _.length===0?null:_[0]}function c(_){if(_.length===0)return null;var B=_[0],re=_.pop();if(re!==B){_[0]=re;e:for(var F=0,me=_.length,h=me>>>1;F<h;){var A=2*(F+1)-1,Y=_[A],R=A+1,Q=_[R];if(0>m(Y,re))R<me&&0>m(Q,Y)?(_[F]=Q,_[R]=re,F=R):(_[F]=Y,_[A]=re,F=A);else if(R<me&&0>m(Q,re))_[F]=Q,_[R]=re,F=R;else break e}}return B}function m(_,B){var re=_.sortIndex-B.sortIndex;return re!==0?re:_.id-B.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var b=performance;s.unstable_now=function(){return b.now()}}else{var g=Date,v=g.now();s.unstable_now=function(){return g.now()-v}}var x=[],y=[],w=1,k=null,M=3,z=!1,C=!1,T=!1,D=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function W(_){for(var B=d(y);B!==null;){if(B.callback===null)c(y);else if(B.startTime<=_)c(y),B.sortIndex=B.expirationTime,o(x,B);else break;B=d(y)}}function be(_){if(T=!1,W(_),!C)if(d(x)!==null)C=!0,G||(G=!0,se());else{var B=d(y);B!==null&&I(be,B.startTime-_)}}var G=!1,P=-1,pe=5,Pe=-1;function ne(){return D?!0:!(s.unstable_now()-Pe<pe)}function ae(){if(D=!1,G){var _=s.unstable_now();Pe=_;var B=!0;try{e:{C=!1,T&&(T=!1,S(P),P=-1),z=!0;var re=M;try{t:{for(W(_),k=d(x);k!==null&&!(k.expirationTime>_&&ne());){var F=k.callback;if(typeof F=="function"){k.callback=null,M=k.priorityLevel;var me=F(k.expirationTime<=_);if(_=s.unstable_now(),typeof me=="function"){k.callback=me,W(_),B=!0;break t}k===d(x)&&c(x),W(_)}else c(x);k=d(x)}if(k!==null)B=!0;else{var h=d(y);h!==null&&I(be,h.startTime-_),B=!1}}break e}finally{k=null,M=re,z=!1}B=void 0}}finally{B?se():G=!1}}}var se;if(typeof q=="function")se=function(){q(ae)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,de=je.port2;je.port1.onmessage=ae,se=function(){de.postMessage(null)}}else se=function(){E(ae,0)};function I(_,B){P=E(function(){_(s.unstable_now())},B)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(_){_.callback=null},s.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pe=0<_?Math.floor(1e3/_):5},s.unstable_getCurrentPriorityLevel=function(){return M},s.unstable_next=function(_){switch(M){case 1:case 2:case 3:var B=3;break;default:B=M}var re=M;M=B;try{return _()}finally{M=re}},s.unstable_requestPaint=function(){D=!0},s.unstable_runWithPriority=function(_,B){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var re=M;M=_;try{return B()}finally{M=re}},s.unstable_scheduleCallback=function(_,B,re){var F=s.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?F+re:F):re=F,_){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=re+me,_={id:w++,callback:B,priorityLevel:_,startTime:re,expirationTime:me,sortIndex:-1},re>F?(_.sortIndex=re,o(y,_),d(x)===null&&_===d(y)&&(T?(S(P),P=-1):T=!0,I(be,re-F))):(_.sortIndex=me,o(x,_),C||z||(C=!0,G||(G=!0,se()))),_},s.unstable_shouldYield=ne,s.unstable_wrapCallback=function(_){var B=M;return function(){var re=M;M=B;try{return _.apply(this,arguments)}finally{M=re}}}})(wd)),wd}var Qm;function $x(){return Qm||(Qm=1,Nd.exports=zx()),Nd.exports}var _d={exports:{}},Ft={};var Jm;function Ox(){if(Jm)return Ft;Jm=1;var s=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),g=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),M=Symbol.iterator;function z(h){return h===null||typeof h!="object"?null:(h=M&&h[M]||h["@@iterator"],typeof h=="function"?h:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,D={};function E(h,A,Y){this.props=h,this.context=A,this.refs=D,this.updater=Y||C}E.prototype.isReactComponent={},E.prototype.setState=function(h,A){if(typeof h!="object"&&typeof h!="function"&&h!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,h,A,"setState")},E.prototype.forceUpdate=function(h){this.updater.enqueueForceUpdate(this,h,"forceUpdate")};function S(){}S.prototype=E.prototype;function q(h,A,Y){this.props=h,this.context=A,this.refs=D,this.updater=Y||C}var W=q.prototype=new S;W.constructor=q,T(W,E.prototype),W.isPureReactComponent=!0;var be=Array.isArray;function G(){}var P={H:null,A:null,T:null,S:null},pe=Object.prototype.hasOwnProperty;function Pe(h,A,Y){var R=Y.ref;return{$$typeof:s,type:h,key:A,ref:R!==void 0?R:null,props:Y}}function ne(h,A){return Pe(h.type,A,h.props)}function ae(h){return typeof h=="object"&&h!==null&&h.$$typeof===s}function se(h){var A={"=":"=0",":":"=2"};return"$"+h.replace(/[=:]/g,function(Y){return A[Y]})}var je=/\/+/g;function de(h,A){return typeof h=="object"&&h!==null&&h.key!=null?se(""+h.key):A.toString(36)}function I(h){switch(h.status){case"fulfilled":return h.value;case"rejected":throw h.reason;default:switch(typeof h.status=="string"?h.then(G,G):(h.status="pending",h.then(function(A){h.status==="pending"&&(h.status="fulfilled",h.value=A)},function(A){h.status==="pending"&&(h.status="rejected",h.reason=A)})),h.status){case"fulfilled":return h.value;case"rejected":throw h.reason}}throw h}function _(h,A,Y,R,Q){var ye=typeof h;(ye==="undefined"||ye==="boolean")&&(h=null);var Ne=!1;if(h===null)Ne=!0;else switch(ye){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(h.$$typeof){case s:case o:Ne=!0;break;case w:return Ne=h._init,_(Ne(h._payload),A,Y,R,Q)}}if(Ne)return Q=Q(h),Ne=R===""?"."+de(h,0):R,be(Q)?(Y="",Ne!=null&&(Y=Ne.replace(je,"$&/")+"/"),_(Q,A,Y,"",function(tt){return tt})):Q!=null&&(ae(Q)&&(Q=ne(Q,Y+(Q.key==null||h&&h.key===Q.key?"":(""+Q.key).replace(je,"$&/")+"/")+Ne)),A.push(Q)),1;Ne=0;var ke=R===""?".":R+":";if(be(h))for(var Je=0;Je<h.length;Je++)R=h[Je],ye=ke+de(R,Je),Ne+=_(R,A,Y,ye,Q);else if(Je=z(h),typeof Je=="function")for(h=Je.call(h),Je=0;!(R=h.next()).done;)R=R.value,ye=ke+de(R,Je++),Ne+=_(R,A,Y,ye,Q);else if(ye==="object"){if(typeof h.then=="function")return _(I(h),A,Y,R,Q);throw A=String(h),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function B(h,A,Y){if(h==null)return h;var R=[],Q=0;return _(h,R,"","",function(ye){return A.call(Y,ye,Q++)}),R}function re(h){if(h._status===-1){var A=h._result;A=A(),A.then(function(Y){(h._status===0||h._status===-1)&&(h._status=1,h._result=Y)},function(Y){(h._status===0||h._status===-1)&&(h._status=2,h._result=Y)}),h._status===-1&&(h._status=0,h._result=A)}if(h._status===1)return h._result.default;throw h._result}var F=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(A))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},me={map:B,forEach:function(h,A,Y){B(h,function(){A.apply(this,arguments)},Y)},count:function(h){var A=0;return B(h,function(){A++}),A},toArray:function(h){return B(h,function(A){return A})||[]},only:function(h){if(!ae(h))throw Error("React.Children.only expected to receive a single React element child.");return h}};return Ft.Activity=k,Ft.Children=me,Ft.Component=E,Ft.Fragment=d,Ft.Profiler=m,Ft.PureComponent=q,Ft.StrictMode=c,Ft.Suspense=x,Ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Ft.__COMPILER_RUNTIME={__proto__:null,c:function(h){return P.H.useMemoCache(h)}},Ft.cache=function(h){return function(){return h.apply(null,arguments)}},Ft.cacheSignal=function(){return null},Ft.cloneElement=function(h,A,Y){if(h==null)throw Error("The argument must be a React element, but you passed "+h+".");var R=T({},h.props),Q=h.key;if(A!=null)for(ye in A.key!==void 0&&(Q=""+A.key),A)!pe.call(A,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&A.ref===void 0||(R[ye]=A[ye]);var ye=arguments.length-2;if(ye===1)R.children=Y;else if(1<ye){for(var Ne=Array(ye),ke=0;ke<ye;ke++)Ne[ke]=arguments[ke+2];R.children=Ne}return Pe(h.type,Q,R)},Ft.createContext=function(h){return h={$$typeof:g,_currentValue:h,_currentValue2:h,_threadCount:0,Provider:null,Consumer:null},h.Provider=h,h.Consumer={$$typeof:b,_context:h},h},Ft.createElement=function(h,A,Y){var R,Q={},ye=null;if(A!=null)for(R in A.key!==void 0&&(ye=""+A.key),A)pe.call(A,R)&&R!=="key"&&R!=="__self"&&R!=="__source"&&(Q[R]=A[R]);var Ne=arguments.length-2;if(Ne===1)Q.children=Y;else if(1<Ne){for(var ke=Array(Ne),Je=0;Je<Ne;Je++)ke[Je]=arguments[Je+2];Q.children=ke}if(h&&h.defaultProps)for(R in Ne=h.defaultProps,Ne)Q[R]===void 0&&(Q[R]=Ne[R]);return Pe(h,ye,Q)},Ft.createRef=function(){return{current:null}},Ft.forwardRef=function(h){return{$$typeof:v,render:h}},Ft.isValidElement=ae,Ft.lazy=function(h){return{$$typeof:w,_payload:{_status:-1,_result:h},_init:re}},Ft.memo=function(h,A){return{$$typeof:y,type:h,compare:A===void 0?null:A}},Ft.startTransition=function(h){var A=P.T,Y={};P.T=Y;try{var R=h(),Q=P.S;Q!==null&&Q(Y,R),typeof R=="object"&&R!==null&&typeof R.then=="function"&&R.then(G,F)}catch(ye){F(ye)}finally{A!==null&&Y.types!==null&&(A.types=Y.types),P.T=A}},Ft.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Ft.use=function(h){return P.H.use(h)},Ft.useActionState=function(h,A,Y){return P.H.useActionState(h,A,Y)},Ft.useCallback=function(h,A){return P.H.useCallback(h,A)},Ft.useContext=function(h){return P.H.useContext(h)},Ft.useDebugValue=function(){},Ft.useDeferredValue=function(h,A){return P.H.useDeferredValue(h,A)},Ft.useEffect=function(h,A){return P.H.useEffect(h,A)},Ft.useEffectEvent=function(h){return P.H.useEffectEvent(h)},Ft.useId=function(){return P.H.useId()},Ft.useImperativeHandle=function(h,A,Y){return P.H.useImperativeHandle(h,A,Y)},Ft.useInsertionEffect=function(h,A){return P.H.useInsertionEffect(h,A)},Ft.useLayoutEffect=function(h,A){return P.H.useLayoutEffect(h,A)},Ft.useMemo=function(h,A){return P.H.useMemo(h,A)},Ft.useOptimistic=function(h,A){return P.H.useOptimistic(h,A)},Ft.useReducer=function(h,A,Y){return P.H.useReducer(h,A,Y)},Ft.useRef=function(h){return P.H.useRef(h)},Ft.useState=function(h){return P.H.useState(h)},Ft.useSyncExternalStore=function(h,A,Y){return P.H.useSyncExternalStore(h,A,Y)},Ft.useTransition=function(){return P.H.useTransition()},Ft.version="19.2.0",Ft}var Km;function Ld(){return Km||(Km=1,_d.exports=Ox()),_d.exports}var Md={exports:{}},Yn={};var ef;function Bx(){if(ef)return Yn;ef=1;var s=Ld();function o(x){var y="https://react.dev/errors/"+x;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)y+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+x+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(){}var c={d:{f:d,r:function(){throw Error(o(522))},D:d,C:d,L:d,m:d,X:d,S:d,M:d},p:0,findDOMNode:null},m=Symbol.for("react.portal");function b(x,y,w){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:k==null?null:""+k,children:x,containerInfo:y,implementation:w}}var g=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(x,y){if(x==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,Yn.createPortal=function(x,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(o(299));return b(x,y,null,w)},Yn.flushSync=function(x){var y=g.T,w=c.p;try{if(g.T=null,c.p=2,x)return x()}finally{g.T=y,c.p=w,c.d.f()}},Yn.preconnect=function(x,y){typeof x=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,c.d.C(x,y))},Yn.prefetchDNS=function(x){typeof x=="string"&&c.d.D(x)},Yn.preinit=function(x,y){if(typeof x=="string"&&y&&typeof y.as=="string"){var w=y.as,k=v(w,y.crossOrigin),M=typeof y.integrity=="string"?y.integrity:void 0,z=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;w==="style"?c.d.S(x,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:k,integrity:M,fetchPriority:z}):w==="script"&&c.d.X(x,{crossOrigin:k,integrity:M,fetchPriority:z,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Yn.preinitModule=function(x,y){if(typeof x=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var w=v(y.as,y.crossOrigin);c.d.M(x,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&c.d.M(x)},Yn.preload=function(x,y){if(typeof x=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var w=y.as,k=v(w,y.crossOrigin);c.d.L(x,w,{crossOrigin:k,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Yn.preloadModule=function(x,y){if(typeof x=="string")if(y){var w=v(y.as,y.crossOrigin);c.d.m(x,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else c.d.m(x)},Yn.requestFormReset=function(x){c.d.r(x)},Yn.unstable_batchedUpdates=function(x,y){return x(y)},Yn.useFormState=function(x,y,w){return g.H.useFormState(x,y,w)},Yn.useFormStatus=function(){return g.H.useHostTransitionStatus()},Yn.version="19.2.0",Yn}var tf;function Zf(){if(tf)return Md.exports;tf=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(o){console.error(o)}}return s(),Md.exports=Bx(),Md.exports}var af;function Lx(){if(af)return rl;af=1;var s=$x(),o=Ld(),d=Zf();function c(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)a+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function b(e){var a=e,n=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(n=a.return),e=a.return;while(e)}return a.tag===3?n:null}function g(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function v(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function x(e){if(b(e)!==e)throw Error(c(188))}function y(e){var a=e.alternate;if(!a){if(a=b(e),a===null)throw Error(c(188));return a!==e?null:e}for(var n=e,i=a;;){var r=n.return;if(r===null)break;var l=r.alternate;if(l===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===l.child){for(l=r.child;l;){if(l===n)return x(r),e;if(l===i)return x(r),a;l=l.sibling}throw Error(c(188))}if(n.return!==i.return)n=r,i=l;else{for(var p=!1,N=r.child;N;){if(N===n){p=!0,n=r,i=l;break}if(N===i){p=!0,i=r,n=l;break}N=N.sibling}if(!p){for(N=l.child;N;){if(N===n){p=!0,n=l,i=r;break}if(N===i){p=!0,i=l,n=r;break}N=N.sibling}if(!p)throw Error(c(189))}}if(n.alternate!==i)throw Error(c(190))}if(n.tag!==3)throw Error(c(188));return n.stateNode.current===n?e:a}function w(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=w(e),a!==null)return a;e=e.sibling}return null}var k=Object.assign,M=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),q=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),Pe=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function se(e){return e===null||typeof e!="object"?null:(e=ae&&e[ae]||e["@@iterator"],typeof e=="function"?e:null)}var je=Symbol.for("react.client.reference");function de(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===je?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case E:return"Profiler";case D:return"StrictMode";case be:return"Suspense";case G:return"SuspenseList";case Pe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case q:return e.displayName||"Context";case S:return(e._context.displayName||"Context")+".Consumer";case W:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case P:return a=e.displayName||null,a!==null?a:de(e.type)||"Memo";case pe:a=e._payload,e=e._init;try{return de(e(a))}catch{}}return null}var I=Array.isArray,_=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=d.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},F=[],me=-1;function h(e){return{current:e}}function A(e){0>me||(e.current=F[me],F[me]=null,me--)}function Y(e,a){me++,F[me]=e.current,e.current=a}var R=h(null),Q=h(null),ye=h(null),Ne=h(null);function ke(e,a){switch(Y(ye,a),Y(Q,e),Y(R,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?gm(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=gm(a),e=ym(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}A(R),Y(R,e)}function Je(){A(R),A(Q),A(ye)}function tt(e){e.memoizedState!==null&&Y(Ne,e);var a=R.current,n=ym(a,e.type);a!==n&&(Y(Q,e),Y(R,n))}function bt(e){Q.current===e&&(A(R),A(Q)),Ne.current===e&&(A(Ne),tl._currentValue=re)}var ft,vt;function we(e){if(ft===void 0)try{throw Error()}catch(n){var a=n.stack.trim().match(/\n( *(at )?)/);ft=a&&a[1]||"",vt=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ft+e+vt}var Ze=!1;function pt(e,a){if(!e||Ze)return"";Ze=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(a){var Re=function(){throw Error()};if(Object.defineProperty(Re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Re,[])}catch(ve){var xe=ve}Reflect.construct(e,[],Re)}else{try{Re.call()}catch(ve){xe=ve}e.call(Re.prototype)}}else{try{throw Error()}catch(ve){xe=ve}(Re=e())&&typeof Re.catch=="function"&&Re.catch(function(){})}}catch(ve){if(ve&&xe&&typeof ve.stack=="string")return[ve.stack,xe.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=i.DetermineComponentFrameRoot(),p=l[0],N=l[1];if(p&&N){var O=p.split(`
`),ue=N.split(`
`);for(r=i=0;i<O.length&&!O[i].includes("DetermineComponentFrameRoot");)i++;for(;r<ue.length&&!ue[r].includes("DetermineComponentFrameRoot");)r++;if(i===O.length||r===ue.length)for(i=O.length-1,r=ue.length-1;1<=i&&0<=r&&O[i]!==ue[r];)r--;for(;1<=i&&0<=r;i--,r--)if(O[i]!==ue[r]){if(i!==1||r!==1)do if(i--,r--,0>r||O[i]!==ue[r]){var Me=`
`+O[i].replace(" at new "," at ");return e.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",e.displayName)),Me}while(1<=i&&0<=r);break}}}finally{Ze=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?we(n):""}function xt(e,a){switch(e.tag){case 26:case 27:case 5:return we(e.type);case 16:return we("Lazy");case 13:return e.child!==a&&a!==null?we("Suspense Fallback"):we("Suspense");case 19:return we("SuspenseList");case 0:case 15:return pt(e.type,!1);case 11:return pt(e.type.render,!1);case 1:return pt(e.type,!0);case 31:return we("Activity");default:return""}}function jt(e){try{var a="",n=null;do a+=xt(e,n),n=e,e=e.return;while(e);return a}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var le=Object.prototype.hasOwnProperty,Ie=s.unstable_scheduleCallback,K=s.unstable_cancelCallback,Be=s.unstable_shouldYield,ze=s.unstable_requestPaint,$e=s.unstable_now,yt=s.unstable_getCurrentPriorityLevel,_t=s.unstable_ImmediatePriority,It=s.unstable_UserBlockingPriority,oa=s.unstable_NormalPriority,za=s.unstable_LowPriority,Ta=s.unstable_IdlePriority,en=s.log,$n=s.unstable_setDisableYieldValue,At=null,Z=null;function ee(e){if(typeof en=="function"&&$n(e),Z&&typeof Z.setStrictMode=="function")try{Z.setStrictMode(At,e)}catch{}}var te=Math.clz32?Math.clz32:H,$=Math.log,ge=Math.LN2;function H(e){return e>>>=0,e===0?32:31-($(e)/ge|0)|0}var he=256,oe=262144,Ae=4194304;function Le(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function We(e,a,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,l=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var N=i&134217727;return N!==0?(i=N&~l,i!==0?r=Le(i):(p&=N,p!==0?r=Le(p):n||(n=N&~e,n!==0&&(r=Le(n))))):(N=i&~l,N!==0?r=Le(N):p!==0?r=Le(p):n||(n=i&~e,n!==0&&(r=Le(n)))),r===0?0:a!==0&&a!==r&&(a&l)===0&&(l=r&-r,n=a&-a,l>=n||l===32&&(n&4194048)!==0)?a:r}function Te(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function Ue(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ke(){var e=Ae;return Ae<<=1,(Ae&62914560)===0&&(Ae=4194304),e}function Nt(e){for(var a=[],n=0;31>n;n++)a.push(e);return a}function Mt(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ga(e,a,n,i,r,l){var p=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var N=e.entanglements,O=e.expirationTimes,ue=e.hiddenUpdates;for(n=p&~n;0<n;){var Me=31-te(n),Re=1<<Me;N[Me]=0,O[Me]=-1;var xe=ue[Me];if(xe!==null)for(ue[Me]=null,Me=0;Me<xe.length;Me++){var ve=xe[Me];ve!==null&&(ve.lane&=-536870913)}n&=~Re}i!==0&&la(e,i,0),l!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=l&~(p&~a))}function la(e,a,n){e.pendingLanes|=a,e.suspendedLanes&=~a;var i=31-te(a);e.entangledLanes|=a,e.entanglements[i]=e.entanglements[i]|1073741824|n&261930}function et(e,a){var n=e.entangledLanes|=a;for(e=e.entanglements;n;){var i=31-te(n),r=1<<i;r&a|e[i]&a&&(e[i]|=a),n&=~r}}function ie(e,a){var n=a&-a;return n=(n&42)!==0?1:ct(n),(n&(e.suspendedLanes|a))!==0?0:n}function ct(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ve(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ce(){var e=B.p;return e!==0?e:(e=window.event,e===void 0?32:Wm(e.type))}function nt(e,a){var n=B.p;try{return B.p=e,a()}finally{B.p=n}}var qe=Math.random().toString(36).slice(2),_e="__reactFiber$"+qe,Dt="__reactProps$"+qe,Rt="__reactContainer$"+qe,mt="__reactEvents$"+qe,Kt="__reactListeners$"+qe,Ht="__reactHandles$"+qe,ca="__reactResources$"+qe,ra="__reactMarker$"+qe;function Ye(e){delete e[_e],delete e[Dt],delete e[mt],delete e[Kt],delete e[Ht]}function dn(e){var a=e[_e];if(a)return a;for(var n=e.parentNode;n;){if(a=n[Rt]||n[_e]){if(n=a.alternate,a.child!==null||n!==null&&n.child!==null)for(e=Mm(e);e!==null;){if(n=e[_e])return n;e=Mm(e)}return a}e=n,n=e.parentNode}return null}function Nn(e){if(e=e[_e]||e[Rt]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function qn(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(c(33))}function An(e){var a=e[ca];return a||(a=e[ca]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function wa(e){e[ra]=!0}var Jn=new Set,Sa={};function Vn(e,a){un(e,a),un(e+"Capture",a)}function un(e,a){for(Sa[e]=a,e=0;e<a.length;e++)Jn.add(a[e])}var Hs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),On={},ii={};function ri(e){return le.call(ii,e)?!0:le.call(On,e)?!1:Hs.test(e)?ii[e]=!0:(On[e]=!0,!1)}function Gn(e,a,n){if(ri(a))if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var i=a.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+n)}}function ss(e,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+n)}}function $a(e,a,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(a,n,""+i)}}function Ga(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function is(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Kn(e,a,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,l=i.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return r.call(this)},set:function(p){n=""+p,l.call(this,p)}}),Object.defineProperty(e,a,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(p){n=""+p},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function qs(e){if(!e._valueTracker){var a=is(e)?"checked":"value";e._valueTracker=Kn(e,a,""+e[a])}}function Es(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var n=a.getValue(),i="";return e&&(i=is(e)?e.checked?"true":"false":e.value),e=i,e!==n?(a.setValue(e),!0):!1}function rs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ts=/[\n"\\]/g;function Ba(e){return e.replace(Ts,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ss(e,a,n,i,r,l,p,N){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),a!=null?p==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+Ga(a)):e.value!==""+Ga(a)&&(e.value=""+Ga(a)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),a!=null?os(e,p,Ga(a)):n!=null?os(e,p,Ga(n)):i!=null&&e.removeAttribute("value"),r==null&&l!=null&&(e.defaultChecked=!!l),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?e.name=""+Ga(N):e.removeAttribute("name")}function Xs(e,a,n,i,r,l,p,N){if(l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(e.type=l),a!=null||n!=null){if(!(l!=="submit"&&l!=="reset"||a!=null)){qs(e);return}n=n!=null?""+Ga(n):"",a=a!=null?""+Ga(a):n,N||a===e.value||(e.value=a),e.defaultValue=a}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=N?e.checked:!!i,e.defaultChecked=!!i,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p),qs(e)}function os(e,a,n){a==="number"&&rs(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function De(e,a,n,i){if(e=e.options,a){a={};for(var r=0;r<n.length;r++)a["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=a.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Ga(n),a=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}a!==null||e[r].disabled||(a=e[r])}a!==null&&(a.selected=!0)}}function Ge(e,a,n){if(a!=null&&(a=""+Ga(a),a!==e.value&&(e.value=a),n==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=n!=null?""+Ga(n):""}function ot(e,a,n,i){if(a==null){if(i!=null){if(n!=null)throw Error(c(92));if(I(i)){if(1<i.length)throw Error(c(93));i=i[0]}n=i}n==null&&(n=""),a=n}n=Ga(a),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i),qs(e)}function Bt(e,a){if(a){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=a;return}}e.textContent=a}var at=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xe(e,a,n){var i=a.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":i?e.setProperty(a,n):typeof n!="number"||n===0||at.has(a)?a==="float"?e.cssFloat=n:e[a]=(""+n).trim():e[a]=n+"px"}function Tt(e,a,n){if(a!=null&&typeof a!="object")throw Error(c(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||a!=null&&a.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in a)i=a[r],a.hasOwnProperty(r)&&n[r]!==i&&Xe(e,r,i)}else for(var l in a)a.hasOwnProperty(l)&&Xe(e,l,a[l])}function it(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),da=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zt(e){return da.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Aa(){}var an=null;function Zs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vs=null,As=null;function ha(e){var a=Nn(e);if(a&&(e=a.stateNode)){var n=e[Dt]||null;e:switch(e=a.stateNode,a.type){case"input":if(Ss(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),a=n.name,n.type==="radio"&&a!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Ba(""+a)+'"][type="radio"]'),a=0;a<n.length;a++){var i=n[a];if(i!==e&&i.form===e.form){var r=i[Dt]||null;if(!r)throw Error(c(90));Ss(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(a=0;a<n.length;a++)i=n[a],i.form===e.form&&Es(i)}break e;case"textarea":Ge(e,n.value,n.defaultValue);break e;case"select":a=n.value,a!=null&&De(e,!!n.multiple,a,!1)}}}var _a=!1;function Bn(e,a,n){if(_a)return e(a,n);_a=!0;try{var i=e(a);return i}finally{if(_a=!1,(Vs!==null||As!==null)&&(Ql(),Vs&&(a=Vs,e=As,As=Vs=null,ha(a),e)))for(a=0;a<e.length;a++)ha(e[a])}}function Fa(e,a){var n=e.stateNode;if(n===null)return null;var i=n[Dt]||null;if(i===null)return null;n=i[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(c(231,a,typeof n));return n}var st=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wn=!1;if(st)try{var Ti={};Object.defineProperty(Ti,"passive",{get:function(){wn=!0}}),window.addEventListener("test",Ti,Ti),window.removeEventListener("test",Ti,Ti)}catch{wn=!1}var Gs=null,Ar=null,sr=null;function jo(){if(sr)return sr;var e,a=Ar,n=a.length,i,r="value"in Gs?Gs.value:Gs.textContent,l=r.length;for(e=0;e<n&&a[e]===r[e];e++);var p=n-e;for(i=1;i<=p&&a[n-i]===r[l-i];i++);return sr=r.slice(e,1<i?1-i:void 0)}function oi(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function Dr(){return!0}function ml(){return!1}function _n(e){function a(n,i,r,l,p){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=l,this.target=p,this.currentTarget=null;for(var N in e)e.hasOwnProperty(N)&&(n=e[N],this[N]=n?n(l):l[N]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Dr:ml,this.isPropagationStopped=ml,this}return k(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dr)},persist:function(){},isPersistent:Dr}),a}var li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pr=_n(li),ir=k({},li,{view:0,detail:0}),Rc=_n(ir),No,wo,rr,Rr=k({},ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:He,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rr&&(rr&&e.type==="mousemove"?(No=e.screenX-rr.screenX,wo=e.screenY-rr.screenY):wo=No=0,rr=e),No)},movementY:function(e){return"movementY"in e?e.movementY:wo}}),fl=_n(Rr),hl=k({},Rr,{dataTransfer:0}),or=_n(hl),zr=k({},ir,{relatedTarget:0}),_o=_n(zr),Dn=k({},li,{animationName:0,elapsedTime:0,pseudoElement:0}),hs=_n(Dn),Mo=k({},li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xl=_n(Mo),Gd=k({},li,{data:0}),gl=_n(Gd),u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},f={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fe(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=U[e])?!!a[e]:!1}function He(){return fe}var rt=k({},ir,{key:function(e){if(e.key){var a=u[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=oi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?f[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:He,charCode:function(e){return e.type==="keypress"?oi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Qe=_n(rt),lt=k({},Rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kt=_n(lt),$t=k({},ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:He}),dt=_n($t),Ot=k({},li,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ct=_n(Ot),St=k({},Rr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Da=_n(St),Ia=k({},li,{newState:0,oldState:0}),Oa=_n(Ia),tn=[9,13,27,32],pn=st&&"CompositionEvent"in window,Gt=null;st&&"documentMode"in document&&(Gt=document.documentMode);var ya=st&&"TextEvent"in window&&!Gt,qt=st&&(!pn||Gt&&8<Gt&&11>=Gt),Pt=" ",ut=!1;function Yt(e,a){switch(e){case"keyup":return tn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aa(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var La=!1;function Ua(e,a){switch(e){case"compositionend":return aa(a);case"keypress":return a.which!==32?null:(ut=!0,Pt);case"textInput":return e=a.data,e===Pt&&ut?null:e;default:return null}}function mn(e,a){if(La)return e==="compositionend"||!pn&&Yt(e,a)?(e=jo(),sr=Ar=Gs=null,La=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return qt&&a.locale!=="ko"?null:a.data;default:return null}}var nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function es(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!nn[e.type]:a==="textarea"}function Ma(e,a,n,i){Vs?As?As.push(i):As=[i]:Vs=i,a=sc(a,"onChange"),0<a.length&&(n=new Pr("onChange","change",null,n,i),e.push({event:n,listeners:a}))}var fn=null,xs=null;function Si(e){um(e,0)}function Fn(e){var a=qn(e);if(Es(a))return e}function Ai(e,a){if(e==="change")return a}var Qs=!1;if(st){var Ya;if(st){var Mn="oninput"in document;if(!Mn){var Pn=document.createElement("div");Pn.setAttribute("oninput","return;"),Mn=typeof Pn.oninput=="function"}Ya=Mn}else Ya=!1;Qs=Ya&&(!document.documentMode||9<document.documentMode)}function lr(){fn&&(fn.detachEvent("onpropertychange",ci),xs=fn=null)}function ci(e){if(e.propertyName==="value"&&Fn(xs)){var a=[];Ma(a,xs,e,Zs(e)),Bn(Si,a)}}function ko(e,a,n){e==="focusin"?(lr(),fn=a,xs=n,fn.attachEvent("onpropertychange",ci)):e==="focusout"&&lr()}function cr(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fn(xs)}function Ee(e,a){if(e==="click")return Fn(a)}function Ut(e,a){if(e==="input"||e==="change")return Fn(a)}function Jt(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var ba=typeof Object.is=="function"?Object.is:Jt;function ua(e,a){if(ba(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var n=Object.keys(e),i=Object.keys(a);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!le.call(a,r)||!ba(e[r],a[r]))return!1}return!0}function Xa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xt(e,a){var n=Xa(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=a&&i>=a)return{node:n,offset:a-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xa(n)}}function Vt(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Vt(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Wt(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=rs(e.document);a instanceof e.HTMLIFrameElement;){try{var n=typeof a.contentWindow.location.href=="string"}catch{n=!1}if(n)e=a.contentWindow;else break;a=rs(e.document)}return a}function pa(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var Wa=st&&"documentMode"in document&&11>=document.documentMode,Pa=null,Ha=null,hn=null,In=!1;function Rn(e,a,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;In||Pa==null||Pa!==rs(i)||(i=Pa,"selectionStart"in i&&pa(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),hn&&ua(hn,i)||(hn=i,i=sc(Ha,"onSelect"),0<i.length&&(a=new Pr("onSelect","select",null,a,n),e.push({event:a,listeners:i}),a.target=Pa)))}function kn(e,a){var n={};return n[e.toLowerCase()]=a.toLowerCase(),n["Webkit"+e]="webkit"+a,n["Moz"+e]="moz"+a,n}var Cn={animationend:kn("Animation","AnimationEnd"),animationiteration:kn("Animation","AnimationIteration"),animationstart:kn("Animation","AnimationStart"),transitionrun:kn("Transition","TransitionRun"),transitionstart:kn("Transition","TransitionStart"),transitioncancel:kn("Transition","TransitionCancel"),transitionend:kn("Transition","TransitionEnd")},xn={},Ds={};st&&(Ds=document.createElement("div").style,"AnimationEvent"in window||(delete Cn.animationend.animation,delete Cn.animationiteration.animation,delete Cn.animationstart.animation),"TransitionEvent"in window||delete Cn.transitionend.transition);function sn(e){if(xn[e])return xn[e];if(!Cn[e])return e;var a=Cn[e],n;for(n in a)if(a.hasOwnProperty(n)&&n in Ds)return xn[e]=a[n];return e}var gs=sn("animationend"),di=sn("animationiteration"),ts=sn("animationstart"),ys=sn("transitionrun"),gn=sn("transitionstart"),Js=sn("transitioncancel"),Ks=sn("transitionend"),$r=new Map,Or="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Or.push("scrollEnd");function bs(e,a){$r.set(e,a),Vn(a,[e])}var Br=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},as=[],Ps=0,dr=0;function yl(){for(var e=Ps,a=dr=Ps=0;a<e;){var n=as[a];as[a++]=null;var i=as[a];as[a++]=null;var r=as[a];as[a++]=null;var l=as[a];if(as[a++]=null,i!==null&&r!==null){var p=i.pending;p===null?r.next=r:(r.next=p.next,p.next=r),i.pending=r}l!==0&&Fd(n,r,l)}}function bl(e,a,n,i){as[Ps++]=e,as[Ps++]=a,as[Ps++]=n,as[Ps++]=i,dr|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function zc(e,a,n,i){return bl(e,a,n,i),vl(e)}function ur(e,a){return bl(e,null,null,a),vl(e)}function Fd(e,a,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,l=e.return;l!==null;)l.childLanes|=n,i=l.alternate,i!==null&&(i.childLanes|=n),l.tag===22&&(e=l.stateNode,e===null||e._visibility&1||(r=!0)),e=l,l=l.return;return e.tag===3?(l=e.stateNode,r&&a!==null&&(r=31-te(n),e=l.hiddenUpdates,i=e[r],i===null?e[r]=[a]:i.push(a),a.lane=n|536870912),l):null}function vl(e){if(50<Yo)throw Yo=0,V0=null,Error(c(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var Lr={};function hh(e,a,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(e,a,n,i){return new hh(e,a,n,i)}function $c(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ui(e,a){var n=e.alternate;return n===null?(n=vs(e.tag,a,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=a,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,a=e.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Id(e,a){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,a=n.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function jl(e,a,n,i,r,l){var p=0;if(i=e,typeof e=="function")$c(e)&&(p=1);else if(typeof e=="string")p=vx(e,n,R.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Pe:return e=vs(31,n,a,r),e.elementType=Pe,e.lanes=l,e;case T:return pr(n.children,r,l,a);case D:p=8,r|=24;break;case E:return e=vs(12,n,a,r|2),e.elementType=E,e.lanes=l,e;case be:return e=vs(13,n,a,r),e.elementType=be,e.lanes=l,e;case G:return e=vs(19,n,a,r),e.elementType=G,e.lanes=l,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:p=10;break e;case S:p=9;break e;case W:p=11;break e;case P:p=14;break e;case pe:p=16,i=null;break e}p=29,n=Error(c(130,e===null?"null":typeof e,"")),i=null}return a=vs(p,n,a,r),a.elementType=e,a.type=i,a.lanes=l,a}function pr(e,a,n,i){return e=vs(7,e,i,a),e.lanes=n,e}function Oc(e,a,n){return e=vs(6,e,null,a),e.lanes=n,e}function Yd(e){var a=vs(18,null,null,0);return a.stateNode=e,a}function Bc(e,a,n){return a=vs(4,e.children!==null?e.children:[],e.key,a),a.lanes=n,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var Xd=new WeakMap;function Rs(e,a){if(typeof e=="object"&&e!==null){var n=Xd.get(e);return n!==void 0?n:(a={value:e,source:a,stack:jt(a)},Xd.set(e,a),a)}return{value:e,source:a,stack:jt(a)}}var Ur=[],Wr=0,Nl=null,Co=0,zs=[],$s=0,Di=null,ei=1,ti="";function pi(e,a){Ur[Wr++]=Co,Ur[Wr++]=Nl,Nl=e,Co=a}function Zd(e,a,n){zs[$s++]=ei,zs[$s++]=ti,zs[$s++]=Di,Di=e;var i=ei;e=ti;var r=32-te(i)-1;i&=~(1<<r),n+=1;var l=32-te(a)+r;if(30<l){var p=r-r%5;l=(i&(1<<p)-1).toString(32),i>>=p,r-=p,ei=1<<32-te(a)+r|n<<r|i,ti=l+e}else ei=1<<l|n<<r|i,ti=e}function Lc(e){e.return!==null&&(pi(e,1),Zd(e,1,0))}function Uc(e){for(;e===Nl;)Nl=Ur[--Wr],Ur[Wr]=null,Co=Ur[--Wr],Ur[Wr]=null;for(;e===Di;)Di=zs[--$s],zs[$s]=null,ti=zs[--$s],zs[$s]=null,ei=zs[--$s],zs[$s]=null}function Qd(e,a){zs[$s++]=ei,zs[$s++]=ti,zs[$s++]=Di,ei=a.id,ti=a.overflow,Di=e}var Ln=null,qa=null,ia=!1,Pi=null,Os=!1,Wc=Error(c(519));function Ri(e){var a=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Eo(Rs(a,e)),Wc}function Jd(e){var a=e.stateNode,n=e.type,i=e.memoizedProps;switch(a[_e]=e,a[Dt]=i,n){case"dialog":ta("cancel",a),ta("close",a);break;case"iframe":case"object":case"embed":ta("load",a);break;case"video":case"audio":for(n=0;n<Zo.length;n++)ta(Zo[n],a);break;case"source":ta("error",a);break;case"img":case"image":case"link":ta("error",a),ta("load",a);break;case"details":ta("toggle",a);break;case"input":ta("invalid",a),Xs(a,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":ta("invalid",a);break;case"textarea":ta("invalid",a),ot(a,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||a.textContent===""+n||i.suppressHydrationWarning===!0||hm(a.textContent,n)?(i.popover!=null&&(ta("beforetoggle",a),ta("toggle",a)),i.onScroll!=null&&ta("scroll",a),i.onScrollEnd!=null&&ta("scrollend",a),i.onClick!=null&&(a.onclick=Aa),a=!0):a=!1,a||Ri(e,!0)}function Kd(e){for(Ln=e.return;Ln;)switch(Ln.tag){case 5:case 31:case 13:Os=!1;return;case 27:case 3:Os=!0;return;default:Ln=Ln.return}}function Hr(e){if(e!==Ln)return!1;if(!ia)return Kd(e),ia=!0,!1;var a=e.tag,n;if((n=a!==3&&a!==27)&&((n=a===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||id(e.type,e.memoizedProps)),n=!n),n&&qa&&Ri(e),Kd(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));qa=_m(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));qa=_m(e)}else a===27?(a=qa,Yi(e.type)?(e=dd,dd=null,qa=e):qa=a):qa=Ln?Ls(e.stateNode.nextSibling):null;return!0}function mr(){qa=Ln=null,ia=!1}function Hc(){var e=Pi;return e!==null&&(us===null?us=e:us.push.apply(us,e),Pi=null),e}function Eo(e){Pi===null?Pi=[e]:Pi.push(e)}var qc=h(null),fr=null,mi=null;function zi(e,a,n){Y(qc,a._currentValue),a._currentValue=n}function fi(e){e._currentValue=qc.current,A(qc)}function Vc(e,a,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,i!==null&&(i.childLanes|=a)):i!==null&&(i.childLanes&a)!==a&&(i.childLanes|=a),e===n)break;e=e.return}}function Gc(e,a,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var l=r.dependencies;if(l!==null){var p=r.child;l=l.firstContext;e:for(;l!==null;){var N=l;l=r;for(var O=0;O<a.length;O++)if(N.context===a[O]){l.lanes|=n,N=l.alternate,N!==null&&(N.lanes|=n),Vc(l.return,n,e),i||(p=null);break e}l=N.next}}else if(r.tag===18){if(p=r.return,p===null)throw Error(c(341));p.lanes|=n,l=p.alternate,l!==null&&(l.lanes|=n),Vc(p,n,e),p=null}else p=r.child;if(p!==null)p.return=r;else for(p=r;p!==null;){if(p===e){p=null;break}if(r=p.sibling,r!==null){r.return=p.return,p=r;break}p=p.return}r=p}}function qr(e,a,n,i){e=null;for(var r=a,l=!1;r!==null;){if(!l){if((r.flags&524288)!==0)l=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var p=r.alternate;if(p===null)throw Error(c(387));if(p=p.memoizedProps,p!==null){var N=r.type;ba(r.pendingProps.value,p.value)||(e!==null?e.push(N):e=[N])}}else if(r===Ne.current){if(p=r.alternate,p===null)throw Error(c(387));p.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(tl):e=[tl])}r=r.return}e!==null&&Gc(a,e,n,i),a.flags|=262144}function wl(e){for(e=e.firstContext;e!==null;){if(!ba(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function hr(e){fr=e,mi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Un(e){return eu(fr,e)}function _l(e,a){return fr===null&&hr(e),eu(e,a)}function eu(e,a){var n=a._currentValue;if(a={context:a,memoizedValue:n,next:null},mi===null){if(e===null)throw Error(c(308));mi=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else mi=mi.next=a;return n}var xh=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){a.aborted=!0,e.forEach(function(n){return n()})}},gh=s.unstable_scheduleCallback,yh=s.unstable_NormalPriority,yn={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fc(){return{controller:new xh,data:new Map,refCount:0}}function To(e){e.refCount--,e.refCount===0&&gh(yh,function(){e.controller.abort()})}var So=null,Ic=0,Vr=0,Gr=null;function bh(e,a){if(So===null){var n=So=[];Ic=0,Vr=Z0(),Gr={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Ic++,a.then(tu,tu),a}function tu(){if(--Ic===0&&So!==null){Gr!==null&&(Gr.status="fulfilled");var e=So;So=null,Vr=0,Gr=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function vh(e,a){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=a;for(var r=0;r<n.length;r++)(0,n[r])(a)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var au=_.S;_.S=function(e,a){Lp=$e(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&bh(e,a),au!==null&&au(e,a)};var xr=h(null);function Yc(){var e=xr.current;return e!==null?e:Ra.pooledCache}function Ml(e,a){a===null?Y(xr,xr.current):Y(xr,a.pool)}function nu(){var e=Yc();return e===null?null:{parent:yn._currentValue,pool:e}}var Fr=Error(c(460)),Xc=Error(c(474)),kl=Error(c(542)),Cl={then:function(){}};function su(e){return e=e.status,e==="fulfilled"||e==="rejected"}function iu(e,a,n){switch(n=e[n],n===void 0?e.push(a):n!==a&&(a.then(Aa,Aa),a=n),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,ou(e),e;default:if(typeof a.status=="string")a.then(Aa,Aa);else{if(e=Ra,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=a,e.status="pending",e.then(function(i){if(a.status==="pending"){var r=a;r.status="fulfilled",r.value=i}},function(i){if(a.status==="pending"){var r=a;r.status="rejected",r.reason=i}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,ou(e),e}throw yr=a,Fr}}function gr(e){try{var a=e._init;return a(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(yr=n,Fr):n}}var yr=null;function ru(){if(yr===null)throw Error(c(459));var e=yr;return yr=null,e}function ou(e){if(e===Fr||e===kl)throw Error(c(483))}var Ir=null,Ao=0;function El(e){var a=Ao;return Ao+=1,Ir===null&&(Ir=[]),iu(Ir,e,a)}function Do(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function Tl(e,a){throw a.$$typeof===M?Error(c(525)):(e=Object.prototype.toString.call(a),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function lu(e){function a(J,V){if(e){var ce=J.deletions;ce===null?(J.deletions=[V],J.flags|=16):ce.push(V)}}function n(J,V){if(!e)return null;for(;V!==null;)a(J,V),V=V.sibling;return null}function i(J){for(var V=new Map;J!==null;)J.key!==null?V.set(J.key,J):V.set(J.index,J),J=J.sibling;return V}function r(J,V){return J=ui(J,V),J.index=0,J.sibling=null,J}function l(J,V,ce){return J.index=ce,e?(ce=J.alternate,ce!==null?(ce=ce.index,ce<V?(J.flags|=67108866,V):ce):(J.flags|=67108866,V)):(J.flags|=1048576,V)}function p(J){return e&&J.alternate===null&&(J.flags|=67108866),J}function N(J,V,ce,Se){return V===null||V.tag!==6?(V=Oc(ce,J.mode,Se),V.return=J,V):(V=r(V,ce),V.return=J,V)}function O(J,V,ce,Se){var Et=ce.type;return Et===T?Me(J,V,ce.props.children,Se,ce.key):V!==null&&(V.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===pe&&gr(Et)===V.type)?(V=r(V,ce.props),Do(V,ce),V.return=J,V):(V=jl(ce.type,ce.key,ce.props,null,J.mode,Se),Do(V,ce),V.return=J,V)}function ue(J,V,ce,Se){return V===null||V.tag!==4||V.stateNode.containerInfo!==ce.containerInfo||V.stateNode.implementation!==ce.implementation?(V=Bc(ce,J.mode,Se),V.return=J,V):(V=r(V,ce.children||[]),V.return=J,V)}function Me(J,V,ce,Se,Et){return V===null||V.tag!==7?(V=pr(ce,J.mode,Se,Et),V.return=J,V):(V=r(V,ce),V.return=J,V)}function Re(J,V,ce){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Oc(""+V,J.mode,ce),V.return=J,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case z:return ce=jl(V.type,V.key,V.props,null,J.mode,ce),Do(ce,V),ce.return=J,ce;case C:return V=Bc(V,J.mode,ce),V.return=J,V;case pe:return V=gr(V),Re(J,V,ce)}if(I(V)||se(V))return V=pr(V,J.mode,ce,null),V.return=J,V;if(typeof V.then=="function")return Re(J,El(V),ce);if(V.$$typeof===q)return Re(J,_l(J,V),ce);Tl(J,V)}return null}function xe(J,V,ce,Se){var Et=V!==null?V.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Et!==null?null:N(J,V,""+ce,Se);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case z:return ce.key===Et?O(J,V,ce,Se):null;case C:return ce.key===Et?ue(J,V,ce,Se):null;case pe:return ce=gr(ce),xe(J,V,ce,Se)}if(I(ce)||se(ce))return Et!==null?null:Me(J,V,ce,Se,null);if(typeof ce.then=="function")return xe(J,V,El(ce),Se);if(ce.$$typeof===q)return xe(J,V,_l(J,ce),Se);Tl(J,ce)}return null}function ve(J,V,ce,Se,Et){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return J=J.get(ce)||null,N(V,J,""+Se,Et);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case z:return J=J.get(Se.key===null?ce:Se.key)||null,O(V,J,Se,Et);case C:return J=J.get(Se.key===null?ce:Se.key)||null,ue(V,J,Se,Et);case pe:return Se=gr(Se),ve(J,V,ce,Se,Et)}if(I(Se)||se(Se))return J=J.get(ce)||null,Me(V,J,Se,Et,null);if(typeof Se.then=="function")return ve(J,V,ce,El(Se),Et);if(Se.$$typeof===q)return ve(J,V,ce,_l(V,Se),Et);Tl(V,Se)}return null}function ht(J,V,ce,Se){for(var Et=null,ma=null,gt=V,Qt=V=0,sa=null;gt!==null&&Qt<ce.length;Qt++){gt.index>Qt?(sa=gt,gt=null):sa=gt.sibling;var fa=xe(J,gt,ce[Qt],Se);if(fa===null){gt===null&&(gt=sa);break}e&&gt&&fa.alternate===null&&a(J,gt),V=l(fa,V,Qt),ma===null?Et=fa:ma.sibling=fa,ma=fa,gt=sa}if(Qt===ce.length)return n(J,gt),ia&&pi(J,Qt),Et;if(gt===null){for(;Qt<ce.length;Qt++)gt=Re(J,ce[Qt],Se),gt!==null&&(V=l(gt,V,Qt),ma===null?Et=gt:ma.sibling=gt,ma=gt);return ia&&pi(J,Qt),Et}for(gt=i(gt);Qt<ce.length;Qt++)sa=ve(gt,J,Qt,ce[Qt],Se),sa!==null&&(e&&sa.alternate!==null&&gt.delete(sa.key===null?Qt:sa.key),V=l(sa,V,Qt),ma===null?Et=sa:ma.sibling=sa,ma=sa);return e&&gt.forEach(function(Ki){return a(J,Ki)}),ia&&pi(J,Qt),Et}function Lt(J,V,ce,Se){if(ce==null)throw Error(c(151));for(var Et=null,ma=null,gt=V,Qt=V=0,sa=null,fa=ce.next();gt!==null&&!fa.done;Qt++,fa=ce.next()){gt.index>Qt?(sa=gt,gt=null):sa=gt.sibling;var Ki=xe(J,gt,fa.value,Se);if(Ki===null){gt===null&&(gt=sa);break}e&&gt&&Ki.alternate===null&&a(J,gt),V=l(Ki,V,Qt),ma===null?Et=Ki:ma.sibling=Ki,ma=Ki,gt=sa}if(fa.done)return n(J,gt),ia&&pi(J,Qt),Et;if(gt===null){for(;!fa.done;Qt++,fa=ce.next())fa=Re(J,fa.value,Se),fa!==null&&(V=l(fa,V,Qt),ma===null?Et=fa:ma.sibling=fa,ma=fa);return ia&&pi(J,Qt),Et}for(gt=i(gt);!fa.done;Qt++,fa=ce.next())fa=ve(gt,J,Qt,fa.value,Se),fa!==null&&(e&&fa.alternate!==null&&gt.delete(fa.key===null?Qt:fa.key),V=l(fa,V,Qt),ma===null?Et=fa:ma.sibling=fa,ma=fa);return e&&gt.forEach(function(Ax){return a(J,Ax)}),ia&&pi(J,Qt),Et}function Ea(J,V,ce,Se){if(typeof ce=="object"&&ce!==null&&ce.type===T&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case z:e:{for(var Et=ce.key;V!==null;){if(V.key===Et){if(Et=ce.type,Et===T){if(V.tag===7){n(J,V.sibling),Se=r(V,ce.props.children),Se.return=J,J=Se;break e}}else if(V.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===pe&&gr(Et)===V.type){n(J,V.sibling),Se=r(V,ce.props),Do(Se,ce),Se.return=J,J=Se;break e}n(J,V);break}else a(J,V);V=V.sibling}ce.type===T?(Se=pr(ce.props.children,J.mode,Se,ce.key),Se.return=J,J=Se):(Se=jl(ce.type,ce.key,ce.props,null,J.mode,Se),Do(Se,ce),Se.return=J,J=Se)}return p(J);case C:e:{for(Et=ce.key;V!==null;){if(V.key===Et)if(V.tag===4&&V.stateNode.containerInfo===ce.containerInfo&&V.stateNode.implementation===ce.implementation){n(J,V.sibling),Se=r(V,ce.children||[]),Se.return=J,J=Se;break e}else{n(J,V);break}else a(J,V);V=V.sibling}Se=Bc(ce,J.mode,Se),Se.return=J,J=Se}return p(J);case pe:return ce=gr(ce),Ea(J,V,ce,Se)}if(I(ce))return ht(J,V,ce,Se);if(se(ce)){if(Et=se(ce),typeof Et!="function")throw Error(c(150));return ce=Et.call(ce),Lt(J,V,ce,Se)}if(typeof ce.then=="function")return Ea(J,V,El(ce),Se);if(ce.$$typeof===q)return Ea(J,V,_l(J,ce),Se);Tl(J,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,V!==null&&V.tag===6?(n(J,V.sibling),Se=r(V,ce),Se.return=J,J=Se):(n(J,V),Se=Oc(ce,J.mode,Se),Se.return=J,J=Se),p(J)):n(J,V)}return function(J,V,ce,Se){try{Ao=0;var Et=Ea(J,V,ce,Se);return Ir=null,Et}catch(gt){if(gt===Fr||gt===kl)throw gt;var ma=vs(29,gt,null,J.mode);return ma.lanes=Se,ma.return=J,ma}finally{}}}var br=lu(!0),cu=lu(!1),$i=!1;function Zc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qc(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Oi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Bi(e,a,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(xa&2)!==0){var r=i.pending;return r===null?a.next=a:(a.next=r.next,r.next=a),i.pending=a,a=vl(e),Fd(e,null,n),a}return bl(e,i,a,n),vl(e)}function Po(e,a,n){if(a=a.updateQueue,a!==null&&(a=a.shared,(n&4194048)!==0)){var i=a.lanes;i&=e.pendingLanes,n|=i,a.lanes=n,et(e,n)}}function Jc(e,a){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var p={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};l===null?r=l=p:l=l.next=p,n=n.next}while(n!==null);l===null?r=l=a:l=l.next=a}else r=l=a;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:l,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=a:e.next=a,n.lastBaseUpdate=a}var Kc=!1;function Ro(){if(Kc){var e=Gr;if(e!==null)throw e}}function zo(e,a,n,i){Kc=!1;var r=e.updateQueue;$i=!1;var l=r.firstBaseUpdate,p=r.lastBaseUpdate,N=r.shared.pending;if(N!==null){r.shared.pending=null;var O=N,ue=O.next;O.next=null,p===null?l=ue:p.next=ue,p=O;var Me=e.alternate;Me!==null&&(Me=Me.updateQueue,N=Me.lastBaseUpdate,N!==p&&(N===null?Me.firstBaseUpdate=ue:N.next=ue,Me.lastBaseUpdate=O))}if(l!==null){var Re=r.baseState;p=0,Me=ue=O=null,N=l;do{var xe=N.lane&-536870913,ve=xe!==N.lane;if(ve?(na&xe)===xe:(i&xe)===xe){xe!==0&&xe===Vr&&(Kc=!0),Me!==null&&(Me=Me.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var ht=e,Lt=N;xe=a;var Ea=n;switch(Lt.tag){case 1:if(ht=Lt.payload,typeof ht=="function"){Re=ht.call(Ea,Re,xe);break e}Re=ht;break e;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=Lt.payload,xe=typeof ht=="function"?ht.call(Ea,Re,xe):ht,xe==null)break e;Re=k({},Re,xe);break e;case 2:$i=!0}}xe=N.callback,xe!==null&&(e.flags|=64,ve&&(e.flags|=8192),ve=r.callbacks,ve===null?r.callbacks=[xe]:ve.push(xe))}else ve={lane:xe,tag:N.tag,payload:N.payload,callback:N.callback,next:null},Me===null?(ue=Me=ve,O=Re):Me=Me.next=ve,p|=xe;if(N=N.next,N===null){if(N=r.shared.pending,N===null)break;ve=N,N=ve.next,ve.next=null,r.lastBaseUpdate=ve,r.shared.pending=null}}while(!0);Me===null&&(O=Re),r.baseState=O,r.firstBaseUpdate=ue,r.lastBaseUpdate=Me,l===null&&(r.shared.lanes=0),qi|=p,e.lanes=p,e.memoizedState=Re}}function du(e,a){if(typeof e!="function")throw Error(c(191,e));e.call(a)}function uu(e,a){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)du(n[e],a)}var Yr=h(null),Sl=h(0);function pu(e,a){e=wi,Y(Sl,e),Y(Yr,a),wi=e|a.baseLanes}function e0(){Y(Sl,wi),Y(Yr,Yr.current)}function t0(){wi=Sl.current,A(Yr),A(Sl)}var js=h(null),Bs=null;function Li(e){var a=e.alternate;Y(ln,ln.current&1),Y(js,e),Bs===null&&(a===null||Yr.current!==null||a.memoizedState!==null)&&(Bs=e)}function a0(e){Y(ln,ln.current),Y(js,e),Bs===null&&(Bs=e)}function mu(e){e.tag===22?(Y(ln,ln.current),Y(js,e),Bs===null&&(Bs=e)):Ui()}function Ui(){Y(ln,ln.current),Y(js,js.current)}function Ns(e){A(js),Bs===e&&(Bs=null),A(ln)}var ln=h(0);function Al(e){for(var a=e;a!==null;){if(a.tag===13){var n=a.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||ld(n)||cd(n)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var hi=0,Zt=null,ka=null,bn=null,Dl=!1,Xr=!1,vr=!1,Pl=0,$o=0,Zr=null,jh=0;function rn(){throw Error(c(321))}function n0(e,a){if(a===null)return!1;for(var n=0;n<a.length&&n<e.length;n++)if(!ba(e[n],a[n]))return!1;return!0}function s0(e,a,n,i,r,l){return hi=l,Zt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,_.H=e===null||e.memoizedState===null?Zu:b0,vr=!1,l=n(i,r),vr=!1,Xr&&(l=hu(a,n,i,r)),fu(e),l}function fu(e){_.H=Lo;var a=ka!==null&&ka.next!==null;if(hi=0,bn=ka=Zt=null,Dl=!1,$o=0,Zr=null,a)throw Error(c(300));e===null||vn||(e=e.dependencies,e!==null&&wl(e)&&(vn=!0))}function hu(e,a,n,i){Zt=e;var r=0;do{if(Xr&&(Zr=null),$o=0,Xr=!1,25<=r)throw Error(c(301));if(r+=1,bn=ka=null,e.updateQueue!=null){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}_.H=Qu,l=a(n,i)}while(Xr);return l}function Nh(){var e=_.H,a=e.useState()[0];return a=typeof a.then=="function"?Oo(a):a,e=e.useState()[0],(ka!==null?ka.memoizedState:null)!==e&&(Zt.flags|=1024),a}function i0(){var e=Pl!==0;return Pl=0,e}function r0(e,a,n){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~n}function o0(e){if(Dl){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}Dl=!1}hi=0,bn=ka=Zt=null,Xr=!1,$o=Pl=0,Zr=null}function ns(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?Zt.memoizedState=bn=e:bn=bn.next=e,bn}function cn(){if(ka===null){var e=Zt.alternate;e=e!==null?e.memoizedState:null}else e=ka.next;var a=bn===null?Zt.memoizedState:bn.next;if(a!==null)bn=a,ka=e;else{if(e===null)throw Zt.alternate===null?Error(c(467)):Error(c(310));ka=e,e={memoizedState:ka.memoizedState,baseState:ka.baseState,baseQueue:ka.baseQueue,queue:ka.queue,next:null},bn===null?Zt.memoizedState=bn=e:bn=bn.next=e}return bn}function Rl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Oo(e){var a=$o;return $o+=1,Zr===null&&(Zr=[]),e=iu(Zr,e,a),a=Zt,(bn===null?a.memoizedState:bn.next)===null&&(a=a.alternate,_.H=a===null||a.memoizedState===null?Zu:b0),e}function zl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Oo(e);if(e.$$typeof===q)return Un(e)}throw Error(c(438,String(e)))}function l0(e){var a=null,n=Zt.updateQueue;if(n!==null&&(a=n.memoCache),a==null){var i=Zt.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(a={data:i.data.map(function(r){return r.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),n===null&&(n=Rl(),Zt.updateQueue=n),n.memoCache=a,n=a.data[a.index],n===void 0)for(n=a.data[a.index]=Array(e),i=0;i<e;i++)n[i]=ne;return a.index++,n}function xi(e,a){return typeof a=="function"?a(e):a}function $l(e){var a=cn();return c0(a,ka,e)}function c0(e,a,n){var i=e.queue;if(i===null)throw Error(c(311));i.lastRenderedReducer=n;var r=e.baseQueue,l=i.pending;if(l!==null){if(r!==null){var p=r.next;r.next=l.next,l.next=p}a.baseQueue=r=l,i.pending=null}if(l=e.baseState,r===null)e.memoizedState=l;else{a=r.next;var N=p=null,O=null,ue=a,Me=!1;do{var Re=ue.lane&-536870913;if(Re!==ue.lane?(na&Re)===Re:(hi&Re)===Re){var xe=ue.revertLane;if(xe===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),Re===Vr&&(Me=!0);else if((hi&xe)===xe){ue=ue.next,xe===Vr&&(Me=!0);continue}else Re={lane:0,revertLane:ue.revertLane,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},O===null?(N=O=Re,p=l):O=O.next=Re,Zt.lanes|=xe,qi|=xe;Re=ue.action,vr&&n(l,Re),l=ue.hasEagerState?ue.eagerState:n(l,Re)}else xe={lane:Re,revertLane:ue.revertLane,gesture:ue.gesture,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},O===null?(N=O=xe,p=l):O=O.next=xe,Zt.lanes|=Re,qi|=Re;ue=ue.next}while(ue!==null&&ue!==a);if(O===null?p=l:O.next=N,!ba(l,e.memoizedState)&&(vn=!0,Me&&(n=Gr,n!==null)))throw n;e.memoizedState=l,e.baseState=p,e.baseQueue=O,i.lastRenderedState=l}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function d0(e){var a=cn(),n=a.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,l=a.memoizedState;if(r!==null){n.pending=null;var p=r=r.next;do l=e(l,p.action),p=p.next;while(p!==r);ba(l,a.memoizedState)||(vn=!0),a.memoizedState=l,a.baseQueue===null&&(a.baseState=l),n.lastRenderedState=l}return[l,i]}function xu(e,a,n){var i=Zt,r=cn(),l=ia;if(l){if(n===void 0)throw Error(c(407));n=n()}else n=a();var p=!ba((ka||r).memoizedState,n);if(p&&(r.memoizedState=n,vn=!0),r=r.queue,m0(bu.bind(null,i,r,e),[e]),r.getSnapshot!==a||p||bn!==null&&bn.memoizedState.tag&1){if(i.flags|=2048,Qr(9,{destroy:void 0},yu.bind(null,i,r,n,a),null),Ra===null)throw Error(c(349));l||(hi&127)!==0||gu(i,a,n)}return n}function gu(e,a,n){e.flags|=16384,e={getSnapshot:a,value:n},a=Zt.updateQueue,a===null?(a=Rl(),Zt.updateQueue=a,a.stores=[e]):(n=a.stores,n===null?a.stores=[e]:n.push(e))}function yu(e,a,n,i){a.value=n,a.getSnapshot=i,vu(a)&&ju(e)}function bu(e,a,n){return n(function(){vu(a)&&ju(e)})}function vu(e){var a=e.getSnapshot;e=e.value;try{var n=a();return!ba(e,n)}catch{return!0}}function ju(e){var a=ur(e,2);a!==null&&ps(a,e,2)}function u0(e){var a=ns();if(typeof e=="function"){var n=e;if(e=n(),vr){ee(!0);try{n()}finally{ee(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},a}function Nu(e,a,n,i){return e.baseState=n,c0(e,ka,typeof i=="function"?i:xi)}function wh(e,a,n,i,r){if(Ll(e))throw Error(c(485));if(e=a.action,e!==null){var l={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){l.listeners.push(p)}};_.T!==null?n(!0):l.isTransition=!1,i(l),n=a.pending,n===null?(l.next=a.pending=l,wu(a,l)):(l.next=n.next,a.pending=n.next=l)}}function wu(e,a){var n=a.action,i=a.payload,r=e.state;if(a.isTransition){var l=_.T,p={};_.T=p;try{var N=n(r,i),O=_.S;O!==null&&O(p,N),_u(e,a,N)}catch(ue){p0(e,a,ue)}finally{l!==null&&p.types!==null&&(l.types=p.types),_.T=l}}else try{l=n(r,i),_u(e,a,l)}catch(ue){p0(e,a,ue)}}function _u(e,a,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Mu(e,a,i)},function(i){return p0(e,a,i)}):Mu(e,a,n)}function Mu(e,a,n){a.status="fulfilled",a.value=n,ku(a),e.state=n,a=e.pending,a!==null&&(n=a.next,n===a?e.pending=null:(n=n.next,a.next=n,wu(e,n)))}function p0(e,a,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do a.status="rejected",a.reason=n,ku(a),a=a.next;while(a!==i)}e.action=null}function ku(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function Cu(e,a){return a}function Eu(e,a){if(ia){var n=Ra.formState;if(n!==null){e:{var i=Zt;if(ia){if(qa){t:{for(var r=qa,l=Os;r.nodeType!==8;){if(!l){r=null;break t}if(r=Ls(r.nextSibling),r===null){r=null;break t}}l=r.data,r=l==="F!"||l==="F"?r:null}if(r){qa=Ls(r.nextSibling),i=r.data==="F!";break e}}Ri(i)}i=!1}i&&(a=n[0])}}return n=ns(),n.memoizedState=n.baseState=a,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cu,lastRenderedState:a},n.queue=i,n=Iu.bind(null,Zt,i),i.dispatch=n,i=u0(!1),l=y0.bind(null,Zt,!1,i.queue),i=ns(),r={state:a,dispatch:null,action:e,pending:null},i.queue=r,n=wh.bind(null,Zt,r,l,n),r.dispatch=n,i.memoizedState=e,[a,n,!1]}function Tu(e){var a=cn();return Su(a,ka,e)}function Su(e,a,n){if(a=c0(e,a,Cu)[0],e=$l(xi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var i=Oo(a)}catch(p){throw p===Fr?kl:p}else i=a;a=cn();var r=a.queue,l=r.dispatch;return n!==a.memoizedState&&(Zt.flags|=2048,Qr(9,{destroy:void 0},_h.bind(null,r,n),null)),[i,l,e]}function _h(e,a){e.action=a}function Au(e){var a=cn(),n=ka;if(n!==null)return Su(a,n,e);cn(),a=a.memoizedState,n=cn();var i=n.queue.dispatch;return n.memoizedState=e,[a,i,!1]}function Qr(e,a,n,i){return e={tag:e,create:n,deps:i,inst:a,next:null},a=Zt.updateQueue,a===null&&(a=Rl(),Zt.updateQueue=a),n=a.lastEffect,n===null?a.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,a.lastEffect=e),e}function Du(){return cn().memoizedState}function Ol(e,a,n,i){var r=ns();Zt.flags|=e,r.memoizedState=Qr(1|a,{destroy:void 0},n,i===void 0?null:i)}function Bl(e,a,n,i){var r=cn();i=i===void 0?null:i;var l=r.memoizedState.inst;ka!==null&&i!==null&&n0(i,ka.memoizedState.deps)?r.memoizedState=Qr(a,l,n,i):(Zt.flags|=e,r.memoizedState=Qr(1|a,l,n,i))}function Pu(e,a){Ol(8390656,8,e,a)}function m0(e,a){Bl(2048,8,e,a)}function Mh(e){Zt.flags|=4;var a=Zt.updateQueue;if(a===null)a=Rl(),Zt.updateQueue=a,a.events=[e];else{var n=a.events;n===null?a.events=[e]:n.push(e)}}function Ru(e){var a=cn().memoizedState;return Mh({ref:a,nextImpl:e}),function(){if((xa&2)!==0)throw Error(c(440));return a.impl.apply(void 0,arguments)}}function zu(e,a){return Bl(4,2,e,a)}function $u(e,a){return Bl(4,4,e,a)}function Ou(e,a){if(typeof a=="function"){e=e();var n=a(e);return function(){typeof n=="function"?n():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function Bu(e,a,n){n=n!=null?n.concat([e]):null,Bl(4,4,Ou.bind(null,a,e),n)}function f0(){}function Lu(e,a){var n=cn();a=a===void 0?null:a;var i=n.memoizedState;return a!==null&&n0(a,i[1])?i[0]:(n.memoizedState=[e,a],e)}function Uu(e,a){var n=cn();a=a===void 0?null:a;var i=n.memoizedState;if(a!==null&&n0(a,i[1]))return i[0];if(i=e(),vr){ee(!0);try{e()}finally{ee(!1)}}return n.memoizedState=[i,a],i}function h0(e,a,n){return n===void 0||(hi&1073741824)!==0&&(na&261930)===0?e.memoizedState=a:(e.memoizedState=n,e=Wp(),Zt.lanes|=e,qi|=e,n)}function Wu(e,a,n,i){return ba(n,a)?n:Yr.current!==null?(e=h0(e,n,i),ba(e,a)||(vn=!0),e):(hi&42)===0||(hi&1073741824)!==0&&(na&261930)===0?(vn=!0,e.memoizedState=n):(e=Wp(),Zt.lanes|=e,qi|=e,a)}function Hu(e,a,n,i,r){var l=B.p;B.p=l!==0&&8>l?l:8;var p=_.T,N={};_.T=N,y0(e,!1,a,n);try{var O=r(),ue=_.S;if(ue!==null&&ue(N,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Me=vh(O,i);Bo(e,a,Me,Ms(e))}else Bo(e,a,i,Ms(e))}catch(Re){Bo(e,a,{then:function(){},status:"rejected",reason:Re},Ms())}finally{B.p=l,p!==null&&N.types!==null&&(p.types=N.types),_.T=p}}function kh(){}function x0(e,a,n,i){if(e.tag!==5)throw Error(c(476));var r=qu(e).queue;Hu(e,r,a,re,n===null?kh:function(){return Vu(e),n(i)})}function qu(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:re},next:null};var n={};return a.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:n},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function Vu(e){var a=qu(e);a.next===null&&(a=e.alternate.memoizedState),Bo(e,a.next.queue,{},Ms())}function g0(){return Un(tl)}function Gu(){return cn().memoizedState}function Fu(){return cn().memoizedState}function Ch(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var n=Ms();e=Oi(n);var i=Bi(a,e,n);i!==null&&(ps(i,a,n),Po(i,a,n)),a={cache:Fc()},e.payload=a;return}a=a.return}}function Eh(e,a,n){var i=Ms();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ll(e)?Yu(a,n):(n=zc(e,a,n,i),n!==null&&(ps(n,e,i),Xu(n,a,i)))}function Iu(e,a,n){var i=Ms();Bo(e,a,n,i)}function Bo(e,a,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ll(e))Yu(a,r);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=a.lastRenderedReducer,l!==null))try{var p=a.lastRenderedState,N=l(p,n);if(r.hasEagerState=!0,r.eagerState=N,ba(N,p))return bl(e,a,r,0),Ra===null&&yl(),!1}catch{}finally{}if(n=zc(e,a,r,i),n!==null)return ps(n,e,i),Xu(n,a,i),!0}return!1}function y0(e,a,n,i){if(i={lane:2,revertLane:Z0(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Ll(e)){if(a)throw Error(c(479))}else a=zc(e,n,i,2),a!==null&&ps(a,e,2)}function Ll(e){var a=e.alternate;return e===Zt||a!==null&&a===Zt}function Yu(e,a){Xr=Dl=!0;var n=e.pending;n===null?a.next=a:(a.next=n.next,n.next=a),e.pending=a}function Xu(e,a,n){if((n&4194048)!==0){var i=a.lanes;i&=e.pendingLanes,n|=i,a.lanes=n,et(e,n)}}var Lo={readContext:Un,use:zl,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};Lo.useEffectEvent=rn;var Zu={readContext:Un,use:zl,useCallback:function(e,a){return ns().memoizedState=[e,a===void 0?null:a],e},useContext:Un,useEffect:Pu,useImperativeHandle:function(e,a,n){n=n!=null?n.concat([e]):null,Ol(4194308,4,Ou.bind(null,a,e),n)},useLayoutEffect:function(e,a){return Ol(4194308,4,e,a)},useInsertionEffect:function(e,a){Ol(4,2,e,a)},useMemo:function(e,a){var n=ns();a=a===void 0?null:a;var i=e();if(vr){ee(!0);try{e()}finally{ee(!1)}}return n.memoizedState=[i,a],i},useReducer:function(e,a,n){var i=ns();if(n!==void 0){var r=n(a);if(vr){ee(!0);try{n(a)}finally{ee(!1)}}}else r=a;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=Eh.bind(null,Zt,e),[i.memoizedState,e]},useRef:function(e){var a=ns();return e={current:e},a.memoizedState=e},useState:function(e){e=u0(e);var a=e.queue,n=Iu.bind(null,Zt,a);return a.dispatch=n,[e.memoizedState,n]},useDebugValue:f0,useDeferredValue:function(e,a){var n=ns();return h0(n,e,a)},useTransition:function(){var e=u0(!1);return e=Hu.bind(null,Zt,e.queue,!0,!1),ns().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,n){var i=Zt,r=ns();if(ia){if(n===void 0)throw Error(c(407));n=n()}else{if(n=a(),Ra===null)throw Error(c(349));(na&127)!==0||gu(i,a,n)}r.memoizedState=n;var l={value:n,getSnapshot:a};return r.queue=l,Pu(bu.bind(null,i,l,e),[e]),i.flags|=2048,Qr(9,{destroy:void 0},yu.bind(null,i,l,n,a),null),n},useId:function(){var e=ns(),a=Ra.identifierPrefix;if(ia){var n=ti,i=ei;n=(i&~(1<<32-te(i)-1)).toString(32)+n,a="_"+a+"R_"+n,n=Pl++,0<n&&(a+="H"+n.toString(32)),a+="_"}else n=jh++,a="_"+a+"r_"+n.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:g0,useFormState:Eu,useActionState:Eu,useOptimistic:function(e){var a=ns();a.memoizedState=a.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=n,a=y0.bind(null,Zt,!0,n),n.dispatch=a,[e,a]},useMemoCache:l0,useCacheRefresh:function(){return ns().memoizedState=Ch.bind(null,Zt)},useEffectEvent:function(e){var a=ns(),n={impl:e};return a.memoizedState=n,function(){if((xa&2)!==0)throw Error(c(440));return n.impl.apply(void 0,arguments)}}},b0={readContext:Un,use:zl,useCallback:Lu,useContext:Un,useEffect:m0,useImperativeHandle:Bu,useInsertionEffect:zu,useLayoutEffect:$u,useMemo:Uu,useReducer:$l,useRef:Du,useState:function(){return $l(xi)},useDebugValue:f0,useDeferredValue:function(e,a){var n=cn();return Wu(n,ka.memoizedState,e,a)},useTransition:function(){var e=$l(xi)[0],a=cn().memoizedState;return[typeof e=="boolean"?e:Oo(e),a]},useSyncExternalStore:xu,useId:Gu,useHostTransitionStatus:g0,useFormState:Tu,useActionState:Tu,useOptimistic:function(e,a){var n=cn();return Nu(n,ka,e,a)},useMemoCache:l0,useCacheRefresh:Fu};b0.useEffectEvent=Ru;var Qu={readContext:Un,use:zl,useCallback:Lu,useContext:Un,useEffect:m0,useImperativeHandle:Bu,useInsertionEffect:zu,useLayoutEffect:$u,useMemo:Uu,useReducer:d0,useRef:Du,useState:function(){return d0(xi)},useDebugValue:f0,useDeferredValue:function(e,a){var n=cn();return ka===null?h0(n,e,a):Wu(n,ka.memoizedState,e,a)},useTransition:function(){var e=d0(xi)[0],a=cn().memoizedState;return[typeof e=="boolean"?e:Oo(e),a]},useSyncExternalStore:xu,useId:Gu,useHostTransitionStatus:g0,useFormState:Au,useActionState:Au,useOptimistic:function(e,a){var n=cn();return ka!==null?Nu(n,ka,e,a):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:l0,useCacheRefresh:Fu};Qu.useEffectEvent=Ru;function v0(e,a,n,i){a=e.memoizedState,n=n(i,a),n=n==null?a:k({},a,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var j0={enqueueSetState:function(e,a,n){e=e._reactInternals;var i=Ms(),r=Oi(i);r.payload=a,n!=null&&(r.callback=n),a=Bi(e,r,i),a!==null&&(ps(a,e,i),Po(a,e,i))},enqueueReplaceState:function(e,a,n){e=e._reactInternals;var i=Ms(),r=Oi(i);r.tag=1,r.payload=a,n!=null&&(r.callback=n),a=Bi(e,r,i),a!==null&&(ps(a,e,i),Po(a,e,i))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var n=Ms(),i=Oi(n);i.tag=2,a!=null&&(i.callback=a),a=Bi(e,i,n),a!==null&&(ps(a,e,n),Po(a,e,n))}};function Ju(e,a,n,i,r,l,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,l,p):a.prototype&&a.prototype.isPureReactComponent?!ua(n,i)||!ua(r,l):!0}function Ku(e,a,n,i){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(n,i),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(n,i),a.state!==e&&j0.enqueueReplaceState(a,a.state,null)}function jr(e,a){var n=a;if("ref"in a){n={};for(var i in a)i!=="ref"&&(n[i]=a[i])}if(e=e.defaultProps){n===a&&(n=k({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}function ep(e){Br(e)}function tp(e){console.error(e)}function ap(e){Br(e)}function Ul(e,a){try{var n=e.onUncaughtError;n(a.value,{componentStack:a.stack})}catch(i){setTimeout(function(){throw i})}}function np(e,a,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function N0(e,a,n){return n=Oi(n),n.tag=3,n.payload={element:null},n.callback=function(){Ul(e,a)},n}function sp(e){return e=Oi(e),e.tag=3,e}function ip(e,a,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var l=i.value;e.payload=function(){return r(l)},e.callback=function(){np(a,n,i)}}var p=n.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){np(a,n,i),typeof r!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var N=i.stack;this.componentDidCatch(i.value,{componentStack:N!==null?N:""})})}function Th(e,a,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(a=n.alternate,a!==null&&qr(a,n,r,!0),n=js.current,n!==null){switch(n.tag){case 31:case 13:return Bs===null?Jl():n.alternate===null&&on===0&&(on=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Cl?n.flags|=16384:(a=n.updateQueue,a===null?n.updateQueue=new Set([i]):a.add(i),I0(e,i,r)),!1;case 22:return n.flags|=65536,i===Cl?n.flags|=16384:(a=n.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=a):(n=a.retryQueue,n===null?a.retryQueue=new Set([i]):n.add(i)),I0(e,i,r)),!1}throw Error(c(435,n.tag))}return I0(e,i,r),Jl(),!1}if(ia)return a=js.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=r,i!==Wc&&(e=Error(c(422),{cause:i}),Eo(Rs(e,n)))):(i!==Wc&&(a=Error(c(423),{cause:i}),Eo(Rs(a,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=Rs(i,n),r=N0(e.stateNode,i,r),Jc(e,r),on!==4&&(on=2)),!1;var l=Error(c(520),{cause:i});if(l=Rs(l,n),Io===null?Io=[l]:Io.push(l),on!==4&&(on=2),a===null)return!0;i=Rs(i,n),n=a;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=N0(n.stateNode,i,e),Jc(n,e),!1;case 1:if(a=n.type,l=n.stateNode,(n.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(Vi===null||!Vi.has(l))))return n.flags|=65536,r&=-r,n.lanes|=r,r=sp(r),ip(r,e,n,i),Jc(n,r),!1}n=n.return}while(n!==null);return!1}var w0=Error(c(461)),vn=!1;function Wn(e,a,n,i){a.child=e===null?cu(a,null,n,i):br(a,e.child,n,i)}function rp(e,a,n,i,r){n=n.render;var l=a.ref;if("ref"in i){var p={};for(var N in i)N!=="ref"&&(p[N]=i[N])}else p=i;return hr(a),i=s0(e,a,n,p,l,r),N=i0(),e!==null&&!vn?(r0(e,a,r),gi(e,a,r)):(ia&&N&&Lc(a),a.flags|=1,Wn(e,a,i,r),a.child)}function op(e,a,n,i,r){if(e===null){var l=n.type;return typeof l=="function"&&!$c(l)&&l.defaultProps===void 0&&n.compare===null?(a.tag=15,a.type=l,lp(e,a,l,i,r)):(e=jl(n.type,null,i,a,a.mode,r),e.ref=a.ref,e.return=a,a.child=e)}if(l=e.child,!A0(e,r)){var p=l.memoizedProps;if(n=n.compare,n=n!==null?n:ua,n(p,i)&&e.ref===a.ref)return gi(e,a,r)}return a.flags|=1,e=ui(l,i),e.ref=a.ref,e.return=a,a.child=e}function lp(e,a,n,i,r){if(e!==null){var l=e.memoizedProps;if(ua(l,i)&&e.ref===a.ref)if(vn=!1,a.pendingProps=i=l,A0(e,r))(e.flags&131072)!==0&&(vn=!0);else return a.lanes=e.lanes,gi(e,a,r)}return _0(e,a,n,i,r)}function cp(e,a,n,i){var r=i.children,l=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((a.flags&128)!==0){if(l=l!==null?l.baseLanes|n:n,e!==null){for(i=a.child=e.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~l}else i=0,a.child=null;return dp(e,a,l,n,i)}if((n&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ml(a,l!==null?l.cachePool:null),l!==null?pu(a,l):e0(),mu(a);else return i=a.lanes=536870912,dp(e,a,l!==null?l.baseLanes|n:n,n,i)}else l!==null?(Ml(a,l.cachePool),pu(a,l),Ui(),a.memoizedState=null):(e!==null&&Ml(a,null),e0(),Ui());return Wn(e,a,r,n),a.child}function Uo(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function dp(e,a,n,i,r){var l=Yc();return l=l===null?null:{parent:yn._currentValue,pool:l},a.memoizedState={baseLanes:n,cachePool:l},e!==null&&Ml(a,null),e0(),mu(a),e!==null&&qr(e,a,i,!0),a.childLanes=r,null}function Wl(e,a){return a=ql({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function up(e,a,n){return br(a,e.child,null,n),e=Wl(a,a.pendingProps),e.flags|=2,Ns(a),a.memoizedState=null,e}function Sh(e,a,n){var i=a.pendingProps,r=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(ia){if(i.mode==="hidden")return e=Wl(a,i),a.lanes=536870912,Uo(null,e);if(a0(a),(e=qa)?(e=wm(e,Os),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Di!==null?{id:ei,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},n=Yd(e),n.return=a,a.child=n,Ln=a,qa=null)):e=null,e===null)throw Ri(a);return a.lanes=536870912,null}return Wl(a,i)}var l=e.memoizedState;if(l!==null){var p=l.dehydrated;if(a0(a),r)if(a.flags&256)a.flags&=-257,a=up(e,a,n);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(c(558));else if(vn||qr(e,a,n,!1),r=(n&e.childLanes)!==0,vn||r){if(i=Ra,i!==null&&(p=ie(i,n),p!==0&&p!==l.retryLane))throw l.retryLane=p,ur(e,p),ps(i,e,p),w0;Jl(),a=up(e,a,n)}else e=l.treeContext,qa=Ls(p.nextSibling),Ln=a,ia=!0,Pi=null,Os=!1,e!==null&&Qd(a,e),a=Wl(a,i),a.flags|=4096;return a}return e=ui(e.child,{mode:i.mode,children:i.children}),e.ref=a.ref,a.child=e,e.return=a,e}function Hl(e,a){var n=a.ref;if(n===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(c(284));(e===null||e.ref!==n)&&(a.flags|=4194816)}}function _0(e,a,n,i,r){return hr(a),n=s0(e,a,n,i,void 0,r),i=i0(),e!==null&&!vn?(r0(e,a,r),gi(e,a,r)):(ia&&i&&Lc(a),a.flags|=1,Wn(e,a,n,r),a.child)}function pp(e,a,n,i,r,l){return hr(a),a.updateQueue=null,n=hu(a,i,n,r),fu(e),i=i0(),e!==null&&!vn?(r0(e,a,l),gi(e,a,l)):(ia&&i&&Lc(a),a.flags|=1,Wn(e,a,n,l),a.child)}function mp(e,a,n,i,r){if(hr(a),a.stateNode===null){var l=Lr,p=n.contextType;typeof p=="object"&&p!==null&&(l=Un(p)),l=new n(i,l),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=j0,a.stateNode=l,l._reactInternals=a,l=a.stateNode,l.props=i,l.state=a.memoizedState,l.refs={},Zc(a),p=n.contextType,l.context=typeof p=="object"&&p!==null?Un(p):Lr,l.state=a.memoizedState,p=n.getDerivedStateFromProps,typeof p=="function"&&(v0(a,n,p,i),l.state=a.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(p=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),p!==l.state&&j0.enqueueReplaceState(l,l.state,null),zo(a,i,l,r),Ro(),l.state=a.memoizedState),typeof l.componentDidMount=="function"&&(a.flags|=4194308),i=!0}else if(e===null){l=a.stateNode;var N=a.memoizedProps,O=jr(n,N);l.props=O;var ue=l.context,Me=n.contextType;p=Lr,typeof Me=="object"&&Me!==null&&(p=Un(Me));var Re=n.getDerivedStateFromProps;Me=typeof Re=="function"||typeof l.getSnapshotBeforeUpdate=="function",N=a.pendingProps!==N,Me||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(N||ue!==p)&&Ku(a,l,i,p),$i=!1;var xe=a.memoizedState;l.state=xe,zo(a,i,l,r),Ro(),ue=a.memoizedState,N||xe!==ue||$i?(typeof Re=="function"&&(v0(a,n,Re,i),ue=a.memoizedState),(O=$i||Ju(a,n,O,i,xe,ue,p))?(Me||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(a.flags|=4194308)):(typeof l.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=i,a.memoizedState=ue),l.props=i,l.state=ue,l.context=p,i=O):(typeof l.componentDidMount=="function"&&(a.flags|=4194308),i=!1)}else{l=a.stateNode,Qc(e,a),p=a.memoizedProps,Me=jr(n,p),l.props=Me,Re=a.pendingProps,xe=l.context,ue=n.contextType,O=Lr,typeof ue=="object"&&ue!==null&&(O=Un(ue)),N=n.getDerivedStateFromProps,(ue=typeof N=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(p!==Re||xe!==O)&&Ku(a,l,i,O),$i=!1,xe=a.memoizedState,l.state=xe,zo(a,i,l,r),Ro();var ve=a.memoizedState;p!==Re||xe!==ve||$i||e!==null&&e.dependencies!==null&&wl(e.dependencies)?(typeof N=="function"&&(v0(a,n,N,i),ve=a.memoizedState),(Me=$i||Ju(a,n,Me,i,xe,ve,O)||e!==null&&e.dependencies!==null&&wl(e.dependencies))?(ue||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,ve,O),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,ve,O)),typeof l.componentDidUpdate=="function"&&(a.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof l.componentDidUpdate!="function"||p===e.memoizedProps&&xe===e.memoizedState||(a.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&xe===e.memoizedState||(a.flags|=1024),a.memoizedProps=i,a.memoizedState=ve),l.props=i,l.state=ve,l.context=O,i=Me):(typeof l.componentDidUpdate!="function"||p===e.memoizedProps&&xe===e.memoizedState||(a.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&xe===e.memoizedState||(a.flags|=1024),i=!1)}return l=i,Hl(e,a),i=(a.flags&128)!==0,l||i?(l=a.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:l.render(),a.flags|=1,e!==null&&i?(a.child=br(a,e.child,null,r),a.child=br(a,null,n,r)):Wn(e,a,n,r),a.memoizedState=l.state,e=a.child):e=gi(e,a,r),e}function fp(e,a,n,i){return mr(),a.flags|=256,Wn(e,a,n,i),a.child}var M0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function k0(e){return{baseLanes:e,cachePool:nu()}}function C0(e,a,n){return e=e!==null?e.childLanes&~n:0,a&&(e|=_s),e}function hp(e,a,n){var i=a.pendingProps,r=!1,l=(a.flags&128)!==0,p;if((p=l)||(p=e!==null&&e.memoizedState===null?!1:(ln.current&2)!==0),p&&(r=!0,a.flags&=-129),p=(a.flags&32)!==0,a.flags&=-33,e===null){if(ia){if(r?Li(a):Ui(),(e=qa)?(e=wm(e,Os),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Di!==null?{id:ei,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},n=Yd(e),n.return=a,a.child=n,Ln=a,qa=null)):e=null,e===null)throw Ri(a);return cd(e)?a.lanes=32:a.lanes=536870912,null}var N=i.children;return i=i.fallback,r?(Ui(),r=a.mode,N=ql({mode:"hidden",children:N},r),i=pr(i,r,n,null),N.return=a,i.return=a,N.sibling=i,a.child=N,i=a.child,i.memoizedState=k0(n),i.childLanes=C0(e,p,n),a.memoizedState=M0,Uo(null,i)):(Li(a),E0(a,N))}var O=e.memoizedState;if(O!==null&&(N=O.dehydrated,N!==null)){if(l)a.flags&256?(Li(a),a.flags&=-257,a=T0(e,a,n)):a.memoizedState!==null?(Ui(),a.child=e.child,a.flags|=128,a=null):(Ui(),N=i.fallback,r=a.mode,i=ql({mode:"visible",children:i.children},r),N=pr(N,r,n,null),N.flags|=2,i.return=a,N.return=a,i.sibling=N,a.child=i,br(a,e.child,null,n),i=a.child,i.memoizedState=k0(n),i.childLanes=C0(e,p,n),a.memoizedState=M0,a=Uo(null,i));else if(Li(a),cd(N)){if(p=N.nextSibling&&N.nextSibling.dataset,p)var ue=p.dgst;p=ue,i=Error(c(419)),i.stack="",i.digest=p,Eo({value:i,source:null,stack:null}),a=T0(e,a,n)}else if(vn||qr(e,a,n,!1),p=(n&e.childLanes)!==0,vn||p){if(p=Ra,p!==null&&(i=ie(p,n),i!==0&&i!==O.retryLane))throw O.retryLane=i,ur(e,i),ps(p,e,i),w0;ld(N)||Jl(),a=T0(e,a,n)}else ld(N)?(a.flags|=192,a.child=e.child,a=null):(e=O.treeContext,qa=Ls(N.nextSibling),Ln=a,ia=!0,Pi=null,Os=!1,e!==null&&Qd(a,e),a=E0(a,i.children),a.flags|=4096);return a}return r?(Ui(),N=i.fallback,r=a.mode,O=e.child,ue=O.sibling,i=ui(O,{mode:"hidden",children:i.children}),i.subtreeFlags=O.subtreeFlags&65011712,ue!==null?N=ui(ue,N):(N=pr(N,r,n,null),N.flags|=2),N.return=a,i.return=a,i.sibling=N,a.child=i,Uo(null,i),i=a.child,N=e.child.memoizedState,N===null?N=k0(n):(r=N.cachePool,r!==null?(O=yn._currentValue,r=r.parent!==O?{parent:O,pool:O}:r):r=nu(),N={baseLanes:N.baseLanes|n,cachePool:r}),i.memoizedState=N,i.childLanes=C0(e,p,n),a.memoizedState=M0,Uo(e.child,i)):(Li(a),n=e.child,e=n.sibling,n=ui(n,{mode:"visible",children:i.children}),n.return=a,n.sibling=null,e!==null&&(p=a.deletions,p===null?(a.deletions=[e],a.flags|=16):p.push(e)),a.child=n,a.memoizedState=null,n)}function E0(e,a){return a=ql({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function ql(e,a){return e=vs(22,e,null,a),e.lanes=0,e}function T0(e,a,n){return br(a,e.child,null,n),e=E0(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function xp(e,a,n){e.lanes|=a;var i=e.alternate;i!==null&&(i.lanes|=a),Vc(e.return,a,n)}function S0(e,a,n,i,r,l){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:l}:(p.isBackwards=a,p.rendering=null,p.renderingStartTime=0,p.last=i,p.tail=n,p.tailMode=r,p.treeForkCount=l)}function gp(e,a,n){var i=a.pendingProps,r=i.revealOrder,l=i.tail;i=i.children;var p=ln.current,N=(p&2)!==0;if(N?(p=p&1|2,a.flags|=128):p&=1,Y(ln,p),Wn(e,a,i,n),i=ia?Co:0,!N&&e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xp(e,n,a);else if(e.tag===19)xp(e,n,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(n=a.child,r=null;n!==null;)e=n.alternate,e!==null&&Al(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=a.child,a.child=null):(r=n.sibling,n.sibling=null),S0(a,!1,r,n,l,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=a.child,a.child=null;r!==null;){if(e=r.alternate,e!==null&&Al(e)===null){a.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}S0(a,!0,n,null,l,i);break;case"together":S0(a,!1,null,null,void 0,i);break;default:a.memoizedState=null}return a.child}function gi(e,a,n){if(e!==null&&(a.dependencies=e.dependencies),qi|=a.lanes,(n&a.childLanes)===0)if(e!==null){if(qr(e,a,n,!1),(n&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(c(153));if(a.child!==null){for(e=a.child,n=ui(e,e.pendingProps),a.child=n,n.return=a;e.sibling!==null;)e=e.sibling,n=n.sibling=ui(e,e.pendingProps),n.return=a;n.sibling=null}return a.child}function A0(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&wl(e)))}function Ah(e,a,n){switch(a.tag){case 3:ke(a,a.stateNode.containerInfo),zi(a,yn,e.memoizedState.cache),mr();break;case 27:case 5:tt(a);break;case 4:ke(a,a.stateNode.containerInfo);break;case 10:zi(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,a0(a),null;break;case 13:var i=a.memoizedState;if(i!==null)return i.dehydrated!==null?(Li(a),a.flags|=128,null):(n&a.child.childLanes)!==0?hp(e,a,n):(Li(a),e=gi(e,a,n),e!==null?e.sibling:null);Li(a);break;case 19:var r=(e.flags&128)!==0;if(i=(n&a.childLanes)!==0,i||(qr(e,a,n,!1),i=(n&a.childLanes)!==0),r){if(i)return gp(e,a,n);a.flags|=128}if(r=a.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Y(ln,ln.current),i)break;return null;case 22:return a.lanes=0,cp(e,a,n,a.pendingProps);case 24:zi(a,yn,e.memoizedState.cache)}return gi(e,a,n)}function yp(e,a,n){if(e!==null)if(e.memoizedProps!==a.pendingProps)vn=!0;else{if(!A0(e,n)&&(a.flags&128)===0)return vn=!1,Ah(e,a,n);vn=(e.flags&131072)!==0}else vn=!1,ia&&(a.flags&1048576)!==0&&Zd(a,Co,a.index);switch(a.lanes=0,a.tag){case 16:e:{var i=a.pendingProps;if(e=gr(a.elementType),a.type=e,typeof e=="function")$c(e)?(i=jr(e,i),a.tag=1,a=mp(null,a,e,i,n)):(a.tag=0,a=_0(null,a,e,i,n));else{if(e!=null){var r=e.$$typeof;if(r===W){a.tag=11,a=rp(null,a,e,i,n);break e}else if(r===P){a.tag=14,a=op(null,a,e,i,n);break e}}throw a=de(e)||e,Error(c(306,a,""))}}return a;case 0:return _0(e,a,a.type,a.pendingProps,n);case 1:return i=a.type,r=jr(i,a.pendingProps),mp(e,a,i,r,n);case 3:e:{if(ke(a,a.stateNode.containerInfo),e===null)throw Error(c(387));i=a.pendingProps;var l=a.memoizedState;r=l.element,Qc(e,a),zo(a,i,null,n);var p=a.memoizedState;if(i=p.cache,zi(a,yn,i),i!==l.cache&&Gc(a,[yn],n,!0),Ro(),i=p.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:p.cache},a.updateQueue.baseState=l,a.memoizedState=l,a.flags&256){a=fp(e,a,i,n);break e}else if(i!==r){r=Rs(Error(c(424)),a),Eo(r),a=fp(e,a,i,n);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(qa=Ls(e.firstChild),Ln=a,ia=!0,Pi=null,Os=!0,n=cu(a,null,i,n),a.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(mr(),i===r){a=gi(e,a,n);break e}Wn(e,a,i,n)}a=a.child}return a;case 26:return Hl(e,a),e===null?(n=Tm(a.type,null,a.pendingProps,null))?a.memoizedState=n:ia||(n=a.type,e=a.pendingProps,i=ic(ye.current).createElement(n),i[_e]=a,i[Dt]=e,Hn(i,n,e),wa(i),a.stateNode=i):a.memoizedState=Tm(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return tt(a),e===null&&ia&&(i=a.stateNode=km(a.type,a.pendingProps,ye.current),Ln=a,Os=!0,r=qa,Yi(a.type)?(dd=r,qa=Ls(i.firstChild)):qa=r),Wn(e,a,a.pendingProps.children,n),Hl(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&ia&&((r=i=qa)&&(i=ox(i,a.type,a.pendingProps,Os),i!==null?(a.stateNode=i,Ln=a,qa=Ls(i.firstChild),Os=!1,r=!0):r=!1),r||Ri(a)),tt(a),r=a.type,l=a.pendingProps,p=e!==null?e.memoizedProps:null,i=l.children,id(r,l)?i=null:p!==null&&id(r,p)&&(a.flags|=32),a.memoizedState!==null&&(r=s0(e,a,Nh,null,null,n),tl._currentValue=r),Hl(e,a),Wn(e,a,i,n),a.child;case 6:return e===null&&ia&&((e=n=qa)&&(n=lx(n,a.pendingProps,Os),n!==null?(a.stateNode=n,Ln=a,qa=null,e=!0):e=!1),e||Ri(a)),null;case 13:return hp(e,a,n);case 4:return ke(a,a.stateNode.containerInfo),i=a.pendingProps,e===null?a.child=br(a,null,i,n):Wn(e,a,i,n),a.child;case 11:return rp(e,a,a.type,a.pendingProps,n);case 7:return Wn(e,a,a.pendingProps,n),a.child;case 8:return Wn(e,a,a.pendingProps.children,n),a.child;case 12:return Wn(e,a,a.pendingProps.children,n),a.child;case 10:return i=a.pendingProps,zi(a,a.type,i.value),Wn(e,a,i.children,n),a.child;case 9:return r=a.type._context,i=a.pendingProps.children,hr(a),r=Un(r),i=i(r),a.flags|=1,Wn(e,a,i,n),a.child;case 14:return op(e,a,a.type,a.pendingProps,n);case 15:return lp(e,a,a.type,a.pendingProps,n);case 19:return gp(e,a,n);case 31:return Sh(e,a,n);case 22:return cp(e,a,n,a.pendingProps);case 24:return hr(a),i=Un(yn),e===null?(r=Yc(),r===null&&(r=Ra,l=Fc(),r.pooledCache=l,l.refCount++,l!==null&&(r.pooledCacheLanes|=n),r=l),a.memoizedState={parent:i,cache:r},Zc(a),zi(a,yn,r)):((e.lanes&n)!==0&&(Qc(e,a),zo(a,null,null,n),Ro()),r=e.memoizedState,l=a.memoizedState,r.parent!==i?(r={parent:i,cache:i},a.memoizedState=r,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=r),zi(a,yn,i)):(i=l.cache,zi(a,yn,i),i!==r.cache&&Gc(a,[yn],n,!0))),Wn(e,a,a.pendingProps.children,n),a.child;case 29:throw a.pendingProps}throw Error(c(156,a.tag))}function yi(e){e.flags|=4}function D0(e,a,n,i,r){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(Gp())e.flags|=8192;else throw yr=Cl,Xc}else e.flags&=-16777217}function bp(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Rm(a))if(Gp())e.flags|=8192;else throw yr=Cl,Xc}function Vl(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?Ke():536870912,e.lanes|=a,to|=a)}function Wo(e,a){if(!ia)switch(e.tailMode){case"hidden":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Va(e){var a=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(a)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,a}function Dh(e,a,n){var i=a.pendingProps;switch(Uc(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Va(a),null;case 1:return Va(a),null;case 3:return n=a.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),a.memoizedState.cache!==i&&(a.flags|=2048),fi(yn),Je(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Hr(a)?yi(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Hc())),Va(a),null;case 26:var r=a.type,l=a.memoizedState;return e===null?(yi(a),l!==null?(Va(a),bp(a,l)):(Va(a),D0(a,r,null,i,n))):l?l!==e.memoizedState?(yi(a),Va(a),bp(a,l)):(Va(a),a.flags&=-16777217):(e=e.memoizedProps,e!==i&&yi(a),Va(a),D0(a,r,e,i,n)),null;case 27:if(bt(a),n=ye.current,r=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==i&&yi(a);else{if(!i){if(a.stateNode===null)throw Error(c(166));return Va(a),null}e=R.current,Hr(a)?Jd(a):(e=km(r,i,n),a.stateNode=e,yi(a))}return Va(a),null;case 5:if(bt(a),r=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==i&&yi(a);else{if(!i){if(a.stateNode===null)throw Error(c(166));return Va(a),null}if(l=R.current,Hr(a))Jd(a);else{var p=ic(ye.current);switch(l){case 1:l=p.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:l=p.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":l=p.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":l=p.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":l=p.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof i.is=="string"?p.createElement("select",{is:i.is}):p.createElement("select"),i.multiple?l.multiple=!0:i.size&&(l.size=i.size);break;default:l=typeof i.is=="string"?p.createElement(r,{is:i.is}):p.createElement(r)}}l[_e]=a,l[Dt]=i;e:for(p=a.child;p!==null;){if(p.tag===5||p.tag===6)l.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===a)break e;for(;p.sibling===null;){if(p.return===null||p.return===a)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}a.stateNode=l;e:switch(Hn(l,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&yi(a)}}return Va(a),D0(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,n),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==i&&yi(a);else{if(typeof i!="string"&&a.stateNode===null)throw Error(c(166));if(e=ye.current,Hr(a)){if(e=a.stateNode,n=a.memoizedProps,i=null,r=Ln,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[_e]=a,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||hm(e.nodeValue,n)),e||Ri(a,!0)}else e=ic(e).createTextNode(i),e[_e]=a,a.stateNode=e}return Va(a),null;case 31:if(n=a.memoizedState,e===null||e.memoizedState!==null){if(i=Hr(a),n!==null){if(e===null){if(!i)throw Error(c(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[_e]=a}else mr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Va(a),e=!1}else n=Hc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return a.flags&256?(Ns(a),a):(Ns(a),null);if((a.flags&128)!==0)throw Error(c(558))}return Va(a),null;case 13:if(i=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Hr(a),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(c(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(c(317));r[_e]=a}else mr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Va(a),r=!1}else r=Hc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return a.flags&256?(Ns(a),a):(Ns(a),null)}return Ns(a),(a.flags&128)!==0?(a.lanes=n,a):(n=i!==null,e=e!==null&&e.memoizedState!==null,n&&(i=a.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==r&&(i.flags|=2048)),n!==e&&n&&(a.child.flags|=8192),Vl(a,a.updateQueue),Va(a),null);case 4:return Je(),e===null&&ed(a.stateNode.containerInfo),Va(a),null;case 10:return fi(a.type),Va(a),null;case 19:if(A(ln),i=a.memoizedState,i===null)return Va(a),null;if(r=(a.flags&128)!==0,l=i.rendering,l===null)if(r)Wo(i,!1);else{if(on!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(l=Al(e),l!==null){for(a.flags|=128,Wo(i,!1),e=l.updateQueue,a.updateQueue=e,Vl(a,e),a.subtreeFlags=0,e=n,n=a.child;n!==null;)Id(n,e),n=n.sibling;return Y(ln,ln.current&1|2),ia&&pi(a,i.treeForkCount),a.child}e=e.sibling}i.tail!==null&&$e()>Xl&&(a.flags|=128,r=!0,Wo(i,!1),a.lanes=4194304)}else{if(!r)if(e=Al(l),e!==null){if(a.flags|=128,r=!0,e=e.updateQueue,a.updateQueue=e,Vl(a,e),Wo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!ia)return Va(a),null}else 2*$e()-i.renderingStartTime>Xl&&n!==536870912&&(a.flags|=128,r=!0,Wo(i,!1),a.lanes=4194304);i.isBackwards?(l.sibling=a.child,a.child=l):(e=i.last,e!==null?e.sibling=l:a.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=$e(),e.sibling=null,n=ln.current,Y(ln,r?n&1|2:n&1),ia&&pi(a,i.treeForkCount),e):(Va(a),null);case 22:case 23:return Ns(a),t0(),i=a.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(a.flags|=8192):i&&(a.flags|=8192),i?(n&536870912)!==0&&(a.flags&128)===0&&(Va(a),a.subtreeFlags&6&&(a.flags|=8192)):Va(a),n=a.updateQueue,n!==null&&Vl(a,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==n&&(a.flags|=2048),e!==null&&A(xr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),a.memoizedState.cache!==n&&(a.flags|=2048),fi(yn),Va(a),null;case 25:return null;case 30:return null}throw Error(c(156,a.tag))}function Ph(e,a){switch(Uc(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return fi(yn),Je(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return bt(a),null;case 31:if(a.memoizedState!==null){if(Ns(a),a.alternate===null)throw Error(c(340));mr()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(Ns(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(c(340));mr()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return A(ln),null;case 4:return Je(),null;case 10:return fi(a.type),null;case 22:case 23:return Ns(a),t0(),e!==null&&A(xr),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return fi(yn),null;case 25:return null;default:return null}}function vp(e,a){switch(Uc(a),a.tag){case 3:fi(yn),Je();break;case 26:case 27:case 5:bt(a);break;case 4:Je();break;case 31:a.memoizedState!==null&&Ns(a);break;case 13:Ns(a);break;case 19:A(ln);break;case 10:fi(a.type);break;case 22:case 23:Ns(a),t0(),e!==null&&A(xr);break;case 24:fi(yn)}}function Ho(e,a){try{var n=a.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var l=n.create,p=n.inst;i=l(),p.destroy=i}n=n.next}while(n!==r)}}catch(N){ja(a,a.return,N)}}function Wi(e,a,n){try{var i=a.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var l=r.next;i=l;do{if((i.tag&e)===e){var p=i.inst,N=p.destroy;if(N!==void 0){p.destroy=void 0,r=a;var O=n,ue=N;try{ue()}catch(Me){ja(r,O,Me)}}}i=i.next}while(i!==l)}}catch(Me){ja(a,a.return,Me)}}function jp(e){var a=e.updateQueue;if(a!==null){var n=e.stateNode;try{uu(a,n)}catch(i){ja(e,e.return,i)}}}function Np(e,a,n){n.props=jr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){ja(e,a,i)}}function qo(e,a){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){ja(e,a,r)}}function ai(e,a){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){ja(e,a,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){ja(e,a,r)}else n.current=null}function wp(e){var a=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){ja(e,e.return,r)}}function P0(e,a,n){try{var i=e.stateNode;tx(i,e.type,n,a),i[Dt]=a}catch(r){ja(e,e.return,r)}}function _p(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Yi(e.type)||e.tag===4}function R0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_p(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Yi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function z0(e,a,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,a?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,a):(a=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.appendChild(e),n=n._reactRootContainer,n!=null||a.onclick!==null||(a.onclick=Aa));else if(i!==4&&(i===27&&Yi(e.type)&&(n=e.stateNode,a=null),e=e.child,e!==null))for(z0(e,a,n),e=e.sibling;e!==null;)z0(e,a,n),e=e.sibling}function Gl(e,a,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,a?n.insertBefore(e,a):n.appendChild(e);else if(i!==4&&(i===27&&Yi(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Gl(e,a,n),e=e.sibling;e!==null;)Gl(e,a,n),e=e.sibling}function Mp(e){var a=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=a.attributes;r.length;)a.removeAttributeNode(r[0]);Hn(a,i,n),a[_e]=e,a[Dt]=n}catch(l){ja(e,e.return,l)}}var bi=!1,jn=!1,$0=!1,kp=typeof WeakSet=="function"?WeakSet:Set,zn=null;function Rh(e,a){if(e=e.containerInfo,nd=pc,e=Wt(e),pa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var p=0,N=-1,O=-1,ue=0,Me=0,Re=e,xe=null;t:for(;;){for(var ve;Re!==n||r!==0&&Re.nodeType!==3||(N=p+r),Re!==l||i!==0&&Re.nodeType!==3||(O=p+i),Re.nodeType===3&&(p+=Re.nodeValue.length),(ve=Re.firstChild)!==null;)xe=Re,Re=ve;for(;;){if(Re===e)break t;if(xe===n&&++ue===r&&(N=p),xe===l&&++Me===i&&(O=p),(ve=Re.nextSibling)!==null)break;Re=xe,xe=Re.parentNode}Re=ve}n=N===-1||O===-1?null:{start:N,end:O}}else n=null}n=n||{start:0,end:0}}else n=null;for(sd={focusedElem:e,selectionRange:n},pc=!1,zn=a;zn!==null;)if(a=zn,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,zn=e;else for(;zn!==null;){switch(a=zn,l=a.alternate,e=a.flags,a.tag){case 0:if((e&4)!==0&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)r=e[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&l!==null){e=void 0,n=a,r=l.memoizedProps,l=l.memoizedState,i=n.stateNode;try{var ht=jr(n.type,r);e=i.getSnapshotBeforeUpdate(ht,l),i.__reactInternalSnapshotBeforeUpdate=e}catch(Lt){ja(n,n.return,Lt)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,n=e.nodeType,n===9)od(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":od(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=a.sibling,e!==null){e.return=a.return,zn=e;break}zn=a.return}}function Cp(e,a,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ji(e,n),i&4&&Ho(5,n);break;case 1:if(ji(e,n),i&4)if(e=n.stateNode,a===null)try{e.componentDidMount()}catch(p){ja(n,n.return,p)}else{var r=jr(n.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(r,a,e.__reactInternalSnapshotBeforeUpdate)}catch(p){ja(n,n.return,p)}}i&64&&jp(n),i&512&&qo(n,n.return);break;case 3:if(ji(e,n),i&64&&(e=n.updateQueue,e!==null)){if(a=null,n.child!==null)switch(n.child.tag){case 27:case 5:a=n.child.stateNode;break;case 1:a=n.child.stateNode}try{uu(e,a)}catch(p){ja(n,n.return,p)}}break;case 27:a===null&&i&4&&Mp(n);case 26:case 5:ji(e,n),a===null&&i&4&&wp(n),i&512&&qo(n,n.return);break;case 12:ji(e,n);break;case 31:ji(e,n),i&4&&Sp(e,n);break;case 13:ji(e,n),i&4&&Ap(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=qh.bind(null,n),cx(e,n))));break;case 22:if(i=n.memoizedState!==null||bi,!i){a=a!==null&&a.memoizedState!==null||jn,r=bi;var l=jn;bi=i,(jn=a)&&!l?Ni(e,n,(n.subtreeFlags&8772)!==0):ji(e,n),bi=r,jn=l}break;case 30:break;default:ji(e,n)}}function Ep(e){var a=e.alternate;a!==null&&(e.alternate=null,Ep(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&Ye(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Za=null,ls=!1;function vi(e,a,n){for(n=n.child;n!==null;)Tp(e,a,n),n=n.sibling}function Tp(e,a,n){if(Z&&typeof Z.onCommitFiberUnmount=="function")try{Z.onCommitFiberUnmount(At,n)}catch{}switch(n.tag){case 26:jn||ai(n,a),vi(e,a,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:jn||ai(n,a);var i=Za,r=ls;Yi(n.type)&&(Za=n.stateNode,ls=!1),vi(e,a,n),Jo(n.stateNode),Za=i,ls=r;break;case 5:jn||ai(n,a);case 6:if(i=Za,r=ls,Za=null,vi(e,a,n),Za=i,ls=r,Za!==null)if(ls)try{(Za.nodeType===9?Za.body:Za.nodeName==="HTML"?Za.ownerDocument.body:Za).removeChild(n.stateNode)}catch(l){ja(n,a,l)}else try{Za.removeChild(n.stateNode)}catch(l){ja(n,a,l)}break;case 18:Za!==null&&(ls?(e=Za,jm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),co(e)):jm(Za,n.stateNode));break;case 4:i=Za,r=ls,Za=n.stateNode.containerInfo,ls=!0,vi(e,a,n),Za=i,ls=r;break;case 0:case 11:case 14:case 15:Wi(2,n,a),jn||Wi(4,n,a),vi(e,a,n);break;case 1:jn||(ai(n,a),i=n.stateNode,typeof i.componentWillUnmount=="function"&&Np(n,a,i)),vi(e,a,n);break;case 21:vi(e,a,n);break;case 22:jn=(i=jn)||n.memoizedState!==null,vi(e,a,n),jn=i;break;default:vi(e,a,n)}}function Sp(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{co(e)}catch(n){ja(a,a.return,n)}}}function Ap(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{co(e)}catch(n){ja(a,a.return,n)}}function zh(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new kp),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new kp),a;default:throw Error(c(435,e.tag))}}function Fl(e,a){var n=zh(e);a.forEach(function(i){if(!n.has(i)){n.add(i);var r=Vh.bind(null,e,i);i.then(r,r)}})}function cs(e,a){var n=a.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],l=e,p=a,N=p;e:for(;N!==null;){switch(N.tag){case 27:if(Yi(N.type)){Za=N.stateNode,ls=!1;break e}break;case 5:Za=N.stateNode,ls=!1;break e;case 3:case 4:Za=N.stateNode.containerInfo,ls=!0;break e}N=N.return}if(Za===null)throw Error(c(160));Tp(l,p,r),Za=null,ls=!1,l=r.alternate,l!==null&&(l.return=null),r.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Dp(a,e),a=a.sibling}var Fs=null;function Dp(e,a){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:cs(a,e),ds(e),i&4&&(Wi(3,e,e.return),Ho(3,e),Wi(5,e,e.return));break;case 1:cs(a,e),ds(e),i&512&&(jn||n===null||ai(n,n.return)),i&64&&bi&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=Fs;if(cs(a,e),ds(e),i&512&&(jn||n===null||ai(n,n.return)),i&4){var l=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":l=r.getElementsByTagName("title")[0],(!l||l[ra]||l[_e]||l.namespaceURI==="http://www.w3.org/2000/svg"||l.hasAttribute("itemprop"))&&(l=r.createElement(i),r.head.insertBefore(l,r.querySelector("head > title"))),Hn(l,i,n),l[_e]=e,wa(l),i=l;break e;case"link":var p=Dm("link","href",r).get(i+(n.href||""));if(p){for(var N=0;N<p.length;N++)if(l=p[N],l.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&l.getAttribute("rel")===(n.rel==null?null:n.rel)&&l.getAttribute("title")===(n.title==null?null:n.title)&&l.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){p.splice(N,1);break t}}l=r.createElement(i),Hn(l,i,n),r.head.appendChild(l);break;case"meta":if(p=Dm("meta","content",r).get(i+(n.content||""))){for(N=0;N<p.length;N++)if(l=p[N],l.getAttribute("content")===(n.content==null?null:""+n.content)&&l.getAttribute("name")===(n.name==null?null:n.name)&&l.getAttribute("property")===(n.property==null?null:n.property)&&l.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&l.getAttribute("charset")===(n.charSet==null?null:n.charSet)){p.splice(N,1);break t}}l=r.createElement(i),Hn(l,i,n),r.head.appendChild(l);break;default:throw Error(c(468,i))}l[_e]=e,wa(l),i=l}e.stateNode=i}else Pm(r,e.type,e.stateNode);else e.stateNode=Am(r,i,e.memoizedProps);else l!==i?(l===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):l.count--,i===null?Pm(r,e.type,e.stateNode):Am(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&P0(e,e.memoizedProps,n.memoizedProps)}break;case 27:cs(a,e),ds(e),i&512&&(jn||n===null||ai(n,n.return)),n!==null&&i&4&&P0(e,e.memoizedProps,n.memoizedProps);break;case 5:if(cs(a,e),ds(e),i&512&&(jn||n===null||ai(n,n.return)),e.flags&32){r=e.stateNode;try{Bt(r,"")}catch(ht){ja(e,e.return,ht)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,P0(e,r,n!==null?n.memoizedProps:r)),i&1024&&($0=!0);break;case 6:if(cs(a,e),ds(e),i&4){if(e.stateNode===null)throw Error(c(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(ht){ja(e,e.return,ht)}}break;case 3:if(lc=null,r=Fs,Fs=rc(a.containerInfo),cs(a,e),Fs=r,ds(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{co(a.containerInfo)}catch(ht){ja(e,e.return,ht)}$0&&($0=!1,Pp(e));break;case 4:i=Fs,Fs=rc(e.stateNode.containerInfo),cs(a,e),ds(e),Fs=i;break;case 12:cs(a,e),ds(e);break;case 31:cs(a,e),ds(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Fl(e,i)));break;case 13:cs(a,e),ds(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Yl=$e()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Fl(e,i)));break;case 22:r=e.memoizedState!==null;var O=n!==null&&n.memoizedState!==null,ue=bi,Me=jn;if(bi=ue||r,jn=Me||O,cs(a,e),jn=Me,bi=ue,ds(e),i&8192)e:for(a=e.stateNode,a._visibility=r?a._visibility&-2:a._visibility|1,r&&(n===null||O||bi||jn||Nr(e)),n=null,a=e;;){if(a.tag===5||a.tag===26){if(n===null){O=n=a;try{if(l=O.stateNode,r)p=l.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{N=O.stateNode;var Re=O.memoizedProps.style,xe=Re!=null&&Re.hasOwnProperty("display")?Re.display:null;N.style.display=xe==null||typeof xe=="boolean"?"":(""+xe).trim()}}catch(ht){ja(O,O.return,ht)}}}else if(a.tag===6){if(n===null){O=a;try{O.stateNode.nodeValue=r?"":O.memoizedProps}catch(ht){ja(O,O.return,ht)}}}else if(a.tag===18){if(n===null){O=a;try{var ve=O.stateNode;r?Nm(ve,!0):Nm(O.stateNode,!1)}catch(ht){ja(O,O.return,ht)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;n===a&&(n=null),a=a.return}n===a&&(n=null),a.sibling.return=a.return,a=a.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Fl(e,n))));break;case 19:cs(a,e),ds(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Fl(e,i)));break;case 30:break;case 21:break;default:cs(a,e),ds(e)}}function ds(e){var a=e.flags;if(a&2){try{for(var n,i=e.return;i!==null;){if(_p(i)){n=i;break}i=i.return}if(n==null)throw Error(c(160));switch(n.tag){case 27:var r=n.stateNode,l=R0(e);Gl(e,l,r);break;case 5:var p=n.stateNode;n.flags&32&&(Bt(p,""),n.flags&=-33);var N=R0(e);Gl(e,N,p);break;case 3:case 4:var O=n.stateNode.containerInfo,ue=R0(e);z0(e,ue,O);break;default:throw Error(c(161))}}catch(Me){ja(e,e.return,Me)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function Pp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;Pp(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function ji(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Cp(e,a.alternate,a),a=a.sibling}function Nr(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:Wi(4,a,a.return),Nr(a);break;case 1:ai(a,a.return);var n=a.stateNode;typeof n.componentWillUnmount=="function"&&Np(a,a.return,n),Nr(a);break;case 27:Jo(a.stateNode);case 26:case 5:ai(a,a.return),Nr(a);break;case 22:a.memoizedState===null&&Nr(a);break;case 30:Nr(a);break;default:Nr(a)}e=e.sibling}}function Ni(e,a,n){for(n=n&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var i=a.alternate,r=e,l=a,p=l.flags;switch(l.tag){case 0:case 11:case 15:Ni(r,l,n),Ho(4,l);break;case 1:if(Ni(r,l,n),i=l,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(ue){ja(i,i.return,ue)}if(i=l,r=i.updateQueue,r!==null){var N=i.stateNode;try{var O=r.shared.hiddenCallbacks;if(O!==null)for(r.shared.hiddenCallbacks=null,r=0;r<O.length;r++)du(O[r],N)}catch(ue){ja(i,i.return,ue)}}n&&p&64&&jp(l),qo(l,l.return);break;case 27:Mp(l);case 26:case 5:Ni(r,l,n),n&&i===null&&p&4&&wp(l),qo(l,l.return);break;case 12:Ni(r,l,n);break;case 31:Ni(r,l,n),n&&p&4&&Sp(r,l);break;case 13:Ni(r,l,n),n&&p&4&&Ap(r,l);break;case 22:l.memoizedState===null&&Ni(r,l,n),qo(l,l.return);break;case 30:break;default:Ni(r,l,n)}a=a.sibling}}function O0(e,a){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&To(n))}function B0(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&To(e))}function Is(e,a,n,i){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Rp(e,a,n,i),a=a.sibling}function Rp(e,a,n,i){var r=a.flags;switch(a.tag){case 0:case 11:case 15:Is(e,a,n,i),r&2048&&Ho(9,a);break;case 1:Is(e,a,n,i);break;case 3:Is(e,a,n,i),r&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&To(e)));break;case 12:if(r&2048){Is(e,a,n,i),e=a.stateNode;try{var l=a.memoizedProps,p=l.id,N=l.onPostCommit;typeof N=="function"&&N(p,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){ja(a,a.return,O)}}else Is(e,a,n,i);break;case 31:Is(e,a,n,i);break;case 13:Is(e,a,n,i);break;case 23:break;case 22:l=a.stateNode,p=a.alternate,a.memoizedState!==null?l._visibility&2?Is(e,a,n,i):Vo(e,a):l._visibility&2?Is(e,a,n,i):(l._visibility|=2,Jr(e,a,n,i,(a.subtreeFlags&10256)!==0||!1)),r&2048&&O0(p,a);break;case 24:Is(e,a,n,i),r&2048&&B0(a.alternate,a);break;default:Is(e,a,n,i)}}function Jr(e,a,n,i,r){for(r=r&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var l=e,p=a,N=n,O=i,ue=p.flags;switch(p.tag){case 0:case 11:case 15:Jr(l,p,N,O,r),Ho(8,p);break;case 23:break;case 22:var Me=p.stateNode;p.memoizedState!==null?Me._visibility&2?Jr(l,p,N,O,r):Vo(l,p):(Me._visibility|=2,Jr(l,p,N,O,r)),r&&ue&2048&&O0(p.alternate,p);break;case 24:Jr(l,p,N,O,r),r&&ue&2048&&B0(p.alternate,p);break;default:Jr(l,p,N,O,r)}a=a.sibling}}function Vo(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var n=e,i=a,r=i.flags;switch(i.tag){case 22:Vo(n,i),r&2048&&O0(i.alternate,i);break;case 24:Vo(n,i),r&2048&&B0(i.alternate,i);break;default:Vo(n,i)}a=a.sibling}}var Go=8192;function Kr(e,a,n){if(e.subtreeFlags&Go)for(e=e.child;e!==null;)zp(e,a,n),e=e.sibling}function zp(e,a,n){switch(e.tag){case 26:Kr(e,a,n),e.flags&Go&&e.memoizedState!==null&&jx(n,Fs,e.memoizedState,e.memoizedProps);break;case 5:Kr(e,a,n);break;case 3:case 4:var i=Fs;Fs=rc(e.stateNode.containerInfo),Kr(e,a,n),Fs=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Go,Go=16777216,Kr(e,a,n),Go=i):Kr(e,a,n));break;default:Kr(e,a,n)}}function $p(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function Fo(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var n=0;n<a.length;n++){var i=a[n];zn=i,Bp(i,e)}$p(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Op(e),e=e.sibling}function Op(e){switch(e.tag){case 0:case 11:case 15:Fo(e),e.flags&2048&&Wi(9,e,e.return);break;case 3:Fo(e);break;case 12:Fo(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,Il(e)):Fo(e);break;default:Fo(e)}}function Il(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var n=0;n<a.length;n++){var i=a[n];zn=i,Bp(i,e)}$p(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:Wi(8,a,a.return),Il(a);break;case 22:n=a.stateNode,n._visibility&2&&(n._visibility&=-3,Il(a));break;default:Il(a)}e=e.sibling}}function Bp(e,a){for(;zn!==null;){var n=zn;switch(n.tag){case 0:case 11:case 15:Wi(8,n,a);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:To(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,zn=i;else e:for(n=e;zn!==null;){i=zn;var r=i.sibling,l=i.return;if(Ep(i),i===n){zn=null;break e}if(r!==null){r.return=l,zn=r;break e}zn=l}}}var $h={getCacheForType:function(e){var a=Un(yn),n=a.data.get(e);return n===void 0&&(n=e(),a.data.set(e,n)),n},cacheSignal:function(){return Un(yn).controller.signal}},Oh=typeof WeakMap=="function"?WeakMap:Map,xa=0,Ra=null,ea=null,na=0,va=0,ws=null,Hi=!1,eo=!1,L0=!1,wi=0,on=0,qi=0,wr=0,U0=0,_s=0,to=0,Io=null,us=null,W0=!1,Yl=0,Lp=0,Xl=1/0,Zl=null,Vi=null,En=0,Gi=null,ao=null,_i=0,H0=0,q0=null,Up=null,Yo=0,V0=null;function Ms(){return(xa&2)!==0&&na!==0?na&-na:_.T!==null?Z0():Ce()}function Wp(){if(_s===0)if((na&536870912)===0||ia){var e=oe;oe<<=1,(oe&3932160)===0&&(oe=262144),_s=e}else _s=536870912;return e=js.current,e!==null&&(e.flags|=32),_s}function ps(e,a,n){(e===Ra&&(va===2||va===9)||e.cancelPendingCommit!==null)&&(no(e,0),Fi(e,na,_s,!1)),Mt(e,n),((xa&2)===0||e!==Ra)&&(e===Ra&&((xa&2)===0&&(wr|=n),on===4&&Fi(e,na,_s,!1)),ni(e))}function Hp(e,a,n){if((xa&6)!==0)throw Error(c(327));var i=!n&&(a&127)===0&&(a&e.expiredLanes)===0||Te(e,a),r=i?Uh(e,a):F0(e,a,!0),l=i;do{if(r===0){eo&&!i&&Fi(e,a,0,!1);break}else{if(n=e.current.alternate,l&&!Bh(n)){r=F0(e,a,!1),l=!1;continue}if(r===2){if(l=a,e.errorRecoveryDisabledLanes&l)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){a=p;e:{var N=e;r=Io;var O=N.current.memoizedState.isDehydrated;if(O&&(no(N,p).flags|=256),p=F0(N,p,!1),p!==2){if(L0&&!O){N.errorRecoveryDisabledLanes|=l,wr|=l,r=4;break e}l=us,us=r,l!==null&&(us===null?us=l:us.push.apply(us,l))}r=p}if(l=!1,r!==2)continue}}if(r===1){no(e,0),Fi(e,a,0,!0);break}e:{switch(i=e,l=r,l){case 0:case 1:throw Error(c(345));case 4:if((a&4194048)!==a)break;case 6:Fi(i,a,_s,!Hi);break e;case 2:us=null;break;case 3:case 5:break;default:throw Error(c(329))}if((a&62914560)===a&&(r=Yl+300-$e(),10<r)){if(Fi(i,a,_s,!Hi),We(i,0,!0)!==0)break e;_i=a,i.timeoutHandle=bm(qp.bind(null,i,n,us,Zl,W0,a,_s,wr,to,Hi,l,"Throttled",-0,0),r);break e}qp(i,n,us,Zl,W0,a,_s,wr,to,Hi,l,null,-0,0)}}break}while(!0);ni(e)}function qp(e,a,n,i,r,l,p,N,O,ue,Me,Re,xe,ve){if(e.timeoutHandle=-1,Re=a.subtreeFlags,Re&8192||(Re&16785408)===16785408){Re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Aa},zp(a,l,Re);var ht=(l&62914560)===l?Yl-$e():(l&4194048)===l?Lp-$e():0;if(ht=Nx(Re,ht),ht!==null){_i=l,e.cancelPendingCommit=ht(Qp.bind(null,e,a,l,n,i,r,p,N,O,Me,Re,null,xe,ve)),Fi(e,l,p,!ue);return}}Qp(e,a,l,n,i,r,p,N,O)}function Bh(e){for(var a=e;;){var n=a.tag;if((n===0||n===11||n===15)&&a.flags&16384&&(n=a.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],l=r.getSnapshot;r=r.value;try{if(!ba(l(),r))return!1}catch{return!1}}if(n=a.child,a.subtreeFlags&16384&&n!==null)n.return=a,a=n;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Fi(e,a,n,i){a&=~U0,a&=~wr,e.suspendedLanes|=a,e.pingedLanes&=~a,i&&(e.warmLanes|=a),i=e.expirationTimes;for(var r=a;0<r;){var l=31-te(r),p=1<<l;i[l]=-1,r&=~p}n!==0&&la(e,n,a)}function Ql(){return(xa&6)===0?(Xo(0),!1):!0}function G0(){if(ea!==null){if(va===0)var e=ea.return;else e=ea,mi=fr=null,o0(e),Ir=null,Ao=0,e=ea;for(;e!==null;)vp(e.alternate,e),e=e.return;ea=null}}function no(e,a){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,sx(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),_i=0,G0(),Ra=e,ea=n=ui(e.current,null),na=a,va=0,ws=null,Hi=!1,eo=Te(e,a),L0=!1,to=_s=U0=wr=qi=on=0,us=Io=null,W0=!1,(a&8)!==0&&(a|=a&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=a;0<i;){var r=31-te(i),l=1<<r;a|=e[r],i&=~l}return wi=a,yl(),n}function Vp(e,a){Zt=null,_.H=Lo,a===Fr||a===kl?(a=ru(),va=3):a===Xc?(a=ru(),va=4):va=a===w0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ws=a,ea===null&&(on=1,Ul(e,Rs(a,e.current)))}function Gp(){var e=js.current;return e===null?!0:(na&4194048)===na?Bs===null:(na&62914560)===na||(na&536870912)!==0?e===Bs:!1}function Fp(){var e=_.H;return _.H=Lo,e===null?Lo:e}function Ip(){var e=_.A;return _.A=$h,e}function Jl(){on=4,Hi||(na&4194048)!==na&&js.current!==null||(eo=!0),(qi&134217727)===0&&(wr&134217727)===0||Ra===null||Fi(Ra,na,_s,!1)}function F0(e,a,n){var i=xa;xa|=2;var r=Fp(),l=Ip();(Ra!==e||na!==a)&&(Zl=null,no(e,a)),a=!1;var p=on;e:do try{if(va!==0&&ea!==null){var N=ea,O=ws;switch(va){case 8:G0(),p=6;break e;case 3:case 2:case 9:case 6:js.current===null&&(a=!0);var ue=va;if(va=0,ws=null,so(e,N,O,ue),n&&eo){p=0;break e}break;default:ue=va,va=0,ws=null,so(e,N,O,ue)}}Lh(),p=on;break}catch(Me){Vp(e,Me)}while(!0);return a&&e.shellSuspendCounter++,mi=fr=null,xa=i,_.H=r,_.A=l,ea===null&&(Ra=null,na=0,yl()),p}function Lh(){for(;ea!==null;)Yp(ea)}function Uh(e,a){var n=xa;xa|=2;var i=Fp(),r=Ip();Ra!==e||na!==a?(Zl=null,Xl=$e()+500,no(e,a)):eo=Te(e,a);e:do try{if(va!==0&&ea!==null){a=ea;var l=ws;t:switch(va){case 1:va=0,ws=null,so(e,a,l,1);break;case 2:case 9:if(su(l)){va=0,ws=null,Xp(a);break}a=function(){va!==2&&va!==9||Ra!==e||(va=7),ni(e)},l.then(a,a);break e;case 3:va=7;break e;case 4:va=5;break e;case 7:su(l)?(va=0,ws=null,Xp(a)):(va=0,ws=null,so(e,a,l,7));break;case 5:var p=null;switch(ea.tag){case 26:p=ea.memoizedState;case 5:case 27:var N=ea;if(p?Rm(p):N.stateNode.complete){va=0,ws=null;var O=N.sibling;if(O!==null)ea=O;else{var ue=N.return;ue!==null?(ea=ue,Kl(ue)):ea=null}break t}}va=0,ws=null,so(e,a,l,5);break;case 6:va=0,ws=null,so(e,a,l,6);break;case 8:G0(),on=6;break e;default:throw Error(c(462))}}Wh();break}catch(Me){Vp(e,Me)}while(!0);return mi=fr=null,_.H=i,_.A=r,xa=n,ea!==null?0:(Ra=null,na=0,yl(),on)}function Wh(){for(;ea!==null&&!Be();)Yp(ea)}function Yp(e){var a=yp(e.alternate,e,wi);e.memoizedProps=e.pendingProps,a===null?Kl(e):ea=a}function Xp(e){var a=e,n=a.alternate;switch(a.tag){case 15:case 0:a=pp(n,a,a.pendingProps,a.type,void 0,na);break;case 11:a=pp(n,a,a.pendingProps,a.type.render,a.ref,na);break;case 5:o0(a);default:vp(n,a),a=ea=Id(a,wi),a=yp(n,a,wi)}e.memoizedProps=e.pendingProps,a===null?Kl(e):ea=a}function so(e,a,n,i){mi=fr=null,o0(a),Ir=null,Ao=0;var r=a.return;try{if(Th(e,r,a,n,na)){on=1,Ul(e,Rs(n,e.current)),ea=null;return}}catch(l){if(r!==null)throw ea=r,l;on=1,Ul(e,Rs(n,e.current)),ea=null;return}a.flags&32768?(ia||i===1?e=!0:eo||(na&536870912)!==0?e=!1:(Hi=e=!0,(i===2||i===9||i===3||i===6)&&(i=js.current,i!==null&&i.tag===13&&(i.flags|=16384))),Zp(a,e)):Kl(a)}function Kl(e){var a=e;do{if((a.flags&32768)!==0){Zp(a,Hi);return}e=a.return;var n=Dh(a.alternate,a,wi);if(n!==null){ea=n;return}if(a=a.sibling,a!==null){ea=a;return}ea=a=e}while(a!==null);on===0&&(on=5)}function Zp(e,a){do{var n=Ph(e.alternate,e);if(n!==null){n.flags&=32767,ea=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!a&&(e=e.sibling,e!==null)){ea=e;return}ea=e=n}while(e!==null);on=6,ea=null}function Qp(e,a,n,i,r,l,p,N,O){e.cancelPendingCommit=null;do ec();while(En!==0);if((xa&6)!==0)throw Error(c(327));if(a!==null){if(a===e.current)throw Error(c(177));if(l=a.lanes|a.childLanes,l|=dr,ga(e,n,l,p,N,O),e===Ra&&(ea=Ra=null,na=0),ao=a,Gi=e,_i=n,H0=l,q0=r,Up=i,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Gh(oa,function(){return am(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||i){i=_.T,_.T=null,r=B.p,B.p=2,p=xa,xa|=4;try{Rh(e,a,n)}finally{xa=p,B.p=r,_.T=i}}En=1,Jp(),Kp(),em()}}function Jp(){if(En===1){En=0;var e=Gi,a=ao,n=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||n){n=_.T,_.T=null;var i=B.p;B.p=2;var r=xa;xa|=4;try{Dp(a,e);var l=sd,p=Wt(e.containerInfo),N=l.focusedElem,O=l.selectionRange;if(p!==N&&N&&N.ownerDocument&&Vt(N.ownerDocument.documentElement,N)){if(O!==null&&pa(N)){var ue=O.start,Me=O.end;if(Me===void 0&&(Me=ue),"selectionStart"in N)N.selectionStart=ue,N.selectionEnd=Math.min(Me,N.value.length);else{var Re=N.ownerDocument||document,xe=Re&&Re.defaultView||window;if(xe.getSelection){var ve=xe.getSelection(),ht=N.textContent.length,Lt=Math.min(O.start,ht),Ea=O.end===void 0?Lt:Math.min(O.end,ht);!ve.extend&&Lt>Ea&&(p=Ea,Ea=Lt,Lt=p);var J=Xt(N,Lt),V=Xt(N,Ea);if(J&&V&&(ve.rangeCount!==1||ve.anchorNode!==J.node||ve.anchorOffset!==J.offset||ve.focusNode!==V.node||ve.focusOffset!==V.offset)){var ce=Re.createRange();ce.setStart(J.node,J.offset),ve.removeAllRanges(),Lt>Ea?(ve.addRange(ce),ve.extend(V.node,V.offset)):(ce.setEnd(V.node,V.offset),ve.addRange(ce))}}}}for(Re=[],ve=N;ve=ve.parentNode;)ve.nodeType===1&&Re.push({element:ve,left:ve.scrollLeft,top:ve.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<Re.length;N++){var Se=Re[N];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}pc=!!nd,sd=nd=null}finally{xa=r,B.p=i,_.T=n}}e.current=a,En=2}}function Kp(){if(En===2){En=0;var e=Gi,a=ao,n=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||n){n=_.T,_.T=null;var i=B.p;B.p=2;var r=xa;xa|=4;try{Cp(e,a.alternate,a)}finally{xa=r,B.p=i,_.T=n}}En=3}}function em(){if(En===4||En===3){En=0,ze();var e=Gi,a=ao,n=_i,i=Up;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?En=5:(En=0,ao=Gi=null,tm(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Vi=null),Ve(n),a=a.stateNode,Z&&typeof Z.onCommitFiberRoot=="function")try{Z.onCommitFiberRoot(At,a,void 0,(a.current.flags&128)===128)}catch{}if(i!==null){a=_.T,r=B.p,B.p=2,_.T=null;try{for(var l=e.onRecoverableError,p=0;p<i.length;p++){var N=i[p];l(N.value,{componentStack:N.stack})}}finally{_.T=a,B.p=r}}(_i&3)!==0&&ec(),ni(e),r=e.pendingLanes,(n&261930)!==0&&(r&42)!==0?e===V0?Yo++:(Yo=0,V0=e):Yo=0,Xo(0)}}function tm(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,To(a)))}function ec(){return Jp(),Kp(),em(),am()}function am(){if(En!==5)return!1;var e=Gi,a=H0;H0=0;var n=Ve(_i),i=_.T,r=B.p;try{B.p=32>n?32:n,_.T=null,n=q0,q0=null;var l=Gi,p=_i;if(En=0,ao=Gi=null,_i=0,(xa&6)!==0)throw Error(c(331));var N=xa;if(xa|=4,Op(l.current),Rp(l,l.current,p,n),xa=N,Xo(0,!1),Z&&typeof Z.onPostCommitFiberRoot=="function")try{Z.onPostCommitFiberRoot(At,l)}catch{}return!0}finally{B.p=r,_.T=i,tm(e,a)}}function nm(e,a,n){a=Rs(n,a),a=N0(e.stateNode,a,2),e=Bi(e,a,2),e!==null&&(Mt(e,2),ni(e))}function ja(e,a,n){if(e.tag===3)nm(e,e,n);else for(;a!==null;){if(a.tag===3){nm(a,e,n);break}else if(a.tag===1){var i=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Vi===null||!Vi.has(i))){e=Rs(n,e),n=sp(2),i=Bi(a,n,2),i!==null&&(ip(n,i,a,e),Mt(i,2),ni(i));break}}a=a.return}}function I0(e,a,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Oh;var r=new Set;i.set(a,r)}else r=i.get(a),r===void 0&&(r=new Set,i.set(a,r));r.has(n)||(L0=!0,r.add(n),e=Hh.bind(null,e,a,n),a.then(e,e))}function Hh(e,a,n){var i=e.pingCache;i!==null&&i.delete(a),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ra===e&&(na&n)===n&&(on===4||on===3&&(na&62914560)===na&&300>$e()-Yl?(xa&2)===0&&no(e,0):U0|=n,to===na&&(to=0)),ni(e)}function sm(e,a){a===0&&(a=Ke()),e=ur(e,a),e!==null&&(Mt(e,a),ni(e))}function qh(e){var a=e.memoizedState,n=0;a!==null&&(n=a.retryLane),sm(e,n)}function Vh(e,a){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(c(314))}i!==null&&i.delete(a),sm(e,n)}function Gh(e,a){return Ie(e,a)}var tc=null,io=null,Y0=!1,ac=!1,X0=!1,Ii=0;function ni(e){e!==io&&e.next===null&&(io===null?tc=io=e:io=io.next=e),ac=!0,Y0||(Y0=!0,Ih())}function Xo(e,a){if(!X0&&ac){X0=!0;do for(var n=!1,i=tc;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var l=0;else{var p=i.suspendedLanes,N=i.pingedLanes;l=(1<<31-te(42|e)+1)-1,l&=r&~(p&~N),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(n=!0,lm(i,l))}else l=na,l=We(i,i===Ra?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(l&3)===0||Te(i,l)||(n=!0,lm(i,l));i=i.next}while(n);X0=!1}}function Fh(){im()}function im(){ac=Y0=!1;var e=0;Ii!==0&&nx()&&(e=Ii);for(var a=$e(),n=null,i=tc;i!==null;){var r=i.next,l=rm(i,a);l===0?(i.next=null,n===null?tc=r:n.next=r,r===null&&(io=n)):(n=i,(e!==0||(l&3)!==0)&&(ac=!0)),i=r}En!==0&&En!==5||Xo(e),Ii!==0&&(Ii=0)}function rm(e,a){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,l=e.pendingLanes&-62914561;0<l;){var p=31-te(l),N=1<<p,O=r[p];O===-1?((N&n)===0||(N&i)!==0)&&(r[p]=Ue(N,a)):O<=a&&(e.expiredLanes|=N),l&=~N}if(a=Ra,n=na,n=We(e,e===a?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===a&&(va===2||va===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&K(i),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Te(e,n)){if(a=n&-n,a===e.callbackPriority)return a;switch(i!==null&&K(i),Ve(n)){case 2:case 8:n=It;break;case 32:n=oa;break;case 268435456:n=Ta;break;default:n=oa}return i=om.bind(null,e),n=Ie(n,i),e.callbackPriority=a,e.callbackNode=n,a}return i!==null&&i!==null&&K(i),e.callbackPriority=2,e.callbackNode=null,2}function om(e,a){if(En!==0&&En!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ec()&&e.callbackNode!==n)return null;var i=na;return i=We(e,e===Ra?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Hp(e,i,a),rm(e,$e()),e.callbackNode!=null&&e.callbackNode===n?om.bind(null,e):null)}function lm(e,a){if(ec())return null;Hp(e,a,!0)}function Ih(){ix(function(){(xa&6)!==0?Ie(_t,Fh):im()})}function Z0(){if(Ii===0){var e=Vr;e===0&&(e=he,he<<=1,(he&261888)===0&&(he=256)),Ii=e}return Ii}function cm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:zt(""+e)}function dm(e,a){var n=a.ownerDocument.createElement("input");return n.name=a.name,n.value=a.value,e.id&&n.setAttribute("form",e.id),a.parentNode.insertBefore(n,a),e=new FormData(e),n.parentNode.removeChild(n),e}function Yh(e,a,n,i,r){if(a==="submit"&&n&&n.stateNode===r){var l=cm((r[Dt]||null).action),p=i.submitter;p&&(a=(a=p[Dt]||null)?cm(a.formAction):p.getAttribute("formAction"),a!==null&&(l=a,p=null));var N=new Pr("action","action",null,i,r);e.push({event:N,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Ii!==0){var O=p?dm(r,p):new FormData(r);x0(n,{pending:!0,data:O,method:r.method,action:l},null,O)}}else typeof l=="function"&&(N.preventDefault(),O=p?dm(r,p):new FormData(r),x0(n,{pending:!0,data:O,method:r.method,action:l},l,O))},currentTarget:r}]})}}for(var Q0=0;Q0<Or.length;Q0++){var J0=Or[Q0],Xh=J0.toLowerCase(),Zh=J0[0].toUpperCase()+J0.slice(1);bs(Xh,"on"+Zh)}bs(gs,"onAnimationEnd"),bs(di,"onAnimationIteration"),bs(ts,"onAnimationStart"),bs("dblclick","onDoubleClick"),bs("focusin","onFocus"),bs("focusout","onBlur"),bs(ys,"onTransitionRun"),bs(gn,"onTransitionStart"),bs(Js,"onTransitionCancel"),bs(Ks,"onTransitionEnd"),un("onMouseEnter",["mouseout","mouseover"]),un("onMouseLeave",["mouseout","mouseover"]),un("onPointerEnter",["pointerout","pointerover"]),un("onPointerLeave",["pointerout","pointerover"]),Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zo));function um(e,a){a=(a&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var l=void 0;if(a)for(var p=i.length-1;0<=p;p--){var N=i[p],O=N.instance,ue=N.currentTarget;if(N=N.listener,O!==l&&r.isPropagationStopped())break e;l=N,r.currentTarget=ue;try{l(r)}catch(Me){Br(Me)}r.currentTarget=null,l=O}else for(p=0;p<i.length;p++){if(N=i[p],O=N.instance,ue=N.currentTarget,N=N.listener,O!==l&&r.isPropagationStopped())break e;l=N,r.currentTarget=ue;try{l(r)}catch(Me){Br(Me)}r.currentTarget=null,l=O}}}}function ta(e,a){var n=a[mt];n===void 0&&(n=a[mt]=new Set);var i=e+"__bubble";n.has(i)||(pm(a,e,2,!1),n.add(i))}function K0(e,a,n){var i=0;a&&(i|=4),pm(n,e,i,a)}var nc="_reactListening"+Math.random().toString(36).slice(2);function ed(e){if(!e[nc]){e[nc]=!0,Jn.forEach(function(n){n!=="selectionchange"&&(Qh.has(n)||K0(n,!1,e),K0(n,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[nc]||(a[nc]=!0,K0("selectionchange",!1,a))}}function pm(e,a,n,i){switch(Wm(a)){case 2:var r=Mx;break;case 8:r=kx;break;default:r=hd}n=r.bind(null,a,n,e),r=void 0,!wn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(a,n,{capture:!0,passive:r}):e.addEventListener(a,n,!0):r!==void 0?e.addEventListener(a,n,{passive:r}):e.addEventListener(a,n,!1)}function td(e,a,n,i,r){var l=i;if((a&1)===0&&(a&2)===0&&i!==null)e:for(;;){if(i===null)return;var p=i.tag;if(p===3||p===4){var N=i.stateNode.containerInfo;if(N===r)break;if(p===4)for(p=i.return;p!==null;){var O=p.tag;if((O===3||O===4)&&p.stateNode.containerInfo===r)return;p=p.return}for(;N!==null;){if(p=dn(N),p===null)return;if(O=p.tag,O===5||O===6||O===26||O===27){i=l=p;continue e}N=N.parentNode}}i=i.return}Bn(function(){var ue=l,Me=Zs(n),Re=[];e:{var xe=$r.get(e);if(xe!==void 0){var ve=Pr,ht=e;switch(e){case"keypress":if(oi(n)===0)break e;case"keydown":case"keyup":ve=Qe;break;case"focusin":ht="focus",ve=_o;break;case"focusout":ht="blur",ve=_o;break;case"beforeblur":case"afterblur":ve=_o;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=or;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=dt;break;case gs:case di:case ts:ve=hs;break;case Ks:ve=Ct;break;case"scroll":case"scrollend":ve=Rc;break;case"wheel":ve=Da;break;case"copy":case"cut":case"paste":ve=xl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=kt;break;case"toggle":case"beforetoggle":ve=Oa}var Lt=(a&4)!==0,Ea=!Lt&&(e==="scroll"||e==="scrollend"),J=Lt?xe!==null?xe+"Capture":null:xe;Lt=[];for(var V=ue,ce;V!==null;){var Se=V;if(ce=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||ce===null||J===null||(Se=Fa(V,J),Se!=null&&Lt.push(Qo(V,Se,ce))),Ea)break;V=V.return}0<Lt.length&&(xe=new ve(xe,ht,null,n,Me),Re.push({event:xe,listeners:Lt}))}}if((a&7)===0){e:{if(xe=e==="mouseover"||e==="pointerover",ve=e==="mouseout"||e==="pointerout",xe&&n!==an&&(ht=n.relatedTarget||n.fromElement)&&(dn(ht)||ht[Rt]))break e;if((ve||xe)&&(xe=Me.window===Me?Me:(xe=Me.ownerDocument)?xe.defaultView||xe.parentWindow:window,ve?(ht=n.relatedTarget||n.toElement,ve=ue,ht=ht?dn(ht):null,ht!==null&&(Ea=b(ht),Lt=ht.tag,ht!==Ea||Lt!==5&&Lt!==27&&Lt!==6)&&(ht=null)):(ve=null,ht=ue),ve!==ht)){if(Lt=fl,Se="onMouseLeave",J="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(Lt=kt,Se="onPointerLeave",J="onPointerEnter",V="pointer"),Ea=ve==null?xe:qn(ve),ce=ht==null?xe:qn(ht),xe=new Lt(Se,V+"leave",ve,n,Me),xe.target=Ea,xe.relatedTarget=ce,Se=null,dn(Me)===ue&&(Lt=new Lt(J,V+"enter",ht,n,Me),Lt.target=ce,Lt.relatedTarget=Ea,Se=Lt),Ea=Se,ve&&ht)t:{for(Lt=Jh,J=ve,V=ht,ce=0,Se=J;Se;Se=Lt(Se))ce++;Se=0;for(var Et=V;Et;Et=Lt(Et))Se++;for(;0<ce-Se;)J=Lt(J),ce--;for(;0<Se-ce;)V=Lt(V),Se--;for(;ce--;){if(J===V||V!==null&&J===V.alternate){Lt=J;break t}J=Lt(J),V=Lt(V)}Lt=null}else Lt=null;ve!==null&&mm(Re,xe,ve,Lt,!1),ht!==null&&Ea!==null&&mm(Re,Ea,ht,Lt,!0)}}e:{if(xe=ue?qn(ue):window,ve=xe.nodeName&&xe.nodeName.toLowerCase(),ve==="select"||ve==="input"&&xe.type==="file")var ma=Ai;else if(es(xe))if(Qs)ma=Ut;else{ma=cr;var gt=ko}else ve=xe.nodeName,!ve||ve.toLowerCase()!=="input"||xe.type!=="checkbox"&&xe.type!=="radio"?ue&&it(ue.elementType)&&(ma=Ai):ma=Ee;if(ma&&(ma=ma(e,ue))){Ma(Re,ma,n,Me);break e}gt&&gt(e,xe,ue),e==="focusout"&&ue&&xe.type==="number"&&ue.memoizedProps.value!=null&&os(xe,"number",xe.value)}switch(gt=ue?qn(ue):window,e){case"focusin":(es(gt)||gt.contentEditable==="true")&&(Pa=gt,Ha=ue,hn=null);break;case"focusout":hn=Ha=Pa=null;break;case"mousedown":In=!0;break;case"contextmenu":case"mouseup":case"dragend":In=!1,Rn(Re,n,Me);break;case"selectionchange":if(Wa)break;case"keydown":case"keyup":Rn(Re,n,Me)}var Qt;if(pn)e:{switch(e){case"compositionstart":var sa="onCompositionStart";break e;case"compositionend":sa="onCompositionEnd";break e;case"compositionupdate":sa="onCompositionUpdate";break e}sa=void 0}else La?Yt(e,n)&&(sa="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(sa="onCompositionStart");sa&&(qt&&n.locale!=="ko"&&(La||sa!=="onCompositionStart"?sa==="onCompositionEnd"&&La&&(Qt=jo()):(Gs=Me,Ar="value"in Gs?Gs.value:Gs.textContent,La=!0)),gt=sc(ue,sa),0<gt.length&&(sa=new gl(sa,e,null,n,Me),Re.push({event:sa,listeners:gt}),Qt?sa.data=Qt:(Qt=aa(n),Qt!==null&&(sa.data=Qt)))),(Qt=ya?Ua(e,n):mn(e,n))&&(sa=sc(ue,"onBeforeInput"),0<sa.length&&(gt=new gl("onBeforeInput","beforeinput",null,n,Me),Re.push({event:gt,listeners:sa}),gt.data=Qt)),Yh(Re,e,ue,n,Me)}um(Re,a)})}function Qo(e,a,n){return{instance:e,listener:a,currentTarget:n}}function sc(e,a){for(var n=a+"Capture",i=[];e!==null;){var r=e,l=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||l===null||(r=Fa(e,n),r!=null&&i.unshift(Qo(e,r,l)),r=Fa(e,a),r!=null&&i.push(Qo(e,r,l))),e.tag===3)return i;e=e.return}return[]}function Jh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function mm(e,a,n,i,r){for(var l=a._reactName,p=[];n!==null&&n!==i;){var N=n,O=N.alternate,ue=N.stateNode;if(N=N.tag,O!==null&&O===i)break;N!==5&&N!==26&&N!==27||ue===null||(O=ue,r?(ue=Fa(n,l),ue!=null&&p.unshift(Qo(n,ue,O))):r||(ue=Fa(n,l),ue!=null&&p.push(Qo(n,ue,O)))),n=n.return}p.length!==0&&e.push({event:a,listeners:p})}var Kh=/\r\n?/g,ex=/\u0000|\uFFFD/g;function fm(e){return(typeof e=="string"?e:""+e).replace(Kh,`
`).replace(ex,"")}function hm(e,a){return a=fm(a),fm(e)===a}function Ca(e,a,n,i,r,l){switch(n){case"children":typeof i=="string"?a==="body"||a==="textarea"&&i===""||Bt(e,i):(typeof i=="number"||typeof i=="bigint")&&a!=="body"&&Bt(e,""+i);break;case"className":ss(e,"class",i);break;case"tabIndex":ss(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ss(e,n,i);break;case"style":Tt(e,i,l);break;case"data":if(a!=="object"){ss(e,"data",i);break}case"src":case"href":if(i===""&&(a!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=zt(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof l=="function"&&(n==="formAction"?(a!=="input"&&Ca(e,a,"name",r.name,r,null),Ca(e,a,"formEncType",r.formEncType,r,null),Ca(e,a,"formMethod",r.formMethod,r,null),Ca(e,a,"formTarget",r.formTarget,r,null)):(Ca(e,a,"encType",r.encType,r,null),Ca(e,a,"method",r.method,r,null),Ca(e,a,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=zt(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Aa);break;case"onScroll":i!=null&&ta("scroll",e);break;case"onScrollEnd":i!=null&&ta("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(c(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(c(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=zt(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":ta("beforetoggle",e),ta("toggle",e),Gn(e,"popover",i);break;case"xlinkActuate":$a(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":$a(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":$a(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":$a(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":$a(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":$a(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":$a(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":$a(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":$a(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Gn(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=wt.get(n)||n,Gn(e,n,i))}}function ad(e,a,n,i,r,l){switch(n){case"style":Tt(e,i,l);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(c(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(c(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Bt(e,i):(typeof i=="number"||typeof i=="bigint")&&Bt(e,""+i);break;case"onScroll":i!=null&&ta("scroll",e);break;case"onScrollEnd":i!=null&&ta("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Aa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sa.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),a=n.slice(2,r?n.length-7:void 0),l=e[Dt]||null,l=l!=null?l[n]:null,typeof l=="function"&&e.removeEventListener(a,l,r),typeof i=="function")){typeof l!="function"&&l!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(a,i,r);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Gn(e,n,i)}}}function Hn(e,a,n){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ta("error",e),ta("load",e);var i=!1,r=!1,l;for(l in n)if(n.hasOwnProperty(l)){var p=n[l];if(p!=null)switch(l){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,a));default:Ca(e,a,l,p,n,null)}}r&&Ca(e,a,"srcSet",n.srcSet,n,null),i&&Ca(e,a,"src",n.src,n,null);return;case"input":ta("invalid",e);var N=l=p=r=null,O=null,ue=null;for(i in n)if(n.hasOwnProperty(i)){var Me=n[i];if(Me!=null)switch(i){case"name":r=Me;break;case"type":p=Me;break;case"checked":O=Me;break;case"defaultChecked":ue=Me;break;case"value":l=Me;break;case"defaultValue":N=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(c(137,a));break;default:Ca(e,a,i,Me,n,null)}}Xs(e,l,N,O,ue,p,r,!1);return;case"select":ta("invalid",e),i=p=l=null;for(r in n)if(n.hasOwnProperty(r)&&(N=n[r],N!=null))switch(r){case"value":l=N;break;case"defaultValue":p=N;break;case"multiple":i=N;default:Ca(e,a,r,N,n,null)}a=l,n=p,e.multiple=!!i,a!=null?De(e,!!i,a,!1):n!=null&&De(e,!!i,n,!0);return;case"textarea":ta("invalid",e),l=r=i=null;for(p in n)if(n.hasOwnProperty(p)&&(N=n[p],N!=null))switch(p){case"value":i=N;break;case"defaultValue":r=N;break;case"children":l=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(c(91));break;default:Ca(e,a,p,N,n,null)}ot(e,i,r,l);return;case"option":for(O in n)if(n.hasOwnProperty(O)&&(i=n[O],i!=null))switch(O){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ca(e,a,O,i,n,null)}return;case"dialog":ta("beforetoggle",e),ta("toggle",e),ta("cancel",e),ta("close",e);break;case"iframe":case"object":ta("load",e);break;case"video":case"audio":for(i=0;i<Zo.length;i++)ta(Zo[i],e);break;case"image":ta("error",e),ta("load",e);break;case"details":ta("toggle",e);break;case"embed":case"source":case"link":ta("error",e),ta("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in n)if(n.hasOwnProperty(ue)&&(i=n[ue],i!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,a));default:Ca(e,a,ue,i,n,null)}return;default:if(it(a)){for(Me in n)n.hasOwnProperty(Me)&&(i=n[Me],i!==void 0&&ad(e,a,Me,i,n,void 0));return}}for(N in n)n.hasOwnProperty(N)&&(i=n[N],i!=null&&Ca(e,a,N,i,n,null))}function tx(e,a,n,i){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,l=null,p=null,N=null,O=null,ue=null,Me=null;for(ve in n){var Re=n[ve];if(n.hasOwnProperty(ve)&&Re!=null)switch(ve){case"checked":break;case"value":break;case"defaultValue":O=Re;default:i.hasOwnProperty(ve)||Ca(e,a,ve,null,i,Re)}}for(var xe in i){var ve=i[xe];if(Re=n[xe],i.hasOwnProperty(xe)&&(ve!=null||Re!=null))switch(xe){case"type":l=ve;break;case"name":r=ve;break;case"checked":ue=ve;break;case"defaultChecked":Me=ve;break;case"value":p=ve;break;case"defaultValue":N=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(c(137,a));break;default:ve!==Re&&Ca(e,a,xe,ve,i,Re)}}Ss(e,p,N,O,ue,Me,l,r);return;case"select":ve=p=N=xe=null;for(l in n)if(O=n[l],n.hasOwnProperty(l)&&O!=null)switch(l){case"value":break;case"multiple":ve=O;default:i.hasOwnProperty(l)||Ca(e,a,l,null,i,O)}for(r in i)if(l=i[r],O=n[r],i.hasOwnProperty(r)&&(l!=null||O!=null))switch(r){case"value":xe=l;break;case"defaultValue":N=l;break;case"multiple":p=l;default:l!==O&&Ca(e,a,r,l,i,O)}a=N,n=p,i=ve,xe!=null?De(e,!!n,xe,!1):!!i!=!!n&&(a!=null?De(e,!!n,a,!0):De(e,!!n,n?[]:"",!1));return;case"textarea":ve=xe=null;for(N in n)if(r=n[N],n.hasOwnProperty(N)&&r!=null&&!i.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Ca(e,a,N,null,i,r)}for(p in i)if(r=i[p],l=n[p],i.hasOwnProperty(p)&&(r!=null||l!=null))switch(p){case"value":xe=r;break;case"defaultValue":ve=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(c(91));break;default:r!==l&&Ca(e,a,p,r,i,l)}Ge(e,xe,ve);return;case"option":for(var ht in n)if(xe=n[ht],n.hasOwnProperty(ht)&&xe!=null&&!i.hasOwnProperty(ht))switch(ht){case"selected":e.selected=!1;break;default:Ca(e,a,ht,null,i,xe)}for(O in i)if(xe=i[O],ve=n[O],i.hasOwnProperty(O)&&xe!==ve&&(xe!=null||ve!=null))switch(O){case"selected":e.selected=xe&&typeof xe!="function"&&typeof xe!="symbol";break;default:Ca(e,a,O,xe,i,ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Lt in n)xe=n[Lt],n.hasOwnProperty(Lt)&&xe!=null&&!i.hasOwnProperty(Lt)&&Ca(e,a,Lt,null,i,xe);for(ue in i)if(xe=i[ue],ve=n[ue],i.hasOwnProperty(ue)&&xe!==ve&&(xe!=null||ve!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(c(137,a));break;default:Ca(e,a,ue,xe,i,ve)}return;default:if(it(a)){for(var Ea in n)xe=n[Ea],n.hasOwnProperty(Ea)&&xe!==void 0&&!i.hasOwnProperty(Ea)&&ad(e,a,Ea,void 0,i,xe);for(Me in i)xe=i[Me],ve=n[Me],!i.hasOwnProperty(Me)||xe===ve||xe===void 0&&ve===void 0||ad(e,a,Me,xe,i,ve);return}}for(var J in n)xe=n[J],n.hasOwnProperty(J)&&xe!=null&&!i.hasOwnProperty(J)&&Ca(e,a,J,null,i,xe);for(Re in i)xe=i[Re],ve=n[Re],!i.hasOwnProperty(Re)||xe===ve||xe==null&&ve==null||Ca(e,a,Re,xe,i,ve)}function xm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ax(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],l=r.transferSize,p=r.initiatorType,N=r.duration;if(l&&N&&xm(p)){for(p=0,N=r.responseEnd,i+=1;i<n.length;i++){var O=n[i],ue=O.startTime;if(ue>N)break;var Me=O.transferSize,Re=O.initiatorType;Me&&xm(Re)&&(O=O.responseEnd,p+=Me*(O<N?1:(N-ue)/(O-ue)))}if(--i,a+=8*(l+p)/(r.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var nd=null,sd=null;function ic(e){return e.nodeType===9?e:e.ownerDocument}function gm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ym(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function id(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var rd=null;function nx(){var e=window.event;return e&&e.type==="popstate"?e===rd?!1:(rd=e,!0):(rd=null,!1)}var bm=typeof setTimeout=="function"?setTimeout:void 0,sx=typeof clearTimeout=="function"?clearTimeout:void 0,vm=typeof Promise=="function"?Promise:void 0,ix=typeof queueMicrotask=="function"?queueMicrotask:typeof vm<"u"?function(e){return vm.resolve(null).then(e).catch(rx)}:bm;function rx(e){setTimeout(function(){throw e})}function Yi(e){return e==="head"}function jm(e,a){var n=a,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){e.removeChild(r),co(a);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Jo(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Jo(n);for(var l=n.firstChild;l;){var p=l.nextSibling,N=l.nodeName;l[ra]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&l.rel.toLowerCase()==="stylesheet"||n.removeChild(l),l=p}}else n==="body"&&Jo(e.ownerDocument.body);n=r}while(n);co(a)}function Nm(e,a){var n=e;e=0;do{var i=n.nextSibling;if(n.nodeType===1?a?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(a?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=i}while(n)}function od(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var n=a;switch(a=a.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":od(n),Ye(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function ox(e,a,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[ra])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(l=e.getAttribute("rel"),l==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(l!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(l=e.getAttribute("src"),(l!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var l=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===l)return e}else return e;if(e=Ls(e.nextSibling),e===null)break}return null}function lx(e,a,n){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Ls(e.nextSibling),e===null))return null;return e}function wm(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ls(e.nextSibling),e===null))return null;return e}function ld(e){return e.data==="$?"||e.data==="$~"}function cd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function cx(e,a){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||n.readyState!=="loading")a();else{var i=function(){a(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Ls(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var dd=null;function _m(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(a===0)return Ls(e.nextSibling);a--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||a++}e=e.nextSibling}return null}function Mm(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(a===0)return e;a--}else n!=="/$"&&n!=="/&"||a++}e=e.previousSibling}return null}function km(e,a,n){switch(a=ic(n),e){case"html":if(e=a.documentElement,!e)throw Error(c(452));return e;case"head":if(e=a.head,!e)throw Error(c(453));return e;case"body":if(e=a.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function Jo(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);Ye(e)}var Us=new Map,Cm=new Set;function rc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Mi=B.d;B.d={f:dx,r:ux,D:px,C:mx,L:fx,m:hx,X:gx,S:xx,M:yx};function dx(){var e=Mi.f(),a=Ql();return e||a}function ux(e){var a=Nn(e);a!==null&&a.tag===5&&a.type==="form"?Vu(a):Mi.r(e)}var ro=typeof document>"u"?null:document;function Em(e,a,n){var i=ro;if(i&&typeof a=="string"&&a){var r=Ba(a);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Cm.has(r)||(Cm.add(r),e={rel:e,crossOrigin:n,href:a},i.querySelector(r)===null&&(a=i.createElement("link"),Hn(a,"link",e),wa(a),i.head.appendChild(a)))}}function px(e){Mi.D(e),Em("dns-prefetch",e,null)}function mx(e,a){Mi.C(e,a),Em("preconnect",e,a)}function fx(e,a,n){Mi.L(e,a,n);var i=ro;if(i&&e&&a){var r='link[rel="preload"][as="'+Ba(a)+'"]';a==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Ba(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Ba(n.imageSizes)+'"]')):r+='[href="'+Ba(e)+'"]';var l=r;switch(a){case"style":l=oo(e);break;case"script":l=lo(e)}Us.has(l)||(e=k({rel:"preload",href:a==="image"&&n&&n.imageSrcSet?void 0:e,as:a},n),Us.set(l,e),i.querySelector(r)!==null||a==="style"&&i.querySelector(Ko(l))||a==="script"&&i.querySelector(el(l))||(a=i.createElement("link"),Hn(a,"link",e),wa(a),i.head.appendChild(a)))}}function hx(e,a){Mi.m(e,a);var n=ro;if(n&&e){var i=a&&typeof a.as=="string"?a.as:"script",r='link[rel="modulepreload"][as="'+Ba(i)+'"][href="'+Ba(e)+'"]',l=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=lo(e)}if(!Us.has(l)&&(e=k({rel:"modulepreload",href:e},a),Us.set(l,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(el(l)))return}i=n.createElement("link"),Hn(i,"link",e),wa(i),n.head.appendChild(i)}}}function xx(e,a,n){Mi.S(e,a,n);var i=ro;if(i&&e){var r=An(i).hoistableStyles,l=oo(e);a=a||"default";var p=r.get(l);if(!p){var N={loading:0,preload:null};if(p=i.querySelector(Ko(l)))N.loading=5;else{e=k({rel:"stylesheet",href:e,"data-precedence":a},n),(n=Us.get(l))&&ud(e,n);var O=p=i.createElement("link");wa(O),Hn(O,"link",e),O._p=new Promise(function(ue,Me){O.onload=ue,O.onerror=Me}),O.addEventListener("load",function(){N.loading|=1}),O.addEventListener("error",function(){N.loading|=2}),N.loading|=4,oc(p,a,i)}p={type:"stylesheet",instance:p,count:1,state:N},r.set(l,p)}}}function gx(e,a){Mi.X(e,a);var n=ro;if(n&&e){var i=An(n).hoistableScripts,r=lo(e),l=i.get(r);l||(l=n.querySelector(el(r)),l||(e=k({src:e,async:!0},a),(a=Us.get(r))&&pd(e,a),l=n.createElement("script"),wa(l),Hn(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},i.set(r,l))}}function yx(e,a){Mi.M(e,a);var n=ro;if(n&&e){var i=An(n).hoistableScripts,r=lo(e),l=i.get(r);l||(l=n.querySelector(el(r)),l||(e=k({src:e,async:!0,type:"module"},a),(a=Us.get(r))&&pd(e,a),l=n.createElement("script"),wa(l),Hn(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},i.set(r,l))}}function Tm(e,a,n,i){var r=(r=ye.current)?rc(r):null;if(!r)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(a=oo(n.href),n=An(r).hoistableStyles,i=n.get(a),i||(i={type:"style",instance:null,count:0,state:null},n.set(a,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=oo(n.href);var l=An(r).hoistableStyles,p=l.get(e);if(p||(r=r.ownerDocument||r,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(e,p),(l=r.querySelector(Ko(e)))&&!l._p&&(p.instance=l,p.state.loading=5),Us.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Us.set(e,n),l||bx(r,e,n,p.state))),a&&i===null)throw Error(c(528,""));return p}if(a&&i!==null)throw Error(c(529,""));return null;case"script":return a=n.async,n=n.src,typeof n=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=lo(n),n=An(r).hoistableScripts,i=n.get(a),i||(i={type:"script",instance:null,count:0,state:null},n.set(a,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function oo(e){return'href="'+Ba(e)+'"'}function Ko(e){return'link[rel="stylesheet"]['+e+"]"}function Sm(e){return k({},e,{"data-precedence":e.precedence,precedence:null})}function bx(e,a,n,i){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?i.loading=1:(a=e.createElement("link"),i.preload=a,a.addEventListener("load",function(){return i.loading|=1}),a.addEventListener("error",function(){return i.loading|=2}),Hn(a,"link",n),wa(a),e.head.appendChild(a))}function lo(e){return'[src="'+Ba(e)+'"]'}function el(e){return"script[async]"+e}function Am(e,a,n){if(a.count++,a.instance===null)switch(a.type){case"style":var i=e.querySelector('style[data-href~="'+Ba(n.href)+'"]');if(i)return a.instance=i,wa(i),i;var r=k({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),wa(i),Hn(i,"style",r),oc(i,n.precedence,e),a.instance=i;case"stylesheet":r=oo(n.href);var l=e.querySelector(Ko(r));if(l)return a.state.loading|=4,a.instance=l,wa(l),l;i=Sm(n),(r=Us.get(r))&&ud(i,r),l=(e.ownerDocument||e).createElement("link"),wa(l);var p=l;return p._p=new Promise(function(N,O){p.onload=N,p.onerror=O}),Hn(l,"link",i),a.state.loading|=4,oc(l,n.precedence,e),a.instance=l;case"script":return l=lo(n.src),(r=e.querySelector(el(l)))?(a.instance=r,wa(r),r):(i=n,(r=Us.get(l))&&(i=k({},n),pd(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),wa(r),Hn(r,"link",i),e.head.appendChild(r),a.instance=r);case"void":return null;default:throw Error(c(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(i=a.instance,a.state.loading|=4,oc(i,n.precedence,e));return a.instance}function oc(e,a,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,l=r,p=0;p<i.length;p++){var N=i[p];if(N.dataset.precedence===a)l=N;else if(l!==r)break}l?l.parentNode.insertBefore(e,l.nextSibling):(a=n.nodeType===9?n.head:n,a.insertBefore(e,a.firstChild))}function ud(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function pd(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var lc=null;function Dm(e,a,n){if(lc===null){var i=new Map,r=lc=new Map;r.set(n,i)}else r=lc,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var l=n[r];if(!(l[ra]||l[_e]||e==="link"&&l.getAttribute("rel")==="stylesheet")&&l.namespaceURI!=="http://www.w3.org/2000/svg"){var p=l.getAttribute(a)||"";p=e+p;var N=i.get(p);N?N.push(l):i.set(p,[l])}}return i}function Pm(e,a,n){e=e.ownerDocument||e,e.head.insertBefore(n,a==="title"?e.querySelector("head > title"):null)}function vx(e,a,n){if(n===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Rm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function jx(e,a,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var r=oo(i.href),l=a.querySelector(Ko(r));if(l){a=l._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=cc.bind(e),a.then(e,e)),n.state.loading|=4,n.instance=l,wa(l);return}l=a.ownerDocument||a,i=Sm(i),(r=Us.get(r))&&ud(i,r),l=l.createElement("link"),wa(l);var p=l;p._p=new Promise(function(N,O){p.onload=N,p.onerror=O}),Hn(l,"link",i),n.instance=l}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,a),(a=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=cc.bind(e),a.addEventListener("load",n),a.addEventListener("error",n))}}var md=0;function Nx(e,a){return e.stylesheets&&e.count===0&&uc(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&uc(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4+a);0<e.imgBytes&&md===0&&(md=62500*ax());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&uc(e,e.stylesheets),e.unsuspend)){var l=e.unsuspend;e.unsuspend=null,l()}},(e.imgBytes>md?50:800)+a);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function cc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var dc=null;function uc(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,dc=new Map,a.forEach(wx,e),dc=null,cc.call(e))}function wx(e,a){if(!(a.state.loading&4)){var n=dc.get(e);if(n)var i=n.get(null);else{n=new Map,dc.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<r.length;l++){var p=r[l];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(n.set(p.dataset.precedence,p),i=p)}i&&n.set(null,i)}r=a.instance,p=r.getAttribute("data-precedence"),l=n.get(p)||i,l===i&&n.set(null,r),n.set(p,r),this.count++,i=cc.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),l?l.parentNode.insertBefore(r,l.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),a.state.loading|=4}}var tl={$$typeof:q,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function _x(e,a,n,i,r,l,p,N,O){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.hiddenUpdates=Nt(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=l,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function zm(e,a,n,i,r,l,p,N,O,ue,Me,Re){return e=new _x(e,a,n,p,O,ue,Me,Re,N),a=1,l===!0&&(a|=24),l=vs(3,null,null,a),e.current=l,l.stateNode=e,a=Fc(),a.refCount++,e.pooledCache=a,a.refCount++,l.memoizedState={element:i,isDehydrated:n,cache:a},Zc(l),e}function $m(e){return e?(e=Lr,e):Lr}function Om(e,a,n,i,r,l){r=$m(r),i.context===null?i.context=r:i.pendingContext=r,i=Oi(a),i.payload={element:n},l=l===void 0?null:l,l!==null&&(i.callback=l),n=Bi(e,i,a),n!==null&&(ps(n,e,a),Po(n,e,a))}function Bm(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<a?n:a}}function fd(e,a){Bm(e,a),(e=e.alternate)&&Bm(e,a)}function Lm(e){if(e.tag===13||e.tag===31){var a=ur(e,67108864);a!==null&&ps(a,e,67108864),fd(e,67108864)}}function Um(e){if(e.tag===13||e.tag===31){var a=Ms();a=ct(a);var n=ur(e,a);n!==null&&ps(n,e,a),fd(e,a)}}var pc=!0;function Mx(e,a,n,i){var r=_.T;_.T=null;var l=B.p;try{B.p=2,hd(e,a,n,i)}finally{B.p=l,_.T=r}}function kx(e,a,n,i){var r=_.T;_.T=null;var l=B.p;try{B.p=8,hd(e,a,n,i)}finally{B.p=l,_.T=r}}function hd(e,a,n,i){if(pc){var r=xd(i);if(r===null)td(e,a,i,mc,n),Hm(e,i);else if(Ex(r,e,a,n,i))i.stopPropagation();else if(Hm(e,i),a&4&&-1<Cx.indexOf(e)){for(;r!==null;){var l=Nn(r);if(l!==null)switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var p=Le(l.pendingLanes);if(p!==0){var N=l;for(N.pendingLanes|=2,N.entangledLanes|=2;p;){var O=1<<31-te(p);N.entanglements[1]|=O,p&=~O}ni(l),(xa&6)===0&&(Xl=$e()+500,Xo(0))}}break;case 31:case 13:N=ur(l,2),N!==null&&ps(N,l,2),Ql(),fd(l,2)}if(l=xd(i),l===null&&td(e,a,i,mc,n),l===r)break;r=l}r!==null&&i.stopPropagation()}else td(e,a,i,null,n)}}function xd(e){return e=Zs(e),gd(e)}var mc=null;function gd(e){if(mc=null,e=dn(e),e!==null){var a=b(e);if(a===null)e=null;else{var n=a.tag;if(n===13){if(e=g(a),e!==null)return e;e=null}else if(n===31){if(e=v(a),e!==null)return e;e=null}else if(n===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return mc=e,null}function Wm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yt()){case _t:return 2;case It:return 8;case oa:case za:return 32;case Ta:return 268435456;default:return 32}default:return 32}}var yd=!1,Xi=null,Zi=null,Qi=null,al=new Map,nl=new Map,Ji=[],Cx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hm(e,a){switch(e){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":al.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":nl.delete(a.pointerId)}}function sl(e,a,n,i,r,l){return e===null||e.nativeEvent!==l?(e={blockedOn:a,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[r]},a!==null&&(a=Nn(a),a!==null&&Lm(a)),e):(e.eventSystemFlags|=i,a=e.targetContainers,r!==null&&a.indexOf(r)===-1&&a.push(r),e)}function Ex(e,a,n,i,r){switch(a){case"focusin":return Xi=sl(Xi,e,a,n,i,r),!0;case"dragenter":return Zi=sl(Zi,e,a,n,i,r),!0;case"mouseover":return Qi=sl(Qi,e,a,n,i,r),!0;case"pointerover":var l=r.pointerId;return al.set(l,sl(al.get(l)||null,e,a,n,i,r)),!0;case"gotpointercapture":return l=r.pointerId,nl.set(l,sl(nl.get(l)||null,e,a,n,i,r)),!0}return!1}function qm(e){var a=dn(e.target);if(a!==null){var n=b(a);if(n!==null){if(a=n.tag,a===13){if(a=g(n),a!==null){e.blockedOn=a,nt(e.priority,function(){Um(n)});return}}else if(a===31){if(a=v(n),a!==null){e.blockedOn=a,nt(e.priority,function(){Um(n)});return}}else if(a===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fc(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var n=xd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);an=i,n.target.dispatchEvent(i),an=null}else return a=Nn(n),a!==null&&Lm(a),e.blockedOn=n,!1;a.shift()}return!0}function Vm(e,a,n){fc(e)&&n.delete(a)}function Tx(){yd=!1,Xi!==null&&fc(Xi)&&(Xi=null),Zi!==null&&fc(Zi)&&(Zi=null),Qi!==null&&fc(Qi)&&(Qi=null),al.forEach(Vm),nl.forEach(Vm)}function hc(e,a){e.blockedOn===a&&(e.blockedOn=null,yd||(yd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Tx)))}var xc=null;function Gm(e){xc!==e&&(xc=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){xc===e&&(xc=null);for(var a=0;a<e.length;a+=3){var n=e[a],i=e[a+1],r=e[a+2];if(typeof i!="function"){if(gd(i||n)===null)continue;break}var l=Nn(n);l!==null&&(e.splice(a,3),a-=3,x0(l,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function co(e){function a(O){return hc(O,e)}Xi!==null&&hc(Xi,e),Zi!==null&&hc(Zi,e),Qi!==null&&hc(Qi,e),al.forEach(a),nl.forEach(a);for(var n=0;n<Ji.length;n++){var i=Ji[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Ji.length&&(n=Ji[0],n.blockedOn===null);)qm(n),n.blockedOn===null&&Ji.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],l=n[i+1],p=r[Dt]||null;if(typeof l=="function")p||Gm(n);else if(p){var N=null;if(l&&l.hasAttribute("formAction")){if(r=l,p=l[Dt]||null)N=p.formAction;else if(gd(r)!==null)continue}else N=p.action;typeof N=="function"?n[i+1]=N:(n.splice(i,3),i-=3),Gm(n)}}}function Fm(){function e(l){l.canIntercept&&l.info==="react-transition"&&l.intercept({handler:function(){return new Promise(function(p){return r=p})},focusReset:"manual",scroll:"manual"})}function a(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var l=navigation.currentEntry;l&&l.url!=null&&navigation.navigate(l.url,{state:l.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),r!==null&&(r(),r=null)}}}function bd(e){this._internalRoot=e}gc.prototype.render=bd.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(c(409));var n=a.current,i=Ms();Om(n,i,e,a,null,null)},gc.prototype.unmount=bd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;Om(e.current,2,null,e,null,null),Ql(),a[Rt]=null}};function gc(e){this._internalRoot=e}gc.prototype.unstable_scheduleHydration=function(e){if(e){var a=Ce();e={blockedOn:null,target:e,priority:a};for(var n=0;n<Ji.length&&a!==0&&a<Ji[n].priority;n++);Ji.splice(n,0,e),n===0&&qm(e)}};var Im=o.version;if(Im!=="19.2.0")throw Error(c(527,Im,"19.2.0"));B.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=y(a),e=e!==null?w(e):null,e=e===null?null:e.stateNode,e};var Sx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yc.isDisabled&&yc.supportsFiber)try{At=yc.inject(Sx),Z=yc}catch{}}return rl.createRoot=function(e,a){if(!m(e))throw Error(c(299));var n=!1,i="",r=ep,l=tp,p=ap;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(i=a.identifierPrefix),a.onUncaughtError!==void 0&&(r=a.onUncaughtError),a.onCaughtError!==void 0&&(l=a.onCaughtError),a.onRecoverableError!==void 0&&(p=a.onRecoverableError)),a=zm(e,1,!1,null,null,n,i,null,r,l,p,Fm),e[Rt]=a.current,ed(e),new bd(a)},rl.hydrateRoot=function(e,a,n){if(!m(e))throw Error(c(299));var i=!1,r="",l=ep,p=tp,N=ap,O=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(l=n.onUncaughtError),n.onCaughtError!==void 0&&(p=n.onCaughtError),n.onRecoverableError!==void 0&&(N=n.onRecoverableError),n.formState!==void 0&&(O=n.formState)),a=zm(e,1,!0,a,n??null,i,r,O,l,p,N,Fm),a.context=$m(null),n=a.current,i=Ms(),i=ct(i),r=Oi(i),r.callback=null,Bi(n,r,i),n=i,a.current.lanes=n,Mt(a,n),ni(a),e[Rt]=a.current,ed(e),new gc(a)},rl.version="19.2.0",rl}var nf;function Ux(){if(nf)return jd.exports;nf=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(o){console.error(o)}}return s(),jd.exports=Lx(),jd.exports}var Wx=Ux(),L=Ld();const Xn=Dx(L),Hx=[1,2,5],_r={price:{livingCostWeight:.15,taxCostWeight:.1},wage:{livingCostWeight:.1,taxCostWeight:.1},market:{virtualDemandPerPop:.01,supplyDemandWeight:1,inventoryTargetDays:200,inventoryPriceImpact:.25,demandElasticity:.5,outputVariation:.2}},Oe={food:{name:"",icon:"Wheat",color:"text-yellow-400",basePrice:1.6,minPrice:.16,maxPrice:16,defaultOwner:"peasant",unlockEpoch:0,tags:["essential","raw_material"],marketConfig:{supplyDemandWeight:.6,inventoryTargetDays:300,inventoryPriceImpact:.15,demandElasticity:.2,outputVariation:.2}},wood:{name:"",icon:"Trees",color:"text-emerald-400",basePrice:3.2,minPrice:.32,maxPrice:32,defaultOwner:"lumberjack",unlockEpoch:0,tags:["raw_material"],marketConfig:{supplyDemandWeight:.7,inventoryTargetDays:250,inventoryPriceImpact:.2,demandElasticity:.3,outputVariation:.2}},stone:{name:"",icon:"Pickaxe",color:"text-stone-400",basePrice:4.5,minPrice:.45,maxPrice:45,defaultOwner:"miner",unlockEpoch:0,tags:["raw_material"],marketConfig:{supplyDemandWeight:.7,inventoryTargetDays:250,inventoryPriceImpact:.2,demandElasticity:.3,outputVariation:.2}},cloth:{name:"",icon:"Shirt",color:"text-indigo-300",basePrice:2.5,minPrice:.25,maxPrice:25,defaultOwner:"artisan",unlockEpoch:0,tags:["essential","raw_material","manufactured"],marketConfig:{supplyDemandWeight:.8,inventoryTargetDays:200,inventoryPriceImpact:.25,demandElasticity:.4,outputVariation:.2}},brick:{name:"",icon:"Home",color:"text-red-400",basePrice:9.5,minPrice:.95,maxPrice:95,defaultOwner:"artisan",unlockEpoch:0,unlockTech:"pottery",tags:["industrial"],marketConfig:{supplyDemandWeight:1,inventoryTargetDays:150,inventoryPriceImpact:.3,demandElasticity:.5,outputVariation:.2}},tools:{name:"",icon:"Anvil",color:"text-blue-300",basePrice:12.5,minPrice:1.25,maxPrice:125,defaultOwner:"artisan",unlockEpoch:0,unlockTech:"tool_making",tags:["industrial"],marketConfig:{supplyDemandWeight:1.2,inventoryTargetDays:300,inventoryPriceImpact:.35,demandElasticity:.6,outputVariation:.2}},plank:{name:"",icon:"TreeDeciduous",color:"text-amber-600",basePrice:7.5,minPrice:.75,maxPrice:75,defaultOwner:"worker",unlockEpoch:1,unlockTech:"tools",tags:["industrial"],marketConfig:{supplyDemandWeight:1,inventoryTargetDays:150,inventoryPriceImpact:.3,demandElasticity:.5,outputVariation:.2}},copper:{name:"",icon:"Pickaxe",color:"text-orange-400",basePrice:8.5,minPrice:.85,maxPrice:85,defaultOwner:"miner",unlockEpoch:1,unlockTech:"copper_mining",tags:["raw_material"],marketConfig:{supplyDemandWeight:.9,inventoryTargetDays:200,inventoryPriceImpact:.25,demandElasticity:.4,outputVariation:.2}},dye:{name:"",icon:"Droplets",color:"text-pink-500",basePrice:7.5,minPrice:.75,maxPrice:75,defaultOwner:"artisan",unlockEpoch:1,tags:["industrial","raw_material"],marketConfig:{supplyDemandWeight:1.1,inventoryTargetDays:120,inventoryPriceImpact:.35,demandElasticity:.6,outputVariation:.2}},papyrus:{name:"",icon:"ScrollText",color:"text-lime-300",basePrice:10,minPrice:1,maxPrice:100,defaultOwner:"scribe",unlockEpoch:2,unlockTech:"papyrus_cultivation",tags:["raw_material","manufactured"],marketConfig:{supplyDemandWeight:1.1,inventoryTargetDays:150,inventoryPriceImpact:.3,demandElasticity:.5,outputVariation:.2}},delicacies:{name:"",icon:"UtensilsCrossed",color:"text-rose-400",basePrice:18,minPrice:1.8,maxPrice:180,defaultOwner:"artisan",unlockEpoch:2,unlockTech:"culinary_arts",tags:["luxury","manufactured"],marketConfig:{supplyDemandWeight:1.5,inventoryTargetDays:80,inventoryPriceImpact:.45,demandElasticity:1.3,outputVariation:.2}},furniture:{name:"",icon:"Armchair",color:"text-amber-500",basePrice:20,minPrice:2,maxPrice:200,defaultOwner:"artisan",unlockEpoch:2,unlockTech:"carpentry",tags:["luxury","manufactured"],marketConfig:{supplyDemandWeight:1.5,inventoryTargetDays:100,inventoryPriceImpact:.4,demandElasticity:1.2,outputVariation:.2}},ale:{name:"",icon:"Wine",color:"text-purple-400",basePrice:13,minPrice:1.3,maxPrice:130,defaultOwner:"artisan",unlockEpoch:2,unlockTech:"brewing",tags:["luxury","manufactured"],marketConfig:{supplyDemandWeight:1.6,inventoryTargetDays:8,inventoryPriceImpact:.5,demandElasticity:1.5,outputVariation:.2}},fine_clothes:{name:"",icon:"Shirt",color:"text-purple-400",basePrice:24,minPrice:2.4,maxPrice:240,defaultOwner:"artisan",unlockEpoch:2,tags:["luxury","manufactured"],marketConfig:{supplyDemandWeight:1.6,inventoryTargetDays:100,inventoryPriceImpact:.5,demandElasticity:1.5,outputVariation:.2}},iron:{name:"",icon:"Pickaxe",color:"text-zinc-400",basePrice:11.5,minPrice:1.15,maxPrice:115,defaultOwner:"miner",unlockEpoch:2,unlockTech:"ironworking",tags:["raw_material"],marketConfig:{supplyDemandWeight:.8,inventoryTargetDays:250,inventoryPriceImpact:.2,demandElasticity:.3,outputVariation:.2}},spice:{name:"",icon:"Leaf",color:"text-amber-400",basePrice:20,minPrice:2,maxPrice:200,defaultOwner:"merchant",unlockEpoch:4,unlockTech:"cartography",tags:["essential","manufactured"],marketConfig:{supplyDemandWeight:1.4,inventoryTargetDays:120,inventoryPriceImpact:.4,demandElasticity:.9,outputVariation:.2}},coffee:{name:"",icon:"Coffee",color:"text-amber-700",basePrice:18,minPrice:1.8,maxPrice:180,defaultOwner:"merchant",unlockEpoch:5,unlockTech:"coffee_agronomy",tags:["essential","manufactured"],marketConfig:{supplyDemandWeight:1.2,inventoryTargetDays:150,inventoryPriceImpact:.35,demandElasticity:.8,outputVariation:.2}},coal:{name:"",icon:"Flame",color:"text-slate-300",basePrice:11,minPrice:1.1,maxPrice:110,defaultOwner:"miner",unlockEpoch:6,unlockTech:"coal_gasification",tags:["raw_material"],marketConfig:{supplyDemandWeight:.9,inventoryTargetDays:200,inventoryPriceImpact:.25,demandElasticity:.4,outputVariation:.2}},steel:{name:"",icon:"Cog",color:"text-gray-300",basePrice:30,minPrice:3,maxPrice:300,defaultOwner:"engineer",unlockEpoch:6,unlockTech:"steel_alloys",tags:["industrial"],marketConfig:{supplyDemandWeight:1,inventoryTargetDays:180,inventoryPriceImpact:.3,demandElasticity:.5,outputVariation:.2}},silver:{name:"",icon:"Coins",color:"text-slate-200",type:"currency",basePrice:1,minPrice:1,maxPrice:1,unlockEpoch:0,tags:["currency"]},science:{name:"",icon:"Cpu",color:"text-cyan-400",basePrice:5,minPrice:.5,maxPrice:50,defaultOwner:"official",unlockEpoch:0,tags:["special","manufactured"],marketConfig:{supplyDemandWeight:.5,inventoryTargetDays:400,inventoryPriceImpact:.15,demandElasticity:.2,outputVariation:.1}},culture:{name:"",icon:"ScrollText",color:"text-pink-400",basePrice:2,minPrice:.25,maxPrice:10,defaultOwner:"cleric",unlockEpoch:1,unlockTech:"amphitheater_design",tags:["special","manufactured"],marketConfig:{supplyDemandWeight:.6,inventoryTargetDays:350,inventoryPriceImpact:.2,demandElasticity:.3,outputVariation:.15}},maxPop:{name:"",icon:"Users",color:"text-blue-400",type:"virtual",tags:["special"]},militaryCapacity:{name:"",icon:"Shield",color:"text-red-400",type:"virtual",tags:["special"]}},Qa=[{id:0,name:"",color:"text-stone-400",bg:"bg-stone-900",tileColor:"bg-stone-700",req:{science:0},cost:{},bonuses:{desc:""}},{id:1,name:"",color:"text-orange-400",bg:"bg-orange-950",tileColor:"bg-orange-800",req:{science:600,population:25},cost:{food:6e3,wood:3500,stone:1200,silver:600,science:2e3},bonuses:{desc:"",gatherBonus:.15,militaryBonus:.1}},{id:2,name:"",color:"text-amber-300",bg:"bg-amber-900",tileColor:"bg-amber-700",req:{science:1800,population:90,culture:250},cost:{food:2e4,wood:1e4,brick:3600,silver:5e3,tools:1200,science:6e3},bonuses:{desc:"",gatherBonus:.2,cultureBonus:.15,scienceBonus:.1}},{id:3,name:"",color:"text-blue-400",bg:"bg-blue-950",tileColor:"bg-blue-800",req:{science:4500,population:170,culture:600},cost:{food:1e5,wood:5e4,brick:25e3,iron:12500,papyrus:5e3,silver:15e3,science:2e4},bonuses:{desc:"",gatherBonus:.25,cultureBonus:.2}},{id:4,name:"",color:"text-cyan-300",bg:"bg-cyan-900",tileColor:"bg-cyan-700",req:{science:8e3,population:320,culture:1400},cost:{food:26e4,plank:7e4,brick:6e4,iron:35e3,silver:4e4,science:5e4},bonuses:{desc:"",gatherBonus:.3,scienceBonus:.2,militaryBonus:.1}},{id:5,name:"",color:"text-purple-400",bg:"bg-purple-950",tileColor:"bg-purple-800",req:{science:12e3,population:450,culture:2500},cost:{food:35e4,plank:8e4,papyrus:3e4,spice:2e4,silver:5e4,science:7e4},bonuses:{desc:"",cultureBonus:.3,scienceBonus:.3}},{id:6,name:"",color:"text-gray-200",bg:"bg-gray-800",tileColor:"bg-gray-600",req:{science:2e4,population:650,culture:4e3},cost:{food:75e4,brick:18e4,iron:12e4,tools:75e3,spice:3e4,silver:12e4,science:15e4},bonuses:{desc:"",gatherBonus:.4,industryBonus:.5,scienceBonus:.3}},{id:7,name:"",color:"text-green-400",bg:"bg-green-950",tileColor:"bg-green-800",req:{science:35e3,population:1e3,culture:8e3},cost:{food:2e6,tools:3e5,silver:25e4,spice:8e4,papyrus:1e5,electronics:15e4,science:4e5},bonuses:{desc:"",scienceBonus:.6,cultureBonus:.5,knowledgeBonus:.4}}],Fe={peasant:{name:"",icon:"Wheat",weight:1,tax:1,headTaxBase:.01,desc:"",wealthWeight:1,influenceBase:.5,startingWealth:80,defaultResource:"food",needs:{food:.55,cloth:.05,ale:.02},luxuryNeeds:{1.5:{tools:.02},2:{plank:.03,wood:.02},2.5:{furniture:.02,stone:.01},3:{spice:.04,brick:.02},3.5:{culture:.01},4.5:{copper:.004},5.5:{delicacies:.02,fine_clothes:.01},7:{coffee:.02},8:{}},buffs:{satisfied:{desc:"",taxIncome:.1,production:.05},dissatisfied:{desc:"",taxIncome:-.2,production:-.1}}},lumberjack:{name:"",icon:"Trees",weight:.8,tax:1.2,headTaxBase:.02,desc:"",wealthWeight:1,influenceBase:.4,startingWealth:90,defaultResource:"wood",needs:{food:.75,cloth:.07,ale:.02},luxuryNeeds:{1.5:{tools:.03},2:{plank:.04,wood:.03},2.5:{furniture:.025},3:{spice:.03,brick:.025},3.5:{stone:.015,culture:.01},4.5:{copper:.006},5.5:{delicacies:.025,fine_clothes:.015},7:{coffee:.03},8:{}},buffs:{satisfied:{desc:"",production:.06},dissatisfied:{desc:"",production:-.1}}},serf:{name:"",icon:"Users",weight:.5,tax:2,headTaxBase:.015,desc:"",wealthWeight:.5,influenceBase:.3,startingWealth:50,defaultResource:"food",needs:{food:.6,cloth:.05,ale:.02},luxuryNeeds:{2:{},2.5:{food:.06},3:{furniture:.01,plank:.02,tools:.006},4:{spice:.02,stone:.006,culture:.006},5:{},6:{delicacies:.01,brick:.015},7.5:{fine_clothes:.008,copper:.004},9:{coffee:.01},10:{}},buffs:{satisfied:{desc:"",production:.08},dissatisfied:{desc:"",production:-.15}}},worker:{name:"",icon:"Hammer",weight:2,tax:3,headTaxBase:.03,desc:"",wealthWeight:2,influenceBase:1,startingWealth:150,defaultResource:"plank",needs:{food:.7,cloth:.08,tools:.03,ale:.05},luxuryNeeds:{1.8:{plank:.02},2.5:{furniture:.03,spice:.02},3:{coffee:.025,brick:.03,culture:.015},4:{fine_clothes:.03,delicacies:.04,stone:.015},5:{steel:.01,copper:.008},6.5:{},8:{papyrus:.02},10:{},12:{}},buffs:{satisfied:{desc:"",industryBonus:.15},dissatisfied:{desc:"",industryBonus:-.25}}},artisan:{name:"",icon:"Anvil",weight:1.5,tax:3.5,headTaxBase:.035,desc:"",wealthWeight:2.5,influenceBase:1.2,startingWealth:200,defaultResource:"tools",needs:{food:.65,cloth:.1,tools:.04,ale:.05,furniture:.02},luxuryNeeds:{1.8:{copper:.015,spice:.04},2.5:{coffee:.03,fine_clothes:.025,brick:.03,culture:.02},3.5:{delicacies:.06,stone:.025},4.5:{steel:.008},6:{},8:{papyrus:.03},10:{},12:{}},buffs:{satisfied:{desc:"",production:.1},dissatisfied:{desc:"",production:-.15}}},miner:{name:"",icon:"Pickaxe",weight:1.2,tax:2.5,headTaxBase:.025,desc:"",wealthWeight:1.5,influenceBase:.8,startingWealth:120,defaultResource:"stone",needs:{food:.85,cloth:.08,ale:.02},luxuryNeeds:{1.8:{tools:.03},2.5:{furniture:.02,spice:.015,food:.15},3:{plank:.03,brick:.02,coffee:.015,culture:.01},4:{delicacies:.03},5.5:{copper:.01},7:{fine_clothes:.02},9:{},11:{}},buffs:{satisfied:{desc:"",gatherBonus:.1},dissatisfied:{desc:"",stability:-.1}}},merchant:{name:"",icon:"Coins",weight:6,tax:5,headTaxBase:.09,desc:"",wealthWeight:8,influenceBase:3.5,startingWealth:500,defaultResource:"spice",needs:{food:.8,delicacies:.45,cloth:.12,spice:.15,furniture:.08,plank:.05,ale:.1,fine_clothes:.05,culture:.08},luxuryNeeds:{1.5:{coffee:.14},2:{delicacies:.35,plank:.12,brick:.05},3:{steel:.05,culture:.15},5:{papyrus:.08,copper:.06,stone:.05},8:{},12:{},18:{}},buffs:{satisfied:{desc:"",taxIncome:.15,gatherBonus:.05},dissatisfied:{desc:"",taxIncome:-.2,stability:-.1}},tradeConfig:{minProfitMargin:.1,maxPurchaseAmount:10,exportProbability:.5,maxInventoryRatio:.1,minWealthForTrade:10,tradeDuration:3,tradeCooldown:0,enableDebugLog:!0}},navigator:{name:"",icon:"Compass",weight:4,tax:3,headTaxBase:.06,desc:"",wealthWeight:3,influenceBase:2.5,startingWealth:300,defaultResource:"spice",needs:{food:.7,cloth:.1,spice:.1,ale:.1},luxuryNeeds:{1.8:{tools:.05},2.5:{coffee:.07,furniture:.07,culture:.06},3.5:{fine_clothes:.08,delicacies:.12,plank:.07},5:{copper:.05,steel:.03},7:{papyrus:.05},10:{brick:.08},14:{}},buffs:{satisfied:{desc:"",gatherBonus:.1},dissatisfied:{desc:"",gatherBonus:-.1,stability:-.1}}},scribe:{name:"",icon:"Feather",weight:2.5,tax:2,headTaxBase:.04,desc:"",wealthWeight:2.5,influenceBase:1.5,startingWealth:250,defaultResource:"papyrus",needs:{food:.6,cloth:.1,papyrus:.06,furniture:.02},luxuryNeeds:{1.5:{coffee:.07,culture:.06},2:{fine_clothes:.05,plank:.025},3:{delicacies:.09,spice:.05},5:{copper:.035,brick:.025},7:{},10:{stone:.04},14:{cloth:.07},18:{steel:.015}},buffs:{satisfied:{desc:"",scienceBonus:.15},dissatisfied:{desc:"",scienceBonus:-.2}}},soldier:{name:"",icon:"Swords",weight:3,tax:1,headTaxBase:.04,desc:"",wealthWeight:2,influenceBase:2,startingWealth:180,defaultResource:"tools",needs:{food:.95,cloth:.08,ale:.05},luxuryNeeds:{2:{tools:.07,copper:.025},2.5:{furniture:.05,spice:.05,culture:.04},3.5:{fine_clothes:.07,delicacies:.07,steel:.025},5:{food:.5,brick:.05},7:{coffee:.09,stone:.05},10:{},14:{}},buffs:{satisfied:{desc:"",militaryPower:.2},dissatisfied:{desc:"",militaryPower:-.3,stability:-.2}}},cleric:{name:"",icon:"Cross",weight:4,tax:.5,headTaxBase:.05,desc:"",wealthWeight:3,influenceBase:3,startingWealth:220,defaultResource:"culture",needs:{food:.6,cloth:.09,papyrus:.035,ale:.035,culture:.06},luxuryNeeds:{1.5:{plank:.02},2:{fine_clothes:.06,furniture:.06,stone:.04},3:{delicacies:.08,spice:.04},4.5:{copper:.04,brick:.04},6:{coffee:.05,steel:.01},8:{papyrus:.09},10:{}},buffs:{satisfied:{desc:"",cultureBonus:.2,stability:.1},dissatisfied:{desc:"",cultureBonus:-.15,stability:-.1}}},official:{name:"",icon:"ScrollText",weight:5,tax:2,headTaxBase:.08,desc:"",wealthWeight:5,influenceBase:4,startingWealth:400,defaultResource:"science",needs:{food:.5,delicacies:.385,cloth:.12,papyrus:.08,coffee:.04,furniture:.06,stone:.02,fine_clothes:.06,culture:.09},luxuryNeeds:{1.3:{},1.8:{delicacies:.3,spice:.12,plank:.08,brick:.06},2.5:{steel:.04,culture:.15},4:{papyrus:.08,copper:.04,stone:.04},6:{fine_clothes:.15},9:{},14:{},20:{}},buffs:{satisfied:{desc:"",taxIncome:.1},dissatisfied:{desc:"",taxIncome:-.2}}},landowner:{name:"",icon:"Castle",weight:10,tax:5,headTaxBase:.07,desc:"",wealthWeight:10,influenceBase:5,startingWealth:800,defaultResource:"food",needs:{food:.6,delicacies:.5,cloth:.15,spice:.12,furniture:.1,brick:.05,plank:.05,fine_clothes:.08,culture:.1},luxuryNeeds:{1.3:{delicacies:.4,fine_clothes:.12,culture:.12},1.8:{spice:.2,coffee:.1,stone:.08},2.5:{plank:.12,steel:.04,brick:.08},4:{copper:.06,papyrus:.04},6:{},9:{},14:{},20:{}},buffs:{satisfied:{desc:"",taxIncome:.15,stability:.15},dissatisfied:{desc:"",taxIncome:-.3,stability:-.25}}},capitalist:{name:"",icon:"Briefcase",weight:15,tax:8,headTaxBase:.08,desc:"",wealthWeight:20,influenceBase:6,startingWealth:1200,defaultResource:"steel",needs:{food:.55,delicacies:.3,cloth:.14,coffee:.072,furniture:.072,steel:.02,culture:.11},luxuryNeeds:{1.3:{fine_clothes:.12,culture:.12},1.8:{delicacies:.3,spice:.15,brick:.08},2.5:{stone:.06,plank:.1},4:{copper:.08,papyrus:.06},6:{},10:{},15:{},22:{}},buffs:{satisfied:{desc:"",industryBonus:.25,scienceBonus:.15},dissatisfied:{desc:"",industryBonus:-.3,taxIncome:-.25}}},knight:{name:"",icon:"Shield",weight:8,tax:2,headTaxBase:.09,desc:"",wealthWeight:8,influenceBase:4,startingWealth:600,defaultResource:"tools",needs:{food:.7,delicacies:.75,cloth:.15,coffee:.05,furniture:.08,ale:.1,culture:.08},luxuryNeeds:{1.3:{delicacies:.4,fine_clothes:.1,culture:.08},1.8:{spice:.12,steel:.04},2.5:{coffee:.08,brick:.06,stone:.04},4:{tools:.06,copper:.04,plank:.06},6:{},10:{},15:{},22:{}},buffs:{satisfied:{desc:"",militaryPower:.25,stability:.1},dissatisfied:{desc:"",militaryPower:-.2,stability:-.15}}},engineer:{name:"",icon:"Cog",weight:7,tax:6,headTaxBase:.1,desc:"",wealthWeight:6,influenceBase:3.5,startingWealth:700,defaultResource:"steel",needs:{food:.8,cloth:.12,coffee:.08,ale:.05,furniture:.05,culture:.07},luxuryNeeds:{1.3:{fine_clothes:.08,culture:.08},1.8:{delicacies:.15,spice:.08,tools:.06},2.5:{plank:.08,copper:.04,stone:.04},4:{papyrus:.06,brick:.06,steel:.04},6:{},10:{},15:{},22:{}},buffs:{satisfied:{desc:"",industryBonus:.2,scienceBonus:.1},dissatisfied:{desc:"",industryBonus:-.25}}},unemployed:{name:"",icon:"AlertTriangle",weight:.2,tax:1,headTaxBase:.01,desc:"",wealthWeight:.2,influenceBase:.3,startingWealth:30,needs:{food:.45,cloth:.05},luxuryNeeds:{2.5:{ale:.04,food:.1},3.5:{furniture:.01},4.5:{plank:.01,culture:.004},5.5:{tools:.004},7:{spice:.008},9:{brick:.006}},buffs:{satisfied:{desc:"",stability:.02},dissatisfied:{desc:"",stability:-.1}}}},Tn=[{id:"farm",name:"",desc:"",baseCost:{wood:12},output:{food:3.5},jobs:{peasant:2},owner:"peasant",epoch:0,cat:"gather",visual:{icon:"Wheat",color:"bg-yellow-700",text:"text-yellow-200"},marketConfig:{price:{livingCostWeight:.15,taxCostWeight:.2},wage:{livingCostWeight:.08,taxCostWeight:.05}}},{id:"trading_post",name:"",desc:"",baseCost:{wood:50,stone:10},output:{food:2},jobs:{merchant:1},owner:"merchant",epoch:0,cat:"civic",requiresTech:"barter",visual:{icon:"Handshake",color:"bg-amber-800",text:"text-amber-200"}},{id:"large_estate",name:"",desc:"",baseCost:{wood:100,plank:25},output:{food:12},jobs:{serf:6,landowner:1},owner:"landowner",epoch:3,cat:"gather",requiresTech:"feudalism",visual:{icon:"Castle",color:"bg-amber-800",text:"text-amber-200"}},{id:"lumber_camp",name:"",desc:"",baseCost:{food:18},input:{},output:{wood:2.2},jobs:{lumberjack:2},owner:"lumberjack",epoch:0,cat:"gather",visual:{icon:"Trees",color:"bg-emerald-800",text:"text-emerald-200"},marketConfig:{price:{livingCostWeight:.1,taxCostWeight:.15},wage:{livingCostWeight:.05,taxCostWeight:.05}}},{id:"quarry",name:"",desc:"",baseCost:{wood:55},input:{},output:{stone:1.7},jobs:{miner:2},owner:"miner",epoch:0,cat:"gather",visual:{icon:"Pickaxe",color:"bg-stone-600",text:"text-stone-200"},marketConfig:{price:{livingCostWeight:.1,taxCostWeight:.15},wage:{livingCostWeight:.05,taxCostWeight:.05}}},{id:"copper_mine",name:"",desc:"",baseCost:{food:120,wood:120},input:{tools:.02},output:{copper:.35},jobs:{miner:3},owner:"miner",epoch:1,cat:"gather",requiresTech:"copper_mining",visual:{icon:"Gem",color:"bg-orange-700",text:"text-orange-200"},marketConfig:{price:{livingCostWeight:.2,taxCostWeight:.25},wage:{livingCostWeight:.1,taxCostWeight:.1}}},{id:"reed_works",name:"",desc:"",baseCost:{food:140,wood:80},output:{papyrus:.4},jobs:{peasant:2},owner:"peasant",epoch:2,cat:"gather",requiresTech:"papyrus_cultivation",visual:{icon:"ScrollText",color:"bg-lime-800",text:"text-lime-200"},marketConfig:{price:{livingCostWeight:.1,taxCostWeight:.15},wage:{livingCostWeight:.05,taxCostWeight:.05}}},{id:"culinary_kitchen",name:"",desc:"",baseCost:{wood:100,stone:60,brick:30},input:{tools:.1,food:1.5},output:{delicacies:1.5},jobs:{artisan:2,peasant:1},owner:"artisan",epoch:2,cat:"industry",requiresTech:"culinary_arts",visual:{icon:"UtensilsCrossed",color:"bg-rose-800",text:"text-rose-200"}},{id:"brewery",name:"",desc:"",baseCost:{wood:90,stone:50,brick:25},input:{food:1.2,wood:.2},output:{ale:1.2},jobs:{worker:2},owner:"worker",epoch:2,cat:"industry",requiresTech:"brewing",visual:{icon:"Wine",color:"bg-purple-800",text:"text-purple-200"},marketConfig:{price:{livingCostWeight:.4,taxCostWeight:.5},wage:{livingCostWeight:.25,taxCostWeight:.25}}},{id:"furniture_workshop",name:"",desc:"",baseCost:{plank:120,stone:80},input:{tools:.1,plank:1,cloth:.3},output:{furniture:1.2},jobs:{artisan:3},owner:"artisan",epoch:2,cat:"industry",requiresTech:"carpentry",visual:{icon:"Armchair",color:"bg-amber-800",text:"text-amber-200"},marketConfig:{price:{livingCostWeight:.3,taxCostWeight:.4},wage:{livingCostWeight:.15,taxCostWeight:.15}}},{id:"loom_house",name:"",desc:"",baseCost:{wood:35,food:20},output:{cloth:1.2},jobs:{peasant:2},owner:"peasant",epoch:0,cat:"industry",visual:{icon:"Shirt",color:"bg-indigo-800",text:"text-indigo-200"}},{id:"dye_works",name:"",desc:"",baseCost:{wood:60,stone:20},input:{food:.5},output:{dye:.4},jobs:{peasant:2},owner:"artisan",epoch:1,cat:"industry",visual:{icon:"Paintbrush",color:"bg-pink-800",text:"text-pink-200"}},{id:"tailor_workshop",name:"",desc:"",baseCost:{wood:100,stone:40},input:{tools:.04,cloth:1,dye:.2},output:{fine_clothes:.8,culture:.1},jobs:{artisan:2},owner:"artisan",epoch:2,cat:"industry",requiresTech:"tools",visual:{icon:"Package",color:"bg-indigo-900",text:"text-indigo-100"}},{id:"mine",name:"",desc:"",baseCost:{plank:120,food:220},input:{tools:.04},output:{iron:.35},jobs:{miner:5,capitalist:1},owner:"capitalist",epoch:2,cat:"gather",requiresTech:"ironworking",visual:{icon:"Mountain",color:"bg-zinc-700",text:"text-zinc-200"},marketConfig:{price:{livingCostWeight:.2,taxCostWeight:.25},wage:{livingCostWeight:.1,taxCostWeight:.1}}},{id:"coffee_plantation",name:"",desc:"",baseCost:{wood:200,spice:30},output:{coffee:.4},jobs:{serf:4,merchant:1},owner:"merchant",epoch:5,cat:"gather",requiresTech:"coffee_agronomy",visual:{icon:"Coffee",color:"bg-amber-900",text:"text-amber-200"}},{id:"coal_mine",name:"",desc:"",baseCost:{plank:200,tools:60},input:{tools:.1},output:{coal:.45},jobs:{miner:6,capitalist:1},owner:"capitalist",epoch:6,cat:"gather",requiresTech:"coal_gasification",visual:{icon:"Flame",color:"bg-slate-700",text:"text-slate-100"},marketConfig:{price:{livingCostWeight:.2,taxCostWeight:.25},wage:{livingCostWeight:.1,taxCostWeight:.1}}},{id:"hut",name:"",desc:"",baseCost:{wood:20,food:20},output:{maxPop:3},epoch:0,cat:"civic",visual:{icon:"Tent",color:"bg-orange-800",text:"text-orange-200"}},{id:"house",name:"",desc:"",baseCost:{plank:60,brick:40},output:{maxPop:6},epoch:2,cat:"civic",requiresTech:"urban_planning",visual:{icon:"Home",color:"bg-amber-700",text:"text-amber-100"}},{id:"granary",name:"",desc:"",baseCost:{wood:120,brick:40},output:{maxPop:6},epoch:1,cat:"civic",requiresTech:"granary_architecture",visual:{icon:"Boxes",color:"bg-yellow-900",text:"text-yellow-200"}},{id:"town_hall",name:"",desc:"",baseCost:{brick:200,plank:200},input:{brick:.2,papyrus:.02,delicacies:.1,fine_clothes:.05},output:{},jobs:{official:5},epoch:3,cat:"civic",requiresTech:"bureaucracy",visual:{icon:"Scale",color:"bg-slate-800",text:"text-slate-200"}},{id:"church",name:"",desc:"",baseCost:{stone:150,plank:50},input:{furniture:.1,fine_clothes:.1},output:{culture:.8,silver:.5},jobs:{cleric:3},owner:"cleric",epoch:3,cat:"civic",requiresTech:"theology",visual:{icon:"Cross",color:"bg-purple-900",text:"text-purple-200"}},{id:"amphitheater",name:"",desc:"",baseCost:{stone:200,brick:80},input:{fine_clothes:.15},output:{culture:1.2},jobs:{cleric:2},owner:"cleric",epoch:1,cat:"civic",requiresTech:"amphitheater_design",visual:{icon:"Music2",color:"bg-rose-900",text:"text-rose-200"}},{id:"navigator_school",name:"",desc:"",baseCost:{wood:160,papyrus:80},output:{science:.6,culture:.2},jobs:{navigator:2,scribe:1,official:1},owner:"official",epoch:4,cat:"civic",requiresTech:"navigator_schooling",visual:{icon:"Navigation",color:"bg-cyan-900",text:"text-cyan-200"}},{id:"coffee_house",name:"",desc:"",baseCost:{plank:140,coffee:40},input:{coffee:.4,delicacies:.2},output:{culture:1,science:1},jobs:{merchant:1,scribe:2},owner:"merchant",epoch:5,cat:"civic",requiresTech:"coffeehouse_philosophy",visual:{icon:"Coffee",color:"bg-brown-900",text:"text-amber-200"}},{id:"rail_depot",name:"",desc:"",baseCost:{steel:180,coal:120},input:{coal:.4,ale:.2,delicacies:.1},output:{silver:1.5,maxPop:2},jobs:{engineer:2,merchant:2,capitalist:1},owner:"capitalist",epoch:6,cat:"civic",requiresTech:"rail_network",visual:{icon:"Train",color:"bg-gray-900",text:"text-gray-100"}},{id:"sawmill",name:"",desc:"",baseCost:{wood:75,stone:35},input:{wood:1.2},output:{plank:1.8},jobs:{worker:3},owner:"worker",epoch:1,requiresTech:"tools",cat:"industry",visual:{icon:"Hammer",color:"bg-amber-900",text:"text-amber-300"},marketConfig:{price:{livingCostWeight:.2,taxCostWeight:.25},wage:{livingCostWeight:.1,taxCostWeight:.1}}},{id:"brickworks",name:"",desc:"",baseCost:{wood:140,stone:90},input:{stone:1,wood:.3},output:{brick:1.6},jobs:{worker:2},owner:"worker",epoch:0,cat:"industry",requiresTech:"pottery",visual:{icon:"Factory",color:"bg-red-900",text:"text-red-300"}},{id:"stone_tool_workshop",name:"",desc:"",baseCost:{wood:40,stone:25},input:{wood:1,stone:.8},output:{tools:.5},jobs:{artisan:2},owner:"artisan",epoch:0,cat:"industry",requiresTech:"tool_making",visual:{icon:"Hammer",color:"bg-stone-700",text:"text-stone-200"},marketConfig:{price:{livingCostWeight:.2,taxCostWeight:.25},wage:{livingCostWeight:.1,taxCostWeight:.1}}},{id:"bronze_foundry",name:"",desc:"",baseCost:{wood:140,stone:75,copper:35},input:{copper:.6,wood:.4},output:{tools:1},jobs:{worker:2,artisan:1},owner:"artisan",epoch:1,cat:"industry",requiresTech:"bronze_working",visual:{icon:"Anvil",color:"bg-orange-800",text:"text-amber-200"},marketConfig:{price:{livingCostWeight:.3,taxCostWeight:.35},wage:{livingCostWeight:.2,taxCostWeight:.2}}},{id:"iron_tool_workshop",name:"",desc:"",baseCost:{plank:150,brick:80},input:{wood:.5,iron:.8},output:{tools:1.5},jobs:{worker:2,artisan:1},owner:"artisan",epoch:2,cat:"industry",requiresTech:"ironworking",visual:{icon:"Cog",color:"bg-zinc-800",text:"text-zinc-200"},marketConfig:{price:{livingCostWeight:.3,taxCostWeight:.35},wage:{livingCostWeight:.2,taxCostWeight:.2}}},{id:"factory",name:"",desc:"",baseCost:{brick:400,steel:200},input:{steel:.2,coal:.2},output:{tools:1.2},jobs:{worker:10,engineer:2,capitalist:1},owner:"capitalist",epoch:6,requiresTech:"industrialization",cat:"industry",visual:{icon:"Factory",color:"bg-blue-900",text:"text-blue-200"}},{id:"printing_house",name:"",desc:"",baseCost:{brick:200,papyrus:80},input:{papyrus:.4,coffee:.1},output:{science:1.2},jobs:{artisan:2,scribe:2,capitalist:1},owner:"capitalist",epoch:5,cat:"industry",requiresTech:"printing_press",visual:{icon:"BookOpen",color:"bg-indigo-900",text:"text-indigo-200"}},{id:"steel_foundry",name:"",desc:"",baseCost:{brick:300,iron:200},input:{iron:.4,coal:.4},output:{steel:.4},jobs:{engineer:3,worker:4,capitalist:1},owner:"capitalist",epoch:6,cat:"industry",requiresTech:"steel_alloys",visual:{icon:"Cog",color:"bg-gray-900",text:"text-gray-200"}},{id:"library",name:"",desc:"",baseCost:{wood:200,stone:60},output:{science:.8},jobs:{scribe:3},owner:"scribe",epoch:0,cat:"civic",visual:{icon:"Landmark",color:"bg-cyan-800",text:"text-cyan-200"}},{id:"market",name:"",desc:"",baseCost:{plank:100},input:{brick:.05},output:{food:2},jobs:{merchant:2},owner:"merchant",epoch:1,requiresTech:"caravan_trade",cat:"civic",visual:{icon:"Handshake",color:"bg-yellow-800",text:"text-yellow-200"}},{id:"dockyard",name:"",desc:"",baseCost:{plank:200,tools:40},input:{wood:.5},output:{spice:.35},jobs:{navigator:2,worker:2,merchant:1},owner:"merchant",epoch:4,cat:"industry",requiresTech:"cartography",visual:{icon:"Anchor",color:"bg-sky-900",text:"text-sky-200"}},{id:"trade_port",name:"",desc:"",baseCost:{plank:220,spice:60},input:{spice:.3},output:{food:2},jobs:{merchant:3},owner:"merchant",epoch:4,cat:"civic",requiresTech:"charter_companies",visual:{icon:"Ship",color:"bg-indigo-900",text:"text-indigo-200"}},{id:"barracks",name:"",desc:"",baseCost:{wood:80,stone:40},output:{militaryCapacity:10},epoch:0,cat:"military",visual:{icon:"Shield",color:"bg-red-900",text:"text-red-200"}},{id:"training_ground",name:"",desc:"",baseCost:{plank:150,brick:80,iron:30},output:{militaryCapacity:20},epoch:2,cat:"military",requiresTech:"military_training",visual:{icon:"Swords",color:"bg-red-800",text:"text-red-100"}},{id:"fortress",name:"",desc:"",baseCost:{brick:300,iron:150,steel:50},output:{militaryCapacity:40},epoch:4,cat:"military",requiresTech:"fortification",visual:{icon:"Castle",color:"bg-red-950",text:"text-red-100"}},{id:"textile_mill",name:"",desc:"",baseCost:{brick:180,plank:120,tools:60},input:{food:.8,dye:.3},output:{cloth:3.5,fine_clothes:.6},jobs:{worker:6,artisan:2,capitalist:1},owner:"capitalist",epoch:5,cat:"industry",requiresTech:"mechanized_weaving",visual:{icon:"Shirt",color:"bg-indigo-700",text:"text-indigo-100"},marketConfig:{price:{livingCostWeight:.25,taxCostWeight:.3},wage:{livingCostWeight:.15,taxCostWeight:.15}}},{id:"garment_factory",name:"",desc:"",baseCost:{brick:350,steel:150,tools:100},input:{cloth:2.5,dye:.5,coal:.3},output:{fine_clothes:2.8,culture:.3},jobs:{worker:12,artisan:3,engineer:1,capitalist:1},owner:"capitalist",epoch:6,cat:"industry",requiresTech:"assembly_line",visual:{icon:"Factory",color:"bg-indigo-900",text:"text-indigo-100"},marketConfig:{price:{livingCostWeight:.3,taxCostWeight:.35},wage:{livingCostWeight:.2,taxCostWeight:.2}}},{id:"lumber_mill",name:"",desc:"",baseCost:{brick:160,plank:100,tools:50},input:{wood:3},output:{plank:5.5},jobs:{worker:5,artisan:1,capitalist:1},owner:"capitalist",epoch:5,cat:"industry",requiresTech:"hydraulic_sawing",visual:{icon:"Axe",color:"bg-amber-700",text:"text-amber-100"},marketConfig:{price:{livingCostWeight:.2,taxCostWeight:.25},wage:{livingCostWeight:.12,taxCostWeight:.12}}},{id:"furniture_factory",name:"",desc:"",baseCost:{brick:280,steel:120,tools:80},input:{plank:2.5,cloth:.8,coal:.25},output:{furniture:3.5,culture:.2},jobs:{worker:8,artisan:2,engineer:1,capitalist:1},owner:"capitalist",epoch:6,cat:"industry",requiresTech:"mass_production",visual:{icon:"Armchair",color:"bg-amber-900",text:"text-amber-100"},marketConfig:{price:{livingCostWeight:.28,taxCostWeight:.32},wage:{livingCostWeight:.18,taxCostWeight:.18}}},{id:"metallurgy_workshop",name:"",desc:"",baseCost:{brick:200,iron:100,tools:60},input:{iron:1.5,copper:.3,wood:.8},output:{tools:3},jobs:{worker:4,artisan:2,engineer:1},owner:"artisan",epoch:4,cat:"industry",requiresTech:"advanced_metallurgy",visual:{icon:"Anvil",color:"bg-zinc-700",text:"text-zinc-100"},marketConfig:{price:{livingCostWeight:.25,taxCostWeight:.3},wage:{livingCostWeight:.15,taxCostWeight:.15}}},{id:"steel_works",name:"",desc:"",baseCost:{brick:500,steel:250,tools:150},input:{iron:1.2,coal:1},output:{steel:1.2,tools:.8},jobs:{worker:15,engineer:4,capitalist:2},owner:"capitalist",epoch:6,cat:"industry",requiresTech:"bessemer_process",visual:{icon:"Factory",color:"bg-gray-800",text:"text-gray-100"},marketConfig:{price:{livingCostWeight:.3,taxCostWeight:.35},wage:{livingCostWeight:.2,taxCostWeight:.2}}},{id:"building_materials_plant",name:"",desc:"",baseCost:{brick:200,plank:100,tools:50},input:{stone:2,wood:.6,coal:.2},output:{brick:4},jobs:{worker:6,engineer:1,capitalist:1},owner:"capitalist",epoch:5,cat:"industry",requiresTech:"industrial_ceramics",visual:{icon:"Building2",color:"bg-red-800",text:"text-red-100"},marketConfig:{price:{livingCostWeight:.2,taxCostWeight:.25},wage:{livingCostWeight:.12,taxCostWeight:.12}}},{id:"prefab_factory",name:"",desc:"",baseCost:{brick:400,steel:200,tools:100},input:{brick:1.5,steel:.6,coal:.4},output:{brick:5,maxPop:1},jobs:{worker:10,engineer:2,capitalist:1},owner:"capitalist",epoch:6,cat:"industry",requiresTech:"standardized_construction",visual:{icon:"Building",color:"bg-slate-700",text:"text-slate-100"},marketConfig:{price:{livingCostWeight:.28,taxCostWeight:.32},wage:{livingCostWeight:.18,taxCostWeight:.18}}},{id:"cannery",name:"",desc:"",baseCost:{brick:250,steel:100,tools:60},input:{food:2.5,iron:.3,coal:.25},output:{delicacies:3.5},jobs:{worker:8,artisan:2,engineer:1,capitalist:1},owner:"capitalist",epoch:6,cat:"industry",requiresTech:"food_preservation",visual:{icon:"Package",color:"bg-orange-800",text:"text-orange-100"},marketConfig:{price:{livingCostWeight:.22,taxCostWeight:.28},wage:{livingCostWeight:.14,taxCostWeight:.14}}},{id:"distillery",name:"",desc:"",baseCost:{brick:220,copper:80,tools:50},input:{food:2,coal:.2},output:{ale:3.5,silver:.8},jobs:{worker:5,artisan:2,capitalist:1},owner:"capitalist",epoch:5,cat:"industry",requiresTech:"distillation",visual:{icon:"Wine",color:"bg-purple-700",text:"text-purple-100"},marketConfig:{price:{livingCostWeight:.35,taxCostWeight:.4},wage:{livingCostWeight:.22,taxCostWeight:.22}}},{id:"paper_mill",name:"",desc:"",baseCost:{brick:180,plank:100,tools:50},input:{wood:1.5,coal:.15},output:{papyrus:1.8},jobs:{worker:5,engineer:1,capitalist:1},owner:"capitalist",epoch:5,cat:"industry",requiresTech:"wood_pulp_process",visual:{icon:"ScrollText",color:"bg-lime-700",text:"text-lime-100"},marketConfig:{price:{livingCostWeight:.18,taxCostWeight:.22},wage:{livingCostWeight:.1,taxCostWeight:.1}}},{id:"publishing_house",name:"",desc:"",baseCost:{brick:300,steel:80,papyrus:100},input:{papyrus:1,coffee:.2,coal:.15},output:{science:2.5,culture:1},jobs:{scribe:4,artisan:2,engineer:1,capitalist:1},owner:"capitalist",epoch:6,cat:"industry",requiresTech:"mass_media",visual:{icon:"Newspaper",color:"bg-cyan-800",text:"text-cyan-100"},marketConfig:{price:{livingCostWeight:.25,taxCostWeight:.3},wage:{livingCostWeight:.18,taxCostWeight:.18}}},{id:"industrial_mine",name:"",desc:"",baseCost:{brick:350,steel:200,tools:100},input:{tools:.15,coal:.3},output:{iron:1.2,copper:.4},jobs:{miner:10,engineer:2,capitalist:1},owner:"capitalist",epoch:6,cat:"gather",requiresTech:"deep_shaft_mining",visual:{icon:"Mountain",color:"bg-zinc-800",text:"text-zinc-100"},marketConfig:{price:{livingCostWeight:.25,taxCostWeight:.3},wage:{livingCostWeight:.15,taxCostWeight:.15}}},{id:"mechanized_farm",name:"",desc:"",baseCost:{brick:200,steel:150,tools:80},input:{tools:.1,coal:.2},output:{food:15},jobs:{peasant:4,worker:4,engineer:1,capitalist:1},owner:"capitalist",epoch:6,cat:"gather",requiresTech:"agricultural_machinery",visual:{icon:"Tractor",color:"bg-green-800",text:"text-green-100"},marketConfig:{price:{livingCostWeight:.18,taxCostWeight:.22},wage:{livingCostWeight:.1,taxCostWeight:.1}}},{id:"logging_company",name:"",desc:"",baseCost:{brick:180,steel:100,tools:60},input:{tools:.08,coal:.15},output:{wood:8},jobs:{lumberjack:6,worker:4,engineer:1,capitalist:1},owner:"capitalist",epoch:6,cat:"gather",requiresTech:"steam_logging",visual:{icon:"TreeDeciduous",color:"bg-emerald-700",text:"text-emerald-100"},marketConfig:{price:{livingCostWeight:.15,taxCostWeight:.2},wage:{livingCostWeight:.08,taxCostWeight:.08}}},{id:"apartment_block",name:"",desc:"",baseCost:{brick:400,steel:100,plank:150},output:{maxPop:15},epoch:6,cat:"civic",requiresTech:"urban_architecture",visual:{icon:"Building2",color:"bg-slate-600",text:"text-slate-100"}},{id:"university",name:"",desc:"",baseCost:{brick:400,plank:200,papyrus:100},input:{papyrus:.3,coffee:.2,delicacies:.15},output:{science:3,culture:.8},jobs:{scribe:4,engineer:2,official:2},owner:"official",epoch:5,cat:"civic",requiresTech:"higher_education",visual:{icon:"GraduationCap",color:"bg-blue-900",text:"text-blue-100"}},{id:"opera_house",name:"",desc:"",baseCost:{brick:350,plank:150,furniture:80},input:{fine_clothes:.25,delicacies:.2},output:{culture:3.5,silver:1},jobs:{cleric:4,artisan:2,merchant:1},owner:"cleric",epoch:5,cat:"civic",requiresTech:"grand_arts",visual:{icon:"Music",color:"bg-rose-800",text:"text-rose-100"}},{id:"stock_exchange",name:"",desc:"",baseCost:{brick:500,steel:150,papyrus:100},input:{papyrus:.2,coffee:.15},output:{silver:5,culture:.5},jobs:{merchant:6,scribe:2,capitalist:2},owner:"capitalist",epoch:6,cat:"civic",requiresTech:"financial_capitalism",visual:{icon:"TrendingUp",color:"bg-emerald-900",text:"text-emerald-100"}}],yo=[{id:"barter",name:"",desc:" 0.3 ",cost:{science:150},epoch:0,effects:{passive:{silver:.3}}},{id:"stone_axes",name:"",desc:" 25%",cost:{science:150},epoch:0,effects:{buildings:{lumber_camp:.25}}},{id:"flint_knapping",name:"",desc:" 25%",cost:{science:210},epoch:0,effects:{buildings:{quarry:.25}}},{id:"animal_husbandry",name:"",desc:" 20 ",cost:{science:240},epoch:0,effects:{passive:{food:20}}},{id:"pottery",name:"",desc:" +10%",cost:{science:300},epoch:0,effects:{buildings:{farm:.1}}},{id:"tool_making",name:"",desc:" +10%",cost:{science:270},epoch:0,effects:{categories:{gather:.1}}},{id:"basic_irrigation",name:"",desc:" 15%",cost:{science:360},epoch:0,effects:{buildings:{farm:.15}}},{id:"oral_tradition",name:"",desc:" 15%",cost:{science:330},epoch:0,effects:{buildings:{library:.15}}},{id:"communal_granary",name:"",desc:" +10",cost:{science:390},epoch:0,effects:{maxPop:10}},{id:"river_fishing",name:"",desc:" 10  0.2 ",cost:{science:450},epoch:0,effects:{passive:{food:10,silver:.2}}},{id:"wheel",name:"",desc:" +20%",cost:{science:480},epoch:0,effects:{categories:{gather:.2}}},{id:"sailing",name:"",desc:" 0.5  5 ",cost:{science:1050},epoch:1,effects:{passive:{silver:.5,food:5}}},{id:"tools",name:"",desc:" +5%",cost:{science:750},epoch:1,effects:{categories:{industry:.05}}},{id:"copper_mining",name:"",desc:" +25%",cost:{science:840},epoch:1,effects:{buildings:{copper_mine:.25}}},{id:"bronze_working",name:"",desc:" +30% +15%",cost:{science:960},epoch:1,effects:{buildings:{bronze_foundry:.3,mine:.15}}},{id:"horse_collar",name:"",desc:" 10%",cost:{science:780},epoch:1,effects:{buildings:{farm:.1,large_estate:.1}}},{id:"caravan_trade",name:"",desc:" +35%",cost:{science:900},epoch:1,effects:{buildings:{market:.35}}},{id:"granary_architecture",name:"",desc:" +25% +5 ",cost:{science:960},epoch:1,effects:{buildings:{granary:.25},maxPop:5}},{id:"primitive_weaving",name:"",desc:" +10%",cost:{science:820},epoch:1,effects:{buildings:{loom_house:.1}}},{id:"ritual_priesthood",name:"",desc:" 15%",cost:{science:340},epoch:3,effects:{buildings:{church:.15}}},{id:"papyrus_cultivation",name:"",desc:" +20%",cost:{science:1575},epoch:2,effects:{buildings:{reed_works:.2}}},{id:"culinary_arts",name:"",desc:"",cost:{science:1680},epoch:2,effects:{buildings:{culinary_kitchen:.2}}},{id:"brewing",name:"",desc:"",cost:{science:1610},epoch:2,effects:{buildings:{brewery:.2}}},{id:"carpentry",name:"",desc:"",cost:{science:1750},epoch:2,effects:{buildings:{furniture_workshop:.2}}},{id:"library_catalogs",name:"",desc:" +25%",cost:{science:1645},epoch:2,effects:{buildings:{library:.25}}},{id:"amphitheater_design",name:"",desc:" +30%",cost:{science:1470},epoch:1,effects:{buildings:{amphitheater:.3}}},{id:"urban_planning",name:"",desc:" +20% +10",cost:{science:1820},epoch:2,effects:{buildings:{house:.2},maxPop:10}},{id:"republican_code",name:"",desc:" +15% +5",cost:{science:1960},epoch:2,effects:{categories:{civic:.15},maxPop:5}},{id:"road_system",name:"",desc:" +10%",cost:{science:2100},epoch:2,effects:{categories:{gather:.1}}},{id:"advanced_weaving",name:"",desc:" +20%",cost:{science:1950},epoch:2,effects:{buildings:{loom_house:.2}}},{id:"feudalism",name:"",desc:" +15%",cost:{science:3500},epoch:3,effects:{buildings:{large_estate:.15}}},{id:"basic_weaving",name:"",desc:" +25%",cost:{science:3150},epoch:3,effects:{buildings:{loom_house:.25}}},{id:"theology",name:"",desc:" +30%",cost:{science:3850},epoch:3,effects:{buildings:{church:.3}}},{id:"bureaucracy",name:"",desc:" +5% 0.3 ",cost:{science:4200},epoch:3,effects:{categories:{gather:.05,industry:.05,civic:.05},passive:{culture:.3}}},{id:"three_field_system",name:"",desc:" +15% ",cost:{science:3850},epoch:3,effects:{buildings:{farm:.15,large_estate:.15}}},{id:"stone_keep_engineering",name:"",desc:" 10%",cost:{science:4025},epoch:3,effects:{buildings:{hut:.1,house:.1}}},{id:"ritual_priesthood",name:"",desc:" 15%",cost:{science:1190},epoch:3,effects:{buildings:{church:.15}}},{id:"ironworking",name:"",desc:" +30%",cost:{science:1500},epoch:2,effects:{buildings:{mine:.3}}},{id:"cartography",name:"",desc:" +25%",cost:{science:6300},epoch:4,effects:{buildings:{dockyard:.25}}},{id:"charter_companies",name:"",desc:" +30% +1 ",cost:{science:6650},epoch:4,effects:{buildings:{trade_port:.3},passive:{silver:1}}},{id:"navigator_schooling",name:"",desc:" 30%",cost:{science:7e3},epoch:4,effects:{buildings:{navigator_school:.3}}},{id:"naval_artillery",name:"",desc:" 15% ",cost:{science:7350},epoch:4,effects:{buildings:{dockyard:.15}}},{id:"colonial_ledgers",name:"",desc:" +20% 1.5 ",cost:{science:7700},epoch:4,effects:{buildings:{dockyard:.2,trade_port:.2},passive:{silver:1.5}}},{id:"spice_monopolies",name:"",desc:" 15% ",cost:{science:8050},epoch:4,effects:{buildings:{trade_port:.15}}},{id:"coffee_agronomy",name:"",desc:" +30%",cost:{science:14400},epoch:5,effects:{buildings:{coffee_plantation:.3}}},{id:"coffeehouse_philosophy",name:"",desc:" +35% +0.4 ",cost:{science:15300},epoch:5,effects:{buildings:{coffee_house:.35},passive:{culture:.4}}},{id:"printing_press",name:"",desc:" 35% ",cost:{science:16200},epoch:5,effects:{buildings:{printing_house:.35}}},{id:"public_schooling",name:"",desc:" +25%  +0.2 ",cost:{science:17100},epoch:5,effects:{buildings:{library:.25},passive:{culture:.2}}},{id:"social_contract",name:"",desc:" +20% +15 0.5 ",cost:{science:18e3},epoch:5,effects:{categories:{civic:.2},maxPop:15,passive:{culture:.5}}},{id:"salon_debates",name:"",desc:" 15%",cost:{science:18900},epoch:5,effects:{buildings:{amphitheater:.15}}},{id:"coal_gasification",name:"",desc:" +30%",cost:{science:23400},epoch:6,effects:{buildings:{coal_mine:.3}}},{id:"steel_alloys",name:"",desc:" +30%",cost:{science:24300},epoch:6,effects:{buildings:{steel_foundry:.3}}},{id:"industrialization",name:"",desc:" +10%",cost:{science:27e3},epoch:6,effects:{categories:{industry:.1}}},{id:"steam_power",name:"",desc:" +20% ",cost:{science:28800},epoch:6,effects:{categories:{industry:.2}}},{id:"chemical_fertilizer",name:"",desc:" +20% ",cost:{science:27e3},epoch:6,effects:{buildings:{farm:.2,large_estate:.2}}},{id:"rail_network",name:"",desc:" +30% +10%",cost:{science:27900},epoch:6,effects:{buildings:{rail_depot:.3},categories:{gather:.1}}},{id:"precision_tools",name:"",desc:" +25%",cost:{science:28800},epoch:6,effects:{buildings:{factory:.25}}},{id:"military_training",name:"",desc:" +15%",cost:{science:2800},epoch:2,effects:{categories:{military:.15}}},{id:"fortification",name:"",desc:" +25% +10",cost:{science:8400},epoch:4,effects:{categories:{military:.25},maxPop:10}},{id:"mechanized_weaving",name:"",desc:" +20% +15%",cost:{science:13500},epoch:5,effects:{buildings:{loom_house:.2,tailor_workshop:.15}}},{id:"assembly_line",name:"",desc:" +25% +20%",cost:{science:26100},epoch:6,effects:{buildings:{textile_mill:.25,garment_factory:.2}}},{id:"hydraulic_sawing",name:"",desc:" +25% +15%",cost:{science:12600},epoch:5,effects:{buildings:{sawmill:.25,lumber_camp:.15}}},{id:"mass_production",name:"",desc:" +20% +25%",cost:{science:25200},epoch:6,effects:{buildings:{lumber_mill:.2,furniture_workshop:.25}}},{id:"advanced_metallurgy",name:"",desc:" +20% +15%",cost:{science:7700},epoch:4,effects:{buildings:{iron_tool_workshop:.2,bronze_foundry:.15}}},{id:"bessemer_process",name:"",desc:" +30% +25%",cost:{science:27900},epoch:6,effects:{buildings:{steel_foundry:.3,metallurgy_workshop:.25}}},{id:"industrial_ceramics",name:"",desc:" +25%",cost:{science:11700},epoch:5,effects:{buildings:{brickworks:.25}}},{id:"standardized_construction",name:"",desc:" +25% +15",cost:{science:24300},epoch:6,effects:{buildings:{building_materials_plant:.25},maxPop:15}},{id:"food_preservation",name:"",desc:"",cost:{science:22500},epoch:6,effects:{buildings:{culinary_kitchen:.25}}},{id:"distillation",name:"",desc:"",cost:{science:14400},epoch:5,effects:{buildings:{brewery:.3}}},{id:"wood_pulp_process",name:"",desc:"",cost:{science:13050},epoch:5,effects:{buildings:{reed_works:.3}}},{id:"mass_media",name:"",desc:" +30% +20%",cost:{science:24750},epoch:6,effects:{buildings:{printing_house:.3,publishing_house:.2}}},{id:"deep_shaft_mining",name:"",desc:"",cost:{science:23400},epoch:6,effects:{buildings:{mine:.25,coal_mine:.2}}},{id:"agricultural_machinery",name:"",desc:"",cost:{science:25200},epoch:6,effects:{buildings:{farm:.25,large_estate:.3}}},{id:"steam_logging",name:"",desc:"",cost:{science:22500},epoch:6,effects:{buildings:{lumber_camp:.3}}},{id:"higher_education",name:"",desc:"",cost:{science:15750},epoch:5,effects:{buildings:{library:.2,navigator_school:.2}}},{id:"grand_arts",name:"",desc:"",cost:{science:17100},epoch:5,effects:{buildings:{amphitheater:.25,church:.15}}},{id:"urban_architecture",name:"",desc:"",cost:{science:26100},epoch:6,effects:{buildings:{house:.2},maxPop:20}},{id:"financial_capitalism",name:"",desc:" +20% +15% 2 ",cost:{science:29250},epoch:6,effects:{buildings:{trade_port:.2,rail_depot:.15},passive:{silver:2}}}],Ec=[{id:"communal_granary",name:"",desc:"",category:"social",unlockEpoch:0,cost:{},effects:[" -15%"," +8%"," -10%"],drawbacks:[" -5%"],modifiers:{needsReduction:.15,maxPop:.08,categories:{gather:-.05},resourceDemandMod:{food:-.1}},active:!1},{id:"shaman_council",name:"",desc:"",category:"culture",unlockEpoch:0,cost:{},effects:[" +10%"," +5%"," +15%"],drawbacks:[" -2 "],modifiers:{categories:{civic:.1},buildings:{library:.05},passive:{silver:-2,culture:.5},resourceDemandMod:{culture:.15}},active:!1},{id:"hunting_party",name:"",desc:"",category:"economy",unlockEpoch:0,cost:{},effects:[" +12%"," +5%"," +15%"],drawbacks:[" -2 "],modifiers:{categories:{gather:.12,military:.05},passive:{food:-2},resourceSupplyMod:{food:.15}},active:!1},{id:"blood_oath",name:"",desc:"",category:"military",unlockEpoch:0,cost:{},effects:[" +15%"," -5%"," -10%"],drawbacks:[" -8%"],modifiers:{categories:{military:.15,industry:-.08},needsReduction:.05,stratumDemandMod:{soldier:-.1}},active:!1},{id:"corvee_labor",name:"",desc:"",category:"economy",unlockEpoch:1,cost:{},effects:[" +18%"," -10%"," +12%"],drawbacks:[" -8%"," +5%"],modifiers:{categories:{gather:.18},buildCostReduction:.1,maxPop:-.08,needsReduction:-.05,resourceSupplyMod:{stone:.12}},active:!1},{id:"divine_kingship",name:"",desc:"",category:"culture",unlockEpoch:1,cost:{},effects:[" +15%"," +8%"," +20%"],drawbacks:[" -10%"],modifiers:{categories:{civic:.15,military:.08},buildings:{library:-.1,university:-.1},stratumDemandMod:{landowner:.2}},active:!1},{id:"bronze_standardization",name:"",desc:"",category:"economy",unlockEpoch:1,cost:{},effects:[" +12%"," +10%"," +20%"],drawbacks:[" -3 "],modifiers:{categories:{industry:.12,military:.1},passive:{silver:-3},resourceDemandMod:{copper:.2}},active:!1},{id:"temple_economy",name:"",desc:"",category:"economy",unlockEpoch:1,cost:{},effects:[" +5 "," +8%"," +15%"],drawbacks:[" -5%"],modifiers:{passive:{silver:5,culture:1},categories:{civic:.08,industry:-.05},stratumDemandMod:{cleric:.15}},active:!1},{id:"warrior_caste",name:"",desc:"",category:"military",unlockEpoch:1,cost:{},effects:[" +20%"," +15%"," +18%"],drawbacks:[" -8%"," -4 "],modifiers:{categories:{military:.2,gather:-.08},buildings:{barracks:.15,training_ground:.15},passive:{silver:-4},resourceDemandMod:{tools:.18}},active:!1},{id:"bread_and_circus",name:"",desc:"",category:"social",unlockEpoch:2,cost:{},effects:[" -18%"," +10%"," +15%"," +20%"],drawbacks:[" -6 "," -4 "],modifiers:{needsReduction:.18,categories:{civic:.1},passive:{food:-6,silver:-4},resourceDemandMod:{food:.15,culture:.2}},active:!1},{id:"twelve_tables",name:"",desc:"",category:"social",unlockEpoch:2,cost:{},effects:[" +12%"," +6%"," +10%"],drawbacks:[" -5%"],modifiers:{categories:{civic:.12,military:-.05},maxPop:.06,passive:{culture:.8},resourceDemandMod:{copper:.1}},active:!1},{id:"agora_assembly",name:"",desc:"",category:"culture",unlockEpoch:2,cost:{},effects:[" +15%"," +8%"," +15%"," +12%"],drawbacks:[" -6%"],modifiers:{buildings:{library:.15,university:.1},categories:{civic:.08,gather:-.06},passive:{science:1.5},stratumDemandMod:{scribe:.15},resourceDemandMod:{papyrus:.12}},active:!1},{id:"salt_monopoly",name:"",desc:"",category:"economy",unlockEpoch:2,cost:{},effects:[" +8 "," +6%"," +10%"," -8%"],drawbacks:[" +8%"," -5%"],modifiers:{passive:{silver:8},categories:{industry:.06},needsReduction:-.08,maxPop:-.05,resourceSupplyMod:{iron:.1},resourceDemandMod:{tools:-.08}},active:!1},{id:"phalanx_drill",name:"",desc:"",category:"military",unlockEpoch:2,cost:{},effects:[" +18%"," +20%"," +12%"," +15%"],drawbacks:[" -5 "," -3 "],modifiers:{categories:{military:.18},buildings:{barracks:.2,training_ground:.15},passive:{silver:-5,food:-3},stratumDemandMod:{soldier:.12},resourceDemandMod:{tools:.15}},active:!1},{id:"guild_charter",name:"",desc:"",category:"economy",unlockEpoch:2,cost:{},effects:[" +15%"," +8%"," +10%"," +12%"],drawbacks:[" -4 "],modifiers:{buildings:{loom_house:.15,furniture_workshop:.15,dye_works:.15,tailor_workshop:.12},categories:{industry:.08},passive:{silver:-4},stratumDemandMod:{artisan:.1},resourceSupplyMod:{cloth:.12}},active:!1},{id:"road_network",name:"",desc:"",category:"economy",unlockEpoch:2,cost:{},effects:[" +10%"," +8%"," +5%"," +15%"," +10%"],drawbacks:[" -6 "],modifiers:{categories:{gather:.1,industry:.08,military:.05},passive:{silver:-6},stratumDemandMod:{merchant:.15},resourceDemandMod:{stone:.1}},active:!1},{id:"feudal_levy",name:"",desc:"",category:"military",unlockEpoch:3,cost:{},effects:[" +22%"," +15%"," +20%"," +10%"],drawbacks:[" -10%"," -3 "],modifiers:{categories:{military:.22,gather:-.1},buildings:{barracks:.15,fortress:.15},passive:{food:-3},stratumDemandMod:{knight:.2},resourceDemandMod:{food:.1}},active:!1},{id:"magna_carta",name:"",desc:"",category:"social",unlockEpoch:3,cost:{},effects:[" +15%"," +8%"," +5%"," +12%"," -10%"],drawbacks:[" -8%"],modifiers:{categories:{civic:.15,military:-.08},maxPop:.08,stratumDemandMod:{official:.12,landowner:-.1},buildings:{library:.05},passive:{culture:1}},active:!1},{id:"tithe",name:"",desc:"",category:"culture",unlockEpoch:3,cost:{},effects:[" +7 "," +5%"," +18%"," +10%"],drawbacks:[" +8%"," -4%"],modifiers:{passive:{silver:7,culture:.5},categories:{civic:.05,industry:-.04},needsReduction:-.08,stratumDemandMod:{cleric:.18},resourceSupplyMod:{culture:.1}},active:!1},{id:"hanseatic_law",name:"",desc:"",category:"economy",unlockEpoch:3,cost:{},effects:["/ +18%"," +6 "," +20%"," +15%"],drawbacks:[" -5%"],modifiers:{buildings:{market:.18,trade_port:.18,trading_post:.12},passive:{silver:6},categories:{gather:-.05},stratumDemandMod:{merchant:.2},resourceDemandMod:{spice:.15}},active:!1},{id:"inquisition",name:"",desc:"",category:"culture",unlockEpoch:3,cost:{},effects:[" -12%"," +8%"," -20%"," -15%"],drawbacks:[" -15%"," -5%"],modifiers:{needsReduction:.12,categories:{civic:.08},buildings:{library:-.15,university:-.15},maxPop:-.05,stratumDemandMod:{scribe:-.2},resourceDemandMod:{papyrus:-.15}},active:!1},{id:"guild_monopoly",name:"",desc:"",category:"economy",unlockEpoch:3,cost:{},effects:[" +15%"," +12%"," +15%"," +12%"],drawbacks:[" +6%"," -3 "],modifiers:{categories:{industry:.15},buildings:{loom_house:.12,furniture_workshop:.12,tailor_workshop:.12,stone_tool_workshop:.12},needsReduction:-.06,passive:{silver:-3},stratumDemandMod:{artisan:.15},resourceSupplyMod:{furniture:.12}},active:!1},{id:"knight_tournament",name:"",desc:"",category:"military",unlockEpoch:3,cost:{},effects:[" +15%"," +10%"," +18%"," +12%"," +20%"],drawbacks:[" -5 "," -2 "],modifiers:{categories:{military:.15},passive:{silver:-5,food:-2,culture:2},stratumDemandMod:{knight:.18,landowner:.12},resourceDemandMod:{ale:.2}},active:!1},{id:"serfdom",name:"",desc:"",category:"social",unlockEpoch:3,cost:{},effects:[" +20%"," +15%"," -15%"," +12%"," +20%"],drawbacks:[" -10%"," +10%"," -8%"],modifiers:{categories:{gather:.2,industry:-.08},buildings:{farm:.15,large_estate:.15},maxPop:-.1,needsReduction:-.1,stratumDemandMod:{serf:-.15,landowner:.2},resourceSupplyMod:{food:.12}},active:!1},{id:"navigation_act",name:"",desc:"",category:"economy",unlockEpoch:4,cost:{},effects:["/ +25%"," +8 "," +15%"," +10%"],drawbacks:[" -6%"," +5%"],modifiers:{buildings:{dockyard:.25,trade_port:.2},passive:{silver:8},categories:{gather:-.06},needsReduction:-.05,stratumDemandMod:{navigator:.15},resourceSupplyMod:{spice:.1}},active:!1},{id:"encomienda",name:"",desc:"",category:"economy",unlockEpoch:4,cost:{},effects:[" +22%"," +6 "," -20%"," +15%"],drawbacks:[" -10%"," -8%"],modifiers:{categories:{gather:.22,civic:-.1},passive:{silver:6},maxPop:-.08,stratumDemandMod:{serf:-.2},resourceSupplyMod:{food:.15}},active:!1},{id:"joint_stock",name:"",desc:"",category:"economy",unlockEpoch:4,cost:{},effects:[" +20%"," +10 "," +25%"," +18%"," +20%"],drawbacks:[" -4 "],modifiers:{buildings:{market:.2,trade_port:.15},passive:{silver:10,food:-4},stratumDemandMod:{capitalist:.25,merchant:.18},resourceDemandMod:{spice:.2}},active:!1},{id:"press_gang",name:"",desc:"",category:"military",unlockEpoch:4,cost:{},effects:[" +18%"," +20%"," -15%"," +10%"],drawbacks:[" -8%"," -6%"],modifiers:{categories:{military:.18,civic:-.08},buildings:{dockyard:.2},maxPop:-.06,stratumDemandMod:{navigator:-.15},resourceDemandMod:{ale:.1}},active:!1},{id:"bullionism",name:"",desc:"",category:"economy",unlockEpoch:4,cost:{},effects:[" +12 "," -12%"," -20%"," +8%"],drawbacks:[" -15%"," -5%"],modifiers:{passive:{silver:12},categories:{industry:-.05},buildings:{trade_port:-.15},stratumDemandMod:{merchant:-.12},resourceDemandMod:{spice:-.2},resourceSupplyMod:{cloth:.08}},active:!1},{id:"printing_privilege",name:"",desc:"",category:"culture",unlockEpoch:4,cost:{},effects:[" +25%"," +4 "," -10%"," +15%"],drawbacks:[" -8%"],modifiers:{buildings:{printing_house:.25,publishing_house:.2},passive:{silver:4},buildings_negative:{library:-.08},stratumDemandMod:{scribe:-.1},resourceSupplyMod:{papyrus:.15}},active:!1},{id:"plantation_system",name:"",desc:"",category:"economy",unlockEpoch:4,cost:{},effects:["/ +20%"," +0.5 /"," +15%"," +20%"," +18%"],drawbacks:[" +10%"," -6%"],modifiers:{buildings:{farm:.2,large_estate:.25},passive:{spice:.5,coffee:.5},needsReduction:-.1,categories:{civic:-.06},stratumDemandMod:{landowner:.15},resourceSupplyMod:{coffee:.2,spice:.18}},active:!1},{id:"enlightened_despotism",name:"",desc:"",category:"social",unlockEpoch:5,cost:{},effects:[" +18%"," +12%"," +8%"," +15%"," +12%"],drawbacks:[" -8 "],modifiers:{categories:{civic:.18,industry:.08},buildings:{library:.12,university:.12},passive:{silver:-8,science:2},stratumDemandMod:{official:.15,engineer:.12}},active:!1},{id:"habeas_corpus",name:"",desc:"",category:"social",unlockEpoch:5,cost:{},effects:[" +15%"," +10%"," +10%"," +8%"],drawbacks:[" -8%"],modifiers:{categories:{civic:.15,military:-.08},maxPop:.1,passive:{culture:1.5},stratumDemandMod:{worker:.1,merchant:.08}},active:!1},{id:"royal_academy",name:"",desc:"",category:"culture",unlockEpoch:5,cost:{},effects:[" +30%"," +20%"," +25%"," +20%"],drawbacks:[" -8 "],modifiers:{buildings:{university:.3,library:.15,navigator_school:.15},passive:{silver:-8,science:3},stratumDemandMod:{scribe:.25},resourceDemandMod:{papyrus:.2}},active:!1},{id:"physiocracy",name:"",desc:"",category:"economy",unlockEpoch:5,cost:{},effects:[" +18%"," +20%"," +10%"," +15%"," -15%"],drawbacks:[" -8%"," -10%"],modifiers:{categories:{gather:.18,industry:-.08},buildings:{farm:.2,large_estate:.15,market:-.1},stratumDemandMod:{peasant:.1,merchant:-.15},resourceSupplyMod:{food:.15}},active:!1},{id:"patent_system",name:"",desc:"",category:"economy",unlockEpoch:5,cost:{},effects:[" +15%"," +18%"," +20%"," +10%"],drawbacks:[" -5 "],modifiers:{categories:{industry:.15},buildings:{factory:.18,steel_works:.15,printing_house:.12},passive:{silver:-5,science:1},stratumDemandMod:{engineer:.2},resourceSupplyMod:{steel:.1}},active:!1},{id:"freedom_of_press",name:"",desc:"",category:"culture",unlockEpoch:5,cost:{},effects:["/ +25%"," +10%"," +15%"," +15%"," +18%"],drawbacks:[" -5%"],modifiers:{buildings:{printing_house:.25,publishing_house:.25},categories:{civic:-.05},stratumDemandMod:{scribe:.15},resourceDemandMod:{papyrus:.18},passive:{science:2,culture:3}},active:!1},{id:"standing_army",name:"",desc:"",category:"military",unlockEpoch:5,cost:{},effects:[" +25%"," +20%"," +20%"," +15%"," +12%"],drawbacks:[" -10 "," -5 "],modifiers:{categories:{military:.25},buildings:{fortress:.2,barracks:.15},passive:{silver:-10,food:-5},stratumDemandMod:{soldier:.2},resourceDemandMod:{tools:.15,food:.12}},active:!1},{id:"social_contract",name:"",desc:"",category:"social",unlockEpoch:5,cost:{},effects:[" -15%"," +12%"," +8%"," -12%"," +8%"],drawbacks:[" -10%"],modifiers:{needsReduction:.15,categories:{civic:.12,military:-.1},maxPop:.08,passive:{culture:2},stratumDemandMod:{landowner:-.12,peasant:.08}},active:!1},{id:"factory_act",name:"",desc:"",category:"social",unlockEpoch:6,cost:{},effects:[" -12%"," +10%"," +10%"," -8%"],drawbacks:[" -8%"," -4 "],modifiers:{needsReduction:.12,maxPop:.1,categories:{industry:-.08},passive:{silver:-4},stratumDemandMod:{worker:.1},resourceDemandMod:{tools:-.08}},active:!1},{id:"corn_laws_repeal",name:"",desc:"",category:"economy",unlockEpoch:6,cost:{},effects:[" -10%"," +10%"," +12%"," -10%"," -15%"],drawbacks:[" -12%"," -10%"],modifiers:{needsReduction:.1,categories:{industry:.1,gather:-.12},buildings:{farm:-.1},stratumDemandMod:{worker:.12,landowner:-.15},resourceDemandMod:{food:-.1}},active:!1},{id:"laissez_faire",name:"",desc:"",category:"economy",unlockEpoch:6,cost:{},effects:[" +18%"," +20%"," +25%"," +20%"," +12%"],drawbacks:[" -12%"," +8%"],modifiers:{categories:{industry:.18,civic:-.12},buildings:{market:.2,factory:.15},needsReduction:-.08,stratumDemandMod:{capitalist:.25,merchant:.2},resourceSupplyMod:{steel:.12}},active:!1},{id:"trade_union_act",name:"",desc:"",category:"social",unlockEpoch:6,cost:{},effects:[" -15%"," +10%"," +18%"," -15%"],drawbacks:[" -10%"," -5 "],modifiers:{needsReduction:.15,categories:{civic:.1,industry:-.1},passive:{silver:-5},stratumDemandMod:{worker:.18,capitalist:-.15}},active:!1},{id:"railway_boom",name:"",desc:"",category:"economy",unlockEpoch:6,cost:{},effects:[" +15%"," +15%"," +10%"," +20%"," +25%"," +15%"],drawbacks:[" -12 "],modifiers:{categories:{gather:.15,industry:.15,military:.1},passive:{silver:-12},stratumDemandMod:{engineer:.2,worker:.15},resourceDemandMod:{steel:.25}},active:!1},{id:"mass_conscription",name:"",desc:"",category:"military",unlockEpoch:6,cost:{},effects:[" +30%"," +25%"," +25%"," +18%"," +20%"],drawbacks:[" -15%"," -8%"," -6 "],modifiers:{categories:{military:.3,gather:-.15,industry:-.08},buildings:{barracks:.25,training_ground:.25,fortress:.2},passive:{food:-6},stratumDemandMod:{soldier:.25},resourceDemandMod:{food:.18,tools:.2}},active:!1},{id:"public_education_act",name:"",desc:"",category:"culture",unlockEpoch:6,cost:{},effects:[" +20%"," +15%"," +10%"," +15%"," +15%"],drawbacks:[" -10 "],modifiers:{buildings:{library:.2,university:.15},categories:{civic:.15},maxPop:.1,passive:{silver:-10,science:2},stratumDemandMod:{scribe:.15},resourceDemandMod:{papyrus:.15}},active:!1},{id:"gold_standard",name:"",desc:"",category:"economy",unlockEpoch:6,cost:{},effects:["/ +20%"," +15 "," +15%"," +12%"," +10%"],drawbacks:[" -5%"],modifiers:{buildings:{market:.2,trade_port:.2},passive:{silver:15},categories:{industry:-.05},stratumDemandMod:{merchant:.15},resourceDemandMod:{spice:.12,coffee:.1}},active:!1},{id:"tax_farming",name:"",desc:"",category:"economy",unlockEpoch:1,cost:{},effects:[" +8 "," +12%"," -10%"],drawbacks:[" +10%"," -8%"],modifiers:{passive:{silver:8},needsReduction:-.1,categories:{civic:-.08},stratumDemandMod:{merchant:.12,peasant:-.1}},active:!1},{id:"war_economy",name:"",desc:"",category:"military",unlockEpoch:2,cost:{},effects:[" +35%"," +12%"," +30%"," +25%"," +15%"],drawbacks:[" -15%"," +12%"," -8 "],modifiers:{categories:{military:.35,industry:.12,civic:-.15},needsReduction:-.12,passive:{food:-8},stratumDemandMod:{soldier:.3},resourceDemandMod:{tools:.25},resourceSupplyMod:{tools:.15}},active:!1},{id:"state_granary",name:"",desc:"",category:"social",unlockEpoch:1,cost:{},effects:[" -10%"," +3 "," -8%"," +8%"],drawbacks:[" -5 "],modifiers:{needsReduction:.1,passive:{food:3,silver:-5},resourceDemandMod:{food:-.08},resourceSupplyMod:{food:.08}},active:!1},{id:"sumptuary_laws",name:"",desc:"",category:"social",unlockEpoch:1,cost:{},effects:[" -15%"," +4 "," -20%"," -18%"," -12%"],drawbacks:[" -10%"," -8%"],modifiers:{needsReduction:.15,passive:{silver:4},categories:{industry:-.1},passive_negative:{culture:-1.5},stratumDemandMod:{landowner:-.18},resourceDemandMod:{delicacies:-.2,fine_clothes:-.2,cloth:-.12}},active:!1},{id:"mercenary_contract",name:"",desc:"",category:"military",unlockEpoch:2,cost:{},effects:[" +20%"," +15%"," +12%"],drawbacks:[" -12 "],modifiers:{categories:{military:.2},passive:{silver:-12},stratumDemandMod:{soldier:.15},resourceDemandMod:{tools:.12}},active:!1},{id:"colonial_exploitation",name:"",desc:"",category:"economy",unlockEpoch:4,cost:{},effects:[" +0.6 /"," +10 "," +20%"," +25%"," +25%"],drawbacks:[" -12%"," +8%"],modifiers:{passive:{spice:.6,coffee:.6,silver:10},categories:{civic:-.12},needsReduction:-.08,stratumDemandMod:{merchant:.2},resourceSupplyMod:{spice:.25,coffee:.25}},active:!1}],qx=[{id:"stone_clan",name:"",type:"",color:"text-amber-400",desc:"",appearEpoch:0,expireEpoch:1,marketVolatility:.45,aggression:.65,wealth:350,economyTraits:{resourceBias:{food:1.3,wood:1.1,stone:.8}}},{id:"dawn_tribe",name:"",type:"",color:"text-emerald-400",desc:"",appearEpoch:0,expireEpoch:2,marketVolatility:.25,aggression:.2,wealth:420,economyTraits:{resourceBias:{food:1.4,wood:.9,plank:.7,culture:.5}}},{id:"saffron_city",name:"",type:"",color:"text-orange-300",desc:"",appearEpoch:1,expireEpoch:3,marketVolatility:.33,aggression:.45,wealth:900,economyTraits:{resourceBias:{copper:1.5,brick:1.2,spice:1.2,wood:.8}}},{id:"marble_league",name:"",type:"",color:"text-blue-300",desc:"",appearEpoch:2,expireEpoch:4,marketVolatility:.28,aggression:.35,wealth:1400,economyTraits:{resourceBias:{papyrus:1.5,culture:1.6,stone:1.1,silver:.9}}},{id:"high_kingdom",name:"",type:"",color:"text-red-400",desc:"",appearEpoch:3,expireEpoch:4,marketVolatility:.34,aggression:.6,wealth:1600,economyTraits:{resourceBias:{food:1.3,iron:1.4,tools:1.1,culture:.8}}},{id:"sunset_armada",name:"",type:"",color:"text-amber-500",desc:"",appearEpoch:4,expireEpoch:5,marketVolatility:.37,aggression:.55,wealth:1900,economyTraits:{resourceBias:{spice:1.7,plank:1.3,tools:1.2,silver:1.1}}},{id:"lumiere_republic",name:"",type:"",color:"text-purple-300",desc:"",appearEpoch:5,expireEpoch:6,marketVolatility:.26,aggression:.3,wealth:2100,economyTraits:{resourceBias:{coffee:1.5,culture:1.7,papyrus:1.3,science:1.4}}},{id:"industrial_consortium",name:"",type:"",color:"text-orange-400",desc:"",appearEpoch:6,expireEpoch:7,marketVolatility:.24,aggression:.45,wealth:2600,economyTraits:{resourceBias:{coal:1.6,steel:1.5,tools:1.4,silver:1.2}}},{id:"steppe_horde",name:"",type:"",color:"text-yellow-300",desc:"",appearEpoch:2,expireEpoch:4,marketVolatility:.42,aggression:.75,wealth:1200,culturalTraits:{militaryFocus:!0,tradingStyle:"aggressive",diplomaticModifier:-.1},economyTraits:{resourceBias:{food:1.5,iron:1.2,tools:.9,culture:.6}},specialAbilities:[{type:"raid_bonus",value:.3,desc:" +30%"},{type:"cavalry_discount",value:.2,desc:" -20%"}]},{id:"desert_caravan",name:"",type:"",color:"text-amber-200",desc:"",appearEpoch:2,expireEpoch:5,marketVolatility:.22,aggression:.25,wealth:1800,culturalTraits:{tradingStyle:"merchant",diplomaticModifier:.15,marketExpertise:!0},economyTraits:{resourceBias:{spice:2,silver:1.4,culture:1.2,food:.7}},specialAbilities:[{type:"trade_bonus",value:.25,desc:" +25%"},{type:"market_stability",value:.15,desc:" -15%"}]},{id:"jungle_empire",name:"",type:"",color:"text-green-400",desc:"",appearEpoch:1,expireEpoch:4,marketVolatility:.35,aggression:.4,wealth:1100,culturalTraits:{religiousFocus:!0,scientificAdvancement:.2,isolationist:!0},economyTraits:{resourceBias:{culture:1.8,science:1.5,papyrus:1.3,stone:1.2}},specialAbilities:[{type:"culture_bonus",value:.2,desc:" +20%"},{type:"science_bonus",value:.15,desc:" +15%"}]},{id:"mountain_clans",name:"",type:"",color:"text-slate-300",desc:"",appearEpoch:1,expireEpoch:3,marketVolatility:.38,aggression:.5,wealth:800,culturalTraits:{defensiveFocus:!0,miningExpertise:!0,isolationist:!0},economyTraits:{resourceBias:{stone:1.8,iron:1.6,copper:1.4,food:.8}},specialAbilities:[{type:"mining_bonus",value:.25,desc:" +25%"},{type:"defense_bonus",value:.3,desc:" +30%"}]},{id:"river_confederation",name:"",type:"",color:"text-cyan-400",desc:"",appearEpoch:1,expireEpoch:3,marketVolatility:.28,aggression:.3,wealth:1e3,culturalTraits:{agriculturalFocus:!0,engineeringAdvanced:!0,peacefulTrade:!0},economyTraits:{resourceBias:{food:2,papyrus:1.4,brick:1.2,culture:1.1}},specialAbilities:[{type:"food_production",value:.3,desc:" +30%"},{type:"population_growth",value:.15,desc:" +15%"}]},{id:"island_thalassocracy",name:"",type:"",color:"text-teal-300",desc:"",appearEpoch:3,expireEpoch:5,marketVolatility:.32,aggression:.4,wealth:1700,culturalTraits:{navalSupremacy:!0,tradingStyle:"maritime",explorationBonus:.25},economyTraits:{resourceBias:{plank:1.6,spice:1.5,tools:1.3,silver:1.2}},specialAbilities:[{type:"naval_bonus",value:.35,desc:" +35%"},{type:"trade_route",value:.2,desc:" +20%"}]},{id:"northern_principality",name:"",type:"",color:"text-blue-200",desc:"",appearEpoch:3,expireEpoch:5,marketVolatility:.36,aggression:.55,wealth:1400,culturalTraits:{militaryTradition:!0,resourcefulSurvival:!0,honorCode:!0},economyTraits:{resourceBias:{wood:1.7,plank:1.5,iron:1.3,food:.9}},specialAbilities:[{type:"winter_warfare",value:.25,desc:" +25%"},{type:"lumber_efficiency",value:.2,desc:" +20%"}]},{id:"silk_empire",name:"",type:"",color:"text-rose-300",desc:"",appearEpoch:2,expireEpoch:6,marketVolatility:.25,aggression:.35,wealth:2200,culturalTraits:{culturalHegemony:!0,bureaucraticEfficiency:.2,tradingStyle:"monopolistic"},economyTraits:{resourceBias:{culture:2,papyrus:1.6,silver:1.4,science:1.3}},specialAbilities:[{type:"culture_influence",value:.3,desc:" +30%"}]},{id:"nomad_confederation",name:"",type:"",color:"text-orange-200",desc:"",appearEpoch:1,expireEpoch:3,marketVolatility:.48,aggression:.7,wealth:700,culturalTraits:{mobilityFocus:!0,raidingCulture:!0,adaptability:.25},economyTraits:{resourceBias:{food:1.4,wood:1.1,tools:.9,culture:.7}},specialAbilities:[{type:"mobility_bonus",value:.4,desc:" +40%"},{type:"raid_frequency",value:.3,desc:" +30%"}]},{id:"theocratic_order",name:"",type:"",color:"text-yellow-100",desc:"",appearEpoch:3,expireEpoch:5,marketVolatility:.31,aggression:.65,wealth:1500,culturalTraits:{religiousFervor:!0,militaryDiscipline:.25,missionaryZeal:!0},economyTraits:{resourceBias:{culture:1.6,iron:1.4,tools:1.3,silver:1.2}},specialAbilities:[{type:"holy_war",value:.3,desc:" +30%"},{type:"morale_bonus",value:.25,desc:" +25%"}]},{id:"merchant_republic",name:"",type:"",color:"text-emerald-300",desc:"",appearEpoch:4,expireEpoch:6,marketVolatility:.2,aggression:.25,wealth:2400,culturalTraits:{financialExpertise:!0,tradingStyle:"capitalist",diplomaticModifier:.2},economyTraits:{resourceBias:{silver:1.8,culture:1.4,science:1.3,spice:1.2}},specialAbilities:[{type:"banking_system",value:.25,desc:" +25%"},{type:"trade_network",value:.3,desc:" +30%"}]},{id:"revolutionary_state",name:"",type:"",color:"text-red-300",desc:"",appearEpoch:5,expireEpoch:7,marketVolatility:.4,aggression:.6,wealth:1900,culturalTraits:{revolutionaryZeal:!0,massConscription:.3,ideologicalExport:!0},economyTraits:{resourceBias:{culture:1.5,science:1.4,iron:1.3,food:1.2}},specialAbilities:[{type:"conscription",value:.35,desc:" +35%"},{type:"revolutionary_fervor",value:.2,desc:" +20%"}]},{id:"eternal_city",name:"",type:"",color:"text-red-500",desc:"",appearEpoch:2,expireEpoch:4,marketVolatility:.27,aggression:.65,wealth:1600,culturalTraits:{legalTradition:!0,militaryDiscipline:.3,infrastructureFocus:!0},economyTraits:{resourceBias:{stone:1.5,iron:1.4,culture:1.3,silver:1.2}},specialAbilities:[{type:"military_trade",desc:""},{type:"high_aggression",desc:""}]},{id:"golden_crescent",name:"",type:"",color:"text-yellow-400",desc:"",appearEpoch:1,expireEpoch:3,marketVolatility:.3,aggression:.45,wealth:1100,culturalTraits:{cradle:!0,writingInventor:!0,astronomyAdvanced:!0},economyTraits:{resourceBias:{food:1.6,brick:1.5,papyrus:1.4,culture:1.3}},specialAbilities:[{type:"agricultural_trade",desc:""},{type:"cultural_focus",desc:""}]},{id:"pyramid_kingdom",name:"",type:"",color:"text-amber-300",desc:"",appearEpoch:1,expireEpoch:3,marketVolatility:.25,aggression:.35,wealth:1300,culturalTraits:{monumentBuilding:!0,divineKingship:!0,riverCivilization:!0},economyTraits:{resourceBias:{stone:1.8,food:1.5,papyrus:1.4,culture:1.6}},specialAbilities:[{type:"stone_trade",desc:""},{type:"cultural_export",desc:""}]},{id:"agora_polis",name:"",type:"",color:"text-sky-400",desc:"",appearEpoch:2,expireEpoch:4,marketVolatility:.29,aggression:.3,wealth:1200,culturalTraits:{democracyBirthplace:!0,philosophyCenter:!0,navalTradition:!0},economyTraits:{resourceBias:{culture:2,science:1.8,silver:1.3,papyrus:1.2}},specialAbilities:[{type:"knowledge_trade",desc:""},{type:"peaceful_focus",desc:""}]},{id:"sparta_militaris",name:"",type:"",color:"text-red-600",desc:"''",appearEpoch:2,expireEpoch:4,marketVolatility:.35,aggression:.85,wealth:900,culturalTraits:{militarySociety:!0,austereLiving:!0,helotSystem:!0},economyTraits:{resourceBias:{iron:1.6,food:1.3,tools:1.2,culture:.5}},specialAbilities:[{type:"iron_trade",desc:""},{type:"warlike",desc:""}]},{id:"carthago_nova",name:"",type:"",color:"text-purple-400",desc:"",appearEpoch:2,expireEpoch:4,marketVolatility:.26,aggression:.5,wealth:1800,culturalTraits:{mercantileTradition:!0,mercenaryArmy:!0,navalCommerce:!0},economyTraits:{resourceBias:{silver:1.7,spice:1.5,plank:1.4,tools:1.2}},specialAbilities:[{type:"silver_trade",desc:""},{type:"naval_commerce",desc:""}]},{id:"viking_raiders",name:"",type:"",color:"text-blue-400",desc:"",appearEpoch:3,expireEpoch:4,marketVolatility:.45,aggression:.8,wealth:1100,culturalTraits:{seafaringMastery:!0,raidingCulture:!0,explorerSpirit:!0},economyTraits:{resourceBias:{plank:1.6,iron:1.4,food:1.2,silver:1.1}},specialAbilities:[{type:"timber_trade",desc:""},{type:"raider",desc:""}]},{id:"mongol_horde",name:"",type:"",color:"text-amber-500",desc:"",appearEpoch:3,expireEpoch:5,marketVolatility:.5,aggression:.9,wealth:1600,culturalTraits:{horseLordSupremacy:!0,rapidConquest:!0,tradeProtection:!0},economyTraits:{resourceBias:{food:1.4,iron:1.5,silver:1.3,spice:1.2}},specialAbilities:[{type:"conquest_trade",desc:""},{type:"extreme_aggression",desc:""}]},{id:"shogunate",name:"",type:"",color:"text-rose-400",desc:"",appearEpoch:3,expireEpoch:6,marketVolatility:.28,aggression:.55,wealth:1400,culturalTraits:{bushidoCode:!0,isolationism:!0,craftExcellence:!0},economyTraits:{resourceBias:{iron:1.5,culture:1.4,food:1.3,tools:1.2}},specialAbilities:[{type:"craft_trade",desc:""},{type:"cultural_isolation",desc:""}]},{id:"ming_celestial",name:"",type:"",color:"text-yellow-500",desc:"",appearEpoch:3,expireEpoch:6,marketVolatility:.22,aggression:.35,wealth:2500,culturalTraits:{celestialMandate:!0,examSystem:!0,tributeSystem:!0},economyTraits:{resourceBias:{culture:1.8,science:1.5,silver:1.4,papyrus:1.3}},specialAbilities:[{type:"luxury_trade",desc:""},{type:"wealthy_empire",desc:""}]},{id:"ottoman_sublime",name:"",type:"",color:"text-emerald-400",desc:"",appearEpoch:4,expireEpoch:6,marketVolatility:.3,aggression:.6,wealth:2e3,culturalTraits:{gunpowderEmpire:!0,janissarySystem:!0,multiculturalRule:!0},economyTraits:{resourceBias:{spice:1.5,iron:1.4,culture:1.3,silver:1.3}},specialAbilities:[{type:"spice_trade",desc:""},{type:"expansionist",desc:""}]},{id:"spanish_conquistador",name:"",type:"",color:"text-orange-500",desc:"",appearEpoch:4,expireEpoch:6,marketVolatility:.35,aggression:.7,wealth:2200,culturalTraits:{conquistadorSpirit:!0,religiousMission:!0,colonialEmpire:!0},economyTraits:{resourceBias:{silver:2,spice:1.5,culture:1.2,iron:1.2}},specialAbilities:[{type:"silver_monopoly",desc:""},{type:"aggressive_colonial",desc:""}]},{id:"british_empire",name:"",type:"",color:"text-blue-500",desc:"",appearEpoch:5,expireEpoch:7,marketVolatility:.23,aggression:.55,wealth:2800,culturalTraits:{navalSupremacy:!0,parliamentarySystem:!0,industrialPioneer:!0},economyTraits:{resourceBias:{coal:1.6,steel:1.5,silver:1.4,culture:1.3}},specialAbilities:[{type:"industrial_trade",desc:""},{type:"naval_dominance",desc:""}]},{id:"prussian_eagle",name:"",type:"",color:"text-slate-400",desc:"",appearEpoch:5,expireEpoch:7,marketVolatility:.25,aggression:.7,wealth:2100,culturalTraits:{militaryPrecision:!0,bureaucraticState:!0,junkertradition:!0},economyTraits:{resourceBias:{iron:1.6,coal:1.4,tools:1.3,science:1.2}},specialAbilities:[{type:"military_industry",desc:""},{type:"disciplined_trade",desc:""}]},{id:"american_frontier",name:"",type:"",color:"text-blue-300",desc:"",appearEpoch:5,expireEpoch:7,marketVolatility:.32,aggression:.45,wealth:2300,culturalTraits:{manifestDestiny:!0,frontierSpirit:!0,democraticIdeals:!0},economyTraits:{resourceBias:{food:1.5,coal:1.4,steel:1.3,silver:1.2}},specialAbilities:[{type:"resource_trade",desc:""},{type:"moderate_expansion",desc:""}]},{id:"tsarist_empire",name:"",type:"",color:"text-indigo-400",desc:"",appearEpoch:4,expireEpoch:7,marketVolatility:.35,aggression:.6,wealth:1900,culturalTraits:{vastTerritory:!0,autocraticRule:!0,orthodoxFaith:!0},economyTraits:{resourceBias:{food:1.4,iron:1.3,wood:1.5,coal:1.2}},specialAbilities:[{type:"timber_export",desc:""},{type:"vast_resources",desc:""}]},{id:"dutch_voc",name:"",type:"",color:"text-orange-300",desc:"",appearEpoch:4,expireEpoch:6,marketVolatility:.18,aggression:.3,wealth:2600,culturalTraits:{financialInnovation:!0,tradingCompany:!0,religiousTolerance:!0},economyTraits:{resourceBias:{silver:1.8,spice:1.7,culture:1.3,science:1.2}},specialAbilities:[{type:"financial_center",desc:""},{type:"stable_market",desc:""}]},{id:"inca_empire",name:"",type:"",color:"text-yellow-600",desc:"",appearEpoch:3,expireEpoch:5,marketVolatility:.3,aggression:.4,wealth:1500,culturalTraits:{sunWorship:!0,roadNetwork:!0,laborTax:!0},economyTraits:{resourceBias:{stone:1.7,food:1.5,silver:1.4,culture:1.3}},specialAbilities:[{type:"mountain_trade",desc:""},{type:"agricultural_base",desc:""}]},{id:"aztec_empire",name:"",type:"",color:"text-teal-500",desc:"",appearEpoch:3,expireEpoch:5,marketVolatility:.38,aggression:.75,wealth:1300,culturalTraits:{sacrificialCulture:!0,flowerWars:!0,floatingGardens:!0},economyTraits:{resourceBias:{food:1.6,culture:1.5,stone:1.3,silver:1.2}},specialAbilities:[{type:"food_culture",desc:""},{type:"warrior_society",desc:""}]},{id:"byzantine_remnant",name:"",type:"",color:"text-violet-400",desc:"",appearEpoch:3,expireEpoch:5,marketVolatility:.28,aggression:.45,wealth:1700,culturalTraits:{imperialLegacy:!0,orthodoxCenter:!0,diplomaticMastery:!0},economyTraits:{resourceBias:{culture:1.7,silver:1.4,science:1.3,stone:1.2}},specialAbilities:[{type:"trade_focus",desc:""},{type:"diplomatic_focus",desc:""}]},{id:"mali_mansa",name:"",type:"",color:"text-yellow-400",desc:"",appearEpoch:3,expireEpoch:5,marketVolatility:.25,aggression:.3,wealth:2400,culturalTraits:{goldTrade:!0,islamicLearning:!0,transaharaTrade:!0},economyTraits:{resourceBias:{silver:2,culture:1.5,spice:1.3,food:1.2}},specialAbilities:[{type:"gold_trade",desc:""},{type:"peaceful_merchant",desc:""}]},{id:"mughal_splendor",name:"",type:"",color:"text-emerald-300",desc:"",appearEpoch:4,expireEpoch:6,marketVolatility:.27,aggression:.5,wealth:2300,culturalTraits:{artisticPatronage:!0,religiousSyncretism:!0,imperialGrandeur:!0},economyTraits:{resourceBias:{culture:1.8,spice:1.6,silver:1.4,stone:1.3}},specialAbilities:[{type:"luxury_export",desc:""},{type:"wealthy_stable",desc:""}]},{id:"zulu_impi",name:"",type:"",color:"text-green-500",desc:"",appearEpoch:5,expireEpoch:7,marketVolatility:.4,aggression:.8,wealth:1e3,culturalTraits:{militaryInnovation:!0,ageRegiments:!0,cattleWealth:!0},economyTraits:{resourceBias:{food:1.5,iron:1.3,tools:1.1,culture:.8}},specialAbilities:[{type:"basic_resources",desc:""},{type:"warrior_nation",desc:""}]},{id:"polish_winged",name:"",type:"",color:"text-red-200",desc:"",appearEpoch:4,expireEpoch:6,marketVolatility:.32,aggression:.55,wealth:1600,culturalTraits:{nobleRepublic:!0,cavalryTradition:!0,religiousTolerance:!0},economyTraits:{resourceBias:{food:1.4,iron:1.3,culture:1.2,wood:1.2}},specialAbilities:[{type:"cavalry_focus",desc:""},{type:"balanced_aggression",desc:""}]}],Qf=(s,o)=>{const d={0:{light:["militia","slinger"],medium:["militia","slinger"],heavy:["militia","slinger"]},1:{light:["militia","slinger","spearman"],medium:["spearman","archer","light_cavalry"],heavy:["spearman","archer","light_cavalry","swordsman"]},2:{light:["spearman","archer","light_cavalry"],medium:["heavy_infantry","crossbowman","knight"],heavy:["heavy_infantry","crossbowman","knight","swordsman"]},3:{light:["heavy_infantry","crossbowman","knight"],medium:["heavy_infantry","crossbowman","knight"],heavy:["heavy_infantry","crossbowman","knight"]},4:{light:["musketeer","dragoon"],medium:["musketeer","dragoon","cannon"],heavy:["musketeer","dragoon","cannon"]},5:{light:["rifleman","modern_infantry"],medium:["rifleman","modern_infantry","tank"],heavy:["rifleman","modern_infantry","tank","artillery"]},6:{light:["modern_infantry","tank"],medium:["modern_infantry","tank","modern_artillery"],heavy:["modern_infantry","tank","modern_artillery"]}},c=d[Math.min(s,6)]||d[0];return c[o]||c.medium},Jf=[{id:"raid",name:"",desc:"",difficulty:"",difficultyLevel:1,unitScale:"light",baseUnitCount:{min:6,max:10},enemyUnits:[],lootConfig:{food:{enemyPercent:.035,playerPercent:.025,baseMin:50},wood:{enemyPercent:.025,playerPercent:.02,baseMin:30},stone:{enemyPercent:.015,playerPercent:.012,baseMin:15},cloth:{enemyPercent:.02,playerPercent:.015,baseMin:20},silver:{enemyPercent:.045,playerPercent:.03,baseMin:80},copper:{enemyPercent:.015,playerPercent:.01,baseMin:10},plank:{enemyPercent:.01,playerPercent:.008,baseMin:8},dye:{enemyPercent:.012,playerPercent:.008,baseMin:6},ale:{enemyPercent:.018,playerPercent:.012,baseMin:10},delicacies:{enemyPercent:.01,playerPercent:.006,baseMin:5},spice:{enemyPercent:.012,playerPercent:.008,baseMin:5},coffee:{enemyPercent:.01,playerPercent:.006,baseMin:4}},loot:{food:[40,120],wood:[20,60],silver:[60,140]},influence:{win:5,lose:-4},winScore:8,loseScore:6,wealthDamage:15},{id:"assault",name:"",desc:"",difficulty:"",difficultyLevel:2,unitScale:"medium",baseUnitCount:{min:12,max:18},enemyUnits:[],requiresTech:"bronze_working",lootConfig:{food:{enemyPercent:.045,playerPercent:.03,baseMin:70},wood:{enemyPercent:.03,playerPercent:.022,baseMin:40},stone:{enemyPercent:.025,playerPercent:.018,baseMin:25},cloth:{enemyPercent:.025,playerPercent:.018,baseMin:25},iron:{enemyPercent:.035,playerPercent:.025,baseMin:30},copper:{enemyPercent:.028,playerPercent:.02,baseMin:20},tools:{enemyPercent:.025,playerPercent:.018,baseMin:15},steel:{enemyPercent:.02,playerPercent:.012,baseMin:8},coal:{enemyPercent:.022,playerPercent:.015,baseMin:12},silver:{enemyPercent:.065,playerPercent:.04,baseMin:180},plank:{enemyPercent:.02,playerPercent:.015,baseMin:15},brick:{enemyPercent:.018,playerPercent:.012,baseMin:12},dye:{enemyPercent:.015,playerPercent:.01,baseMin:8},fine_clothes:{enemyPercent:.012,playerPercent:.008,baseMin:5},ale:{enemyPercent:.02,playerPercent:.015,baseMin:12},delicacies:{enemyPercent:.015,playerPercent:.01,baseMin:8},furniture:{enemyPercent:.01,playerPercent:.006,baseMin:4},spice:{enemyPercent:.015,playerPercent:.01,baseMin:6},coffee:{enemyPercent:.012,playerPercent:.008,baseMin:5},papyrus:{enemyPercent:.012,playerPercent:.008,baseMin:6}},loot:{food:[60,160],iron:[20,50],silver:[150,240]},influence:{win:10,lose:-6},winScore:15,loseScore:10,wealthDamage:30},{id:"siege",name:"",desc:"",difficulty:"",difficultyLevel:3,unitScale:"heavy",baseUnitCount:{min:15,max:25},enemyUnits:[],requiresTech:"fortification",lootConfig:{food:{enemyPercent:.06,playerPercent:.04,baseMin:100},wood:{enemyPercent:.045,playerPercent:.03,baseMin:60},stone:{enemyPercent:.04,playerPercent:.028,baseMin:50},cloth:{enemyPercent:.038,playerPercent:.025,baseMin:40},iron:{enemyPercent:.045,playerPercent:.032,baseMin:45},copper:{enemyPercent:.038,playerPercent:.028,baseMin:35},coal:{enemyPercent:.035,playerPercent:.025,baseMin:30},steel:{enemyPercent:.03,playerPercent:.02,baseMin:20},tools:{enemyPercent:.035,playerPercent:.025,baseMin:25},plank:{enemyPercent:.032,playerPercent:.022,baseMin:25},brick:{enemyPercent:.03,playerPercent:.02,baseMin:25},dye:{enemyPercent:.025,playerPercent:.018,baseMin:15},silver:{enemyPercent:.09,playerPercent:.055,baseMin:300},fine_clothes:{enemyPercent:.028,playerPercent:.018,baseMin:15},furniture:{enemyPercent:.025,playerPercent:.015,baseMin:12},ale:{enemyPercent:.03,playerPercent:.022,baseMin:20},delicacies:{enemyPercent:.028,playerPercent:.02,baseMin:18},spice:{enemyPercent:.025,playerPercent:.018,baseMin:15},coffee:{enemyPercent:.022,playerPercent:.015,baseMin:12},papyrus:{enemyPercent:.025,playerPercent:.018,baseMin:15},science:{enemyPercent:.015,playerPercent:.008,baseMin:10},culture:{enemyPercent:.012,playerPercent:.006,baseMin:8}},loot:{food:[80,180],wood:[40,100],tools:[10,25],silver:[200,320]},influence:{win:14,lose:-10},winScore:22,loseScore:14,wealthDamage:45},{id:"naval_raid",name:"",desc:"",difficulty:"",difficultyLevel:2,unitScale:"medium",baseUnitCount:{min:8,max:14},enemyUnits:[],requiresTech:"sailing",lootConfig:{spice:{enemyPercent:.045,playerPercent:.035,baseMin:30},coffee:{enemyPercent:.04,playerPercent:.03,baseMin:25},dye:{enemyPercent:.035,playerPercent:.028,baseMin:22},fine_clothes:{enemyPercent:.03,playerPercent:.022,baseMin:18},furniture:{enemyPercent:.025,playerPercent:.018,baseMin:12},ale:{enemyPercent:.028,playerPercent:.02,baseMin:15},delicacies:{enemyPercent:.032,playerPercent:.025,baseMin:20},cloth:{enemyPercent:.03,playerPercent:.022,baseMin:25},copper:{enemyPercent:.025,playerPercent:.018,baseMin:18},iron:{enemyPercent:.022,playerPercent:.015,baseMin:15},silver:{enemyPercent:.07,playerPercent:.045,baseMin:200},papyrus:{enemyPercent:.02,playerPercent:.015,baseMin:12},tools:{enemyPercent:.018,playerPercent:.012,baseMin:10}},loot:{silver:[150,280],spice:[20,50],cloth:[20,45]},influence:{win:8,lose:-5},winScore:12,loseScore:8,wealthDamage:25},{id:"scorched_earth",name:"",desc:"",difficulty:"",difficultyLevel:3,unitScale:"heavy",baseUnitCount:{min:12,max:20},enemyUnits:[],requiresTech:"military_training",lootConfig:{food:{enemyPercent:.05,playerPercent:.035,baseMin:80},wood:{enemyPercent:.04,playerPercent:.028,baseMin:50},stone:{enemyPercent:.025,playerPercent:.018,baseMin:30},cloth:{enemyPercent:.03,playerPercent:.02,baseMin:25},dye:{enemyPercent:.02,playerPercent:.012,baseMin:12},silver:{enemyPercent:.055,playerPercent:.035,baseMin:150},coal:{enemyPercent:.025,playerPercent:.018,baseMin:18},tools:{enemyPercent:.02,playerPercent:.012,baseMin:10},ale:{enemyPercent:.025,playerPercent:.018,baseMin:15}},loot:{food:[60,140],wood:[40,90],silver:[100,200]},influence:{win:12,lose:-8},winScore:18,loseScore:12,wealthDamage:60}],Vx=[{id:"welcome",title:"",icon:"Globe",iconColor:"text-blue-400",lead:"",paragraphs:["",'""'],callouts:[{tone:"info",icon:"Lightbulb",title:"",text:""}]},{id:"market_economy",title:"",icon:"TrendingUp",iconColor:"text-emerald-400",lead:"",paragraphs:['""'],cards:[{icon:"Coins",iconColor:"text-yellow-400",title:"",text:""},{icon:"BarChart",iconColor:"text-blue-400",title:"",text:""},{icon:"ArrowUpCircle",iconColor:"text-emerald-400",title:"",text:""}],callouts:[{tone:"tip",icon:"Lightbulb",title:"",text:'""  '}]},{id:"resources",title:"",icon:"Package",iconColor:"text-yellow-400",paragraphs:[""],cards:[{icon:"Wheat",iconColor:"text-yellow-400",title:"",text:""},{icon:"Factory",iconColor:"text-blue-400",title:"",text:""},{icon:"Pickaxe",iconColor:"text-emerald-400",title:"",text:""}]},{id:"population",title:"",icon:"Users",iconColor:"text-blue-400",lead:"",paragraphs:[""],cards:[{icon:"Wheat",iconColor:"text-yellow-400",title:"",text:""},{icon:"Home",iconColor:"text-blue-400",title:"",text:""},{icon:"Users",iconColor:"text-purple-400",title:"",text:'""'},{icon:"Heart",iconColor:"text-red-400",title:"",text:""}]},{id:"technology",title:"",icon:"Cpu",iconColor:"text-purple-400",lead:"",paragraphs:[""],cards:[{icon:"BookOpen",iconColor:"text-blue-400",title:"",text:""},{icon:"TrendingUp",iconColor:"text-yellow-400",title:"",text:""},{icon:"Zap",iconColor:"text-purple-400",title:"",text:""}]},{id:"trade_diplomacy",title:"",icon:"Globe",iconColor:"text-cyan-400",lead:"",paragraphs:[""],cards:[{icon:"Handshake",iconColor:"text-emerald-400",title:"",text:""},{icon:"Flag",iconColor:"text-blue-400",title:"",text:""},{icon:"Swords",iconColor:"text-red-400",title:"",text:""}],callouts:[{tone:"tip",icon:"Lightbulb",title:"",text:""}]},{id:"government",title:"",icon:"Gavel",iconColor:"text-amber-400",lead:"",paragraphs:[""],cards:[{icon:"Scale",iconColor:"text-blue-400",title:"",text:""},{icon:"Gavel",iconColor:"text-amber-400",title:"",text:""},{icon:"AlertTriangle",iconColor:"text-red-400",title:"",text:""}],callouts:[{tone:"warning",icon:"AlertTriangle",title:"",text:'"" '}]},{id:"autosave",title:"",icon:"Save",iconColor:"text-emerald-400",paragraphs:["",""],cards:[{icon:"Clock",iconColor:"text-emerald-300",title:"",text:""},{icon:"Save",iconColor:"text-green-200",title:"",text:""},{icon:"Download",iconColor:"text-purple-300",title:"",text:""}],callouts:[{tone:"warning",icon:"AlertTriangle",title:"",text:""}]},{id:"journey",title:"",icon:"Sparkles",iconColor:"text-yellow-400",lead:"",paragraphs:[""," "," "," "," "," "],callouts:[{tone:"success",icon:"Check",title:"",text:""},{tone:"info",icon:"Gift",title:"",text:" 2 "},{tone:"tip",icon:"MessageSquare",title:"",text:""}],wikiPrompt:{text:"",buttonLabel:""},footerNote:""}],Gx=[{id:"plague_outbreak",name:"",icon:"AlertTriangle",image:null,description:"",triggerConditions:{minPopulation:80,minEpoch:1},options:[{id:"quarantine",text:"",description:"",effects:{resourcePercent:{food:-.03,silver:-.012},populationPercent:-.015,stability:-5,approval:{peasant:-10,merchant:-15},resourceDemandMod:{cloth:.2},buildingProductionMod:{market:-.2}}},{id:"pray",text:"",description:"",effects:{resourcePercent:{silver:-.012},populationPercent:-.03,stability:5,approval:{peasant:10,cleric:15},resourceDemandMod:{culture:.15}}},{id:"ignore",text:"",description:"",effects:{populationPercent:-.1,stability:-15,approval:{peasant:-20,merchant:-15},resourceDemandMod:{food:.15},buildingProductionMod:{all:-.25}}}]},{id:"merchant_caravan",name:"",icon:"Users",image:null,description:"",triggerConditions:{minEpoch:1},options:[{id:"trade",text:"",description:"",effects:{resourcePercent:{silver:-.02,delicacies:.02,furniture:.02,fine_clothes:.02,tools:.012},approval:{merchant:15},resourceDemandMod:{spice:.2},stratumDemandMod:{merchant:.15},buildingProductionMod:{market:.1}}},{id:"tax",text:"",description:"",effects:{resourcePercent:{silver:.012},approval:{merchant:-10},resourceDemandMod:{spice:.05}}},{id:"refuse",text:"",description:"",effects:{stability:-3,approval:{merchant:-15,peasant:-5},stratumDemandMod:{merchant:-.1},buildingProductionMod:{market:-.1}}}]},{id:"good_harvest",name:"",icon:"Sun",image:null,description:"",triggerConditions:{minEpoch:0},options:[{id:"store",text:"",description:"",effects:{resourcePercent:{food:.03},approval:{peasant:10},resourceDemandMod:{food:-.15},buildingProductionMod:{farm:.2}}},{id:"sell",text:"",description:"",effects:{resourcePercent:{food:.035,silver:.03},approval:{merchant:15,peasant:-5},stratumDemandMod:{merchant:.15},buildingProductionMod:{market:.15}}},{id:"celebrate",text:"",description:"",effects:{resourcePercent:{food:.02,silver:-.012},stability:10,approval:{peasant:20,merchant:5},resourceDemandMod:{ale:.25}}}]},{id:"technological_breakthrough",name:"",icon:"Lightbulb",image:null,description:"",triggerConditions:{minEpoch:2,minScience:100},options:[{id:"invest",text:"",description:"",effects:{resourcePercent:{silver:-.03,tools:-.015},science:.05,approval:{artisan:20,merchant:10},resourceDemandMod:{tools:.25},buildingProductionMod:{industry:.15}}},{id:"gradual",text:"",description:"",effects:{resourcePercent:{silver:-.012},science:.02,approval:{artisan:10},buildingProductionMod:{industry:.08}}},{id:"monopoly",text:"",description:"",effects:{resourcePercent:{silver:.012},science:.01,stability:-5,approval:{artisan:-15,merchant:-10},resourceDemandMod:{science:-.1},buildingProductionMod:{industry:-.05}}}]},{id:"natural_disaster",name:"",icon:"CloudRain",image:null,description:"",triggerConditions:{minPopulation:60},options:[{id:"relief",text:"",description:"",effects:{resourcePercent:{silver:-.025,food:-.03,wood:-.02},stability:5,approval:{peasant:20,merchant:5},resourceDemandMod:{food:.25,wood:.3},buildingProductionMod:{farm:-.3}}},{id:"rebuild",text:"",description:"",effects:{resourcePercent:{silver:-.02,wood:-.025,stone:-.02},approval:{peasant:15,artisan:10},resourceDemandMod:{wood:.4},buildingProductionMod:{farm:-.2,quarry:.1,lumber_camp:.15}}},{id:"minimal",text:"",description:"",effects:{resourcePercent:{food:-.02},stability:-10,approval:{peasant:-15,merchant:-10},resourceDemandMod:{food:.35},buildingProductionMod:{farm:-.4}}}]},{id:"stone_age_hungry_peasants",name:"",icon:"Wheat",image:null,description:"",triggerConditions:{minEpoch:0,maxEpoch:0,classConditions:{peasant:{minPop:15,maxWealth:250,minApproval:0,maxApproval:55}}},options:[{id:"share_food",text:"",description:"",effects:{resourcePercent:{food:-.015},stability:5,approval:{peasant:18}}},{id:"organize_hunt",text:"",description:"",effects:{resourcePercent:{food:.015},stability:-3,approval:{peasant:8}}},{id:"ignore_hunger",text:'""',description:"",effects:{stability:-8,approval:{peasant:-18}}}]},{id:"stone_age_elder_council",name:"",icon:"ScrollText",image:null,description:"",triggerConditions:{minEpoch:0,classConditions:{peasant:{minPop:10},cleric:{maxPop:2,maxApproval:70}}},options:[{id:"ritual_apology",text:"",description:"",effects:{stability:4,approval:{peasant:10,cleric:5},resourceDemandMod:{culture:.1},stratumDemandMod:{cleric:.08},buildingProductionMod:{lumber_camp:.05}}},{id:"gift_to_elder",text:"",description:"",effects:{resourcePercent:{silver:-.028},stability:2,approval:{peasant:-5,cleric:12},resourceDemandMod:{culture:.03},stratumDemandMod:{cleric:.1},buildingProductionMod:{stone_tool_workshop:.05}}},{id:"reject_council",text:"",description:"",effects:{stability:-6,approval:{peasant:-8,cleric:-6},resourceDemandMod:{culture:-.08},stratumDemandMod:{cleric:-.1},buildingProductionMod:{lumber_camp:-.03}}}]},{id:"bronze_age_miner_unrest",name:"",icon:"Pickaxe",image:null,description:"",triggerConditions:{minEpoch:1,classConditions:{miner:{minPop:12,maxApproval:55}}},options:[{id:"improve_safety",text:"",description:"",effects:{resourcePercent:{wood:-.06,stone:-.045},stability:6,approval:{miner:18,worker:5},resourceDemandMod:{wood:.1,stone:.08,tools:.05},stratumDemandMod:{miner:.15,worker:.08},buildingProductionMod:{copper_mine:.1,quarry:.05}}},{id:"raise_wage",text:"",description:"",effects:{resourcePercent:{silver:-.022},stability:3,approval:{miner:15},resourceDemandMod:{food:.05,tools:.03},stratumDemandMod:{miner:.12},buildingProductionMod:{copper_mine:.08}}},{id:"crackdown_miner",text:"",description:"",effects:{stability:-10,approval:{miner:-20,soldier:8},resourceDemandMod:{tools:.1,food:.05},stratumDemandMod:{miner:-.2,soldier:.15},buildingProductionMod:{copper_mine:-.15}}}]},{id:"bronze_age_merchant_boom",name:"",icon:"Coins",image:null,description:"",triggerConditions:{minEpoch:1,classConditions:{merchant:{minPop:3,minInfluenceShare:.18,minWealthShare:.18}}},options:[{id:"support_merchant",text:"",description:"",effects:{resourcePercent:{silver:.012},stability:-3,approval:{merchant:20,peasant:-6},resourceDemandMod:{spice:.15,cloth:.1,delicacies:.08},stratumDemandMod:{merchant:.2,peasant:-.05},buildingProductionMod:{market:.15,bronze_foundry:.05}}},{id:"tax_merchant",text:"",description:"",effects:{resourcePercent:{silver:.028},stability:1,approval:{merchant:-10,peasant:4},resourceDemandMod:{spice:.05,cloth:.05,delicacies:.03},stratumDemandMod:{merchant:-.08,peasant:.05},buildingProductionMod:{market:.05}}},{id:"protect_peasant",text:"",description:"",effects:{stability:4,approval:{merchant:-12,peasant:10},resourceDemandMod:{food:-.08,spice:-.1},stratumDemandMod:{merchant:-.15,peasant:.12},buildingProductionMod:{farm:.08,market:-.1}}}]},{id:"classical_scribe_salon",name:"",icon:"BookOpen",image:null,description:"",triggerConditions:{minEpoch:2,minScience:800,classConditions:{scribe:{minPop:4},scribe:{minInfluenceShare:.12,minApproval:60}}},options:[{id:"fund_academy",text:"",description:"",effects:{resourcePercent:{papyrus:-80,silver:-.02,science:.08},approval:{scribe:15},resourceDemandMod:{papyrus:.1,science:.12,culture:.08},stratumDemandMod:{scribe:.15},buildingProductionMod:{school:.1,library:.08}}},{id:"guide_public_opinion",text:"",description:"",effects:{stability:6,approval:{scribe:5,peasant:6},resourceDemandMod:{culture:.08},stratumDemandMod:{scribe:.08,peasant:.05},buildingProductionMod:{market:.03}}},{id:"limit_discussion",text:"",description:"",effects:{stability:3,approval:{scribe:-12,landowner:8},resourceDemandMod:{culture:-.1,science:-.08},stratumDemandMod:{scribe:-.15,landowner:.1},buildingProductionMod:{library:-.08}}}]},{id:"classical_landowner_pressure",name:"",icon:"Castle",image:null,description:"",triggerConditions:{minEpoch:2,classConditions:{landowner:{minWealthShare:.25,minInfluenceShare:.2},peasant:{maxApproval:55}}},options:[{id:"grant_privileges",text:"",description:"",effects:{stability:4,approval:{landowner:18,peasant:-10,serf:-8},resourceDemandMod:{delicacies:.12,fine_clothes:.1,furniture:.08},stratumDemandMod:{landowner:.2,peasant:-.12,serf:-.1},buildingProductionMod:{farm:-.08}}},{id:"balance_reform",text:"",description:"",effects:{stability:-4,approval:{landowner:-12,peasant:12},resourceDemandMod:{tools:.08,food:.06},stratumDemandMod:{landowner:-.15,peasant:.15},buildingProductionMod:{farm:.08}}},{id:"stand_with_people",text:"",description:"",effects:{stability:-10,approval:{landowner:-22,peasant:20},resourceDemandMod:{food:.12,tools:.15},stratumDemandMod:{landowner:-.25,peasant:.22},buildingProductionMod:{farm:.15}}}]},{id:"feudal_knight_parade",name:"",icon:"Shield",image:null,description:"",triggerConditions:{minEpoch:3,classConditions:{knight:{minPop:3,minInfluenceShare:.15},soldier:{maxApproval:70}}},options:[{id:"hold_tournament",text:"",description:"",effects:{resourcePercent:{food:-.05,silver:-.022},stability:6,approval:{knight:15,soldier:8,peasant:4},resourceDemandMod:{food:.08,ale:.12,cloth:.1},stratumDemandMod:{knight:.18,soldier:.1,peasant:.06},buildingProductionMod:{market:.08,brewery:.1}}},{id:"praise_soldiers",text:"",description:"",effects:{stability:3,approval:{soldier:15,knight:-8},resourceDemandMod:{food:.05,tools:.08},stratumDemandMod:{soldier:.12,knight:-.1},buildingProductionMod:{training_ground:.1}}},{id:"limit_knight_power",text:"",description:"",effects:{stability:-8,approval:{knight:-20,landowner:-10},resourceDemandMod:{tools:-.1,furniture:-.05},stratumDemandMod:{knight:-.18,landowner:-.08,official:.1}}}]},{id:"feudal_cleric_scandal",name:"",icon:"Cross",image:null,description:"",triggerConditions:{minEpoch:3,classConditions:{cleric:{minWealthShare:.15,maxApproval:80}}},options:[{id:"reform_monastery",text:"",description:"",effects:{resourcePercent:{silver:.03},stability:4,approval:{cleric:-10,peasant:8},resourceDemandMod:{delicacies:-.12,fine_clothes:-.1},stratumDemandMod:{cleric:-.15,peasant:.1},buildingProductionMod:{church:-.2,farm:.08}}},{id:"cover_up",text:"",description:"",effects:{stability:-6,approval:{cleric:10,peasant:-12},resourceDemandMod:{delicacies:.1,fine_clothes:.08},stratumDemandMod:{cleric:.15,peasant:-.1},buildingProductionMod:{church:.12,farm:-.05}}},{id:"tax_church",text:"",description:'""',effects:{resourcePercent:{silver:.02},stability:-2,approval:{cleric:-15,peasant:5},resourceDemandMod:{silver:.08,delicacies:-.05},stratumDemandMod:{cleric:-.12,peasant:.08,official:.06},buildingProductionMod:{church:-.1}}}]},{id:"age_of_exploration_merchant_monopoly",name:"",icon:"Ship",image:null,description:"",triggerConditions:{minEpoch:4,classConditions:{merchant:{minInfluenceShare:.25,minWealthShare:.25}}},options:[{id:"charter_company",text:"",description:"",effects:{resourcePercent:{silver:.045},stability:3,approval:{merchant:20,peasant:-8,worker:-6},resourceDemandMod:{spice:.18,cloth:.15,delicacies:.12},stratumDemandMod:{merchant:.22,peasant:-.1,worker:-.08},buildingProductionMod:{market:.2,trade_port:.15,farm:-.05}}},{id:"break_monopoly",text:"",description:"",effects:{stability:-5,approval:{merchant:-15,peasant:8,worker:6},resourceDemandMod:{spice:.08,cloth:.06,delicacies:.05},stratumDemandMod:{merchant:-.18,peasant:.1,worker:.08},buildingProductionMod:{market:.12,industry:.08}}},{id:"raise_tariff",text:"",description:"",effects:{resourcePercent:{silver:.035},stability:-2,approval:{merchant:-10},resourceDemandMod:{spice:-.1,cloth:-.08,delicacies:-.06},stratumDemandMod:{merchant:-.12},buildingProductionMod:{trade_port:-.15,market:-.1}}}]},{id:"age_of_exploration_colonial_unrest",name:"",icon:"Globe2",image:null,description:"",triggerConditions:{minEpoch:4,classConditions:{worker:{minPop:20,maxApproval:55},miner:{maxApproval:55}}},options:[{id:"send_commissioner",text:"",description:"",effects:{resourcePercent:{silver:-.022},stability:5,approval:{worker:10,miner:10},resourceDemandMod:{food:.08,tools:.06},stratumDemandMod:{worker:.12,miner:.1,official:.08},buildingProductionMod:{mine:.1,bronze_foundry:.05}}},{id:"use_force",text:"",description:"",effects:{stability:-12,approval:{worker:-20,miner:-20,soldier:10},resourceDemandMod:{tools:.15,food:.1},stratumDemandMod:{worker:-.25,miner:-.22,soldier:.18},buildingProductionMod:{mine:-.3,training_ground:.15}}},{id:"cut_tax",text:"",description:"",effects:{resourcePercent:{silver:-.012},stability:3,approval:{worker:8,miner:8,merchant:6},resourceDemandMod:{food:.06,tools:.05},stratumDemandMod:{worker:.1,miner:.08,merchant:.08},buildingProductionMod:{mine:.12,trade_port:.05}}}]},{id:"enlightenment_pamphlet_storm",name:"",icon:"FileText",image:null,description:"",triggerConditions:{minEpoch:5,classConditions:{scribe:{minPop:5},scribe:{minInfluenceShare:.18,minApproval:70}}},options:[{id:"allow_debate",text:"",description:"",effects:{resourcePercent:{science:.08,culture:.08},stability:-6,approval:{scribe:18,peasant:4},resourceDemandMod:{papyrus:.25,culture:.15,science:.12},stratumDemandMod:{scribe:.2,peasant:.08,merchant:.05},buildingProductionMod:{school:.1,library:.15,tavern:.08}}},{id:"censor_print",text:"",description:"",effects:{stability:4,approval:{scribe:-12,cleric:8}}},{id:"coopt_scribes",text:"",description:"",effects:{resourcePercent:{silver:-.025},stability:5,approval:{scribe:10,official:6}}}]},{id:"enlightenment_coffeehouse_circle",name:"",icon:"Coffee",image:null,description:"",triggerConditions:{minEpoch:5,classConditions:{merchant:{minInfluenceShare:.18},engineer:{minInfluenceShare:.12}}},options:[{id:"support_innovation_club",text:"",description:"",effects:{resourcePercent:{silver:-.028,science:.08},approval:{engineer:15,merchant:10},resourceDemandMod:{coffee:.3,delicacies:.15,papyrus:.1,science:.12},stratumDemandMod:{merchant:.18,engineer:.15,scribe:.12,official:.05},buildingProductionMod:{coffee_house:.2,tavern:.1,market:.08}}},{id:"monitor_circle",text:"",description:"",effects:{stability:3,approval:{official:6,merchant:-6}}},{id:"tax_coffee",text:"",description:"",effects:{resourcePercent:{silver:.02},approval:{merchant:-8,engineer:-5,peasant:3}}}]},{id:"industrial_general_strike",name:"",icon:"Hammer",image:null,description:"",triggerConditions:{minEpoch:6,classConditions:{worker:{minPop:30,maxApproval:50,maxWealthDelta:5}}},options:[{id:"agree_partial",text:"",description:"",effects:{resourcePercent:{silver:-.012},stability:6,approval:{worker:20,capitalist:-8},resourceDemandMod:{food:.1,cloth:.08,ale:.05},stratumDemandMod:{worker:.15,capitalist:-.1,official:.08},buildingProductionMod:{textile_mill:.12,industry:.1,market:.05}}},{id:"bring_in_replacements",text:"",description:"",effects:{stability:-10,approval:{worker:-20,peasant:-6,capitalist:10}}},{id:"negotiate_commission",text:"",description:"",effects:{stability:4,approval:{worker:12,capitalist:-4,official:6}}}]},{id:"industrial_capitalist_boom",name:"",icon:"Briefcase",image:null,description:"",triggerConditions:{minEpoch:6,classConditions:{capitalist:{minWealthShare:.3,minInfluenceShare:.22,minWealthDelta:40}}},options:[{id:"encourage_investment",text:"",description:"",effects:{resourcePercent:{science:.06},stability:4,approval:{capitalist:18,worker:-6},resourceDemandMod:{coffee:.2,delicacies:.25,fine_clothes:.18,furniture:.15,steel:.1},stratumDemandMod:{capitalist:.22,merchant:.15,engineer:.12,worker:-.08},buildingProductionMod:{steel_foundry:.18,coffee_house:.1,market:.12}}},{id:"tax_windfall",text:"",description:"",effects:{resourcePercent:{silver:.045},stability:-5,approval:{capitalist:-20,worker:10,peasant:6}}},{id:"fund_welfare",text:"",description:"",effects:{resourcePercent:{silver:-.025},stability:8,approval:{worker:16,capitalist:4}}}]},{id:"comet_sighted",name:"",icon:"Sparkles",image:null,description:"",triggerConditions:{minEpoch:1},options:[{id:"divine_omen",text:"",description:"",effects:{stability:10,approval:{cleric:15,peasant:10,scribe:-10}}},{id:"scientific_phenomenon",text:"",description:"",effects:{resourcePercent:{science:.08},approval:{scribe:15,cleric:-10}}},{id:"ignore_comet",text:"",description:"",effects:{stability:-5,approval:{peasant:-5}}}]},{id:"inventor_plea",name:"",icon:"Lightbulb",image:null,description:"",triggerConditions:{minEpoch:5,classConditions:{engineer:{minPop:5},capitalist:{minPop:2}}},options:[{id:"fund_invention",text:"",description:"",effects:{resourcePercent:{silver:-.012,iron:-.025,tools:-.06,science:.08},approval:{engineer:20,capitalist:15,scribe:10}}},{id:"limited_support",text:"",description:"",effects:{resourcePercent:{silver:-.025,wood:-.02,science:.08},approval:{engineer:10,capitalist:5}}},{id:"reject_invention",text:"",description:"",effects:{approval:{engineer:-15,scribe:-5,capitalist:-5}}}]},{id:"great_flood",name:"",icon:"Waves",image:null,description:"",triggerConditions:{minPopulation:30},options:[{id:"organize_rescue",text:"",description:"",effects:{resourcePercent:{silver:-.03,food:-.05,wood:-.02},populationPercent:-.012,stability:10,approval:{peasant:25,official:10}}},{id:"build_dams",text:"",description:"",effects:{resourcePercent:{stone:-.03,wood:-.025},populationPercent:-.015,stability:-5,approval:{peasant:-15,capitalist:10,landowner:5}}},{id:"let_it_be",text:"",description:"",effects:{populationPercent:-.03,stability:-15,approval:{peasant:-30,cleric:-10}}}]},{id:"stone_age_new_water",name:"",icon:"Waves",image:null,description:"",triggerConditions:{minEpoch:0,maxEpoch:0,resourcePercent:{food:{max:100}}},options:[{id:"develop_water_source",text:"",description:"",effects:{resourcePercent:{wood:-.022,food:.03},maxPop:8,stability:5,approval:{peasant:12}}},{id:"secret_protection",text:"",description:"",effects:{resourcePercent:{food:.015},stability:-3,approval:{peasant:-5,cleric:5}}},{id:"ignore_water_source",text:"",description:"",effects:{stability:-5,approval:{peasant:-8}}}]},{id:"stone_age_stranger_footprints",name:"",icon:"Users",image:null,description:"",triggerConditions:{minEpoch:0,maxEpoch:0,minPopulation:15},options:[{id:"ambush_expel",text:"",description:"",effects:{resourcePercent:{food:-.012},approval:{soldier:10}},randomEffects:[{chance:.25,effects:{populationPercent:-.01,stability:-5,approval:{peasant:-5}}}]},{id:"leave_gifts",text:"",description:"",effects:{resourcePercent:{food:-.015,wood:-.012},culture:.02,stability:5,approval:{peasant:8,cleric:5}}},{id:"increase_patrol",text:"",description:"",effects:{resourcePercent:{food:-.012},stability:-2,approval:{soldier:5}}}]},{id:"stone_age_harsh_winter",name:"",icon:"CloudRain",image:null,description:"",triggerConditions:{minEpoch:0,maxEpoch:0,minPopulation:20,resourcePercent:{food:{max:150}}},options:[{id:"distribute_rations",text:"",description:"",effects:{resourcePercent:{food:-.05,wood:-.06},populationPercent:-.015,stability:10,approval:{peasant:15}}},{id:"encourage_hunting",text:"",description:"",effects:{populationPercent:-.03,resourcePercent:{food:.035},stability:-8,approval:{soldier:12,peasant:-15}}},{id:"sacrifice_weak",text:"",description:"",effects:{populationPercent:-.012,stability:-20,approval:{peasant:-30,cleric:-15}}}]},{id:"stone_age_unexpected_discovery",name:"",icon:"Gem",image:null,description:"",triggerConditions:{minEpoch:0,maxEpoch:0,resourcePercent:{science:{max:50}}},options:[{id:"research_stones",text:"",description:"",effects:{resourcePercent:{wood:-.012,science:.05},stability:3,approval:{artisan:15,peasant:5}}},{id:"worship_stones",text:"",description:"",effects:{resourcePercent:{culture:.04},stability:8,approval:{cleric:20,artisan:-8}}},{id:"disregard_stones",text:"",description:"",effects:{stability:-3,approval:{peasant:-5}}}]},{id:"stone_age_tribal_legend",name:"",icon:"BookOpen",image:null,description:"",triggerConditions:{minEpoch:0,maxEpoch:0,minPopulation:25,minStability:50,resourcePercent:{science:{max:100}}},options:[{id:"send_expedition",text:"",description:"",effects:{resourcePercent:{food:-.012,science:.08,culture:.07},populationPercent:-.015,stability:5,approval:{soldier:15}}},{id:"forbid_exploration",text:"",description:"",effects:{resourcePercent:{culture:-.2},stability:3,approval:{soldier:-10,peasant:-5}}},{id:"encourage_legends",text:"",description:"",effects:{resourcePercent:{culture:.06},stability:6,approval:{cleric:12,scribe:8}}}]},{id:"bronze_age_bronze_vein",name:"",icon:"Gem",image:null,description:"",triggerConditions:{minEpoch:1,maxEpoch:1,minPopulation:30},options:[{id:"immediate_mine",text:"",description:"",effects:{resourcePercent:{copper:.15,iron:.012,wood:-.015},populationPercent:-.015,stability:-5,approval:{miner:15,peasant:-8}}},{id:"research_mining",text:"",description:"",effects:{resourcePercent:{science:.06,silver:-.012},approval:{scribe:10,miner:5}}},{id:"secret_mine",text:"",description:"",effects:{resourcePercent:{copper:.05,iron:.016},stability:-3,approval:{peasant:-5}}}]},{id:"bronze_age_merchant_plea",name:"",icon:"Handshake",image:null,description:"",triggerConditions:{minEpoch:1,maxEpoch:1,minPopulation:40,classConditions:{merchant:{minPop:1}}},options:[{id:"send_escort",text:"",description:"",effects:{resourcePercent:{silver:.012,food:-.015},populationPercent:-.006,stability:5,approval:{merchant:20,soldier:10}}},{id:"provide_aid",text:"",description:"",effects:{resourcePercent:{food:-.02,wood:-.015},stability:3,approval:{merchant:10,peasant:5}}},{id:"refuse_aid",text:"",description:"",effects:{stability:-5,approval:{merchant:-15,soldier:-5}}}]},{id:"bronze_age_drought",name:"",icon:"Droplets",image:null,description:"",triggerConditions:{minEpoch:1,maxEpoch:1,minPopulation:50,resourcePercent:{food:{max:200}}},options:[{id:"build_irrigation",text:"",description:"",effects:{resourcePercent:{wood:-.06,stone:-.03,food:.02},stability:8,approval:{peasant:20,worker:10}}},{id:"intensive_hunt",text:"/",description:"",effects:{resourcePercent:{food:.04},populationPercent:-.025,stability:-5,approval:{peasant:-10,soldier:10}}},{id:"seek_tribute",text:"",description:"",effects:{resourcePercent:{food:.05},stability:-10,approval:{soldier:15,peasant:-15}}}]},{id:"bronze_age_new_priest",name:"",icon:"Cross",image:null,description:"",triggerConditions:{minEpoch:1,maxEpoch:1,minPopulation:35,classConditions:{cleric:{minPop:1}}},options:[{id:"endorse_priest",text:"",description:"",effects:{resourcePercent:{culture:.08},stability:10,approval:{cleric:20,peasant:15,scribe:-10}}},{id:"limit_power",text:"",description:"",effects:{stability:-5,approval:{cleric:-15,peasant:-5,landowner:5}}},{id:"challenge_divinity",text:"",description:"",effects:{resourcePercent:{science:.05},stability:-15,approval:{cleric:-25,peasant:-20,scribe:15}}}]},{id:"bronze_age_skirmish",name:"",icon:"Swords",image:null,description:"",triggerConditions:{minEpoch:1,maxEpoch:1,minPopulation:60,classConditions:{soldier:{minPop:2}}},options:[{id:"declare_war",text:"",description:"",effects:{stability:-10,approval:{soldier:20,peasant:-10}}},{id:"send_emissary",text:"",description:"",effects:{resourcePercent:{silver:-.012,food:-.015},stability:5,approval:{merchant:10,peasant:8}}},{id:"fortify_border",text:"",description:"",effects:{resourcePercent:{wood:-.02,stone:-.015},stability:-3,approval:{soldier:5,peasant:-5}}}]},{id:"classical_philosopher_challenge",name:"",icon:"BookOpen",image:null,description:"",triggerConditions:{minEpoch:2,maxEpoch:2,minPopulation:80,classConditions:{scribe:{minPop:2},cleric:{minPop:2}}},options:[{id:"embrace_philosophy",text:"",description:"",effects:{resourcePercent:{science:.25,culture:.15},approval:{scribe:20,cleric:-15,peasant:-5}}},{id:"public_debate",text:"",description:"",effects:{resourcePercent:{science:.08,culture:.06},stability:-8,approval:{scribe:10,cleric:-5}}},{id:"exile_philosopher",text:"",description:"",effects:{stability:5,approval:{cleric:15,landowner:10,scribe:-25}}}]},{id:"classical_written_law",name:"",icon:"Gavel",image:null,description:"",triggerConditions:{minEpoch:2,maxEpoch:2,minPopulation:35,classConditions:{official:{minPop:3},merchant:{minPop:5}}},options:[{id:"establish_just_code",text:"",description:"",effects:{resourcePercent:{silver:-.025,papyrus:-50},stability:15,approval:{official:15,merchant:10,peasant:5,landowner:-10}}},{id:"favor_elite_code",text:"",description:"",effects:{resourcePercent:{silver:-.012},stability:-5,approval:{landowner:20,official:5,merchant:-15,peasant:-10}}},{id:"maintain_oral_tradition",text:"",description:"",effects:{stability:-10,approval:{official:-5,merchant:-10,peasant:-5}}}]},{id:"classical_artistic_patronage",name:"",icon:"Palette",image:null,description:"",triggerConditions:{minEpoch:2,maxEpoch:2,buildingConditions:{amphitheater:{min:1}}},options:[{id:"fund_grand_performance",text:"",description:"",effects:{resourcePercent:{silver:-.03,culture:.2},stability:8,approval:{cleric:15,scribe:10,peasant:5}}},{id:"offer_limited_support",text:"",description:"",effects:{resourcePercent:{silver:-.012,culture:.06},approval:{cleric:5,scribe:5}}},{id:"dismiss_as_frivolous",text:"",description:"",effects:{resourcePercent:{culture:-.5},approval:{scribe:-10,cleric:-5}}}]},{id:"classical_aqueduct_proposal",name:"",icon:"Waves",image:null,description:"",triggerConditions:{minEpoch:2,maxEpoch:2,minPopulation:40},options:[{id:"build_aqueduct",text:"",description:"",effects:{resourcePercent:{silver:-.05,stone:-.08,brick:-.06},maxPop:25,stability:15,approval:{peasant:20,worker:15,official:10}}},{id:"build_smaller_version",text:"",description:"",effects:{resourcePercent:{silver:-.025,stone:-.08},maxPop:10,stability:5,approval:{peasant:8,worker:5}}},{id:"dig_more_wells",text:"",description:"",effects:{resourcePercent:{wood:-.015},stability:-5,approval:{peasant:-5,scribe:-8}}}]},{id:"feudal_guild_charter",name:"",icon:"Gavel",image:null,description:"",triggerConditions:{minEpoch:3,maxEpoch:3,classConditions:{artisan:{minPop:10,minInfluenceShare:.1},merchant:{minPop:5}}},options:[{id:"grant_charter",text:"",description:"",effects:{resourcePercent:{culture:.08},stability:5,approval:{artisan:20,merchant:-10}}},{id:"regulate_guilds",text:"",description:"",effects:{resourcePercent:{silver:.02},stability:-3,approval:{artisan:-8,official:10}}},{id:"suppress_guilds",text:"",description:"",effects:{stability:-8,approval:{artisan:-25,merchant:15}}}]},{id:"feudal_crusade_call",name:"",icon:"Cross",image:null,description:"",triggerConditions:{minEpoch:3,maxEpoch:3,classConditions:{knight:{minPop:2},cleric:{minPop:3}}},options:[{id:"fund_crusade",text:"",description:"",effects:{resourcePercent:{silver:-.04,food:-.015},populationPercent:-.01,approval:{knight:25,cleric:20,merchant:-15}}},{id:"offer_prayers",text:"",description:"",effects:{stability:-5,approval:{cleric:10,knight:-10}}},{id:"denounce_call",text:"",description:"",effects:{stability:-10,approval:{cleric:-20,knight:-15,merchant:15,scribe:10}}}]},{id:"feudal_levy_dispute",name:"",icon:"ShieldAlert",image:null,description:"",triggerConditions:{minEpoch:3,maxEpoch:3,classConditions:{landowner:{minPop:3,minInfluenceShare:.15},knight:{minPop:1}}},options:[{id:"force_compliance",text:"",description:"",effects:{stability:-15,approval:{landowner:-25,soldier:15,official:10}}},{id:"accept_scutage",text:"",description:"",effects:{resourcePercent:{silver:.045},stability:-5,approval:{landowner:15,knight:-10}}},{id:"forgive_levy",text:"",description:"",effects:{stability:5,approval:{landowner:20,knight:-15,official:-10}}}]},{id:"feudal_university_founding",name:"",icon:"Landmark",image:null,description:"",triggerConditions:{minEpoch:3,maxEpoch:3,minPopulation:50,classConditions:{scribe:{minPop:5},cleric:{minPop:5}}},options:[{id:"grant_university_charter",text:"",description:"",effects:{resourcePercent:{silver:-.012,science:.3,culture:.2},approval:{scribe:25,cleric:15,landowner:-10}}},{id:"church_control",text:"",description:"",effects:{resourcePercent:{culture:.15},stability:5,approval:{cleric:20,scribe:-15,landowner:5}}},{id:"reject_university",text:"",description:"",effects:{approval:{scribe:-20,cleric:-10}}}]},{id:"feudal_plague_doctor",name:"",icon:"Heart",image:null,description:"",triggerConditions:{minEpoch:3,maxEpoch:4,minPopulation:40},options:[{id:"hire_doctor",text:"",description:"",effects:{resourcePercent:{silver:-.02,science:.06},populationPercent:.03,stability:5,approval:{peasant:15,cleric:-10}}},{id:"let_him_practice",text:"",description:"",effects:{populationPercent:.015,stability:-3,approval:{peasant:5,merchant:5}}},{id:"expel_as_charlatan",text:"",description:"",effects:{populationPercent:-.03,stability:-8,approval:{peasant:-15,cleric:15}}}]},{id:"exploration_new_world",name:"",icon:"Globe",image:null,description:"",triggerConditions:{minEpoch:4,maxEpoch:4,classConditions:{navigator:{minPop:3}}},options:[{id:"fund_colonial_expedition",text:"",description:"",effects:{resourcePercent:{silver:-.012,food:-.02,plank:-200,tools:-.012},populationPercent:-.012,approval:{navigator:25,merchant:20,soldier:15}}},{id:"establish_trading_post",text:"",description:"",effects:{resourcePercent:{silver:-.03,plank:-80},populationPercent:-.015,approval:{navigator:15,merchant:15}}},{id:"sell_maps",text:"",description:"",effects:{resourcePercent:{silver:.02},approval:{navigator:-25,merchant:-10},nationRelation:{random:15},nationWealth:{random:200}}}]},{id:"exploration_renaissance_artist",name:"",icon:"Palette",image:null,description:"",triggerConditions:{minEpoch:4,maxEpoch:5,classConditions:{scribe:{minPop:8},artisan:{minPop:10}}},options:[{id:"patronize_masterpiece",text:"",description:"",effects:{resourcePercent:{silver:-.05,culture:.35,science:.08},stability:10,approval:{scribe:20,artisan:15,cleric:10}}},{id:"modest_commission",text:"",description:"",effects:{resourcePercent:{silver:-.022,culture:.08},approval:{scribe:8,artisan:5}}},{id:"dismiss_artist",text:"",description:"",effects:{approval:{scribe:-15,artisan:-10}}}]},{id:"exploration_banking_family",name:"",icon:"Landmark",image:null,description:"",triggerConditions:{minEpoch:4,maxEpoch:5,classConditions:{merchant:{minPop:10,minWealthShare:.2},capitalist:{minPop:1}}},options:[{id:"charter_private_bank",text:"",description:"",effects:{resourcePercent:{silver:.03},stability:-5,approval:{merchant:25,capitalist:20,landowner:-10}}},{id:"establish_state_bank",text:"",description:"",effects:{resourcePercent:{silver:-.04},stability:10,approval:{official:20,merchant:-15,capitalist:-10}}},{id:"forbid_banking",text:"",description:"",effects:{stability:-8,approval:{merchant:-20,capitalist:-15,cleric:15}}}]},{id:"exploration_mercenary_offer",name:"",icon:"Swords",image:null,description:"",triggerConditions:{minEpoch:4,maxEpoch:5,classConditions:{soldier:{minPop:10}}},options:[{id:"hire_mercenaries",text:"",description:"",effects:{resourcePercent:{silver:-.05},stability:-8,approval:{soldier:20,knight:-10}}},{id:"one_time_contract",text:"",description:"",effects:{resourcePercent:{silver:-.012},approval:{soldier:10}}},{id:"reject_offer",text:"",description:"",effects:{approval:{soldier:-5,knight:10}}}]},{id:"exploration_gunpowder_plot",name:"",icon:"Bomb",image:null,description:"",triggerConditions:{minEpoch:4,maxEpoch:5,minStability:0,maxStability:40},options:[{id:"raid_hideout",text:"",description:"",effects:{stability:15,approval:{official:15,landowner:10}}},{id:"public_warning",text:"",description:"",effects:{resourcePercent:{silver:-.02},stability:5,approval:{peasant:-8,merchant:-5}}},{id:"ignore_threat",text:"",description:"",effects:{},randomEffects:[{chance:.25,effects:{populationPercent:-.01,stability:-20,approval:{peasant:-10}}}]}]}],Fx=[{id:"bread_price_crisis",name:"",icon:"ShoppingCart",image:null,description:'""',triggerConditions:{minEpoch:3,minPopulation:50,classConditions:{peasant:{maxApproval:50},merchant:{minWealthShare:.2}}},options:[{id:"price_control",text:'""',description:"",effects:{resourcePercent:{silver:-.012},stability:8,approval:{peasant:20,worker:15,merchant:-25,capitalist:-15},resourceDemandMod:{food:-.1},buildingProductionMod:{market:-.15,factory:-.1,farm:-.1}}},{id:"open_granary",text:"",description:"",effects:{resourcePercent:{food:-.015,silver:-.012},stability:15,approval:{peasant:25,worker:20,merchant:5},resourceDemandMod:{food:-.15}}},{id:"let_them_eat_cake",text:'""',description:"",effects:{stability:-20,approval:{peasant:-35,worker:-30,merchant:10,landowner:5},stratumDemandMod:{peasant:-.2,worker:-.2},buildingProductionMod:{all:-.2}},randomEffects:[{chance:.4,effects:{populationPercent:-.01,stability:-25}}]}]},{id:"worker_peasant_alliance",name:"",icon:"Users",image:null,description:"",triggerConditions:{minEpoch:5,classConditions:{worker:{minPop:20,maxApproval:55},peasant:{maxApproval:55},capitalist:{minWealthShare:.25}}},options:[{id:"allow_mutual_aid",text:"",description:"",effects:{stability:-8,approval:{worker:20,peasant:18,capitalist:-20,landowner:-15},stratumDemandMod:{worker:.1,peasant:.1}}},{id:"divide_and_rule",text:"",description:"",effects:{resourcePercent:{silver:-.04},stability:5,approval:{worker:-10,peasant:-10,official:8},buildingProductionMod:{farm:-.05,factory:-.05}}},{id:"preemptive_reform",text:"",description:"",effects:{resourcePercent:{silver:-.03},stability:10,approval:{worker:15,peasant:12,capitalist:-12,official:5},stratumDemandMod:{worker:.05,peasant:.05}}}]},{id:"land_reform_proposal",name:"",icon:"Map",image:null,description:'""',triggerConditions:{minEpoch:2,classConditions:{landowner:{minWealthShare:.3,minInfluenceShare:.25},peasant:{maxApproval:50,maxWealthShare:.1}}},options:[{id:"support_reform",text:"",description:"",effects:{resourcePercent:{food:.05},stability:-20,approval:{peasant:35,worker:15,landowner:-40,knight:-20,official:-10},stratumDemandMod:{peasant:.2,landowner:-.3},buildingProductionMod:{farm:.15,large_estate:-.3}}},{id:"compromise_reform",text:"",description:"",effects:{stability:-5,approval:{peasant:12,landowner:-15,official:5},stratumDemandMod:{peasant:.05,landowner:-.1},buildingProductionMod:{farm:.05,large_estate:-.1}}},{id:"reject_reform",text:'""',description:"",effects:{stability:5,approval:{peasant:-25,worker:-15,landowner:25,knight:10},buildingProductionMod:{farm:-.1}},randomEffects:[{chance:.3,effects:{populationPercent:-.03,stability:-15,approval:{peasant:-20}}}]}]},{id:"progressive_tax_debate",name:"",icon:"Coins",image:null,description:'""""',triggerConditions:{minEpoch:4,minPopulation:100,classConditions:{capitalist:{minWealthShare:.2},merchant:{minWealthShare:.15}}},options:[{id:"progressive_tax",text:"",description:"",effects:{resourcePercent:{silver:.05},stability:-8,approval:{peasant:20,worker:18,merchant:-20,capitalist:-30,landowner:-15},stratumDemandMod:{peasant:.1,worker:.08,capitalist:-.15,landowner:-.1}}},{id:"poll_tax",text:"",description:"",effects:{resourcePercent:{silver:.012},stability:-15,approval:{peasant:-25,worker:-20,merchant:15,capitalist:20}}},{id:"tax_compromise",text:"",description:"",effects:{resourcePercent:{silver:.045},stability:-3,approval:{peasant:5,worker:5,merchant:-8,capitalist:-10},stratumDemandMod:{peasant:.05,worker:.04,capitalist:-.08,landowner:-.05}}}]},{id:"slave_gladiator_revolt",name:"",icon:"Swords",image:null,description:'""',triggerConditions:{minEpoch:2,maxEpoch:3,minPopulation:40,classConditions:{serf:{minPop:30,maxApproval:40},peasant:{maxApproval:50}}},options:[{id:"military_suppression",text:"",description:"",effects:{resourcePercent:{food:-.05,silver:-.03},populationPercent:-.015,stability:10,approval:{serf:-30,peasant:-15,soldier:15,landowner:20},buildingProductionMod:{mine:-.2,quarry:-.15}}},{id:"negotiate_freedom",text:"",description:"",effects:{resourcePercent:{silver:-.02},stability:-10,approval:{serf:25,peasant:15,landowner:-30,merchant:-10},buildingProductionMod:{mine:-.1,quarry:-.08}}},{id:"bribe_leaders",text:"",description:"",effects:{resourcePercent:{silver:-.012},stability:5,approval:{serf:-10,peasant:-5,official:-10},buildingProductionMod:{mine:-.05,quarry:-.05}}}]},{id:"assassination_plot",name:"",icon:"AlertTriangle",image:null,description:'""',triggerConditions:{minEpoch:2,classConditions:{landowner:{maxApproval:35,minInfluenceShare:.2},knight:{maxApproval:40}}},options:[{id:"preemptive_purge",text:'""',description:"",effects:{resourcePercent:{silver:-.02},stability:15,approval:{landowner:-25,knight:-20,official:10,peasant:5}}},{id:"public_trial",text:"",description:"",effects:{resourcePercent:{silver:-.012},stability:5,approval:{peasant:15,worker:10,landowner:-20,scribe:8}}},{id:"offer_reconciliation",text:"",description:"",effects:{stability:-5,approval:{landowner:20,knight:15,peasant:-20,worker:-15}}}]},{id:"bank_run_panic",name:"",icon:"Building",image:null,description:"",triggerConditions:{minEpoch:5,classConditions:{merchant:{minPop:10},capitalist:{minPop:5}}},options:[{id:"government_bailout",text:"",description:"",effects:{resourcePercent:{silver:-.05},stability:10,approval:{capitalist:15,merchant:20,peasant:-15,worker:-20}}},{id:"let_it_fail",text:'""',description:"",effects:{resourcePercent:{silver:-.02},stability:-25,approval:{capitalist:-30,merchant:-25,peasant:10,worker:5},buildingProductionMod:{market:-.2,factory:-.15}}},{id:"partial_guarantee",text:"",description:"",effects:{resourcePercent:{silver:-.03},stability:-5,approval:{peasant:15,worker:12,capitalist:-20,merchant:-10},buildingProductionMod:{market:-.1,factory:-.05}}}]},{id:"colonial_tea_protest",name:"",icon:"Coffee",image:null,description:'""',triggerConditions:{minEpoch:4,classConditions:{merchant:{maxApproval:45,minInfluenceShare:.15}}},options:[{id:"harsh_punishment",text:"",description:"",effects:{resourcePercent:{silver:.012},stability:-20,approval:{merchant:-30,peasant:-20,worker:-15,soldier:10},buildingProductionMod:{trade_port:-.25,market:-.2}}},{id:"repeal_monopoly",text:"",description:"",effects:{resourcePercent:{silver:-.012},stability:10,approval:{merchant:25,peasant:10,official:-15},buildingProductionMod:{trade_port:.1,market:.1}}},{id:"token_compromise",text:"",description:"",effects:{resourcePercent:{silver:-.012},stability:-5,approval:{merchant:-10,peasant:-5,official:5},buildingProductionMod:{trade_port:-.05,market:-.05}}}]},{id:"machine_breakers",name:"",icon:"Hammer",image:null,description:'""""',triggerConditions:{minEpoch:6,classConditions:{artisan:{minPop:15,maxApproval:50},capitalist:{minPop:5}}},options:[{id:"protect_factories",text:"",description:"",effects:{resourcePercent:{silver:-.012},stability:5,approval:{artisan:-25,worker:-10,capitalist:20,engineer:15},buildingProductionMod:{factory:.1,textile_mill:.1}}},{id:"slow_mechanization",text:"",description:"",effects:{resourcePercent:{science:-.05},stability:8,approval:{artisan:15,worker:10,capitalist:-15,engineer:-10},buildingProductionMod:{factory:-.1,textile_mill:-.1}}},{id:"retraining_program",text:"",description:"",effects:{resourcePercent:{silver:-.025,science:.03},stability:10,approval:{artisan:12,worker:15,capitalist:5},buildingProductionMod:{school:.1,library:.05}}}]},{id:"constitutional_crisis",name:"",icon:"FileText",image:null,description:"",triggerConditions:{minEpoch:5,classConditions:{capitalist:{minInfluenceShare:.2,minApproval:40},scribe:{minInfluenceShare:.1},landowner:{minInfluenceShare:.2}}},options:[{id:"grant_constitution",text:"",description:"",effects:{resourcePercent:{science:.08,culture:.06},stability:-10,approval:{capitalist:25,scribe:30,merchant:20,landowner:-30,cleric:-20,knight:-25},buildingProductionMod:{university:.15,library:.1}}},{id:"crack_down",text:"",description:"",effects:{stability:-15,approval:{capitalist:-30,scribe:-35,merchant:-20,landowner:20,cleric:15,soldier:10},buildingProductionMod:{all:-.05}},randomEffects:[{chance:.35,effects:{populationPercent:-.012,stability:-25}}]},{id:"delay_tactics",text:'"..."',description:"",effects:{stability:-5,approval:{capitalist:-15,scribe:-20,landowner:-10,official:10}}}]},{id:"spy_scandal",name:"",icon:"Eye",image:null,description:'""',triggerConditions:{minEpoch:5,classConditions:{soldier:{minInfluenceShare:.15},scribe:{minInfluenceShare:.1}}},options:[{id:"support_military",text:"",description:"",effects:{stability:5,approval:{soldier:15,knight:10,scribe:-25,merchant:-10},buildingProductionMod:{barracks:-.1,training_ground:-.1}}},{id:"reopen_case",text:"",description:"",effects:{resourcePercent:{silver:-.02},stability:-10,approval:{soldier:-20,knight:-15,scribe:25,merchant:10,peasant:5},buildingProductionMod:{library:.1,university:.1}}},{id:"quiet_pardon",text:"",description:"",effects:{stability:-3,approval:{soldier:-10,scribe:-15,official:5}}}]},{id:"robber_baron_monopoly",name:"",icon:"Briefcase",image:null,description:'""',triggerConditions:{minEpoch:6,classConditions:{capitalist:{minWealthShare:.35,minInfluenceShare:.25},merchant:{maxApproval:55}}},options:[{id:"break_up_trusts",text:"",description:"",effects:{resourcePercent:{silver:.03},stability:-10,approval:{capitalist:-35,merchant:20,worker:15,peasant:10},buildingProductionMod:{factory:-.2,steel_works:-.2}}},{id:"regulate_prices",text:"",description:"",effects:{stability:5,approval:{capitalist:-15,merchant:10,worker:8},buildingProductionMod:{factory:-.1,steel_works:-.1}}},{id:"laissez_faire",text:'""',description:"",effects:{resourcePercent:{silver:.012},stability:-8,approval:{capitalist:25,merchant:-20,worker:-15,peasant:-10},buildingProductionMod:{factory:.1,steel_works:.1}}}]},{id:"three_estates_assembly",name:"",icon:"Landmark",image:null,description:'"95%"',triggerConditions:{minEpoch:4,resourcePercent:{silver:{max:200}},classConditions:{landowner:{minInfluenceShare:.2},cleric:{minInfluenceShare:.1},merchant:{minPop:10}}},options:[{id:"support_third_estate",text:"",description:"",effects:{resourcePercent:{silver:.012},stability:-15,approval:{peasant:25,worker:25,merchant:20,artisan:20,landowner:-35,cleric:-30,knight:-25},buildingProductionMod:{university:.15,library:.1}}},{id:"maintain_tradition",text:"",description:"",effects:{resourcePercent:{silver:.012},stability:-10,approval:{peasant:-25,worker:-20,merchant:-20,landowner:20,cleric:15},buildingProductionMod:{farm:-.1,factory:-.1}},randomEffects:[{chance:.4,effects:{stability:-20,approval:{peasant:-15}}}]},{id:"dissolve_assembly",text:"",description:"",effects:{stability:-20,approval:{peasant:-20,merchant:-25,landowner:-15,cleric:-10}}}]},{id:"salt_tax_protest",name:"",icon:"Users",image:null,description:'""',triggerConditions:{minEpoch:5,classConditions:{peasant:{minPop:100,maxApproval:50},cleric:{minApproval:50}}},options:[{id:"mass_arrest",text:"",description:"",effects:{resourcePercent:{silver:-.02},stability:-15,approval:{peasant:-25,worker:-20,cleric:-15,soldier:10},buildingProductionMod:{farm:-.15,factory:-.1}}},{id:"abolish_salt_tax",text:"",description:"",effects:{resourcePercent:{silver:-.025},stability:15,approval:{peasant:30,worker:25,cleric:10,merchant:-10},buildingProductionMod:{farm:.1,factory:.05}}},{id:"negotiate_with_leader",text:"",description:"",effects:{resourcePercent:{silver:-.012},stability:5,approval:{peasant:10,cleric:15,official:5},buildingProductionMod:{library:.05,market:.05}}}]},{id:"merchant_scholar_alliance",name:"",icon:"BookOpen",image:null,description:"",triggerConditions:{minEpoch:5,classConditions:{merchant:{minWealthShare:.2,minApproval:55},scribe:{minInfluenceShare:.12,minApproval:55}}},options:[{id:"embrace_new_ideas",text:"",description:"",effects:{resourcePercent:{science:.08,culture:.06},stability:-5,approval:{merchant:20,scribe:25,capitalist:15,landowner:-20,cleric:-25},buildingProductionMod:{university:.1,library:.08}}},{id:"censor_publications",text:"",description:'""',effects:{resourcePercent:{science:-.05},stability:8,approval:{merchant:-15,scribe:-25,landowner:15,cleric:20},buildingProductionMod:{library:-.15,university:-.1}}},{id:"cootp_movement",text:"",description:"",effects:{resourcePercent:{silver:-.02},stability:3,approval:{scribe:5,merchant:5,official:10},buildingProductionMod:{library:.05,university:.05}}}]},{id:"military_coup_threat",name:"",icon:"Swords",image:null,description:'""',triggerConditions:{minEpoch:3,classConditions:{soldier:{minInfluenceShare:.2,maxApproval:60},knight:{minInfluenceShare:.15}}},options:[{id:"preemptive_dismissal",text:"",description:"...",effects:{stability:-15,approval:{soldier:-25,knight:-20,official:15}},randomEffects:[{chance:.3,effects:{populationPercent:-.01,stability:-30}}]},{id:"appease_general",text:"",description:"",effects:{resourcePercent:{silver:-.025},stability:5,approval:{soldier:15,knight:10,peasant:-10,official:-15},buildingProductionMod:{barracks:.1,training_ground:.1}}},{id:"build_loyal_force",text:"",description:"",effects:{resourcePercent:{silver:-.03,food:-.03},stability:3,approval:{soldier:-10,official:10},buildingProductionMod:{barracks:.05,training_ground:.05}}}]},{id:"great_famine",name:"",icon:"CloudRain",image:null,description:'""',triggerConditions:{minEpoch:2,minPopulation:50,resourcePercent:{food:{max:100}}},options:[{id:"requisition_grain",text:"",description:"",effects:{resourcePercent:{food:.03},stability:5,approval:{peasant:25,worker:20,landowner:-35,merchant:-30},buildingProductionMod:{farm:.1,factory:.05}}},{id:"buy_grain",text:"",description:"",effects:{resourcePercent:{food:.015,silver:-.05},stability:8,approval:{peasant:15,merchant:20,landowner:10},buildingProductionMod:{market:.1,trade_port:.1}}},{id:"let_market_decide",text:'""',description:"",effects:{populationPercent:-.025,stability:-25,approval:{peasant:-40,worker:-35,merchant:15,landowner:10},buildingProductionMod:{all:-.2}}}]},{id:"peasant_crusade",name:"",icon:"Cross",image:null,description:'""',triggerConditions:{minEpoch:3,maxEpoch:4,classConditions:{peasant:{minPop:80},cleric:{minInfluenceShare:.15,minApproval:60}}},options:[{id:"bless_and_send",text:"",description:"",effects:{resourcePercent:{food:-.05,culture:.06},populationPercent:-.012,stability:10,approval:{cleric:25,peasant:15,landowner:-20}}},{id:"redirect_to_charity",text:"",description:"",effects:{resourcePercent:{silver:-.012,culture:.04},stability:8,approval:{cleric:10,peasant:10}}},{id:"ban_movement",text:"",description:"",effects:{resourcePercent:{food:.02},stability:-10,approval:{cleric:-30,peasant:-20,landowner:15}}}]},{id:"urban_rural_tension",name:"",icon:"Building",image:null,description:"",triggerConditions:{minEpoch:4,classConditions:{worker:{minPop:30,maxApproval:55},peasant:{minPop:50,maxApproval:55}}},options:[{id:"subsidize_farmers",text:"",description:"",effects:{resourcePercent:{silver:-.03,food:.035},stability:10,approval:{peasant:20,worker:15}}},{id:"price_ceiling",text:"",description:"",effects:{resourcePercent:{food:-.02},stability:-5,approval:{worker:15,peasant:-25,merchant:-10}}},{id:"let_negotiate",text:"",description:"",effects:{resourcePercent:{silver:-.012},stability:3,approval:{worker:5,peasant:5,official:8}}}]},{id:"foreign_drug_trade",name:"",icon:"AlertTriangle",image:null,description:'""',triggerConditions:{minEpoch:5,classConditions:{merchant:{minPop:15}}},options:[{id:"strict_prohibition",text:"",description:"",effects:{resourcePercent:{silver:-.02},stability:10,approval:{peasant:20,official:15,soldier:10,merchant:-25},nationRelation:{strongest:-40},nationAggression:{strongest:.25}},randomEffects:[{chance:.4,effects:{stability:-30,populationPercent:-.012,triggerWar:"strongest"},description:""}]},{id:"legalize_and_tax",text:"",description:"",effects:{resourcePercent:{silver:.012},stability:-10,approval:{peasant:-25,cleric:-20,merchant:20,official:-10}}},{id:"diplomatic_negotiation",text:"",description:"",effects:{resourcePercent:{silver:-.012},stability:3,approval:{official:10,merchant:5},nationRelation:{strongest:-5}},randomEffects:[{chance:.4,effects:{nationRelation:{strongest:10},stability:5},description:""}]}]},{id:"guild_monopoly_crisis",name:"",icon:"Users",image:null,description:"",triggerConditions:{minEpoch:4,classConditions:{artisan:{minPop:20,minInfluenceShare:.1},worker:{minPop:15,maxApproval:55}}},options:[{id:"abolish_guilds",text:"",description:"",effects:{resourcePercent:{science:.05},stability:-10,approval:{artisan:-25,worker:20,merchant:15,capitalist:20},stratumDemandMod:{peasant:-.12,worker:-.1,capitalist:.1}}},{id:"reform_guilds",text:"",description:"",effects:{stability:5,approval:{artisan:-5,worker:10,merchant:5}}},{id:"strengthen_guilds",text:"",description:"",effects:{resourcePercent:{science:-30},stability:8,approval:{artisan:20,worker:-15,merchant:-10,capitalist:-15}}}]},{id:"court_faction_war",name:"",icon:"Users",image:null,description:'""""',triggerConditions:{minEpoch:5,classConditions:{official:{minPop:10},scribe:{minInfluenceShare:.1}}},options:[{id:"support_reformers",text:"",description:"",effects:{resourcePercent:{science:.08,silver:-.02},stability:-15,approval:{scribe:25,merchant:15,official:-10,landowner:-25,cleric:-20},buildingProductionMod:{library:-.1,university:-.1}}},{id:"support_conservatives",text:"",description:"",effects:{resourcePercent:{culture:.05},stability:10,approval:{landowner:20,cleric:15,scribe:-25,merchant:-15}}},{id:"balance_factions",text:"",description:"",effects:{stability:-5,approval:{official:10,scribe:-10,landowner:-10}}}]},{id:"eight_hour_day_movement",name:"",icon:"Clock",image:null,description:'""',triggerConditions:{minEpoch:6,classConditions:{worker:{minPop:40,maxApproval:55},capitalist:{minWealthShare:.25}}},options:[{id:"pass_labor_law",text:"",description:"",effects:{resourcePercent:{science:-30},stability:10,approval:{worker:30,peasant:15,capitalist:-30,merchant:-15}}},{id:"voluntary_guidelines",text:"",description:"",effects:{stability:3,approval:{worker:5,capitalist:5}}},{id:"crush_movement",text:"",description:"",effects:{stability:-15,approval:{worker:-35,peasant:-20,capitalist:20,soldier:10},buildingProductionMod:{factory:-.25,steel_works:-.25}},randomEffects:[{chance:.3,effects:{populationPercent:-.01,stability:-20}}]}]},{id:"anti_foreign_movement",name:"",icon:"Flag",image:null,description:"",triggerConditions:{minEpoch:5,classConditions:{peasant:{minPop:60,maxApproval:50},cleric:{maxApproval:60}}},options:[{id:"support_movement",text:'""',description:"",effects:{stability:-20,approval:{peasant:25,soldier:15,cleric:-20,merchant:-25,scribe:-20},nationRelation:{all:-35},nationAggression:{all:.25}},randomEffects:[{chance:.5,effects:{populationPercent:-.015,stability:-30,resourcePercent:{silver:-.04},triggerWar:"strongest"},description:""}]},{id:"suppress_movement",text:"",description:"",effects:{resourcePercent:{silver:-.02},stability:10,approval:{peasant:-30,soldier:-10,cleric:15,merchant:20},nationRelation:{all:25},nationAggression:{all:-.15}}},{id:"ambiguous_stance",text:"",description:"",effects:{stability:-10,approval:{peasant:5,merchant:-15,official:-10}}}]},{id:"bread_and_circuses",name:"",icon:"Theater",image:null,description:'""',triggerConditions:{minEpoch:2,classConditions:{peasant:{maxApproval:50},worker:{maxApproval:50}}},options:[{id:"grand_spectacle",text:"",description:"",effects:{resourcePercent:{silver:-.012,food:-.03,culture:.06},stability:15,approval:{peasant:20,worker:18,merchant:5,capitalist:-10}}},{id:"free_grain",text:"",description:"",effects:{resourcePercent:{food:-.015},stability:12,approval:{peasant:25,worker:20,landowner:-15}}},{id:"address_real_issues",text:"",description:"",effects:{resourcePercent:{silver:-.025},stability:-5,approval:{peasant:8,worker:10,scribe:15,official:-10}}}]},{id:"palace_guard_demands",name:"",icon:"Shield",image:null,description:'""""',triggerConditions:{minEpoch:2,classConditions:{soldier:{minInfluenceShare:.18,maxApproval:55}}},options:[{id:"pay_demands",text:"",description:"",effects:{resourcePercent:{silver:-.04},stability:10,approval:{soldier:25,knight:15,peasant:-15,merchant:-10}}},{id:"face_them_down",text:'""',description:"",effects:{stability:-10,approval:{soldier:-20,official:15,peasant:10}},randomEffects:[{chance:.25,effects:{populationPercent:-.015,stability:-25,approval:{soldier:-20}}}]},{id:"reform_guard",text:"",description:"",effects:{resourcePercent:{silver:-.025},stability:5,approval:{soldier:-5,official:10,peasant:5}}}]},{id:"nobles_charter_demand",name:"",icon:"Scroll",image:null,description:'""...',triggerConditions:{minEpoch:3,classConditions:{landowner:{minInfluenceShare:.25,maxApproval:45},knight:{minInfluenceShare:.15,maxApproval:50}}},options:[{id:"sign_charter",text:"",description:"",effects:{resourcePercent:{culture:.08},stability:10,approval:{landowner:30,knight:25,peasant:-10,official:-20}}},{id:"reject_and_fight",text:"",description:"",effects:{resourcePercent:{silver:-.03,food:-.05},populationPercent:-.01,stability:-20,approval:{landowner:-35,knight:-30,soldier:15,peasant:10}}},{id:"delay_and_divide",text:"",description:"",effects:{resourcePercent:{silver:-.02},stability:-5,approval:{landowner:10,knight:5,official:10}}}]},{id:"tenant_strike",name:"",icon:"Wheat",image:null,description:'""',triggerConditions:{minEpoch:3,classConditions:{peasant:{minPop:50,maxApproval:45},landowner:{minWealthShare:.25},serf:{minPop:20,maxApproval:45}}},options:[{id:"force_rent_reduction",text:"",description:"",effects:{resourcePercent:{food:.035},stability:5,approval:{peasant:30,serf:25,landowner:-35,knight:-15},buildingProductionMod:{farm:.1,large_estate:-.1}}},{id:"send_troops",text:"",description:"",effects:{stability:-10,approval:{peasant:-30,serf:-25,landowner:25,soldier:10}}},{id:"mediate",text:"",description:"",effects:{resourcePercent:{silver:-.012},stability:3,approval:{peasant:10,serf:8,landowner:-10,official:8}}}]},{id:"currency_crisis",name:"",icon:"Coins",image:null,description:'""...',triggerConditions:{minEpoch:2,resourcePercent:{silver:{max:150}}},options:[{id:"debase_currency",text:"",description:"",effects:{resourcePercent:{silver:.05},stability:-8,approval:{merchant:-20,capitalist:-25,peasant:-10,official:10},buildingProductionMod:{barracks:-.15,training_ground:-.1}},randomEffects:[{chance:.5,effects:{stability:-15,approval:{merchant:-20,peasant:-15}}}]},{id:"raise_taxes",text:"",description:"",effects:{resourcePercent:{silver:.03},stability:-5,approval:{peasant:-15,merchant:-10,landowner:-10}}},{id:"cut_spending",text:"",description:"",effects:{resourcePercent:{silver:.02},stability:-3,approval:{official:-20,soldier:-15,peasant:5}}}]},{id:"witch_hunt_hysteria",name:"",icon:"Flame",image:null,description:'""',triggerConditions:{minEpoch:3,maxEpoch:5,classConditions:{cleric:{minInfluenceShare:.15},peasant:{maxApproval:55}}},options:[{id:"allow_trial",text:"",description:"",effects:{resourcePercent:{culture:-.3},stability:5,approval:{cleric:20,peasant:10,scribe:-25}},randomEffects:[{chance:.4,effects:{populationPercent:-.015,stability:-10}}]},{id:"demand_evidence",text:"",description:"",effects:{resourcePercent:{science:.03},stability:-5,approval:{cleric:-15,peasant:-10,scribe:20,official:10}}},{id:"release_accused",text:"",description:"",effects:{resourcePercent:{science:.05},stability:-15,approval:{cleric:-30,peasant:-20,scribe:30}}}]},{id:"church_noble_alliance",name:"",icon:"Handshake",image:null,description:'""',triggerConditions:{minEpoch:3,classConditions:{cleric:{minInfluenceShare:.15,minWealthShare:.1},landowner:{minInfluenceShare:.2,minWealthShare:.25}}},options:[{id:"submit_to_pressure",text:"",description:"",effects:{stability:10,approval:{cleric:25,landowner:25,peasant:-20,worker:-15,merchant:-10},buildingProductionMod:{all:-.1}}},{id:"divide_alliance",text:"",description:"",effects:{resourcePercent:{silver:-.025},stability:3,approval:{cleric:5,landowner:-15,official:10}}},{id:"defy_alliance",text:"",description:"",effects:{stability:-15,approval:{cleric:-30,landowner:-30,peasant:25,worker:20,merchant:15}}}]},{id:"succession_dispute",name:"",icon:"Crown",image:null,description:"",triggerConditions:{minEpoch:2,minStability:40,classConditions:{landowner:{minInfluenceShare:.15},official:{minPop:5}}},options:[{id:"support_eldest",text:"",description:"",effects:{stability:5,approval:{landowner:15,cleric:10,official:-10,peasant:-5}}},{id:"support_younger",text:"",description:"",effects:{resourcePercent:{culture:-.3},stability:-10,approval:{landowner:-20,cleric:-15,official:15,peasant:10}}},{id:"split_inheritance",text:"",description:"",effects:{maxPop:-20,stability:-5,approval:{landowner:5,official:5}}}]},{id:"bread_riot",name:"",icon:"AlertTriangle",image:null,description:'""',triggerConditions:{minEpoch:3,minPopulation:40,resourcePercent:{food:{max:80}},classConditions:{peasant:{maxApproval:40},worker:{maxApproval:40}}},options:[{id:"distribute_reserves",text:"",description:"",effects:{resourcePercent:{food:-.05},stability:15,approval:{peasant:30,worker:28,merchant:-10}}},{id:"military_response",text:"",description:"",effects:{populationPercent:-.01,stability:-15,approval:{peasant:-35,worker:-30,soldier:10,landowner:15}}},{id:"blame_hoarders",text:"",description:"",effects:{resourcePercent:{food:.015},stability:-5,approval:{peasant:25,worker:22,merchant:-30,landowner:-25}}}]},{id:"guild_master_corruption",name:"",icon:"Briefcase",image:null,description:"",triggerConditions:{minEpoch:3,classConditions:{artisan:{minPop:15},official:{minPop:5}}},options:[{id:"full_investigation",text:"",description:"",effects:{resourcePercent:{silver:-.012},stability:-5,approval:{artisan:25,worker:15,official:-20,merchant:10},buildingProductionMod:{factory:-.05,market:-.05}}},{id:"quiet_removal",text:"",description:"",effects:{stability:3,approval:{artisan:5,official:10,worker:-5},buildingProductionMod:{factory:.05,market:.05}}},{id:"ignore_accusations",text:"",description:"",effects:{stability:-8,approval:{artisan:-20,worker:-15,official:15},buildingProductionMod:{school:.1,library:.05}}}]},{id:"peasant_jacquerie",name:"",icon:"Swords",image:null,description:'""""',triggerConditions:{minEpoch:3,maxEpoch:5,classConditions:{peasant:{minPop:80,maxApproval:35},serf:{minPop:30,maxApproval:35},landowner:{minWealthShare:.3}}},options:[{id:"brutal_suppression",text:"",description:"",effects:{resourcePercent:{silver:-.025,food:-.03},populationPercent:-.02,stability:5,approval:{peasant:-40,serf:-35,landowner:30,knight:20,soldier:15},buildingProductionMod:{farm:-.25,large_estate:-.3}}},{id:"negotiate_grievances",text:"",description:"",effects:{stability:-10,approval:{peasant:20,serf:18,landowner:-30,knight:-20},buildingProductionMod:{university:.1,library:.05}}},{id:"divide_rebels",text:"",description:"",effects:{resourcePercent:{silver:-.012},populationPercent:-.012,stability:0,approval:{peasant:-5,serf:-5,landowner:5,official:10},buildingProductionMod:{farm:-.1,large_estate:-.15}}}]},{id:"union_recognition_fight",name:"",icon:"Users",image:null,description:"",triggerConditions:{minEpoch:6,classConditions:{worker:{minPop:50,maxApproval:55},capitalist:{minWealthShare:.3}}},options:[{id:"legalize_unions",text:"",description:"",effects:{stability:-10,approval:{worker:35,peasant:15,capitalist:-35,merchant:-15},buildingProductionMod:{factory:-.1,steel_works:-.1}}},{id:"ban_unions",text:"",description:"",effects:{stability:-20,approval:{worker:-40,peasant:-20,capitalist:30,soldier:10}},randomEffects:[{chance:.4,effects:{populationPercent:-.012,stability:-25}}]},{id:"regulated_unions",text:"",description:"",effects:{stability:0,approval:{worker:10,capitalist:-10,official:10},buildingProductionMod:{factory:-.05,steel_works:-.05}}}]},{id:"enclosure_movement",name:"",icon:"Fence",image:null,description:"",triggerConditions:{minEpoch:4,classConditions:{landowner:{minWealthShare:.25,minInfluenceShare:.2},peasant:{minPop:60}}},options:[{id:"support_enclosure",text:"",description:"",effects:{resourcePercent:{food:.05,science:.03},stability:-15,approval:{landowner:30,capitalist:20,peasant:-35,worker:10},buildingProductionMod:{farm:.1,large_estate:.15}}},{id:"protect_commons",text:"",description:"",effects:{stability:10,approval:{peasant:25,landowner:-30,capitalist:-15},buildingProductionMod:{farm:-.05,large_estate:-.05}}},{id:"compensation_scheme",text:"",description:"",effects:{resourcePercent:{food:.03},stability:-5,approval:{peasant:5,landowner:-15,worker:8},buildingProductionMod:{farm:.05,large_estate:.08}}}]},{id:"press_freedom_debate",name:"",icon:"Newspaper",image:null,description:'""',triggerConditions:{minEpoch:5,classConditions:{scribe:{minInfluenceShare:.12},official:{minPop:10}}},options:[{id:"protect_press",text:"",description:"",effects:{resourcePercent:{culture:.06},stability:-5,approval:{scribe:30,merchant:15,peasant:10,official:-25},buildingProductionMod:{library:.1,university:.1}}},{id:"shut_down_paper",text:"",description:'""',effects:{resourcePercent:{culture:-.4},stability:5,approval:{scribe:-35,merchant:-10,peasant:-15,official:20},buildingProductionMod:{library:-.15,university:-.1}}},{id:"regulate_press",text:"",description:'""',effects:{resourcePercent:{culture:-.2},stability:3,approval:{scribe:-20,official:15,merchant:5},buildingProductionMod:{library:-.05,university:-.05}}}]},{id:"tax_farmer_abuse",name:"",icon:"Coins",image:null,description:"",triggerConditions:{minEpoch:3,classConditions:{merchant:{minWealthShare:.2},peasant:{maxApproval:50}}},options:[{id:"abolish_tax_farming",text:"",description:"",effects:{resourcePercent:{silver:-.02},stability:8,approval:{peasant:25,worker:15,merchant:-25,official:15}}},{id:"regulate_tax_farmers",text:"",description:"",effects:{resourcePercent:{silver:-.012},stability:3,approval:{peasant:10,merchant:-10,official:5}}},{id:"crack_down_resisters",text:"",description:"",effects:{populationPercent:-.01,stability:-10,approval:{peasant:-30,worker:-20,merchant:15,soldier:10}}}]},{id:"reign_of_terror",name:"",icon:"Skull",image:null,description:'""""""',triggerConditions:{minEpoch:5,minStability:20,maxStability:45,classConditions:{peasant:{minApproval:55},landowner:{maxApproval:35}}},options:[{id:"end_terror",text:"",description:"",effects:{stability:10,approval:{landowner:25,merchant:20,cleric:15,peasant:-20,worker:-15}}},{id:"intensify_terror",text:"",description:'""',effects:{populationPercent:-.012,stability:-15,approval:{peasant:15,worker:10,landowner:-35,merchant:-30,cleric:-30}}},{id:"redirect_terror",text:"",description:'""',effects:{populationPercent:-.03,stability:5,approval:{peasant:-5,official:15,merchant:10},buildingProductionMod:{all:-.05}}}]},{id:"stock_market_crash",name:"",icon:"TrendingDown",image:null,description:"",triggerConditions:{minEpoch:6,classConditions:{capitalist:{minPop:8,minWealthShare:.25},merchant:{minPop:15}}},options:[{id:"massive_intervention",text:"",description:"",effects:{resourcePercent:{silver:-.012},stability:10,approval:{capitalist:20,merchant:15,worker:-15,peasant:-20}}},{id:"let_market_correct",text:"",description:'""',effects:{stability:-20,approval:{capitalist:-30,merchant:-25,worker:5,peasant:5}}},{id:"protect_small_investors",text:"",description:"",effects:{resourcePercent:{silver:-.03},stability:-5,approval:{capitalist:-25,merchant:10,worker:15,peasant:12}}}]},{id:"education_reform_debate",name:"",icon:"GraduationCap",image:null,description:'""""""',triggerConditions:{minEpoch:5,classConditions:{scribe:{minInfluenceShare:.1},cleric:{minInfluenceShare:.1}}},options:[{id:"universal_education",text:"",description:"",effects:{resourcePercent:{silver:-.04,science:.08,culture:.08},stability:-5,approval:{scribe:30,peasant:15,worker:15,cleric:-25,landowner:-20}}},{id:"church_education",text:"",description:"",effects:{resourcePercent:{silver:-.02,culture:.05},stability:5,approval:{cleric:25,landowner:10,scribe:-20,peasant:-10}}},{id:"elite_education",text:"",description:"",effects:{resourcePercent:{silver:-.025,science:.06},stability:3,approval:{scribe:10,landowner:15,peasant:-15,worker:-15}}}]},{id:"religious_schism",name:"",icon:"Cross",image:null,description:"",triggerConditions:{minEpoch:3,classConditions:{cleric:{minInfluenceShare:.15},peasant:{minPop:50}}},options:[{id:"support_orthodox",text:"",description:'""',effects:{stability:5,approval:{cleric:20,landowner:10,peasant:-10,scribe:-15},buildingProductionMod:{all:-.1}}},{id:"support_reformers",text:"",description:"",effects:{resourcePercent:{culture:.05},stability:-10,approval:{cleric:-25,peasant:15,scribe:20,landowner:-15},buildingProductionMod:{all:-.1}}},{id:"religious_tolerance",text:"",description:"",effects:{resourcePercent:{culture:.03},stability:-5,approval:{cleric:-15,merchant:15,scribe:15,peasant:5},buildingProductionMod:{all:.05}}}]}],Ix=[{id:"mammoth_hunt",name:"",icon:"Target",image:null,description:"",triggerConditions:{minPopulation:30,maxEpoch:1},options:[{id:"full_hunt",text:"",description:"",effects:{resourcePercent:{food:.015},populationPercent:-.015,approval:{soldier:15,peasant:10},resourceDemandMod:{food:.05,wood:.03},buildingProductionMod:{lumber_camp:-.05,stone_tool_workshop:-.05}},randomEffects:[{chance:.3,effects:{resourcePercent:{food:.07},approval:{soldier:20}},description:""}]},{id:"small_party",text:"",description:"",effects:{resourcePercent:{food:.03},approval:{soldier:10},resourceDemandMod:{food:.02,wood:.01},buildingProductionMod:{stone_tool_workshop:-.02}}},{id:"let_it_go",text:"",description:"",effects:{stability:5,approval:{peasant:5,soldier:-10},stratumDemandMod:{soldier:-.05}}}]},{id:"fire_discovery",name:"",icon:"Flame",image:null,description:'""',triggerConditions:{maxEpoch:0},options:[{id:"honor_elder",text:"",description:"",effects:{resourcePercent:{science:.03,food:-.012},approval:{cleric:15,peasant:5},resourceDemandMod:{food:.02},buildingProductionMod:{all:.02}}},{id:"force_knowledge",text:"",description:"",effects:{resourcePercent:{science:.02},stability:-10,approval:{cleric:-20,soldier:10},buildingProductionMod:{stone_tool_workshop:.03}}},{id:"reject_offer",text:"",description:'""',effects:{approval:{cleric:-10,soldier:5},stratumDemandMod:{cleric:-.05}}}]},{id:"cave_dispute",name:"",icon:"Home",image:null,description:"",triggerConditions:{minPopulation:40,maxEpoch:0},options:[{id:"favor_stronger",text:"",description:"",effects:{stability:-5,approval:{soldier:15,peasant:-10},resourceDemandMod:{stone:.08,food:.05}}},{id:"share_cave",text:"",description:"",effects:{stability:5,approval:{peasant:10,soldier:-5},stratumDemandMod:{peasant:.03}}},{id:"build_new",text:"",description:"",effects:{resourcePercent:{food:-.02},population:2,stability:3,approval:{peasant:15,artisan:10},resourceDemandMod:{wood:.05,stone:.03}}}]},{id:"shaman_ritual",name:"",icon:"Star",image:null,description:"",triggerConditions:{maxEpoch:1},options:[{id:"grand_ritual",text:"",description:"",effects:{resourcePercent:{food:-.04,culture:.02},stability:10,approval:{cleric:25,peasant:5},resourceDemandMod:{culture:.1,food:.05}},randomEffects:[{chance:.4,effects:{stability:15,approval:{cleric:15}},description:""}]},{id:"simple_ritual",text:"",description:"",effects:{resourcePercent:{food:-.012,culture:.012},approval:{cleric:-5},resourceDemandMod:{culture:.03,food:.02}}},{id:"ignore_shaman",text:"",description:"",effects:{stability:-5,approval:{cleric:-20,soldier:10},stratumDemandMod:{cleric:-.1}}}]},{id:"stone_tool_innovation",name:"",icon:"Hammer",image:null,description:"",triggerConditions:{maxEpoch:0},options:[{id:"embrace_innovation",text:"",description:"",effects:{resourcePercent:{science:.03},approval:{artisan:20,cleric:-15,peasant:10},resourceDemandMod:{wood:.02,stone:.03}}},{id:"keep_tradition",text:"",description:"",effects:{resourcePercent:{culture:.02},approval:{cleric:15,artisan:-15},stratumDemandMod:{artisan:-.08}}},{id:"test_first",text:"",description:"",effects:{resourcePercent:{science:.02,culture:.012},approval:{artisan:10,scribe:10},resourceDemandMod:{wood:.01,stone:.01}}}]},{id:"bronze_secret",name:"",icon:"Gem",image:null,description:"",triggerConditions:{minEpoch:1,maxEpoch:2},options:[{id:"buy_secret",text:"",description:"",effects:{resourcePercent:{silver:-.03,science:.05},approval:{artisan:20,merchant:-10},resourceDemandMod:{copper:.15,silver:.05}}},{id:"grant_citizenship",text:"",description:"",effects:{resourcePercent:{science:.04},populationPercent:.015,approval:{artisan:15,landowner:-10},stratumDemandMod:{peasant:.05}}},{id:"steal_secret",text:"",description:"",effects:{resourcePercent:{science:.03},stability:-10,approval:{soldier:10,merchant:-15},stratumDemandMod:{merchant:-.08}}},{id:"refuse_offer",text:"",description:"",effects:{approval:{artisan:5},stratumDemandMod:{artisan:-.03}}}]},{id:"writing_invention",name:"",icon:"BookOpen",image:null,description:"",triggerConditions:{minEpoch:1,maxEpoch:2},options:[{id:"sacred_only",text:"",description:"",effects:{resourcePercent:{culture:.04},approval:{cleric:25,merchant:-20,scribe:-10},resourceDemandMod:{papyrus:.1}}},{id:"limited_secular",text:"",description:"",effects:{resourcePercent:{culture:.03,science:.02},approval:{cleric:5,scribe:15,merchant:-5},resourceDemandMod:{papyrus:.05}}},{id:"public_writing",text:"",description:"",effects:{resourcePercent:{science:.04,culture:.015},approval:{cleric:-20,merchant:20,scribe:25,artisan:10},resourceDemandMod:{papyrus:.2}}}]},{id:"irrigation_project",name:"",icon:"Droplet",image:null,description:"",triggerConditions:{minEpoch:1,maxEpoch:3},options:[{id:"forced_labor",text:"",description:"",effects:{resourcePercent:{food:.05},stability:-15,approval:{landowner:10,peasant:-25,artisan:-15},resourceDemandMod:{food:.1,wood:.05}}},{id:"paid_workers",text:"",description:"",effects:{resourcePercent:{silver:-.025,food:.04},approval:{peasant:15,artisan:10,merchant:-5},resourceDemandMod:{silver:.05,food:.03}}},{id:"noble_contribution",text:"",description:"",effects:{resourcePercent:{food:.035},approval:{landowner:-20,peasant:20},resourceDemandMod:{food:.02,silver:.01}}},{id:"postpone_project",text:"",description:"",effects:{approval:{peasant:-10,landowner:5},stratumDemandMod:{peasant:-.05}}}]},{id:"slave_rebellion_bronze",name:"",icon:"Users",image:null,description:"",triggerConditions:{minEpoch:1,maxEpoch:3},options:[{id:"crush_rebellion",text:"",description:"",effects:{stability:-10,populationPercent:-.03,approval:{soldier:15,landowner:20,peasant:-20},resourceDemandMod:{tools:.1,food:.05}}},{id:"negotiate_freedom",text:"",description:"",effects:{populationPercent:.05,approval:{landowner:-25,peasant:15,artisan:10},resourceDemandMod:{food:.08,silver:.03}}},{id:"improve_conditions",text:"",description:"",effects:{resourcePercent:{food:-.02},stability:5,approval:{landowner:-10,peasant:5},resourceDemandMod:{food:.05}}}]},{id:"city_state_alliance",name:"",icon:"Handshake",image:null,description:"",triggerConditions:{minEpoch:1,maxEpoch:3},options:[{id:"join_alliance",text:"",description:"",effects:{resourcePercent:{silver:.012},stability:10,approval:{merchant:20,landowner:10,soldier:-10},resourceDemandMod:{silver:.05,tools:.03}}},{id:"trade_only",text:"",description:"",effects:{resourcePercent:{silver:.012},approval:{merchant:15,soldier:5},resourceDemandMod:{silver:.03}}},{id:"refuse_alliance",text:"",description:"",effects:{stability:-5,approval:{soldier:15,merchant:-15},stratumDemandMod:{merchant:-.08}}}]},{id:"philosophy_school",name:"",icon:"BookOpen",image:null,description:"",triggerConditions:{minEpoch:2,maxEpoch:4},options:[{id:"support_rationalists",text:"",description:"",effects:{resourcePercent:{science:.05,culture:.02},approval:{scribe:25,cleric:-20,merchant:10},resourceDemandMod:{papyrus:.1,culture:.05}}},{id:"support_traditionalists",text:"",description:"",effects:{resourcePercent:{culture:.05},stability:10,approval:{cleric:20,scribe:-15,landowner:15},resourceDemandMod:{culture:.08}}},{id:"public_debate",text:"",description:"",effects:{resourcePercent:{culture:.03,science:.03},approval:{scribe:15,cleric:5,peasant:10},resourceDemandMod:{papyrus:.05}}},{id:"ban_both",text:"",description:"",effects:{stability:15,approval:{scribe:-30,cleric:-10,soldier:10},stratumDemandMod:{scribe:-.15}}}]},{id:"olympic_games",name:"",icon:"Trophy",image:null,description:"",triggerConditions:{minEpoch:2,maxEpoch:4},options:[{id:"grand_games",text:"",description:"",effects:{resourcePercent:{silver:-.04,culture:.08},stability:15,approval:{landowner:20,soldier:25,peasant:15},resourceDemandMod:{food:.1,silver:.05}}},{id:"modest_games",text:"",description:"",effects:{resourcePercent:{silver:-.02,culture:.04},stability:5,approval:{soldier:15,peasant:10},resourceDemandMod:{food:.05,silver:.02}}},{id:"decline_hosting",text:"",description:"",effects:{approval:{landowner:-15,soldier:-10,merchant:10},stratumDemandMod:{landowner:-.08}}}]},{id:"democratic_reform",name:"",icon:"Vote",image:null,description:'""',triggerConditions:{minEpoch:2,maxEpoch:4},options:[{id:"full_democracy",text:"",description:"",effects:{stability:-10,approval:{peasant:30,artisan:25,merchant:20,landowner:-30,cleric:-15},resourceDemandMod:{papyrus:.15}}},{id:"limited_representation",text:"",description:"",effects:{stability:5,approval:{peasant:10,artisan:15,landowner:-10},resourceDemandMod:{food:.03}}},{id:"reject_democracy",text:"",description:"",effects:{stability:-5,approval:{landowner:20,peasant:-25,artisan:-20},stratumDemandMod:{peasant:-.1}}}]},{id:"theatrical_competition",name:"",icon:"Drama",image:null,description:"",triggerConditions:{minEpoch:2,maxEpoch:4},options:[{id:"allow_satire",text:"",description:"",effects:{resourcePercent:{culture:.04},stability:-5,approval:{scribe:25,peasant:15,landowner:-15},resourceDemandMod:{culture:.1}}},{id:"only_heroic",text:"",description:"",effects:{resourcePercent:{culture:.03},stability:10,approval:{landowner:15,soldier:10,scribe:-20},stratumDemandMod:{scribe:-.1}}},{id:"fair_competition",text:"",description:"",effects:{resourcePercent:{culture:.04},approval:{scribe:15,peasant:10,merchant:10},resourceDemandMod:{culture:.08}}}]},{id:"gladiator_question",name:"",icon:"Swords",image:null,description:"",triggerConditions:{minEpoch:2,maxEpoch:4},options:[{id:"expand_games",text:"",description:"",effects:{resourcePercent:{silver:-.012},stability:15,approval:{peasant:20,soldier:15,cleric:-15},resourceDemandMod:{food:.1,tools:.05}}},{id:"reform_games",text:"",description:"",effects:{resourcePercent:{silver:-.028},stability:5,approval:{cleric:10,peasant:5},resourceDemandMod:{stone:.05,tools:.03}}},{id:"abolish_games",text:"",description:"",effects:{stability:-10,approval:{cleric:25,peasant:-20,soldier:-15},stratumDemandMod:{peasant:-.1}}}]},{id:"crusade_call",name:"",icon:"Cross",image:null,description:"",triggerConditions:{minEpoch:3,maxEpoch:4},options:[{id:"lead_crusade",text:"",description:"",effects:{resourcePercent:{silver:-.012,culture:.06},populationPercent:-.025,approval:{cleric:30,soldier:25,landowner:15,peasant:-20},resourceDemandMod:{food:.1,tools:.08}},randomEffects:[{chance:.4,effects:{resourcePercent:{silver:.08,culture:.05},approval:{soldier:20}},description:""},{chance:.3,effects:{populationPercent:-.012,stability:-15},description:"..."}]},{id:"send_army",text:"",description:"",effects:{resourcePercent:{silver:-.03,culture:.03},populationPercent:-.012,approval:{cleric:15,soldier:10},resourceDemandMod:{food:.05,tools:.03}}},{id:"financial_support",text:"",description:"",effects:{resourcePercent:{silver:-.025},approval:{cleric:10,soldier:-10,merchant:-5},resourceDemandMod:{silver:.05}}},{id:"refuse_crusade",text:"",description:"",effects:{approval:{cleric:-25,soldier:-15,merchant:15,peasant:10},stratumDemandMod:{cleric:-.1}}}]},{id:"black_death",name:"",icon:"Skull",image:null,description:"",triggerConditions:{minEpoch:3,maxEpoch:5},options:[{id:"quarantine",text:"",description:"",effects:{populationPercent:-.012,resourcePercent:{silver:-.02},stability:-10,approval:{merchant:-25,peasant:-10,cleric:10},resourceDemandMod:{cloth:.1,food:.05}}},{id:"blame_outsiders",text:"",description:"",effects:{populationPercent:-.02,stability:5,approval:{peasant:10,merchant:-20,cleric:-10},stratumDemandMod:{merchant:-.1}}},{id:"prayer_procession",text:"",description:"",effects:{populationPercent:-.025,resourcePercent:{culture:.02},approval:{cleric:25,peasant:5},resourceDemandMod:{culture:.08}}},{id:"medical_research",text:"",description:"",effects:{populationPercent:-.015,resourcePercent:{silver:-.03,science:.04},approval:{scribe:20,cleric:-15},resourceDemandMod:{papyrus:.05,silver:.03}}}]},{id:"peasant_revolt_feudal",name:"",icon:"Pitchfork",image:null,description:"",triggerConditions:{minEpoch:3,maxEpoch:5,classConditions:{peasant:{maxApproval:30}}},options:[{id:"crush_revolt",text:"",description:"",effects:{populationPercent:-.02,stability:-15,approval:{landowner:25,soldier:15,peasant:-35},resourceDemandMod:{tools:.15,food:.08}}},{id:"negotiate_terms",text:"",description:"",effects:{resourcePercent:{silver:-.02},stability:10,approval:{peasant:25,landowner:-20,artisan:10},resourceDemandMod:{silver:.05,food:.03}}},{id:"promise_reforms",text:"",description:"",effects:{stability:5,approval:{peasant:10},stratumDemandMod:{peasant:.05}},randomEffects:[{chance:.5,effects:{stability:-20,approval:{peasant:-30}},description:""}]}]},{id:"cathedral_construction",name:"",icon:"Church",image:null,description:"",triggerConditions:{minEpoch:3,maxEpoch:5},options:[{id:"grand_cathedral",text:"",description:"",effects:{resourcePercent:{silver:-.02,culture:.08},approval:{cleric:35,artisan:20,peasant:-10,merchant:-15}}},{id:"modest_church",text:"",description:"",effects:{resourcePercent:{silver:-.03,culture:.03},approval:{cleric:10,peasant:5},resourceDemandMod:{food:.05,silver:.02}}},{id:"secular_building",text:"",description:"",effects:{resourcePercent:{silver:-.04,science:.03},approval:{cleric:-25,merchant:20,artisan:15},resourceDemandMod:{silver:.05,brick:.05}}}]},{id:"guild_monopoly",name:"",icon:"Shield",image:null,description:"",triggerConditions:{minEpoch:3,maxEpoch:5},options:[{id:"grant_monopoly",text:"",description:"",effects:{resourcePercent:{culture:.02},stability:10,approval:{artisan:25,merchant:-20,peasant:-10},resourceDemandMod:{tools:.1,cloth:.05}}},{id:"break_monopoly",text:"",description:"",effects:{resourcePercent:{silver:.012},approval:{artisan:-25,merchant:25,peasant:15},resourceDemandMod:{tools:.08,cloth:.03}}},{id:"regulate_guilds",text:"",description:"",effects:{stability:5,approval:{artisan:-5,merchant:10,peasant:5},stratumDemandMod:{artisan:-.03}}}]},{id:"new_world_discovery",name:"",icon:"Compass",image:null,description:"",triggerConditions:{minEpoch:4,maxEpoch:6},options:[{id:"colonize_aggressively",text:"",description:"",effects:{resourcePercent:{silver:.02,food:.015},stability:-10,approval:{soldier:20,merchant:25,cleric:-20,peasant:-10},resourceDemandMod:{food:.1,tools:.08}}},{id:"trade_relations",text:"",description:"",effects:{resourcePercent:{silver:.012,culture:.03},approval:{merchant:30,cleric:10,soldier:-10},resourceDemandMod:{spice:.1,silver:.05}}},{id:"missionary_work",text:"",description:"",effects:{resourcePercent:{silver:.012,culture:.05},approval:{cleric:30,merchant:5},resourceDemandMod:{culture:.1}}},{id:"limited_contact",text:"",description:"",effects:{resourcePercent:{silver:.02},stability:5,approval:{merchant:10,cleric:5},resourceDemandMod:{spice:.05}}}]},{id:"printing_revolution",name:"",icon:"Book",image:null,description:"",triggerConditions:{minEpoch:4,maxEpoch:6},options:[{id:"embrace_printing",text:"",description:"",effects:{resourcePercent:{science:.06,culture:.04},approval:{scribe:30,merchant:20,cleric:-25},resourceDemandMod:{papyrus:.15}}},{id:"church_control",text:"",description:"",effects:{resourcePercent:{science:.03,culture:.02},approval:{cleric:15,scribe:-10},resourceDemandMod:{papyrus:.05}}},{id:"ban_printing",text:"",description:"",effects:{stability:10,approval:{cleric:20,scribe:-35,merchant:-20},stratumDemandMod:{scribe:-.15}}}]},{id:"reformation_movement",name:"",icon:"ScrollText",image:null,description:"",triggerConditions:{minEpoch:4,maxEpoch:6},options:[{id:"support_reformers",text:"",description:"",effects:{resourcePercent:{culture:.05},stability:-20,approval:{cleric:-30,scribe:25,merchant:20,peasant:15}}},{id:"support_church",text:"",description:"",effects:{resourcePercent:{culture:.02},stability:10,approval:{cleric:30,scribe:-20,peasant:-10},stratumDemandMod:{scribe:-.1}}},{id:"allow_both",text:"",description:"",effects:{stability:-10,approval:{cleric:-15,scribe:15,merchant:25,peasant:10},resourceDemandMod:{silver:.08}}}]},{id:"spice_trade_war",name:"",icon:"Anchor",image:null,description:"",triggerConditions:{minEpoch:4,maxEpoch:6},options:[{id:"naval_war",text:"",description:"",effects:{resourcePercent:{silver:-.04},populationPercent:-.012,approval:{merchant:25,soldier:20,peasant:-15},resourceDemandMod:{tools:.15,silver:.08}},randomEffects:[{chance:.5,effects:{resourcePercent:{silver:.08}},description:""}]},{id:"trade_company",text:"",description:"",effects:{resourcePercent:{silver:-.03},approval:{merchant:30,landowner:-10},resourceDemandMod:{silver:.05,plank:.05}}},{id:"find_alternative",text:"",description:"",effects:{resourcePercent:{silver:-.025,science:.03},approval:{merchant:15,scribe:15},resourceDemandMod:{silver:.03,science:.02}}}]},{id:"witch_trials",name:"",icon:"Flame",image:null,description:"",triggerConditions:{minEpoch:4,maxEpoch:5},options:[{id:"full_trials",text:"",description:"",effects:{populationPercent:-.01,stability:5,approval:{cleric:25,peasant:10,scribe:-25},resourceDemandMod:{culture:.1}}},{id:"proper_investigation",text:"",description:"",effects:{resourcePercent:{science:.02},approval:{scribe:20,cleric:-10,peasant:-5},resourceDemandMod:{silver:.02}}},{id:"stop_trials",text:"",description:"",effects:{stability:-10,approval:{cleric:-30,scribe:30,peasant:-15},stratumDemandMod:{cleric:-.15}}}]},{id:"encyclopedie",name:"",icon:"Library",image:null,description:'""',triggerConditions:{minEpoch:5,maxEpoch:6},options:[{id:"fund_encyclopedia",text:"",description:"",effects:{resourcePercent:{silver:-.05,science:.08,culture:.06},approval:{scribe:35,merchant:15,cleric:-25,landowner:-15},resourceDemandMod:{papyrus:.15,silver:.05}}},{id:"censored_version",text:"",description:"",effects:{resourcePercent:{silver:-.04,science:.05,culture:.03},approval:{scribe:5,cleric:5},resourceDemandMod:{papyrus:.08}}},{id:"ban_encyclopedia",text:"",description:"",effects:{stability:5,approval:{cleric:20,landowner:15,scribe:-35,merchant:-15},stratumDemandMod:{scribe:-.15}}}]},{id:"salon_culture",name:"",icon:"Users",image:null,description:"",triggerConditions:{minEpoch:5,maxEpoch:6},options:[{id:"encourage_salons",text:"",description:"",effects:{resourcePercent:{culture:.05,science:.03},stability:-5,approval:{scribe:25,landowner:15,cleric:-15},resourceDemandMod:{coffee:.1,delicacies:.05}}},{id:"monitor_salons",text:"",description:"",effects:{resourcePercent:{culture:.03,science:.02},approval:{scribe:-10,landowner:5},resourceDemandMod:{silver:.02}}},{id:"ban_salons",text:"",description:"",effects:{stability:10,approval:{scribe:-30,landowner:-20,cleric:10},stratumDemandMod:{scribe:-.15}}}]},{id:"social_contract",name:"",icon:"FileText",image:null,description:"",triggerConditions:{minEpoch:5,maxEpoch:6},options:[{id:"embrace_ideas",text:"",description:"",effects:{resourcePercent:{culture:.04},stability:-15,approval:{scribe:30,peasant:25,artisan:20,landowner:-25,cleric:-20},resourceDemandMod:{papyrus:.15}}},{id:"academic_only",text:"",description:"",effects:{resourcePercent:{science:.03},approval:{scribe:10,landowner:-5},resourceDemandMod:{papyrus:.05}}},{id:"burn_books",text:"",description:"",effects:{stability:10,approval:{cleric:20,landowner:15,scribe:-40,peasant:-15},stratumDemandMod:{scribe:-.2}}}]},{id:"scientific_academy",name:"",icon:"Microscope",image:null,description:"",triggerConditions:{minEpoch:5,maxEpoch:6},options:[{id:"grand_academy",text:"",description:"",effects:{resourcePercent:{silver:-.05,science:.08},approval:{scribe:35,merchant:15,landowner:-10},resourceDemandMod:{silver:.05,papyrus:.1}}},{id:"modest_academy",text:"",description:"",effects:{resourcePercent:{silver:-.03,science:.05},approval:{scribe:20}}},{id:"private_funding",text:"",description:"",effects:{resourcePercent:{science:.03},approval:{merchant:15,scribe:10},resourceDemandMod:{silver:.02}}}]},{id:"vaccination_debate",name:"",icon:"Syringe",image:null,description:'""',triggerConditions:{minEpoch:5,maxEpoch:6},options:[{id:"mandatory_vaccination",text:"",description:"",effects:{population:30,resourcePercent:{silver:-.035,science:.04},approval:{scribe:25,cleric:-25,peasant:-15},resourceDemandMod:{silver:.03,science:.02}}},{id:"voluntary_vaccination",text:"",description:"",effects:{populationPercent:.04,resourcePercent:{silver:-.012,science:.03},approval:{scribe:15,peasant:5},resourceDemandMod:{silver:.01,science:.01}}},{id:"ban_vaccination",text:"",description:"",effects:{approval:{cleric:20,peasant:10,scribe:-30},stratumDemandMod:{scribe:-.15}}}]},{id:"factory_conditions",name:"",icon:"Factory",image:null,description:"",triggerConditions:{minEpoch:6},options:[{id:"strict_regulation",text:"",description:"",effects:{resourcePercent:{silver:-.02},stability:10,approval:{worker:35,artisan:20,merchant:-25,landowner:-15},resourceDemandMod:{silver:.02,tools:.05}}},{id:"mild_reform",text:"",description:"",effects:{resourcePercent:{silver:-.012},approval:{worker:15,merchant:-5},resourceDemandMod:{silver:.01}}},{id:"free_market",text:"",description:"",effects:{resourcePercent:{silver:.012},stability:-10,approval:{merchant:25,worker:-30,artisan:-20},stratumDemandMod:{worker:-.15}}}]},{id:"railway_mania",name:"",icon:"Train",image:null,description:"",triggerConditions:{minEpoch:6},options:[{id:"state_railway",text:"",description:"",effects:{resourcePercent:{silver:-.015,science:.04},populationPercent:.05,stability:5,resourceDemandMod:{iron:.3,coal:.35,wood:.2,steel:.15},approval:{worker:20,merchant:-15,landowner:-10}}},{id:"regulate_private",text:"",description:"",effects:{resourcePercent:{silver:-.03,science:.03},populationPercent:.03,resourceDemandMod:{iron:.2,coal:.2,wood:.15,steel:.1},approval:{merchant:15,worker:10}}},{id:"laissez_faire",text:"",description:"",effects:{resourcePercent:{science:.02},resourceDemandMod:{iron:.15,coal:.1,steel:.08},approval:{merchant:25}},randomEffects:[{chance:.4,effects:{resourcePercent:{silver:-.05},stability:-15},description:""}]}]},{id:"labor_union_formation",name:"",icon:"Users",image:null,description:"",triggerConditions:{minEpoch:6},options:[{id:"legalize_unions",text:"",description:"",effects:{stability:5,resourceDemandMod:{food:.15,cloth:.1},approval:{worker:40,artisan:25,merchant:-30,landowner:-20},resourceDemandMod:{food:.1,cloth:.05}}},{id:"limited_rights",text:"",description:"",effects:{resourceDemandMod:{food:.05},approval:{worker:15,merchant:-10},resourceDemandMod:{food:.05}}},{id:"ban_unions",text:"",description:"",effects:{stability:-15,resourceDemandMod:{food:-.1},approval:{merchant:20,landowner:15,worker:-40,artisan:-25}}}]},{id:"urban_poverty",name:"",icon:"Home",image:null,description:"",triggerConditions:{minEpoch:6},options:[{id:"public_housing",text:"",description:"",effects:{resourcePercent:{silver:-.05},populationPercent:.04,resourceDemandMod:{wood:.3,stone:.25,brick:.2},stability:10,approval:{worker:30,peasant:20,merchant:-15,landowner:-10}}},{id:"incentivize_private",text:"",description:"",effects:{resourcePercent:{silver:-.02},populationPercent:.02,approval:{merchant:15,worker:5},resourceDemandMod:{brick:.08,steel:.03}}},{id:"demolish_slums",text:"",description:"",effects:{populationPercent:-.012,stability:-10,approval:{landowner:15,worker:-30,peasant:-25},stratumDemandMod:{worker:-.15}}}]},{id:"communist_manifesto",name:"",icon:"BookOpen",image:null,description:"",triggerConditions:{minEpoch:6},options:[{id:"suppress_movement",text:"",description:"",effects:{stability:5,resourceDemandMod:{food:-.1},approval:{landowner:20,merchant:15,worker:-35,artisan:-20}}},{id:"reform_to_defuse",text:"",description:"",effects:{resourcePercent:{silver:-.03},stability:10,resourceDemandMod:{food:.05,cloth:.08},approval:{worker:20,artisan:15,merchant:-15},resourceDemandMod:{food:.05,cloth:.03}}},{id:"allow_debate",text:"",description:"",effects:{resourcePercent:{culture:.03},stability:-15,resourceDemandMod:{culture:.1},approval:{worker:25,scribe:20,landowner:-25,merchant:-20}}}]},{id:"ritual_reform",name:"",icon:"Scroll",description:'""',triggerConditions:{minEpoch:1,maxEpoch:3,minPopulation:100},options:[{id:"establish_ritual",text:"",description:"",effects:{resourcePercent:{culture:.05,silver:-.012},stability:20,approval:{landowner:25,official:30,cleric:20,peasant:-15,worker:-10}}},{id:"simplify_ritual",text:"",description:"",effects:{resourcePercent:{culture:.02},stability:5,approval:{merchant:15,artisan:10,peasant:10,official:-10}}},{id:"reject_ritual",text:"",description:"",effects:{stability:-15,approval:{peasant:20,worker:20,landowner:-30,official:-25}}}]},{id:"wandering_sage",name:"",icon:"User",description:'""',triggerConditions:{minEpoch:2,maxEpoch:4,minPopulation:150},options:[{id:"hire_sage",text:"",description:"",effects:{resourcePercent:{culture:.08,silver:-.012},stability:15,approval:{scribe:35,official:25,cleric:20,peasant:10,merchant:-10},resourceDemandMod:{papyrus:.1,silver:.05}}},{id:"allow_teaching",text:"",description:"",effects:{resourcePercent:{culture:.04},stability:5,approval:{scribe:25,peasant:15,worker:10,official:-5}}},{id:"expel_sage",text:"",description:"",effects:{resourcePercent:{culture:-.02},stability:5,approval:{soldier:10,merchant:10,scribe:-30,cleric:-20}}}]},{id:"great_wall_project",name:"",icon:"Building",description:"",triggerConditions:{minEpoch:2,maxEpoch:4,minPopulation:250},options:[{id:"build_wall",text:"",description:"",effects:{resourcePercent:{stone:-.03,silver:-.02},populationPercent:-.012,stability:-20,approval:{soldier:30,landowner:20,peasant:-40,worker:-35,serf:-40},resourceDemandMod:{stone:.2,food:.15}},randomEffects:[{chance:.4,effects:{stability:30,approval:{soldier:20}},description:""},{chance:.3,effects:{stability:-30,populationPercent:-.012,approval:{peasant:-30}},description:""}]},{id:"limited_fortification",text:"",description:"",effects:{resourcePercent:{stone:-.06,silver:-.028},populationPercent:-.03,stability:5,approval:{soldier:15,peasant:-10},stratumDemandMod:{peasant:-.05}}},{id:"reject_wall",text:"",description:"",effects:{approval:{peasant:20,worker:15,soldier:-20,landowner:-15}},randomEffects:[{chance:.3,effects:{resourcePercent:{silver:-.012,food:-.03},stability:-20},description:""}]}]},{id:"vassal_rebellion",name:"",icon:"Swords",description:'""',triggerConditions:{minEpoch:2,maxEpoch:4,minPopulation:200,classConditions:{landowner:{maxApproval:40}}},options:[{id:"crush_rebellion",text:"",description:"",effects:{resourcePercent:{silver:-.025},stability:-25,approval:{soldier:20,official:15,landowner:-30},resourceDemandMod:{tools:.15,food:.1}},randomEffects:[{chance:.6,effects:{stability:35,resourcePercent:{silver:.012},approval:{landowner:-20,official:20}},description:""},{chance:.4,effects:{stability:-40,populationPercent:-.015,approval:{soldier:-20,peasant:-30}},description:""}]},{id:"negotiate_peace",text:"",description:"",effects:{stability:10,approval:{landowner:25,official:-20,soldier:-15},stratumDemandMod:{official:-.1}}},{id:"abandon_reform",text:"",description:"",effects:{stability:15,approval:{landowner:40,official:-30,peasant:-10},stratumDemandMod:{official:-.15}}}]},{id:"frontier_general_rebellion",name:"",icon:"Horse",description:"",triggerConditions:{minEpoch:3,maxEpoch:5,minPopulation:350,classConditions:{soldier:{maxApproval:50}}},options:[{id:"flee_capital",text:"",description:"",effects:{resourcePercent:{silver:-.03},stability:-40,populationPercent:-.012,approval:{official:-30,soldier:-20,peasant:-25,merchant:-30},resourceDemandMod:{silver:.05}},randomEffects:[{chance:.5,effects:{stability:30,approval:{soldier:30}},description:""}]},{id:"defend_capital",text:"",description:"",effects:{resourcePercent:{silver:-.02},stability:-20,approval:{soldier:25,official:20,peasant:10},resourceDemandMod:{tools:.2,food:.15}},randomEffects:[{chance:.4,effects:{stability:40,approval:{soldier:30,official:25}},description:""},{chance:.4,effects:{stability:-50,populationPercent:-.012,approval:{soldier:-30,peasant:-40}},description:""}]},{id:"seek_foreign_aid",text:"",description:"",effects:{resourcePercent:{silver:-.025},stability:-10,approval:{soldier:-15,peasant:-20,official:10},resourceDemandMod:{silver:.08}},randomEffects:[{chance:.6,effects:{stability:25},description:""},{chance:.3,effects:{resourcePercent:{silver:-.02,food:-.05},stability:-20},description:""}]}]},{id:"disarm_generals",name:"",icon:"Wine",description:"",triggerConditions:{minEpoch:3,maxEpoch:5,minPopulation:250},options:[{id:"release_generals",text:"",description:"",effects:{resourcePercent:{silver:-.03},stability:30,approval:{soldier:-25,knight:-30,official:30,landowner:20,merchant:15},resourceDemandMod:{silver:.05}}},{id:"partial_release",text:"",description:"",effects:{resourcePercent:{silver:-.012},stability:15,approval:{soldier:-10,knight:-15,official:15},stratumDemandMod:{soldier:-.05}}},{id:"keep_military",text:"",description:"",effects:{approval:{soldier:20,knight:25,official:-10},stratumDemandMod:{official:-.05}},randomEffects:[{chance:.25,effects:{stability:-35,approval:{soldier:-20}},description:""}]}]},{id:"radical_reform",name:"",icon:"FileText",description:'""',triggerConditions:{minEpoch:3,maxEpoch:5,minPopulation:300},options:[{id:"full_reform",text:"",description:"",effects:{resourcePercent:{silver:.012,culture:-.03},stability:-25,approval:{official:-30,landowner:-35,merchant:20,peasant:15,soldier:20},resourceDemandMod:{papyrus:.1,silver:.05}},randomEffects:[{chance:.4,effects:{resourcePercent:{silver:.03},stability:20},description:""},{chance:.35,effects:{stability:-30,approval:{peasant:-30,official:-20}},description:""}]},{id:"gradual_reform",text:"",description:"",effects:{resourcePercent:{silver:.012},stability:-5,approval:{official:-10,landowner:-15,merchant:10,peasant:5},resourceDemandMod:{papyrus:.05,silver:.02}}},{id:"reject_reform",text:"",description:"",effects:{stability:10,approval:{official:20,landowner:25,merchant:-15,peasant:-10},stratumDemandMod:{peasant:-.05}}}]},{id:"emperor_personal_campaign",name:"",icon:"Crown",description:"",triggerConditions:{minEpoch:3,maxEpoch:5,minPopulation:350},options:[{id:"personal_campaign",text:"",description:"",effects:{resourcePercent:{silver:-.03},stability:-15,approval:{soldier:30,official:-25},resourceDemandMod:{tools:.2,food:.15}},randomEffects:[{chance:.25,effects:{stability:40,resourcePercent:{culture:.05},approval:{soldier:30,official:20}},description:""},{chance:.5,effects:{stability:-60,populationPercent:-.025,resourcePercent:{silver:-.04},approval:{soldier:-40,official:-30,peasant:-30}},description:""}]},{id:"send_general",text:"",description:"",effects:{resourcePercent:{silver:-.02},stability:5,approval:{soldier:15,official:15},resourceDemandMod:{tools:.1,food:.08}},randomEffects:[{chance:.5,effects:{stability:20,approval:{soldier:15}},description:""}]},{id:"negotiate_tribute",text:"",description:"",effects:{resourcePercent:{silver:-.025},stability:10,approval:{soldier:-25,merchant:15,peasant:10,official:-10}}}]},{id:"grand_secretary_reform",name:"",icon:"Scale",description:'""',triggerConditions:{minEpoch:4,maxEpoch:6,minPopulation:350},options:[{id:"support_reform",text:"",description:"",effects:{resourcePercent:{silver:.03},stability:-15,approval:{official:-30,landowner:-35,peasant:25,merchant:20,worker:15},resourceDemandMod:{papyrus:.1,silver:.05}},randomEffects:[{chance:.5,effects:{resourcePercent:{silver:.012},stability:25},description:""},{chance:.3,effects:{stability:-25,approval:{official:-20}},description:""}]},{id:"moderate_reform",text:"",description:"",effects:{resourcePercent:{silver:.012},stability:5,approval:{official:-10,landowner:-15,peasant:10},resourceDemandMod:{papyrus:.05,silver:.02}}},{id:"block_reform",text:"",description:"",effects:{stability:10,approval:{official:25,landowner:30,peasant:-20,merchant:-15},resourceDemandMod:{brick:.15,steel:.08}}}]},{id:"universal_taxation",name:"",icon:"Coins",description:"",triggerConditions:{minEpoch:4,maxEpoch:6,minPopulation:350},options:[{id:"enforce_universal_tax",text:"",description:"",effects:{resourcePercent:{silver:.012},stability:-20,approval:{official:-40,landowner:-35,scribe:-30,peasant:30,worker:25,merchant:10},resourceDemandMod:{silver:.05,papyrus:.03}},randomEffects:[{chance:.4,effects:{resourcePercent:{silver:.012},stability:20},description:""},{chance:.3,effects:{stability:-30,approval:{official:-20,scribe:-15}},description:""}]},{id:"partial_reform",text:"",description:"",effects:{resourcePercent:{silver:.02},stability:-5,approval:{landowner:-20,official:-15,scribe:-10,peasant:15},resourceDemandMod:{silver:.02,papyrus:.01}}},{id:"maintain_privilege",text:"",description:"",effects:{stability:5,approval:{official:20,landowner:25,scribe:20,peasant:-20,worker:-15},resourceDemandMod:{papyrus:.05}}}]},{id:"black_ships",name:"",icon:"Ship",description:"",triggerConditions:{minEpoch:5,maxEpoch:6,minPopulation:350},options:[{id:"open_ports",text:"",description:"",effects:{resourcePercent:{silver:.012,culture:.03},stability:-20,approval:{merchant:35,official:-20,soldier:-30,peasant:-15,landowner:-20},nationRelation:{all:20},nationAggression:{all:-.15}},randomEffects:[{chance:.5,effects:{resourcePercent:{silver:.012,science:.05},stability:15,nationRelation:{random:10}},description:""},{chance:.3,effects:{stability:-25,approval:{peasant:-20,worker:-20}},description:""}]},{id:"limited_trade",text:"",description:"",effects:{resourcePercent:{silver:.012},stability:-5,approval:{merchant:15,official:5,soldier:-10},resourceDemandMod:{silver:.02,tools:.01}}},{id:"resist_foreigners",text:"",description:"",effects:{stability:-10,approval:{soldier:30,peasant:15,merchant:-30,official:10},nationRelation:{all:-30},nationAggression:{all:.2}},randomEffects:[{chance:.6,effects:{resourcePercent:{silver:-.025},populationPercent:-.012,stability:-30,triggerWar:"strongest"},description:""}]}]},{id:"defenestration",name:"",icon:"Landmark",description:"",triggerConditions:{minEpoch:3,maxEpoch:5,minPopulation:250,classConditions:{cleric:{maxApproval:50}}},options:[{id:"punish_rebels",text:"",description:"",effects:{resourcePercent:{silver:-.02},stability:-30,approval:{cleric:20,official:25,landowner:-30,peasant:-20},resourceDemandMod:{tools:.15,food:.1}},randomEffects:[{chance:.5,effects:{stability:-40,populationPercent:-.1},description:""}]},{id:"negotiate_settlement",text:"",description:"",effects:{stability:-10,approval:{cleric:-10,official:-15,landowner:15,merchant:10},resourceDemandMod:{silver:.03}}},{id:"religious_freedom",text:"",description:"",effects:{resourcePercent:{culture:.03},stability:-5,approval:{cleric:-35,landowner:20,merchant:20,peasant:15,worker:10},resourceDemandMod:{culture:.05}}}]}],Yx=[{id:"trade_boom",name:"",icon:"Coins",description:"",triggerConditions:{minPopulation:60,minEpoch:1,maxEpoch:5},options:[{id:"encourage_trade",text:"",effects:{approval:{merchant:15,capitalist:10},resourceDemandMod:{cloth:.25,spice:.3},buildingProductionMod:{industry:.1}}},{id:"regulate_trade",text:"",effects:{resourcePercent:{silver:.05},approval:{merchant:-10,official:5},resourceDemandMod:{cloth:-.1}}},{id:"monopolize",text:"",effects:{resourcePercent:{silver:.08},approval:{merchant:-20,capitalist:-15},buildingProductionMod:{industry:-.15},stability:-5}}]},{id:"silk_road_revival",name:"",icon:"Compass",description:"",triggerConditions:{minPopulation:120,minEpoch:2,maxEpoch:4},options:[{id:"embrace_trade",text:"",effects:{approval:{merchant:20,capitalist:15},resourceDemandMod:{cloth:.4,spice:.5},buildingProductionMod:{loom_house:.2,dye_works:.15},stability:3}},{id:"cautious_opening",text:"",effects:{approval:{artisan:10,merchant:-5},resourceDemandMod:{cloth:.15},buildingProductionMod:{industry:.05}}},{id:"close_borders",text:"",effects:{approval:{merchant:-25,peasant:5},resourceDemandMod:{spice:-.3,cloth:-.2},stability:-3}}]},{id:"harvest_festival",name:"",icon:"Wheat",description:"",triggerConditions:{minPopulation:50},options:[{id:"celebrate",text:"",effects:{resourcePercent:{silver:-.02},approval:{peasant:15,serf:10},buildingProductionMod:{farm:.15,gather:.1},stability:5}},{id:"store_grain",text:"",effects:{resourcePercent:{food:.08},approval:{peasant:-5},resourceDemandMod:{food:-.1}}},{id:"sell_surplus",text:"",effects:{resourcePercent:{food:-.05,silver:.08},approval:{merchant:10}}}]},{id:"locust_plague",name:"",icon:"AlertTriangle",description:"",triggerConditions:{minPopulation:80},options:[{id:"organize_extermination",text:"",effects:{resourcePercent:{silver:-.03},buildingProductionMod:{farm:-.2,gather:-.15},approval:{peasant:5},stability:-3}},{id:"pray_to_gods",text:"",effects:{resourcePercent:{silver:-.02},buildingProductionMod:{farm:-.3},approval:{cleric:10,peasant:-5},stability:-5}},{id:"import_grain",text:"",effects:{resourcePercent:{silver:-.08},resourceDemandMod:{food:.3},approval:{peasant:10},buildingProductionMod:{farm:-.25}}}]},{id:"new_technology",name:"",icon:"Lightbulb",description:"",triggerConditions:{minPopulation:80,minEpoch:2,maxEpoch:5},options:[{id:"promote_innovation",text:"",effects:{resourcePercent:{silver:-.03,science:.08},approval:{artisan:15,engineer:20},buildingProductionMod:{industry:.2,all:.05}}},{id:"control_technology",text:"",effects:{resourcePercent:{science:.05},approval:{official:10,artisan:-10},buildingProductionMod:{industry:.1}}},{id:"suppress_innovation",text:"",effects:{approval:{artisan:-15,cleric:10},buildingProductionMod:{industry:-.1},stability:-5}}]},{id:"mining_discovery",name:"",icon:"Gem",description:"",triggerConditions:{minPopulation:70,minEpoch:1,maxEpoch:5},options:[{id:"state_mining",text:"",effects:{resourcePercent:{silver:.05},buildingProductionMod:{mine:.25,quarry:.15},approval:{miner:-10,official:10}}},{id:"private_mining",text:"",effects:{buildingProductionMod:{mine:.35,quarry:.2},approval:{miner:15,capitalist:10},resourceDemandMod:{iron:.2,stone:.15}}},{id:"careful_extraction",text:"",effects:{buildingProductionMod:{mine:.1},approval:{peasant:10,miner:-10},stability:3}}]},{id:"luxury_craze",name:"",icon:"Sparkles",description:"",triggerConditions:{minPopulation:100,minEpoch:2,maxEpoch:5},options:[{id:"encourage_luxury",text:"",effects:{approval:{landowner:15,merchant:10,artisan:10},stratumDemandMod:{landowner:.3,merchant:.2},resourceDemandMod:{cloth:.2,spice:.25},buildingProductionMod:{loom_house:.15,dye_works:.1}}},{id:"tax_luxury",text:"",effects:{resourcePercent:{silver:.05},approval:{landowner:-15,peasant:5},stratumDemandMod:{landowner:-.15}}},{id:"ban_luxury",text:"",effects:{approval:{landowner:-25,cleric:15},stratumDemandMod:{landowner:-.3,merchant:-.2},resourceDemandMod:{cloth:-.15,spice:-.2},stability:-5}}]},{id:"tea_coffee_introduction",name:"",icon:"Coffee",description:"/",triggerConditions:{minPopulation:100,minEpoch:3,maxEpoch:6},options:[{id:"promote_drink",text:"",effects:{approval:{merchant:15,landowner:10},resourceDemandMod:{coffee:.4},stratumDemandMod:{landowner:.1,merchant:.15},buildingProductionMod:{industry:.05}}},{id:"monopolize_trade",text:"",effects:{resourcePercent:{silver:.06},approval:{merchant:-15},resourceDemandMod:{coffee:.2}}},{id:"restrict_import",text:"",effects:{approval:{peasant:5,merchant:-10},resourceDemandMod:{coffee:-.1}}}]},{id:"currency_crisis",name:"",icon:"AlertTriangle",description:"",triggerConditions:{minPopulation:80,minEpoch:2,maxEpoch:5},options:[{id:"mint_new_coins",text:"",effects:{resourcePercent:{silver:-.08},approval:{merchant:15,peasant:10},resourceDemandMod:{iron:.2,copper:.3},stability:5}},{id:"price_control",text:"",effects:{approval:{merchant:-20,peasant:10},buildingProductionMod:{industry:-.1},stability:-3}},{id:"do_nothing",text:"",effects:{approval:{merchant:5,peasant:-15},stratumDemandMod:{peasant:-.2,serf:-.2},stability:-8}}]},{id:"banking_emergence",name:"",icon:"Landmark",description:"",triggerConditions:{minPopulation:150,minEpoch:3,maxEpoch:5},options:[{id:"support_banking",text:"",effects:{approval:{merchant:20,capitalist:25,cleric:-10},buildingProductionMod:{industry:.15},stratumDemandMod:{merchant:.1,capitalist:.15},stability:3}},{id:"regulate_banking",text:"",effects:{approval:{merchant:-5,official:10},buildingProductionMod:{industry:.05}}},{id:"ban_usury",text:"",effects:{approval:{cleric:15,merchant:-20,capitalist:-25},buildingProductionMod:{industry:-.1},stability:-5}}]},{id:"labor_shortage",name:"",icon:"Users",description:"",triggerConditions:{minPopulation:100},options:[{id:"increase_wages",text:"",effects:{resourcePercent:{silver:-.05},approval:{peasant:15,worker:15,artisan:10},buildingProductionMod:{all:-.1},stratumDemandMod:{peasant:.1,worker:.1}}},{id:"forced_labor",text:"",effects:{approval:{peasant:-20,serf:-25},buildingProductionMod:{gather:.1,industry:.05},stability:-10}},{id:"import_labor",text:"",effects:{populationPercent:.05,approval:{peasant:-10},buildingProductionMod:{all:.05}}}]},{id:"guild_conflict",name:"",icon:"Handshake",description:"",triggerConditions:{minPopulation:100,minEpoch:2,maxEpoch:4},options:[{id:"mediate",text:"",effects:{resourcePercent:{silver:-.02},approval:{artisan:5,merchant:5,official:5},buildingProductionMod:{industry:.05},stability:3}},{id:"support_guilds",text:"",effects:{approval:{artisan:15,merchant:-10},buildingProductionMod:{industry:.1},resourceDemandMod:{tools:.15}}},{id:"abolish_guilds",text:"",effects:{approval:{artisan:-20,merchant:15,capitalist:20},buildingProductionMod:{industry:-.05},stability:-5}}]},{id:"forest_depletion",name:"",icon:"Trees",description:"",triggerConditions:{minPopulation:100,minEpoch:2,maxEpoch:5},options:[{id:"plant_trees",text:"",effects:{resourcePercent:{silver:-.03},buildingProductionMod:{lumber_camp:-.3},resourceDemandMod:{wood:-.2},approval:{peasant:5},stability:5},randomEffects:[{chance:.5,effects:{buildingProductionMod:{lumber_camp:.2}}}]},{id:"import_wood",text:"",effects:{resourcePercent:{silver:-.05},resourceDemandMod:{wood:.3},approval:{merchant:10}}},{id:"find_alternatives",text:"",effects:{resourcePercent:{science:.05},resourceDemandMod:{wood:-.15,stone:.2,brick:.25},buildingProductionMod:{quarry:.15,brickworks:.2}}}]},{id:"salt_shortage",name:"",icon:"Droplets",description:"",triggerConditions:{minPopulation:100},options:[{id:"government_distribution",text:"",effects:{resourcePercent:{silver:-.04},approval:{peasant:15,serf:10},stratumDemandMod:{peasant:-.1,serf:-.1},stability:5}},{id:"increase_production",text:"",effects:{resourcePercent:{silver:-.03},buildingProductionMod:{gather:.1},approval:{worker:5}}},{id:"crack_down_hoarding",text:"",effects:{approval:{merchant:-15,peasant:10},stability:-3}}]},{id:"foreign_embargo",name:"",icon:"Globe",description:"",triggerConditions:{minPopulation:100,minEpoch:2,maxEpoch:5},options:[{id:"develop_domestic",text:"",effects:{resourcePercent:{silver:-.05},buildingProductionMod:{industry:.2},resourceDemandMod:{spice:-.3,cloth:-.2},approval:{artisan:15,capitalist:10},stability:-3,nationRelation:{hostile:-10}}},{id:"smuggling",text:"",effects:{approval:{merchant:10,official:-10},resourceDemandMod:{spice:.1},stability:-5,nationRelation:{hostile:-15}}},{id:"negotiate",text:"",effects:{resourcePercent:{silver:-.03},approval:{official:5},nationRelation:{hostile:5}},randomEffects:[{chance:.4,effects:{resourceDemandMod:{spice:.2,cloth:.15},stability:5,nationRelation:{hostile:20}},description:""}]}]},{id:"trade_route_discovery",name:"",icon:"Ship",description:"",triggerConditions:{minPopulation:250,minEpoch:4,maxEpoch:5},options:[{id:"fund_expedition",text:"",effects:{resourcePercent:{silver:-.08},approval:{navigator:25,merchant:15},resourceDemandMod:{spice:.5,cloth:.3},buildingProductionMod:{dockyard:.3}},randomEffects:[{chance:.3,effects:{resourcePercent:{silver:.08},approval:{merchant:10}}}]},{id:"cautious_expansion",text:"",effects:{resourcePercent:{silver:-.03},approval:{navigator:10},resourceDemandMod:{spice:.2}}},{id:"isolationism",text:"",effects:{approval:{navigator:-20,merchant:-15,peasant:10},stability:3}}]},{id:"bubble_economy",name:"",icon:"TrendingUp",description:"",triggerConditions:{minPopulation:130,minEpoch:3,maxEpoch:6},options:[{id:"join_speculation",text:"",effects:{resourcePercent:{silver:-.05}},randomEffects:[{chance:.4,effects:{resourcePercent:{silver:.08},approval:{merchant:10}}},{chance:.6,effects:{resourcePercent:{silver:-.08},stability:-10,approval:{merchant:-15,peasant:-10}}}]},{id:"ban_speculation",text:"",effects:{approval:{merchant:-20,capitalist:-15},stability:5}},{id:"warn_people",text:"",effects:{approval:{official:5}},randomEffects:[{chance:.5,effects:{stability:-5,approval:{peasant:-10}}}]}]},{id:"counterfeiting_ring",name:"",icon:"Shield",description:"",triggerConditions:{minPopulation:80,minEpoch:2,maxEpoch:5},options:[{id:"harsh_punishment",text:"",effects:{approval:{official:10,merchant:10},stability:5}},{id:"currency_reform",text:"",effects:{resourcePercent:{silver:-.08},approval:{merchant:15},resourceDemandMod:{copper:.3,iron:.2},stability:3}},{id:"cover_up",text:"",effects:{approval:{official:-10},stability:-8},randomEffects:[{chance:.5,effects:{approval:{peasant:-15,merchant:-15},stability:-10}}]}]},{id:"tulip_mania",name:"",icon:"Flower",description:"",triggerConditions:{minPopulation:120,minEpoch:4,maxEpoch:5},options:[{id:"join_speculation",text:"",effects:{resourcePercent:{silver:-.06}},randomEffects:[{chance:.3,effects:{resourcePercent:{silver:.12},approval:{merchant:15,landowner:10}},description:""},{chance:.5,effects:{resourcePercent:{silver:-.1},stability:-15,approval:{merchant:-20,peasant:-10}},description:""}]},{id:"ban_trading",text:"",effects:{approval:{merchant:-25,landowner:-15},stability:5}},{id:"tax_transactions",text:"",effects:{resourcePercent:{silver:.04},approval:{merchant:-15}}}]},{id:"south_sea_bubble",name:"",icon:"Ship",description:'""',triggerConditions:{minPopulation:150,minEpoch:5,maxEpoch:6},options:[{id:"invest_heavily",text:"",effects:{resourcePercent:{silver:-.08}},randomEffects:[{chance:.25,effects:{resourcePercent:{silver:.15},approval:{capitalist:20}},description:""},{chance:.6,effects:{resourcePercent:{silver:-.12},stability:-20,approval:{capitalist:-25,merchant:-15}},description:""}]},{id:"regulate_market",text:"",effects:{resourcePercent:{silver:-.02},approval:{capitalist:-15,official:10},stability:8}},{id:"let_it_crash",text:"",effects:{},randomEffects:[{chance:.7,effects:{stability:-15,approval:{merchant:-20,capitalist:-20}},description:""}]}]},{id:"merchant_league",name:"",icon:"Handshake",description:"",triggerConditions:{minPopulation:120,minEpoch:3,maxEpoch:5},options:[{id:"grant_privileges",text:"",effects:{resourcePercent:{silver:.06},approval:{merchant:30,capitalist:20,artisan:-15},buildingProductionMod:{dockyard:.25},nationRelation:{all:10}}},{id:"partial_cooperation",text:"",effects:{resourcePercent:{silver:.03},approval:{merchant:10,official:5}}},{id:"reject_league",text:"",effects:{approval:{merchant:-25,official:15,soldier:10},stability:-5}}]},{id:"trading_company",name:"",icon:"Building",description:"/",triggerConditions:{minPopulation:150,minEpoch:4,maxEpoch:6},options:[{id:"charter_company",text:"",effects:{resourcePercent:{silver:.08},approval:{merchant:25,capitalist:30,artisan:-10},resourceDemandMod:{spice:.4,cloth:.3},nationRelation:{random:15}}},{id:"state_monopoly",text:"",effects:{resourcePercent:{silver:.05},approval:{merchant:-20,official:15},buildingProductionMod:{dockyard:.15}}},{id:"free_trade",text:"",effects:{approval:{merchant:15,capitalist:-10},resourceDemandMod:{spice:.2},nationRelation:{all:5}}}]},{id:"great_famine",name:"",icon:"Skull",description:"",triggerConditions:{minPopulation:150,minEpoch:2,maxEpoch:5},options:[{id:"free_distribution",text:"",effects:{resourcePercent:{food:-.1,silver:-.03},populationPercent:-.02,approval:{peasant:25,serf:20,merchant:-15},stability:10}},{id:"import_grain",text:"",effects:{resourcePercent:{silver:-.08},populationPercent:-.015,approval:{merchant:10,peasant:10},nationRelation:{friendly:10},nationWealth:{friendly:200}}},{id:"let_market_handle",text:"",effects:{populationPercent:-.05,stability:-20,approval:{peasant:-30,serf:-25,merchant:10}}}]},{id:"salt_tax_rebellion",name:"",icon:"AlertTriangle",description:"",triggerConditions:{minPopulation:150,minEpoch:2,maxEpoch:5},options:[{id:"lower_tax",text:"",effects:{resourcePercent:{silver:-.04},approval:{peasant:20,merchant:15},stability:10}},{id:"suppress_rebellion",text:"",effects:{resourcePercent:{silver:-.02},populationPercent:-.01,approval:{peasant:-25,soldier:10},stability:-10}},{id:"reform_salt_system",text:"",effects:{resourcePercent:{silver:-.03},approval:{official:10,merchant:5,peasant:10},stability:5}}]},{id:"coin_debasement",name:"",icon:"Coins",description:'""',triggerConditions:{minPopulation:150,minEpoch:2,maxEpoch:5},options:[{id:"debase_secretly",text:"",effects:{resourcePercent:{silver:.06}},randomEffects:[{chance:.6,effects:{stability:-25,approval:{merchant:-30,peasant:-20},resourceDemandMod:{iron:.3,copper:.2}},description:""}]},{id:"open_devaluation",text:"",effects:{resourcePercent:{silver:.04},stability:-10,approval:{merchant:-15,peasant:-10,official:5}}},{id:"find_alternatives",text:"",effects:{approval:{official:10}}}]},{id:"enclosure_movement",name:"",icon:"Fence",description:'""',triggerConditions:{minPopulation:200,minEpoch:4,maxEpoch:6},options:[{id:"allow_enclosure",text:"",effects:{resourceDemandMod:{cloth:.3},buildingProductionMod:{loom_house:.2},approval:{landowner:25,capitalist:15,peasant:-30,serf:-25},stability:-10}},{id:"compensate_peasants",text:"",effects:{resourcePercent:{silver:-.05},resourceDemandMod:{cloth:.2},approval:{landowner:10,peasant:-10},stability:-3}},{id:"protect_commons",text:"",effects:{approval:{peasant:20,serf:15,landowner:-20,capitalist:-15},stability:5}}]},{id:"railroad_mania",name:"",icon:"Train",description:"",triggerConditions:{minPopulation:180,minEpoch:6,maxEpoch:7},options:[{id:"encourage_investment",text:"",effects:{buildingProductionMod:{industry:.25},approval:{capitalist:25,engineer:20,worker:10}},randomEffects:[{chance:.5,effects:{stability:-15,approval:{capitalist:-20},resourcePercent:{silver:-.05}},description:""}]},{id:"state_railways",text:"",effects:{resourcePercent:{silver:-.06},buildingProductionMod:{industry:.15},approval:{official:15,capitalist:-10},stability:5}},{id:"cautious_approach",text:"",effects:{approval:{capitalist:-10,engineer:-5}}}]},{id:"bank_run",name:"",icon:"Landmark",description:"",triggerConditions:{minPopulation:150,minEpoch:4,maxEpoch:6},options:[{id:"bailout",text:"",effects:{resourcePercent:{silver:-.08},approval:{merchant:15,capitalist:20,peasant:-10},stability:10}},{id:"let_it_fail",text:"",effects:{approval:{merchant:-25,capitalist:-30,peasant:5},stability:-15,buildingProductionMod:{industry:-.1}}},{id:"temporary_closure",text:"",effects:{approval:{merchant:-15,official:10},stability:-5,buildingProductionMod:{industry:-.05}}}]},{id:"winter_preparation",name:"",icon:"Snowflake",description:"",triggerConditions:{minPopulation:50},options:[{id:"encourage_stockpiling",text:"",effects:{resourceDemandMod:{food:.25,cloth:.3,wood:.2},stratumDemandMod:{peasant:.15,worker:.12},approval:{peasant:10},stability:3}},{id:"price_control",text:"",effects:{resourceDemandMod:{food:.1,cloth:.15},approval:{merchant:-15,peasant:15},stability:5}},{id:"do_nothing",text:"",effects:{resourceDemandMod:{food:.35,cloth:.4},stratumDemandMod:{landowner:.2,merchant:.15},approval:{peasant:-10},stability:-5}}]},{id:"festival_season",name:"",icon:"Gift",description:"",triggerConditions:{minPopulation:80},options:[{id:"grand_celebration",text:"",effects:{resourcePercent:{silver:-.03},resourceDemandMod:{ale:.4,delicacies:.35,cloth:.25,spice:.3},stratumDemandMod:{landowner:.25,merchant:.2,official:.15},approval:{peasant:15,merchant:20},stability:8}},{id:"modest_celebration",text:"",effects:{resourceDemandMod:{ale:.15,delicacies:.1},stratumDemandMod:{peasant:.1},approval:{peasant:5},stability:3}},{id:"ban_festivities",text:"",effects:{resourceDemandMod:{ale:-.1,delicacies:-.15,spice:-.1},stratumDemandMod:{landowner:-.15,merchant:-.1},approval:{merchant:-20,landowner:-15,cleric:10},stability:-3}}]},{id:"fashion_trend",name:"",icon:"Shirt",description:"",triggerConditions:{minPopulation:100,minEpoch:1},options:[{id:"follow_trend",text:"",effects:{resourceDemandMod:{cloth:.35,fine_clothes:.4},stratumDemandMod:{landowner:.3,official:.25,merchant:.2},approval:{landowner:15,artisan:10},buildingProductionMod:{loom_house:.25,dye_works:.2}}},{id:"promote_local",text:"",effects:{resourceDemandMod:{cloth:.2},approval:{artisan:15,merchant:-5},buildingProductionMod:{loom_house:.3}}},{id:"sumptuary_laws",text:"",effects:{resourceDemandMod:{cloth:-.1,fine_clothes:-.2},stratumDemandMod:{landowner:-.2},approval:{landowner:-20,cleric:10,peasant:5},stability:-5}}]},{id:"construction_boom",name:"",icon:"Building2",description:"",triggerConditions:{minPopulation:120,minEpoch:1},options:[{id:"support_construction",text:"",effects:{resourceDemandMod:{wood:.3,stone:.35,brick:.4,plank:.25},stratumDemandMod:{worker:.2,artisan:.15},approval:{worker:15,capitalist:10},buildingProductionMod:{quarry:.2,lumber_camp:.15,brickworks:.15}}},{id:"regulate_construction",text:"",effects:{resourceDemandMod:{stone:.2,brick:.25},resourcePercent:{silver:-.02},approval:{official:10},stability:5}},{id:"limit_expansion",text:"",effects:{resourceDemandMod:{wood:-.1,stone:-.1},approval:{capitalist:-15,worker:-10},stability:3}}]},{id:"arms_race",name:"",icon:"Sword",description:"",triggerConditions:{minPopulation:100,minEpoch:1},options:[{id:"militarize",text:"",effects:{resourceDemandMod:{tools:.4,iron:.35,food:.2},stratumDemandMod:{soldier:.35,knight:.25},approval:{soldier:25,knight:20,peasant:-10},stability:-5,buildingProductionMod:{military:.2,iron_tool_workshop:.15}}},{id:"moderate_buildup",text:"",effects:{resourceDemandMod:{tools:.2,iron:.15},stratumDemandMod:{soldier:.15},approval:{soldier:10,official:5},buildingProductionMod:{military:.1}}},{id:"diplomatic_solution",text:"",effects:{resourcePercent:{silver:-.02},resourceDemandMod:{tools:-.05},approval:{soldier:-10,cleric:10},stability:5}}]},{id:"academic_boom",name:"",icon:"BookOpen",description:"",triggerConditions:{minPopulation:80,minEpoch:1},options:[{id:"patronize_scholars",text:"",effects:{resourcePercent:{silver:-.03,science:.05},resourceDemandMod:{papyrus:.4,culture:.25},stratumDemandMod:{scribe:.3,cleric:.15},approval:{scribe:25,official:10},buildingProductionMod:{library:.2,university:.15}}},{id:"limited_support",text:"",effects:{resourceDemandMod:{papyrus:.2},stratumDemandMod:{scribe:.15},resourcePercent:{science:.02},approval:{scribe:10}}},{id:"control_knowledge",text:"",effects:{resourceDemandMod:{papyrus:-.1},stratumDemandMod:{scribe:-.15},approval:{scribe:-20,official:15},stability:-3}}]},{id:"brewing_prosperity",name:"",icon:"Wine",description:"",triggerConditions:{minPopulation:60,minEpoch:1},options:[{id:"encourage_brewing",text:"",effects:{resourceDemandMod:{ale:.35,food:.1},stratumDemandMod:{worker:.15,soldier:.2,navigator:.18},approval:{worker:15,soldier:10},buildingProductionMod:{gather:.05,brewery:.25}}},{id:"regulate_alcohol",text:"",effects:{resourceDemandMod:{ale:.15},resourcePercent:{silver:.02},approval:{cleric:10,worker:-5},stability:3}},{id:"prohibit_alcohol",text:"",effects:{resourceDemandMod:{ale:-.2},stratumDemandMod:{worker:-.1},approval:{cleric:20,worker:-20,soldier:-15},stability:-8}}]},{id:"raw_material_shortage",name:"",icon:"Package",description:"",triggerConditions:{minPopulation:80},options:[{id:"import_materials",text:"",effects:{resourcePercent:{silver:-.04},resourceDemandMod:{wood:.1,iron:.1},approval:{artisan:10,merchant:5}}},{id:"ration_materials",text:"",effects:{resourceDemandMod:{wood:-.15,iron:-.15,copper:-.1},buildingProductionMod:{industry:-.1},approval:{artisan:-15,official:10}}},{id:"develop_alternatives",text:"",effects:{resourcePercent:{silver:-.02,science:.03},resourceDemandMod:{stone:.2,brick:.25},approval:{engineer:15},buildingProductionMod:{brickworks:.2}}}]},{id:"noble_extravagance",name:"",icon:"Crown",description:"",triggerConditions:{minPopulation:120,minEpoch:2},options:[{id:"let_them_spend",text:"",effects:{stratumDemandMod:{landowner:.4,official:.3,knight:.25},resourceDemandMod:{delicacies:.35,spice:.3,fine_clothes:.4,furniture:.3,coffee:.25},approval:{landowner:20,artisan:15,peasant:-15},buildingProductionMod:{loom_house:.2,furniture_workshop:.25,delicacies_producer:.15}}},{id:"tax_luxury",text:"",effects:{resourcePercent:{silver:.04},stratumDemandMod:{landowner:-.15},resourceDemandMod:{delicacies:-.1,spice:-.1},approval:{landowner:-20,peasant:10}}},{id:"moral_campaign",text:"",effects:{stratumDemandMod:{landowner:-.25,official:-.2},resourceDemandMod:{delicacies:-.2,spice:-.15},approval:{cleric:20,landowner:-25,peasant:15},stability:-5}}]},{id:"wage_demands",name:"",icon:"HandCoins",description:"",triggerConditions:{minPopulation:100,minEpoch:2},options:[{id:"raise_wages",text:"",effects:{stratumDemandMod:{worker:.25,artisan:.15,miner:.2},resourceDemandMod:{cloth:.15,ale:.2,food:.12},approval:{worker:25,artisan:15,capitalist:-20},buildingProductionMod:{industry:.05}}},{id:"partial_raise",text:"",effects:{stratumDemandMod:{worker:.1},resourceDemandMod:{cloth:.08},approval:{worker:5,capitalist:-10}}},{id:"refuse_demands",text:"",effects:{stratumDemandMod:{worker:-.1},approval:{worker:-25,artisan:-15,capitalist:15},stability:-10,buildingProductionMod:{industry:-.15}}}]},{id:"coffee_craze",name:"",icon:"Coffee",description:"",triggerConditions:{minPopulation:150,minEpoch:4},options:[{id:"embrace_coffee",text:"",effects:{resourceDemandMod:{coffee:.5},stratumDemandMod:{merchant:.2,scribe:.25,official:.15,capitalist:.2},approval:{merchant:15,scribe:20},resourcePercent:{science:.02},buildingProductionMod:{coffee_plantation:.2,coffee_house:.15}}},{id:"regulate_coffeehouses",text:"",effects:{resourceDemandMod:{coffee:.2},stratumDemandMod:{scribe:.1},approval:{official:10,merchant:-10}}},{id:"ban_coffeehouses",text:"",effects:{resourceDemandMod:{coffee:-.2},stratumDemandMod:{merchant:-.1,scribe:-.15},approval:{merchant:-20,scribe:-25,cleric:10},stability:-8}}]},{id:"furniture_fashion",name:"",icon:"Armchair",description:"",triggerConditions:{minPopulation:100,minEpoch:2},options:[{id:"support_craftsmen",text:"",effects:{resourceDemandMod:{furniture:.4,wood:.25,plank:.3},stratumDemandMod:{landowner:.2,official:.15,capitalist:.18},approval:{artisan:20,merchant:10},buildingProductionMod:{furniture_workshop:.3}}},{id:"quality_standards",text:"",effects:{resourceDemandMod:{furniture:.2,wood:.15},approval:{artisan:10,official:10},buildingProductionMod:{furniture_workshop:.15}}},{id:"discourage_waste",text:"",effects:{resourceDemandMod:{furniture:-.1},stratumDemandMod:{landowner:-.1},approval:{cleric:15,landowner:-15}}}]}],Xx=[{id:"border_dispute",name:"",icon:"MapPin",description:"",triggerConditions:{minPopulation:100,minEpoch:1,maxEpoch:5},options:[{id:"negotiate",text:"",effects:{resourcePercent:{silver:-.03},approval:{official:10},nationRelation:{random:10},stability:3}},{id:"military_posturing",text:"",effects:{approval:{soldier:15,peasant:-5},nationRelation:{random:-15},nationAggression:{random:.1},stability:-5}},{id:"concede_territory",text:"",effects:{populationPercent:-.02,approval:{soldier:-20,peasant:5},nationRelation:{random:20},nationAggression:{random:-.1},stability:-3}}]},{id:"diplomatic_incident",name:"",icon:"AlertTriangle",description:"",triggerConditions:{minPopulation:150,minEpoch:2,maxEpoch:5},options:[{id:"demand_apology",text:"",effects:{approval:{official:5},nationRelation:{random:-10}},randomEffects:[{chance:.4,effects:{nationRelation:{random:15},stability:5},description:""},{chance:.3,effects:{nationRelation:{random:-20},nationAggression:{random:.15}},description:""}]},{id:"expel_diplomats",text:"",effects:{approval:{soldier:10,official:-5},nationRelation:{random:-25},nationAggression:{random:.1},stability:-3}},{id:"ignore_incident",text:"",effects:{approval:{soldier:-10,official:-5,peasant:5},nationRelation:{random:5},stability:-5}}]},{id:"spy_discovered",name:"",icon:"Eye",description:"",triggerConditions:{minPopulation:200,minEpoch:2,maxEpoch:6},options:[{id:"public_trial",text:"",effects:{approval:{soldier:15,official:10},nationRelation:{random:-30},nationAggression:{random:.15},stability:5}},{id:"exchange_prisoners",text:"",effects:{approval:{official:5},nationRelation:{random:-5}}},{id:"turn_double_agent",text:"",effects:{resourcePercent:{silver:-.02},approval:{official:15},nationWealth:{random:-200}},randomEffects:[{chance:.3,effects:{nationRelation:{random:-40},triggerWar:"random"},description:""}]}]},{id:"trade_delegation",name:"",icon:"Handshake",description:"",triggerConditions:{minPopulation:150,minEpoch:2,maxEpoch:6},options:[{id:"welcome_trade",text:"",effects:{resourcePercent:{silver:.05},approval:{merchant:20,capitalist:15},nationRelation:{random:25},nationAggression:{random:-.1},stability:3}},{id:"negotiate_terms",text:"",effects:{approval:{merchant:10,official:5},nationRelation:{random:10}},randomEffects:[{chance:.5,effects:{resourcePercent:{silver:.08},nationRelation:{random:5}},description:""},{chance:.3,effects:{nationRelation:{random:-10}},description:""}]},{id:"reject_delegation",text:"",effects:{approval:{merchant:-15,soldier:10},nationRelation:{random:-20},nationAggression:{random:.05}}}]},{id:"trade_war",name:"",icon:"Scale",description:"",triggerConditions:{minPopulation:200,minEpoch:3,maxEpoch:6},options:[{id:"retaliate",text:"",effects:{approval:{merchant:5,official:10},nationRelation:{random:-20},nationWealth:{random:-300},resourceDemandMod:{spice:-.2,cloth:-.15},stability:-3}},{id:"seek_new_markets",text:"",effects:{resourcePercent:{silver:-.03},approval:{merchant:10,navigator:15},nationRelation:{all:5,exclude:["hostile"]}}},{id:"negotiate_end",text:"",effects:{resourcePercent:{silver:-.02},approval:{official:5}},randomEffects:[{chance:.5,effects:{nationRelation:{random:15},resourceDemandMod:{spice:.1}},description:""}]}]},{id:"resource_competition",name:"",icon:"Pickaxe",description:"",triggerConditions:{minPopulation:180,minEpoch:2,maxEpoch:5},options:[{id:"claim_territory",text:"",effects:{buildingProductionMod:{mine:.2},approval:{soldier:15,miner:10},nationRelation:{random:-35},nationAggression:{random:.2}},randomEffects:[{chance:.3,effects:{triggerWar:"random"},description:""}]},{id:"joint_development",text:"",effects:{buildingProductionMod:{mine:.1},approval:{official:10},nationRelation:{random:15},nationWealth:{random:200},stability:5}},{id:"abandon_claim",text:"",effects:{approval:{miner:-15,soldier:-10,peasant:5},nationRelation:{random:25},nationAggression:{random:-.15}}}]},{id:"military_alliance_offer",name:"",icon:"Shield",description:"",triggerConditions:{minPopulation:200,minEpoch:2,maxEpoch:5},options:[{id:"accept_alliance",text:"",effects:{approval:{soldier:20,official:10},nationRelation:{random:40},nationAggression:{random:-.2},stability:5}},{id:"conditional_alliance",text:"",effects:{resourcePercent:{silver:.03},approval:{official:15},nationRelation:{random:20}}},{id:"decline_politely",text:"",effects:{approval:{merchant:5},nationRelation:{random:-10}}}]},{id:"arms_race",name:"",icon:"Swords",description:"",triggerConditions:{minPopulation:200,minEpoch:2,maxEpoch:6},options:[{id:"expand_military",text:"",effects:{resourcePercent:{silver:-.08},approval:{soldier:25,worker:10},nationAggression:{random:.1},stability:-3}},{id:"diplomatic_solution",text:"",effects:{resourcePercent:{silver:-.03},approval:{official:10,merchant:10},nationRelation:{random:15},nationAggression:{random:-.1}}},{id:"seek_allies",text:"",effects:{resourcePercent:{silver:-.02},nationRelation:{all:5}},randomEffects:[{chance:.4,effects:{nationAggression:{random:-.15},stability:5},description:""}]}]},{id:"war_threat",name:"",icon:"Flame",description:"",triggerConditions:{minPopulation:150,minEpoch:2,maxEpoch:5},options:[{id:"refuse_and_prepare",text:"",effects:{approval:{soldier:30,peasant:10},nationRelation:{hostile:-20},stability:-5},randomEffects:[{chance:.6,effects:{triggerWar:"hostile"},description:""},{chance:.4,effects:{nationAggression:{hostile:-.1},stability:10},description:""}]},{id:"pay_tribute",text:"",effects:{resourcePercent:{silver:-.1},approval:{soldier:-25,peasant:-10},nationRelation:{hostile:10},nationAggression:{hostile:.1},stability:-10}},{id:"stall_for_time",text:"",effects:{approval:{official:10}},randomEffects:[{chance:.5,effects:{triggerWar:"hostile"},description:""},{chance:.3,effects:{nationRelation:{hostile:5}},description:""}]}]},{id:"cultural_exchange",name:"",icon:"BookOpen",description:"",triggerConditions:{minPopulation:150,minEpoch:2,maxEpoch:6},options:[{id:"welcome_exchange",text:"",effects:{resourcePercent:{silver:-.02,culture:.08},approval:{scribe:20,cleric:10},nationRelation:{random:20},stability:5}},{id:"limited_exchange",text:"",effects:{resourcePercent:{culture:.03},approval:{scribe:10},nationRelation:{random:10}}},{id:"reject_exchange",text:"",effects:{approval:{cleric:15,scribe:-10},nationRelation:{random:-10}}}]},{id:"religious_mission",name:"",icon:"Church",description:"",triggerConditions:{minPopulation:150,minEpoch:2,maxEpoch:5},options:[{id:"allow_mission",text:"",effects:{approval:{cleric:-20,peasant:-5},nationRelation:{random:25},nationAggression:{random:-.1},stability:-5}},{id:"restrict_mission",text:"",effects:{approval:{cleric:10},nationRelation:{random:-5}}},{id:"expel_missionaries",text:"",effects:{approval:{cleric:20,peasant:5},nationRelation:{random:-25},nationAggression:{random:.1}}}]},{id:"refugee_crisis",name:"",icon:"Users",description:"",triggerConditions:{minPopulation:150,minEpoch:1,maxEpoch:6},options:[{id:"accept_refugees",text:"",effects:{populationPercent:.05,resourcePercent:{food:-.05},approval:{cleric:15,peasant:-10},nationRelation:{random:20},nationWealth:{random:-200},stability:-5}},{id:"selective_admission",text:"",effects:{populationPercent:.02,approval:{artisan:10,scribe:10,peasant:-5},nationRelation:{random:5}}},{id:"close_borders",text:"",effects:{approval:{peasant:10,soldier:5,cleric:-10},nationRelation:{random:-15}}}]},{id:"plague_spread",name:"",icon:"Skull",description:"",triggerConditions:{minPopulation:150,minEpoch:1,maxEpoch:5},options:[{id:"quarantine_border",text:"",effects:{resourcePercent:{silver:-.03},approval:{merchant:-15,peasant:10},nationRelation:{all:-10},resourceDemandMod:{spice:-.3,cloth:-.2},stability:3}},{id:"send_aid",text:"",effects:{resourcePercent:{silver:-.05},approval:{cleric:15},nationRelation:{random:30},nationAggression:{random:-.15}},randomEffects:[{chance:.3,effects:{populationPercent:-.03,stability:-5},description:""}]},{id:"do_nothing",text:"",effects:{},randomEffects:[{chance:.4,effects:{populationPercent:-.05,stability:-10},description:""}]}]},{id:"natural_disaster_aid",name:"",icon:"CloudLightning",description:"",triggerConditions:{minPopulation:150,minEpoch:1,maxEpoch:6},options:[{id:"generous_aid",text:"",effects:{resourcePercent:{food:-.05,silver:-.03},approval:{cleric:15,official:10},nationRelation:{random:35},nationAggression:{random:-.2},nationWealth:{random:300}}},{id:"modest_aid",text:"",effects:{resourcePercent:{food:-.02},approval:{cleric:5},nationRelation:{random:15},nationWealth:{random:100}}},{id:"exploit_weakness",text:"",effects:{approval:{soldier:10,cleric:-15},nationRelation:{random:-25},nationAggression:{random:.2},nationWealth:{random:-400}},randomEffects:[{chance:.2,effects:{triggerWar:"random"},description:""}]}]},{id:"royal_marriage",name:"",icon:"Heart",description:"",triggerConditions:{minPopulation:200,minEpoch:2,maxEpoch:5},options:[{id:"accept_marriage",text:"",effects:{resourcePercent:{silver:-.05},approval:{landowner:15,official:10},nationRelation:{random:40},nationAggression:{random:-.25},stability:5}},{id:"negotiate_dowry",text:"",effects:{approval:{official:5}},randomEffects:[{chance:.5,effects:{resourcePercent:{silver:.08},nationRelation:{random:25}},description:""},{chance:.3,effects:{nationRelation:{random:-15}},description:""}]},{id:"decline_marriage",text:"",effects:{nationRelation:{random:-10}}}]},{id:"succession_crisis",name:"",icon:"Crown",description:"",triggerConditions:{minPopulation:200,minEpoch:2,maxEpoch:5},options:[{id:"support_pretender",text:"",effects:{resourcePercent:{silver:-.05},approval:{soldier:10,official:10}},randomEffects:[{chance:.5,effects:{nationRelation:{random:40},nationAggression:{random:-.2}},description:""},{chance:.3,effects:{nationRelation:{random:-30},nationAggression:{random:.2}},description:""}]},{id:"stay_neutral",text:"",effects:{approval:{merchant:5},nationWealth:{random:-300}}},{id:"seize_opportunity",text:"",effects:{populationPercent:.03,approval:{soldier:20},nationRelation:{random:-40},nationAggression:{random:.3},stability:-5},randomEffects:[{chance:.4,effects:{triggerWar:"random"},description:""}]}]},{id:"intelligence_opportunity",name:"",icon:"Search",description:"",triggerConditions:{minPopulation:200,minEpoch:3,maxEpoch:6},options:[{id:"buy_intelligence",text:"",effects:{resourcePercent:{silver:-.04},nationWealth:{random:-150},nationMarketVolatility:{random:.1}},randomEffects:[{chance:.3,effects:{nationRelation:{random:-30}},description:""}]},{id:"plant_agent",text:"",effects:{resourcePercent:{silver:-.06},approval:{official:10}},randomEffects:[{chance:.4,effects:{nationAggression:{random:-.1}},description:""},{chance:.2,effects:{nationRelation:{random:-40},triggerWar:"random"},description:""}]},{id:"ignore_opportunity",text:"",effects:{approval:{cleric:5},stability:2}}]},{id:"sabotage_discovered",name:"",icon:"Bomb",description:"",triggerConditions:{minPopulation:200,minEpoch:3,maxEpoch:6},options:[{id:"retaliate_sabotage",text:"",effects:{resourcePercent:{silver:-.03},nationWealth:{random:-500},nationRelation:{random:-20}},randomEffects:[{chance:.4,effects:{triggerWar:"random"},description:""}]},{id:"demand_compensation",text:"",effects:{approval:{official:10},nationRelation:{random:-15}},randomEffects:[{chance:.4,effects:{resourcePercent:{silver:.05},nationRelation:{random:10}},description:""}]},{id:"strengthen_security",text:"",effects:{resourcePercent:{silver:-.04},approval:{soldier:10,official:10},stability:5}}]},{id:"tribute_demand",name:"",icon:"Crown",description:"",triggerConditions:{minPopulation:150,minEpoch:2,maxEpoch:5},options:[{id:"accept_vassalage",text:"",effects:{resourcePercent:{silver:-.05},approval:{soldier:-25,landowner:-15,peasant:5},nationRelation:{strongest:50},nationAggression:{strongest:-.3},stability:-10}},{id:"refuse_proudly",text:"",effects:{approval:{soldier:20,peasant:10},nationRelation:{strongest:-30},nationAggression:{strongest:.2}},randomEffects:[{chance:.5,effects:{triggerWar:"strongest"},description:""}]},{id:"negotiate_terms",text:"",effects:{resourcePercent:{silver:-.02},approval:{official:10},nationRelation:{strongest:10}}}]},{id:"vassal_rebellion",name:"",icon:"Flag",description:"",triggerConditions:{minPopulation:250,minEpoch:3,maxEpoch:6},options:[{id:"punitive_expedition",text:"",effects:{resourcePercent:{silver:-.08},approval:{soldier:20},nationRelation:{weakest:-40}},randomEffects:[{chance:.6,effects:{nationRelation:{weakest:30},nationAggression:{weakest:-.2},resourcePercent:{silver:.05}},description:""},{chance:.3,effects:{resourcePercent:{silver:-.05},stability:-5},description:""}]},{id:"recognize_independence",text:"",effects:{approval:{soldier:-10,official:-10},nationRelation:{weakest:30},stability:-5}},{id:"economic_pressure",text:"",effects:{nationRelation:{weakest:-20},nationWealth:{weakest:-400}},randomEffects:[{chance:.4,effects:{nationRelation:{weakest:20}},description:""}]}]},{id:"great_congress",name:"",icon:"Users",description:"",triggerConditions:{minPopulation:250,minEpoch:5,maxEpoch:6},options:[{id:"active_participation",text:"",effects:{resourcePercent:{silver:-.04},approval:{official:15,soldier:10},nationRelation:{all:10},stability:5}},{id:"defensive_stance",text:"",effects:{approval:{official:5},nationRelation:{strongest:5}}},{id:"boycott_congress",text:"",effects:{approval:{soldier:10,official:-10},nationRelation:{all:-15},nationAggression:{all:.05}}}]},{id:"secret_alliance",name:"",icon:"FileText",description:"",triggerConditions:{minPopulation:200,minEpoch:4,maxEpoch:6},options:[{id:"seek_membership",text:"",effects:{resourcePercent:{silver:-.03},approval:{official:10,soldier:15},nationRelation:{strongest:30},nationAggression:{weakest:.1}}},{id:"form_counter_alliance",text:"",effects:{resourcePercent:{silver:-.05},approval:{soldier:20,official:10},nationRelation:{strongest:-20,weakest:25},nationAggression:{strongest:.15}}},{id:"remain_neutral",text:"",effects:{resourcePercent:{silver:-.04},approval:{merchant:15},nationRelation:{all:-5}}}]},{id:"intercepted_telegram",name:"",icon:"Mail",description:"",triggerConditions:{minPopulation:250,minEpoch:5,maxEpoch:6},options:[{id:"publish_telegram",text:"",effects:{approval:{official:15,peasant:10},nationRelation:{hostile:-40},nationAggression:{hostile:.2}},randomEffects:[{chance:.4,effects:{nationRelation:{friendly:20}},description:""}]},{id:"secret_diplomacy",text:"",effects:{approval:{official:10},nationRelation:{hostile:-15}},randomEffects:[{chance:.5,effects:{nationRelation:{hostile:20},nationAggression:{hostile:-.1}},description:""}]},{id:"keep_secret",text:"",effects:{approval:{soldier:10},nationAggression:{hostile:-.05}}}]},{id:"colonial_standoff",name:"",icon:"Flag",description:"",triggerConditions:{minPopulation:250,minEpoch:5,maxEpoch:6},options:[{id:"stand_firm",text:"",effects:{approval:{soldier:25,official:10},nationRelation:{random:-35},nationAggression:{random:.25}},randomEffects:[{chance:.4,effects:{triggerWar:"random"},description:""},{chance:.3,effects:{nationRelation:{random:15},nationAggression:{random:-.1}},description:""}]},{id:"negotiate_partition",text:"",effects:{approval:{official:10,soldier:-10},nationRelation:{random:10},stability:5}},{id:"strategic_retreat",text:"",effects:{approval:{soldier:-20,peasant:-10,merchant:10},nationRelation:{random:20},nationAggression:{random:-.15}}}]},{id:"diplomatic_insult",name:"",icon:"MessageCircle",description:"",triggerConditions:{minPopulation:200,minEpoch:4,maxEpoch:6},options:[{id:"declare_war",text:'""',effects:{approval:{soldier:30,peasant:15,official:10},nationRelation:{random:-50},triggerWar:"random"}},{id:"demand_retraction",text:"",effects:{approval:{official:10},nationRelation:{random:-20}},randomEffects:[{chance:.3,effects:{nationRelation:{random:25},stability:5},description:""},{chance:.4,effects:{nationRelation:{random:-15},nationAggression:{random:.1}},description:""}]},{id:"ignore_insult",text:"",effects:{approval:{soldier:-15,peasant:-10,merchant:10},nationRelation:{random:5},stability:-5}}]},{id:"assassination_abroad",name:"",icon:"Target",description:"",triggerConditions:{minPopulation:250,minEpoch:5,maxEpoch:6},options:[{id:"ultimatum",text:"",effects:{approval:{soldier:20,official:15},nationRelation:{random:-40},nationAggression:{random:.2}},randomEffects:[{chance:.5,effects:{triggerWar:"random"},description:""},{chance:.3,effects:{nationRelation:{random:10},resourcePercent:{silver:.05}},description:""}]},{id:"joint_investigation",text:"",effects:{approval:{official:10},nationRelation:{random:-10}},randomEffects:[{chance:.4,effects:{nationRelation:{random:15},stability:5},description:""}]},{id:"measured_response",text:"",effects:{approval:{soldier:-10,merchant:15},nationRelation:{random:5},stability:3}}]},{id:"forced_trade",name:"",icon:"Ship",description:"",triggerConditions:{minPopulation:250,minEpoch:5,maxEpoch:6},options:[{id:"resist_invasion",text:"",effects:{approval:{soldier:30,peasant:20,merchant:-20},nationRelation:{strongest:-50}},randomEffects:[{chance:.7,effects:{populationPercent:-.02,stability:-30,resourcePercent:{silver:-.08},triggerWar:"strongest"},description:""},{chance:.2,effects:{nationRelation:{strongest:20},nationAggression:{strongest:-.2}},description:""}]},{id:"sign_treaty",text:"",effects:{resourcePercent:{silver:.03},stability:-20,approval:{merchant:15,soldier:-30,peasant:-15},nationRelation:{strongest:30},nationAggression:{strongest:-.2}}},{id:"delay_tactics",text:"",effects:{approval:{official:5},nationRelation:{strongest:-15}},randomEffects:[{chance:.5,effects:{nationAggression:{strongest:.15},triggerWar:"strongest"},description:""}]}]},{id:"appeasement_demand",name:"",icon:"FileText",description:'""',triggerConditions:{minPopulation:250,minEpoch:5,maxEpoch:6},options:[{id:"appease",text:'""',effects:{stability:5,approval:{merchant:15,soldier:-25,official:-10},nationRelation:{hostile:20},nationAggression:{hostile:.2},nationWealth:{hostile:500}}},{id:"stand_against",text:'""',effects:{resourcePercent:{silver:-.02},approval:{soldier:10,official:5},nationRelation:{hostile:-15,weakest:10},nationAggression:{hostile:.05}},randomEffects:[{chance:.1,effects:{triggerWar:"hostile"},description:""}]},{id:"guarantee_independence",text:"",effects:{resourcePercent:{silver:-.08},approval:{soldier:25,official:15},nationRelation:{hostile:-35,weakest:40},nationAggression:{hostile:-.1}},randomEffects:[{chance:.4,effects:{triggerWar:"hostile"},description:""}]}]},{id:"strategic_canal",name:"",icon:"Anchor",description:"",triggerConditions:{minPopulation:250,minEpoch:5,maxEpoch:6},options:[{id:"support_nationalization",text:"",effects:{approval:{peasant:15,official:10},nationRelation:{random:25,strongest:-20},nationAggression:{strongest:.1}}},{id:"join_intervention",text:"",effects:{resourcePercent:{silver:-.05},approval:{soldier:15,merchant:10},nationRelation:{random:-30,strongest:15}},randomEffects:[{chance:.4,effects:{triggerWar:"random"},description:""}]},{id:"call_for_negotiation",text:"",effects:{approval:{official:10},nationRelation:{all:5},stability:3}}]},{id:"weapons_deployment",name:"",icon:"Target",description:"/",triggerConditions:{minPopulation:200,minEpoch:4,maxEpoch:6},options:[{id:"demand_removal",text:"",effects:{approval:{soldier:20,official:10},nationRelation:{random:-25}},randomEffects:[{chance:.4,effects:{nationRelation:{random:20},nationAggression:{random:-.15}},description:""},{chance:.3,effects:{nationAggression:{random:.2},triggerWar:"random"},description:""}]},{id:"counter_deployment",text:"",effects:{resourcePercent:{silver:-.06},approval:{soldier:20},nationRelation:{random:-20},nationAggression:{random:.1},stability:-5}},{id:"secret_deal",text:"",effects:{approval:{official:5,soldier:-10},nationRelation:{random:15},nationAggression:{random:-.1}}}]},{id:"colonial_conference",name:"",icon:"Map",description:'""',triggerConditions:{minPopulation:250,minEpoch:5,maxEpoch:6},options:[{id:"claim_territory",text:"",effects:{resourcePercent:{silver:-.05},populationPercent:.02,approval:{soldier:15,merchant:20,official:10},nationRelation:{all:-10}},randomEffects:[{chance:.3,effects:{nationRelation:{random:-25}},description:""}]},{id:"trade_rights_only",text:"",effects:{resourcePercent:{silver:.04},approval:{merchant:15},nationRelation:{all:5}}},{id:"denounce_conference",text:"",effects:{approval:{cleric:15,merchant:-10},nationRelation:{all:-15},stability:3}}]},{id:"naval_arms_race",name:"",icon:"Anchor",description:"",triggerConditions:{minPopulation:250,minEpoch:5,maxEpoch:6},options:[{id:"build_fleet",text:"",effects:{resourcePercent:{silver:-.1},buildingProductionMod:{dockyard:.3},approval:{soldier:25,worker:15,merchant:-10},nationRelation:{random:-15},nationAggression:{random:.1}}},{id:"seek_alliance",text:"",effects:{resourcePercent:{silver:-.03},approval:{official:10},nationRelation:{strongest:20},nationAggression:{random:-.05}}},{id:"develop_submarines",text:"",effects:{resourcePercent:{silver:-.05,science:.05},approval:{engineer:20,soldier:10}}}]}];function Zx(s,o){if(!s.triggerConditions)return!0;const d=s.triggerConditions;if(d.minPopulation&&o.population<d.minPopulation||d.minEpoch!==void 0&&o.epoch<d.minEpoch||d.maxEpoch!==void 0&&o.epoch>d.maxEpoch||d.minScience&&o.resources.science<d.minScience)return!1;if(d.classConditions){const c=o.popStructure||{},m=o.classApproval||{},b=o.classInfluence||{},g=o.classWealth||{},v=o.classWealthDelta||{},x=o.classIncome||{};let y=o.totalInfluence;(!y||y<=0)&&(y=Object.values(b).reduce((k,M)=>k+(M||0),0));let w=o.totalWealth;(!w||w<=0)&&(w=Object.values(g).reduce((k,M)=>k+(M||0),0));for(const k in d.classConditions){const M=d.classConditions[k];if(!M)continue;const z=c[k]||0,C=m[k]??50,T=b[k]||0,D=g[k]||0,E=v[k]||0,S=x[k]||0,q=y>0?T/y:0,W=w>0?D/w:0;if(M.minPop!==void 0&&z<M.minPop||M.maxPop!==void 0&&z>M.maxPop||M.minApproval!==void 0&&C<M.minApproval||M.maxApproval!==void 0&&C>M.maxApproval||M.minInfluenceShare!==void 0&&q<M.minInfluenceShare||M.maxInfluenceShare!==void 0&&q>M.maxInfluenceShare||M.minWealth!==void 0&&D<M.minWealth||M.maxWealth!==void 0&&D>M.maxWealth||M.minWealthShare!==void 0&&W<M.minWealthShare||M.maxWealthShare!==void 0&&W>M.maxWealthShare||M.minWealthDelta!==void 0&&E<M.minWealthDelta||M.maxWealthDelta!==void 0&&E>M.maxWealthDelta||M.minIncome!==void 0&&S<M.minIncome||M.maxIncome!==void 0&&S>M.maxIncome)return!1}}return!0}function Qx(s,o){if(!o||o.length===0)return s;const d=o.filter(b=>b.visible!==!1);if(d.length===0)return s;const c=JSON.parse(JSON.stringify(s)),m=d[Math.floor(Math.random()*d.length)];return c._resolvedRandomNation=m?{id:m.id,name:m.name}:null,c.options&&(c.options=c.options.map(b=>{const g={...b};return g.effects&&(g.effects=sf(g.effects,m)),g.randomEffects&&(g.randomEffects=g.randomEffects.map(v=>({...v,effects:sf(v.effects,m)}))),g})),c}function sf(s,o){if(!s||!o)return s;const d={...s};return["nationRelation","nationAggression","nationWealth","nationMarketVolatility"].forEach(m=>{if(d[m]&&typeof d[m]=="object"){const b={...d[m]};"random"in b&&(b[o.id]=b.random,b._originalRandom=o.id,delete b.random),d[m]=b}}),d.triggerWar==="random"&&(d.triggerWar=o.id,d._triggerWarFromRandom=!0),d.triggerPeace==="random"&&(d.triggerPeace=o.id,d._triggerPeaceFromRandom=!0),d}function Jx(s,o){const d=o.filter(g=>Zx(g,s));if(d.length===0)return null;const c=Math.floor(Math.random()*d.length),m=d[c],b=s.nations||[];return Qx(m,b)}const Er=3,Ud=3,Kf=Ud*365;function Kx(s,o){return{id:`war_declaration_${s.id}_${Date.now()}`,name:`${s.name}`,icon:"Swords",image:null,description:`${s.name}`,isDiplomaticEvent:!0,options:[{id:"acknowledge",text:"",description:"",effects:{},callback:o}]}}function e1(s,o,d,c){const m=[];if(d>150){const g=Math.floor(o*1.5),v=Math.ceil(g*Er),x=Math.ceil(v/365),y=s.population,w=Math.max(6,Math.floor(y*.04));m.push({id:"demand_more",text:"",description:`${g}50%`,effects:{resources:{silver:g}},callback:()=>c(!0,"demand_more",g)}),m.push({id:"demand_installment",text:"",description:`${x}${x*365}`,effects:{},callback:()=>c(!0,"installment",x)}),m.push({id:"demand_population",text:"",description:` ${w}`,effects:{},callback:()=>c(!0,"population",w)}),m.push({id:"demand_open_market",text:"",description:`${s.name}${Ud}`,effects:{},callback:()=>c(!0,"open_market",Kf)}),m.push({id:"accept_standard",text:"",description:`${o}`,effects:{resources:{silver:o}},callback:()=>c(!0,"standard",o)})}else if(d>50){const g=Math.ceil(o*Er),v=Math.ceil(g/365),x=s.population,y=Math.max(4,Math.floor(x*.02));m.push({id:"accept",text:"",description:`${o}`,effects:{resources:{silver:o}},callback:()=>c(!0,"standard",o)}),m.push({id:"demand_installment",text:"",description:`${v}${v*365}`,effects:{},callback:()=>c(!0,"installment",v)}),m.push({id:"demand_population",text:"",description:` ${y}`,effects:{},callback:()=>c(!0,"population",y)})}else m.push({id:"accept",text:"",description:`${o}`,effects:{resources:{silver:o}},callback:()=>c(!0,"standard",o)});m.push({id:"reject",text:"",description:"",effects:{},callback:()=>c(!1)});let b="";return d>150?b=`${s.name}${o}`:d>50?b=`${s.name}${o}`:b=`${s.name}${o}`,{id:`enemy_peace_request_${s.id}_${Date.now()}`,name:`${s.name}`,icon:"HandHeart",image:null,description:b,isDiplomaticEvent:!0,options:m}}function t1(s,o,d,c,m={},b){const g=[],v=Math.max(200,m.population||m.maxPopulation||1e3),x=(w,k)=>{const M=Math.abs(Math.min(o,0))/k,z=Math.max(0,d||0)/4e3,C=Math.min(w,Math.max(.012,M+z)),T=Math.floor(v*C),D=Math.floor(v*w);return Math.max(3,Math.min(D,T))};if(o>150){const w=Math.min(s.wealth||0,Math.ceil(o*50+c*3)),k=Math.min(s.wealth||0,Math.ceil(o*40+c*2)),M=Math.ceil(w*Er),z=Math.ceil(M/365),C=s.population,T=Math.max(5,Math.floor(C*.03));g.push({id:"demand_high",text:"",description:`${w}`,effects:{},callback:()=>b("demand_high",w)}),g.push({id:"demand_installment",text:"",description:`${z}${z*365}`,effects:{},callback:()=>b("demand_installment",z)}),g.push({id:"demand_population",text:"",description:` ${T}`,effects:{},callback:()=>b("demand_population",T)}),g.push({id:"demand_open_market",text:"",description:`${s.name}${Ud}`,effects:{},callback:()=>b("demand_open_market",Kf)}),g.push({id:"demand_standard",text:"",description:`${k}`,effects:{},callback:()=>b("demand_standard",k)}),g.push({id:"peace_only",text:"",description:"",effects:{},callback:()=>b("peace_only",0)})}else if(o>50){const w=Math.min(s.wealth||0,Math.ceil(o*40+c*2)),k=Math.ceil(w*Er),M=Math.ceil(k/365),z=s.population,C=Math.max(5,Math.floor(z*.01));g.push({id:"demand_tribute",text:"",description:`${w}`,effects:{},callback:()=>b("demand_tribute",w)}),g.push({id:"demand_installment",text:"",description:`${M}${M*365}`,effects:{},callback:()=>b("demand_installment",M)}),g.push({id:"demand_population",text:"",description:` ${C}`,effects:{},callback:()=>b("demand_population",C)}),g.push({id:"peace_only",text:"",description:"",effects:{},callback:()=>b("peace_only",0)})}else if(o<-150){const w=Math.max(150,Math.ceil(Math.abs(o)*35+d*6)),k=Math.ceil(w*Er),M=Math.ceil(k/365),z=x(.05,320);g.push({id:"pay_high",text:`${w}`,description:"",effects:{},callback:()=>b("pay_high",w)}),g.push({id:"pay_installment",text:"",description:`${M}${M*365}`,effects:{},callback:()=>b("pay_installment",M)}),g.push({id:"offer_population",text:` ${z}`,description:"",effects:{},callback:()=>b("offer_population",z)})}else if(o<-50){const w=Math.max(100,Math.ceil(Math.abs(o)*30+d*5)),k=Math.ceil(w*Er),M=Math.ceil(k/365),z=x(.03,480);g.push({id:"pay_standard",text:`${w}`,description:"",effects:{},callback:()=>b("pay_standard",w)}),g.push({id:"pay_installment",text:"",description:`${M}${M*365}`,effects:{},callback:()=>b("pay_installment",M)}),g.push({id:"offer_population",text:` ${z}`,description:"",effects:{},callback:()=>b("offer_population",z)})}else{const w=Math.max(50,Math.ceil(Math.abs(o)*20+d*3)),k=Math.ceil(w*Er),M=Math.ceil(k/365);g.push({id:"pay_moderate",text:`${w}`,description:"",effects:{},callback:()=>b("pay_moderate",w)}),g.push({id:"pay_installment_moderate",text:"",description:`${M}${M*365}`,effects:{},callback:()=>b("pay_installment_moderate",M)}),g.push({id:"peace_only",text:"",description:"",effects:{},callback:()=>b("peace_only",0)})}g.push({id:"cancel",text:"",description:"",effects:{},callback:()=>b("cancel",0)});let y="";return o>150?y=`${s.name}`:o>50?y=`${s.name}`:o<-150?y=`${s.name}`:o<-50?y=`${s.name}`:y=`${s.name}`,{id:`player_peace_proposal_${s.id}_${Date.now()}`,name:`${s.name}`,icon:"HandHeart",image:null,description:y,isDiplomaticEvent:!0,options:g}}const Ys={NONE:"none",BREWING:"brewing",PLOTTING:"plotting",ACTIVE:"active"},cl={INVESTIGATE_SUCCESS_BASE:.6,ARREST_SUCCESS_BASE:.4,SUPPRESS_SUCCESS_BASE:.5,REBEL_NATION_BASE_WEALTH:300,REBEL_NATION_BASE_AGGRESSION:.7};function Sr(s){return Fe[s]?.name||s}function a1(s,o,d,c,m){const b=Sr(s),g=[];return g.push({id:"subsidize",text:"",description:`${b}`,effects:{resources:{silver:-150},approval:{[s]:15},stability:3}}),g.push({id:"public_statement",text:"",description:`${b}`,effects:{approval:{[s]:8},stability:-2}}),g.push({id:"surveillance",text:"",description:"",effects:{approval:{[s]:-5},stability:5},randomEffects:[{chance:.3,description:"",effects:{approval:{[s]:-15},stability:-8}}]}),g.push({id:"ignore",text:"",description:"",effects:{}}),{id:`rebellion_brewing_${s}_${Date.now()}`,name:`${b}`,icon:"AlertTriangle",image:null,description:`${b}

30%${(o.influenceShare*100).toFixed(1)}%

`,isRebellionEvent:!0,rebellionPhase:Ys.BREWING,rebellionStratum:s,options:g}}function n1(s,o,d,c,m){const b=Sr(s),g=[];return g.push({id:"major_concession",text:"",description:`${b}`,effects:{resources:{silver:-500},approval:{[s]:30},stability:10}}),g.push({id:"negotiate",text:"",description:`${b}`,effects:{resources:{silver:-200},approval:{[s]:15},stability:3}}),d&&!c&&g.push({id:"show_force",text:"",description:"",effects:{approval:{[s]:-10,soldier:5},stability:8},randomEffects:[{chance:.25,description:"",effects:{approval:{[s]:-20},stability:-15}}]}),g.push({id:"divide",text:"",description:"",effects:{stability:-3},randomEffects:[{chance:.4,description:"",effects:{approval:{[s]:10},stability:5}},{chance:.3,description:"",effects:{approval:{[s]:-20},stability:-10}}]}),g.push({id:"ignore",text:"",description:"",effects:{stability:-5}}),{id:`rebellion_plotting_${s}_${Date.now()}`,name:`${b}`,icon:"Flame",image:null,description:`${b}

70%${(o.influenceShare*100).toFixed(1)}%


`,isRebellionEvent:!0,rebellionPhase:Ys.PLOTTING,rebellionStratum:s,options:g}}function rf(s,o,d,c,m,b){const g=Sr(s),v=[];return d&&!c&&v.push({id:"suppress",text:"",description:"",effects:{},callback:()=>b("suppress",s)}),v.push({id:"accept_war",text:"",description:"",effects:{},callback:()=>b("accept_war",s,m)}),{id:`rebellion_active_${s}_${Date.now()}`,name:`${g}`,icon:"Skull",image:null,description:`${g}"${m.name}"

${g}

${m.population}
${m.wealth}`,isRebellionEvent:!0,rebellionPhase:Ys.ACTIVE,rebellionStratum:s,options:v}}function s1(s,o,d,c){const m=Sr(s);return o?{id:`rebellion_investigation_success_${s}_${Date.now()}`,name:"",icon:"Search",description:`${m}${d||""}

`,isRebellionEvent:!0,options:[{id:"ok",text:"",effects:{},callback:()=>c("investigation_success",s)}]}:{id:`rebellion_investigation_fail_${s}_${Date.now()}`,name:"",icon:"XCircle",description:`${m}`,isRebellionEvent:!0,options:[{id:"ok",text:"",effects:{},callback:()=>c("investigation_fail",s)}]}}function i1(s,o,d){const c=Sr(s);return o?{id:`rebellion_arrest_success_${s}_${Date.now()}`,name:"",icon:"Shield",description:`

${c}`,isRebellionEvent:!0,options:[{id:"execute",text:"",description:"",effects:{stability:5,classApproval:{[s]:-15}},callback:()=>d("arrest_execute",s)},{id:"imprison",text:"",description:"",effects:{},callback:()=>d("arrest_imprison",s)},{id:"exile",text:"",description:"",effects:{classApproval:{[s]:-5}},callback:()=>d("arrest_exile",s)}]}:{id:`rebellion_arrest_fail_${s}_${Date.now()}`,name:"",icon:"AlertTriangle",description:"",isRebellionEvent:!0,options:[{id:"ok",text:"",effects:{},callback:()=>d("arrest_fail",s)}]}}function r1(s,o,d,c,m){const b=Sr(s);return o?{id:`rebellion_suppress_success_${s}_${Date.now()}`,name:"",icon:"Trophy",description:`${b}

${d}
${c}

`,isRebellionEvent:!0,options:[{id:"mercy",text:"",description:"",effects:{classApproval:{[s]:10}},callback:()=>m("suppress_mercy",s)},{id:"strict",text:"",description:"",effects:{stability:10,classApproval:{[s]:-20}},callback:()=>m("suppress_strict",s)}]}:{id:`rebellion_suppress_fail_${s}_${Date.now()}`,name:"",icon:"Skull",description:`

${d}
${c}

`,isRebellionEvent:!0,options:[{id:"ok",text:"",effects:{},callback:()=>m("suppress_fail",s)}]}}function of(s,o,d,c){const m=Sr(s),b=`rebel_${s}_${Date.now()}`,g=Math.max(10,Math.floor(o*.8)),v=Math.max(cl.REBEL_NATION_BASE_WEALTH,Math.floor(d*.5));return{id:b,name:`${m}`,desc:`${m}`,color:"#8B0000",icon:"Flame",wealth:v,population:g,aggression:cl.REBEL_NATION_BASE_AGGRESSION,relation:0,isAtWar:!0,warScore:0,militaryStrength:Math.min(1.5,.5+c*2),isRebelNation:!0,rebellionStratum:s,visible:!0,economyTraits:{resourceBias:{},baseWealth:v,basePopulation:g},foreignPower:{baseRating:.5,volatility:.5,appearEpoch:0,populationFactor:1,wealthFactor:1},inventory:{},budget:Math.floor(v*.3),enemyLosses:0,warDuration:0,warStartDay:null,foreignWars:{}}}function o1(s,o,d){return o?{id:`rebellion_end_victory_${Date.now()}`,name:"",icon:"Trophy",description:`${s.name}

`,isRebellionEvent:!0,options:[{id:"celebrate",text:"",description:"",effects:{stability:15,resources:{culture:50}},callback:()=>d("end_celebrate",s)},{id:"rebuild",text:"",description:"",effects:{stability:5},callback:()=>d("end_rebuild",s)}]}:{id:`rebellion_end_defeat_${Date.now()}`,name:"",icon:"Frown",description:`${s.name}...`,isRebellionEvent:!0,options:[{id:"accept",text:"",effects:{stability:-20},callback:()=>d("end_defeat",s)}]}}const Wd=[...Gx,...Fx,...Ix,...Yx,...Xx];function l1(s){return Jx(s,Wd)}const Sn={militia:{id:"militia",name:"",desc:"",epoch:0,icon:"Users",category:"infantry",attack:6,defense:4,speed:3,range:1,recruitCost:{food:25,wood:12},maintenanceCost:{food:.35,silver:.12},trainingTime:2,populationCost:1,abilities:[""],counters:{cavalry:1.2,siege:1.3},weakAgainst:["archer"],obsoleteAfterEpochs:2},slinger:{id:"slinger",name:"",desc:"",epoch:0,icon:"Circle",category:"archer",attack:6,defense:2,speed:3,range:3,recruitCost:{food:30,wood:15,stone:5},maintenanceCost:{food:.4,silver:.15,stone:.1},trainingTime:3,populationCost:1,abilities:[""],counters:{infantry:1.4},weakAgainst:["cavalry"],obsoleteAfterEpochs:2},spearman:{id:"spearman",name:"",desc:"",epoch:1,icon:"Sword",category:"infantry",attack:12,defense:9,speed:3,range:1,recruitCost:{food:55,wood:35,copper:12},maintenanceCost:{food:.55,silver:.35,copper:.05},trainingTime:4,populationCost:1,abilities:[""],counters:{cavalry:1.8,siege:1.2},weakAgainst:["archer"],obsoleteAfterEpochs:2},archer:{id:"archer",name:"",desc:"",epoch:1,icon:"Target",category:"archer",attack:14,defense:6,speed:4,range:4,recruitCost:{food:65,wood:45,silver:25},maintenanceCost:{food:.65,silver:.45,wood:.2},trainingTime:5,populationCost:1,abilities:["",""],counters:{infantry:1.5,siege:1.4},weakAgainst:["cavalry"],obsoleteAfterEpochs:2},chariot:{id:"chariot",name:"",desc:"",epoch:1,icon:"Truck",category:"cavalry",attack:15,defense:8,speed:6,range:1,recruitCost:{food:100,wood:60,copper:30,silver:40},maintenanceCost:{food:1.2,silver:.7,wood:.3},trainingTime:6,populationCost:1,abilities:["",""],counters:{archer:1.6},weakAgainst:["infantry"],obsoleteAfterEpochs:2},hoplite:{id:"hoplite",name:"",desc:"",epoch:2,icon:"Shield",category:"infantry",attack:16,defense:14,speed:2,range:1,recruitCost:{food:100,copper:40,iron:20,silver:50},maintenanceCost:{food:.75,silver:.55,iron:.08},trainingTime:6,populationCost:1,abilities:["",""],counters:{cavalry:1.7,siege:1.3},weakAgainst:["archer"],obsoleteAfterEpochs:2},composite_archer:{id:"composite_archer",name:"",desc:"",epoch:2,icon:"Target",category:"archer",attack:18,defense:7,speed:4,range:5,recruitCost:{food:85,wood:50,copper:25,silver:45},maintenanceCost:{food:.7,silver:.5,wood:.25,copper:.05},trainingTime:6,populationCost:1,abilities:["",""],counters:{infantry:1.6,siege:1.3},weakAgainst:["cavalry"],obsoleteAfterEpochs:2},light_cavalry:{id:"light_cavalry",name:"",desc:"",epoch:2,icon:"Navigation",category:"cavalry",attack:18,defense:8,speed:8,range:1,recruitCost:{food:120,silver:60,iron:25},maintenanceCost:{food:1.2,silver:.8,iron:.06},trainingTime:7,populationCost:1,abilities:["",""],counters:{archer:1.8},weakAgainst:["infantry"],obsoleteAfterEpochs:2},battering_ram:{id:"battering_ram",name:"",desc:"",epoch:2,icon:"Hammer",category:"siege",attack:30,defense:15,speed:1,range:1,recruitCost:{food:150,wood:200,iron:50,silver:80},maintenanceCost:{food:1.2,silver:.8,wood:.5,iron:.1},trainingTime:10,populationCost:2,abilities:[""],counters:{},weakAgainst:["cavalry","archer","infantry"],obsoleteAfterEpochs:2},heavy_infantry:{id:"heavy_infantry",name:"",desc:"",epoch:3,icon:"ShieldAlert",category:"infantry",attack:20,defense:18,speed:2,range:1,recruitCost:{food:140,iron:60,silver:80},maintenanceCost:{food:.9,silver:.7,iron:.12},trainingTime:8,populationCost:1,abilities:["",""],counters:{cavalry:1.6,siege:1.4},weakAgainst:["archer"],obsoleteAfterEpochs:2},crossbowman:{id:"crossbowman",name:"",desc:"",epoch:3,icon:"Crosshair",category:"archer",attack:22,defense:9,speed:3,range:5,recruitCost:{food:110,wood:70,iron:45,silver:55},maintenanceCost:{food:.8,silver:.6,wood:.15,iron:.1},trainingTime:7,populationCost:1,abilities:["",""],counters:{infantry:1.7,siege:1.4},weakAgainst:["cavalry"],obsoleteAfterEpochs:2},knight:{id:"knight",name:"",desc:"",epoch:3,icon:"Crown",category:"cavalry",attack:28,defense:22,speed:6,range:1,recruitCost:{food:250,iron:100,silver:160},maintenanceCost:{food:1.8,silver:1.3,iron:.2},trainingTime:10,populationCost:1,abilities:["","",""],counters:{archer:1.9},weakAgainst:["infantry"],obsoleteAfterEpochs:2},trebuchet:{id:"trebuchet",name:"",desc:"",epoch:3,icon:"Mountain",category:"siege",attack:45,defense:8,speed:1,range:6,recruitCost:{food:200,wood:250,iron:80,silver:150},maintenanceCost:{food:1.5,silver:1.2,wood:.8,iron:.15,stone:.3},trainingTime:12,populationCost:3,abilities:["",""],counters:{infantry:1.3},weakAgainst:["cavalry","archer"],obsoleteAfterEpochs:2},pikeman:{id:"pikeman",name:"",desc:"",epoch:4,icon:"Swords",category:"infantry",attack:22,defense:20,speed:2,range:2,recruitCost:{food:160,wood:60,iron:70,silver:90},maintenanceCost:{food:1,silver:.8,iron:.1},trainingTime:8,populationCost:1,abilities:["",""],counters:{cavalry:2,siege:1.3},weakAgainst:["archer","gunpowder"],obsoleteAfterEpochs:2},arquebus:{id:"arquebus",name:"",desc:"",epoch:4,icon:"Flame",category:"gunpowder",attack:28,defense:8,speed:2,range:4,recruitCost:{food:140,iron:60,tools:30,silver:100},maintenanceCost:{food:.9,silver:.8,iron:.08,tools:.15},trainingTime:9,populationCost:1,abilities:["","",""],counters:{infantry:1.5,cavalry:1.4},weakAgainst:["cavalry"],obsoleteAfterEpochs:2},cuirassier:{id:"cuirassier",name:"",desc:"",epoch:4,icon:"Shield",category:"cavalry",attack:32,defense:24,speed:6,range:1,recruitCost:{food:300,iron:120,silver:200},maintenanceCost:{food:2,silver:1.5,iron:.25},trainingTime:11,populationCost:1,abilities:["","",""],counters:{archer:1.9,gunpowder:1.5},weakAgainst:["infantry"],obsoleteAfterEpochs:2},bombard:{id:"bombard",name:"",desc:"",epoch:4,icon:"Bomb",category:"siege",attack:55,defense:10,speed:1,range:6,recruitCost:{food:250,iron:150,tools:60,silver:200},maintenanceCost:{food:1.8,silver:1.5,iron:.3,tools:.25},trainingTime:14,populationCost:3,abilities:["","",""],counters:{infantry:1.5},weakAgainst:["cavalry"],obsoleteAfterEpochs:2},musketeer:{id:"musketeer",name:"",desc:"",epoch:5,icon:"Zap",category:"infantry",attack:30,defense:14,speed:3,range:3,recruitCost:{food:180,iron:70,tools:40,silver:110},maintenanceCost:{food:1.1,silver:1,iron:.1,tools:.18},trainingTime:9,populationCost:1,abilities:["","",""],counters:{cavalry:1.6,siege:1.4},weakAgainst:["gunpowder"],obsoleteAfterEpochs:2},rifleman:{id:"rifleman",name:"",desc:"",epoch:5,icon:"Target",category:"gunpowder",attack:35,defense:10,speed:3,range:5,recruitCost:{food:200,iron:80,tools:50,silver:130},maintenanceCost:{food:1.2,silver:1.1,iron:.12,tools:.22},trainingTime:10,populationCost:1,abilities:["","",""],counters:{infantry:1.7,cavalry:1.5,siege:1.5},weakAgainst:["cavalry"],obsoleteAfterEpochs:2},dragoon:{id:"dragoon",name:"",desc:"",epoch:5,icon:"Navigation",category:"cavalry",attack:35,defense:18,speed:7,range:2,recruitCost:{food:280,iron:90,tools:45,silver:180},maintenanceCost:{food:2,silver:1.5,iron:.15,tools:.2},trainingTime:12,populationCost:1,abilities:["","",""],counters:{archer:1.8,gunpowder:1.6},weakAgainst:["infantry"],obsoleteAfterEpochs:2},cannon:{id:"cannon",name:"",desc:"",epoch:5,icon:"Bomb",category:"siege",attack:60,defense:12,speed:2,range:7,recruitCost:{food:300,iron:180,tools:80,silver:250},maintenanceCost:{food:2,silver:1.8,iron:.35,tools:.35},trainingTime:15,populationCost:3,abilities:["","",""],counters:{infantry:1.7,gunpowder:1.5},weakAgainst:["cavalry"],obsoleteAfterEpochs:2},line_infantry:{id:"line_infantry",name:"",desc:"",epoch:6,icon:"Users",category:"infantry",attack:40,defense:20,speed:3,range:4,recruitCost:{food:250,iron:100,tools:60,silver:160},maintenanceCost:{food:1.4,silver:1.3,iron:.15,tools:.28},trainingTime:10,populationCost:1,abilities:["","",""],counters:{cavalry:1.7,siege:1.5},weakAgainst:["gunpowder"],obsoleteAfterEpochs:3},gatling:{id:"gatling",name:"",desc:"",epoch:6,icon:"Zap",category:"gunpowder",attack:50,defense:12,speed:2,range:5,recruitCost:{food:300,iron:150,tools:100,silver:250},maintenanceCost:{food:1.6,silver:1.8,iron:.25,tools:.45},trainingTime:12,populationCost:2,abilities:["","",""],counters:{infantry:2,cavalry:1.8},weakAgainst:["siege"],obsoleteAfterEpochs:3},lancer:{id:"lancer",name:"",desc:"",epoch:6,icon:"Compass",category:"cavalry",attack:38,defense:20,speed:8,range:1,recruitCost:{food:320,iron:100,tools:50,silver:200},maintenanceCost:{food:2.2,silver:1.6,iron:.12,tools:.22},trainingTime:11,populationCost:1,abilities:["","",""],counters:{archer:1.9,gunpowder:1.7},weakAgainst:["infantry"],obsoleteAfterEpochs:3},artillery:{id:"artillery",name:"",desc:"",epoch:6,icon:"Bomb",category:"siege",attack:80,defense:15,speed:1,range:8,recruitCost:{food:400,iron:250,tools:120,silver:350},maintenanceCost:{food:2.5,silver:2.2,iron:.5,tools:.55},trainingTime:18,populationCost:4,abilities:["","",""],counters:{infantry:2,gunpowder:1.8,siege:1.5},weakAgainst:["cavalry"],obsoleteAfterEpochs:3}},Ci={infantry:{name:"",icon:"Swords",color:"text-red-400",description:"/"},archer:{name:"",icon:"Target",color:"text-green-400",description:""},cavalry:{name:"",icon:"Navigation",color:"text-blue-400",description:"/"},gunpowder:{name:"",icon:"Flame",color:"text-yellow-400",description:"/"},siege:{name:"",icon:"Bomb",color:"text-orange-400",description:""}},Hd=(s={})=>{let o=0;return Object.entries(s).forEach(([d,c])=>{if(c<=0)return;const m=Sn[d];if(!m)return;const b=m.maintenanceCost?.food||0;o+=b*c}),o},Tc=(s,o,d=0)=>{let c=0;return Object.entries(s).forEach(([m,b])=>{if(b<=0)return;const g=Sn[m];if(!g)return;let v=(g.attack+g.defense)*b;const x=o-g.epoch;x>0&&x<=(g.obsoleteAfterEpochs||2)&&(v*=1+x*.05);const y=g.obsoleteAfterEpochs||2;if(x>y){const w=x-y,k=Math.min(.75,w*.25);v*=1-k}c+=v}),c*=1+d,c},lf=(s,o)=>{let d=1,c=0;return Object.entries(s).forEach(([m,b])=>{if(b<=0)return;const g=Sn[m];g&&Object.entries(o).forEach(([v,x])=>{if(x<=0)return;const y=Sn[v];if(y&&g.counters[y.category]){const w=g.counters[y.category],k=b*x/100;d+=(w-1)*k,c++}})}),{multiplier:d,counterCount:c}},eh=(s,o)=>{const{army:d,epoch:c,militaryBuffs:m=0}=s,{army:b,epoch:g,militaryBuffs:v=0,wealth:x=1e3}=o;let y=Tc(d,c,m),w=Tc(b,g,v);const k=lf(d,b),M=lf(b,d);y*=k.multiplier,w*=M.multiplier,w*=1.2;const z=.85+Math.random()*.3,C=.85+Math.random()*.3;y*=z,w*=C;const T=y+w,D=y/T,E=w/T,S=D>.5,q=Math.abs(D-.5)>.3,W=S?.1+E*.3:.3+E*.5,be=S?.4+D*.6:.2+D*.3,G={},P={};Object.entries(d).forEach(([Pe,ne])=>{G[Pe]=Math.floor(ne*W)}),Object.entries(b).forEach(([Pe,ne])=>{P[Pe]=Math.floor(ne*be)});let pe={};if(S){const ne=x*(q?.08:.04);pe={food:Math.floor(ne*.25),wood:Math.floor(ne*.12),stone:Math.floor(ne*.08),silver:Math.floor(ne*.3),iron:Math.floor(ne*.1),copper:Math.floor(ne*.05),cloth:Math.floor(ne*.05),tools:Math.floor(ne*.05)},Object.keys(pe).forEach(ae=>{pe[ae]<=0&&delete pe[ae]})}return{victory:S,decisive:q,attackerPower:Math.floor(y),defenderPower:Math.floor(w),attackerAdvantage:(D*100).toFixed(1),defenderAdvantage:(E*100).toFixed(1),attackerLosses:G,defenderLosses:P,attackerCounter:k.counterCount,defenderCounter:M.counterCount,loot:pe,battleReport:c1({victory:S,decisive:q,attackerPower:y,defenderPower:w,attackerCounter:k.counterCount,defenderCounter:M.counterCount,attackerLosses:G,defenderLosses:P,loot:pe})}},c1=s=>{const{victory:o,decisive:d,attackerPower:c,defenderPower:m,attackerCounter:b,defenderCounter:g,attackerLosses:v,defenderLosses:x,loot:y}=s;let w=[];o?d?w.push(" "):w.push(" "):d?w.push(" "):w.push(" "),w.push(` ${Math.floor(c)} vs  ${Math.floor(m)}`),b>0&&w.push(`  ${b} `),g>0&&w.push(`  ${g} `);const k=Object.values(v).reduce((z,C)=>z+C,0),M=Object.values(x).reduce((z,C)=>z+C,0);if(w.push(`${k} `),w.push(`${M} `),o&&y){const z=Object.entries(y).filter(([,C])=>C>0).map(([C,T])=>`${C} ${T}`).join(", ");z&&w.push(`${z}`)}return w},th=s=>{const o={};return Object.entries(s).forEach(([d,c])=>{if(c<=0)return;const m=Sn[d];m&&Object.entries(m.maintenanceCost).forEach(([b,g])=>{o[b]=(o[b]||0)+g*c})}),o},d1=s=>{let o=0;return Object.entries(s).forEach(([d,c])=>{if(c<=0)return;const m=Sn[d];m&&(o+=m.populationCost*c)}),o},u1={food_chain:{id:"food_chain",name:"",desc:"",unlockEpoch:0,stages:[{stage:"extraction",name:"",buildings:["farm","large_estate"],output:"food",efficiency:1,workers:["peasant","serf"]},{stage:"storage",name:"",buildings:["granary"],input:"food",output:"food",efficiency:1.1,bonus:{preservation:.05}},{stage:"processing",name:"",buildings:["culinary_kitchen"],input:"food",output:"delicacies",ratio:1.6,efficiency:1,workers:["artisan","peasant"]},{stage:"consumption",name:"",consumers:["all_classes"],input:"food"},{stage:"consumption",name:"",consumers:["merchant","official","landowner","capitalist","knight"],input:"delicacies",bonus:{approval:.1,stability:.05}}],upgrades:[{id:"irrigation",name:"",unlockEpoch:1,cost:{stone:200,wood:150},bonus:{efficiency:.15,output:.1}},{id:"crop_rotation",name:"",unlockEpoch:2,cost:{science:500},bonus:{efficiency:.2,sustainability:.15}},{id:"mechanized_farming",name:"",unlockEpoch:6,cost:{steel:300,tools:200},bonus:{efficiency:.4,workers:-.3}}]},wood_chain:{id:"wood_chain",name:"",desc:"",unlockEpoch:0,stages:[{stage:"extraction",name:"",buildings:["lumber_camp"],output:"wood",efficiency:1,workers:["lumberjack"]},{stage:"processing",name:"",buildings:["sawmill"],input:"wood",output:"plank",ratio:2.5,efficiency:1,workers:["worker","artisan"]},{stage:"advanced",name:"",buildings:["furniture_workshop"],input:["wood","stone"],output:"furniture",ratio:2.2,efficiency:1,workers:["artisan"]},{stage:"consumption",name:"",consumers:["buildings","ships","tools"],input:["wood","plank"]},{stage:"consumption",name:"",consumers:["merchant","official","landowner","capitalist","knight"],input:"furniture",bonus:{approval:.08,culture:.05}}],upgrades:[{id:"forestry_management",name:"",unlockEpoch:2,cost:{science:400,silver:200},bonus:{efficiency:.15,sustainability:.2}},{id:"advanced_sawmill",name:"",unlockEpoch:4,cost:{iron:150,tools:100},bonus:{processing:.25,waste:-.15}}]},textile_chain:{id:"textile_chain",name:"",desc:"",unlockEpoch:0,stages:[{stage:"extraction",name:"",buildings:["loom_house"],output:"cloth",efficiency:1,workers:["peasant"]},{stage:"processing",name:"",buildings:["dye_works"],input:"food",output:"dye",ratio:.4,efficiency:1,workers:["peasant","artisan"]},{stage:"advanced",name:"",buildings:["tailor_workshop"],input:["cloth","dye"],output:"fine_clothes",ratio:.8,efficiency:1,workers:["artisan"],bonus:{culture:.1}},{stage:"consumption",name:"",consumers:["all_classes"],input:"cloth",bonus:{approval:.05,stability:.02}},{stage:"consumption",name:"",consumers:["merchant","landowner","official","capitalist","knight"],input:"fine_clothes",bonus:{approval:.1,culture:.05}}],upgrades:[{id:"loom_standardization",name:"",unlockEpoch:1,cost:{wood:80,stone:30},bonus:{cloth_output:.2,efficiency:.15}},{id:"dyeworks_expansion",name:"",unlockEpoch:2,cost:{papyrus:60,silver:150},bonus:{dye_output:.25,efficiency:.15}}]},mining_chain:{id:"mining_chain",name:"",desc:"",unlockEpoch:1,stages:[{stage:"extraction",name:"",buildings:["quarry","copper_mine","mine","coal_mine"],output:["stone","copper","iron","coal"],efficiency:1,workers:["miner"]},{stage:"processing",name:"",buildings:["smelter","forge"],input:["copper","iron","coal"],output:["tools","steel"],efficiency:1,workers:["artisan","engineer"]},{stage:"advanced",name:"",buildings:["factory","steel_mill"],input:["iron","coal","tools"],output:"steel",efficiency:1,workers:["engineer","worker"]},{stage:"consumption",name:"",consumers:["military","buildings","machinery"],input:["tools","steel","iron"]}],upgrades:[{id:"deep_mining",name:"",unlockEpoch:3,cost:{iron:200,tools:150},bonus:{extraction:.25,depth:2}},{id:"blast_furnace",name:"",unlockEpoch:5,cost:{brick:300,coal:200},bonus:{processing:.35,efficiency:.2}},{id:"industrial_complex",name:"",unlockEpoch:6,cost:{steel:500,coal:400},bonus:{efficiency:.5,output:.3}}]},knowledge_chain:{id:"knowledge_chain",name:"",desc:"",unlockEpoch:2,stages:[{stage:"extraction",name:"",buildings:["reed_works"],output:"papyrus",efficiency:1,workers:["peasant","scribe"]},{stage:"processing",name:"",buildings:["library","scriptorium"],input:"papyrus",output:"culture",efficiency:1,workers:["scribe","scholar"]},{stage:"advanced",name:"",buildings:["printing_house","university"],input:["papyrus","culture"],output:["culture","science"],efficiency:1.2,workers:["scholar","scribe"]},{stage:"consumption",name:"",consumers:["education","research"],input:["culture","science"]}],upgrades:[{id:"printing_press",name:"",unlockEpoch:5,cost:{iron:150,tools:100},bonus:{efficiency:.4,spread:.5}},{id:"public_library",name:"",unlockEpoch:4,cost:{brick:300,papyrus:200},bonus:{access:.3,culture:.2}}]},luxury_chain:{id:"luxury_chain",name:"",desc:"",unlockEpoch:4,stages:[{stage:"extraction",name:"",buildings:["spice_market","coffee_plantation"],output:["spice","coffee"],efficiency:1,workers:["merchant","serf"]},{stage:"processing",name:"",buildings:["coffee_house","trade_port"],input:["spice","coffee"],output:"culture",efficiency:1,workers:["merchant","artisan"]},{stage:"consumption",name:"",consumers:["noble","merchant","scholar"],input:["spice","coffee"],bonus:{approval:.15}}],upgrades:[{id:"trade_network",name:"",unlockEpoch:5,cost:{silver:500,plank:200},bonus:{efficiency:.3,price:.2}},{id:"luxury_monopoly",name:"",unlockEpoch:5,cost:{silver:800},bonus:{profit:.5,influence:.25}}]},military_chain:{id:"military_chain",name:"",desc:"",unlockEpoch:1,stages:[{stage:"extraction",name:"",buildings:["mine","copper_mine"],output:["iron","copper"],efficiency:1,workers:["miner"]},{stage:"processing",name:"",buildings:["forge","armory"],input:["iron","copper","coal"],output:"weapons",efficiency:1,workers:["artisan","engineer"]},{stage:"advanced",name:"",buildings:["barracks","training_ground"],input:["weapons","food"],output:"military_power",efficiency:1,workers:["soldier"]},{stage:"consumption",name:"",consumers:["defense","conquest","patrol"],input:["military_power","food","silver"]}],upgrades:[{id:"standardized_weapons",name:"",unlockEpoch:4,cost:{iron:300,tools:200},bonus:{efficiency:.25,cost:-.15}},{id:"military_logistics",name:"",unlockEpoch:5,cost:{silver:600,plank:300},bonus:{supply:.3,mobility:.2}},{id:"arms_factory",name:"",unlockEpoch:6,cost:{steel:400,coal:300},bonus:{production:.5,quality:.3}}]}},p1=12,bc=30,m1=["","","","","","","","","","","",""],kd=[{name:"",months:[3,4,5]},{name:"",months:[6,7,8]},{name:"",months:[9,10,11]},{name:"",months:[12,1,2]}],Sc=(s=0)=>{const o=Math.max(0,Math.floor(s))+1,d=p1*bc,c=Math.floor((o-1)/d)+1,m=(o-1)%d+1,b=Math.floor((m-1)/bc)+1,g=(m-1)%bc+1,v=m1[b-1]||`${b}`,x=kd.find(w=>w.months.includes(b))||kd[0],y=x.months.indexOf(b)*bc+g;return{totalDays:o,year:c,month:b,monthName:v,day:g,dayOfYear:m,season:x.name,seasonIndex:kd.indexOf(x),seasonDay:y,formatted:`${c} ${x.name}  ${v}${g}`}},vc="civ_game_save_data_v1",ol="civ_game_autosave_v1",cf={food:200,wood:200,stone:200,cloth:80,plank:0,brick:0,iron:0,tools:0,copper:0,papyrus:0,spice:0,coffee:0,coal:0,steel:0,silver:200,science:0,culture:300},df=()=>{const s={};return Object.keys(Fe).forEach(o=>{s[o]=Fe[o].startingWealth||0}),s},uf=()=>{const s={};return Object.keys(Fe).forEach(o=>{s[o]=[]}),s},pf=()=>{const s={};return Object.keys(Fe).forEach(o=>{s[o]=[]}),s},mf=()=>{const s={};return Object.keys(Fe).forEach(o=>{s[o]={pop:[],income:[],expense:[]}}),{treasury:[],tax:[],population:[],class:s}},ff=()=>({pendingTrades:[],lastTradeTime:0}),hf={approval:{duration:30,decayRate:.04},stability:{duration:30,decayRate:.04},resourceDemand:{duration:60,decayRate:.02},stratumDemand:{duration:60,decayRate:.02},buildingProduction:{duration:45,decayRate:.025}},f1=()=>({approval:[],stability:[],resourceDemand:[],stratumDemand:[],buildingProduction:[]}),xf=()=>({routes:[]}),h1=s=>{if(!s||!Array.isArray(s))return Ec;const o={};return s.forEach(d=>{o[d.id]=d.active}),Ec.map(d=>({...d,active:o[d.id]??d.active}))},ah=s=>{if(s==="silver")return!1;const o=Oe[s];return o?!o.type||o.type!=="virtual":!1},gf=()=>{const s={};return Object.keys(Oe).forEach(o=>{ah(o)&&(s[o]=Math.max(.5,Oe[o].basePrice||1))}),{prices:s,demand:{},supply:{},wages:{},priceHistory:{},supplyHistory:{},demandHistory:{}}},yf=()=>{const s={};return Object.keys(Fe).forEach(o=>{s[o]=1}),s},bf=()=>{const s={};return Object.keys(Oe).forEach(o=>{ah(o)&&(s[o]=.05)}),s},vf=()=>({}),jf=()=>qx.map(s=>{const o={};s.economyTraits?.resourceBias&&Object.entries(s.economyTraits.resourceBias).forEach(([M,z])=>{z>1?o[M]=Math.floor(500*(1.2+Math.random()*.6)):z<1?o[M]=Math.floor(500*(.2+Math.random()*.3)):o[M]=Math.floor(500*(.8+Math.random()*.4))});const c=s.wealth??800,m=Math.floor(c*.5),b=s.appearEpoch??0,g=Math.max(.4,c/800),v=typeof s.marketVolatility=="number"?Math.min(.9,Math.max(.1,s.marketVolatility)):.3,x=s.culturalTraits?.agriculturalFocus?1.15:1,y=Math.min(2.5,Math.max(.6,g*x)),w=Math.min(3.5,Math.max(.5,g*(1+Math.max(0,b)*.05))),k=1e3+Math.floor(Math.random()*500);return{...s,relation:50,warScore:s.warScore??0,isAtWar:s.isAtWar??!1,wealth:c,budget:m,inventory:o,enemyLosses:0,warDuration:0,warStartDay:null,militaryStrength:1,population:k,wealthTemplate:c,foreignPower:{baseRating:g,volatility:v,appearEpoch:b,populationFactor:y,wealthFactor:w},economyTraits:{...s.economyTraits,baseWealth:c,basePopulation:k}}}),x1=()=>{const[s,o]=L.useState(cf),[d,c]=L.useState(5),[m,b]=L.useState({}),[g,v]=L.useState(10),[x,y]=L.useState(0),[w,k]=L.useState(0),[M,z]=L.useState({}),[C,T]=L.useState([]),[D,E]=L.useState(0),[S,q]=L.useState("build"),[W,be]=L.useState(1),[G,P]=L.useState(!1),[pe,Pe]=L.useState(!1),[ne,ae]=L.useState(60),[se,je]=L.useState(!0),[de,I]=L.useState(()=>Date.now()),[_,B]=L.useState(!1),re=L.useRef(null),[F,me]=L.useState(Ec),[h,A]=L.useState(jf()),[Y,R]=L.useState({}),[Q,ye]=L.useState({}),[Ne,ke]=L.useState(df()),[Je,tt]=L.useState({}),[bt,ft]=L.useState({}),[vt,we]=L.useState({}),[Ze,pt]=L.useState(uf()),[xt,jt]=L.useState(pf()),[le,Ie]=L.useState(0),[K,Be]=L.useState(0),[ze,$e]=L.useState([]),[yt,_t]=L.useState([]),[It,oa]=L.useState({}),[za,Ta]=L.useState(50),[en,$n]=L.useState(null),[At,Z]=L.useState(null),[ee,te]=L.useState({}),[$,ge]=L.useState({}),[H,he]=L.useState(!1),[oe,Ae]=L.useState(mf()),[Le,We]=L.useState(hf),[Te,Ue]=L.useState(f1()),[Ke,Nt]=L.useState(0),[Mt,ga]=L.useState({}),[la,et]=L.useState([]),[ie,ct]=L.useState(null),[Ve,Ce]=L.useState(null),[nt,qe]=L.useState([]),[_e,Dt]=L.useState(1.5),[Rt,mt]=L.useState(null),[Kt,Ht]=L.useState([]),[ca,ra]=L.useState(1),[Ye,dn]=L.useState(ff),[Nn,qn]=L.useState(xf),[An,wa]=L.useState({tradeTax:0}),[Jn,Sa]=L.useState({}),[Vn,un]=L.useState({}),[Hs,On]=L.useState([]),[ii,ri]=L.useState(null),[Gn,ss]=L.useState({}),[$a,Ga]=L.useState(()=>!localStorage.getItem("tutorial_completed")),[is,Kn]=L.useState(null),[qs,Es]=L.useState([]),[rs,Ts]=L.useState([" 1 "]),[Ba,Ss]=L.useState([]),[Xs,os]=L.useState({}),[De,Ge]=L.useState({total:0,breakdown:{headTax:0,industryTax:0,subsidy:0,policyIncome:0,policyExpense:0},efficiency:1}),[ot,Bt]=L.useState({headTaxRates:yf(),resourceTaxRates:bf(),businessTaxRates:vf()}),[at,Xe]=L.useState({}),[Tt,it]=L.useState({}),[wt,da]=L.useState(gf());L.useEffect(()=>()=>{re.current&&clearTimeout(re.current)},[]);const zt=ha=>{Ts(_a=>[ha,..._a].slice(0,8))};L.useEffect(()=>{if(!(typeof window>"u"))try{const ha=localStorage.getItem(ol);if(!ha)return;const _a=localStorage.getItem(vc);if(!_a){zt(" ");return}const Bn=JSON.parse(ha),Fa=JSON.parse(_a);(Bn?.updatedAt||0)>(Fa?.updatedAt||0)&&zt(" ")}catch(ha){console.warn("Auto-save detection failed:",ha)}},[]);const Aa=()=>{B(!0),re.current&&clearTimeout(re.current),re.current=setTimeout(()=>{B(!1),re.current=null},1e3)};return{resources:s,setResources:o,market:wt,setMarket:da,population:d,setPopulation:c,popStructure:m,setPopStructure:b,maxPop:g,setMaxPop:v,maxPopBonus:w,setMaxPopBonus:k,birthAccumulator:x,setBirthAccumulator:y,buildings:M,setBuildings:z,techsUnlocked:C,setTechsUnlocked:T,epoch:D,setEpoch:E,daysElapsed:Ke,setDaysElapsed:Nt,activeTab:S,setActiveTab:q,gameSpeed:W,setGameSpeed:be,isPaused:G,setIsPaused:P,pausedBeforeEvent:pe,setPausedBeforeEvent:Pe,autoSaveInterval:ne,setAutoSaveInterval:ae,isAutoSaveEnabled:se,setIsAutoSaveEnabled:je,lastAutoSaveTime:de,setLastAutoSaveTime:I,isSaving:_,decrees:F,setDecrees:me,nations:h,setNations:A,selectedTarget:ie,setSelectedTarget:ct,classApproval:Y,setClassApproval:R,classInfluence:Q,setClassInfluence:ye,classWealth:Ne,setClassWealth:ke,classWealthDelta:Je,setClassWealthDelta:tt,classIncome:bt,setClassIncome:ft,classExpense:vt,setClassExpense:we,classWealthHistory:Ze,setClassWealthHistory:pt,classNeedsHistory:xt,setClassNeedsHistory:jt,totalInfluence:le,setTotalInfluence:Ie,totalWealth:K,setTotalWealth:Be,activeBuffs:ze,setActiveBuffs:$e,activeDebuffs:yt,setActiveDebuffs:_t,classInfluenceShift:It,setClassInfluenceShift:oa,stability:za,setStability:Ta,stratumDetailView:en,setStratumDetailView:$n,resourceDetailView:At,setResourceDetailView:Z,classShortages:ee,setClassShortages:te,classLivingStandard:$,setClassLivingStandard:ge,populationDetailView:H,setPopulationDetailView:he,history:oe,setHistory:Ae,eventEffectSettings:Le,setEventEffectSettings:We,activeEventEffects:Te,setActiveEventEffects:Ue,army:Mt,setArmy:ga,militaryQueue:la,setMilitaryQueue:et,battleResult:Ve,setBattleResult:Ce,battleNotifications:nt,setBattleNotifications:qe,militaryWageRatio:_e,setMilitaryWageRatio:Dt,festivalModal:Rt,setFestivalModal:mt,activeFestivalEffects:Kt,setActiveFestivalEffects:Ht,lastFestivalYear:ca,setLastFestivalYear:ra,merchantState:Ye,setMerchantState:dn,tradeRoutes:Nn,setTradeRoutes:qn,tradeStats:An,setTradeStats:wa,actionCooldowns:Jn,setActionCooldowns:Sa,actionUsage:Vn,setActionUsage:un,promiseTasks:Hs,setPromiseTasks:On,showTutorial:$a,setShowTutorial:Ga,currentEvent:is,setCurrentEvent:Kn,eventHistory:qs,setEventHistory:Es,playerInstallmentPayment:ii,setPlayerInstallmentPayment:ri,rebellionStates:Gn,setRebellionStates:ss,logs:rs,setLogs:Ts,clicks:Ba,setClicks:Ss,rates:Xs,setRates:os,taxes:De,setTaxes:Ge,taxPolicies:ot,setTaxPolicies:Bt,jobFill:at,setJobFill:Xe,jobsAvailable:Tt,setJobsAvailable:it,saveGame:({source:ha="manual"}={})=>{try{const _a=Date.now(),Fa={resources:s,population:d,popStructure:m,maxPop:g,maxPopBonus:w,birthAccumulator:x,buildings:M,techsUnlocked:C,epoch:D,activeTab:S,gameSpeed:W,isPaused:G,decrees:F,nations:h,classApproval:Y,classInfluence:Q,classWealth:Ne,classWealthDelta:Je,classIncome:bt,classExpense:vt,classWealthHistory:Ze,classNeedsHistory:xt,totalInfluence:le,totalWealth:K,activeBuffs:ze,activeDebuffs:yt,classInfluenceShift:It,stability:za,stratumDetailView:en,resourceDetailView:At,classShortages:ee,populationDetailView:H,history:oe,daysElapsed:Ke,army:Mt,militaryQueue:la,selectedTarget:ie,battleResult:Ve,militaryWageRatio:_e,festivalModal:Rt,activeFestivalEffects:Kt,lastFestivalYear:ca,showTutorial:$a,currentEvent:is,eventHistory:qs,logs:rs,clicks:Ba,rates:Xs,taxes:De,taxPolicies:ot,jobFill:at,market:wt,merchantState:Ye,tradeRoutes:Nn,tradeStats:An,eventEffectSettings:Le,activeEventEffects:Te,rebellionStates:Gn,actionCooldowns:Jn,actionUsage:Vn,promiseTasks:Hs,autoSaveInterval:ne,isAutoSaveEnabled:se,lastAutoSaveTime:ha==="auto"?_a:de,updatedAt:_a,saveSource:ha},st=ha==="auto"?ol:vc;localStorage.setItem(st,JSON.stringify(Fa)),Aa(),ha==="auto"?I(_a):zt(" ")}catch(_a){console.error(`${ha==="auto"?"Auto":"Manual"} save failed:`,_a),zt(ha==="auto"?` ${_a.message}`:` ${_a.message}`),B(!1)}},loadGame:({source:ha="manual"}={})=>{try{const _a=ha==="auto"?ol:vc,Bn=ha==="auto"?"":"",Fa=localStorage.getItem(_a);if(!Fa){zt(` ${Bn}`);return}const st=JSON.parse(Fa);o(st.resources||cf),c(st.population??5),b(st.popStructure||{}),v(st.maxPop??10),k(st.maxPopBonus||0),y(st.birthAccumulator||0),z(st.buildings||{}),T(st.techsUnlocked||[]),E(st.epoch??0),q(st.activeTab||"build"),be(st.gameSpeed??1),P(st.isPaused??!1),me(h1(st.decrees)),A(st.nations||jf()),R(st.classApproval||{}),ye(st.classInfluence||{}),ke(st.classWealth||df()),tt(st.classWealthDelta||{}),ft(st.classIncome||{}),we(st.classExpense||{}),pt(st.classWealthHistory||uf()),jt(st.classNeedsHistory||pf()),Ie(st.totalInfluence||0),Be(st.totalWealth||0),$e(st.activeBuffs||[]),_t(st.activeDebuffs||[]),oa(st.classInfluenceShift||{}),Ta(st.stability??50),$n(st.stratumDetailView||null),Z(st.resourceDetailView||null),te(st.classShortages||{}),he(st.populationDetailView||!1),Ae(st.history||mf()),Nt(st.daysElapsed||0),ga(st.army||{}),et(st.militaryQueue||[]),ct(st.selectedTarget||null),Ce(st.battleResult||null),Dt(st.militaryWageRatio||1.5),mt(st.festivalModal||null),Ht(st.activeFestivalEffects||[]),ra(st.lastFestivalYear||1),Ga(st.showTutorial??!0),Kn(st.currentEvent||null),Es(st.eventHistory||[]),Ts(st.logs||[]),Ss(st.clicks||[]),os(st.rates||{}),Ge(st.taxes||{total:0,breakdown:{headTax:0,industryTax:0,subsidy:0,policyIncome:0,policyExpense:0},efficiency:1}),Bt(st.taxPolicies||{headTaxRates:yf(),resourceTaxRates:bf(),businessTaxRates:vf()}),Xe(st.jobFill||{}),da(st.market||gf()),dn(st.merchantState||ff()),qn(st.tradeRoutes||xf()),wa(st.tradeStats||{tradeTax:0}),ae(st.autoSaveInterval??60),je(st.isAutoSaveEnabled??!0),I(st.lastAutoSaveTime||Date.now()),We(st.eventEffectSettings||hf);const wn=st.activeEventEffects||{};Ue({approval:Array.isArray(wn.approval)?wn.approval:[],stability:Array.isArray(wn.stability)?wn.stability:[],resourceDemand:Array.isArray(wn.resourceDemand)?wn.resourceDemand:[],stratumDemand:Array.isArray(wn.stratumDemand)?wn.stratumDemand:[],buildingProduction:Array.isArray(wn.buildingProduction)?wn.buildingProduction:[]}),ss(st.rebellionStates||{}),Sa(st.actionCooldowns||{}),un(st.actionUsage||{}),On(st.promiseTasks||[]),zt(ha==="auto"?" ":" ")}catch(_a){console.error("Load game failed:",_a),zt(` ${_a.message}`)}},hasAutoSave:()=>typeof window>"u"?!1:!!localStorage.getItem(ol),resetGame:()=>{typeof window>"u"||!window.confirm("")||(localStorage.removeItem(vc),localStorage.removeItem(ol),window.location.reload())}}},fs=(s,o,d=[])=>{const c=Oe[s];return!(!c||c.unlockTech&&!d.includes(c.unlockTech)||typeof c.unlockEpoch=="number"&&c.unlockEpoch>o)},ho=(s,o,d=[])=>{if(!s)return{};const c={};for(const[m,b]of Object.entries(s))fs(m,o,d)&&(c[m]=b);return c},Nf=s=>Oe[s]?.basePrice||1,ul=(s,o,d=0)=>{if(!o)return Nf(s);const c=Nf(s),m=o?.economyTraits?.resourceBias?.[s]??1,b=o.inventory?.[s]||0,g=500,v=Math.max(.8,Math.min(1.5,(o.wealth||1e3)/1e3)),y=1+(o.epoch||0)*.2,w=g*v*y,k=w>0?b/w:1,M=Math.max(0,1-k),z=Math.max(0,k-1),C=1+Math.min(2.5,M*.9),T=1-Math.min(.95,z*.6),D=C*T,S=1+(Math.max(.6,Math.min(1.6,m))-1)*.25,W=o.isAtWar||o.foreignWars&&Object.values(o.foreignWars).some(G=>G?.isAtWar)?1.1+(o.aggression||.2)*.3:1;let be=c*S*D*W;return be=Math.max(c*.25,Math.min(c*3.5,be)),Math.max(.5,parseFloat(be.toFixed(2)))},g1=(s="")=>s?s.split("").reduce((o,d)=>o+d.charCodeAt(0),0):0,dl=(s,o={},d=0)=>{const m=Math.max(.8,Math.min(1.5,(o.wealth||1e3)/1e3)),g=1+(o.epoch||0)*.2,v=500*m*g,x=typeof o.marketVolatility=="number"?o.marketVolatility:.3,y=o?.inventory?.[s]||0,w=g1(s),k=Math.sin(d*.05+w),M=v*(1+k*x),z=M*.9,C=M*1.1,T=Math.max(0,z-y),D=Math.max(0,y-C);return{isShortage:T>0,isSurplus:D>0,shortageAmount:T,surplusAmount:D,target:M}},uo={DESTITUTE:{level:"",icon:"Skull",color:"text-gray-400",bgColor:"bg-gray-900/30",borderColor:"border-gray-500/30",approvalCap:30},POOR:{level:"",icon:"AlertTriangle",color:"text-red-400",bgColor:"bg-red-900/20",borderColor:"border-red-500/30",approvalCap:50},SUBSISTENCE:{level:"",icon:"UtensilsCrossed",color:"text-yellow-400",bgColor:"bg-yellow-900/20",borderColor:"border-yellow-500/30",approvalCap:70},COMFORTABLE:{level:"",icon:"Home",color:"text-green-400",bgColor:"bg-green-900/20",borderColor:"border-green-500/30",approvalCap:85},PROSPEROUS:{level:"",icon:"Gem",color:"text-blue-400",bgColor:"bg-blue-900/20",borderColor:"border-blue-500/30",approvalCap:95},LUXURIOUS:{level:"",icon:"Crown",color:"text-purple-400",bgColor:"bg-purple-900/20",borderColor:"border-purple-500/30",approvalCap:100}};function y1(s){let o;return s<=0?o=.3:s<1?o=.3+s*.7:o=Math.sqrt(s)*(1+Math.log(s)*.25),Math.max(.3,Math.min(6,o))}function b1(s,o=1,d=0){return s<.5?uo.DESTITUTE:s<1||o<.5?uo.POOR:s<2||d===0?uo.SUBSISTENCE:s<4||d<.3?uo.COMFORTABLE:s<8||d<.7?uo.PROSPEROUS:uo.LUXURIOUS}function v1(s,o,d){const c=Math.min(40,s*4),m=o*30,b=d*30;return Math.min(100,c+m+b)}function nh({count:s,wealthValue:o,startingWealth:d,shortagesCount:c=0,effectiveNeedsCount:m=0,unlockedLuxuryTiers:b=0,totalLuxuryTiers:g=0}){const v=s>0?o/s:0,x=d>0?v/d:0,y=y1(x),w=m>0?Math.max(0,(m-c)/m):1,k=g>0?b/g:0,M=b1(x,w,k),z=v1(x,w,k);return{wealthPerCapita:v,wealthRatio:x,wealthMultiplier:y,satisfactionRate:w,luxuryUnlockRatio:k,unlockedLuxuryTiers:b,totalLuxuryTiers:g,level:M.level,icon:M.icon,color:M.color,bgColor:M.bgColor,borderColor:M.borderColor,approvalCap:M.approvalCap,score:z}}function j1(s){return s<.5?{icon:"Skull",color:"text-gray-400",level:"",approvalCap:30}:s<1?{icon:"AlertTriangle",color:"text-red-400",level:"",approvalCap:50}:s<2?{icon:"UtensilsCrossed",color:"text-yellow-400",level:"",approvalCap:70}:s<4?{icon:"Home",color:"text-green-400",level:"",approvalCap:85}:s<8?{icon:"Gem",color:"text-blue-400",level:"",approvalCap:95}:{icon:"Crown",color:"text-purple-400",level:"",approvalCap:100}}const ms=["official","cleric","capitalist","landowner","knight","engineer","navigator","merchant","soldier","scribe","worker","artisan","miner","lumberjack","serf","peasant"],wf=.1,ks=(s,o,d)=>!Number.isFinite(s)||s<o?o:s>d?d:s,N1=new Set(["science","culture"]),Cs=s=>{if(s==="silver")return!1;const o=Oe[s];return o?N1.has(s)?!0:!o.type||o.type!=="virtual":!1},w1=30,_1=(s={})=>{const o={...s};return Object.keys(Fe).forEach(d=>{o[d]===void 0&&(o[d]=Fe[d]?.startingWealth||0)}),o},ll=s=>s==="silver"?1:Oe[s]?.basePrice||1,po=.5,jc=1,M1=(s={},o={},d={})=>{const c={};return Object.entries(Fe).forEach(([m,b])=>{let g=0,v=0;const x=b.needs||{};Object.entries(x).forEach(([k,M])=>{if(!M||M<=0)return;const z=s?.[k]??Oe[k]?.basePrice??ll(k);if(!Number.isFinite(z)||z<=0)return;const C=Math.max(0,d?.[k]||0);g+=M*z,v+=M*z*C});const y=Math.max(0,b.headTaxBase??0),w=Math.max(0,o?.[m]??1);v+=y*w,c[m]={needsCost:Number.isFinite(g)?g:0,taxCost:Number.isFinite(v)?v:0}}),c},Nc=(s={},o={})=>{const d=Number.isFinite(o.livingCostWeight)?o.livingCostWeight:1,c=Number.isFinite(o.taxCostWeight)?o.taxCostWeight:1,m={};return Object.entries(s).forEach(([b,g])=>{const v=g?.needsCost||0,x=g?.taxCost||0;m[b]=Math.max(0,v*d+x*c)}),m},k1=yo.reduce((s,o)=>(s[o.id]=o,s),{}),$d=(s={},o=1)=>{if(!s||typeof s!="object")return{};const d={};return Object.entries(s).forEach(([c,m])=>{typeof m=="number"?d[c]=m*o:m&&typeof m=="object"&&!Array.isArray(m)?d[c]=$d(m,o):d[c]=m}),d},C1=({res:s,wealth:o,popStructure:d,supply:c,demand:m,nations:b,tick:g,taxPolicies:v,taxBreakdown:x,getLocalPrice:y,roleExpense:w,roleWagePayout:k,pendingTrades:M=[],lastTradeTime:z=0,gameSpeed:C=1,logs:T})=>{const D=d?.merchant||0;if(D<=0)return{pendingTrades:M,lastTradeTime:z};const E=v?.resourceTaxRates||{},S=_=>E[_]||0,q=Array.isArray(b)?b.filter(_=>_&&(_.inventory||_.economyTraits)):[],W={},be=_=>{if(W[_]!==void 0)return W[_];if(q.length===0)return W[_]=null,null;let B=0,re=0;q.forEach(me=>{const h=ul(_,me,g);Number.isFinite(h)&&h>0&&(B+=h,re+=1)});const F=re>0?B/re:null;return W[_]=F,F},G=Fe.merchant?.tradeConfig||{minProfitMargin:.1,maxPurchaseAmount:20,exportProbability:.5,maxInventoryRatio:.3,minWealthForTrade:10,tradeDuration:3,tradeCooldown:0,enableDebugLog:!1},P=[];M.forEach(_=>{_.daysRemaining-=1,_.daysRemaining<=0?(k.merchant=(k.merchant||0)+_.revenue,_.type==="import"&&(s[_.resource]=(s[_.resource]||0)+_.amount,c[_.resource]=(c[_.resource]||0)+_.amount),G.enableDebugLog&&console.log("[]  :",{type:_.type==="export"?"":"",resource:_.resource,amount:_.amount,revenue:_.revenue,profit:_.profit})):P.push(_)}),G.enableDebugLog&&console.log("[]  :",{tick:g,lastTradeTime:z,pendingTradesCount:M.length,updatedPendingTradesCount:P.length,merchantCount:d.merchant||0});const pe=g-z;if(!(pe>=G.tradeCooldown))return G.enableDebugLog&&console.log(`[]   ${(G.tradeCooldown-pe).toFixed(1)} `),{pendingTrades:P,lastTradeTime:z};const ne=Object.keys(Oe).filter(_=>Cs(_)),ae=[],se=[];ne.forEach(_=>{const B=y(_),re=be(_),F=s[_]||0;if(re===null||B===null)return;const me=re-B,h=Math.abs(me)/B,A=re>B&&h>=G.minProfitMargin&&F>0,Y=re<B&&h>=G.minProfitMargin;A&&ae.push(_),Y&&se.push(_)});const je=D>100?100:D,de=D>100?D/100:1,I=Math.min(je,50);for(let _=0;_<I;_++){const B=o.merchant||0;if(B<=G.minWealthForTrade)break;const re=Math.random(),F=B/(je-_);if(re<G.exportProbability&&ae.length>0){const me=ae[Math.floor(Math.random()*ae.length)],h=y(me),A=be(me);if(A===null||h===null||A<=h)continue;const Y=S(me),R=h*(1+Y),Q=R>0?F/R:3,Ne=(s[me]||0)/de*G.maxInventoryRatio,ke=Math.min(G.maxPurchaseAmount,Q,Ne);if(ke<=.1)continue;const Je=h*ke,tt=Je*Y,bt=A*ke;let ft=Je,vt=0;if(tt<0){const pt=Math.abs(tt);(s.silver||0)>=pt*de?(ft-=pt,vt=-pt):T.push(` ${Oe[me]?.name||me} `)}else ft+=tt,vt=tt;const we=bt-ft,Ze=ft>0?we/ft:we>0?1/0:-1/0;if(Ze>=G.minProfitMargin){const pt=ke*de,xt=ft*de,jt=vt*de;if((o.merchant||0)>=xt&&(s[me]||0)>=pt){if(G.enableDebugLog&&me==="cloth"&&console.log("[]  :",{amount:pt,cost:xt,expectedRevenue:bt*de,expectedProfit:we*de,profitMargin:(Ze*100).toFixed(2)+"%",daysUntilSale:G.tradeDuration}),o.merchant-=xt,w.merchant=(w.merchant||0)+xt,jt<0){const le=Math.abs(jt);s.silver-=le,x.subsidy+=le}else x.industryTax+=jt;s[me]=Math.max(0,(s[me]||0)-pt),c[me]=Math.max(0,(c[me]||0)-pt),P.push({type:"export",resource:me,amount:pt,revenue:bt*de,profit:we*de,daysRemaining:3}),z=g}}}else if(se.length>0){const me=se[Math.floor(Math.random()*se.length)],h=y(me),A=be(me);if(A===null||h===null||A>=h)continue;const Y=S(me),R=A,Q=R>0?F/R:3,ye=Math.min(G.maxPurchaseAmount,Q);if(ye<=.1)continue;const Ne=A*ye,ke=h*ye,Je=ke*Y;let tt=ke,bt=0;if(Je<0){const we=Math.abs(Je);(s.silver||0)>=we*de?(tt+=we,bt=-we):T.push(` ${Oe[me]?.name||me} `)}else tt-=Je,bt=Je;const ft=tt-Ne,vt=Ne>0?ft/Ne:ft>0?1/0:-1/0;if(vt>=G.minProfitMargin){const we=ye*de,Ze=Ne*de,pt=tt*de,xt=bt*de;if((o.merchant||0)>=Ze){if(G.enableDebugLog&&me==="cloth"&&console.log("[]  :",{amount:we,cost:Ze,expectedNetRevenue:pt,expectedProfit:pt-Ze,profitMargin:(vt*100).toFixed(2)+"%",daysUntilSale:G.tradeDuration}),o.merchant-=Ze,w.merchant=(w.merchant||0)+Ze,xt<0){const jt=Math.abs(xt);s.silver-=jt,x.subsidy+=jt}else x.industryTax+=xt;P.push({type:"import",resource:me,amount:we,revenue:pt,profit:pt-Ze,daysRemaining:3}),z=g}}}}return G.enableDebugLog&&console.log("[]  :",{pendingTradesCount:P.length,lastTradeTime:z,pendingTrades:P.map(_=>({type:_.type,resource:_.resource,amount:_.amount,daysRemaining:_.daysRemaining}))}),{pendingTrades:P,lastTradeTime:z}},E1=({resources:s,buildings:o,population:d,popStructure:c={},birthAccumulator:m=0,decrees:b,gameSpeed:g,epoch:v,market:x,classWealth:y,classApproval:w={},activeBuffs:k=[],activeDebuffs:M=[],taxPolicies:z,army:C={},militaryWageRatio:T=1,militaryQueue:D=[],nations:E=[],tick:S=0,techsUnlocked:q=[],activeFestivalEffects:W=[],classWealthHistory:be,classNeedsHistory:G,merchantState:P={pendingTrades:[],lastTradeTime:0},maxPopBonus:pe=0,eventApprovalModifiers:Pe={},eventStabilityModifier:ne=0,currentStability:ae=50,eventResourceDemandModifiers:se={},eventStratumDemandModifiers:je={},eventBuildingProductionModifiers:de={}})=>{console.log("[TICK START]",S);const I={...s},_={...x?.prices||{}},B=z||{},re=B.headTaxRates||{},F=B.resourceTaxRates||{},me=B.businessTaxRates||{},h=M1(_,re,F);Nc(h,_r?.price||{});const A=Nc(h,_r?.wage||{}),Y=x?.wages||{},R=u=>{const f=A?.[u];return!Number.isFinite(f)||f<=0?jc*.8:Math.max(jc*.8,f*1.1)},Q=u=>{const f=Y?.[u];if(Number.isFinite(f)&&f>0)return Math.max(po,f);const U=Fe[u]?.startingWealth;return Number.isFinite(U)&&U>0?Math.max(jc*.5,U/40,R(u)):Math.max(Ce,R(u))},ye={},Ne={},ke=_1(y),Je=u=>{const f=re[u];return typeof f=="number"?f:1},tt=u=>{const f=F[u];return typeof f=="number"?f:0},bt=u=>{const f=me[u];return typeof f=="number"?f:0},ft={headTax:0,industryTax:0,businessTax:0,subsidy:0,policyIncome:0,policyExpense:0},vt={},we={gather:1,industry:1,civic:1,military:1},Ze={};let pt=0,xt=0,jt=0,le=0,Ie=0,K=0,Be=0,ze=0;const $e={},yt={},_t={},It=(u,f)=>{if(!u||typeof f!="number")return;const U=1+f;!Number.isFinite(U)||U<=0||(vt[u]=(vt[u]||1)*U)},oa=(u,f)=>{if(!u||typeof f!="number")return;const U=1+f;!Number.isFinite(U)||U<=0||(we[u]=(we[u]||1)*U)},za=(u,f)=>{!u||typeof f!="number"||(Ze[u]=(Ze[u]||0)+f)},Ta=(u={})=>{if(u){if(u.buildings&&Object.entries(u.buildings).forEach(([f,U])=>It(f,U)),u.categories&&Object.entries(u.categories).forEach(([f,U])=>oa(f,U)),u.passive&&Object.entries(u.passive).forEach(([f,U])=>za(f,U)),u.maxPop){const f=u.maxPop;f>-1&&f<1&&f!==0?le+=f:jt+=f}u.production&&(Ie+=u.production),u.industry&&(K+=u.industry),u.taxIncome&&(Be+=u.taxIncome),u.needsReduction&&(ze+=u.needsReduction),u.resourceDemandMod&&Object.entries(u.resourceDemandMod).forEach(([f,U])=>{typeof U=="number"&&($e[f]=($e[f]||0)+U)}),u.stratumDemandMod&&Object.entries(u.stratumDemandMod).forEach(([f,U])=>{typeof U=="number"&&(yt[f]=(yt[f]||0)+U)}),u.resourceSupplyMod&&Object.entries(u.resourceSupplyMod).forEach(([f,U])=>{typeof U=="number"&&(_t[f]=(_t[f]||0)+U)})}};q.forEach(u=>{const f=k1[u];!f||!f.effects||Ta(f.effects)}),b.forEach(u=>{if(!u||!u.active||!u.modifiers)return;const f=u.modifiers?.passive?.silver||0;f>0?pt+=f:f<0&&(xt+=Math.abs(f)),Ta(u.modifiers)}),W.forEach(u=>{!u||!u.effects||Ta(u.effects)});const en=u=>(_[u]||(_[u]=ll(u)),_[u]=Math.max(po,_[u]),_[u]),$n=(u,f,U)=>{if(!(f<=0)&&(I[u]=(I[u]||0)+f,Cs(u))){Ne[u]=(Ne[u]||0)+f;const He=en(u)*f,rt=tt(u),Qe=He*rt;let lt=He;if(!(Qe>0)){if(Qe<0){const kt=Math.abs(Qe);(I.silver||0)>=kt?(I.silver-=kt,lt=He+kt,ft.subsidy+=kt):S%30===0&&Ht.push(`  ${Oe[u]?.name||u} `)}}ge[U]=(ge[U]||0)+lt}},At={},Z=o,ee=new Set,te={},$={},ge={},H={},he={};let oe=5,Ae=0;oe+=jt,oe+=pe,d1(C);const Le=Hd(C),We=Object.values(C).reduce((u,f)=>u+f,0);ms.forEach(u=>te[u]=0),ms.forEach(u=>{$[u]={totalSlots:0,weightedWage:0},ge[u]=0});const Te={};Object.keys(Fe).forEach(u=>{Te[u]=0}),Object.keys(Fe).forEach(u=>{}),Object.keys(Fe).forEach(u=>{});const Ue=()=>{Object.entries(ge).forEach(([u,f])=>{if(f<=0){H[u]=f;return}const U=H[u]||0,fe=f-U;fe>0&&(ke[u]=(ke[u]||0)+fe),H[u]=f})};console.log("[TICK] Processing buildings..."),Tn.forEach(u=>{const f=Z[u.id]||0;if(f>0){if(u.output?.maxPop&&(oe+=u.output.maxPop*f),u.output?.militaryCapacity&&(Ae+=u.output.militaryCapacity*f),u.jobs)for(let U in u.jobs)te[U]+=u.jobs[U]*f;u.output&&Object.entries(u.output).forEach(([U,fe])=>{Oe[U]&&(fe||0)>0&&ee.add(U)})}}),console.log("[TICK] Buildings processed. militaryCapacity:",Ae);const Ke=new Set;if(Tn.forEach(u=>{const f=(u.epoch??0)<=v,U=!u.requiresTech||q.includes(u.requiresTech);f&&U&&u.output&&Object.entries(u.output).forEach(([fe,He])=>{Oe[fe]&&(He||0)>0&&Ke.add(fe)})}),le!==0){const u=Math.max(0,1+le);oe=Math.max(0,oe*u)}oe=Math.floor(oe);const Nt=(D||[]).filter(u=>u.status==="waiting").length,Mt=(D||[]).filter(u=>u.status==="training").length,ga=We+Nt+Mt;console.log("[TICK] Adding soldier jobs. currentArmy:",We,"waiting:",Nt,"training:",Mt,"total:",ga),ga>0&&(te.soldier=(te.soldier||0)+ga),console.log("[TICK] Soldier jobs added. jobsAvailable.soldier:",te.soldier),console.log("[TICK] Starting population allocation...");const la=c&&Object.keys(c).length>0,et={};let ie=0;if(la){ms.forEach(f=>{const U=c[f]||0;et[f]=Math.max(0,U)}),et.unemployed=Math.max(0,c.unemployed||0);const u=ms.reduce((f,U)=>f+(et[U]||0),0)+(et.unemployed||0);if(ie=d-u,ie>0)et.unemployed=(et.unemployed||0)+ie;else if(ie<0){let f=-ie;const U=Math.min(et.unemployed||0,f);if(U>0&&(et.unemployed-=U,f-=U),f>0){const fe=ms.reduce((He,rt)=>He+(et[rt]||0),0);if(fe>0){const He=f;ms.forEach((rt,Qe)=>{if(f<=0)return;const lt=et[rt]||0;if(lt<=0)return;const kt=lt/fe;let $t=Math.floor(kt*He);$t<=0&&f>0&&($t=1),Qe===ms.length-1?$t=Math.min(lt,f):$t=Math.min(lt,Math.min($t,f)),!($t<=0)&&(et[rt]=lt-$t,f-=$t)}),f>0&&ms.forEach(rt=>{if(f<=0)return;const Qe=et[rt]||0;if(Qe<=0)return;const lt=Math.min(Qe,f);et[rt]=Qe-lt,f-=lt})}}}}else{let u=d;ms.forEach(f=>{const U=Math.max(0,te[f]||0),fe=Math.min(u,U);et[f]=fe,u-=fe}),et.unemployed=Math.max(0,u),ms.forEach(f=>{et[f]=0}),et.unemployed=d}et.unemployed=Math.max(0,et.unemployed||0);let ct=0,Ve=0;Object.keys(et).forEach(u=>{const f=et[u]||0,U=Y[u]||0;f>0&&U>0&&(ct+=U*f,Ve+=f)});const Ce=Ve>0?ct/Ve:jc;ms.forEach(u=>{const f=et[u]||0,U=Math.max(0,te[u]||0);if(f>U){const fe=f-U,He=ke[u]||0,rt=f>0?He/f:0;if(et[u]=U,et.unemployed=(et.unemployed||0)+fe,rt>0){const Qe=rt*fe;ke[u]=Math.max(0,He-Qe),ke.unemployed=(ke.unemployed||0)+Qe}}});const qe=Math.max(0,1),_e=u=>{const f=Q(u),fe=(Fe[u]?.headTaxBase??.01)*Je(u)*qe;return f-Math.max(0,fe)};console.log("[vacancy debug] diff =",ie,", unemployed =",et.unemployed||0);const Dt=ms.map((u,f)=>{const U=Math.max(0,te[u]||0),fe=et[u]||0,He=Math.max(0,U-fe);return u==="soldier"&&console.log("[SOLDIER VACANCY] slots:",U,"current:",fe,"vacancy:",He),He<=0?null:{role:u,vacancy:He,netIncome:_e(u),priorityIndex:f}}).filter(Boolean).sort((u,f)=>f.netIncome!==u.netIncome?f.netIncome-u.netIncome:u.priorityIndex-f.priorityIndex);console.log("[VACANCY RANKING]",Dt.map(u=>`${u.role}:${u.vacancy}`).join(", ")),Dt.forEach(u=>{const f=et.unemployed||0;if(f<=0)return;const U=Math.min(u.vacancy,f);if(U<=0)return;const fe=ke.unemployed||0,He=f>0?fe/f:0;if(et[u.role]=(et[u.role]||0)+U,et.unemployed=Math.max(0,f-U),u.role==="soldier"&&console.log("[SOLDIER HIRING] hired:",U,"new soldier count:",et[u.role]),He>0){const rt=He*U;ke.unemployed=Math.max(0,fe-rt),ke[u.role]=(ke[u.role]||0)+rt}});const Rt={},mt={},Kt={},Ht=[],ca={};Object.entries(Ze).forEach(([u,f])=>{if(!f)return;const U=f,fe=I[u]||0;if(U>=0)I[u]=fe+U,At[u]=(At[u]||0)+U;else{const He=Math.abs(U),rt=Math.min(fe,He);rt>0&&(I[u]=fe-rt,At[u]=(At[u]||0)-rt)}});const ra={},dn=1-Math.max(-2,Math.min(.95,ze||0));Object.keys(Fe).forEach(u=>{const f=et[u]||0;if(f===0)return;const U=Fe[u];ke[u]===void 0&&(ke[u]=U.startingWealth||0);const fe=Je(u),He=Fe[u]?.headTaxBase??.01,rt=f*He*fe*qe;if(rt!==0){const Qe=ke[u]||0;if(rt>0){const lt=Math.min(Qe,rt);ke[u]=Qe-lt,ft.headTax+=lt,Te[u]=(Te[u]||0)+lt}else{const lt=-rt,kt=I.silver||0;kt>=lt&&(I.silver=kt-lt,ke[u]=Qe+lt,ft.subsidy+=lt,ge[u]=(ge[u]||0)+lt)}}Rt[u]=w[u]??50,(Rt[u]||0)<=0&&(ra[u]=!0)});const Nn=b.some(u=>u.id==="forced_labor"&&u.active);console.log("[TICK] Starting production loop..."),Tn.forEach(u=>{const f=Z[u.id]||0;if(f===0)return;const U=u.owner||"state";ke[U]===void 0&&(ke[U]=Fe[U]?.startingWealth||0);let fe=1;const He=Qa[v];He&&He.bonuses&&(u.cat==="gather"&&He.bonuses.gatherBonus&&(fe*=1+He.bonuses.gatherBonus),u.cat==="industry"&&He.bonuses.industryBonus&&(fe*=1+He.bonuses.industryBonus));let rt=1,Qe=1;k.forEach(Ee=>{Ee.production&&(rt+=Ee.production),Ee.industryBonus&&(Qe+=Ee.industryBonus)}),M.forEach(Ee=>{Ee.production&&(rt+=Ee.production),Ee.industryBonus&&(Qe+=Ee.industryBonus)}),rt*=1+Ie,Qe*=1+K,(u.cat==="gather"||u.cat==="civic")&&(fe*=rt),u.cat==="industry"&&(fe*=Qe),q.includes("wheel")&&u.cat==="gather"&&(fe*=1.2),q.includes("pottery")&&u.id==="farm"&&(fe*=1.1),q.includes("basic_irrigation")&&u.id==="farm"&&(fe*=1.15);const lt=we[u.cat];lt&&lt!==1&&(fe*=lt);const kt=de[u.id]||0,$t=de[u.cat]||0,dt=de.all||0,Ot=kt+$t+dt;Ot!==0&&(fe*=1+Ot);const Ct=vt[u.id];Ct&&Ct!==1&&(fe*=Ct);let St=1,Da=0,Ia=0;const Oa={};let tn=0;const pn=[];if(u.jobs){ca[u.id]=ca[u.id]||{};for(let Ee in u.jobs){const Ut=u.jobs[Ee]*f;$[Ee]||($[Ee]={totalSlots:0,weightedWage:0}),Da+=Ut;const Jt=te[Ee],ba=et[Ee],ua=Jt>0?Math.min(1,ba/Jt):0,Xa=Ut*ua;Ia+=Xa,ca[u.id][Ee]=Xa;const Xt=Math.max(0,Ut-Xa);if(Xt>.001){const Vt=Xt>=1?Math.floor(Xt):1;(he[Ee]||(he[Ee]=[])).push({buildingId:u.id,buildingName:u.name||u.id,availableSlots:Vt})}if(Ee!==U&&Xa>0){const Vt=Oa[Ee]??Q(Ee),Wt=R(Ee),pa=Math.max(Vt,Wt);Oa[Ee]=pa,tn+=Xa*pa,pn.push({role:Ee,roleSlots:Ut,filled:Xa,baseWage:pa})}}if(Da>0&&(St=Ia/Da),Da>0&&Ia<=0)return}fe*=St,Nn&&(u.jobs?.serf||u.jobs?.miner)&&(fe*=1.2);const Gt=fe;let ya=1,qt=0,Pt=!1;if(u.input)for(const[Ee,Ut]of Object.entries(u.input)){if(!fs(Ee,v,q))continue;const Jt=Ut*f,ba=Jt*Gt;if(ba<=0)continue;const ua=I[Ee]||0;if(ua<=0?ya=0:ya=Math.min(ya,ua/ba),Cs(Ee)){const Xa=en(Ee),Xt=tt(Ee);qt+=Jt*Xa*(1+Xt)}}let ut=Gt*Math.max(0,Math.min(1,ya));if(u.cat==="gather"&&ya===0&&u.input){ut=Gt*.2,Pt=!0,qt=0;const Ee=Object.keys(u.input).map(Ut=>Oe[Ut]?.name||Ut).join("");S%30===0&&Ht.push(` ${u.name}  ${Ee}20%`)}let Yt=0,aa=!1;if(u.output)for(const[Ee,Ut]of Object.entries(u.output)){if(Ee==="maxPop"||!Cs(Ee))continue;aa=!0;const ba=Ut*f*en(Ee),ua=tt(Ee),Xa=ba*(1-ua);Yt+=Xa}const La=Gt>0?tn/Gt:tn,Ua=Yt*ut,mn=qt*ut,nn=La*ut,es=Math.max(0,Ua-mn),Ma=nn>0?es/nn:1,fn=Number.isFinite(Ma)?Ma>=1?Math.min(1.4,1+(Ma-1)*.35):Math.max(.65,1-(1-Ma)*.5):1,xs=La*fn,Si=xs*ut,Fn=bt(u.id),Ai=Fn*f*ut,Qs=qt+xs;let Ya=ut;if(aa){const Ee=mn+Si+Math.max(0,Ai);if(Ee>0&&Ua<=0)Ya=0;else if(Ee>0&&Ua<Ee*.98){const Ut=Math.max(0,Math.min(1,Ua/Ee));Ya=ut*Ut}}if(Qs>0){const Ut=(ke[U]||0)/Qs;Ya=Math.min(Ya,Math.max(0,Ut))}(!Number.isFinite(Ya)||Ya<0)&&(Ya=0);const Mn=.3;let Pn=1;ra[U]&&(Pn=Math.min(Pn,Mn)),u.jobs&&Object.keys(u.jobs).forEach(Ee=>{ra[Ee]&&(Pn=Math.min(Pn,Mn))}),Ya*=Pn;const lr=Gt>0?Math.min(1,Ya/Gt):0;let ci=0;if(u.input&&!Pt)for(const[Ee,Ut]of Object.entries(u.input)){if(!fs(Ee,v,q))continue;const Jt=Ut*f*Ya;if(!Jt||Jt<=0)continue;const ba=I[Ee]||0,ua=Math.min(Jt,ba);if(Cs(Ee)){const Xa=en(Ee),Xt=tt(Ee),Vt=ua*Xa,Wt=Vt*Xt;let pa=Vt;if(Wt<0){const Wa=Math.abs(Wt);(I.silver||0)>=Wa?(I.silver-=Wa,ft.subsidy+=Wa,pa-=Wa):S%20===0&&Ht.push(` ${u.name}  ${Oe[Ee]?.name||Ee} `)}else Wt>0&&(ft.industryTax+=Wt,pa+=Wt);ke[U]=Math.max(0,(ke[U]||0)-pa),Te[U]=(Te[U]||0)+pa,ye[Ee]=(ye[Ee]||0)+ua}ua<=0||(I[Ee]=ba-ua,At[Ee]=(At[Ee]||0)-ua)}u.jobs&&Object.entries(u.jobs).forEach(([Ee,Ut])=>{const Jt=Ut*f;Jt<=0||($[Ee]||($[Ee]={totalSlots:0,weightedWage:0}),$[Ee].totalSlots+=Jt)});const ko=pn.map(Ee=>{const Ut=Ee.baseWage*lr*fn,Jt=Ut*Ee.filled;return ci+=Jt,{...Ee,expectedSlotWage:Ut}});let cr=0;if(ci>0){const Ee=ke[U]||0,Ut=Math.min(Ee,ci);ke[U]=Ee-Ut,Te[U]=(Te[U]||0)+Ut,cr=Ut/ci}if(ko.forEach(Ee=>{const Ut=Ee.expectedSlotWage*cr;if($[Ee.role].weightedWage+=Ut*Ee.roleSlots,Ee.filled>0&&Ut>0){const Jt=Ut*Ee.filled;ge[Ee.role]=(ge[Ee.role]||0)+Jt}}),u.output)for(const[Ee,Ut]of Object.entries(u.output)){let Jt=Ut*f*Ya;if(!(!Jt||Jt<=0)){if(Cs(Ee)&&Ee!=="silver"){const ua=Oe[Ee]?.marketConfig||{},Xa=_r?.market||{},Xt=ua.outputVariation!==void 0?ua.outputVariation:Xa.outputVariation||.2,Vt=1+(Math.random()*2-1)*Xt;Jt*=Vt;const Wt=_t[Ee]||0;Wt!==0&&(Jt*=1+Wt)}if(Ee==="maxPop"){I[Ee]=(I[Ee]||0)+Jt;continue}Cs(Ee)?($n(Ee,Jt,U),At[Ee]=(At[Ee]||0)+Jt):I[Ee]=(I[Ee]||0)+Jt}}if(Fn!==0&&f>0){const Ee=Fn*f*Ya;if(Ee>0){const Ut=ke[U]||0;Ut>=Ee?(ke[U]=Ut-Ee,ft.businessTax+=Ee):S%30===0&&Ut<Ee*.5&&Ht.push(` ${Fe[U]?.name||U}  ${u.name} `)}else if(Ee<0){const Ut=Math.abs(Ee),Jt=I.silver||0;Jt>=Ut?(I.silver=Jt-Ut,ke[U]=(ke[U]||0)+Ut,ge[U]=(ge[U]||0)+Ut,ft.subsidy+=Ut):S%30===0&&Ht.push(`  ${u.name} `)}}if(u.id==="market"){const Ee=u.owner||"merchant",Ut=(et[Ee]||0)>0,Jt=S%5===0;if(Ut&&Jt){let ua=ke[Ee]||0;if(!(ua<=0)){const Xa=[];if(Object.entries(I).forEach(([Xt,Vt])=>{if(!Cs(Xt)||Xt==="silver"||(Vt||0)<=300||(At[Xt]||0)<0)return;const Wt=en(Xt);Xa.push({resource:Xt,stock:Vt,localPrice:Wt})}),Xa.length>0){const Xt=[];if(Object.keys(Oe).forEach(Vt=>{if(!Cs(Vt)||Vt==="silver")return;const Wt=I[Vt]||0,pa=At[Vt]||0,Wa=Math.max(0,(ye[Vt]||0)-(Ne[Vt]||0)),Pa=Math.max(0,200-Wt),Ha=pa<0?Math.abs(pa):0,hn=Math.max(Wa,Pa,Ha);if(hn<=0)return;const In=Math.max(po,en(Vt)*1.15),Rn=hn*In;Rn<=0||Xt.push({resource:Vt,shortageAmount:hn,importPrice:In,requiredValue:Rn})}),Xt.length>0){Xt.sort((Wt,pa)=>pa.requiredValue-Wt.requiredValue);const Vt=10;Xt.forEach(Wt=>{if(ua<=0)return;let pa=Wt.shortageAmount,Wa=Wt.requiredValue;for(const Pa of Xa){if(ua<=0||pa<=0||Wa<=0)break;const Ha=Pa.resource,hn=Pa.localPrice;if(hn<=0)continue;const In=I[Ha]||0;if(In<=0)continue;const Rn=Wa/hn,kn=In*.05,Cn=ua/hn,xn=Math.min(Rn,kn,Cn);if(!Number.isFinite(xn)||xn<=0)continue;const Ds=xn*hn;if(ua-=Ds,ke[Ee]=ua,Te[Ee]=(Te[Ee]||0)+Ds,I[Ha]=Math.max(0,In-xn),Ne[Ha]=(Ne[Ha]||0)+xn,At[Ha]=(At[Ha]||0)-xn,Pa.stock=Math.max(0,Pa.stock-xn),Wa=Math.max(0,Wa-Ds),Wt.importPrice<=0)continue;let sn=Ds/Wt.importPrice;if(!Number.isFinite(sn)||sn<=0||(sn=Math.min(sn,pa),sn<=0))continue;const gs=sn*Wt.importPrice;ke[Ee]+=gs,ua+=gs,I[Wt.resource]=(I[Wt.resource]||0)+sn,Ne[Wt.resource]=(Ne[Wt.resource]||0)+sn,At[Wt.resource]=(At[Wt.resource]||0)+sn,pa=Math.max(0,pa-sn);const di=gs-Ds;di>0&&(H[Ee]=(H[Ee]||0)+di,ge[Ee]=(ge[Ee]||0)+di),gs>Vt&&(Oe[Ha]?.name,Oe[Wt.resource]?.name||Wt.resource)}})}}}}}u.jobs&&Object.entries(u.jobs).forEach(([Ee,Ut])=>{const Jt=Ut*f;Jt<=0||($[Ee].totalSlots+=Jt,Ee!==U&&($[Ee].weightedWage+=0*Jt,ca[u.id]?.[Ee]))})});const qn=Math.max(0,T??0),An=en("food"),wa=Le*An*qn;if(wa>0){const u=wa,f=I.silver||0;f>=u?(I.silver=f-u,At.silver=(At.silver||0)-u,ge.soldier=(ge.soldier||0)+u):u>0&&Ht.push("")}console.log("[TICK] Production loop completed."),Ue(),console.log("[TICK] Starting needs calculation...");const Jn={},Sa={},Vn={};Object.keys(Fe).forEach(u=>{const f=Fe[u],U=et[u]||0;if(U===0||!f.needs){Jn[u]={satisfactionRatio:1,totalTrackedNeeds:0},Sa[u]=[];return}let fe=0,He=0;const rt=[],Qe=f.startingWealth||1,kt=(ke[u]||0)/Math.max(1,U)/Qe,$t={...f.needs};if(f.luxuryNeeds){const dt=Object.keys(f.luxuryNeeds).map(Number).sort((Ot,Ct)=>Ot-Ct);for(const Ot of dt)if(kt>=Ot){const Ct=f.luxuryNeeds[Ot];for(const[St,Da]of Object.entries(Ct))$t[St]=($t[St]||0)+Da}}for(const[dt,Ot]of Object.entries($t)){if(f.defaultResource&&f.defaultResource===dt)continue;const Ct=Oe[dt];if(Ct&&Ct.unlockTech){if(!q.includes(Ct.unlockTech))continue}else if(Ct&&typeof Ct.unlockEpoch=="number"&&Ct.unlockEpoch>v)continue;if(!Ke.has(dt))continue;let St=Ot*U*dn;if(St<=0)continue;const Da=se[dt]||0,Ia=$e[dt]||0,Oa=Da+Ia;Oa!==0&&(St*=1+Oa);const tn=je[u]||0,pn=yt[u]||0,Gt=tn+pn;if(Gt!==0&&(St*=1+Gt),Cs(dt)){const Pt=Ct?.marketConfig||{},ut=_r?.market||{},Yt=Pt.demandElasticity!==void 0?Pt.demandElasticity:ut.demandElasticity||.5,aa=f.startingWealth||1,Ua=(ke[u]||0)/Math.max(1,U)/aa;let mn;Ua<=0?mn=.3:Ua<1?mn=.3+Ua*.7:mn=Math.sqrt(Ua)*(1+Math.log(Ua)*.25);const nn=Math.max(.3,Math.min(6,mn));(!Vn[u]||Math.abs(nn-1)>Math.abs(Vn[u]-1))&&(Vn[u]=nn);const es=en(dt),Ma=Ct.basePrice||1,fn=es/Ma,xs=Math.pow(fn,-Yt),Si=.8+Math.random()*.4;St*=nn*xs*Si,St=Math.max(0,St),St=Math.min(St,Ot*U*dn*12)}const ya=I[dt]||0;let qt=0;if(Cs(dt)){const Pt=en(dt),ut=Pt*(1+tt(dt)),Yt=ut>0?Math.min(St,(ke[u]||0)/ut):St,aa=Math.min(St,ya,Yt);if(aa>0){I[dt]=ya-aa,At[dt]=(At[dt]||0)-aa;const Ua=tt(dt),mn=aa*Pt,nn=mn*Ua;let es=mn;if(nn<0){const Ma=Math.abs(nn);(I.silver||0)>=Ma?(I.silver-=Ma,ft.subsidy+=Ma,es-=Ma):S%20===0&&Ht.push(` ${Fe[u]?.name||u}  ${Oe[dt]?.name||dt} `)}else nn>0&&(ft.industryTax+=nn,es+=nn);ke[u]=Math.max(0,(ke[u]||0)-es),Te[u]=(Te[u]||0)+es,qt=aa,ye[dt]=(ye[dt]||0)+aa}const La=St>0?qt/St:1;if(fe+=La,He+=1,La<.99){const Ua=Yt>=St*.99,mn=ya>=St*.99;let nn="both";Ua&&!mn?nn="outOfStock":!Ua&&mn&&(nn="unaffordable"),rt.push({resource:dt,reason:nn})}}else{const Pt=Math.min(St,ya);Pt>0&&(I[dt]=ya-Pt,qt=Pt);const ut=St>0?qt/St:1;fe+=ut,He+=1,ut<.99&&rt.push({resource:dt,reason:"outOfStock"})}}Jn[u]={satisfactionRatio:He>0?fe/He:1,totalTrackedNeeds:He},Sa[u]=rt});let un=0,Hs=0,On=0;Object.keys(Fe).forEach(u=>{const f=et[u]||0;if(f<=0)return;Hs+=f;const U=Jn[u]?.satisfactionRatio??1;un+=U*f;const fe=Fe[u];fe&&fe.needs&&(Sa[u]||[]).some(Qe=>Qe.resource==="food"||Qe.resource==="cloth")&&(On+=f)});let ri=.3+.7*(Hs>0?un/Hs:1);if(On>0&&Hs>0){const u=On/Hs,f=u*.4;ri=Math.max(.1,ri-f),u>.1&&Ht.push("/")}ri<.999&&Object.entries(At).forEach(([u,f])=>{const U=Oe[u];if(!(!U||u==="silver"||U.type&&U.type==="virtual")&&f>0){const fe=f*(1-ri);At[u]=f-fe,I[u]=Math.max(0,(I[u]||0)-fe)}});let Gn={};b.forEach(u=>{if(u.active&&(u.modifiers&&u.modifiers.approval&&Object.entries(u.modifiers.approval).forEach(([f,U])=>{Gn[f]=(Gn[f]||0)+U}),u.id==="forced_labor"&&et.serf>0&&(Rt.serf=Math.max(0,(Rt.serf||50)-5)),u.id==="tithe")){et.cleric>0&&(Rt.cleric=Math.max(0,(Rt.cleric||50)-2));const f=(et.cleric||0)*2*qe;if(f>0){const U=ke.cleric||0,fe=Math.min(U,f);ke.cleric=Math.max(0,U-fe),ft.headTax+=fe,Te.cleric=(Te.cleric||0)+fe}}});const ss={};Object.keys(Fe).forEach(u=>{const f=et[u]||0;if(f===0){ss[u]=null;return}const U=Fe[u],fe=ke[u]||0,He=U.startingWealth||10,rt=(Sa[u]||[]).length,Qe=U.luxuryNeeds||{},lt=Object.keys(Qe).map(Number).sort((Ct,St)=>Ct-St),kt=He>0?fe/Math.max(f,1)/He:0,$t=U.needs?Object.keys(U.needs).filter(Ct=>fs(Ct,v,q)).length:0;let dt=0,Ot=$t;for(const Ct of lt)if(kt>=Ct){dt++;const St=Qe[Ct],Ia=Object.keys(St).filter(Oa=>fs(Oa,v,q)).filter(Oa=>!U.needs?.[Oa]);Ot+=Ia.length}ss[u]=nh({count:f,wealthValue:fe,startingWealth:He,shortagesCount:rt,effectiveNeedsCount:Ot,unlockedLuxuryTiers:dt,totalLuxuryTiers:lt.length})}),Object.keys(Fe).forEach(u=>{const f=et[u]||0;if(f===0)return;const U=Jn[u],fe=U?.satisfactionRatio??1,rt=ss[u]?.approvalCap??100;let Qe=70;const lt=Je(u),kt=Fe[u]?.headTaxBase??.01,$t=Math.max(0,kt*lt*qe),dt=(ge[u]||0)/Math.max(1,f);dt>.001&&$t>dt*.5?Qe=Math.min(Qe,40):lt<.6&&(Qe+=5);const Ot=U?.totalTrackedNeeds??0,Ct=(Sa[u]||[]).length;Ct>0&&Ot>0&&(Ct>=Ot?Qe=Math.min(Qe,0):Qe=Math.min(Qe,30));const St=(G||{})[u];if(St&&St.length>0){let Pt=0;for(let ut=St.length-1;ut>=0&&Pt<20&&St[ut]>=.95;ut--)Pt+=1;if(Pt>=3){const ut=Math.min(15,Pt*.6);Qe=Math.min(100,Qe+ut)}}const Da=(be||{})[u];if(Da&&Da.length>=20){const ya=Da.slice(-10).reduce((Pt,ut)=>Pt+ut,0)/10,qt=Da.slice(-20,-10).reduce((Pt,ut)=>Pt+ut,0)/10;if(qt>1){const Pt=(ya-qt)/qt,ut=Math.min(15,Math.abs(Pt)*50);Pt>.05?Qe+=ut:Pt<-.05&&(Qe-=ut)}}if(fe>1.5&&(Qe=Math.min(100,Qe+10)),u==="unemployed"){const qt=2+f/Math.max(1,d)*30;Qe-=qt}const Ia=Pe?.[u]||0;Ia&&(Qe+=Ia);const Oa=Gn[u]||0;Oa&&(Qe+=Oa);const tn=Rt[u]||50;let Gt=tn+(Qe-tn)*.02;Gt=Math.min(Gt,rt),Rt[u]=Math.max(0,Math.min(100,Gt))}),(et.unemployed||0)===0&&w.unemployed!==void 0&&(Rt.unemployed=Math.min(100,w.unemployed+5));let $a=d,Ga=0;Object.keys(Fe).forEach(u=>{Kt[u]=Math.max(0,ke[u]||0)});let is=Object.values(Kt).reduce((u,f)=>u+f,0);Object.keys(Fe).forEach(u=>{const f=et[u]||0;if(f===0)return;const U=Fe[u],fe=Kt[u]||0,He=is>0?fe/is:0;mt[u]=U.influenceBase*f+He*10});let Kn=Object.values(mt).reduce((u,f)=>u+f,0),qs=0,Es=0;Object.keys(Fe).forEach(u=>{const f=et[u]||0;if(f===0)return;const U=Rt[u]||50;if(U>=25)return;const fe=Kn>0?(mt[u]||0)/Kn:0,He=Fe[u]?.name||u;if(U<20&&fe<.07){const rt=Math.max(.03,(20-U)/200),Qe=Math.min(f,Math.max(1,Math.floor(f*rt)));if(Qe>0){const $t=ke[u]||0,Ot=(f>0?$t/f:0)*Qe;Ot>0&&(ke[u]=Math.max(0,$t-Ot))}qs+=Qe;const lt=(Sa[u]||[]).map($t=>{const dt=typeof $t=="string"?$t:$t.resource,Ot=typeof $t=="string"?"outOfStock":$t.reason,Ct=Oe[dt]?.name||dt;return Ot==="unaffordable"?`${Ct}()`:Ot==="outOfStock"?`${Ct}()`:Ot==="both"?`${Ct}()`:Ct}).join(""),kt=lt?`${lt}`:"";Ht.push(`${He} ${Qe}  ${(Qe*(ke[u]||0)/Math.max(1,f)).toFixed(1)} ${kt}`)}else if(fe>=.12){const rt=Math.min(.2,.05+fe*.15);Es+=rt;const Qe=(Sa[u]||[]).map(kt=>{const $t=typeof kt=="string"?kt:kt.resource,dt=typeof kt=="string"?"outOfStock":kt.reason,Ot=Oe[$t]?.name||$t;return dt==="unaffordable"?`${Ot}()`:dt==="outOfStock"?`${Ot}()`:dt==="both"?`${Ot}()`:Ot}).join(""),lt=Qe?`${Qe}`:"";Ht.push(`${He} ${lt}`)}});const rs=[],Ts=[];Object.keys(Fe).forEach(u=>{const f=Fe[u];if(!f.buffs||(et[u]||0)===0)return;const U=Rt[u]||50,fe=(Jn[u]?.satisfactionRatio??1)>=.9,He=Kn>0?(mt[u]||0)/Kn:0,rt=He>.8?2:He>.5?1.5:1,Qe=U>=85&&He>=.3,lt=U>=85&&fe;if((Qe||lt)&&f.buffs.satisfied){const kt=$d(f.buffs.satisfied,rt);rs.push({class:u,...kt})}else if(U<40&&f.buffs.dissatisfied&&He>=.3){const kt=$d(f.buffs.dissatisfied,rt);Ts.push({class:u,...kt})}});let Ba=0,Ss=0;Object.keys(Fe).forEach(u=>{if((et[u]||0)===0)return;const U=Rt[u]||50,fe=mt[u]||0,He=Kn>0?fe/Kn:0;Ba+=U*He,Ss+=He});let Xs=Ss>0?Ba:50;ne&&(Xs+=ne);let os=0;rs.forEach(u=>{u.stability&&(os+=u.stability)}),Ts.forEach(u=>{u.stability&&(os+=u.stability)}),os-=Es;const De=Math.max(0,Math.min(100,Xs+os)),ot=Math.max(0,Math.min(100,ae+(De-ae)*.05)),at=Math.min(1.5,Math.max(.5,1+(ot-50)/100)),Xe=v;let Tt=0;const it=Math.max(5,d||5),wt=Math.max(100,I.silver??s?.silver??0);let da=(E||[]).map(u=>{const f={...u};if(!(Xe>=(u.appearEpoch??0)&&(u.expireEpoch==null||Xe<=u.expireEpoch)))return f.isAtWar&&(f.isAtWar=!1,f.warDuration=0,f.warScore=0,f.warStartDay=void 0,Ht.push(`  ${f.name} `)),f;f.foreignPower={...f.foreignPower||{}};const fe=f.foreignPower,He=f.wealthTemplate||f.wealth||800;fe.baseRating==null&&(fe.baseRating=Math.max(.4,He/800));const rt=Math.min(.9,Math.max(.1,fe.volatility??f.marketVolatility??.3));if(fe.volatility=rt,fe.appearEpoch==null&&(fe.appearEpoch=f.appearEpoch??0),fe.populationFactor==null){const Xt=f.culturalTraits?.agriculturalFocus?1.15:1;fe.populationFactor=ks(fe.baseRating*Xt,.6,2.5)}if(fe.wealthFactor==null){const Xt=1+Math.max(0,fe.appearEpoch)*.05;fe.wealthFactor=ks(fe.baseRating*Xt,.5,3.5)}if(!fe.initializedAtTick){const Vt=1+Math.max(0,Xe-(fe.appearEpoch??0))*.08,Wt=.9+Math.random()*.25,pa=ks(fe.populationFactor*Vt*Wt,.6,2.5),Wa=ks(fe.wealthFactor*Vt*Wt,.5,3.5),Pa=Math.max(3,Math.round(it*pa)),Ha=Math.max(100,Math.round(wt*Wa));f.population=Pa,f.wealth=Ha,f.budget=Math.max(50,Ha*.5),f.economyTraits={...f.economyTraits||{},basePopulation:Pa,baseWealth:Ha},fe.populationFactor=pa,fe.wealthFactor=Wa,fe.initializedAtTick=S,fe.playerSnapshot={population:it,wealth:wt},f.wealthTemplate||(f.wealthTemplate=Ha)}f.inventory?f.inventory={...f.inventory}:f.inventory={},typeof f.budget!="number"&&(f.budget=(f.wealth||800)*.5);const Qe=f.economyTraits?.resourceBias||{},lt=Object.keys(Oe).filter(Cs);if(lt.length>0){const Vt=f.isAtWar||f.foreignWars&&Object.values(f.foreignWars).some(Wt=>Wt?.isAtWar)?1.3+(f.aggression||.2)*.5:1;lt.forEach(Wt=>{const pa=Qe[Wt]??1,Wa=f.inventory[Wt]||0,Pa=500,Ha=3*g,hn=3*g*Vt,In=Ha*pa,Rn=hn/Math.max(pa,.25),kn=Wa/Pa;let Cn=1,xn=1;kn>1.5?(Cn*=.5,xn*=1.15):kn>1.1?(Cn*=.8,xn*=1.05):kn<.5?(Cn*=1.5,xn*=.85):kn<.9&&(Cn*=1.2,xn*=.95);const Ds=(Pa-Wa)*.01*g,sn=(Math.random()-.5)*Pa*.3*g,gs=In*Cn,di=Rn*xn,ts=gs-di+Ds+sn,ys=Pa*.2,gn=Pa*3,Js=Wa+ts;f.inventory[Wt]=Math.max(ys,Math.min(gn,Js))})}const kt=(f.wealth||800)*.5,$t=.02,dt=kt-f.budget;if(f.budget=f.budget+dt*$t*g,f.budget=Math.max(0,f.budget),f.isAtWar){if(f.warDuration=(f.warDuration||0)+1,Xe>=1){const Wt=Math.max(0,-(f.warScore||0)),pa=Math.min(.18,.02+(f.aggression||.2)*.04+Wt/400);if(Math.random()<pa){const Wa=Math.max(f.appearEpoch||0,Math.min(v,f.expireEpoch??v)),Pa=f.militaryStrength??1,Ha=Math.max(.3,Math.min(1.5,(f.wealth||500)/800)),hn=1+(f.aggression||.2),In=1+Math.max(-.5,(f.warScore||0)/120),Rn=.05+(f.aggression||.2)*.05+Wt/1200,kn=Pa*Ha*hn*In,Cn={},xn=Qf(Wa,"light"),Ds=2+Math.random()*4,sn=Math.floor(Ds*kn);xn.forEach(ts=>{if(Sn[ts]){const ys=.5+Math.random()*.8,gn=Math.floor(sn/xn.length*ys);gn>0&&(Cn[ts]=gn)}});const gs={...C};if(Object.values(gs).reduce((ts,ys)=>ts+ys,0)===0){const ts=Math.floor((I.food||0)*Rn),ys=Math.floor((I.silver||0)*(Rn/2));ts>0&&(I.food=Math.max(0,(I.food||0)-ts)),ys>0&&(I.silver=Math.max(0,(I.silver||0)-ys));const gn=Math.min(3,Math.max(1,Math.floor(Rn*20)));Ga+=gn;const Js={nationName:f.name,victory:!1,attackerArmy:Cn,defenderArmy:{},attackerLosses:{},defenderLosses:{},foodLoss:ts,silverLoss:ys,popLoss:gn,ourPower:0,enemyPower:0},Ks=`RAID_EVENT${JSON.stringify(Js)}`;console.log("[SIMULATION] Pushing raid log (no army):",Ks),Ht.push(Ks),f.warScore=(f.warScore||0)-8}else{const ts={army:Cn,epoch:Wa,militaryBuffs:.1},ys={army:gs,epoch:v,militaryBuffs:0,wealth:(I.food||0)+(I.silver||0)+(I.wood||0)},gn=eh(ts,ys);let Js=0,Ks=0,$r=0;gn.victory&&(Js=Math.floor((I.food||0)*Rn),Ks=Math.floor((I.silver||0)*(Rn/2)),Js>0&&(I.food=Math.max(0,(I.food||0)-Js)),Ks>0&&(I.silver=Math.max(0,(I.silver||0)-Ks)),$r=Math.min(3,Math.max(1,Math.floor(Rn*20))),Ga+=$r),Object.entries(gn.defenderLosses||{}).forEach(([Ps,dr])=>{C[Ps]&&(C[Ps]=Math.max(0,C[Ps]-dr))});const Or=Object.values(gn.attackerLosses||{}).reduce((Ps,dr)=>Ps+(dr||0),0);Or>0&&(f.enemyLosses=(f.enemyLosses||0)+Or);const bs=gn.victory?-8:6;f.warScore=(f.warScore||0)+bs;const Br={nationName:f.name,victory:!gn.victory,attackerArmy:Cn,defenderArmy:gs,attackerLosses:gn.attackerLosses||{},defenderLosses:gn.defenderLosses||{},foodLoss:Js,silverLoss:Ks,popLoss:$r,ourPower:gn.defenderPower,enemyPower:gn.attackerPower,battleReport:gn.battleReport||[]},as=`RAID_EVENT${JSON.stringify(Br)}`;console.log("[SIMULATION] Pushing raid log (with army):",as),Ht.push(as)}}}const Xt=Number.isFinite(f.lastPeaceRequestDay)?f.lastPeaceRequestDay:-1/0,Vt=S-Xt>=w1;if((f.warScore||0)>12&&Vt){const Wt=Math.min(.5,.03+(f.warScore||0)/120+(f.warDuration||0)/400)+Math.min(.15,(f.enemyLosses||0)/500);if(Math.random()<Wt){const pa=f.warScore||0,Wa=f.enemyLosses||0,Pa=f.warDuration||0,Ha=Math.ceil(pa*35+Wa*2.2+Pa*4),hn=200,In=8e3+Math.floor(Pa*8),Rn=Math.max(0,f.wealth||0),kn=Math.min(Math.min(In,Rn),Math.max(hn,Ha));Ht.push(` ${f.name}  ${kn} `),f.isPeaceRequesting=!0,f.peaceTribute=kn,f.lastPeaceRequestDay=S}}}else f.warDuration&&(f.warDuration=0);const Ot=f.relation??50,Ct=f.aggression??.2,St=Math.max(0,(50-Ot)/70),Da=ot<35?.02:0,Ia=Ct>.5?Ct*.06:0,Oa=Xe>=1?Math.min(.15,Ct*.08+St*.05+Da+Ia):0,tn=f.peaceTreatyUntil&&S<f.peaceTreatyUntil,pn=Ot>=80;if(!f.isAtWar&&!tn&&!pn&&Ot<35&&Math.random()<Oa&&(f.isAtWar=!0,f.warStartDay=S,f.warDuration=0,f.warDeclarationPending=!0,Ht.push(` ${f.name} `),Ht.push(`WAR_DECLARATION_EVENT:${JSON.stringify({nationId:f.id,nationName:f.name})}`),da.filter(Vt=>Vt.id===f.id?!1:(Vt.relation||0)>=80&&!Vt.isAtWar).forEach(Vt=>{Vt.foreignWars||(Vt.foreignWars={}),Vt.foreignWars[f.id]={isAtWar:!0,warStartDay:S,warScore:0},f.foreignWars||(f.foreignWars={}),f.foreignWars[Vt.id]={isAtWar:!0,warStartDay:S,warScore:0},Ht.push(`  ${Vt.name}  ${f.name} `)})),f.installmentPayment&&f.installmentPayment.remainingDays>0){const Xt=f.installmentPayment.amount;I.silver=(I.silver||0)+Xt,Tt+=Xt,f.installmentPayment.paidAmount+=Xt,f.installmentPayment.remainingDays-=1,f.installmentPayment.remainingDays===0&&(Ht.push(` ${f.name} ${f.installmentPayment.totalAmount}`),delete f.installmentPayment)}if(!f.isAtWar){const Xt=f.militaryStrength??1;Xt<1&&(f.militaryStrength=Math.min(1,Xt+.005))}const Gt=f.foreignPower||{},ya=ks(Gt.volatility??f.marketVolatility??.3,.1,.9),qt=ks(Gt.populationFactor??Gt.baseRating??1,.6,2.5),Pt=ks(Gt.wealthFactor??(Gt.baseRating?Gt.baseRating*1.1:1.1),.5,3.5),ut=1+Math.max(0,v-(Gt.appearEpoch??0))*.03;if(!f.economyTraits?.ownBasePopulation){const Vt=(f.wealthTemplate||800)/800;f.economyTraits={...f.economyTraits||{},ownBasePopulation:Math.max(5,Math.round(8*Vt*(.8+Math.random()*.4))),ownBaseWealth:Math.max(200,Math.round(500*Vt*(.8+Math.random()*.4))),developmentRate:.8+(f.aggression||.3)*.3+Math.random()*.4,lastGrowthTick:S}}const Yt=f.economyTraits.ownBasePopulation,aa=f.economyTraits.ownBaseWealth,La=f.economyTraits.developmentRate||1;if(S-(f.economyTraits.lastGrowthTick||0)>=100){const Xt=.3*La;Math.random()<Xt&&!f.isAtWar&&(f.economyTraits.ownBasePopulation=Math.round(Yt*(1.02+Math.random()*.03)),f.economyTraits.ownBaseWealth=Math.round(aa*(1.02+Math.random()*.05))),f.economyTraits.lastGrowthTick=S}const mn=1+Math.max(0,v)*.15,nn=f.economyTraits.ownBasePopulation*mn*qt,es=f.economyTraits.ownBaseWealth*mn*Pt,Ma=.3,fn=it*qt*ut,xs=wt*Pt*ut,Si=nn*(1-Ma)+fn*Ma,Fn=es*(1-Ma)+xs*Ma,Ai=Math.max(1,(f.wealthTemplate||800)/Math.max(800,wt)*.8),Qs=Math.max(1,(f.wealthTemplate||800)/Math.max(800,wt)*1.1),Ya=Math.max(3,Si*Ai),Mn=Math.max(100,Fn*Qs);f.economyTraits={...f.economyTraits||{},basePopulation:Ya,baseWealth:Mn};const Pn=f.population??Ya,lr=ks(1+ya*.6+ut*.08,1,1.8),ci=(f.isAtWar?.032:.12)*lr,ko=(Math.random()-.5)*ya*Ya*.04;let cr=Pn+(Ya-Pn)*ci+ko;f.isAtWar&&(cr-=Pn*.012),f.population=Math.max(3,Math.round(cr));const Ee=f.wealth??Mn,Ut=(f.isAtWar?.03:.11)*lr,Jt=(Math.random()-.5)*ya*Mn*.05;let ba=Ee+(Mn-Ee)*Ut+Jt;f.isAtWar&&(ba-=Ee*.015),f.wealth=Math.max(100,Math.round(ba));const ua=f.wealth*.45,Xa=Number.isFinite(f.budget)?f.budget:ua;return f.budget=Math.max(0,Xa+(ua-Xa)*.35),f});da=da.map(u=>(u.foreignRelations||(u.foreignRelations={}),da.forEach(f=>{if(f.id!==u.id){if(u.foreignRelations[f.id]===void 0){const U=((u.aggression||.3)+(f.aggression||.3))/2;u.foreignRelations[f.id]=Math.floor(50-U*30+(Math.random()-.5)*20)}if(Math.random()<.05){const U=(Math.random()-.5)*6;u.foreignRelations[f.id]=ks((u.foreignRelations[f.id]||50)+U,0,100)}}}),u));const zt=da.filter(u=>v>=(u.appearEpoch??0)&&(u.expireEpoch==null||v<=u.expireEpoch));zt.forEach(u=>{if(Math.random()>.02)return;const f=u.aggression??.3,U=u.wealth||500;if(f>.6||U<300)return;const fe=zt.filter(Qe=>{if(Qe.id===u.id||u.foreignWars?.[Qe.id]?.isAtWar)return!1;const lt=u.foreignRelations?.[Qe.id]??50;return lt>=40&&lt<80});if(fe.length===0)return;const He=fe[Math.floor(Math.random()*fe.length)];u.foreignRelations?.[He.id];const rt=Math.floor(50+Math.random()*100);if(U>rt*3){u.wealth=Math.max(0,(u.wealth||0)-rt),He.wealth=(He.wealth||0)+rt;const Qe=Math.floor(5+Math.random()*8);u.foreignRelations||(u.foreignRelations={}),He.foreignRelations||(He.foreignRelations={}),u.foreignRelations[He.id]=ks((u.foreignRelations[He.id]||50)+Qe,0,100),He.foreignRelations[u.id]=ks((He.foreignRelations[u.id]||50)+Qe,0,100),u.foreignRelations[He.id]>=80&&He.foreignRelations[u.id]>=80?Ht.push(` ${u.name}  ${He.name} `):Math.random()<.3&&Ht.push(` ${u.name}  ${He.name} `)}}),zt.forEach(u=>{u.foreignWars||(u.foreignWars={}),zt.forEach(f=>{if(f.id===u.id||u.foreignWars[f.id]?.isAtWar)return;const U=u.foreignWars[f.id]?.peaceTreatyUntil||0;if(S<U)return;const fe=u.foreignRelations?.[f.id]??50,He=f.foreignRelations?.[u.id]??50;if(fe>=80||He>=80)return;const rt=Object.values(u.foreignWars||{}).filter(Gt=>Gt?.isAtWar).length,Qe=u.aggression>.7?2:1;if(rt>=Qe)return;const lt=u.population||100,kt=u.wealth||500;if(lt<30||kt<300)return;const Ot=(u.militaryStrength??1)*lt*(1+(u.aggression||.3)),Ct=(f.militaryStrength??1)*(f.population||100)*(1+(f.aggression||.3)),St=Ot/Math.max(1,Ct),Da=u.aggression>.7?.5:.7;if(St<Da)return;const Oa=Object.values(f.foreignWars||{}).filter(Gt=>Gt?.isAtWar).length>0?.002:0,tn=u.foreignRelations?.[f.id]??50,pn=u.aggression??.3;if(tn<30&&pn>.4){let Gt=pn*.002+(30-tn)/3e3;if(St>1.5?Gt*=1.5:St>1.2&&(Gt*=1.2),Gt+=Oa,Gt=Math.min(.003,Gt),Math.random()<Gt){u.foreignWars[f.id]={isAtWar:!0,warStartDay:S,warScore:0},f.foreignWars||(f.foreignWars={}),f.foreignWars[u.id]={isAtWar:!0,warStartDay:S,warScore:0};const ya=[` ${u.name}  ${f.name} `,` ${u.name}  ${f.name} `,` ${u.name}  ${f.name} `,` ${u.name}  ${f.name} `,` ${u.name}  ${f.name} `,` ${u.name}  ${f.name} `,` ${u.name}  ${f.name} `],qt=ya[Math.floor(Math.random()*ya.length)];Ht.push(qt),(f.relation||0)>=80&&!u.isAtWar&&(u.isAtWar=!0,u.warStartDay=S,u.warDuration=0,u.relation=Math.max(0,(u.relation||50)-40),Ht.push(`  ${f.name}  ${u.name} `)),(u.relation||0)>=80&&!f.isAtWar&&(f.isAtWar=!0,f.warStartDay=S,f.warDuration=0,f.relation=Math.max(0,(f.relation||50)-40),Ht.push(`  ${u.name}  ${f.name}  ${f.name} `)),zt.forEach(Yt=>{if(Yt.id===u.id||Yt.id===f.id)return;const aa=Yt.foreignRelations?.[f.id]??50,La=f.foreignRelations?.[Yt.id]??50;aa>=80&&La>=80&&(Yt.foreignWars||(Yt.foreignWars={}),Yt.foreignWars[u.id]={isAtWar:!0,warStartDay:S,warScore:0},u.foreignWars||(u.foreignWars={}),u.foreignWars[Yt.id]={isAtWar:!0,warStartDay:S,warScore:0},Ht.push(` ${Yt.name}  ${f.name}  ${u.name} `))})}}}),Object.keys(u.foreignWars||{}).forEach(f=>{const U=u.foreignWars[f];if(!U?.isAtWar)return;const fe=da.find(Ct=>Ct.id===f);if(!fe)return;const He=S-(U.warStartDay||S),rt=Math.min(2,1+He/500),Qe=.995-rt*.003,lt=.998-rt*.002,kt=Object.values(u.foreignWars||{}).filter(Ct=>Ct?.isAtWar).length,$t=Object.values(fe.foreignWars||{}).filter(Ct=>Ct?.isAtWar).length,dt=Math.pow(.998,kt-1),Ot=Math.pow(.998,$t-1);if(u.wealth=Math.max(100,(u.wealth||500)*Qe*dt),u.population=Math.max(10,(u.population||100)*lt*dt),fe.wealth=Math.max(100,(fe.wealth||500)*Qe*Ot),fe.population=Math.max(10,(fe.population||100)*lt*Ot),(S-U.warStartDay)%10===0&&S>U.warStartDay){const Ct=(u.militaryStrength??1)*(u.population||100)*(1+(u.aggression||.3)),St=(fe.militaryStrength??1)*(fe.population||100)*(1+(fe.aggression||.3)),Da=Ct+St,Ia=Ct/Da,Oa=.02+Math.random()*.03;if(u.population=Math.max(10,(u.population||100)*(1-Oa*(1-Ia))),fe.population=Math.max(10,(fe.population||100)*(1-Oa*Ia)),Math.random()<Ia){U.warScore=(U.warScore||0)+5,fe.foreignWars[u.id].warScore=(fe.foreignWars[u.id].warScore||0)-5;const qt=Math.floor((fe.wealth||500)*.08);u.wealth=(u.wealth||500)+qt,fe.wealth=Math.max(100,(fe.wealth||500)-qt)}else{U.warScore=(U.warScore||0)-5,fe.foreignWars[u.id].warScore=(fe.foreignWars[u.id].warScore||0)+5;const qt=Math.floor((u.wealth||500)*.08);fe.wealth=(fe.wealth||500)+qt,u.wealth=Math.max(100,(u.wealth||500)-qt)}const tn=Math.abs(U.warScore||0),pn=(u.population||100)<30||(u.wealth||500)<200,Gt=(fe.population||100)<30||(fe.wealth||500)<200,ya=pn||Gt?.15:.05;if(tn>25||Math.random()<ya){const qt=(U.warScore||0)>0?u:fe,Pt=qt.id===u.id?fe:u,ut=Math.floor((Pt.population||100)*.1),Yt=Math.floor((Pt.wealth||500)*.15);qt.population=(qt.population||100)+ut,qt.wealth=(qt.wealth||500)+Yt,Pt.population=Math.max(10,(Pt.population||100)-ut),Pt.wealth=Math.max(100,(Pt.wealth||500)-Yt),u.foreignWars[f]={isAtWar:!1,peaceTreatyUntil:S+365},fe.foreignWars[u.id]={isAtWar:!1,peaceTreatyUntil:S+365},u.foreignRelations[f]=ks((u.foreignRelations[f]||50)-20,0,100),fe.foreignRelations[u.id]=ks((fe.foreignRelations[u.id]||50)-20,0,100);const aa=S-(U.warStartDay||S),La=[` ${qt.name}  ${Pt.name} ${aa}${Pt.name} `,` ${aa}${qt.name}  ${Pt.name}`,` ${qt.name}  ${Pt.name} ${aa}`,` ${aa}${qt.name}  ${Pt.name}`,` ${qt.name}  ${Pt.name} `,` ${aa}${qt.name} ${Pt.name} `,` ${qt.name}  ${Pt.name}${aa}`],Ua=La[Math.floor(Math.random()*La.length)];Ht.push(Ua)}}})});const Aa=.0015,an=5e-4,Zs=20,Vs=.4,As=200;let ha=0,_a=Math.max(0,m||0),Bn=Math.max(0,oe-$a);if(Bn>0){const u=Math.max(0,d||0)*an;if(_a+=u,d<Zs){const U=Math.max(0,(Zs-d)/Zs);_a+=Vs*U}const f=Math.min(Bn,Math.floor(_a));f>0&&(ha+=f,_a-=f,Bn-=f)}Bn>0&&Object.keys(Fe).forEach(u=>{if(Bn<=0)return;const f=et[u]||0;if(f<=0)return;const U=Rt[u]??50,fe=Math.max(0,(U-25)/75);if(fe<=0)return;const He=Kt[u]||0,rt=f>0?He/f:0,Qe=Math.max(.3,Math.min(2,rt/As)),lt=Aa*fe*Qe;if(lt<=0)return;let kt=f*lt;if(kt<=0)return;const $t=Math.floor(kt);let dt=$t;const Ot=kt-$t;Math.random()<Ot&&(dt+=1),!(dt<=0)&&(dt=Math.min(dt,Bn),!(dt<=0)&&(ha+=dt,Bn-=dt))}),ha>0&&(et.unemployed=(et.unemployed||0)+ha,$a=Math.min(oe,$a+ha)),(I.food||0)<=0&&(I.food=0,Math.random()>.9&&$a>2&&($a=$a-1,Ht.push("")));let Fa=0;Object.keys(Fe).forEach(u=>{const f=et[u]||0;if(f===0)return;const U=Fe[u];if(!U||!U.needs)return;const fe=Sa[u]||[],He=fe.some(lt=>(typeof lt=="string"?lt:lt.resource)==="food"),rt=fe.some(lt=>(typeof lt=="string"?lt:lt.resource)==="cloth"),Qe=(G||{})[u];if(Qe&&Qe.length>=5){const lt=Qe.slice(-5),kt=lt.reduce(($t,dt)=>$t+dt,0)/lt.length;if((He||rt)&&kt<.6){const $t=U.name||u,dt=Math.max(0,(.6-kt)/.6*.05),Ot=Math.max(1,Math.floor(f*dt));if(Ot>0){et[u]=Math.max(0,f-Ot),Fa+=Ot;const Ct=He&&rt?"":He?"":"";Ht.push(`${$t} ${Ct}${Ot} `)}}}});const st=Ga+qs+Fa;st>0&&($a=Math.max(0,$a-st)),$a=Math.max(0,Math.floor($a)),Object.keys(I).forEach(u=>{I[u]<0&&(I[u]=0)});const wn=ft.headTax*at,Ti=ft.industryTax*at,Gs=ft.businessTax*at,Ar=wn+Ti+Gs,sr=Ar+Tt;I.silver=(I.silver||0)+sr,At.silver=(At.silver||0)+sr,console.log("[TICK] Starting price and wage updates...");const jo={..._},oi={},Dr=.35;Object.entries($).forEach(([u,f])=>{let U=0;const fe=et[u]||0;if(fe>0){const Qe=ge[u]||0,lt=Te[u]||0;U=(Qe-lt)/fe}else f.weightedWage>0&&f.totalSlots>0?U=f.weightedWage/f.totalSlots:U=Y[u]||0;U=Math.max(0,U);const He=Y[u]||0,rt=He+(U-He)*Dr;oi[u]=parseFloat(rt.toFixed(2))});const ml=Math.max(0,$a??d??0),_n=_r?.market||{},li=Math.max(0,_n.supplyDemandWeight??1),Pr=Math.max(0,_n.virtualDemandPerPop||0),ir=Math.max(.1,_n.inventoryTargetDays??1.5),Rc=Math.max(0,_n.inventoryPriceImpact??.25);Object.keys(Oe).forEach(u=>{if(!Cs(u))return;const f=Oe[u],U=f?.marketConfig||{};U.supplyDemandWeight!==void 0&&Math.max(0,U.supplyDemandWeight);const fe=U.virtualDemandPerPop!==void 0?Math.max(0,U.virtualDemandPerPop):Pr,He=U.inventoryTargetDays!==void 0?Math.max(.1,U.inventoryTargetDays):ir;U.inventoryPriceImpact!==void 0&&Math.max(0,U.inventoryPriceImpact),Ne[u];const rt=ye[u]||0,Qe=fe*ml,kt=rt+Qe,$t=I[u]||0,dt=kt>0?$t/kt:He,Ot=[];let Ct=0;Tn.forEach(ut=>{const Yt=ut.output?.[u];if(!Yt||Yt<=0)return;const aa=Z[ut.id]||0;if(aa<=0)return;const La=ut.marketConfig||{},Ua=La.price||_r?.price||{},mn=La.wage||_r?.wage||{};Nc(h,Ua);const nn=Nc(h,mn);ut.input&&Object.entries(ut.input).forEach(([Mn,Pn])=>{!Pn||Pn<=0||(_[Mn]||ll(Mn),tt(Mn))});const es=ut.owner&&ut.jobs&&ut.jobs[ut.owner];ut.jobs&&!es&&Object.entries(ut.jobs).forEach(([Mn,Pn])=>{!Pn||Pn<=0||oi[Mn]||Q(Mn)}),z?.businessTaxRates?.[ut.id],ut.businessTaxBase,ut.owner&&(nn[ut.owner]||0)*(ut.jobs[ut.owner]||0);const Ma=dt/He;let fn=1;Ma<.5?fn=1+(1-Ma*2)*5:Ma<1?fn=1+(1-Ma)*1:Ma>2?(fn=1-(Ma-2)*.3,fn=Math.max(.1,fn)):Ma>1&&(fn=1-(Ma-1)*.3);let Fn=ll(u)*fn;const Ai=f.minPrice??po,Qs=f.maxPrice;Fn=Math.max(Fn,Ai),Qs!==void 0&&(Fn=Math.min(Fn,Qs));const Ya=Yt*aa;Ct+=Ya,Ot.push({price:Fn,output:Ya})});let St=0;if(Ct>0&&Ot.length>0){let ut=0;Ot.forEach(Yt=>{ut+=Yt.price*Yt.output}),St=ut/Ct}else{const ut=ll(u),Yt=dt/He;let aa=1;Yt<.5?aa=1+(1-Yt*2)*5:Yt<1?aa=1+(1-Yt)*1:Yt>2?(aa=1-(Yt-2)*.3,aa=Math.max(.1,aa)):Yt>1&&(aa=1-(Yt-1)*.3),St=ut*aa;const La=f.minPrice??po,Ua=f.maxPrice;St=Math.max(St,La),Ua!==void 0&&(St=Math.min(St,Ua))}const Da=_[u]||St,Ia=Da+(St-Da)*.1,Oa=da.filter(ut=>ut.isAtWar).length;let tn=0;da.forEach(ut=>{ut.foreignWars&&Object.values(ut.foreignWars).forEach(Yt=>{Yt?.isAtWar&&tn++})}),tn=Math.floor(tn/2);const pn=1+Oa*.05+tn*.01,Gt=Ia*pn,ya=f.minPrice??po,qt=f.maxPrice;let Pt=Gt;Pt=Math.max(Pt,ya),qt!==void 0&&(Pt=Math.min(Pt,qt)),jo[u]=parseFloat(Pt.toFixed(2))});const No=u=>{const f=(be||{})[u];if(!f||f.length<2)return null;const U=f[f.length-1],fe=f[f.length-2],He=Math.max(1,c?.[u]||0);return(U-fe)/He},wo=u=>{const f=he[u];return!f||f.length===0?!1:f.some(U=>U&&U.availableSlots>0)},rr=(u,f)=>{const U=he[u];if(!U||U.length===0||f<=0)return null;let fe=-1,He=0;for(let kt=0;kt<U.length;kt++){const $t=U[kt];if(!$t)continue;const dt=$t.availableSlots>=1?Math.floor($t.availableSlots):$t.availableSlots>0?1:0;dt>He&&(He=dt,fe=kt)}if(fe===-1||He<=0)return null;const rt=U[fe],Qe=Math.min(f,He),lt={buildingId:rt.buildingId,buildingName:rt.buildingName,count:Qe};return rt.availableSlots-=Qe,rt.availableSlots<=0&&U.splice(fe,1),lt},Rr=Kt.merchant||0,fl=C1({res:I,wealth:ke,popStructure:et,supply:Ne,demand:ye,nations:da,tick:S,taxPolicies:B,taxBreakdown:ft,getLocalPrice:en,roleExpense:Te,roleWagePayout:ge,pendingTrades:P.pendingTrades||[],lastTradeTime:P.lastTradeTime||0,gameSpeed:g,logs:Ht}),hl={};ms.forEach(u=>{hl[u]=Math.max(0,(te[u]||0)-(et[u]||0))});const or=ms.map(u=>{const f=et[u]||0,U=Kt[u]||0,fe=y?.[u]||0,He=U-fe,rt=f>0?U/f:0,Qe=f>0?He/f:0,lt=ge[u]||0,kt=Te[u]||0,dt=(lt-kt)/Math.max(1,f),Ot=oi[u]||Q(u),St=(Fe[u]?.headTaxBase??.01)*Je(u)*qe,Da=Ot-St,Ia=No(u),Oa=Ia!==null?Ia:Qe,pn=Oa!==0?Oa:dt!==0?dt:Da,Gt=rt>0?rt*.002:0,ya=pn+Gt;return{role:u,pop:f,perCap:rt,perCapDelta:Qe,potentialIncome:ya,vacancy:hl[u]||0}}),zr=or.reduce((u,f)=>f.pop>0?u+f.pop:u,0),_o=zr>0?or.reduce((u,f)=>u+f.potentialIncome*f.pop,0)/zr:0;zr>0&&or.reduce((u,f)=>u+f.perCap*f.pop,0)/zr;const Dn=or.filter(u=>{if(u.pop<=0||u.role==="soldier")return!1;const f=u.perCap*.05,U=-Math.max(.5,Math.min(50,f));return u.potentialIncome<_o*.7||u.perCapDelta<U}).reduce((u,f)=>!u||f.potentialIncome<u.potentialIncome||f.potentialIncome===u.potentialIncome&&f.perCapDelta<u.perCapDelta?f:u,null);let hs=null;if(Dn&&(hs=or.filter(u=>u.role!==Dn.role&&u.vacancy>0&&wo(u.role)&&u.potentialIncome>Dn.potentialIncome*1.3).reduce((u,f)=>!u||f.potentialIncome>u.potentialIncome?f:(f.potentialIncome===u.potentialIncome&&f.perCapDelta>u.perCapDelta,u),null)),Dn&&hs){let u=null,f=Math.floor(Dn.pop*wf);if(f<=0&&Dn.pop>0&&wf>0&&(f=1),f=Math.min(f,hs.vacancy),f>0){const U=rr(hs.role,f);!U||U.count<=0?f=0:(f=U.count,u=U)}if(f>0){const U=ke[Dn.role]||0,He=(Dn.pop>0?U/Dn.pop:0)*f;He>0&&(ke[Dn.role]=Math.max(0,U-He),ke[hs.role]=(ke[hs.role]||0)+He),et[Dn.role]=Math.max(0,Dn.pop-f),et[hs.role]=(et[hs.role]||0)+f,Fe[Dn.role]?.name||Dn.role,Fe[hs.role]?.name||hs.role,((hs.potentialIncome-Dn.potentialIncome)/Math.max(.01,Dn.potentialIncome)*100).toFixed(0),u?.buildingName&&`${u.buildingName}`}}Ue();const Mo=Math.max(0,ke.merchant||0),xl=Mo-Rr;if(xl!==0){Kt.merchant=Mo,is+=xl;const u=Fe.merchant;if(u){const f=et.merchant||0,U=u.influenceBase*f+(is>0?Mo/is*10:0),fe=U-(mt.merchant||0);mt.merchant=U,Kn+=fe}}ft.policyIncome=pt,ft.policyExpense=xt;const gl={total:Ar-ft.subsidy+Tt+pt-xt,efficiency:at,breakdown:{headTax:wn,industryTax:Ti,businessTax:Gs,subsidy:ft.subsidy,warIndemnity:Tt,policyIncome:pt,policyExpense:xt}};return console.log("[TICK END]",S,"militaryCapacity:",Ae),{resources:I,rates:At,popStructure:et,maxPop:oe,militaryCapacity:Ae,population:$a,birthAccumulator:_a,classApproval:Rt,classInfluence:mt,classWealth:Kt,classLivingStandard:ss,totalInfluence:Kn,totalWealth:is,activeBuffs:rs,activeDebuffs:Ts,stability:ot,logs:Ht,market:{prices:jo,demand:ye,supply:Ne,wages:oi,needsShortages:Sa},classIncome:ge,classExpense:Te,jobFill:ca,jobsAvailable:te,taxes:gl,needsShortages:Sa,needsReport:Jn,nations:da,merchantState:fl,modifiers:{resourceDemand:{...$e,...Object.fromEntries(Object.entries(se).map(([u,f])=>[u,($e[u]||0)+f]))},stratumDemand:{...yt,...Object.fromEntries(Object.entries(je).map(([u,f])=>[u,(yt[u]||0)+f]))},resourceSupply:_t,buildingProduction:{...vt,...de},categoryProduction:we,sources:{decreeResourceDemand:$e,decreeStratumDemand:yt,decreeResourceSupply:_t,eventResourceDemand:se,eventStratumDemand:je,eventBuildingProduction:de,techBuildingBonus:vt,techCategoryBonus:we,stratumWealthMultiplier:Vn}}}},T1={epoch0:[{id:"stone_harvest_blessing",name:"",description:"",icon:"Wheat",type:"temporary",duration:360,effects:{categories:{gather:.25}},flavorText:""},{id:"stone_fertility_rite",name:"",description:"",icon:"Users",type:"temporary",duration:360,effects:{maxPop:5},flavorText:""},{id:"stone_tool_innovation",name:"",description:"",icon:"Wrench",type:"permanent",effects:{production:.05},flavorText:""},{id:"stone_hunting_ritual",name:"",description:"",icon:"Target",type:"temporary",duration:360,effects:{categories:{gather:.2},stability:.1},flavorText:""},{id:"stone_fire_mastery",name:"",description:"",icon:"Flame",type:"permanent",effects:{industry:.06},flavorText:""},{id:"stone_tribal_unity",name:"",description:"",icon:"Heart",type:"temporary",duration:360,effects:{stability:.2},flavorText:""},{id:"stone_cave_painting",name:"",description:"",icon:"Image",type:"permanent",effects:{cultureBonus:.08},flavorText:""},{id:"stone_elder_wisdom",name:"",description:"",icon:"BookOpen",type:"temporary",duration:360,effects:{production:.15,stability:.15},flavorText:""},{id:"stone_spirit_dance",name:"",description:"",icon:"Music",type:"temporary",duration:360,effects:{maxPop:8,stability:.12},flavorText:""},{id:"stone_stone_working",name:"",description:"",icon:"Hammer",type:"permanent",effects:{categories:{gather:.1}},flavorText:""}],epoch1:[{id:"bronze_trade_fair",name:"",description:"",icon:"ShoppingCart",type:"temporary",duration:360,effects:{taxIncome:.3},flavorText:""},{id:"bronze_military_parade",name:"",description:"",icon:"Shield",type:"temporary",duration:360,effects:{militaryBonus:.15},flavorText:""},{id:"bronze_metallurgy_advance",name:"",description:"",icon:"Flame",type:"permanent",effects:{industry:.08},flavorText:""},{id:"bronze_irrigation_festival",name:"",description:"",icon:"Droplet",type:"temporary",duration:360,effects:{categories:{gather:.35}},flavorText:""},{id:"bronze_writing_system",name:"",description:"",icon:"FileText",type:"permanent",effects:{cultureBonus:.1,scienceBonus:.1},flavorText:""},{id:"bronze_warrior_training",name:"",description:"",icon:"Swords",type:"temporary",duration:360,effects:{militaryBonus:.25,stability:.15},flavorText:""},{id:"bronze_merchant_guild",name:"",description:"",icon:"Coins",type:"permanent",effects:{taxIncome:.12},flavorText:""},{id:"bronze_temple_blessing",name:"",description:"",icon:"Church",type:"temporary",duration:360,effects:{production:.18,stability:.2,cultureBonus:.15},flavorText:""},{id:"bronze_wheel_invention",name:"",description:"",icon:"Circle",type:"permanent",effects:{production:.08,taxIncome:.1},flavorText:""},{id:"bronze_bronze_age_prosperity",name:"",description:"",icon:"TrendingUp",type:"temporary",duration:360,effects:{industry:.25,maxPop:12,taxIncome:.2},flavorText:""}],epoch2:[{id:"classical_philosophy_debate",name:"",description:"",icon:"BookOpen",type:"temporary",duration:360,effects:{scienceBonus:.25,cultureBonus:.25},flavorText:""},{id:"classical_olympic_games",name:"",description:"",icon:"Award",type:"temporary",duration:360,effects:{stability:.15,maxPop:10},flavorText:""},{id:"classical_architecture_school",name:"",description:"",icon:"Building",type:"permanent",effects:{categories:{industry:.1}},flavorText:""},{id:"classical_library_foundation",name:"",description:"",icon:"Library",type:"permanent",effects:{scienceBonus:.12,cultureBonus:.12},flavorText:""},{id:"classical_senate_reform",name:"",description:"",icon:"Scale",type:"temporary",duration:360,effects:{stability:.25},flavorText:""},{id:"classical_aqueduct_celebration",name:"",description:"",icon:"Waves",type:"temporary",duration:360,effects:{maxPop:15,production:.2},flavorText:""},{id:"classical_legion_triumph",name:"",description:"",icon:"Trophy",type:"temporary",duration:360,effects:{militaryBonus:.3,taxIncome:.25,stability:.18},flavorText:""},{id:"classical_theater_arts",name:"",description:"",icon:"Drama",type:"permanent",effects:{cultureBonus:.15,stability:.08},flavorText:""},{id:"classical_trade_routes",name:"",description:"",icon:"Route",type:"permanent",effects:{taxIncome:.15,production:.08},flavorText:""},{id:"classical_golden_age",name:"",description:"",icon:"Sun",type:"temporary",duration:360,effects:{production:.25,scienceBonus:.3,cultureBonus:.3,stability:.2},flavorText:""}],epoch3:[{id:"feudal_knights_tournament",name:"",description:"",icon:"Sword",type:"temporary",duration:360,effects:{militaryBonus:.2,cultureBonus:.15},flavorText:""},{id:"feudal_harvest_festival",name:"",description:"",icon:"Leaf",type:"temporary",duration:360,effects:{categories:{gather:.3},taxIncome:.2},flavorText:""},{id:"feudal_guild_system",name:"",description:"",icon:"Users",type:"permanent",effects:{production:.05},flavorText:""},{id:"feudal_castle_construction",name:"",description:"",icon:"Castle",type:"temporary",duration:360,effects:{militaryBonus:.25,stability:.2},flavorText:""},{id:"feudal_monastery_learning",name:"",description:"",icon:"BookHeart",type:"permanent",effects:{scienceBonus:.1,cultureBonus:.12},flavorText:""},{id:"feudal_manor_system",name:"",description:"",icon:"Home",type:"temporary",duration:360,effects:{production:.22,taxIncome:.25,categories:{gather:.2}},flavorText:""},{id:"feudal_crusade_fervor",name:"",description:"",icon:"Cross",type:"temporary",duration:360,effects:{militaryBonus:.35,cultureBonus:.2,stability:.15},flavorText:""},{id:"feudal_market_charter",name:"",description:"",icon:"Store",type:"permanent",effects:{taxIncome:.18},flavorText:""},{id:"feudal_chivalry_code",name:"",description:"",icon:"Heart",type:"permanent",effects:{militaryBonus:.12,cultureBonus:.1,stability:.08},flavorText:""},{id:"feudal_feudal_prosperity",name:"",description:"",icon:"Crown",type:"temporary",duration:360,effects:{production:.2,maxPop:18,stability:.18},flavorText:""}],epoch4:[{id:"exploration_discovery_expo",name:"",description:"",icon:"Compass",type:"temporary",duration:360,effects:{scienceBonus:.3,taxIncome:.25},flavorText:""},{id:"exploration_naval_review",name:"",description:"",icon:"Anchor",type:"temporary",duration:360,effects:{militaryBonus:.25,stability:.2},flavorText:""},{id:"exploration_navigation_school",name:"",description:"",icon:"Map",type:"permanent",effects:{production:.1,scienceBonus:.08},flavorText:""},{id:"exploration_colonial_trade",name:"",description:"",icon:"Ship",type:"temporary",duration:360,effects:{taxIncome:.4,production:.15},flavorText:""},{id:"exploration_cartography",name:"",description:"",icon:"MapPin",type:"permanent",effects:{scienceBonus:.12,taxIncome:.15},flavorText:""},{id:"exploration_spice_trade",name:"",description:"",icon:"Coffee",type:"temporary",duration:360,effects:{taxIncome:.35,cultureBonus:.2,stability:.15},flavorText:""},{id:"exploration_printing_press",name:"",description:"",icon:"Printer",type:"permanent",effects:{cultureBonus:.15,scienceBonus:.15},flavorText:""},{id:"exploration_renaissance_art",name:"",description:"",icon:"Palette",type:"temporary",duration:360,effects:{cultureBonus:.4,stability:.25,scienceBonus:.2},flavorText:""},{id:"exploration_gunpowder_weapons",name:"",description:"",icon:"Zap",type:"permanent",effects:{militaryBonus:.18,industry:.1},flavorText:""},{id:"exploration_age_of_discovery",name:"",description:"",icon:"Globe",type:"temporary",duration:360,effects:{production:.25,scienceBonus:.3,taxIncome:.35,stability:.2},flavorText:""}],epoch5:[{id:"enlightenment_science_fair",name:"",description:"",icon:"Microscope",type:"temporary",duration:360,effects:{scienceBonus:.4},flavorText:""},{id:"enlightenment_salon_culture",name:"",description:"",icon:"Coffee",type:"temporary",duration:360,effects:{cultureBonus:.35},flavorText:""},{id:"enlightenment_education_reform",name:"",description:"",icon:"GraduationCap",type:"permanent",effects:{scienceBonus:.12,cultureBonus:.12},flavorText:""},{id:"enlightenment_constitution",name:"",description:"",icon:"FileText",type:"temporary",duration:360,effects:{stability:.35,cultureBonus:.2},flavorText:""},{id:"enlightenment_encyclopedia",name:"",description:"",icon:"Book",type:"permanent",effects:{scienceBonus:.18,cultureBonus:.15},flavorText:""},{id:"enlightenment_free_trade",name:"",description:"",icon:"TrendingUp",type:"temporary",duration:360,effects:{taxIncome:.4,production:.25,stability:.15},flavorText:""},{id:"enlightenment_scientific_method",name:"",description:"",icon:"Beaker",type:"permanent",effects:{scienceBonus:.2,production:.1},flavorText:""},{id:"enlightenment_industrial_dawn",name:"",description:"",icon:"Cog",type:"temporary",duration:360,effects:{industry:.35,production:.3,scienceBonus:.2},flavorText:""},{id:"enlightenment_human_rights",name:"",description:"",icon:"Users",type:"permanent",effects:{stability:.15,cultureBonus:.12},flavorText:""},{id:"enlightenment_age_of_reason",name:"",description:"",icon:"Brain",type:"temporary",duration:360,effects:{scienceBonus:.35,cultureBonus:.35,stability:.25},flavorText:""}],epoch6:[{id:"industrial_world_fair",name:"",description:"",icon:"Globe",type:"temporary",duration:360,effects:{production:.2,scienceBonus:.25,cultureBonus:.25,taxIncome:.3},flavorText:""},{id:"industrial_labor_movement",name:"",description:"",icon:"Briefcase",type:"temporary",duration:360,effects:{stability:.25,industry:.2},flavorText:""},{id:"industrial_assembly_line",name:"",description:"",icon:"Factory",type:"permanent",effects:{industry:.15,production:.12},flavorText:""},{id:"industrial_railway_network",name:"",description:"",icon:"Train",type:"temporary",duration:360,effects:{taxIncome:.35,production:.3},flavorText:""},{id:"industrial_steel_production",name:"",description:"",icon:"Hammer",type:"permanent",effects:{industry:.18,militaryBonus:.15,production:.1},flavorText:""},{id:"industrial_telegraph_system",name:"",description:"",icon:"Radio",type:"temporary",duration:360,effects:{taxIncome:.25,stability:.2},flavorText:""},{id:"industrial_public_health",name:"",description:"",icon:"Heart",type:"permanent",effects:{maxPop:25,stability:.12,production:.08},flavorText:""},{id:"industrial_urbanization",name:"",description:"",icon:"Building2",type:"temporary",duration:360,effects:{maxPop:30,industry:.25,taxIncome:.3},flavorText:""},{id:"industrial_electricity",name:"",description:"",icon:"Zap",type:"permanent",effects:{production:.15,industry:.2,scienceBonus:.15,cultureBonus:.1},flavorText:""},{id:"industrial_golden_era",name:"",description:"",icon:"Award",type:"temporary",duration:360,effects:{production:.3,industry:.35,taxIncome:.4,stability:.25},flavorText:""}],epoch7:[{id:"modern_innovation_summit",name:"",description:"",icon:"Lightbulb",type:"temporary",duration:360,effects:{scienceBonus:.5,production:.25},flavorText:""},{id:"modern_cultural_renaissance",name:"",description:"",icon:"Palette",type:"temporary",duration:360,effects:{cultureBonus:.45,stability:.3},flavorText:""},{id:"modern_digital_revolution",name:"",description:"",icon:"Cpu",type:"permanent",effects:{production:.15,scienceBonus:.15,cultureBonus:.15},flavorText:""},{id:"modern_space_program",name:"",description:"",icon:"Rocket",type:"temporary",duration:360,effects:{scienceBonus:.45,cultureBonus:.35,stability:.25},flavorText:""},{id:"modern_internet_age",name:"",description:"",icon:"Wifi",type:"permanent",effects:{scienceBonus:.2,cultureBonus:.18,taxIncome:.2},flavorText:""},{id:"modern_green_energy",name:"",description:"",icon:"Leaf",type:"temporary",duration:360,effects:{production:.3,stability:.28,industry:.25},flavorText:""},{id:"modern_ai_revolution",name:"",description:"AI",icon:"Brain",type:"permanent",effects:{scienceBonus:.25,production:.2,industry:.2},flavorText:""},{id:"modern_biotech_breakthrough",name:"",description:"",icon:"Dna",type:"temporary",duration:360,effects:{maxPop:40,scienceBonus:.4,stability:.22},flavorText:""},{id:"modern_global_cooperation",name:"",description:"",icon:"Globe",type:"permanent",effects:{stability:.2,taxIncome:.25,cultureBonus:.15},flavorText:""},{id:"modern_information_age",name:"",description:"",icon:"Database",type:"temporary",duration:360,effects:{scienceBonus:.45,cultureBonus:.4,production:.3,stability:.25},flavorText:""}]},S1=s=>{const o=`epoch${s}`;return T1[o]||[]},A1=s=>{const o=S1(s);if(o.length<=3)return[...o];const d=[...o];for(let c=d.length-1;c>0;c--){const m=Math.floor(Math.random()*(c+1));[d[c],d[m]]=[d[m],d[c]]}return d.slice(0,3)},Ka={PEACEFUL:"peaceful",GRUMBLING:"grumbling",MOBILIZING:"mobilizing",RADICALIZING:"radicalizing",UPRISING:"uprising"},D1={[Ka.PEACEFUL]:Ys.NONE,[Ka.GRUMBLING]:Ys.BREWING,[Ka.MOBILIZING]:Ys.PLOTTING,[Ka.RADICALIZING]:Ys.PLOTTING,[Ka.UPRISING]:Ys.ACTIVE},xo=s=>D1[s]||Ys.NONE,tr={GRUMBLING:30,MOBILIZING:50,RADICALIZING:70,UPRISING:90},P1={landowner:1.5,capitalist:2,knight:1.3,official:1.2,merchant:1.1,engineer:1,navigator:1,cleric:.9,scribe:.9,artisan:.8,worker:1,miner:.9,lumberjack:.8,soldier:1.2,peasant:.8,serf:.6,slave:.3,unemployed:.2},R1={peasant:"landowner",serf:"landowner",worker:"capitalist",miner:"capitalist",lumberjack:"landowner",merchant:"official",artisan:"merchant",cleric:"scribe",soldier:"official",knight:"official",engineer:"capitalist",navigator:"merchant",scribe:"cleric",official:"merchant",landowner:"peasant",capitalist:"worker"};function ar(s){return s>=tr.UPRISING?Ka.UPRISING:s>=tr.RADICALIZING?Ka.RADICALIZING:s>=tr.MOBILIZING?Ka.MOBILIZING:s>=tr.GRUMBLING?Ka.GRUMBLING:Ka.PEACEFUL}function z1(s,o,d,c){const m=P1[c]||1,b=1-d/100*.8;if(s<45){const g=(45-s)/45*1,v=1+o*.3;return g*m*v*b}if(s>50){let g=-.3;return s>80&&(g=-.6),g}return 0}function $1(s,o,d,c,m,b,g=!1,v=!0){const x={organization:s?.organization??0,stage:s?.stage??Ka.PEACEFUL,growthRate:s?.growthRate??0,lastStageChange:s?.lastStageChange??0,activeDemands:s?.activeDemands??[],actionCooldowns:s?.actionCooldowns??{},organizationPaused:s?.organizationPaused??0,resistance:s?.resistance??0};if(x.resistance>0&&(x.resistance=Math.max(0,x.resistance-.5)),x.organizationPaused>0)return x.organizationPaused-=1,x.growthRate=0,x;let y=z1(o,d,c,m);g&&y>0&&(y=y*.5),x.growthRate=y;let w=Math.max(0,Math.min(100,x.organization+y));!v&&o<45&&w>50&&(w=50,x.growthRate=0);const k=x.stage;return x.organization=w,x.stage=ar(w),x.phase=xo(x.stage),x.stage!==k&&(x.lastStageChange=b),x}function O1(s,o,d,c,m,b,g=[],v={}){const x={};return Object.keys(Fe).forEach(y=>{if(y==="slave")return;const w=o[y]??50,k=d[y]||0,M=c>0?k/c:0,z=g.some(W=>W.stratumKey===y&&!W.completed&&!W.failed),C=v[y]||[],D=Fe[y]?.needs||{},E=new Set(Object.keys(D)),S=C.some(W=>E.has(W.resource)),q=s[y];x[y]=$1(q,w,M,m,y,b,z,S)}),x}function B1(s,o){const d=[];return Object.keys(o).forEach(c=>{const m=s[c],b=o[c];if(!m||!b)return;const g=m.organization||0,v=b.organization||0;g<tr.GRUMBLING&&v>=tr.GRUMBLING&&d.push({type:"brewing",stratumKey:c,organization:v,stage:b.stage}),g<tr.RADICALIZING&&v>=tr.RADICALIZING&&d.push({type:"plotting",stratumKey:c,organization:v,stage:b.stage}),g<100&&v>=100&&d.push({type:"uprising",stratumKey:c,organization:v,stage:b.stage})}),d}function qd(s){return R1[s]||"official"}function sh(s){switch(s){case Ka.PEACEFUL:return"Coffee";case Ka.GRUMBLING:return"AlertTriangle";case Ka.MOBILIZING:return"Eye";case Ka.RADICALIZING:return"AlertCircle";case Ka.UPRISING:return"Flame";default:return"Coffee"}}function ih(s){switch(s){case Ka.PEACEFUL:return"";case Ka.GRUMBLING:return"";case Ka.MOBILIZING:return"";case Ka.RADICALIZING:return"";case Ka.UPRISING:return"";default:return""}}function rh(s,o){if(o<=0)return null;if(s>=100)return 0;const d=100-s;return Math.ceil(d/o)}function Cd(s){return Oe[s]?.name||s}const Ja={DECLARE_WAR:"declare_war",ESTABLISH_TRADE:"establish_trade",TAX_RELIEF:"tax_relief",LOWER_PRICE:"lower_price",RAISE_PRICE:"raise_price",WEALTH_BOOST:"wealth_boost",LIVING_STANDARD:"living_standard",APPROVAL:"approval"},L1={[Ja.DECLARE_WAR]:{name:"",icon:"Swords",achieveDeadline:180,maintainDuration:0,description:s=>` ${s.targetNationName||""} `},[Ja.ESTABLISH_TRADE]:{name:"",icon:"Ship",achieveDeadline:180,maintainDuration:0,description:s=>` ${Cd(s.targetResource)} `},[Ja.TAX_RELIEF]:{name:"",icon:"Percent",achieveDeadline:180,maintainDuration:360,description:s=>` ${Math.round((s.targetTaxRatio||.5)*100)}%1`},[Ja.LOWER_PRICE]:{name:"",icon:"TrendingDown",achieveDeadline:180,maintainDuration:180,description:s=>` ${Cd(s.targetResource)}  ${s.targetPrice?.toFixed(2)||""}`},[Ja.RAISE_PRICE]:{name:"",icon:"TrendingUp",achieveDeadline:180,maintainDuration:180,description:s=>` ${Cd(s.targetResource)}  ${s.targetPrice?.toFixed(2)||""}`},[Ja.WEALTH_BOOST]:{name:"",icon:"Coins",achieveDeadline:360,maintainDuration:0,description:s=>` ${Math.round((s.targetWealthIncrease||.2)*100)}%`},[Ja.LIVING_STANDARD]:{name:"",icon:"Heart",achieveDeadline:180,maintainDuration:180,description:s=>` ${Math.round((s.targetSatisfaction||.7)*100)}%`},[Ja.APPROVAL]:{name:"",icon:"ThumbsUp",achieveDeadline:180,maintainDuration:180,description:s=>` ${s.targetApproval||60}%`}},si={ACHIEVING:"achieving",MAINTAINING:"maintaining",COMPLETED:"completed",FAILED:"failed"};function U1(s,o){const d=[],{nations:c,taxPolicies:m,market:b,classWealth:g,needsReport:v,tradeRoutes:x}=o||{};if(["soldier","knight"].includes(s)){const D=(c||[]).filter(E=>(E.relation||50)<30&&!E.isAtWar);D.length>0&&d.push({type:Ja.DECLARE_WAR,weight:3,params:{targetNation:D[0],targetNationName:D[0].name}})}if(["merchant","navigator"].includes(s)){const D=W1(s,o);D&&d.push({type:Ja.ESTABLISH_TRADE,weight:3,params:{targetResource:D}})}const y=oh(s,o);if(y>.3){const D=.2+Math.random()*.4;d.push({type:Ja.TAX_RELIEF,weight:4,params:{currentTaxBurden:y,targetTaxRatio:D}})}const w=H1(s,o);if(w){const D=b?.prices?.[w.resource]||1,E=D*(.5+Math.random()*.3);d.push({type:Ja.LOWER_PRICE,weight:3,params:{targetResource:w.resource,targetPrice:E,currentPrice:D}})}const k=q1(s);if(k){const D=b?.prices?.[k]||1,E=b?.basePrices?.[k]||1;if(D<E*.8){const S=E*(1+Math.random()*.3);d.push({type:Ja.RAISE_PRICE,weight:2,params:{targetResource:k,targetPrice:S,currentPrice:D}})}}const M=V1(o),z=g?.[s]||0;z<M*.5&&d.push({type:Ja.WEALTH_BOOST,weight:2,params:{currentWealth:z,targetWealthIncrease:.2+Math.random()*.3}});const C=v?.[s]?.satisfactionRatio||1;C<.6&&d.push({type:Ja.LIVING_STANDARD,weight:3,params:{currentSatisfaction:C,targetSatisfaction:Math.min(.9,C+.2)}});const T=o.classApproval?.[s]||50;return d.push({type:Ja.APPROVAL,weight:1,params:{currentApproval:T,targetApproval:Math.min(80,Math.max(50,Math.round(T+10)))}}),G1(d)}function W1(s,o){const d=o?.classShortages?.[s]||[],c=d.find(v=>v.reason==="unaffordable");if(c)return c.resource;const m=d.find(v=>v.reason==="outOfStock");if(m)return m.resource;const{needsReport:b}=o||{},g=b?.[s]?.details||[];for(const v of g)if(v.shortage&&v.shortage>0)return v.resource;return null}function oh(s,o){const{classIncome:d,taxPolicies:c}=o||{},m=d?.[s]||1,b=Fe[s],g=b?.headTaxBase??0,v=c?.headTaxRates?.[s]??1,x=g*v;let y=0;const w=c?.resourceTaxRates||{},k=b?.needs||{};for(const[T,D]of Object.entries(k))if(D>0){const E=w[T]||0;y+=D*E}const M=x+y,z=o?.popStructure?.[s]||1,C=m/Math.max(z,1);return C<=0?M>0?1:0:Math.min(1,M/C)}function H1(s,o){const c=(o?.classShortages?.[s]||[]).find(g=>g.reason==="unaffordable");if(c){const{market:g}=o||{},v=g?.prices?.[c.resource]||1,x=g?.basePrices?.[c.resource]||1;return{resource:c.resource,price:v,basePrice:x}}const m=Fe[s];if(!m?.needs)return null;const{market:b}=o||{};for(const[g,v]of Object.entries(m.needs)){const x=b?.prices?.[g]||1,y=b?.basePrices?.[g]||1;if(x>y*1.3&&v>0)return{resource:g,price:x,basePrice:y}}return null}function q1(s){return{peasant:"food",serf:"food",lumberjack:"lumber",miner:"ore",worker:"stock",artisan:"tools"}[s]||null}function V1(s){const{classWealth:o,popStructure:d}=s||{};if(!o||!d)return 100;let c=0,m=0;for(const[b,g]of Object.entries(d))g>0&&(c+=o[b]||0,m+=g);return m>0?c/Object.keys(d).length:100}function G1(s){if(s.length===0)return null;const o=s.reduce((c,m)=>c+(m.weight||1),0);let d=Math.random()*o;for(const c of s)if(d-=c.weight||1,d<=0)return c;return s[s.length-1]}function F1({stratumKey:s,stratumName:o,currentDay:d=0,failurePenalty:c={organization:50},context:m={}}){const b=U1(s,m);if(!b)return null;const{type:g,params:v}=b,x=L1[g],y={id:`promise_${s}_${Date.now()}`,type:g,stratumKey:s,stratumName:o,phase:si.ACHIEVING,createdDay:d,achieveDeadline:d+x.achieveDeadline,maintainDuration:x.maintainDuration,maintainEndDay:null,failurePenalty:c,...v};return y.description=x.description(y),y}function I1(s,o){const{classApproval:d={},market:c={},nations:m=[],taxPolicies:b={},classWealth:g={},needsReport:v={},tradeRoutes:x={}}=o;switch(s.type){case Ja.DECLARE_WAR:return m.find(w=>w.id===s.targetNation?.id||w.name===s.targetNationName)?.isAtWar===!0;case Ja.ESTABLISH_TRADE:return(x?.routes||[]).some(w=>w.resource===s.targetResource&&w.active);case Ja.TAX_RELIEF:{const y=oh(s.stratumKey,o),w=s.currentTaxBurden||.5;return y<=w*(s.targetTaxRatio||.5)}case Ja.LOWER_PRICE:return(c.prices?.[s.targetResource]||1/0)<=(s.targetPrice||1/0);case Ja.RAISE_PRICE:return(c.prices?.[s.targetResource]||0)>=(s.targetPrice||0);case Ja.WEALTH_BOOST:{const y=g[s.stratumKey]||0,w=s.currentWealth||1,k=s.targetWealthIncrease||.2;return y>=w*(1+k)}case Ja.LIVING_STANDARD:return(v[s.stratumKey]?.satisfactionRatio||0)>=(s.targetSatisfaction||.7);case Ja.APPROVAL:return(d[s.stratumKey]||0)>=(s.targetApproval||60);default:return!1}}function Y1(s,o){return s?s.phase===si.ACHIEVING?Math.max(0,(s.achieveDeadline||0)-o):s.phase===si.MAINTAINING?Math.max(0,(s.maintainEndDay||0)-o):0:0}function X1(s=[],o={}){const{currentDay:d=0}=o,c=[],m=[],b=[],g=[];return s.forEach(v=>{if(!v)return;const x=I1(v,o);if(v.phase===si.ACHIEVING)if(x)if(v.maintainDuration>0){const y={...v,phase:si.MAINTAINING,maintainEndDay:d+v.maintainDuration,achievedDay:d};g.push(y),b.push(y)}else c.push({...v,phase:si.COMPLETED});else d>=(v.achieveDeadline||0)?m.push({...v,phase:si.FAILED}):b.push(v);else v.phase===si.MAINTAINING&&(x?d>=(v.maintainEndDay||0)?c.push({...v,phase:si.COMPLETED}):b.push(v):m.push({...v,phase:si.FAILED,failReason:"maintain_broken"}))}),{completed:c,failed:m,remaining:b,updated:g}}function _f(s,o,d){return!(Object.values(s||{}).reduce((m,b)=>m+(b||0),0)===0||d==="soldier"||d==="knight")}function Mf(s){const o=s.soldier,d=s.knight;return o&&o.phase===Ys.ACTIVE||d&&d.phase===Ys.ACTIVE}function Z1(s,o,d={},c,m){const b=k=>Math.max(0,Math.min(100,k)),g=b(d.organization||0),v=d.stage||ar(g),x={success:!1,newPhase:xo(v),playerLosses:0,rebelLosses:0,message:"",updatedOrganization:void 0,pauseDays:0,approvalChange:0},y=k=>{const M=b(k);x.updatedOrganization=M;const z=ar(M);x.newPhase=xo(z)},w=Math.min(.3,(m||0)*.1);switch(s){case"investigate":{const k=cl.INVESTIGATE_SUCCESS_BASE+w;x.success=Math.random()<k,x.success?(y(g-20),x.pauseDays=5,x.message=""):x.message="";break}case"arrest":{const k=cl.ARREST_SUCCESS_BASE+w;x.success=Math.random()<k,x.success?(y(g-35),x.pauseDays=7,x.message=""):(x.playerLosses=Math.floor(Math.random()*5)+1,x.message="");break}case"suppress":{const k=cl.SUPPRESS_SUCCESS_BASE+w;x.success=Math.random()<k;const M=Object.values(c||{}).reduce((C,T)=>C+(T||0),0),z=(d.influenceShare||0)*100;if(x.success){x.playerLosses=Math.floor(M*.1*Math.random()),x.rebelLosses=Math.floor(z*(.5+Math.random()*.5));const C=v===Ka.UPRISING?30:g-60;y(C),x.message=""}else x.playerLosses=Math.floor(M*.2*Math.random()),x.rebelLosses=Math.floor(z*.3*Math.random()),y(g+10),x.message="";break}case"appease":{x.success=!0;const k=v===Ka.GRUMBLING?15:8;y(g-k),x.approvalChange=10,x.message=`+10-${k}%`;break}case"negotiate":{x.success=!0;const k=v===Ka.RADICALIZING?10:15;y(g-k),x.approvalChange=15,x.message=`+15-${k}%`;break}case"bribe":{x.success=!0,y(g-12),x.pauseDays=10,x.message="-12%10";break}}return x}const Q1=(s,o,d,c,m,b)=>{const{tradeRoutes:g,nations:v,resources:x,daysElapsed:y,market:w,popStructure:k,taxPolicies:M}=s,z=g.routes||[],C=.05,T=.1,D=k?.merchant||0,E=[],S=[];let q=0;return z.forEach((W,be)=>{if(be>=D)return;const{nationId:G,resource:P,type:pe}=W,Pe=v.find(je=>je.id===G);if(!Pe){E.push(W);return}if(Pe.isAtWar)return;const ne=dl(P,Pe,y),ae=w?.prices?.[P]??(Oe[P]?.basePrice||1),se=ul(P,Pe,y);if(pe==="export"){if(!ne.isShortage||ne.shortageAmount<=0)return;const je=x[P]||0,I=Math.max(0,je-500);if(I<=T)return;const _=Math.min(I,ne.shortageAmount)*C;if(_<T)return;const B=ae*_,re=M?.resourceTaxRates?.[P]||0,F=Math.max(0,M?.resourceTariffMultipliers?.[P]??1),me=re*F,h=B*me,A=se*_;if(A-B-h<=0)return;c(R=>({...R,silver:(R.silver||0)+h,[P]:Math.max(0,(R[P]||0)-_)})),q+=h,m(R=>R.map(Q=>Q.id===G?{...Q,budget:Math.max(0,(Q.budget||0)-A),inventory:{...Q.inventory,[P]:((Q.inventory||{})[P]||0)+_}}:Q))}else if(pe==="import"){if(!ne.isSurplus||ne.surplusAmount<=0)return;const je=ne.surplusAmount*C;if(je<T)return;const de=se*je,I=ae*je,_=M?.resourceTaxRates?.[P]||0,B=Math.max(0,M?.resourceTariffMultipliers?.[P]??1),re=_*B,F=I*re,me=I-de-F;if(me<=0)return;c(h=>({...h,silver:(h.silver||0)+F,[P]:(h[P]||0)+je})),q+=F,m(h=>h.map(A=>A.id===G?{...A,budget:(A.budget||0)+de,inventory:{...A.inventory,[P]:Math.max(0,((A.inventory||{})[P]||0)-je)}}:A)),je>=1&&S.push(`  ${je.toFixed(1)} ${Oe[P]?.name||P}  ${Pe.name} ${de.toFixed(1)}  ${I.toFixed(1)}  ${F.toFixed(1)} ${me.toFixed(1)} `)}}),E.length>0&&b(W=>({...W,routes:W.routes.filter(be=>!E.some(G=>G.nationId===be.nationId&&G.resource===be.resource&&G.type===be.type))})),S.forEach(W=>d(W)),{tradeTax:q}},J1=(s={},o={})=>{const d=Array.isArray(s.approval)?s.approval:[],c=Array.isArray(s.stability)?s.stability:[],m=Array.isArray(s.resourceDemand)?s.resourceDemand:[],b=Array.isArray(s.stratumDemand)?s.stratumDemand:[],g=Array.isArray(s.buildingProduction)?s.buildingProduction:[],v={};let x=0;const y={},w={},k={},M=[],z=[],C=[],T=[],D=[],E=(se,je)=>typeof se!="number"||Number.isNaN(se)?je:Math.min(.95,Math.max(0,se)),S=Math.max(1,o?.approval?.duration||30),q=E(o?.approval?.decayRate??.04,.04),W=Math.max(1,o?.stability?.duration||30),be=E(o?.stability?.decayRate??.04,.04),G=Math.max(1,o?.resourceDemand?.duration||60),P=E(o?.resourceDemand?.decayRate??.02,.02),pe=Math.max(1,o?.stratumDemand?.duration||60),Pe=E(o?.stratumDemand?.decayRate??.02,.02),ne=Math.max(1,o?.buildingProduction?.duration||45),ae=E(o?.buildingProduction?.decayRate??.025,.025);return d.forEach(se=>{const je=typeof se.currentValue=="number"?se.currentValue:0,de=se.remainingDays??S;if(de<=0||Math.abs(je)<.001)return;const I=se.stratum;if(!I)return;v[I]=(v[I]||0)+je;const _=E(se.decayRate,q),B=je*(1-_),re=de-1;re>0&&Math.abs(B)>=.001&&M.push({...se,currentValue:B,remainingDays:re})}),c.forEach(se=>{const je=typeof se.currentValue=="number"?se.currentValue:0,de=se.remainingDays??W;if(de<=0||Math.abs(je)<.001)return;x+=je;const I=E(se.decayRate,be),_=je*(1-I),B=de-1;B>0&&Math.abs(_)>=.001&&z.push({...se,currentValue:_,remainingDays:B})}),m.forEach(se=>{const je=typeof se.currentValue=="number"?se.currentValue:0,de=se.remainingDays??G;if(de<=0||Math.abs(je)<.001)return;const I=se.target;if(!I)return;y[I]=(y[I]||0)+je;const _=E(se.decayRate,P),B=je*(1-_),re=de-1;re>0&&Math.abs(B)>=.001&&C.push({...se,currentValue:B,remainingDays:re})}),b.forEach(se=>{const je=typeof se.currentValue=="number"?se.currentValue:0,de=se.remainingDays??pe;if(de<=0||Math.abs(je)<.001)return;const I=se.target;if(!I)return;w[I]=(w[I]||0)+je;const _=E(se.decayRate,Pe),B=je*(1-_),re=de-1;re>0&&Math.abs(B)>=.001&&T.push({...se,currentValue:B,remainingDays:re})}),g.forEach(se=>{const je=typeof se.currentValue=="number"?se.currentValue:0,de=se.remainingDays??ne;if(de<=0||Math.abs(je)<.001)return;const I=se.target;if(!I)return;k[I]=(k[I]||0)+je;const _=E(se.decayRate,ae),B=je*(1-_),re=de-1;re>0&&Math.abs(B)>=.001&&D.push({...se,currentValue:B,remainingDays:re})}),{approvalModifiers:v,stabilityModifier:x,resourceDemandModifiers:y,stratumDemandModifiers:w,buildingProductionModifiers:k,nextEffects:{approval:M,stability:z,resourceDemand:C,stratumDemand:T,buildingProduction:D}}},K1=(s,o,d)=>{const{resources:c,setResources:m,market:b,setMarket:g,buildings:v,population:x,popStructure:y,setPopulation:w,birthAccumulator:k,setBirthAccumulator:M,epoch:z,techsUnlocked:C,decrees:T,gameSpeed:D,isPaused:E,setIsPaused:S,nations:q,setNations:W,setPopStructure:be,setMaxPop:G,maxPopBonus:P,setRates:pe,setTaxes:Pe,setClassApproval:ne,classApproval:ae,setClassInfluence:se,setClassWealth:je,setClassWealthDelta:de,setClassIncome:I,setClassExpense:_,classWealthHistory:B,setClassWealthHistory:re,classNeedsHistory:F,setClassNeedsHistory:me,setTotalInfluence:h,setTotalWealth:A,setActiveBuffs:Y,setActiveDebuffs:R,setStability:Q,setLogs:ye,taxPolicies:Ne,classWealth:ke,setClassShortages:Je,setClassLivingStandard:tt,activeBuffs:bt,activeDebuffs:ft,army:vt,setArmy:we,militaryQueue:Ze,setMilitaryQueue:pt,jobFill:xt,setJobFill:jt,jobsAvailable:le,setJobsAvailable:Ie,setDaysElapsed:K,daysElapsed:Be,militaryWageRatio:ze,classInfluenceShift:$e,setClassInfluenceShift:yt,setFestivalModal:_t,activeFestivalEffects:It,setActiveFestivalEffects:oa,lastFestivalYear:za,setLastFestivalYear:Ta,setHistory:en,autoSaveInterval:$n,isAutoSaveEnabled:At,lastAutoSaveTime:Z,saveGame:ee,merchantState:te,setMerchantState:$,tradeRoutes:ge,setTradeRoutes:H,tradeStats:he,setTradeStats:oe,actionCooldowns:Ae,setActionCooldowns:Le,actionUsage:We,setActionUsage:Te,promiseTasks:Ue,setPromiseTasks:Ke,activeEventEffects:Nt,setActiveEventEffects:Mt,eventEffectSettings:ga,rebellionStates:la,setRebellionStates:et,classInfluence:ie,totalInfluence:ct}=s,Ve=L.useRef({resources:c,market:b,buildings:v,population:x,popStructure:y,birthAccumulator:k,maxPopBonus:P,epoch:z,techsUnlocked:C,decrees:T,gameSpeed:D,nations:q,classWealth:ke,army:vt,militaryQueue:Ze,jobFill:xt,jobsAvailable:le,activeBuffs:bt,activeDebuffs:ft,taxPolicies:Ne,classWealthHistory:B,classNeedsHistory:F,militaryWageRatio:ze,classApproval:ae,daysElapsed:Be,activeFestivalEffects:It,lastFestivalYear:za,isPaused:E,autoSaveInterval:$n,isAutoSaveEnabled:At,lastAutoSaveTime:Z,merchantState:te,tradeRoutes:ge,actions:d,tradeStats:he,actionCooldowns:Ae,actionUsage:We,promiseTasks:Ue,activeEventEffects:Nt,eventEffectSettings:ga,rebellionStates:la,classInfluence:ie,totalInfluence:ct,birthAccumulator:k}),Ce=L.useRef(s.saveGame);L.useEffect(()=>{Ce.current=s.saveGame},[s.saveGame]),L.useEffect(()=>{Ve.current={resources:c,market:b,buildings:v,population:x,epoch:z,popStructure:y,maxPopBonus:P,techsUnlocked:C,decrees:T,gameSpeed:D,nations:q,classWealth:ke,army:vt,militaryQueue:Ze,jobFill:xt,activeBuffs:bt,activeDebuffs:ft,taxPolicies:Ne,classWealthHistory:B,classNeedsHistory:F,militaryWageRatio:ze,classApproval:ae,daysElapsed:Be,activeFestivalEffects:It,lastFestivalYear:za,isPaused:E,autoSaveInterval:$n,isAutoSaveEnabled:At,lastAutoSaveTime:Z,merchantState:te,tradeRoutes:ge,actions:d,tradeStats:he,actionCooldowns:Ae,actionUsage:We,promiseTasks:Ue,activeEventEffects:Nt,eventEffectSettings:ga,rebellionStates:la,classInfluence:ie,totalInfluence:ct,birthAccumulator:k}},[c,b,v,x,y,P,z,C,T,D,q,ke,vt,Ze,xt,le,bt,ft,Ne,B,F,ze,ae,Be,It,za,E,$n,At,Z,te,ge,he,d,Ae,We,Ue,Nt,ga,la,ie,ct,k]),L.useEffect(()=>{if(E){const _e=setInterval(()=>{const Dt=Ve.current;if(Dt.isAutoSaveEnabled){const Rt=Math.max(5,Dt.autoSaveInterval||60);Date.now()-(Dt.lastAutoSaveTime||0)>=Rt*1e3&&Ce.current&&(Ce.current({source:"auto"}),Ve.current.lastAutoSaveTime=Date.now())}},1e3);return()=>clearInterval(_e)}const nt=1e3/Math.max(1,D),qe=setInterval(()=>{const _e=Ve.current;if(_e.isAutoSaveEnabled){const De=Math.max(5,_e.autoSaveInterval||60);Date.now()-(_e.lastAutoSaveTime||0)>=De*1e3&&Ce.current&&(Ce.current({source:"auto"}),Ve.current.lastAutoSaveTime=Date.now())}const Dt=Sc(_e.daysElapsed||0);if(Sc((_e.daysElapsed||0)+1),Dt.year>(_e.lastFestivalYear||0)){const De=A1(_e.epoch);De.length>0&&(_t({options:De,year:Dt.year}),Ta(Dt.year),S(!0))}const{approvalModifiers:Rt,stabilityModifier:mt,resourceDemandModifiers:Kt,stratumDemandModifiers:Ht,buildingProductionModifiers:ca,nextEffects:ra}=J1(_e.activeEventEffects,_e.eventEffectSettings),Ye=E1({..._e,tick:_e.daysElapsed||0,gameSpeed:1,activeFestivalEffects:_e.activeFestivalEffects||[],eventApprovalModifiers:Rt,eventStabilityModifier:mt,eventResourceDemandModifiers:Kt,eventStratumDemandModifiers:Ht,eventBuildingProductionModifiers:ca}),dn=(_e.activeEventEffects?.approval?.length||0)>0||(_e.activeEventEffects?.stability?.length||0)>0||(_e.activeEventEffects?.resourceDemand?.length||0)>0||(_e.activeEventEffects?.stratumDemand?.length||0)>0||(_e.activeEventEffects?.buildingProduction?.length||0)>0,Nn=th(vt),qn={...Ye.resources};Object.entries(Nn).forEach(([De,Ge])=>{const ot=Ge;ot<=0||(qn[De]=Math.max(0,(qn[De]||0)-ot))}),m(qn),dn&&Mt(ra);const An={...Ye.classWealth},wa=Object.values(An).reduce((De,Ge)=>De+Ge,0),Sa={..._e.market?.priceHistory||{}},un={..._e.market?.supplyHistory||{}},On={..._e.market?.demandHistory||{}},ii=60;Object.keys(Ye.market?.prices||{}).forEach(De=>{const Ge=Ye.market?.prices?.[De];Sa[De]||(Sa[De]=[]),Sa[De]=[...Sa[De],Ge],Sa[De].length>ii&&Sa[De].shift(),un[De]||(un[De]=[]),un[De]=[...un[De],Ye.market?.supply?.[De]||0],un[De].length>ii&&un[De].shift(),On[De]||(On[De]=[]),On[De]=[...On[De],Ye.market?.demand?.[De]||0],On[De].length>ii&&On[De].shift()});const Gn={..._e.classWealthHistory||{}},ss=120;Object.entries(Ye.classWealth||{}).forEach(([De,Ge])=>{const ot=Gn[De]?[...Gn[De]]:[];ot.push(Ge),ot.length>ss&&ot.shift(),Gn[De]=ot});const Ga={..._e.classNeedsHistory||{}},is=120;Object.entries(Ye.needsReport||{}).forEach(([De,Ge])=>{const ot=Ga[De]?[...Ga[De]]:[];ot.push(Ge.satisfactionRatio),ot.length>is&&ot.shift(),Ga[De]=ot});const Kn={...Ye.market||{},priceHistory:Sa,supplyHistory:un,demandHistory:On,modifiers:Ye.modifiers||{}},qs=90;en(De=>{const Ge=(Tt=[],it)=>{const wt=[...Tt,it];return wt.length>qs&&wt.shift(),wt},ot=De||{},Bt={...ot,treasury:Ge(ot.treasury,Ye.resources?.silver||0),tax:Ge(ot.tax,Ye.taxes?.total||0),population:Ge(ot.population,Ye.population||0)},at=ot.class||{},Xe={...at};return Object.keys(Fe).forEach(Tt=>{const it=at[Tt]||{pop:[],income:[],expense:[]};Xe[Tt]={pop:Ge(it.pop,Ye.popStructure?.[Tt]||0),income:Ge(it.income,Ye.classIncome?.[Tt]||0),expense:Ge(it.expense,Ye.classExpense?.[Tt]||0)}}),Bt.class=Xe,Bt}),be(Ye.popStructure),G(Ye.maxPop),pe(Ye.rates),pe(Ye.rates||{}),ne(Ye.classApproval);const Es={...Ye.classInfluence||{}};Object.entries($e||{}).forEach(([De,Ge])=>{Ge&&(Es[De]=(Es[De]||0)+Ge)}),se(Es);const rs={};Object.keys(An).forEach(De=>{const Ge=_e.classWealth?.[De]||0;rs[De]=An[De]-Ge}),je(An),de(rs),I(Ye.classIncome||{}),_(Ye.classExpense||{}),re(Gn),me(Ga),h(Ye.totalInfluence),A(wa),Y(Ye.activeBuffs),R(Ye.activeDebuffs),Q(Ye.stability),Pe(Ye.taxes||{total:0,breakdown:{headTax:0,industryTax:0,subsidy:0,policyIncome:0,policyExpense:0},efficiency:1}),g(Kn),Je(Ye.needsShortages||{}),tt(Ye.classLivingStandard||{}),$(De=>{const Ge=Ye.merchantState||_e.merchantState||{pendingTrades:[],lastTradeTime:0};return De===Ge?De:Ge}),Ye.nations&&W(Ye.nations),Ye.jobFill&&jt(Ye.jobFill),Ye.jobsAvailable&&Ie(Ye.jobsAvailable),K(De=>De+1);const Ts=_e.rebellionStates||{},Ba=O1(Ts,Ye.classApproval||{},Ye.classInfluence||{},Ye.totalInfluence||0,Ye.stability||50,_e.daysElapsed||0,_e.promiseTasks||[],Ye.classShortages||{}),Ss=B1(Ts,Ba);if(Ss.length>0&&_e.actions?.triggerDiplomaticEvent)for(const De of Ss){const Ge=De.stratumKey,ot=_f(_e.army,_e.popStructure,Ge),Bt=Mf(Ba),at={...Ba[Ge],dissatisfactionDays:Math.floor(Ba[Ge]?.organization||0),influenceShare:(Ye.classInfluence?.[Ge]||0)/(Ye.totalInfluence||1)};let Xe=null;const Tt=(it,wt,da)=>{console.log("[ORGANIZATION] Action:",it,"Stratum:",wt,"Data:",da),_e.actions?.handleRebellionAction&&_e.actions.handleRebellionAction(it,wt,da)};switch(De.type){case"brewing":Xe=a1(Ge,at),o(` ${Fe[Ge]?.name||Ge}30%`);break;case"plotting":Xe=n1(Ge,at,ot,Bt),o(` ${Fe[Ge]?.name||Ge}70%`);break;case"uprising":{const it=at.influenceShare;if(it<.2){o(` ${Fe[Ge]?.name||Ge}100%${Math.round(it*100)}%`),et(an=>({...an,[Ge]:{...an[Ge],organization:99}}));break}const wt=_e.popStructure?.[Ge]||0,da=_e.classWealth?.[Ge]||0,zt=Math.floor(wt*.8),Aa=of(Ge,wt,da,it);W(an=>[...an,Aa]),be(an=>({...an,[Ge]:Math.max(0,(an[Ge]||0)-zt)})),w(an=>Math.max(0,an-zt)),Xe=rf(Ge,at,ot,Bt,Aa,Tt),o(` ${Fe[Ge]?.name||Ge}100%`);break}}if(Xe){_e.actions.triggerDiplomaticEvent(Xe),S(!0);break}}et(Ba);const Xs=(_e.nations||[]).filter(De=>De.isRebelNation&&De.isAtWar);for(const De of Xs){const Ge=De.rebellionStratum;if(!Ge)continue;const Bt=Ba[Ge]?.organization??0;if(Bt<50){const at=Fe[Ge]?.name||Ge;o(` ${De.name}${Math.round(Bt)}%`),W(Tt=>Tt.map(it=>it.id===De.id?{...it,isAtWar:!1,warScore:0,warDuration:0}:it));const Xe=Math.floor((De.population||0)*.5);Xe>0&&(be(Tt=>({...Tt,[Ge]:(Tt[Ge]||0)+Xe})),w(Tt=>Tt+Xe),o(` ${Xe}${at}`)),setTimeout(()=>{W(Tt=>Tt.filter(it=>it.id!==De.id))},100),et(Tt=>({...Tt,[Ge]:{...Tt[Ge],organization:Math.max(0,Bt-30)}}))}}if(Ae&&Object.keys(Ae).length>0&&Le(De=>{if(!De)return De;let Ge=!1;const ot={};return Object.entries(De).forEach(([Bt,at])=>{at>1?(ot[Bt]=at-1,Ge=!0):at>1e-6&&(Ge=!0)}),Ge?ot:De}),Ue&&Ue.length>0){const De=(_e.daysElapsed||0)+1,Ge=X1(Ue,{currentDay:De,classApproval:Ye.classApproval||{},market:Ye.market||_e.market||{},nations:Ye.nations||_e.nations||[],taxPolicies:_e.taxPolicies||{},classWealth:Ye.classWealth||_e.classWealth||{},needsReport:Ye.needsReport||{},tradeRoutes:_e.tradeRoutes||{},classIncome:Ye.classIncome||{},popStructure:Ye.popStructure||_e.popStructure||{}});Ge.completed.length>0&&Ge.completed.forEach(Bt=>{Bt.type,o(` ${Bt.stratumName} ${Bt.description||""}`)}),Ge.updated&&Ge.updated.length>0&&Ge.updated.forEach(Bt=>{o(` ${Bt.stratumName}  ${Bt.maintainDuration} `)}),Ge.failed.length>0&&Ge.failed.forEach(Bt=>{const at=Bt.failReason==="maintain_broken"?"":"";o(` ${Bt.stratumName}${at}`);const Xe=_e.rebellionStates?.[Bt.stratumKey]||{},Tt=Bt.failurePenalty||{organization:50};let it=Xe.organization||0;if(Tt.forcedUprising?it=100:typeof Tt.organization=="number"&&(it=Math.min(100,Math.max(0,it+Tt.organization))),et(wt=>({...wt,[Bt.stratumKey]:{...wt[Bt.stratumKey],organization:it}})),it>=100&&_e.actions?.triggerDiplomaticEvent){const wt=Bt.stratumKey,da=_f(_e.army,_e.popStructure,wt),zt=Mf(_e.rebellionStates||{}),Aa={influenceShare:(Ye.classInfluence?.[wt]||0)/(Ye.totalInfluence||1)},an=_e.popStructure?.[wt]||0,Zs=_e.classWealth?.[wt]||0,Vs=Aa.influenceShare,As=Math.floor(an*.8),ha=of(wt,an,Zs,Vs);W(Fa=>[...Fa,ha]),be(Fa=>({...Fa,[wt]:Math.max(0,(Fa[wt]||0)-As)})),w(Fa=>Math.max(0,Fa-As));const Bn=rf(wt,Aa,da,zt,ha,(Fa,st,wn)=>{_e.actions?.handleRebellionAction&&_e.actions.handleRebellionAction(Fa,st,wn)});o(` ${Fe[wt]?.name||wt}100%`),_e.actions.triggerDiplomaticEvent(Bn),S(!0)}});const ot=[...Ge.remaining];Ke(ot)}let os=0;if(_e.tradeRoutes&&_e.tradeRoutes.routes&&_e.tradeRoutes.routes.length>0){const De=Q1(_e,Ye,o,m,W,H);De&&(os=De.tradeTax||0)}if(oe({tradeTax:os}),s.playerInstallmentPayment&&s.playerInstallmentPayment.remainingDays>0){const De=s.playerInstallmentPayment,Ge=De.amount;(_e.resources.silver||0)>=Ge?(m(ot=>({...ot,silver:(ot.silver||0)-Ge})),s.setPlayerInstallmentPayment(ot=>({...ot,paidAmount:ot.paidAmount+Ge,remainingDays:ot.remainingDays-1})),De.remainingDays===1&&(o(` ${De.totalAmount} `),s.setPlayerInstallmentPayment(null))):(o(" "),W(ot=>ot.map(Bt=>Bt.id===De.nationId?{...Bt,isAtWar:!0,warStartDay:_e.daysElapsed||0,warDuration:0,relation:Math.max(0,(Bt.relation||0)-50),peaceTreatyUntil:void 0}:Bt)),s.setPlayerInstallmentPayment(null))}if(It.length>0){const De=It.filter(Ge=>Ge.type==="permanent"?!0:(_e.daysElapsed||0)-(Ge.activatedAt||0)<(Ge.duration||360));De.length!==It.length&&oa(De)}if(yt(De=>{if(!De||Object.keys(De).length===0)return De||{};const Ge={};return Object.entries(De).forEach(([ot,Bt])=>{const at=Bt*.9;Math.abs(at)>=.1&&(Ge[ot]=at)}),Object.keys(Ge).length>0?Ge:{}}),Ye.population!==_e.population&&w(Ye.population),typeof Ye.birthAccumulator=="number"&&M(Ye.birthAccumulator),Ye.logs.length){ye(Ge=>[...Ye.logs,...Ge].slice(0,128));const De=_e.actions;if(console.log("[EVENT DEBUG] actions:",!!De,"triggerDiplomaticEvent:",!!De?.triggerDiplomaticEvent),De&&De.triggerDiplomaticEvent){console.log("[EVENT DEBUG] Checking logs:",Ye.logs),console.log("[EVENT DEBUG] Total logs count:",Ye.logs.length);const Ge=Array.isArray(Ye.logs)?Ye.logs.find(ot=>typeof ot=="string"&&ot.includes("RAID_EVENT")):null;if(Ge&&De.addBattleNotification)try{const ot=Ge.indexOf("{");if(ot!==-1){const Bt=Ge.slice(ot),at=JSON.parse(Bt);let Xe=`${at.nationName} 

`;at.victory?(Xe+=`

`,Xe+=`
`,Xe+=`${at.ourPower||0} 
`,Xe+=`${at.enemyPower||0} 
`,at.battleReport&&at.battleReport.length>0&&(Xe+=`
`+at.battleReport.join(`
`))):(at.ourPower?(Xe+=`

`,Xe+=`
`,Xe+=`${at.ourPower||0} 
`,Xe+=`${at.enemyPower||0} 
`,at.battleReport&&at.battleReport.length>0&&(Xe+=`
`+at.battleReport.join(`
`))):Xe+=`

`,Xe+=`

`,at.foodLoss>0&&(Xe+=`${at.foodLoss} 
`),at.silverLoss>0&&(Xe+=`${at.silverLoss} 
`),at.popLoss>0&&(Xe+=`${at.popLoss} 
`));const Tt={victory:!!at.victory,missionName:`${at.nationName} `,missionDesc:at.victory?"":"",nationName:at.nationName,ourPower:at.ourPower||0,enemyPower:at.enemyPower||0,powerRatio:(at.enemyPower||0)>0?(at.ourPower||0)/at.enemyPower:0,score:0,losses:at.defenderLosses||{},attackerLosses:at.attackerLosses||{},enemyLosses:at.attackerLosses||{},defenderLosses:at.defenderLosses||{},resourcesGained:{},description:Xe,foodLoss:at.foodLoss||0,silverLoss:at.silverLoss||0,popLoss:at.popLoss||0,isRaid:!0};console.log("[EVENT DEBUG] Raid battle result created (pre-loop):",Tt),De.addBattleNotification(Tt)}}catch(ot){console.error("[EVENT DEBUG] Failed to parse raid event log:",ot)}Ye.logs.forEach((ot,Bt)=>{if(console.log(`[EVENT DEBUG] Log ${Bt}: `,ot),console.log(`[EVENT DEBUG] Log ${Bt} includes RAID_EVENT: `,ot.includes("RAID_EVENT")),ot.includes("WAR_DECLARATION_EVENT:")){console.log("[EVENT DEBUG] War declaration detected:",ot);try{const at=ot.replace("WAR_DECLARATION_EVENT:",""),Xe=JSON.parse(at),Tt=Ye.nations?.find(it=>it.id===Xe.nationId);if(Tt){const{createWarDeclarationEvent:it}=require("../config/events"),wt=it(Tt,()=>{console.log("[EVENT DEBUG] War declaration acknowledged")});De.triggerDiplomaticEvent(wt)}}catch(at){console.error("[EVENT DEBUG] Failed to parse war declaration event:",at)}}else if(ot.includes("")&&!ot.includes("WAR_DECLARATION_EVENT")){const at=ot.match(/ (.+) /);if(at){const Xe=at[1],Tt=Ye.nations?.find(it=>it.name===Xe);if(Tt){const{createWarDeclarationEvent:it}=require("../config/events"),wt=it(Tt,()=>{});De.triggerDiplomaticEvent(wt)}}}if(ot.includes("")){console.log("[EVENT DEBUG] Peace request detected in log:",ot);const at=ot.match(/ (.+)  (\d+) /);if(console.log("[EVENT DEBUG] Regex match result:",at),at){const Xe=at[1],Tt=parseInt(at[2],10);console.log("[EVENT DEBUG] Looking for nation:",Xe),console.log("[EVENT DEBUG] result.nations:",Ye.nations?.map(wt=>({name:wt.name,isPeaceRequesting:wt.isPeaceRequesting})));const it=Ye.nations?.find(wt=>wt.name===Xe);if(console.log("[EVENT DEBUG] Found nation:",it?.name,"isPeaceRequesting:",it?.isPeaceRequesting),it&&it.isPeaceRequesting){console.log("[EVENT DEBUG] Creating peace request event..."),console.log("[EVENT DEBUG] Parameters:",{nation:it.name,nationId:it.id,tribute:Tt,warScore:it.warScore||0,population:it.population});try{const wt=e1(it,Tt,it.warScore||0,(da,zt,Aa)=>{da?De.handleEnemyPeaceAccept(it.id,zt,Aa||Tt):De.handleEnemyPeaceReject(it.id)});console.log("[EVENT DEBUG] Event created:",wt),console.log("[EVENT DEBUG] Calling triggerDiplomaticEvent..."),De.triggerDiplomaticEvent(wt),console.log("[EVENT DEBUG] triggerDiplomaticEvent called")}catch(wt){console.error("[EVENT DEBUG] Error creating or triggering event:",wt)}W(wt=>wt.map(da=>da.id===it.id?{...da,isPeaceRequesting:!1}:da))}}}if(ot.includes("RAID_EVENT")){console.log("[EVENT DEBUG] Raid detected in log:",ot);try{const at=ot.replace("RAID_EVENT",""),Xe=JSON.parse(at);console.log("[EVENT DEBUG] Parsed raid data:",Xe);const Tt=Ye.nations?.find(it=>it.name===Xe.nationName);if(console.log("[EVENT DEBUG] Found nation for raid:",Tt?.name),Tt&&De.addBattleNotification){console.log("[EVENT DEBUG] Creating raid battle result...");let it=`${Xe.nationName} 

`;Xe.victory?(it+=` 

`,it+=`
`,it+=`${Xe.ourPower} 
`,it+=`${Xe.enemyPower} 

`,Xe.battleReport&&Xe.battleReport.length>0&&(it+=Xe.battleReport.join(`
`))):(Xe.ourPower===0?it+=` 

`:(it+=` 

`,it+=`
`,it+=`${Xe.ourPower} 
`,it+=`${Xe.enemyPower} 

`,Xe.battleReport&&Xe.battleReport.length>0&&(it+=Xe.battleReport.join(`
`)+`

`)),it+=`
`,Xe.foodLoss>0&&(it+=`-${Xe.foodLoss} 
`),Xe.silverLoss>0&&(it+=`-${Xe.silverLoss} 
`),Xe.popLoss>0&&(it+=`-${Xe.popLoss} 
`));const wt={victory:Xe.victory,missionName:`${Xe.nationName} `,missionDesc:Xe.victory?"":"",nationName:Xe.nationName,ourPower:Xe.ourPower||0,enemyPower:Xe.enemyPower||0,powerRatio:Xe.enemyPower>0?Xe.ourPower/Xe.enemyPower:0,score:0,losses:Xe.defenderLosses||{},attackerLosses:Xe.attackerLosses||{},enemyLosses:Xe.attackerLosses||{},defenderLosses:Xe.defenderLosses||{},resourcesGained:{},description:it,foodLoss:Xe.foodLoss||0,silverLoss:Xe.silverLoss||0,popLoss:Xe.popLoss||0,isRaid:!0};console.log("[EVENT DEBUG] Raid battle result created:",wt),De.addBattleNotification(wt),console.log("[EVENT DEBUG] addBattleNotification called")}}catch(at){console.error("[EVENT DEBUG] Error parsing or processing raid event:",at)}}})}}pt(De=>{const Ge=Ye.popStructure?.soldier||0,ot=Object.values(_e.army).reduce((zt,Aa)=>zt+Aa,0),Bt=De.filter(zt=>zt.status==="waiting").length,at=De.filter(zt=>zt.status==="training").length,Xe=ot+at,Tt=Math.max(0,Ge-Xe);console.log("[TRAINING QUEUE] currentSoldierPop:",Ge,"currentArmyCount:",ot,"waitingCount:",Bt,"trainingCount:",at,"occupiedJobs:",Xe,"availableJobsForNewTraining:",Tt);let it=Tt;const wt=De.map(zt=>zt.status==="waiting"&&it>0?(it--,o(` ${Sn[zt.unitId].name}  ${zt.totalTime} `),{...zt,status:"training",remainingTime:zt.totalTime}):zt.status==="training"?{...zt,remainingTime:zt.remainingTime-1}:zt),da=wt.filter(zt=>zt.status==="training"&&zt.remainingTime<=0);return da.length>0&&(we(zt=>{const Aa={...zt};return da.forEach(an=>{Aa[an.unitId]=(Aa[an.unitId]||0)+1}),Aa}),da.forEach(zt=>{o(` ${Sn[zt.unitId].name} `)})),wt.filter(zt=>!(zt.status==="training"&&zt.remainingTime<=0))})},nt);return()=>clearInterval(qe)},[D,E,vt,It,_t,oa,Ta,za,S])},kf=typeof window<"u"?window.AudioContext||window.webkitAudioContext:null,kr=s=>{if(!kf)return console.warn("AudioContext "),()=>{};let o;try{o=new kf}catch(c){return console.warn(" AudioContext:",c.message),()=>{}}const d={click:()=>{const c=o.createOscillator(),m=o.createGain();c.connect(m),m.connect(o.destination),c.frequency.value=800,c.type="sine",m.gain.setValueAtTime(.3,o.currentTime),m.gain.exponentialRampToValueAtTime(.01,o.currentTime+.1),c.start(o.currentTime),c.stop(o.currentTime+.1)},success:()=>{const c=o.createOscillator(),m=o.createGain();c.connect(m),m.connect(o.destination),c.frequency.setValueAtTime(523,o.currentTime),c.frequency.setValueAtTime(659,o.currentTime+.1),c.frequency.setValueAtTime(784,o.currentTime+.2),c.type="sine",m.gain.setValueAtTime(.3,o.currentTime),m.gain.exponentialRampToValueAtTime(.01,o.currentTime+.3),c.start(o.currentTime),c.stop(o.currentTime+.3)},error:()=>{const c=o.createOscillator(),m=o.createGain();c.connect(m),m.connect(o.destination),c.frequency.setValueAtTime(200,o.currentTime),c.frequency.setValueAtTime(150,o.currentTime+.1),c.type="sawtooth",m.gain.setValueAtTime(.3,o.currentTime),m.gain.exponentialRampToValueAtTime(.01,o.currentTime+.2),c.start(o.currentTime),c.stop(o.currentTime+.2)},coin:()=>{const c=o.createOscillator(),m=o.createGain();c.connect(m),m.connect(o.destination),c.frequency.setValueAtTime(988,o.currentTime),c.frequency.exponentialRampToValueAtTime(1319,o.currentTime+.1),c.type="sine",m.gain.setValueAtTime(.3,o.currentTime),m.gain.exponentialRampToValueAtTime(.01,o.currentTime+.15),c.start(o.currentTime),c.stop(o.currentTime+.15)},build:()=>{const c=o.currentTime;[0,.15].forEach((m,b)=>{const g=o.createOscillator(),v=o.createGain(),x=o.createBiquadFilter();g.connect(x),x.connect(v),v.connect(o.destination),g.type="triangle";const y=b===1?220:200;g.frequency.setValueAtTime(y,c+m),g.frequency.exponentialRampToValueAtTime(y*.5,c+m+.1),x.type="lowpass",x.frequency.setValueAtTime(800,c+m),x.frequency.linearRampToValueAtTime(300,c+m+.1),v.gain.setValueAtTime(0,c+m),v.gain.linearRampToValueAtTime(.6,c+m+.01),v.gain.exponentialRampToValueAtTime(.01,c+m+.15),g.start(c+m),g.stop(c+m+.2)})},research:()=>{const c=o.createOscillator(),m=o.createGain();c.connect(m),m.connect(o.destination),c.frequency.setValueAtTime(440,o.currentTime),c.frequency.setValueAtTime(554,o.currentTime+.05),c.frequency.setValueAtTime(659,o.currentTime+.1),c.frequency.setValueAtTime(880,o.currentTime+.15),c.type="sine",m.gain.setValueAtTime(.25,o.currentTime),m.gain.exponentialRampToValueAtTime(.01,o.currentTime+.25),c.start(o.currentTime),c.stop(o.currentTime+.25)},battle:()=>{const c=o.createOscillator(),m=o.createGain();c.connect(m),m.connect(o.destination),c.frequency.setValueAtTime(100,o.currentTime),c.frequency.linearRampToValueAtTime(50,o.currentTime+.3),c.type="sawtooth",m.gain.setValueAtTime(.4,o.currentTime),m.gain.exponentialRampToValueAtTime(.01,o.currentTime+.4),c.start(o.currentTime),c.stop(o.currentTime+.4)},victory:()=>{const c=o.createOscillator(),m=o.createGain();c.connect(m),m.connect(o.destination),c.frequency.setValueAtTime(523,o.currentTime),c.frequency.setValueAtTime(659,o.currentTime+.1),c.frequency.setValueAtTime(784,o.currentTime+.2),c.frequency.setValueAtTime(1047,o.currentTime+.3),c.type="sine",m.gain.setValueAtTime(.3,o.currentTime),m.gain.exponentialRampToValueAtTime(.01,o.currentTime+.5),c.start(o.currentTime),c.stop(o.currentTime+.5)},levelup:()=>{const c=o.createOscillator(),m=o.createGain();c.connect(m),m.connect(o.destination),c.frequency.setValueAtTime(440,o.currentTime),c.frequency.setValueAtTime(554,o.currentTime+.1),c.frequency.setValueAtTime(659,o.currentTime+.2),c.frequency.setValueAtTime(880,o.currentTime+.3),c.frequency.setValueAtTime(1109,o.currentTime+.4),c.type="sine",m.gain.setValueAtTime(.3,o.currentTime),m.gain.exponentialRampToValueAtTime(.01,o.currentTime+.6),c.start(o.currentTime),c.stop(o.currentTime+.6)},notification:()=>{const c=o.createOscillator(),m=o.createGain();c.connect(m),m.connect(o.destination),c.frequency.setValueAtTime(800,o.currentTime),c.frequency.setValueAtTime(1e3,o.currentTime+.05),c.type="sine",m.gain.setValueAtTime(.25,o.currentTime),m.gain.exponentialRampToValueAtTime(.01,o.currentTime+.15),c.start(o.currentTime),c.stop(o.currentTime+.15)}};return d[s]||d.click},er={CLICK:"click",SUCCESS:"success",ERROR:"error",COIN:"coin",BUILD:"build",RESEARCH:"research",BATTLE:"battle",VICTORY:"victory",LEVEL_UP:"levelup",NOTIFICATION:"notification",EVENT:"event"},eg=(s,o)=>{const{resources:d,setResources:c,market:m,buildings:b,setBuildings:g,epoch:v,setEpoch:x,population:y,techsUnlocked:w,setTechsUnlocked:k,setDecrees:M,setClicks:z,army:C,setArmy:T,militaryQueue:D,setMilitaryQueue:E,setBattleResult:S,battleNotifications:q,setBattleNotifications:W,nations:be,setNations:G,setClassInfluenceShift:P,daysElapsed:pe,currentEvent:Pe,setCurrentEvent:ne,eventHistory:ae,setEventHistory:se,classApproval:je,setClassApproval:de,stability:I,setStability:_,setPopulation:B,setMaxPop:re,setMaxPopBonus:F,tradeRoutes:me,setTradeRoutes:h,jobsAvailable:A,eventEffectSettings:Y,setActiveEventEffects:R,rebellionStates:Q,setRebellionStates:ye,popStructure:Ne,setPopStructure:ke,classWealth:Je}=s,tt=Z=>{if(!Z)return 1;const ee=Oe[Z]?.basePrice||1;return m?.prices?.[Z]??ee},bt=Z=>Z&&(Oe[Z]?.name||Z),ft=Z=>Z&&(typeof Fe<"u"&&Fe[Z]?.name?Fe[Z].name:Z),vt=()=>{if(v>=Qa.length-1)return!1;const Z=Qa[v+1];if(Z.req.science&&d.science<Z.req.science||Z.req.population&&y<Z.req.population||Z.req.culture&&d.culture<Z.req.culture)return!1;for(let te in Z.cost)if((d[te]||0)<Z.cost[te])return!1;const ee=Object.entries(Z.cost).reduce((te,[$,ge])=>te+ge*tt($),0);return!((d.silver||0)<ee)},we=()=>{if(!vt())return;const Z=Qa[v+1],ee={...d},te=Object.entries(Z.cost).reduce(($,[ge,H])=>$+H*tt(ge),0);for(let $ in Z.cost)ee[$]-=Z.cost[$];ee.silver=Math.max(0,(ee.silver||0)-te),c(ee),x(v+1),o(`  ${Z.name}`);try{const $=kr(er.LEVEL_UP);$&&$()}catch($){console.warn("Failed to play level up sound:",$)}},Ze=Z=>{const ee=Tn.find(oe=>oe.id===Z),te=b[Z]||0,$={};for(let oe in ee.baseCost)$[oe]=ee.baseCost[oe]*Math.pow(1.15,te);if(!Object.entries($).every(([oe,Ae])=>(d[oe]||0)>=Ae)){o(` ${ee.name}`);return}const H=Object.entries($).reduce((oe,[Ae,Le])=>oe+Le*tt(Ae),0);if((d.silver||0)<H){o("");return}const he={...d};Object.entries($).forEach(([oe,Ae])=>{he[oe]=Math.max(0,(he[oe]||0)-Ae)}),he.silver=Math.max(0,(he.silver||0)-H),c(he),g(oe=>({...oe,[Z]:(oe[Z]||0)+1})),o(` ${ee.name}`);try{const oe=kr(er.BUILD);oe&&oe()}catch(oe){console.warn("Failed to play build sound:",oe)}},pt=Z=>{(b[Z]||0)>0&&(g(ee=>({...ee,[Z]:ee[Z]-1})),o(` ${Tn.find(ee=>ee.id===Z).name}`))},xt=Z=>{const ee=yo.find(H=>H.id===Z);if(!ee)return;if(w.includes(Z)){o(` ${ee.name}`);return}if(ee.epoch>v){o(` ${Qa[ee.epoch].name}  ${ee.name}`);return}let te=!0;for(let H in ee.cost)if((d[H]||0)<ee.cost[H]){te=!1;break}if(!te){o(` ${ee.name}`);return}const $=Object.entries(ee.cost).reduce((H,[he,oe])=>H+oe*tt(he),0);if((d.silver||0)<$){o("");return}const ge={...d};for(let H in ee.cost)ge[H]-=ee.cost[H];ge.silver=Math.max(0,(ge.silver||0)-$),c(ge),k(H=>[...H,Z]),o(` ${ee.name}`);try{const H=kr(er.RESEARCH);H&&H()}catch(H){console.warn("Failed to play research sound:",H)}},jt=Z=>{let ee=null,te="";if(M($=>$.map(ge=>{if(ge.id!==Z)return ge;const H=ge.unlockEpoch??0;return H>v?(ee=H,te=ge.name||"",ge):{...ge,active:!ge.active}})),ee!==null&&o){const $=Qa[ee]?.name||` ${ee+1} `;o(`${$}${te||""}`)}},le=Z=>{z(ee=>[...ee,{id:Date.now(),x:Z.clientX,y:Z.clientY,text:"+1",color:"text-white"}]),c(ee=>({...ee,food:ee.food+1,wood:ee.wood+1}))},Ie=Z=>{const ee=Sn[Z];if(!ee)return;if(ee.epoch>v){o(` ${Qa[ee.epoch].name}  ${ee.name}`);return}let te=!0;for(let H in ee.recruitCost)if((d[H]||0)<ee.recruitCost[H]){te=!1;break}if(!te){o(` ${ee.name}`);return}const $=Object.entries(ee.recruitCost).reduce((H,[he,oe])=>H+oe*tt(he),0);if((d.silver||0)<$){o("");return}const ge={...d};for(let H in ee.recruitCost)ge[H]-=ee.recruitCost[H];ge.silver=Math.max(0,(ge.silver||0)-$),c(ge),E(H=>[...H,{unitId:Z,status:"waiting",remainingTime:ee.trainingTime,totalTime:ee.trainingTime}]),o(` ${ee.name}...`)},K=Z=>{(C[Z]||0)>0&&(T(ee=>({...ee,[Z]:ee[Z]-1})),o(` ${Sn[Z].name}`))},Be=Z=>{E(ee=>{if(Z<0||Z>=ee.length)return ee;const te=ee[Z],$=Sn[te.unitId],ge=ee.filter((H,he)=>he!==Z);if(te.status==="waiting"||te.status==="training"){const H={};for(let Ae in $.recruitCost)H[Ae]=Math.floor($.recruitCost[Ae]*.5);const he=Object.entries($.recruitCost).reduce((Ae,[Le,We])=>Ae+We*tt(Le),0),oe=Math.floor(he*.5);c(Ae=>{const Le={...Ae};for(let We in H)Le[We]=(Le[We]||0)+H[We];return Le.silver=(Le.silver||0)+oe,Le}),o(` ${$.name}50%`)}return ge})},ze=(Z,ee)=>{const te=Jf.find(mt=>mt.id===Z);if(!te){o("");return}const $=be.find(mt=>mt.id===ee);if(!$){o("");return}if(!$.isAtWar){o(`${$.name} `);return}if(Object.values(C).reduce((mt,Kt)=>mt+Kt,0)===0){o("");return}const H={army:C,epoch:v,militaryBuffs:0},he=Math.max($.appearEpoch||0,Math.min(v,$.expireEpoch??v)),oe=$.militaryStrength??1,Ae=Math.max(.3,Math.min(1.5,($.wealth||500)/800)),Le=1+($.aggression||.2),We=1+Math.max(-.5,($.warScore||0)/120),Te=oe*Ae*Le*We,Ue=te.unitScale||"medium",Ke=Qf(he,Ue),Nt={},Mt=te.baseUnitCount||{min:10,max:15},ga=Mt.min+Math.random()*(Mt.max-Mt.min),la=Math.floor(ga*Te);Ke.forEach((mt,Kt)=>{if(Sn[mt]){const Ht=.5+Math.random()*.8,ca=Math.floor(la/Ke.length*Ht);ca>0&&(Nt[mt]=ca)}});const et={army:Nt,epoch:he,militaryBuffs:te.enemyBuff||0,wealth:$.wealth||500},ie=eh(H,et);let ct={};if(ie.victory){const mt={};if((ca=>{Object.entries(ca||{}).forEach(([ra,Ye])=>{Ye>0&&(mt[ra]=(mt[ra]||0)+Math.floor(Ye))})})(ie.loot||{}),te.lootConfig){const ca=$.wealth||500;Object.entries(te.lootConfig).forEach(([ra,Ye])=>{const dn=d?.[ra]||0,Nn=Math.floor(ca*Ye.enemyPercent),qn=Math.floor(dn*Ye.playerPercent),An=Ye.baseMin||10,wa=Math.max(An,Math.min(Nn,Math.max(Nn*.5,qn))),Jn=.8+Math.random()*.4,Sa=Math.floor(wa*Jn);Sa>0&&(mt[ra]=(mt[ra]||0)+Sa)})}else Object.entries(te.loot||{}).forEach(([ca,ra])=>{if(!Array.isArray(ra)||ra.length<2)return;const[Ye,dn]=ra,Nn=Math.floor(Ye+Math.random()*(dn-Ye+1));Nn>0&&(mt[ca]=(mt[ca]||0)+Nn)});const Ht={};Object.entries(mt).forEach(([ca,ra])=>{ra>0&&fs(ca,v,w)&&(Ht[ca]=ra)}),ct=Ht,Object.keys(Ht).length>0&&c(ca=>{const ra={...ca};return Object.entries(Ht).forEach(([Ye,dn])=>{ra[Ye]=(ra[Ye]||0)+dn}),ra})}T(mt=>{const Kt={...mt};return Object.entries(ie.attackerLosses||{}).forEach(([Ht,ca])=>{Kt[Ht]=Math.max(0,(Kt[Ht]||0)-ca)}),Kt});const Ve=ie.victory?te.influence?.win||0:te.influence?.lose||0;Ve!==0&&P(mt=>({...mt,soldier:(mt?.soldier||0)+Ve}));const Ce=Object.values(ie.defenderLosses||{}).reduce((mt,Kt)=>mt+Kt,0),nt=te.wealthDamage||20,qe=ie.victory?Math.min($.wealth||0,Math.max(50,Ce*nt)):0,_e=ie.victory?te.winScore||10:-(te.loseScore||8),Dt=ie.victory?Math.min(.15,Ce*.005+qe/1e4):0,Rt=ie.victory?Math.floor(Ce*.8):0;G(mt=>mt.map(Kt=>{if(Kt.id!==ee)return Kt;const Ht=Kt.militaryStrength??1,ca=Math.max(.2,Ht-Dt),ra=Kt.population??1e3,Ye=Math.max(100,ra-Rt);return{...Kt,wealth:Math.max(0,(Kt.wealth||0)-qe),warScore:(Kt.warScore||0)+_e,enemyLosses:(Kt.enemyLosses||0)+Ce,militaryStrength:ca,population:Ye}})),S({victory:ie.victory,actionType:te.id,missionName:te.name,missionDesc:te.desc,missionDifficulty:te.difficulty,ourPower:ie.attackerPower,enemyPower:ie.defenderPower,powerRatio:ie.defenderPower>0?ie.attackerPower/ie.defenderPower:ie.attackerPower,score:Number(ie.attackerAdvantage||0),losses:ie.attackerLosses||{},enemyLosses:ie.defenderLosses||{},resourcesGained:ct,nationName:$.name,description:(ie.battleReport||[]).join(`
`)}),o(ie.victory?`  ${$.name} `:`  ${$.name} `);try{const mt=kr(ie.victory?er.VICTORY:er.BATTLE);mt&&mt()}catch(mt){console.warn("Failed to play battle sound:",mt)}},$e=(Z,ee,te={})=>{const $=be.find(H=>H.id===Z);if(!$)return;const ge=H=>Math.max(0,Math.min(100,H));if($.isAtWar&&(ee==="gift"||ee==="trade"||ee==="import"||ee==="demand")){o(`${$.name} `);return}switch(ee){case"gift":{const H=te.amount||500;if((d.silver||0)<H){o("");return}c(he=>({...he,silver:he.silver-H})),G(he=>he.map(oe=>oe.id===Z?{...oe,relation:ge((oe.relation||0)+10),wealth:(oe.wealth||0)+H}:oe)),o(` ${$.name} `);break}case"trade":{const H=te.resource,he=Math.max(1,Math.floor(te.amount||5));if(!H||!Oe[H]||Oe[H].type==="virtual"||H==="silver"){o("");return}if((d[H]||0)<he){o("");return}const oe=dl(H,$,pe),Ae=Math.floor(oe.shortageAmount);if(!oe.isShortage||Ae<=0){o(`${$.name}  ${Oe[H].name} `);return}if(he>Ae)return o(`${$.name}  ${Oe[H].name}  ${Ae}  ${he}`),te.amount=Ae,$e(Z,ee,te);const Le=tt(H),We=ul(H,$,pe),Ue=We*he,Ke=We-Le;c(Nt=>({...Nt,silver:Nt.silver+Ue,[H]:Math.max(0,(Nt[H]||0)-he)})),G(Nt=>Nt.map(Mt=>Mt.id===Z?{...Mt,budget:Math.max(0,(Mt.budget||0)-Ue),inventory:{...Mt.inventory,[H]:((Mt.inventory||{})[H]||0)+he},relation:ge((Mt.relation||0)+(Ke>0?2:0))}:Mt)),o(` ${$.name}  ${he}${Oe[H].name} ${Ue.toFixed(1)}  ${Ke>=0?"+":""}${Ke.toFixed(2)}`);break}case"import":{const H=te.resource,he=Math.max(1,Math.floor(te.amount||5));if(!H||!Oe[H]||Oe[H].type==="virtual"||H==="silver"){o("");return}const oe=dl(H,$,pe),Ae=Math.floor(oe.surplusAmount);if(!oe.isSurplus||Ae<=0){o(`${$.name}  ${Oe[H].name} `);return}if(he>Ae)return o(`${$.name}  ${Oe[H].name}  ${Ae}  ${he}`),te.amount=Ae,$e(Z,ee,te);const Le=tt(H),We=ul(H,$,pe),Te=We*he;if((d.silver||0)<Te){o("");return}const Ue=Le-We;c(Ke=>({...Ke,silver:Ke.silver-Te,[H]:(Ke[H]||0)+he})),G(Ke=>Ke.map(Nt=>Nt.id===Z?{...Nt,budget:(Nt.budget||0)+Te,inventory:{...Nt.inventory,[H]:Math.max(0,((Nt.inventory||{})[H]||0)-he)},relation:ge((Nt.relation||0)+(Ue>0?2:0))}:Nt)),o(` ${$.name}  ${he}${Oe[H].name} ${Te.toFixed(1)}  ${Ue>=0?"+":""}${Ue.toFixed(2)}`);break}case"demand":{const H=Tc(C,v),he=Math.max(.1,H/(H+200)*.6+($.relation||0)/300);if(Math.random()<he){const oe=Math.min($.wealth||0,Math.ceil(150+H*.25));c(Ae=>({...Ae,silver:Ae.silver+oe})),G(Ae=>Ae.map(Le=>Le.id===Z?{...Le,wealth:Math.max(0,(Le.wealth||0)-oe),relation:ge((Le.relation||0)-30)}:Le)),o(`${$.name}  ${oe} `)}else{const oe=Math.random()<.4+($.aggression||0)*.4;G(Ae=>Ae.map(Le=>Le.id===Z?{...Le,relation:ge((Le.relation||0)-40),isAtWar:oe?!0:Le.isAtWar,warStartDay:oe?pe:Le.warStartDay,warDuration:oe?0:Le.warDuration}:Le)),o(`${$.name} ${oe?"":""}`)}break}case"provoke":{if((d.silver||0)<300){o("300");return}let he;if(te.targetNationId){if(he=be.find(Le=>Le.id===te.targetNationId),!he){o("");return}}else{const Le=be.filter(We=>We.id!==Z&&v>=(We.appearEpoch??0)&&(We.expireEpoch==null||v<=We.expireEpoch));if(Le.length===0){o("");return}he=Le[Math.floor(Math.random()*Le.length)]}const oe=$.relation||50,Ae=Math.min(.8,.3+oe/200);if(c(Le=>({...Le,silver:Le.silver-300})),Math.random()<Ae){const Le=Math.floor(15+Math.random()*15);G(We=>We.map(Te=>{if(Te.id===Z){const Ue={...Te.foreignRelations||{}};return Ue[he.id]=Math.max(0,(Ue[he.id]||50)-Le),{...Te,foreignRelations:Ue}}if(Te.id===he.id){const Ue={...Te.foreignRelations||{}};return Ue[Z]=Math.max(0,(Ue[Z]||50)-Le),{...Te,foreignRelations:Ue}}return Te})),o(`  ${$.name}  ${he.name} -${Le}`)}else G(Le=>Le.map(We=>We.id===Z?{...We,relation:ge((We.relation||0)-15)}:We)),o(`  ${$.name} `);break}case"declare_war":{if($.peaceTreatyUntil&&pe<$.peaceTreatyUntil){const oe=$.peaceTreatyUntil-pe;o(` ${$.name}  ${oe} `);return}const H=$.relation||0;if(H>=80){o(`${$.name}  ${H}`);return}const he=be.filter(oe=>oe.id===Z||oe.id===$.id?!1:($.foreignRelations?.[oe.id]??50)>=80);if(G(oe=>{let Ae=oe.map(Le=>Le.id===Z?{...Le,relation:0,isAtWar:!0,warScore:0,warStartDay:pe,warDuration:0,enemyLosses:0,peaceTreatyUntil:void 0}:Le);return he.length>0&&(Ae=Ae.map(Le=>he.some(We=>We.id===Le.id)?{...Le,relation:Math.max(0,(Le.relation||50)-40),isAtWar:!0,warScore:0,warStartDay:pe,warDuration:0,enemyLosses:0}:Le)),Ae}),o(` ${$.name} `),he.length>0){const oe=he.map(Ae=>Ae.name).join("");o(` ${$.name}  ${oe} `)}break}case"peace":{if(!$.isAtWar){o("");return}const H=$.warScore||0,he=$.warDuration||0,oe=$.enemyLosses||0,Ae=t1($,H,he,oe,{population:y,wealth:d?.silver||0},(Le,We)=>{It(Z,Le,We)});Ta(Ae);break}}},yt=(Z,ee,te)=>{const $=be.find(H=>H.id===Z);if(!$)return;if($.isRebelNation){At(Z,!0);return}const ge=pe+365;if(ee==="installment")G(H=>H.map(he=>he.id===Z?{...he,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,isPeaceRequesting:!1,relation:Math.max(35,he.relation||0),peaceTreatyUntil:ge,installmentPayment:{amount:te,remainingDays:365,totalAmount:te*365,paidAmount:0}}:he)),o(`${$.name} ${te} ${te*365}`);else if(ee==="population")F(H=>H+te),B(H=>H+te),G(H=>H.map(he=>he.id===Z?{...he,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,isPeaceRequesting:!1,population:Math.max(100,(he.population||1e3)-te),relation:Math.max(35,he.relation||0),peaceTreatyUntil:ge}:he)),o(`${$.name} ${te} `);else if(ee==="open_market"){const H=pe+te,he=Math.round(te/365);G(oe=>oe.map(Ae=>Ae.id===Z?{...Ae,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,isPeaceRequesting:!1,relation:Math.max(35,Ae.relation||0),peaceTreatyUntil:ge,openMarketUntil:H}:Ae)),o(`${$.name}${he}`)}else c(H=>({...H,silver:(H.silver||0)+te})),G(H=>H.map(he=>he.id===Z?{...he,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,isPeaceRequesting:!1,wealth:Math.max(0,(he.wealth||0)-te),relation:Math.max(35,he.relation||0),peaceTreatyUntil:ge}:he)),o(`${$.name} ${te} `)},_t=Z=>{G(ee=>ee.map(te=>te.id===Z?{...te,isPeaceRequesting:!1}:te)),o(`${be.find(ee=>ee.id===Z)?.name||""}`)},It=(Z,ee,te)=>{if(ee==="cancel"){o("");return}const $=be.find(Te=>Te.id===Z);if(!$)return;const ge=$.isRebelNation===!0,H=ge?" ":"",he=Te=>Math.max(0,Math.min(100,Te)),oe=$.warScore||0,Ae=$.warDuration||0,Le=$.enemyLosses||0,We=pe+365;if(ee==="demand_high")oe/100+Math.min(.4,Le/250)+Math.min(.2,Ae/250)>.7||($.wealth||0)<=0?(c(Ue=>({...Ue,silver:(Ue.silver||0)+te})),ge?At(Z,!0):G(Ue=>Ue.map(Ke=>Ke.id===Z?{...Ke,wealth:Math.max(0,(Ke.wealth||0)-te),isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,relation:he((Ke.relation||0)+5),peaceTreatyUntil:We}:Ke)),o(`${$.name}  ${te} ${H}`)):o(`${$.name} `);else if(ee==="demand_installment")oe/90+Math.min(.45,Le/220)+Math.min(.25,Ae/220)>.65?(ge?At(Z,!0):G(Ue=>Ue.map(Ke=>Ke.id===Z?{...Ke,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,relation:he((Ke.relation||0)+8),peaceTreatyUntil:We,installmentPayment:{amount:te,remainingDays:365,totalAmount:te*365,paidAmount:0}}:Ke)),o(`${$.name}  ${te} ${te*365}${H}`)):o(`${$.name} `);else if(ee==="demand_population")oe/95+Math.min(.42,Le/230)+Math.min(.23,Ae/230)>.68?(F(Ue=>Ue+te),B(Ue=>Ue+te),ge?At(Z,!0):G(Ue=>Ue.map(Ke=>Ke.id===Z?{...Ke,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,population:Math.max(100,(Ke.population||1e3)-te),relation:he((Ke.relation||0)+7),peaceTreatyUntil:We}:Ke)),o(`${$.name}  ${te} ${H}`)):o(`${$.name} `);else if(ee==="demand_standard"||ee==="demand_tribute")oe/80+Math.min(.5,Le/200)+Math.min(.3,Ae/200)>.6||($.wealth||0)<=0?(c(Ue=>({...Ue,silver:(Ue.silver||0)+te})),ge?At(Z,!0):G(Ue=>Ue.map(Ke=>Ke.id===Z?{...Ke,wealth:Math.max(0,(Ke.wealth||0)-te),isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,relation:he((Ke.relation||0)+10),peaceTreatyUntil:We}:Ke)),o(`${$.name}  ${te} ${H}`)):o(`${$.name} `);else if(ee==="peace_only")Math.max(.3,oe/60+Math.min(.4,Le/150))>.5?(ge?At(Z,!0):G(Ue=>Ue.map(Ke=>Ke.id===Z?{...Ke,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,relation:he((Ke.relation||0)+15),peaceTreatyUntil:We}:Ke)),o(`${$.name} ${H}`)):o(`${$.name} `);else if(ee==="demand_open_market")if(oe/85+Math.min(.45,Le/210)+Math.min(.25,Ae/210)>.6){const Ue=pe+te,Ke=Math.round(te/365);ge?At(Z,!0):G(Nt=>Nt.map(Mt=>Mt.id===Z?{...Mt,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,relation:he((Mt.relation||0)+10),peaceTreatyUntil:We,openMarketUntil:Ue}:Mt)),o(`${$.name} ${Ke}${H}`)}else o(`${$.name} `);else if(ee==="pay_installment"||ee==="pay_installment_moderate")ge?At(Z,!1):G(Te=>Te.map(Ue=>Ue.id===Z?{...Ue,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,relation:he(28),peaceTreatyUntil:We}:Ue)),s.setPlayerInstallmentPayment({nationId:Z,amount:te,remainingDays:365,totalAmount:te*365,paidAmount:0}),o(` ${$.name}  ${te} ${te*365}${H}`);else if(ee==="offer_population"){if(y<te){o("");return}F(Te=>Math.max(-y+1,Te-te)),B(Te=>Math.max(1,Te-te)),ge?At(Z,!1):G(Te=>Te.map(Ue=>Ue.id===Z?{...Ue,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,population:(Ue.population||1e3)+te,relation:he(27),peaceTreatyUntil:We}:Ue)),o(` ${te}  ${$.name} ${H}`)}else if(ee==="pay_standard"||ee==="pay_high"||ee==="pay_moderate"){if((d.silver||0)<te){o("");return}c(Te=>({...Te,silver:(Te.silver||0)-te})),ge?At(Z,!1):G(Te=>Te.map(Ue=>Ue.id===Z?{...Ue,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,wealth:(Ue.wealth||0)+te,relation:he(ee==="pay_high"?25:30),peaceTreatyUntil:We}:Ue)),o(` ${te}  ${$.name} ${H}`)}},oa=(Z,ee,te={})=>{const $=be.find(oe=>oe.id===Z);if(!$)return;const{resource:ge,type:H}=te;if(!ge||!H)return;if(!Oe[ge]||Oe[ge].type==="virtual"||ge==="silver"){o("");return}const he=Oe[ge];if((he.unlockEpoch??0)>v){o(`${he.name} `);return}if(ee==="create"){const oe=A?.merchant||0,Ae=me.routes.length;if(oe>0&&Ae>=oe){o(`${oe}`);return}if($.isAtWar){o(` ${$.name} `);return}if(!($.openMarketUntil&&pe<$.openMarketUntil)){const Ke=$.relation||0,Mt=(la=>la>=80?4:la>=60?3:la>=40?2:la>=20?1:0)(Ke),ga=me.routes.filter(la=>la.nationId===Z).length;if(Mt===0){o(` ${$.name} ${Ke}20`);return}if(ga>=Mt){const la={0:"",1:"",2:"",3:"",4:""};o(` ${$.name} ${ga}/${Mt}${la[Mt]}`);return}}if(me.routes.some(Ke=>Ke.nationId===Z&&Ke.resource===ge&&Ke.type===H)){o("");return}const Te=dl(ge,$,pe);if(H==="export"){if(!Te.isShortage||Te.shortageAmount<=0){o(`${$.name}  ${he.name} `);return}}else if(H==="import"&&(!Te.isSurplus||Te.surplusAmount<=0)){o(`${$.name}  ${he.name} `);return}h(Ke=>({...Ke,routes:[...Ke.routes,{nationId:Z,resource:ge,type:H,createdAt:pe}]}));const Ue=H==="export"?"":"";o(`  ${he.name} ${Ue} ${$.name}`)}else if(ee==="cancel"){if(!me.routes.some(Le=>Le.nationId===Z&&Le.resource===ge&&Le.type===H)){o("");return}h(Le=>({...Le,routes:Le.routes.filter(We=>!(We.nationId===Z&&We.resource===ge&&We.type===H))}));const Ae=H==="export"?"":"";o(`  ${he.name} ${Ae} ${$.name}`)}},za=()=>{if(Pe)return;const Z=l1(s);Z&&(ne(Z),o(` ${Z.name}`),kr(er.EVENT),s.setPausedBeforeEvent(s.isPaused),s.setIsPaused(!0))},Ta=Z=>{if(console.log("[TRIGGER EVENT] Called with event:",Z),console.log("[TRIGGER EVENT] Current event:",Pe),Pe){console.log("[TRIGGER EVENT] Blocked: already have an event showing");return}console.log("[TRIGGER EVENT] Setting current event..."),ne(Z),o(` ${Z.name}`),kr(er.EVENT),s.setPausedBeforeEvent(s.isPaused),s.setIsPaused(!0),console.log("[TRIGGER EVENT] Event triggered successfully")},en=(Z,ee)=>{let te=Wd.find(ie=>ie.id===Z);if(!te&&Pe&&Pe.id===Z&&(te=Pe),!te)return;const $=Y?.approval||{},ge=Y?.stability||{},H=(ie,ct)=>typeof ie!="number"||Number.isNaN(ie)?ct:Math.min(.95,Math.max(0,ie)),he=(ie={})=>({approval:Array.isArray(ie.approval)?[...ie.approval]:[],stability:Array.isArray(ie.stability)?[...ie.stability]:[],resourceDemand:Array.isArray(ie.resourceDemand)?[...ie.resourceDemand]:[],stratumDemand:Array.isArray(ie.stratumDemand)?[...ie.stratumDemand]:[],buildingProduction:Array.isArray(ie.buildingProduction)?[...ie.buildingProduction]:[]}),oe=(ie={})=>{if(!ie||typeof R!="function")return;const ct=Object.entries(ie).filter(([,qe])=>typeof qe=="number"&&qe!==0);if(!ct.length)return;const Ve=Math.max(1,$.duration||30),Ce=H($.decayRate??.04,.04),nt=Date.now();R(qe=>{const _e=he(qe);return ct.forEach(([Dt,Rt])=>{_e.approval.push({id:`approval_${nt}_${Dt}_${Math.random()}`,stratum:Dt,currentValue:Rt,remainingDays:Ve,decayRate:Ce})}),_e})},Ae=ie=>{if(typeof ie!="number"||ie===0||typeof R!="function")return;const ct=Math.max(1,ge.duration||30),Ve=H(ge.decayRate??.04,.04),Ce=Date.now();R(nt=>{const qe=he(nt);return qe.stability.push({id:`stability_${Ce}_${Math.random()}`,currentValue:ie,remainingDays:ct,decayRate:Ve}),qe})},Le=Y?.resourceDemand||{duration:60,decayRate:.02},We=Y?.stratumDemand||{duration:60,decayRate:.02},Te=Y?.buildingProduction||{duration:45,decayRate:.025},Ue=(ie={})=>{if(!ie||typeof R!="function")return;const ct=Object.entries(ie).filter(([,qe])=>typeof qe=="number"&&qe!==0);if(!ct.length)return;const Ve=Math.max(1,Le.duration||60),Ce=H(Le.decayRate??.02,.02),nt=Date.now();R(qe=>({...qe,resourceDemand:[...qe?.resourceDemand||[],...ct.map(([_e,Dt])=>({id:`resourceDemand_${nt}_${_e}_${Math.random()}`,target:_e,currentValue:Dt,remainingDays:Ve,decayRate:Ce}))]}))},Ke=(ie={})=>{if(!ie||typeof R!="function")return;const ct=Object.entries(ie).filter(([,qe])=>typeof qe=="number"&&qe!==0);if(!ct.length)return;const Ve=Math.max(1,We.duration||60),Ce=H(We.decayRate??.02,.02),nt=Date.now();R(qe=>({...qe,stratumDemand:[...qe?.stratumDemand||[],...ct.map(([_e,Dt])=>({id:`stratumDemand_${nt}_${_e}_${Math.random()}`,target:_e,currentValue:Dt,remainingDays:Ve,decayRate:Ce}))]}))},Nt=(ie={})=>{if(!ie||typeof R!="function")return;const ct=Object.entries(ie).filter(([,qe])=>typeof qe=="number"&&qe!==0);if(!ct.length)return;const Ve=Math.max(1,Te.duration||45),Ce=H(Te.decayRate??.025,.025),nt=Date.now();R(qe=>({...qe,buildingProduction:[...qe?.buildingProduction||[],...ct.map(([_e,Dt])=>({id:`buildingProduction_${nt}_${_e}_${Math.random()}`,target:_e,currentValue:Dt,remainingDays:Ve,decayRate:Ce}))]}))},Mt=(ie={})=>{ie.resources&&c(Ve=>{const Ce={...Ve};return Object.entries(ie.resources).forEach(([nt,qe])=>{Ce[nt]=Math.max(0,(Ce[nt]||0)+qe)}),Ce}),ie.resourcePercent&&c(Ve=>{const Ce={...Ve};return Object.entries(ie.resourcePercent).forEach(([nt,qe])=>{const _e=Ce[nt]||0,Dt=Math.floor(_e*qe);Ce[nt]=Math.max(0,_e+Dt)}),Ce}),ie.population&&B(Ve=>Math.max(1,Ve+ie.population)),ie.populationPercent&&B(Ve=>{const Ce=Math.floor(Ve*ie.populationPercent);return Math.max(1,Ve+Ce)}),ie.stability&&(_(Ve=>Math.max(0,Math.min(100,Ve+ie.stability))),Ae(ie.stability)),ie.science&&c(Ve=>({...Ve,science:Math.max(0,(Ve.science||0)+ie.science)})),ie.approval&&(de(Ve=>{const Ce={...Ve};return Object.entries(ie.approval).forEach(([nt,qe])=>{Ce[nt]=Math.max(0,Math.min(100,(Ce[nt]||50)+qe))}),Ce}),oe(ie.approval)),ie.resourceDemandMod&&Ue(ie.resourceDemandMod),ie.stratumDemandMod&&Ke(ie.stratumDemandMod),ie.buildingProductionMod&&Nt(ie.buildingProductionMod);const ct=Ve=>{const Ce=be.filter(nt=>nt.visible!==!1);if(!Ce.length)return[];switch(Ve){case"random":return[Ce[Math.floor(Math.random()*Ce.length)]];case"all":return Ce;case"hostile":return Ce.filter(qe=>(qe.relation||50)<30);case"friendly":return Ce.filter(qe=>(qe.relation||50)>=60);case"strongest":return[Ce.reduce((qe,_e)=>(qe.wealth||0)>(_e.wealth||0)?qe:_e)];case"weakest":return[Ce.reduce((qe,_e)=>(qe.wealth||0)<(_e.wealth||0)?qe:_e)];default:const nt=Ce.find(qe=>qe.id===Ve);return nt?[nt]:[]}};if(ie.nationRelation){const Ve=ie.nationRelation.exclude||[];G(Ce=>{const nt=[...Ce];return Object.entries(ie.nationRelation).forEach(([qe,_e])=>{if(qe==="exclude")return;ct(qe).forEach(Rt=>{if(Ve.includes(Rt.id))return;const mt=nt.findIndex(Kt=>Kt.id===Rt.id);if(mt>=0){const Kt=nt[mt].relation||50;nt[mt]={...nt[mt],relation:Math.max(0,Math.min(100,Kt+_e))},o(` ${nt[mt].name} ${_e>0?"":""} ${Math.abs(_e)} `)}})}),nt})}if(ie.nationAggression&&G(Ve=>{const Ce=[...Ve];return Object.entries(ie.nationAggression).forEach(([nt,qe])=>{ct(nt).forEach(Dt=>{const Rt=Ce.findIndex(mt=>mt.id===Dt.id);if(Rt>=0){const mt=Ce[Rt].aggression||.5;Ce[Rt]={...Ce[Rt],aggression:Math.max(0,Math.min(1,mt+qe))}}})}),Ce}),ie.nationWealth&&G(Ve=>{const Ce=[...Ve];return Object.entries(ie.nationWealth).forEach(([nt,qe])=>{ct(nt).forEach(Dt=>{const Rt=Ce.findIndex(mt=>mt.id===Dt.id);if(Rt>=0){const mt=Ce[Rt].wealth||1e3;Ce[Rt]={...Ce[Rt],wealth:Math.max(0,mt+qe)}}})}),Ce}),ie.nationMarketVolatility&&G(Ve=>{const Ce=[...Ve];return Object.entries(ie.nationMarketVolatility).forEach(([nt,qe])=>{ct(nt).forEach(Dt=>{const Rt=Ce.findIndex(mt=>mt.id===Dt.id);if(Rt>=0){const mt=Ce[Rt].marketVolatility||.3;Ce[Rt]={...Ce[Rt],marketVolatility:Math.max(.1,Math.min(.8,mt+qe))}}})}),Ce}),ie.triggerWar){const Ve=ct(ie.triggerWar);if(Ve.length>0){const Ce=Ve[0];if(Ce.peaceTreatyUntil&&pe<Ce.peaceTreatyUntil){const nt=Ce.peaceTreatyUntil-pe;o(`  ${Ce.name}  ${nt} `)}else if(Ce.isAtWar)o(`  ${Ce.name} `);else if(G(nt=>nt.map(qe=>qe.id===Ce.id?{...qe,relation:0,isAtWar:!0,warScore:0,warStartDay:pe,warDuration:0,enemyLosses:0,peaceTreatyUntil:void 0}:qe)),o(` ${Ce.name} `),Ta){const nt=Kx(Ce,()=>{});Ta(nt)}}else{const nt={random:"",all:"",hostile:"",friendly:"",strongest:"",weakest:""}[ie.triggerWar]||ie.triggerWar;o(` ${nt}`)}}if(ie.triggerPeace){const Ve=ct(ie.triggerPeace);if(Ve.length>0){const Ce=Ve[0];G(nt=>nt.map(qe=>qe.id===Ce.id&&qe.isAtWar?{...qe,isAtWar:!1,warScore:0,warDuration:0,enemyLosses:0,peaceTreatyUntil:pe+365}:qe)),o(`  ${Ce.name} `)}}},ga=ee.effects||{},la=Array.isArray(ee.randomEffects)?ee.randomEffects:[],et=ie=>{if(!ie)return"";const ct=[];if(ie.resources&&Object.entries(ie.resources).forEach(([Ve,Ce])=>{const nt=bt(Ve);ct.push(`${nt}${Ce>0?"+":""}${Ce}`)}),ie.resourcePercent&&Object.entries(ie.resourcePercent).forEach(([Ve,Ce])=>{const nt=bt(Ve),qe=Math.round(Ce*100);ct.push(`${nt}${qe>0?"+":""}${qe}%`)}),ie.population&&ct.push(`${ie.population>0?"+":""}${ie.population}`),ie.populationPercent){const Ve=Math.round(ie.populationPercent*100);ct.push(`${Ve>0?"+":""}${Ve}%`)}if(ie.stability&&ct.push(`${ie.stability>0?"+":""}${ie.stability}`),ie.science&&ct.push(`${ie.science>0?"+":""}${ie.science}`),ie.approval&&Object.entries(ie.approval).forEach(([Ve,Ce])=>{const nt=ft(Ve);ct.push(`${nt}${Ce>0?"+":""}${Ce}`)}),ie.nationRelation&&ct.push(""),ie.nationAggression){const Ve=Object.values(ie.nationAggression).filter(Ce=>Ce!=="exclude");if(Ve.length>0){const Ce=Ve.reduce((qe,_e)=>qe+_e,0)/Ve.length,nt=Math.round(Ce*100);ct.push(`${nt>0?"+":""}${nt}%`)}}if(ie.nationWealth){const Ve=Object.values(ie.nationWealth).filter(Ce=>Ce!=="exclude");if(Ve.length>0){const Ce=Ve.reduce((nt,qe)=>nt+Math.abs(qe),0);ct.push(`${Ce>0?"":""}${Ce}`)}}if(ie.nationMarketVolatility){const Ve=Object.values(ie.nationMarketVolatility).filter(Ce=>Ce!=="exclude");if(Ve.length>0){const Ce=Ve.reduce((qe,_e)=>qe+_e,0)/Ve.length,nt=Math.round(Ce*100);ct.push(`${nt>0?"+":""}${nt}%`)}}return ie.resourceDemandMod&&Object.entries(ie.resourceDemandMod).forEach(([Ve,Ce])=>{const nt=bt(Ve),qe=Math.round(Ce*100);ct.push(`${nt}${qe>0?"+":""}${qe}%`)}),ie.stratumDemandMod&&Object.entries(ie.stratumDemandMod).forEach(([Ve,Ce])=>{const nt=ft(Ve),qe=Math.round(Ce*100);ct.push(`${nt}${qe>0?"+":""}${qe}%`)}),ie.buildingProductionMod&&Object.entries(ie.buildingProductionMod).forEach(([Ve,Ce])=>{const nt=Tn.find(Rt=>Rt.id===Ve),qe={gather:"",industry:"",civic:"",all:""},_e=nt?.name||qe[Ve]||Ve,Dt=Math.round(Ce*100);ct.push(`${_e}${Dt>0?"+":""}${Dt}%`)}),ie.triggerWar&&ct.push(""),ie.triggerPeace&&ct.push(""),ct.length>0?`${ct.join("")}`:""};Mt(ga),la.forEach(ie=>{const ct=typeof ie.chance=="number"?ie.chance:0;if(ct>0&&Math.random()<ct){Mt(ie.effects||{});const Ve=Math.round(ct*100),Ce=et(ie.effects);ie.description?o(` ${Ve}%${ie.description}${Ce}`):o(` ${Ve}%${Ce}`),ie.effects?.triggerWar&&o(" "),ie.effects?.triggerPeace&&o(" ")}else if(ct>0){const Ve=Math.round(ct*100);ie.description?o(` ${Ve}%${ie.description}`):o(` ${Ve}%`)}}),ee.callback&&typeof ee.callback=="function"&&ee.callback(),se(ie=>[{eventId:Z,eventName:te.name,optionId:ee.id,optionText:ee.text,timestamp:Date.now(),day:pe},...ie].slice(0,50)),o(`${ee.text}`),ne(null)},$n=(Z,ee,te)=>{const $=Q?.[ee];if(!$){console.warn("[REBELLION] No rebellion state for stratum:",ee);return}const ge=Fe[ee]?.name||ee,H=Object.values(C||{}).reduce((We,Te)=>We+(Te||0),0),he=H*.01,oe=Z1(Z,ee,$,C,he);(oe.updatedOrganization!==void 0||oe.pauseDays>0)&&ye(We=>{const Te=We?.[ee]||{},Ue=oe.updatedOrganization!==void 0?oe.updatedOrganization:Te.organization||0,Ke=ar(Ue),Nt=xo(Ke),Mt=Nt!==Te.phase;return{...We,[ee]:{...Te,organization:Ue,stage:Ke,phase:Nt,lastPhaseChange:Mt?pe:Te.lastPhaseChange||0,organizationPaused:oe.pauseDays?Math.max(oe.pauseDays,Te.organizationPaused||0):Te.organizationPaused||0}}});let Ae=null;const Le=(We,Te)=>{We.startsWith("arrest_")?o(""):We.startsWith("suppress_")&&(We==="suppress_mercy"?de(Ue=>({...Ue,[Te]:Math.min(100,(Ue[Te]||50)+10)})):We==="suppress_strict"&&(_(Ue=>Math.min(100,(Ue||50)+10)),de(Ue=>({...Ue,[Te]:Math.max(0,(Ue[Te]||50)-20)}))))};switch(Z){case"investigate":Ae=s1(ee,oe.success,oe.success?"":null,Le);break;case"arrest":if(Ae=i1(ee,oe.success,Le),!oe.success&&oe.playerLosses>0){const We=oe.playerLosses/Math.max(1,H);T(Te=>{const Ue={...Te};return Object.keys(Ue).forEach(Ke=>{const Nt=Math.ceil((Ue[Ke]||0)*We);Ue[Ke]=Math.max(0,(Ue[Ke]||0)-Nt)}),Ue})}break;case"suppress":if(Ae=r1(ee,oe.success,oe.playerLosses,oe.rebelLosses,Le),oe.playerLosses>0){const We=oe.playerLosses/Math.max(1,H);T(Te=>{const Ue={...Te};return Object.keys(Ue).forEach(Ke=>{const Nt=Math.ceil((Ue[Ke]||0)*We);Ue[Ke]=Math.max(0,(Ue[Ke]||0)-Nt)}),Ue})}oe.success&&te?.id&&G(We=>We.filter(Te=>Te.id!==te.id));break;case"appease":case"negotiate":case"bribe":oe.approvalChange&&oe.approvalChange>0&&de(We=>({...We,[ee]:Math.min(100,(We[ee]||50)+oe.approvalChange)})),o(`${oe.message}`);break;case"accept_war":o(`${ge}`);break;default:console.warn("[REBELLION] Unknown action:",Z)}Ae&&ne(Ae)},At=(Z,ee)=>{const te=be.find(he=>he.id===Z&&he.isRebelNation);if(!te)return;const $=te.rebellionStratum,ge=Fe[$]?.name||$,H=o1(te,ee,(he,oe)=>{he==="end_celebrate"?(_(Ae=>Math.min(100,(Ae||50)+15)),c(Ae=>({...Ae,culture:(Ae.culture||0)+50}))):he==="end_rebuild"?_(Ae=>Math.min(100,(Ae||50)+5)):he==="end_defeat"&&_(Ae=>Math.max(0,(Ae||50)-20))});if(G(he=>he.filter(oe=>oe.id!==Z)),ye(he=>{const oe=he?.[$]||{},Ae=ee?15:40,Le=ar(Ae);return{...he,[$]:{...oe,organization:Ae,stage:Le,phase:xo(Le),dissatisfactionDays:0,organizationPaused:0}}}),ee&&te.population>0){const he=Math.floor(te.population*.5);ke(oe=>({...oe,[$]:(oe[$]||0)+he})),o(`${he}${ge}`)}ne(H)};return{canUpgradeEpoch:vt,upgradeEpoch:we,buyBuilding:Ze,sellBuilding:pt,researchTech:xt,toggleDecree:jt,manualGather:le,recruitUnit:Ie,disbandUnit:K,cancelTraining:Be,launchBattle:ze,handleDiplomaticAction:$e,handleEnemyPeaceAccept:yt,handleEnemyPeaceReject:_t,handlePlayerPeaceProposal:It,handleTradeRouteAction:oa,triggerRandomEvent:za,triggerDiplomaticEvent:Ta,handleEventOption:en,setBattleResult:S,setBattleNotifications:W,addBattleNotification:Z=>{const ee={id:`battle_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,result:Z,timestamp:Date.now()};W(te=>[...te,ee])},dismissBattleNotification:Z=>{W(ee=>ee.filter(te=>te.id!==Z))},dismissAllBattleNotifications:()=>{W([])},handleRebellionAction:$n,handleRebellionWarEnd:At}};function Vd(){const[s,o]=L.useState(!0),[d,c]=L.useState(.5);L.useEffect(()=>{try{const x=localStorage.getItem("sound_settings");if(x){const y=JSON.parse(x);o(y.enabled!==!1),c(y.volume??.5)}}catch(x){console.warn("Failed to load sound settings:",x)}},[]);const m=L.useCallback((x,y)=>{try{localStorage.setItem("sound_settings",JSON.stringify({enabled:x,volume:y}))}catch(w){console.warn("Failed to save sound settings:",w)}},[]),b=L.useCallback(x=>{if(s)try{const y=kr(x);y&&y()}catch(y){console.warn(`Failed to play sound ${x}:`,y)}},[s]),g=L.useCallback(()=>{const x=!s;o(x),m(x,d)},[s,d,m]),v=L.useCallback(x=>{const y=Math.max(0,Math.min(1,x));c(y),m(s,y)},[s,m]);return{enabled:s,volume:d,playSound:b,toggleSound:g,setVolume:v,SOUND_TYPES:er}}const Cf={0:{name:"",primaryColor:"#d97706",secondaryColor:"#92400e",accentColor:"#fbbf24",bgGradient:"linear-gradient(135deg, #1a1410 0%, #2c1810 50%, #1a1410 100%)",bgColor:"#1a1410",surfaceColor:"rgba(34, 24, 14, 0.92)",surfaceAltColor:"rgba(61, 36, 21, 0.85)",surfaceMutedColor:"rgba(32, 22, 14, 0.7)",surfaceTranslucent:"rgba(32, 22, 14, 0.55)",textMutedColor:"rgba(254, 243, 199, 0.7)",bgPattern:"stone",textColor:"#fef3c7",borderColor:"rgba(217, 119, 6, 0.4)",glowColor:"rgba(217, 119, 6, 0.5)",metalHighlight:"rgba(251, 191, 36, 0.3)",shadowDepth:"0 4px 12px rgba(0, 0, 0, 0.5), 0 2px 6px rgba(217, 119, 6, 0.3)",atmosphere:"primitive",icon:""},1:{name:"",primaryColor:"#ea580c",secondaryColor:"#9a3412",accentColor:"#fb923c",bgGradient:"linear-gradient(135deg, #1c1410 0%, #2d1c10 50%, #1c1410 100%)",bgColor:"#1c1410",surfaceColor:"rgba(40, 22, 12, 0.92)",surfaceAltColor:"rgba(70, 30, 12, 0.85)",surfaceMutedColor:"rgba(38, 21, 12, 0.68)",surfaceTranslucent:"rgba(38, 21, 12, 0.52)",textMutedColor:"rgba(254, 215, 170, 0.7)",bgPattern:"bronze",textColor:"#fed7aa",borderColor:"rgba(234, 88, 12, 0.4)",glowColor:"rgba(234, 88, 12, 0.5)",metalHighlight:"rgba(251, 146, 60, 0.35)",shadowDepth:"0 4px 12px rgba(0, 0, 0, 0.5), 0 2px 6px rgba(205, 127, 50, 0.4)",atmosphere:"ancient",icon:""},2:{name:"",primaryColor:"#dc2626",secondaryColor:"#991b1b",accentColor:"#f87171",bgGradient:"linear-gradient(135deg, #1a1010 0%, #2c1010 50%, #1a1010 100%)",bgColor:"#1a1010",surfaceColor:"rgba(36, 14, 14, 0.92)",surfaceAltColor:"rgba(58, 18, 18, 0.85)",surfaceMutedColor:"rgba(34, 12, 12, 0.68)",surfaceTranslucent:"rgba(34, 12, 12, 0.52)",textMutedColor:"rgba(254, 202, 202, 0.75)",bgPattern:"marble",textColor:"#fecaca",borderColor:"rgba(220, 38, 38, 0.4)",glowColor:"rgba(220, 38, 38, 0.5)",metalHighlight:"rgba(248, 113, 113, 0.3)",shadowDepth:"0 6px 16px rgba(0, 0, 0, 0.6), 0 3px 8px rgba(220, 38, 38, 0.4)",atmosphere:"classical",icon:""},3:{name:"",primaryColor:"#6b21a8",secondaryColor:"#581c87",accentColor:"#a855f7",bgGradient:"linear-gradient(135deg, #14101a 0%, #1e1028 50%, #14101a 100%)",bgColor:"#14101a",surfaceColor:"rgba(24, 16, 34, 0.92)",surfaceAltColor:"rgba(36, 22, 50, 0.85)",surfaceMutedColor:"rgba(20, 14, 28, 0.68)",surfaceTranslucent:"rgba(20, 14, 28, 0.52)",textMutedColor:"rgba(243, 232, 255, 0.75)",bgPattern:"castle",textColor:"#f3e8ff",borderColor:"rgba(107, 33, 168, 0.4)",glowColor:"rgba(107, 33, 168, 0.5)",metalHighlight:"rgba(168, 85, 247, 0.35)",shadowDepth:"0 6px 16px rgba(0, 0, 0, 0.6), 0 3px 8px rgba(107, 33, 168, 0.4)",atmosphere:"medieval",icon:""},4:{name:"",primaryColor:"#1e3a5f",secondaryColor:"#0c2340",accentColor:"#d4a574",bgGradient:"linear-gradient(135deg, #0c1420 0%, #152238 50%, #0c1420 100%)",bgColor:"#0c1420",surfaceColor:"rgba(16, 28, 44, 0.92)",surfaceAltColor:"rgba(22, 40, 60, 0.85)",surfaceMutedColor:"rgba(14, 24, 38, 0.68)",surfaceTranslucent:"rgba(14, 24, 38, 0.52)",textMutedColor:"rgba(226, 232, 240, 0.75)",bgPattern:"compass",textColor:"#e2e8f0",borderColor:"rgba(30, 58, 95, 0.5)",glowColor:"rgba(212, 165, 116, 0.4)",metalHighlight:"rgba(212, 165, 116, 0.35)",shadowDepth:"0 6px 16px rgba(0, 0, 0, 0.6), 0 3px 8px rgba(30, 58, 95, 0.4)",atmosphere:"exploration",icon:""},5:{name:"",primaryColor:"#b8860b",secondaryColor:"#8b6914",accentColor:"#f0c14b",bgGradient:"linear-gradient(135deg, #1a1612 0%, #2c2418 50%, #1a1612 100%)",bgColor:"#1a1612",surfaceColor:"rgba(32, 26, 18, 0.92)",surfaceAltColor:"rgba(48, 38, 24, 0.85)",surfaceMutedColor:"rgba(28, 22, 16, 0.68)",surfaceTranslucent:"rgba(28, 22, 16, 0.52)",textMutedColor:"rgba(253, 246, 227, 0.78)",bgPattern:"book",textColor:"#fdf6e3",borderColor:"rgba(184, 134, 11, 0.45)",glowColor:"rgba(184, 134, 11, 0.5)",metalHighlight:"rgba(240, 193, 75, 0.35)",shadowDepth:"0 6px 16px rgba(0, 0, 0, 0.6), 0 3px 8px rgba(184, 134, 11, 0.4)",atmosphere:"enlightenment",icon:""},6:{name:"",primaryColor:"#52525b",secondaryColor:"#3f3f46",accentColor:"#a1a1aa",bgGradient:"linear-gradient(135deg, #18181b 0%, #27272a 50%, #18181b 100%)",bgColor:"#18181b",surfaceColor:"rgba(28, 28, 32, 0.92)",surfaceAltColor:"rgba(42, 42, 48, 0.85)",surfaceMutedColor:"rgba(24, 24, 28, 0.68)",surfaceTranslucent:"rgba(24, 24, 28, 0.52)",textMutedColor:"rgba(228, 228, 231, 0.8)",bgPattern:"gear",textColor:"#e4e4e7",borderColor:"rgba(82, 82, 91, 0.5)",glowColor:"rgba(161, 161, 170, 0.4)",metalHighlight:"rgba(161, 161, 170, 0.35)",shadowDepth:"0 8px 20px rgba(0, 0, 0, 0.7), 0 4px 10px rgba(82, 82, 91, 0.4)",atmosphere:"industrial",icon:""},7:{name:"",primaryColor:"#0891b2",secondaryColor:"#0e7490",accentColor:"#22d3ee",bgGradient:"linear-gradient(135deg, #0f1419 0%, #0c1a20 50%, #0f1419 100%)",bgColor:"#0f1419",surfaceColor:"rgba(16, 26, 32, 0.92)",surfaceAltColor:"rgba(20, 36, 44, 0.85)",surfaceMutedColor:"rgba(14, 22, 28, 0.68)",surfaceTranslucent:"rgba(14, 22, 28, 0.52)",textMutedColor:"rgba(207, 250, 254, 0.8)",bgPattern:"circuit",textColor:"#cffafe",borderColor:"rgba(8, 145, 178, 0.4)",glowColor:"rgba(34, 211, 238, 0.4)",metalHighlight:"rgba(34, 211, 238, 0.35)",atmosphere:"modern",icon:""}},Ac=s=>Cf[s]||Cf[0],tg=s=>{const o=Ac(s),d=document.documentElement;d.style.setProperty("--theme-primary",o.primaryColor),d.style.setProperty("--theme-secondary",o.secondaryColor),d.style.setProperty("--theme-accent",o.accentColor),d.style.setProperty("--theme-text",o.textColor),d.style.setProperty("--theme-text-muted",o.textMutedColor||"rgba(255, 255, 255, 0.75)"),d.style.setProperty("--theme-border",o.borderColor),d.style.setProperty("--theme-highlight",o.metalHighlight||o.accentColor),d.style.setProperty("--theme-glow",o.glowColor),d.style.setProperty("--theme-bg-gradient",o.bgGradient),d.style.setProperty("--theme-bg",o.bgColor||"#0f0a08"),d.style.setProperty("--theme-surface",o.surfaceColor||"rgba(34, 24, 14, 0.92)"),d.style.setProperty("--theme-surface-alt",o.surfaceAltColor||o.surfaceColor||"rgba(34, 24, 14, 0.85)"),d.style.setProperty("--theme-surface-muted",o.surfaceMutedColor||"rgba(34, 24, 14, 0.65)"),d.style.setProperty("--theme-surface-trans",o.surfaceTranslucent||"rgba(34, 24, 14, 0.5)"),d.style.setProperty("--theme-shadow",o.shadowDepth||"0 4px 12px rgba(0, 0, 0, 0.5)")},Ef={stone:`
    <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="stone-pattern" x="0" y="0" width="50" height="50" patternUnits="userSpaceOnUse">
          <circle cx="10" cy="10" r="2" fill="rgba(217, 119, 6, 0.1)" />
          <circle cx="30" cy="25" r="3" fill="rgba(217, 119, 6, 0.08)" />
          <circle cx="45" cy="15" r="2.5" fill="rgba(217, 119, 6, 0.09)" />
          <path d="M0 0 L10 10 M40 40 L50 50" stroke="rgba(217, 119, 6, 0.05)" stroke-width="1" />
        </pattern>
      </defs>
      <rect width="100" height="100" fill="url(#stone-pattern)" />
    </svg>
  `,bronze:`
    <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="bronze-pattern" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
          <path d="M10 10 L20 10 L20 0 M40 0 L40 10 L50 10" stroke="rgba(234, 88, 12, 0.1)" stroke-width="1.5" fill="none" />
          <circle cx="30" cy="30" r="1.5" fill="rgba(234, 88, 12, 0.12)" />
        </pattern>
      </defs>
      <rect width="100" height="100" fill="url(#bronze-pattern)" />
    </svg>
  `,marble:`
    <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="marble-pattern" x="0" y="0" width="80" height="80" patternUnits="userSpaceOnUse">
          <path d="M0 20 L80 20 M0 40 L80 40 M0 60 L80 60" stroke="rgba(220, 38, 38, 0.05)" stroke-width="1" />
          <path d="M20 0 L20 80 M40 0 L40 80 M60 0 L60 80" stroke="rgba(220, 38, 38, 0.05)" stroke-width="1" />
          <circle cx="40" cy="40" r="15" stroke="rgba(220, 38, 38, 0.08)" stroke-width="1" fill="none" />
        </pattern>
      </defs>
      <rect width="100" height="100" fill="url(#marble-pattern)" />
    </svg>
  `,castle:`
    <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="castle-pattern" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse">
          <rect x="0" y="30" width="10" height="10" fill="rgba(107, 33, 168, 0.08)" />
          <rect x="15" y="30" width="10" height="10" fill="rgba(107, 33, 168, 0.08)" />
          <rect x="30" y="30" width="10" height="10" fill="rgba(107, 33, 168, 0.08)" />
          <path d="M5 30 L5 20 M20 30 L20 20 M35 30 L35 20" stroke="rgba(107, 33, 168, 0.1)" stroke-width="1" />
        </pattern>
      </defs>
      <rect width="100" height="100" fill="url(#castle-pattern)" />
    </svg>
  `,compass:`
    <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="compass-pattern" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
          <circle cx="30" cy="30" r="20" stroke="rgba(30, 58, 95, 0.1)" stroke-width="1" fill="none" />
          <path d="M30 10 L30 50 M10 30 L50 30" stroke="rgba(30, 58, 95, 0.12)" stroke-width="1" />
          <path d="M30 30 L35 20 L30 25 L25 20 Z" fill="rgba(212, 165, 116, 0.15)" />
        </pattern>
      </defs>
      <rect width="100" height="100" fill="url(#compass-pattern)" />
    </svg>
  `,book:`
    <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="book-pattern" x="0" y="0" width="50" height="50" patternUnits="userSpaceOnUse">
          <rect x="10" y="10" width="20" height="30" stroke="rgba(184, 134, 11, 0.12)" stroke-width="1" fill="none" />
          <path d="M15 15 L25 15 M15 20 L25 20 M15 25 L25 25" stroke="rgba(184, 134, 11, 0.1)" stroke-width="0.5" />
        </pattern>
      </defs>
      <rect width="100" height="100" fill="url(#book-pattern)" />
    </svg>
  `,gear:`
    <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="gear-pattern" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
          <circle cx="30" cy="30" r="12" stroke="rgba(82, 82, 91, 0.15)" stroke-width="2" fill="none" />
          <circle cx="30" cy="30" r="6" fill="rgba(82, 82, 91, 0.1)" />
          <rect x="28" y="18" width="4" height="6" fill="rgba(161, 161, 170, 0.12)" />
          <rect x="28" y="36" width="4" height="6" fill="rgba(161, 161, 170, 0.12)" />
          <rect x="18" y="28" width="6" height="4" fill="rgba(161, 161, 170, 0.12)" />
          <rect x="36" y="28" width="6" height="4" fill="rgba(161, 161, 170, 0.12)" />
        </pattern>
      </defs>
      <rect width="100" height="100" fill="url(#gear-pattern)" />
    </svg>
  `,circuit:`
    <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="circuit-pattern" x="0" y="0" width="50" height="50" patternUnits="userSpaceOnUse">
          <path d="M0 25 L15 25 M35 25 L50 25 M25 0 L25 15 M25 35 L25 50" stroke="rgba(8, 145, 178, 0.12)" stroke-width="1" />
          <circle cx="25" cy="25" r="3" fill="rgba(34, 211, 238, 0.15)" />
          <rect x="13" y="23" width="4" height="4" fill="rgba(8, 145, 178, 0.12)" />
          <rect x="33" y="23" width="4" height="4" fill="rgba(8, 145, 178, 0.12)" />
        </pattern>
      </defs>
      <rect width="100" height="100" fill="url(#circuit-pattern)" />
    </svg>
  `},ag=s=>{const o=Ef[s]||Ef.stone;return`data:image/svg+xml,${encodeURIComponent(o.trim())}`};window.matchMedia("(prefers-reduced-motion: reduce)").matches;const ng=s=>(L.useEffect(()=>{tg(s);const o=Ac(s),d=ag(o.bgPattern);document.body.style.backgroundImage=`${o.bgGradient}, url("${d}")`,document.body.style.backgroundColor=o.bgColor||"#0f0a08",document.body.style.color=o.textColor||"",document.body.style.backgroundAttachment="fixed",document.body.style.backgroundSize="cover, 100px 100px";const c=document.querySelector('meta[name="theme-color"]');return c&&c.setAttribute("content",o.primaryColor),()=>{}},[s]),Ac(s));const sg=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ig=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(o,d,c)=>c?c.toUpperCase():d.toLowerCase()),Tf=s=>{const o=ig(s);return o.charAt(0).toUpperCase()+o.slice(1)},lh=(...s)=>s.filter((o,d,c)=>!!o&&o.trim()!==""&&c.indexOf(o)===d).join(" ").trim(),rg=s=>{for(const o in s)if(o.startsWith("aria-")||o==="role"||o==="title")return!0};var og={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const lg=L.forwardRef(({color:s="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:m="",children:b,iconNode:g,...v},x)=>L.createElement("svg",{ref:x,...og,width:o,height:o,stroke:s,strokeWidth:c?Number(d)*24/Number(o):d,className:lh("lucide",m),...!b&&!rg(v)&&{"aria-hidden":"true"},...v},[...g.map(([y,w])=>L.createElement(y,w)),...Array.isArray(b)?b:[b]]));const X=(s,o)=>{const d=L.forwardRef(({className:c,...m},b)=>L.createElement(lg,{ref:b,iconNode:o,className:lh(`lucide-${sg(Tf(s))}`,`lucide-${s}`,c),...m}));return d.displayName=Tf(s),d};const cg=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],dg=X("activity",cg);const ug=[["path",{d:"M12 6v16",key:"nqf5sj"}],["path",{d:"m19 13 2-1a9 9 0 0 1-18 0l2 1",key:"y7qv08"}],["path",{d:"M9 11h6",key:"1fldmi"}],["circle",{cx:"12",cy:"4",r:"2",key:"muu5ef"}]],pg=X("anchor",ug);const mg=[["path",{d:"M7 10H6a4 4 0 0 1-4-4 1 1 0 0 1 1-1h4",key:"1hjpb6"}],["path",{d:"M7 5a1 1 0 0 1 1-1h13a1 1 0 0 1 1 1 7 7 0 0 1-7 7H8a1 1 0 0 1-1-1z",key:"1qn45f"}],["path",{d:"M9 12v5",key:"3anwtq"}],["path",{d:"M15 12v5",key:"5xh3zn"}],["path",{d:"M5 20a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3 1 1 0 0 1-1 1H6a1 1 0 0 1-1-1",key:"1fi4x8"}]],fg=X("anvil",mg);const hg=[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"1qyhux"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]],xg=X("armchair",hg);const gg=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],yg=X("arrow-down-left",gg);const bg=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],vg=X("arrow-down",bg);const jg=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ng=X("arrow-right",jg);const wg=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],_g=X("arrow-up-right",wg);const Mg=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],kg=X("arrow-up",Mg);const Cg=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]],Eg=X("atom",Cg);const Tg=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Sg=X("award",Tg);const Ag=[["path",{d:"m14 12-8.381 8.38a1 1 0 0 1-3.001-3L11 9",key:"5z9253"}],["path",{d:"M15 15.5a.5.5 0 0 0 .5.5A6.5 6.5 0 0 0 22 9.5a.5.5 0 0 0-.5-.5h-1.672a2 2 0 0 1-1.414-.586l-5.062-5.062a1.205 1.205 0 0 0-1.704 0L9.352 5.648a1.205 1.205 0 0 0 0 1.704l5.062 5.062A2 2 0 0 1 15 13.828z",key:"19zklq"}]],Dg=X("axe",Ag);const Pg=[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]],Rg=X("battery",Pg);const zg=[["circle",{cx:"11",cy:"13",r:"9",key:"hd149"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95",key:"jp4j1b"}],["path",{d:"m22 2-1.5 1.5",key:"ay92ug"}]],$g=X("bomb",zg);const Og=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Bg=X("book-open",Og);const Lg=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Ug=X("book",Lg);const Wg=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Hg=X("bookmark",Wg);const qg=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],Vg=X("boxes",qg);const Gg=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Fg=X("briefcase",Gg);const Ig=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Yg=X("building-2",Ig);const Xg=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Zg=X("building",Xg);const Qg=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Jg=X("calendar",Qg);const Kg=[["path",{d:"M10 5V3",key:"1y54qe"}],["path",{d:"M14 5V3",key:"m6isi"}],["path",{d:"M15 21v-3a3 3 0 0 0-6 0v3",key:"lbp5hj"}],["path",{d:"M18 3v8",key:"2ollhf"}],["path",{d:"M18 5H6",key:"98imr9"}],["path",{d:"M22 11H2",key:"1lmjae"}],["path",{d:"M22 9v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9",key:"1rly83"}],["path",{d:"M6 3v8",key:"csox7g"}]],ey=X("castle",Kg);const ty=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],ay=X("chart-no-axes-column-increasing",ty);const ny=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],sy=X("check",ny);const iy=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ry=X("chevron-down",iy);const oy=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ly=X("chevron-left",oy);const cy=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],dy=X("chevron-right",cy);const uy=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],py=X("chevron-up",uy);const my=[["path",{d:"M10 9h4",key:"u4k05v"}],["path",{d:"M12 7v5",key:"ma6bk"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"m18 9 3.52 2.147a1 1 0 0 1 .48.854V19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-6.999a1 1 0 0 1 .48-.854L6 9",key:"flvdwo"}],["path",{d:"M6 21V7a1 1 0 0 1 .376-.782l5-3.999a1 1 0 0 1 1.249.001l5 4A1 1 0 0 1 18 7v14",key:"a5i0n2"}]],fy=X("church",my);const hy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xy=X("circle-alert",hy);const gy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],yy=X("circle-arrow-up",gy);const by=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vy=X("circle-check-big",by);const jy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ny=X("circle-question-mark",jy);const wy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],_y=X("circle-user",wy);const My=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ky=X("circle-x",My);const Cy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ey=X("circle",Cy);const Ty=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Sy=X("clipboard",Ty);const Ay=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Dy=X("clock",Ay);const Py=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],Ry=X("cloud-lightning",Py);const zy=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],$y=X("cloud-rain",zy);const Oy=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],By=X("cloud",Oy);const Ly=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Uy=X("code",Ly);const Wy=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Hy=X("coffee",Wy);const qy=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]],Vy=X("cog",qy);const Gy=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],Fy=X("coins",Gy);const Iy=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Yy=X("compass",Iy);const Xy=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Zy=X("copy",Xy);const Qy=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Jy=X("cpu",Qy);const Ky=[["path",{d:"M4 9a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h4a1 1 0 0 1 1 1v4a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-4a1 1 0 0 1 1-1h4a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-4a1 1 0 0 1-1-1V4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4a1 1 0 0 1-1 1z",key:"1xbrqy"}]],eb=X("cross",Ky);const tb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],ab=X("crosshair",tb);const nb=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],sb=X("crown",nb);const ib=[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]],rb=X("dices",ib);const ob=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],lb=X("dollar-sign",ob);const cb=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],db=X("download",cb);const ub=[["path",{d:"M10 11h.01",key:"d2at3l"}],["path",{d:"M14 6h.01",key:"k028ub"}],["path",{d:"M18 6h.01",key:"1v4wsw"}],["path",{d:"M6.5 13.1h.01",key:"1748ia"}],["path",{d:"M22 5c0 9-4 12-6 12s-6-3-6-12c0-2 2-3 6-3s6 1 6 3",key:"172yzv"}],["path",{d:"M17.4 9.9c-.8.8-2 .8-2.8 0",key:"1obv0w"}],["path",{d:"M10.1 7.1C9 7.2 7.7 7.7 6 8.6c-3.5 2-4.7 3.9-3.7 5.6 4.5 7.8 9.5 8.4 11.2 7.4.9-.5 1.9-2.1 1.9-4.7",key:"rqjl8i"}],["path",{d:"M9.1 16.5c.3-1.1 1.4-1.7 2.4-1.4",key:"1mr6wy"}]],pb=X("drama",ub);const mb=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],fb=X("droplet",mb);const hb=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],xb=X("droplets",hb);const gb=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],yb=X("earth",gb);const bb=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],vb=X("external-link",bb);const jb=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Nb=X("eye-off",jb);const wb=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_b=X("eye",wb);const Mb=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],kb=X("factory",Mb);const Cb=[["path",{d:"M10.827 16.379a6.082 6.082 0 0 1-8.618-7.002l5.412 1.45a6.082 6.082 0 0 1 7.002-8.618l-1.45 5.412a6.082 6.082 0 0 1 8.618 7.002l-5.412-1.45a6.082 6.082 0 0 1-7.002 8.618l1.45-5.412Z",key:"484a7f"}],["path",{d:"M12 12v.01",key:"u5ubse"}]],Eb=X("fan",Cb);const Tb=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z",key:"b19h5q"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z",key:"h7h5ge"}]],Sb=X("fast-forward",Tb);const Ab=[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]],Db=X("feather",Ab);const Pb=[["path",{d:"M4 3 2 5v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z",key:"1n2rgs"}],["path",{d:"M6 8h4",key:"utf9t1"}],["path",{d:"M6 18h4",key:"12yh4b"}],["path",{d:"m12 3-2 2v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z",key:"3ha7mj"}],["path",{d:"M14 8h4",key:"1r8wg2"}],["path",{d:"M14 18h4",key:"1t3kbu"}],["path",{d:"m20 3-2 2v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z",key:"dfd4e2"}]],Rb=X("fence",Pb);const zb=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$b=X("file-text",zb);const Ob=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Bb=X("flag",Ob);const Lb=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Ub=X("flame",Lb);const Wb=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 16.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 1 1 12 7.5a4.5 4.5 0 1 1 4.5 4.5 4.5 4.5 0 1 1-4.5 4.5",key:"14wa3c"}],["path",{d:"M12 7.5V9",key:"1oy5b0"}],["path",{d:"M7.5 12H9",key:"eltsq1"}],["path",{d:"M16.5 12H15",key:"vk5kw4"}],["path",{d:"M12 16.5V15",key:"k7eayi"}],["path",{d:"m8 8 1.88 1.88",key:"nxy4qf"}],["path",{d:"M14.12 9.88 16 8",key:"1lst6k"}],["path",{d:"m8 16 1.88-1.88",key:"h2eex1"}],["path",{d:"M14.12 14.12 16 16",key:"uqkrx3"}]],Hb=X("flower",Wb);const qb=[["path",{d:"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1",key:"3pnvol"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M12 10v12",key:"6ubwww"}],["path",{d:"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z",key:"9hd38g"}],["path",{d:"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z",key:"ufn41s"}]],Vb=X("flower-2",qb);const Gb=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],Fb=X("focus",Gb);const Ib=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Yb=X("funnel",Ib);const Xb=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],Zb=X("gauge",Xb);const Qb=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]],Jb=X("gavel",Qb);const Kb=[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]],e2=X("gem",Kb);const t2=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],a2=X("gift",t2);const n2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],s2=X("globe",n2);const i2=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],r2=X("graduation-cap",i2);const o2=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],l2=X("hammer",o2);const c2=[["path",{d:"M11 14h2a2 2 0 0 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16",key:"1v1a37"}],["path",{d:"m14.45 13.39 5.05-4.694C20.196 8 21 6.85 21 5.75a2.75 2.75 0 0 0-4.797-1.837.276.276 0 0 1-.406 0A2.75 2.75 0 0 0 11 5.75c0 1.2.802 2.248 1.5 2.946L16 11.95",key:"fhfbnt"}],["path",{d:"m2 15 6 6",key:"10dquu"}],["path",{d:"m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a1 1 0 0 0-2.75-2.91",key:"1x6kdw"}]],d2=X("hand-heart",c2);const u2=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],p2=X("hand",u2);const m2=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],f2=X("handshake",m2);const h2=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],x2=X("heart",h2);const g2=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],y2=X("history",g2);const b2=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],v2=X("hourglass",b2);const j2=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],N2=X("house",j2);const w2=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],_2=X("inbox",w2);const M2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],k2=X("info",M2);const C2=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],E2=X("landmark",C2);const T2=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],S2=X("layers",T2);const A2=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],D2=X("layout-grid",A2);const P2=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],R2=X("leaf",P2);const z2=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],$2=X("library",z2);const O2=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],B2=X("lightbulb",O2);const L2=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],U2=X("link",L2);const W2=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],H2=X("list",W2);const q2=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],V2=X("lock",q2);const G2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],F2=X("mail",G2);const I2=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Y2=X("map-pin",I2);const X2=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Z2=X("map",X2);const Q2=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],J2=X("maximize",Q2);const K2=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],e5=X("menu",K2);const t5=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],a5=X("message-circle",t5);const n5=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],s5=X("message-square",n5);const i5=[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]],r5=X("microscope",i5);const o5=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],l5=X("minimize",o5);const c5=[["path",{d:"M5 12h14",key:"1ays0h"}]],d5=X("minus",c5);const u5=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],p5=X("moon",u5);const m5=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],f5=X("mountain",m5);const h5=[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]],x5=X("music-2",h5);const g5=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],y5=X("music",g5);const b5=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Sf=X("navigation",b5);const v5=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],j5=X("newspaper",v5);const N5=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],w5=X("package",N5);const _5=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],M5=X("paintbrush",_5);const k5=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],C5=X("palette",k5);const E5=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],T5=X("pause",E5);const S5=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],A5=X("pencil",S5);const D5=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3L11 9.999",key:"1lw9ds"}],["path",{d:"M15.973 4.027A13 13 0 0 0 5.902 2.373c-1.398.342-1.092 2.158.277 2.601a19.9 19.9 0 0 1 5.822 3.024",key:"ffj4ej"}],["path",{d:"M16.001 11.999a19.9 19.9 0 0 1 3.024 5.824c.444 1.369 2.26 1.676 2.603.278A13 13 0 0 0 20 8.069",key:"8tj4zw"}],["path",{d:"M18.352 3.352a1.205 1.205 0 0 0-1.704 0l-5.296 5.296a1.205 1.205 0 0 0 0 1.704l2.296 2.296a1.205 1.205 0 0 0 1.704 0l5.296-5.296a1.205 1.205 0 0 0 0-1.704z",key:"hh6h97"}]],Af=X("pickaxe",D5);const P5=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],R5=X("play",P5);const z5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$5=X("plus",z5);const O5=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],B5=X("power",O5);const L5=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],U5=X("redo",L5);const W5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],H5=X("refresh-cw",W5);const q5=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],V5=X("rocket",q5);const G5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],F5=X("rotate-ccw",G5);const I5=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Y5=X("rotate-cw",I5);const X5=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Z5=X("save",X5);const Q5=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],J5=X("scale",Q5);const K5=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],ev=X("scroll-text",K5);const tv=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],av=X("scroll",tv);const nv=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],sv=X("search",nv);const iv=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],rv=X("send",iv);const ov=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],lv=X("settings",ov);const cv=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],dv=X("share",cv);const uv=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],pv=X("shield-alert",uv);const mv=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],fv=X("shield",mv);const hv=[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]],xv=X("ship",hv);const gv=[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]],yv=X("shirt",gv);const bv=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],vv=X("shopping-cart",bv);const jv=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],Nv=X("skull",jv);const wv=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],_v=X("sliders-vertical",wv);const Mv=[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]],kv=X("snowflake",Mv);const Cv=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ev=X("sparkles",Cv);const Tv=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Sv=X("square-pen",Tv);const Av=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Dv=X("square",Av);const Pv=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Rv=X("star",Pv);const zv=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],$v=X("sun",zv);const Ov=[["path",{d:"m11 19-6-6",key:"s7kpr"}],["path",{d:"m5 21-2-2",key:"1kw20b"}],["path",{d:"m8 16-4 4",key:"1oqv8h"}],["path",{d:"M9.5 17.5 21 6V3h-3L6.5 14.5",key:"pkxemp"}]],Bv=X("sword",Ov);const Lv=[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]],Uv=X("syringe",Lv);const Wv=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],Hv=X("swords",Wv);const qv=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Vv=X("table",qv);const Gv=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Fv=X("tag",Gv);const Iv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Yv=X("target",Iv);const Xv=[["path",{d:"M3.5 21 14 3",key:"1szst5"}],["path",{d:"M20.5 21 10 3",key:"1310c3"}],["path",{d:"M15.5 21 12 15l-3.5 6",key:"1ddtfw"}],["path",{d:"M2 21h20",key:"1nyx9w"}]],Zv=X("tent",Xv);const Qv=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],Jv=X("terminal",Qv);const Kv=[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]],e3=X("theater",Kv);const t3=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],a3=X("thumbs-down",t3);const n3=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],s3=X("thumbs-up",n3);const i3=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],r3=X("timer",i3);const o3=[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]],l3=X("tractor",o3);const c3=[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]],d3=X("tram-front",c3);const u3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],p3=X("trash-2",u3);const m3=[["path",{d:"M8 19a4 4 0 0 1-2.24-7.32A3.5 3.5 0 0 1 9 6.03V6a3 3 0 1 1 6 0v.04a3.5 3.5 0 0 1 3.24 5.65A4 4 0 0 1 16 19Z",key:"oadzkq"}],["path",{d:"M12 19v3",key:"npa21l"}]],f3=X("tree-deciduous",m3);const h3=[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]],x3=X("trees",h3);const g3=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],y3=X("trending-down",g3);const b3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],v3=X("trending-up",b3);const j3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],N3=X("triangle-alert",j3);const w3=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],_3=X("trophy",w3);const M3=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],k3=X("truck",M3);const C3=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],E3=X("type",C3);const T3=[["path",{d:"M12 13v7a2 2 0 0 0 4 0",key:"rpgb42"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M20.992 13a1 1 0 0 0 .97-1.274 10.284 10.284 0 0 0-19.923 0A1 1 0 0 0 3 13z",key:"124nyo"}]],S3=X("umbrella",T3);const A3=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],D3=X("undo",A3);const P3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],R3=X("upload",P3);const z3=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],$3=X("user-check",z3);const O3=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],B3=X("user-cog",O3);const L3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],U3=X("user-minus",L3);const W3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],H3=X("user-plus",W3);const q3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],V3=X("user",q3);const G3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],F3=X("users",G3);const I3=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],Y3=X("utensils-crossed",I3);const X3=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],Z3=X("vote",X3);const Q3=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],J3=X("waves",Q3);const K3=[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]],ej=X("wheat",K3);const tj=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],aj=X("wifi-off",tj);const nj=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],sj=X("wifi",nj);const ij=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],rj=X("wind",ij);const oj=[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]],lj=X("wine",oj);const cj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],dj=X("x",cj);const uj=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],pj=X("zap",uj);const mj=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],fj=X("zoom-in",mj);const hj=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],xj=X("zoom-out",hj),gj={Hammer:l2,Pickaxe:Af,Trees:x3,Wheat:ej,Anvil:fg,ScrollText:ev,Users:F3,Globe:s2,Activity:dg,Crown:sb,Swords:Hv,Handshake:f2,ArrowUpCircle:yy,Cpu:Jy,Home:N2,Settings:lv,Castle:ey,Tent:Zv,Landmark:E2,Factory:kb,Zap:pj,Trash2:p3,Scale:J5,BookOpen:Bg,Coins:Fy,Gavel:Jb,Shield:fv,Cross:eb,Briefcase:Fg,UserCog:B3,Play:R5,Pause:T5,FastForward:Sb,ArrowRight:Ng,TrendingUp:v3,TrendingDown:y3,Package:w5,Sparkles:Ev,ThumbsUp:s3,ThumbsDown:a3,X:dj,Target:Yv,Bomb:$g,Truck:k3,Plus:$5,Minus:d5,AlertTriangle:N3,Info:k2,Gift:a2,Lightbulb:B2,BarChart:ay,MessageSquare:s5,Eye:_b,Flag:Bb,Sword:Bv,UserCheck:$3,Clock:Dy,Check:sy,ArrowUp:kg,ArrowDown:vg,Calendar:Jg,Heart:x2,User:V3,Skull:Nv,Star:Rv,Leaf:R2,Coffee:Hy,Flame:Ub,Cog:Vy,Gem:e2,Mountain:f5,Boxes:Vg,Music2:x5,Navigation:Sf,Train:d3,Anchor:pg,Ship:xv,Book:Ug,Sliders:_v,Lock:V2,FileText:$b,Shirt:yv,ShieldAlert:pv,ShoppingCart:vv,ArrowUpRight:_g,Compass:Yy,Feather:Db,UtensilsCrossed:Y3,Armchair:xg,Wine:lj,ArrowDownLeft:yg,DollarSign:lb,XCircle:ky,HelpCircle:Ny,List:H2,Paintbrush:M5,Droplets:xb,Save:Z5,Download:db,Table:Vv,Building:Zg,Building2:Yg,Menu:e5,Axe:Dg,TreeDeciduous:f3,Music:y5,Tractor:l3,Horse:Sf,Crosshair:ab,CloudRain:$y,Globe2:yb,Waves:J3,Palette:C5,Theater:e3,Scroll:av,Fence:Rb,Newspaper:j5,GraduationCap:r2,HandHeart:d2,Vote:Z3,Drama:pb,Church:fy,Library:$2,Microscope:r5,Syringe:Uv,Pitchfork:Af,LayoutGrid:D2,Sun:$v,Wind:rj,Snowflake:kv,ChevronRight:dy,ChevronDown:ry,ChevronUp:py,ChevronLeft:ly,Upload:R3,RefreshCw:H5,Layers:S2,Moon:p5,Cloud:By,Umbrella:S3,Map:Z2,MapPin:Y2,Gauge:Zb,Rocket:V5,Atom:Eg,Wifi:sj,WifiOff:aj,Battery:Rg,Power:B5,Code:Uy,Terminal:Jv,Share:dv,RotateCcw:F5,RotateCw:Y5,Circle:Ey,Square:Dv,Copy:Zy,Clipboard:Sy,Pencil:A5,Edit:Sv,Type:E3,Link:U2,ExternalLink:vb,Bookmark:Hg,Tag:Fv,Award:Sg,Trophy:_3,Timer:r3,Hourglass:v2,History:y2,Search:sv,Filter:Yb,Maximize:J2,Minimize:l5,ZoomIn:fj,ZoomOut:xj,Focus:Fb,Hand:p2,EyeOff:Nb,Droplet:fb,Fan:Eb,CheckCircle:vy,AlertCircle:xy,MessageCircle:a5,Mail:F2,Inbox:_2,Send:rv,UserPlus:H3,UserMinus:U3,UserCircle:_y,Undo:D3,Redo:U5,Dices:rb,Flower:Hb,Flower2:Vb,CloudLightning:Ry},yj=s=>gj[s],j=({name:s,size:o=16,className:d})=>{const c=yj(s);return c?t.jsx(c,{size:o,className:d}):null},bj=({x:s,y:o,text:d,color:c,onComplete:m})=>(L.useEffect(()=>{const b=setTimeout(m,800);return()=>clearTimeout(b)},[m]),t.jsx("div",{className:`fixed pointer-events-none font-bold text-lg z-50 animate-float-up ${c}`,style:{left:s,top:o},children:d}));var Qn=Zf();const vj=5e3,jj=({notification:s,onView:o,onDismiss:d,autoDismissDelay:c=vj})=>{const[m,b]=L.useState(!1),[g,v]=L.useState(100),x=L.useRef(null),y=L.useRef(Date.now()),w=L.useRef(0),k=L.useRef(d),M=s.result;L.useEffect(()=>{k.current=d},[d]),L.useEffect(()=>{const D=s.id;if(m){w.current=Date.now()-y.current,x.current&&cancelAnimationFrame(x.current);return}y.current=Date.now()-w.current;const E=()=>{const S=Date.now()-y.current,q=Math.max(0,100-S/c*100);v(q),q>0?x.current=requestAnimationFrame(E):k.current(D)};return x.current=requestAnimationFrame(E),()=>{x.current&&cancelAnimationFrame(x.current)}},[m,c,s.id]);const z=M.losses||M.defenderLosses||{},C=Object.values(z).reduce((D,E)=>D+(E||0),0),T=()=>{if(M.isRaid){if(M.victory)return` ${M.nationName} `;{const D=[];return M.foodLoss>0&&D.push(`-${M.foodLoss}`),M.silverLoss>0&&D.push(`-${M.silverLoss}`),M.popLoss>0&&D.push(`-${M.popLoss}`),` ${M.nationName} ${D.length>0?`${D.join("")}`:""}`}}else return M.victory?` ${M.nationName||""} ${C>0?`${C}`:""}`:` ${M.nationName||""} ${C>0?`${C}`:""}`};return t.jsxs("div",{className:`relative flex items-center gap-2 px-3 py-2 rounded-lg border shadow-lg backdrop-blur-sm cursor-pointer transition-all duration-200 overflow-hidden ${M.victory?"bg-emerald-900/80 border-emerald-500/40 hover:bg-emerald-800/80":"bg-red-900/80 border-red-500/40 hover:bg-red-800/80"} ${m?"scale-[1.02]":""}`,onClick:()=>o(s),onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),children:[t.jsx("div",{className:`absolute bottom-0 left-0 h-0.5 transition-all ${M.victory?"bg-emerald-400/60":"bg-red-400/60"}`,style:{width:`${g}%`}}),t.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${M.victory?"bg-emerald-700/50":"bg-red-700/50"}`,children:t.jsx(j,{name:M.isRaid?M.victory?"Shield":"Flame":M.victory?"Trophy":"Skull",size:16,className:M.victory?"text-emerald-300":"text-red-300"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`text-xs font-bold ${M.victory?"text-emerald-200":"text-red-200"}`,children:M.isRaid?M.victory?"":"":M.victory?"":""}),!M.isRaid&&typeof M.score=="number"&&t.jsxs("span",{className:"px-1.5 py-0.5 text-[9px] rounded-full bg-ancient-ink/50 text-ancient-parchment",children:[" ",M.score.toFixed(0)]})]}),t.jsx("p",{className:"text-[11px] text-gray-200 truncate leading-tight mt-0.5",children:T()})]}),t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.jsx("button",{onClick:D=>{D.stopPropagation(),o(s)},className:"p-1.5 rounded-md hover:bg-white/10 transition-colors text-gray-300 hover:text-white",title:"",children:t.jsx(j,{name:"Eye",size:14})}),t.jsx("button",{onClick:D=>{D.stopPropagation(),d(s.id)},className:"p-1.5 rounded-md hover:bg-white/10 transition-colors text-gray-300 hover:text-white",title:"",children:t.jsx(j,{name:"X",size:14})})]})]})},Nj=({notifications:s=[],onViewDetail:o,onDismiss:d,onDismissAll:c})=>{if(!s||s.length===0)return null;const m=s.slice(-3),b=s.length-m.length;return Qn.createPortal(t.jsxs("div",{className:"fixed top-16 left-1/2 transform -translate-x-1/2 z-40 w-full max-w-md px-4 space-y-2 pointer-events-none",children:[b>0&&t.jsx("div",{className:"pointer-events-auto flex justify-center",children:t.jsxs("span",{className:"px-2 py-0.5 text-[10px] text-gray-400 bg-gray-800/60 rounded-full border border-gray-600/30",children:[" ",b," "]})}),m.map((g,v)=>t.jsx("div",{className:"pointer-events-auto animate-slide-down",style:{animationDelay:`${v*50}ms`},children:t.jsx(jj,{notification:g,onView:o,onDismiss:d})},g.id)),s.length>1&&t.jsx("div",{className:"pointer-events-auto flex justify-center pt-1",children:t.jsxs("button",{onClick:c,className:"px-3 py-1 text-[10px] text-gray-400 hover:text-white bg-gray-800/80 hover:bg-gray-700/80 rounded-full border border-gray-600/40 transition-colors",children:[" (",s.length,")"]})})]}),document.body)},wc=({position:s="top-left",size:o=24,className:d=""})=>{const c={"top-left":"top-0 left-0","top-right":"top-0 right-0 rotate-90","bottom-left":"bottom-0 left-0 -rotate-90","bottom-right":"bottom-0 right-0 rotate-180"};return t.jsxs("svg",{className:`absolute ${c[s]} ${d}`,width:o,height:o,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M2 2 L8 2 M2 2 L2 8 M2 2 L6 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",opacity:"0.6"}),t.jsx("path",{d:"M1 1 L1 10 M1 1 L10 1",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round",opacity:"0.3"})]})},Od=({opacity:s=.03,className:o=""})=>t.jsxs("svg",{className:`absolute inset-0 w-full h-full pointer-events-none ${o}`,style:{opacity:s},children:[t.jsx("defs",{children:t.jsxs("pattern",{id:"ancient-pattern",x:"0",y:"0",width:"100",height:"100",patternUnits:"userSpaceOnUse",children:[t.jsx("path",{d:"M0 20 L20 20 L20 0 M40 0 L40 20 L60 20 M60 40 L40 40 L40 60 M20 60 L20 40 L0 40",stroke:"currentColor",strokeWidth:"1",fill:"none",opacity:"0.5"}),t.jsx("circle",{cx:"10",cy:"10",r:"1",fill:"currentColor",opacity:"0.3"}),t.jsx("circle",{cx:"50",cy:"50",r:"1",fill:"currentColor",opacity:"0.3"}),t.jsx("circle",{cx:"90",cy:"90",r:"1",fill:"currentColor",opacity:"0.3"}),t.jsx("line",{x1:"0",y1:"0",x2:"20",y2:"20",stroke:"currentColor",strokeWidth:"0.5",opacity:"0.2"}),t.jsx("line",{x1:"80",y1:"80",x2:"100",y2:"100",stroke:"currentColor",strokeWidth:"0.5",opacity:"0.2"})]})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#ancient-pattern)",className:"text-amber-600"})]}),wj=({children:s,className:o="",variant:d="ancient"})=>{const c={ancient:"glass-ancient",epic:"glass-epic",monument:"glass-monument"};return t.jsxs("div",{className:`relative ${c[d]} rounded-xl p-6 ${o}`,children:[t.jsx(wc,{position:"top-left",className:"text-amber-500/60"}),t.jsx(wc,{position:"top-right",className:"text-amber-500/60"}),t.jsx(wc,{position:"bottom-left",className:"text-amber-500/60"}),t.jsx(wc,{position:"bottom-right",className:"text-amber-500/60"}),t.jsx(Od,{opacity:.02}),t.jsx("div",{className:"relative z-10",children:s})]})},_j=({gameState:s,taxes:o,netSilverPerDay:d,tradeStats:c={tradeTax:0},armyFoodNeed:m,onResourceDetailClick:b,onPopulationDetailClick:g,onStrataClick:v,onMarketClick:x,onEmpireSceneClick:y,gameControls:w})=>{const[M,z]=L.useState(!1),[C,T]=L.useState(!1),D=L.useRef(null),E=L.useRef(null),S=L.useRef(null),q=L.useRef(C),[W,be]=L.useState({top:0,left:0}),G=()=>{if(!D.current)return null;const Q=D.current.getBoundingClientRect();return{top:Q.bottom+8,left:Q.left+Q.width/2}},P=Sc(s.daysElapsed||0),pe=s.market?.prices?.food??(Oe.food?.basePrice||1),Pe=s.militaryWageRatio||1,ne=m*pe*Pe,ae=c?.tradeTax||0,se=o.breakdown?.policyIncome||0,je=o.breakdown?.policyExpense||0,de=d>=0?"text-green-300":"text-red-300",I=ae>=0?"text-emerald-300":"text-red-300",_=Qa[s.epoch]||Qa[0],B=Q=>Q>=1e6?(Q/1e6).toFixed(1)+"M":Q>=1e3?(Q/1e3).toFixed(1)+"K":Math.floor(Q).toString(),F=(Q=>({:{icon:"Leaf",color:"text-green-400"},:{icon:"Sun",color:"text-yellow-400"},:{icon:"Wind",color:"text-orange-400"},:{icon:"Snowflake",color:"text-blue-300"}})[Q]||{icon:"Calendar",color:"text-ancient-gold"})(P.season);L.useLayoutEffect(()=>{if(!M)return;const Q=()=>{const ye=G();ye&&be(ye)};return Q(),window.addEventListener("resize",Q),window.addEventListener("scroll",Q,!0),()=>{window.removeEventListener("resize",Q),window.removeEventListener("scroll",Q,!0)}},[M]),L.useEffect(()=>{q.current=C},[C]),L.useEffect(()=>()=>{S.current&&clearTimeout(S.current)},[]);const me=()=>{const Q=G();Q&&be(Q),z(!0)},h=()=>{z(!1)},A=()=>{T(Q=>{const ye=!Q;return ye?me():h(),ye})},Y=Q=>{if(S.current&&(clearTimeout(S.current),S.current=null),Q){me();return}q.current||(S.current=window.setTimeout(()=>{q.current||h()},150))},R=Q=>{if(E.current){const ye=E.current.getBoundingClientRect(),Ne=Q.clientX;if(Ne>=ye.left&&Ne<=ye.right){S.current&&(clearTimeout(S.current),S.current=null),M&&h(),C&&T(!1),b&&b("silver");return}}A()};return t.jsxs("header",{className:"relative overflow-visible",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-ancient-ink/95 via-ancient-stone/40 to-ancient-ink/95 backdrop-blur-md"}),t.jsx("div",{className:"absolute inset-0 animate-shimmer opacity-20",style:{backgroundImage:"linear-gradient(90deg, transparent 0%, rgba(212, 175, 55, 0.15) 50%, transparent 100%)",backgroundSize:"200% 100%"}}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-ancient-gold/50 to-transparent"}),t.jsx("div",{className:"status-bar-scroll max-w-[1920px] mx-auto px-2 sm:px-4 py-1.5 sm:py-2 relative z-10 overflow-x-auto overflow-y-visible cursor-grab active:cursor-grabbing select-none",style:{WebkitOverflowScrolling:"touch"},onMouseDown:Q=>{const ye=Q.currentTarget;ye.dataset.isDragging="true",ye.dataset.startX=Q.pageX-ye.offsetLeft,ye.dataset.scrollLeft=ye.scrollLeft},onMouseUp:Q=>{Q.currentTarget.dataset.isDragging="false"},onMouseLeave:Q=>{Q.currentTarget.dataset.isDragging="false"},onMouseMove:Q=>{const ye=Q.currentTarget;if(ye.dataset.isDragging!=="true")return;Q.preventDefault();const ke=(Q.pageX-ye.offsetLeft-parseFloat(ye.dataset.startX))*1.5;ye.scrollLeft=parseFloat(ye.dataset.scrollLeft)-ke},children:t.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-max",children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[t.jsxs("div",{className:"relative group",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-ancient-gold to-ancient-bronze rounded-lg blur-md opacity-40 group-hover:opacity-60 transition-opacity"}),t.jsx("div",{className:"relative bg-gradient-to-br from-ancient-gold/20 to-ancient-bronze/20 p-1.5 rounded-lg border border-ancient-gold/30 shadow-glow-gold",children:t.jsx(j,{name:"Globe",size:14,className:"text-ancient-gold"})})]}),t.jsxs("div",{className:"hidden sm:flex flex-col",children:[t.jsx("span",{className:"text-[11px] font-bold text-ancient-stone uppercase tracking-wider font-decorative",children:""}),t.jsxs("span",{className:"text-[10px] font-bold text-ancient flex items-center gap-1 font-decorative",children:[t.jsx("span",{children:_.icon||""}),_.name]})]}),t.jsxs("div",{className:"sm:hidden flex items-center gap-1",children:[t.jsx("span",{className:"text-sm",children:_.icon||""}),t.jsx("span",{className:"text-[10px] font-bold text-ancient-gold",children:_.name})]}),t.jsxs("button",{onClick:()=>{y&&y()},className:"relative group flex items-center gap-1.5 glass-ancient px-2 py-1 rounded-lg border border-ancient-gold/20 hover:border-ancient-gold/40 hover:shadow-glow-gold transition-all touch-feedback",children:[t.jsx(j,{name:F.icon,size:12,className:F.color}),t.jsx("div",{className:"text-[9px] sm:text-[10px] leading-tight",children:t.jsxs("span",{className:"font-bold text-ancient-parchment font-decorative",children:[P.year,"  ",P.season]})})]})]}),t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 justify-start sm:justify-center flex-shrink-0",children:[t.jsxs("div",{className:"relative flex items-center gap-0.5",children:[t.jsxs("button",{ref:D,onClick:R,onMouseEnter:()=>Y(!0),onMouseLeave:()=>Y(!1),className:"relative group flex items-center gap-1 sm:gap-1.5 glass-ancient px-2 sm:px-2.5 py-1 rounded-lg border border-ancient-gold/30 hover:border-ancient-gold/60 hover:shadow-glow-gold transition-all flex-shrink-0 overflow-hidden touch-feedback",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-ancient-gold/10 via-ancient-gold/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsxs("div",{ref:E,className:"flex items-center gap-1 sm:gap-1.5 relative z-10",children:[t.jsx("div",{className:"icon-epic-frame icon-frame-xs resource-icon-gold",children:t.jsx(j,{name:"Coins",size:10,className:"text-ancient-gold"})}),t.jsx("span",{className:"font-mono text-[11px] sm:text-xs font-bold text-ancient",children:B(s.resources.silver||0)})]}),t.jsxs("div",{className:`flex items-center gap-0.5 text-[9px] px-1 py-0.5 rounded ${d>=0?"bg-green-900/30":"bg-red-900/30"}`,children:[t.jsx(j,{name:d>=0?"TrendingUp":"TrendingDown",size:9,className:de}),t.jsxs("span",{className:`font-mono ${de}`,children:[d>=0?"+":"",d.toFixed(0)]})]})]}),M&&Qn.createPortal(t.jsx("div",{className:"pointer-events-none fixed inset-0",style:{zIndex:95},"aria-live":"polite",children:t.jsx("div",{className:"absolute pointer-events-none",style:{top:`${W.top}px`,left:`${W.left}px`,transform:"translateX(-50%)"},children:t.jsxs("div",{className:"pointer-events-auto w-72 glass-epic border border-ancient-gold/40 rounded-xl p-3 shadow-monument animate-slide-up",onMouseEnter:()=>Y(!0),onMouseLeave:()=>Y(!1),children:[t.jsxs("div",{className:"flex items-center justify-between text-[11px] text-ancient-parchment mb-2",children:[t.jsxs("span",{className:"font-bold flex items-center gap-1.5",children:[t.jsx(j,{name:"BarChart",size:12,className:"text-ancient-gold"})," ()"]}),t.jsx("button",{onClick:()=>z(!1),children:t.jsx(j,{name:"X",size:14,className:"text-ancient-stone hover:text-white"})})]}),t.jsxs("div",{className:"text-[10px] space-y-1.5",children:[t.jsxs("div",{className:"stat-item-compact",children:[t.jsx("span",{className:"text-ancient-stone",children:""}),t.jsxs("span",{className:"text-green-300 font-mono",children:["+",o.breakdown?.headTax?.toFixed(1)||"0"]})]}),t.jsxs("div",{className:"stat-item-compact",children:[t.jsx("span",{className:"text-ancient-stone",children:""}),t.jsxs("span",{className:"text-green-300 font-mono",children:["+",o.breakdown?.industryTax?.toFixed(1)||"0"]})]}),t.jsxs("div",{className:"stat-item-compact",children:[t.jsx("span",{className:"text-ancient-stone",children:""}),t.jsxs("span",{className:"text-green-300 font-mono",children:["+",o.breakdown?.businessTax?.toFixed(1)||"0"]})]}),t.jsxs("div",{className:"stat-item-compact",children:[t.jsx("span",{className:"text-ancient-stone",children:""}),t.jsxs("span",{className:`${I} font-mono`,children:[ae>=0?"+":"",ae.toFixed(1)]})]}),se>0&&t.jsxs("div",{className:"stat-item-compact",children:[t.jsx("span",{className:"text-ancient-stone",children:""}),t.jsxs("span",{className:"text-green-300 font-mono",children:["+",se.toFixed(1)]})]}),t.jsx("div",{className:"epic-divider"}),t.jsxs("div",{className:"stat-item-compact",children:[t.jsx("span",{className:"text-ancient-stone",children:""}),t.jsxs("span",{className:"text-red-300 font-mono",children:["-",ne.toFixed(1)]})]}),o.breakdown?.subsidy>0&&t.jsxs("div",{className:"stat-item-compact",children:[t.jsx("span",{className:"text-ancient-stone",children:""}),t.jsxs("span",{className:"text-red-300 font-mono",children:["-",o.breakdown.subsidy.toFixed(1)]})]}),je>0&&t.jsxs("div",{className:"stat-item-compact",children:[t.jsx("span",{className:"text-ancient-stone",children:""}),t.jsxs("span",{className:"text-red-300 font-mono",children:["-",je.toFixed(1)]})]}),t.jsx("div",{className:"epic-divider"}),t.jsxs("div",{className:"stat-item-compact bg-ancient-gold/10",children:[t.jsx("span",{className:"font-bold text-ancient-parchment",children:""}),t.jsxs("span",{className:`font-bold font-mono ${de}`,children:[d>=0?"+":"",d.toFixed(1)]})]})]})]})})}),document.body)]}),t.jsxs("button",{onClick:g,className:"relative group flex items-center gap-1 glass-ancient px-2 py-1 rounded-lg border border-blue-400/30 hover:border-blue-400/60 hover:shadow-glow transition-all flex-shrink-0 overflow-hidden touch-feedback",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-blue-400/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"icon-epic-frame icon-frame-xs",style:{borderColor:"rgba(96, 165, 250, 0.4)",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.08))"},children:t.jsx(j,{name:"Users",size:10,className:"text-blue-300"})}),t.jsxs("div",{className:"flex items-baseline gap-0.5 relative z-10",children:[t.jsx("span",{className:"font-mono text-[13px] font-bold text-blue-200",children:B(s.population)}),t.jsxs("span",{className:"text-[11px] font-bold text-ancient-gold",children:["/",B(s.maxPop)]})]})]}),t.jsxs("div",{className:"lg:hidden flex items-center gap-1",children:[t.jsxs("button",{onClick:v,className:"relative group flex items-center gap-1 glass-ancient px-2 py-1 rounded-lg border border-purple-400/40 hover:border-purple-300/60 transition-all flex-shrink-0 overflow-hidden touch-feedback",title:"",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/20 via-purple-400/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx(j,{name:"Crown",size:12,className:"text-purple-300 relative z-10"}),t.jsx("span",{className:"text-[9px] text-purple-200 font-semibold relative z-10",children:""})]}),t.jsxs("button",{onClick:x,className:"relative group flex items-center gap-1 glass-ancient px-2 py-1 rounded-lg border border-amber-400/40 hover:border-amber-300/60 transition-all flex-shrink-0 overflow-hidden touch-feedback",title:"",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500/20 via-amber-400/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx(j,{name:"Package",size:12,className:"text-amber-300 relative z-10"}),t.jsx("span",{className:"text-[9px] text-amber-200 font-semibold relative z-10",children:""})]})]})]}),w&&t.jsx("div",{className:"hidden lg:flex items-center flex-shrink-0",children:w})]})})]})},Mj={build:{label:"",icon:"Hammer",color:"from-amber-500 to-yellow-600",glow:"shadow-amber-500/40",text:"text-amber-400",border:"border-amber-500/50"},military:{label:"",icon:"Swords",color:"from-red-500 to-rose-600",glow:"shadow-red-500/40",text:"text-red-400",border:"border-red-500/50"},tech:{label:"",icon:"Cpu",color:"from-cyan-500 to-blue-600",glow:"shadow-cyan-500/40",text:"text-cyan-400",border:"border-cyan-500/50"},politics:{label:"",icon:"Gavel",color:"from-purple-500 to-violet-600",glow:"shadow-purple-500/40",text:"text-purple-400",border:"border-purple-500/50"},diplo:{label:"",icon:"Globe",color:"from-emerald-500 to-green-600",glow:"shadow-emerald-500/40",text:"text-emerald-400",border:"border-emerald-500/50"}},kj=({activeTab:s,onTabChange:o,epoch:d=0})=>{const c=Object.entries(Mj).map(([m,b])=>({id:m,...b}));return t.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-50 lg:hidden",role:"tablist","aria-label":"",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:[t.jsxs("div",{className:"absolute inset-0",children:[t.jsx("div",{className:"absolute inset-0 backdrop-blur-lg",style:{background:"linear-gradient(to top, var(--theme-background, rgb(17, 24, 39)) 0%, color-mix(in srgb, var(--theme-surface, rgb(31, 41, 55)) 95%, transparent) 50%, color-mix(in srgb, var(--theme-surface-alt, rgb(55, 65, 81)) 90%, transparent) 100%)"}}),t.jsx("div",{className:"absolute top-0 left-0 right-0 h-px",style:{background:"linear-gradient(to right, transparent, var(--theme-accent, rgb(212, 175, 55)) 50%, transparent)"}}),t.jsx("div",{className:"absolute top-[1px] left-0 right-0 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"}),t.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"repeating-linear-gradient(90deg, transparent, transparent 1px, rgba(255,255,255,0.03) 1px, rgba(255,255,255,0.03) 2px)"}})]}),t.jsx("div",{className:"relative max-w-lg mx-auto px-1",children:t.jsx("div",{className:"flex items-stretch justify-around h-14",children:c.map(m=>{const b=s===m.id;return t.jsxs("button",{type:"button",role:"tab","aria-label":m.label,"aria-selected":b,onClick:()=>o(m.id),className:`
                  relative flex flex-col items-center justify-center flex-1
                  transition-all duration-200 ease-out
                  ${b?"scale-105":"active:scale-95"}
                `,children:[b&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`absolute inset-x-1 top-1 bottom-1 rounded-lg bg-gradient-to-b ${m.color} opacity-15 blur-sm`}),t.jsx("div",{className:`absolute inset-x-1 top-1 bottom-1 rounded-lg bg-gradient-to-b ${m.color} opacity-20 border ${m.border}`}),t.jsx("div",{className:`absolute top-0 left-1/4 right-1/4 h-0.5 rounded-full bg-gradient-to-r ${m.color}`})]}),t.jsx("div",{className:`
                  relative z-10 p-1 rounded-md transition-all duration-200
                  ${b?"":"text-gray-500"}
                `,children:t.jsx(j,{name:m.icon,size:b?20:18,className:`transition-all duration-200 ${b?m.text:""}`})}),t.jsx("span",{className:`
                  relative z-10 text-[9px] font-bold mt-0.5 transition-all duration-200 tab-title
                  ${b?m.text:"text-gray-500"}
                `,children:m.label})]},m.id)})})})]})},Mr={overlay:"fixed inset-0 bg-ancient-ink/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",container:{base:"relative w-full max-w-2xl glass-epic border-2 border-ancient-gold/30 rounded-2xl shadow-metal-xl shadow-depth-xl flex flex-col max-h-[90vh]",sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"},header:"flex items-center justify-between p-4 border-b border-ancient-gold/20 flex-shrink-0",body:"flex-1 overflow-y-auto p-4",footer:"flex items-center justify-end gap-3 p-4 border-t border-ancient-gold/20 flex-shrink-0",closeButton:"p-2 rounded-lg hover:bg-ancient-gold/10 transition-colors text-ancient-stone hover:text-ancient-gold"},Cr=(...s)=>s.filter(Boolean).join(" "),Df=({isPaused:s,gameSpeed:o,onPauseToggle:d,onSpeedChange:c,onSave:m,onLoadManual:b,onLoadAuto:g,onSettings:v,onReset:x,onTutorial:y,onWiki:w,autoSaveAvailable:k,menuDirection:M="down",onTriggerEvent:z})=>{const[C,T]=L.useState(!1),[D,E]=L.useState(!1),[S,q]=L.useState(!1),[W,be]=L.useState(null),[G,P]=L.useState(null),pe=L.useRef(null),Pe=L.useRef(null),ne=L.useRef(null),ae=L.useRef(null),{playSound:se,SOUND_TYPES:je}=Vd(),de=(F,me="down")=>{if(!F)return null;const h=F.getBoundingClientRect(),A=8,Y=me==="up";return{top:Y?h.top-A:h.bottom+A,left:h.right,translateY:Y?"-100%":"0"}},I=()=>{if(!pe.current)return;const F=de(pe.current,M);F&&be(F)},_=()=>{if(!Pe.current)return;const F=de(Pe.current,M);F&&P(F)};L.useLayoutEffect(()=>{if(!C)return;I();const F=()=>I();return window.addEventListener("resize",F),window.addEventListener("scroll",F,!0),()=>{window.removeEventListener("resize",F),window.removeEventListener("scroll",F,!0)}},[C,M]),L.useLayoutEffect(()=>{if(!S)return;_();const F=()=>_();return window.addEventListener("resize",F),window.addEventListener("scroll",F,!0),()=>{window.removeEventListener("resize",F),window.removeEventListener("scroll",F,!0)}},[S,M]),L.useEffect(()=>{const F=me=>{const h=me.target;C&&!pe.current?.contains(h)&&!ne.current?.contains(h)&&(T(!1),E(!1)),S&&!Pe.current?.contains(h)&&!ae.current?.contains(h)&&q(!1)};return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[C,S]);const B=()=>{C?E(!1):I(),T(F=>!F)},re=()=>{S||_(),q(F=>!F)};return t.jsxs("div",{className:"game-controls flex items-stretch sm:items-center gap-0.5 sm:gap-1.5 h-8 sm:h-7",children:[t.jsxs("div",{className:"flex items-center h-full rounded-md sm:rounded-lg border border-ancient-gold/20 glass-ancient shadow-ancient",children:[t.jsxs("button",{onClick:()=>{se(je.CLICK),d()},className:Cr("h-full px-1.5 sm:px-2 transition-all flex items-center justify-center gap-1 text-[9px] sm:text-[10px] font-bold touch-feedback",s?"bg-green-500/10 border-r border-green-500/30 text-green-300 hover:bg-green-500/20":"bg-orange-500/10 border-r border-orange-500/30 text-orange-300 hover:bg-orange-500/20"),title:s?"":"",children:[t.jsx(j,{name:s?"Play":"Pause",size:10,className:"sm:w-3 sm:h-3 flex-shrink-0"}),t.jsx("span",{className:"hidden sm:inline",children:s?"":""})]}),t.jsx("div",{className:"flex items-center h-full",children:Hx.map((F,me)=>t.jsxs("button",{onClick:()=>{se(je.CLICK),c(F),s&&d()},disabled:s,className:Cr("h-full px-1.5 sm:px-2 text-[9px] sm:text-[10px] font-bold transition-all flex items-center justify-center touch-feedback",me>0&&"border-l border-ancient-gold/10",s?"text-ancient-stone/40 cursor-not-allowed":"hover:bg-ancient-gold/10",o===F&&!s?"bg-gradient-to-b from-ancient-gold/25 to-ancient-bronze/15 text-ancient-gold":s?"":"text-ancient-parchment/80"),title:s?"":`${F}`,children:[F,"x"]},F))})]}),t.jsxs("div",{className:"flex h-full",children:[t.jsx("button",{ref:pe,onClick:B,className:"h-full px-2 glass-ancient border border-ancient-gold/20 rounded-md sm:rounded-lg transition-all flex items-center justify-center text-ancient-parchment shadow-ancient hover:border-ancient-gold/40 hover:shadow-glow-gold touch-feedback",title:"",children:t.jsx(j,{name:"Menu",size:12,className:"sm:w-3.5 sm:h-3.5 text-ancient-gold"})}),C&&W&&Qn.createPortal(t.jsx("div",{className:"pointer-events-none fixed inset-0 z-40",children:t.jsx("div",{className:"absolute",style:{top:W.top,left:W.left,transform:`translate(-100%, ${W.translateY})`},children:t.jsxs("div",{ref:ne,className:Cr("relative w-40 rounded-lg border border-ancient-gold/30 glass-epic shadow-monument py-1 pointer-events-auto animate-slide-up",M==="up"?"origin-bottom-right":"origin-top-right"),children:[t.jsxs("button",{onClick:()=>{m(),T(!1)},className:"w-full flex items-center px-3 py-2 text-[10px] font-semibold text-green-300 hover:bg-ancient-gold/10 transition-colors rounded touch-feedback",children:[t.jsx(j,{name:"Save",size:12}),t.jsx("span",{className:"ml-2",children:""})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>E(!D),className:"w-full flex items-center justify-between px-3 py-2 text-[10px] font-semibold text-purple-300 hover:bg-ancient-gold/10 transition-colors rounded touch-feedback",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(j,{name:"Upload",size:12}),t.jsx("span",{className:"ml-2",children:""})]}),t.jsx(j,{name:D?"ChevronDown":"ChevronRight",size:10})]}),D&&t.jsxs("div",{className:Cr("absolute w-36 rounded-lg border border-ancient-gold/30 glass-epic shadow-monument py-1 animate-slide-up",M==="up"?"right-full bottom-0 mr-1 origin-bottom-right":"right-full top-0 mr-1 origin-top-right"),children:[t.jsxs("button",{onClick:()=>{b(),T(!1),E(!1)},className:"w-full flex items-center px-3 py-2 text-[10px] font-semibold text-ancient-parchment hover:bg-ancient-gold/10 transition-colors rounded touch-feedback",children:[t.jsx(j,{name:"Upload",size:10}),t.jsx("span",{className:"ml-2",children:""})]}),t.jsxs("button",{onClick:()=>{k&&(g(),T(!1),E(!1))},disabled:!k,className:Cr("w-full flex items-center justify-between px-3 py-2 text-[10px] font-semibold transition-colors rounded touch-feedback",k?"text-amber-300 hover:bg-ancient-gold/10":"text-ancient-stone/40 cursor-not-allowed"),children:[t.jsx("span",{className:"ml-2",children:""}),t.jsx(j,{name:"Clock",size:10})]})]})]}),t.jsxs("button",{onClick:()=>{v(),T(!1)},className:"w-full flex items-center px-3 py-2 text-[10px] font-semibold text-ancient-parchment hover:bg-ancient-gold/10 transition-colors rounded touch-feedback",children:[t.jsx(j,{name:"Settings",size:12}),t.jsx("span",{className:"ml-2",children:""})]}),t.jsx("div",{className:"my-1 h-px bg-gradient-to-r from-transparent via-ancient-gold/30 to-transparent mx-2"}),t.jsxs("button",{onClick:()=>{window.confirm("")&&(x(),T(!1))},className:"w-full flex items-center px-3 py-2 text-[10px] font-semibold text-red-300 hover:bg-red-500/10 transition-colors rounded touch-feedback",children:[t.jsx(j,{name:"RefreshCw",size:12}),t.jsx("span",{className:"ml-2",children:""})]})]})})}),document.body)]}),t.jsxs("div",{className:"flex h-full",children:[t.jsx("button",{ref:Pe,onClick:re,className:"h-full px-2 glass-ancient border border-blue-500/30 rounded-md sm:rounded-lg transition-all flex items-center justify-center text-blue-300 shadow-ancient hover:border-blue-500/50 hover:bg-blue-500/10 touch-feedback",title:"",children:t.jsx(j,{name:"HelpCircle",size:12,className:"sm:w-3.5 sm:h-3.5"})}),S&&G&&Qn.createPortal(t.jsx("div",{className:"pointer-events-none fixed inset-0 z-40",children:t.jsx("div",{className:"absolute",style:{top:G.top,left:G.left,transform:`translate(-100%, ${G.translateY})`},children:t.jsxs("div",{ref:ae,className:Cr("w-36 rounded-lg border border-ancient-gold/30 glass-epic shadow-monument py-1 pointer-events-auto animate-slide-up",M==="up"?"origin-bottom-right":"origin-top-right"),children:[t.jsxs("button",{onClick:()=>{y(),q(!1)},className:"w-full flex items-center px-3 py-2 text-[10px] font-semibold text-ancient-parchment hover:bg-ancient-gold/10 transition-colors rounded touch-feedback",children:[t.jsx(j,{name:"BookOpen",size:10}),t.jsx("span",{className:"ml-2",children:""})]}),t.jsxs("button",{onClick:()=>{w(),q(!1)},className:"w-full flex items-center px-3 py-2 text-[10px] font-semibold text-ancient-parchment hover:bg-ancient-gold/10 transition-colors rounded touch-feedback",children:[t.jsx(j,{name:"Book",size:10}),t.jsx("span",{className:"ml-2",children:""})]})]})})}),document.body)]})]})},ki=({isOpen:s,onClose:o,children:d,title:c,showHeader:m=!0,preventBackdropClose:b=!1,showCloseButton:g=!0,preventEscapeClose:v=!1})=>{const[x,y]=L.useState(!1);L.useEffect(()=>{if(v)return;const M=z=>{z.key==="Escape"&&w()};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[v]);const w=()=>{y(!0),setTimeout(()=>{o(),y(!1)},300)};if(!s)return null;const k=x?"animate-sheet-out":"animate-sheet-in";return Qn.createPortal(t.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center lg:items-center",role:"dialog","aria-modal":"true",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 animate-fade-in",onClick:b?void 0:w}),t.jsx("div",{className:`relative w-full max-w-2xl glass-epic border-t-2 lg:border-2 border-ancient-gold/30 rounded-t-2xl lg:rounded-2xl shadow-metal-xl flex flex-col max-h-[85vh] ${k} lg:animate-slide-up`,children:m?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex-shrink-0 p-4 border-b border-theme-border flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-bold text-white font-decorative",children:c}),g&&t.jsx("button",{onClick:w,className:"p-2 rounded-full hover:bg-gray-700",children:t.jsx(j,{name:"X",size:20,className:"text-gray-400"})})]}),t.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:d})]}):t.jsxs("div",{className:"relative flex-1 p-4 overflow-y-auto",children:[g&&t.jsx("button",{onClick:w,className:"absolute top-3 right-3 z-10 p-2 rounded-full bg-gray-900/50 hover:bg-gray-700/80 transition-colors",children:t.jsx(j,{name:"X",size:20,className:"text-gray-400"})}),d]})})]}),document.body)},Cj=(s,o)=>{if(s==="silver")return 1;const d=Oe[s]?.basePrice||1;return o?.prices?.[s]??d},Ws=(s={},o)=>Object.entries(s).reduce((d,[c,m])=>m?d+m*Cj(c,o):d,0),Ei=s=>`${Math.ceil(s)} `,Ed=({title:s,icon:o,children:d,className:c=""})=>t.jsxs("div",{className:`bg-gray-900/50 p-3 rounded-lg border border-gray-700/80 ${c}`,children:[t.jsxs("h4",{className:"text-xs font-semibold text-gray-300 mb-2 flex items-center gap-1.5 font-decorative",children:[t.jsx(j,{name:o,size:16}),s]}),t.jsx("div",{className:"space-y-1 text-xs",children:d})]}),Td=({label:s,value:o,valueClass:d="text-white"})=>t.jsxs("div",{className:"flex justify-between items-center py-0.5",children:[t.jsx("span",{className:"text-gray-300",children:s}),t.jsx("span",{className:`font-mono font-semibold ${d}`,children:o})]}),Ej=s=>s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e4?(s/1e3).toFixed(0)+"k":s>=1e3?(s/1e3).toFixed(1)+"k":Math.floor(s).toString(),Tj=({building:s,gameState:o,onBuy:d,onSell:c,taxPolicies:m,onUpdateTaxPolicies:b})=>{if(!s||!o)return null;const{resources:g,epoch:v,techsUnlocked:x,market:y,buildings:w,jobFill:k}=o,M=w[s.id]||0,[z,C]=L.useState(null),T=F=>!F||F==="silver"?1:y?.prices?.[F]??(Oe[F]?.basePrice||0),D=F=>{const me=Object.entries(F.output||{}).reduce((Y,[R,Q])=>Y+T(R)*Q,0),h=Object.entries(F.input||{}).reduce((Y,[R,Q])=>Y+T(R)*Q,0),A=Object.entries(F.jobs||{}).reduce((Y,[R,Q])=>Y+(y?.wages?.[R]||0)*Q,0);return me-h-A},E=F=>{const me=D(F);let h=0,A=1;return F.owner&&F.jobs?.[F.owner]&&(A=F.jobs[F.owner],h=(y?.wages?.[F.owner]||0)*A),(me+h)/A},S=F=>{const me=w[F.id]||0,h={};for(let A in F.baseCost)h[A]=Math.ceil(F.baseCost[A]*Math.pow(1.15,me));return h};D(s);const q=E(s),W=S(s),be=Ws(W,y),G=ho(s.output,v,x),P=ho(s.input,v,x),pe=Object.entries(W).every(([F,me])=>(g[F]||0)>=me),Pe=(g.silver||0)>=be,ne=pe&&Pe,ae=Ej(be),se=(s.jobs?.[s.owner]||0)*M,je=q*se,de=m?.businessTaxRates?.[s.id]??1,I=s.businessTaxBase??.1,_=I*de,B=F=>{C(F)},re=()=>{if(z===null||!b)return;const F=parseFloat(z),me=Number.isNaN(F)?1:F;b(h=>({...h,businessTaxRates:{...h?.businessTaxRates||{},[s.id]:me}})),C(null)};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-start gap-4 p-1",children:[t.jsx("div",{className:`flex-shrink-0 w-16 h-16 rounded-lg ${s.visual.color} flex items-center justify-center icon-metal-container icon-metal-container-lg`,children:t.jsx(j,{name:s.visual.icon,size:36,className:`${s.visual.text} icon-metal`})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-xl font-bold text-white font-decorative",children:s.name}),t.jsx("p",{className:"text-sm text-gray-300 mt-1",children:s.desc}),s.owner&&t.jsxs("div",{className:"mt-2 inline-flex items-center gap-1.5 text-xs text-yellow-200 bg-yellow-900/40 border border-yellow-600/40 rounded-full px-2.5 py-1",children:[t.jsx(j,{name:"User",size:12}),t.jsxs("span",{className:"font-semibold",children:[": ",Fe[s.owner]?.name||s.owner]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[t.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-lg border border-gray-700/80",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-1",children:""}),t.jsx("div",{className:"text-2xl font-bold text-white",children:M})]}),t.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-lg border border-gray-700/80",children:[t.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-gray-400 mb-1",children:[t.jsx("span",{children:""})," ",t.jsx(j,{name:"Coins",size:12,className:"text-yellow-400"})]}),t.jsx("div",{className:`text-2xl font-bold ${q>=0?"text-green-400":"text-red-400"}`,children:q.toFixed(2)}),t.jsx("div",{className:"text-[10px] text-gray-500 -mt-1",children:"()"})]}),t.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-lg border border-gray-700/80",children:[t.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-gray-400 mb-1",children:[t.jsx("span",{children:""})," ",t.jsx(j,{name:"Coins",size:12,className:"text-yellow-400"})]}),t.jsx("div",{className:`text-2xl font-bold ${je>=0?"text-green-400":"text-red-400"}`,children:je.toFixed(1)}),t.jsxs("div",{className:"text-[10px] text-gray-500 -mt-1",children:["( ",Math.round(se)," )"]})]})]}),b&&t.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-lg border border-gray-700/80",children:[t.jsxs("h4",{className:"text-xs font-semibold text-gray-300 mb-2 flex items-center gap-1.5 font-decorative",children:[t.jsx(j,{name:"Sliders",size:16,className:"text-yellow-400"}),""]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 items-center",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-[10px] text-gray-400 mb-0.5 leading-none",children:""}),t.jsx("input",{type:"text",inputMode:"decimal",step:"0.05",value:z??de,onChange:F=>B(F.target.value),onBlur:re,onKeyDown:F=>{F.key==="Enter"&&(re(),F.target.blur())},className:"w-full bg-gray-800/70 border border-gray-600 text-sm text-gray-200 rounded px-2 py-1 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-center",placeholder:""})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-[10px] text-gray-400 mb-0.5 leading-none",children:" ()"}),t.jsxs("div",{className:"bg-gray-800/50 rounded px-2 py-1.5 text-center",children:[t.jsxs("span",{className:`text-sm font-bold font-mono ${_>0?"text-yellow-300":_<0?"text-green-300":"text-gray-400"}`,children:[_<0?" ":"",Math.abs(_).toFixed(3)]}),t.jsx(j,{name:_>0?"TrendingUp":_<0?"TrendingDown":"Coins",size:12,className:`inline-block ml-1 ${_>0?"text-yellow-400":_<0?"text-green-400":"text-gray-500"}`})]})]})]}),t.jsxs("p",{className:"text-[10px] text-gray-500 mt-1.5",children:[" = (",I.toFixed(2),")  "]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(Object.keys(G).length>0||Object.keys(P).length>0)&&t.jsxs(Ed,{title:" ()",icon:"ArrowRightLeft",children:[Object.entries(G).map(([F,me])=>t.jsx(Td,{label:Oe[F]?.name||F,value:`+${me}`,valueClass:"text-green-400"},`out-${F}`)),Object.entries(P).map(([F,me])=>t.jsx(Td,{label:Oe[F]?.name||F,value:`-${me}`,valueClass:"text-red-400"},`in-${F}`)),Object.keys(G).length===0&&Object.keys(P).length===0&&t.jsx("p",{className:"text-gray-500 text-center text-xs",children:""})]}),s.jobs&&Object.keys(s.jobs).length>0&&t.jsx(Ed,{title:"",icon:"Users",children:Object.entries(s.jobs).map(([F,me],h)=>{const A=me*M,Y=k?.[s.id]?.[F]??0,R=Math.min(Y,A),Q=A>0?R/A*100:0,ye=y?.wages?.[F]||0;return t.jsxs("div",{className:h>0?"pt-2 mt-2 border-t border-gray-700/60":"",children:[t.jsxs("div",{className:"flex justify-between items-center text-xs mb-0.5",children:[t.jsx("span",{className:"text-gray-200 font-semibold",children:Fe[F]?.name||F}),t.jsxs("span",{className:"text-yellow-300 font-mono",children:[": ",ye.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between text-[11px] text-gray-400 mb-1",children:[t.jsxs("span",{children:[" ",me]}),t.jsxs("span",{children:[" ",Math.round(A)]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Q}%`}})}),t.jsxs("span",{className:"text-gray-300 font-mono text-[11px] w-20 text-right",children:[Math.round(R),"/",Math.round(A)]})]})]},F)})}),t.jsxs(Ed,{title:"",icon:"Hammer",className:"md:col-span-2",children:[t.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:Object.entries(W).map(([F,me])=>{const h=(g[F]||0)>=me;return t.jsx(Td,{label:Oe[F]?.name||F,value:`${me}`,valueClass:h?"text-green-400":"text-red-400"},F)})}),t.jsx("div",{className:"pt-2 mt-2 border-t border-gray-700/60",children:t.jsxs("div",{className:"flex justify-between items-center py-0.5",children:[t.jsxs("span",{className:"text-gray-300 flex items-center gap-1.5",children:[t.jsx(j,{name:"Coins",size:14,className:"text-yellow-400"})," "]}),t.jsx("span",{className:`font-mono font-semibold ${Pe?"text-green-400":"text-red-400"}`,children:Ei(be)})]})})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[t.jsxs("button",{onClick:()=>d&&d(s.id),disabled:!ne,className:"w-full px-4 py-3 rounded-lg text-xs sm:text-sm font-bold transition-all bg-green-600 hover:bg-green-500 text-white shadow-lg hover:shadow-green-500/30 disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed disabled:shadow-none flex items-center justify-center gap-2",children:[t.jsx(j,{name:"Plus",size:16}),t.jsxs("div",{className:"flex flex-col items-center sm:flex-row sm:items-center gap-0 sm:gap-1 leading-tight whitespace-nowrap sm:whitespace-normal",children:[t.jsx("span",{className:"tracking-wide",children:""}),t.jsxs("span",{className:"font-mono text-[11px] sm:text-sm opacity-90 flex items-center gap-0.5",children:[t.jsxs("span",{className:"inline-flex items-center gap-0.5 sm:hidden",children:[t.jsx(j,{name:"Coins",size:10,className:"text-yellow-300"}),ae]}),t.jsxs("span",{className:"hidden sm:inline-flex items-center gap-0.5",children:[t.jsx(j,{name:"Coins",size:12,className:"text-yellow-300"}),"(",Ei(be),")"]})]})]})]}),M>0&&t.jsxs("button",{onClick:()=>c&&c(s.id),className:"w-full px-4 py-3 bg-red-700 hover:bg-red-600 text-white rounded-lg text-sm font-bold transition-all shadow-lg hover:shadow-red-600/30 flex items-center justify-center gap-2",children:[t.jsx(j,{name:"Minus",size:16}),t.jsx("span",{children:""})]})]})]})},Sj=({isOpen:s,onClose:o,title:d,children:c,footer:m,size:b="md",showCloseButton:g=!0})=>s?t.jsx("div",{className:Mr.overlay,onClick:o,children:t.jsxs("div",{className:Cr(Mr.container.base,Mr.container[b]),onClick:v=>v.stopPropagation(),children:[t.jsxs("div",{className:Mr.header,children:[t.jsx("h3",{className:"text-lg font-bold text-ancient-gold font-decorative",children:d}),g&&t.jsx("button",{className:Mr.closeButton,onClick:o,children:t.jsx(j,{name:"X",size:20})})]}),t.jsx("div",{className:Mr.body,children:c}),m&&t.jsx("div",{className:Mr.footer,children:m})]})}):null,Pf=({resources:s,rates:o,market:d,epoch:c=0,onDetailClick:m,title:b="",showDetailedMobile:g=!1})=>{const[v,x]=L.useState("list"),y=C=>{const T=Math.floor(C);return T>=1e6?(T/1e6).toFixed(1)+"M":T>=1e4?(T/1e3).toFixed(0)+"k":T>=1e3?(T/1e3).toFixed(1)+"k":T.toString()},w=C=>{if(!d)return Oe[C]?.basePrice||1;const T=Oe[C]?.basePrice||1;return d.prices?.[C]??T},k=L.useMemo(()=>Object.entries(Oe).filter(([C,T])=>!(T.type==="virtual"||T.type==="currency"||typeof T.unlockEpoch=="number"&&T.unlockEpoch>c)),[c]),M=C=>C>0?{icon:"TrendingUp",color:"text-green-400"}:C<0?{icon:"TrendingDown",color:"text-red-400"}:{icon:"Minus",color:"text-ancient-stone/50"},z=C=>({food:"resource-icon-food",wood:"resource-icon-wood",stone:"resource-icon-stone",iron:"resource-icon-iron",silver:"resource-icon-gold"})[C]||"";return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between pb-1.5 border-b border-ancient-gold/20",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("div",{className:"icon-epic-frame icon-frame-xs",children:t.jsx(j,{name:"Package",size:12,className:"text-ancient-gold"})}),b&&t.jsx("span",{className:"text-[10px] font-bold text-ancient tracking-wide uppercase font-decorative",children:b})]}),t.jsxs("div",{className:"btn-group-compact",children:[t.jsx("button",{onClick:()=>x("grid"),className:v==="grid"?"active text-ancient-gold":"text-ancient-stone",title:"",children:t.jsx(j,{name:"LayoutGrid",size:10})}),t.jsx("button",{onClick:()=>x("list"),className:v==="list"?"active text-ancient-gold":"text-ancient-stone",title:"",children:t.jsx(j,{name:"List",size:10})})]})]}),v==="grid"&&t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-1.5",children:k.map(([C,T])=>{const D=s[C]||0,E=o[C]||0,S=w(C),q=M(E);return t.jsxs("button",{onClick:()=>m&&m(C),className:`relative group w-full min-w-0 p-2 rounded-lg transition-all touch-feedback card-epic-hover
                  bg-gradient-to-br from-ancient-ink/60 via-transparent to-ancient-ink/40
                  border border-ancient-gold/15 hover:border-ancient-gold/40
                  hover:shadow-glow-gold overflow-hidden`,title:`${T.name}: ${D.toFixed(0)} | : ${S.toFixed(2)} | : ${E>0?"+":""}${E.toFixed(1)}/`,children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-ancient-gold/0 via-ancient-gold/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[t.jsx("div",{className:`icon-epic-frame icon-frame-xs ${z(C)}`,children:t.jsx(j,{name:T.icon,size:12,className:T.color||"text-ancient-parchment"})}),t.jsx("span",{className:"text-[10px] font-semibold text-ancient-parchment truncate max-w-[50px]",children:T.name})]}),t.jsx(j,{name:q.icon,size:10,className:q.color})]}),t.jsx("div",{className:"text-sm font-bold font-mono text-ancient group-hover:text-ancient-gold transition-colors",children:y(D)}),t.jsxs("div",{className:"flex items-center justify-between gap-1 mt-1 font-bold text-[11px] min-w-0",children:[t.jsxs("span",{className:"text-ancient-stone flex items-center gap-0.5 min-w-0 truncate",children:[t.jsx(j,{name:"Coins",size:8,className:"text-ancient-gold/70"}),S.toFixed(1)]}),t.jsx("span",{className:`font-mono text-right ${E>0?"text-green-400":E<0?"text-red-400":"text-ancient-stone/50"}`,children:E!==0?`${E>0?"+":""}${E.toFixed(1)}`:"--"})]})]})]},C)})}),v==="list"&&t.jsx("div",{className:"space-y-1",children:g?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-[minmax(0,1fr)_minmax(48px,auto)_minmax(48px,auto)_minmax(52px,auto)] items-center gap-x-1 text-[9px] text-ancient-stone px-1.5 pb-1 opacity-70",children:[t.jsx("span",{children:""}),t.jsx("span",{className:"text-right",children:""}),t.jsx("span",{className:"text-right",children:""}),t.jsx("span",{className:"text-right",children:""})]}),k.map(([C,T])=>{const D=s[C]||0,E=o[C]||0,S=w(C),q=E!==0?`${E>0?"+":""}${E.toFixed(1)}`:"--",W=E>0?"text-green-400 group-hover:text-green-300":E<0?"text-red-400 group-hover:text-red-300":"text-ancient-stone opacity-50";return t.jsxs("button",{onClick:()=>m&&m(C),className:"w-full relative group grid grid-cols-[minmax(0,1fr)_minmax(48px,auto)_minmax(48px,auto)_minmax(52px,auto)] items-center gap-x-1 text-[10px] sm:text-xs p-1.5 rounded-lg transition-all cursor-pointer overflow-hidden border border-ancient-gold/10 hover:border-ancient-gold/30 hover:bg-ancient-gold/5 hover:shadow-glow-gold touch-feedback",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-ancient-gold/0 via-ancient-gold/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsxs("div",{className:"flex items-center gap-1 overflow-hidden relative z-10 min-w-0",children:[t.jsx("div",{className:`icon-epic-frame icon-frame-xs flex-shrink-0 ${z(C)}`,children:t.jsx(j,{name:T.icon,size:11,className:T.color||"text-ancient-parchment"})}),t.jsx("span",{className:"text-[12px] sm:text-[15px] text-ancient-parchment font-semibold truncate leading-tight group-hover:text-ancient",children:T.name})]}),t.jsx("span",{className:"font-mono font-bold text-ancient-parchment text-right relative z-10 group-hover:text-ancient text-[12px]",children:y(D)}),t.jsxs("div",{className:"flex items-center justify-end gap-0.5 font-mono text-ancient-stone font-bold text-[11px] sm:text-[13px] relative z-10 group-hover:text-ancient-gold",children:[t.jsx("span",{children:S.toFixed(1)}),t.jsx(j,{name:"Coins",size:8,className:"text-ancient-gold/70 flex-shrink-0"})]}),t.jsx("span",{className:`font-mono text-right relative z-10 transition-colors text-[9px] ${W}`,children:q})]},C)})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-[20px_1.3fr_1fr] xl:grid-cols-[20px_1.5fr_1fr_1fr_1fr] items-center gap-x-3 text-[12px] text-ancient-gold px-1.5 pb-1 opacity-70",children:[t.jsx("span",{className:"hidden xl:col-span-2 xl:inline pl-0.5 whitespace-nowrap overflow-hidden",children:""}),t.jsx("span",{className:"xl:hidden w-5"}),t.jsx("span",{className:"text-right whitespace-nowrap",children:""}),t.jsx("span",{className:"text-right whitespace-nowrap",children:""}),t.jsx("span",{className:"hidden xl:block text-right whitespace-nowrap",children:""})]}),k.map(([C,T])=>{const D=s[C]||0,E=o[C]||0,S=w(C),q=E!==0?`${E>0?"+":""}${E.toFixed(1)}`:"--",W=E>0?"text-green-400 group-hover:text-green-300":E<0?"text-red-400 group-hover:text-red-300":"text-ancient-stone opacity-50";return t.jsxs("button",{onClick:()=>m&&m(C),className:"w-full relative group grid grid-cols-[20px_1.3fr_1fr] xl:grid-cols-[20px_1.5fr_1fr_1fr_1fr] items-center gap-x-3 text-xs p-1.5 rounded-lg transition-all cursor-pointer overflow-hidden border border-ancient-gold/10 hover:border-ancient-gold/30 hover:bg-ancient-gold/5 hover:shadow-glow-gold touch-feedback",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-ancient-gold/0 via-ancient-gold/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:`icon-epic-frame icon-frame-xs flex-shrink-0 relative z-10 ${z(C)}`,children:t.jsx(j,{name:T.icon,size:11,className:T.color||"text-ancient-parchment"})}),t.jsx("div",{className:"hidden xl:flex flex-col gap-0.5 overflow-hidden relative z-10 min-w-0",children:t.jsx("span",{className:"text-[13px] text-ancient-parchment font-semibold truncate leading-tight group-hover:text-ancient text-left",children:T.name})}),t.jsx("span",{className:"font-mono font-bold text-ancient-parchment text-right relative z-10 group-hover:text-ancient text-[11px] whitespace-nowrap truncate tracking-tight",children:y(D)}),t.jsxs("div",{className:"flex items-center justify-end gap-0.5 font-mono text-ancient-parchment text-[11px] relative z-10 group-hover:text-ancient-gold whitespace-nowrap overflow-hidden",children:[t.jsx("span",{children:S.toFixed(1)}),t.jsx(j,{name:"Coins",size:8,className:"text-ancient-gold/70 flex-shrink-0"})]}),t.jsx("span",{className:`hidden xl:block font-mono text-right relative z-10 transition-colors text-[10px] truncate ${W}`,children:q})]},C)})]})}),t.jsx("div",{className:"epic-divider"}),t.jsx("div",{className:"flex items-center justify-between text-[9px] text-ancient-stone px-1",children:t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(j,{name:"Info",size:10,className:"text-ancient-gold/70"}),""]})})]})},Rf={production:{label:"",type:"percent"},industryBonus:{label:"",type:"percent"},stability:{label:"",type:"percent"},taxIncome:{label:"",type:"percent"},militaryPower:{label:"",type:"percent"},cultureBonus:{label:"",type:"percent"},scienceBonus:{label:"",type:"percent"}},Aj=(s,o)=>o==="flat"?`${s>0?"+":""}${s}`:`${s>0?"+":""}${(s*100).toFixed(0)}%`,nr=(s={})=>{const o=[];return Object.entries(Rf).forEach(([d,{label:c,type:m}])=>{typeof s[d]=="number"&&s[d]!==0&&o.push(`${c} ${Aj(s[d],m)}`)}),Object.entries(s).forEach(([d,c])=>{Rf[d]||["desc","class","source","name","description"].includes(d)||typeof c=="number"&&c!==0&&o.push(`${d} ${c>0?"+":""}${c}`)}),o},Dj=s=>{switch(s){case"Skull":return"";case"AlertTriangle":return"";case"UtensilsCrossed":return"";case"Home":return"";case"Gem":return"";case"Crown":return"";default:return""}},zf=({popStructure:s,classApproval:o,classInfluence:d,stability:c,activeBuffs:m=[],activeDebuffs:b=[],classWealth:g={},classWealthDelta:v={},classShortages:x={},classIncome:y={},classExpense:w={},classLivingStandard:k={},rebellionStates:M={},onDetailClick:z,dayScale:C=1,hideTitle:T=!1})=>{const D=Math.max(C,1e-4),E=W=>W>=70?"text-green-400":W>=40?"text-yellow-400":"text-red-400",S=L.useMemo(()=>Object.values(d||{}).reduce((W,be)=>W+(be||0),0),[d]),q=L.useMemo(()=>Object.entries(Fe).map(([W,be])=>{const G=s[W]||0,P=o[W]||50,pe=d[W]||0,Pe=S>0?pe/S*100:0,ne=g[W]??0,ae=(y[W]||0)/D,se=(w[W]||0)/D,je=ae/Math.max(G,1),de=se/Math.max(G,1),I=(v[W]||0)/D,_=I!=null?I/Math.max(G,1):je-de,B=x[W]||[],re=k[W];let F,me,h;if(re)F=re.icon,me=re.color,h=re.wealthRatio;else{const Je=G>0?ne/G:0,tt=be.startingWealth||10;h=tt>0?Je/tt:0;const bt=j1(h);F=bt.icon,me=bt.color}const A=M[W]||{},Y=A.organization??0,R=A.growthRate??0,Q=ar(Y),ye=ih(Q),Ne=sh(Q),ke=rh(Y,R);return{key:W,info:be,count:G,approval:P,influence:pe,influenceShare:Pe,wealthValue:ne,incomePerCapita:je,expensePerCapita:de,netIncomePerCapita:_,shortages:B,wealthRatio:h,livingStandardIcon:F,livingStandardColor:me,livingStandardData:re,organization:Y,growthRate:R,orgStage:Q,orgStageName:ye,orgStageIcon:Ne,daysToUprising:ke}}).filter(W=>W.count>0),[s,o,d,g,v,y,w,x,k,M,D,S]);return t.jsxs("div",{className:"glass-epic p-1.5 rounded-xl border border-ancient-gold/20 shadow-epic min-h-[460px] flex flex-col relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-ancient-ink/50 via-ancient-stone/20 to-ancient-ink/50 opacity-50"}),t.jsx("div",{className:"absolute inset-0 opacity-[0.02]",children:t.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("pattern",{id:"strata-pattern",x:"0",y:"0",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:t.jsx("circle",{cx:"20",cy:"20",r:"1",fill:"currentColor",className:"text-ancient-gold"})}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#strata-pattern)"})]})}),t.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[!T&&t.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-1 gap-1.5 flex-shrink-0",children:[t.jsxs("h3",{className:"text-xs font-bold text-ancient flex items-center gap-1.5 font-decorative",children:[t.jsx(j,{name:"Users",size:14,className:"text-ancient-gold"}),""]}),t.jsxs("div",{className:"flex items-center gap-0.5",children:[t.jsx(j,{name:"TrendingUp",size:12,className:c>=70?"text-green-400":c>=40?"text-yellow-400":"text-red-400"}),t.jsxs("span",{className:`text-[10px] font-bold ${c>=70?"text-green-400":c>=40?"text-yellow-400":"text-red-400"}`,children:[c.toFixed(0),"%"]})]})]}),T&&t.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-1.5 flex-shrink-0 bg-ancient-ink/30 rounded-lg px-2 py-1 border border-ancient-gold/20",children:[t.jsx("span",{className:"text-[10px] text-ancient-stone",children:""}),t.jsx(j,{name:"TrendingUp",size:12,className:c>=70?"text-green-400":c>=40?"text-yellow-400":"text-red-400"}),t.jsxs("span",{className:`text-[11px] font-bold ${c>=70?"text-green-400":c>=40?"text-yellow-400":"text-red-400"}`,children:[c.toFixed(0),"%"]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto pr-0.5 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800 hover:scrollbar-thumb-gray-500",style:{maxHeight:"calc(100vh - 520px)",minHeight:"300px"},children:[t.jsxs("div",{className:"md:hidden grid grid-cols-3 sm:grid-cols-4 gap-1.5",children:[q.map(W=>{const be=G=>G>=70?`linear-gradient(to right, rgba(34, 197, 94, 0.15) 0%, rgba(34, 197, 94, 0.15) ${G}%, rgba(31, 41, 55, 0.5) ${G}%, rgba(31, 41, 55, 0.5) 100%)`:G>=40?`linear-gradient(to right, rgba(234, 179, 8, 0.15) 0%, rgba(234, 179, 8, 0.15) ${G}%, rgba(31, 41, 55, 0.5) ${G}%, rgba(31, 41, 55, 0.5) 100%)`:`linear-gradient(to right, rgba(239, 68, 68, 0.15) 0%, rgba(239, 68, 68, 0.15) ${G}%, rgba(31, 41, 55, 0.5) ${G}%, rgba(31, 41, 55, 0.5) 100%)`;return t.jsx("div",{className:"relative rounded-lg overflow-hidden hover:scale-[1.02] transition-all cursor-pointer border border-ancient-gold/30 shadow-ancient hover:shadow-glow-gold backdrop-blur-sm",style:{background:be(W.approval)},onClick:()=>z&&z(W.key),children:t.jsxs("div",{className:"relative z-10 p-1",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[t.jsx("div",{className:"w-6 h-6 bg-ancient-ink/60 rounded flex items-center justify-center flex-shrink-0 border border-ancient-gold/20",children:t.jsx(j,{name:W.info.icon,size:12,className:"text-ancient-gold"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"text-[10px] font-bold text-ancient-parchment truncate leading-tight",children:W.info.name}),t.jsx("div",{className:"text-[8px] text-ancient-stone font-mono leading-none",children:W.count})]}),t.jsx("div",{className:"flex-shrink-0",children:t.jsx(j,{name:W.livingStandardIcon,size:10,className:`${W.livingStandardColor} drop-shadow-[0_0_2px_rgba(255,255,255,0.3)]`,title:`:  ${W.wealthRatio.toFixed(2)}x`})}),W.shortages.length>0&&t.jsx("div",{className:"flex-shrink-0",children:t.jsx(j,{name:"AlertTriangle",size:10,className:"text-red-400 animate-pulse drop-shadow-[0_0_3px_rgba(248,113,113,0.8)]"})})]}),t.jsx("div",{className:"bg-ancient-ink/60 rounded px-1 py-0.5 backdrop-blur-sm border border-ancient-gold/10",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[8px] text-ancient-stone leading-none",children:""}),t.jsxs("span",{className:`text-[9px] font-bold font-mono leading-none ${W.netIncomePerCapita>=0?"text-green-300":"text-red-300"}`,children:[W.netIncomePerCapita>=0?"+":"",W.netIncomePerCapita.toFixed(1)]})]})})]})},`grid-${W.key}`)}),q.length===0&&t.jsx("div",{className:"col-span-full text-center text-ancient-stone opacity-70 text-[10px] py-4",children:""})]}),t.jsx("div",{className:"hidden md:block space-y-1",children:q.map(({key:W,info:be,count:G,approval:P,influence:pe,influenceShare:Pe,wealthValue:ne,incomePerCapita:ae,expensePerCapita:se,netIncomePerCapita:je,shortages:de,wealthRatio:I,livingStandardIcon:_,livingStandardColor:B,organization:re,growthRate:F,orgStage:me,orgStageName:h,orgStageIcon:A,daysToUprising:Y})=>t.jsxs("div",{className:"glass-ancient p-1.5 rounded-lg hover:bg-ancient-gold/10 transition-all cursor-pointer border border-ancient-gold/20 hover:border-ancient-gold/40 hover:shadow-glow-gold",onClick:()=>z&&z(W),children:[t.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(j,{name:be.icon,size:10,className:"text-ancient-gold"}),t.jsx("span",{className:"text-[11px] font-semibold text-ancient-parchment",children:be.name}),t.jsxs("span",{className:"text-[9px] text-ancient-stone",children:[G,""]}),t.jsx(j,{name:_,size:10,className:`${B} drop-shadow-[0_0_2px_rgba(255,255,255,0.3)]`,title:`: ${Dj(_)} ( ${I.toFixed(2)}x)`}),re>0&&t.jsx(j,{name:A,size:10,className:`${re>=70?"text-red-500 animate-pulse":re>=30?"text-orange-400":"text-yellow-400"}`,title:`: ${re.toFixed(0)}% (${h})`})]}),t.jsx("div",{className:"flex items-center gap-1",children:t.jsxs("span",{className:`text-[9px] font-semibold font-mono ${E(P)}`,children:[P.toFixed(0),"%"]})})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-0.5 text-[8px] mb-0.5 bg-ancient-ink/30 px-1 py-0.5 rounded border border-ancient-gold/10",children:[t.jsxs("div",{className:"flex items-center gap-0.5",title:"",children:[t.jsx("span",{className:"text-ancient-stone",children:""}),t.jsxs("span",{className:"text-green-300 font-mono",children:["+",ae.toFixed(1)]})]}),t.jsxs("div",{className:"flex items-center gap-0.5 justify-center",title:"",children:[t.jsx("span",{className:"text-ancient-stone",children:""}),t.jsxs("span",{className:"text-red-300 font-mono",children:["-",se.toFixed(1)]})]}),t.jsxs("div",{className:"flex items-center gap-0.5 justify-end",title:"",children:[t.jsx("span",{className:"text-ancient-stone",children:""}),t.jsxs("span",{className:`font-mono ${je>=0?"text-green-300":"text-red-300"}`,children:[je>0?"+":"",je.toFixed(1)]})]})]}),t.jsx("div",{className:"mb-0.5",children:t.jsx("div",{className:"w-full bg-ancient-ink/50 rounded-full h-0.5 border border-ancient-gold/10",children:t.jsx("div",{className:`h-0.5 rounded-full transition-all ${P>=70?"bg-green-500":P>=40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${P}%`}})})}),re>5&&t.jsxs("div",{className:"mb-0.5",children:[t.jsxs("div",{className:"flex items-center gap-1 text-[7px] mb-0.5",children:[t.jsx("span",{className:"text-ancient-stone",children:""}),t.jsxs("span",{className:`font-mono ${re>=70?"text-red-400":re>=30?"text-orange-400":"text-yellow-400"}`,children:[re.toFixed(0),"%"]}),Y!==null&&Y<100&&t.jsxs("span",{className:"text-red-400 animate-pulse",children:["~",Y,""]})]}),t.jsx("div",{className:"w-full bg-ancient-ink/50 rounded-full h-1 border border-ancient-gold/10 overflow-hidden",children:t.jsx("div",{className:`h-1 rounded-full transition-all ${re>=90?"bg-red-500 animate-pulse":re>=70?"bg-orange-500":re>=30?"bg-yellow-500":"bg-gray-500"}`,style:{width:`${re}%`}})})]}),t.jsxs("div",{className:"flex items-center justify-between text-[8px]",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-ancient-stone",children:""}),t.jsxs("span",{className:"text-purple-400 font-semibold font-mono",children:[Pe.toFixed(1),"%"]})]}),t.jsxs("div",{className:"flex items-center gap-0.5",title:"",children:[t.jsx(j,{name:"Coins",size:8,className:"text-ancient-gold"}),t.jsx("span",{className:"text-ancient-parchment font-mono",children:ne.toFixed(0)})]})]}),de.length>0&&(()=>{const R=de.some(tt=>{const bt=typeof tt=="string"?"outOfStock":tt.reason;return bt==="outOfStock"||bt==="both"}),Q=de.some(tt=>{const bt=typeof tt=="string"?"outOfStock":tt.reason;return bt==="unaffordable"||bt==="both"});let ye="",Ne="AlertTriangle",ke="bg-red-900/30",Je="border-red-500/40";return R&&Q?(ye="&",Ne="XCircle",ke="bg-red-900/40",Je="border-red-600/50"):Q?(ye="",Ne="DollarSign",ke="bg-orange-900/30",Je="border-orange-500/40"):R&&(ye="",Ne="Package",ke="bg-red-900/30",Je="border-red-500/40"),t.jsxs("div",{className:`flex items-center gap-0.5 text-[8px] text-red-300 flex-wrap ${ke} border ${Je} rounded px-1 py-0.5 mt-0.5`,children:[t.jsx(j,{name:Ne,size:10,className:"text-red-400 animate-pulse"}),t.jsxs("span",{className:"text-red-200 font-semibold",children:[ye,":"]}),t.jsx("div",{className:"flex items-center gap-0.5 flex-wrap",children:de.map((tt,bt)=>{const ft=typeof tt=="string"?tt:tt.resource,vt=typeof tt=="string"?"outOfStock":tt.reason,we=Oe[ft];let Ze="AlertTriangle",pt="",xt="bg-red-800/60",jt="border-red-500/60";return vt==="unaffordable"?(Ze="DollarSign",pt="",xt="bg-orange-800/60",jt="border-orange-500/60"):vt==="outOfStock"?(Ze="Package",pt="",xt="bg-red-800/60",jt="border-red-500/60"):vt==="both"&&(Ze="XCircle",pt="",xt="bg-red-900/80",jt="border-red-600/80"),t.jsxs("span",{className:`px-0.5 py-0.5 ${xt} border ${jt} rounded flex items-center gap-0.5 animate-pulse`,title:`${we?.name||ft} ${pt}`,children:[t.jsx(j,{name:Ze,size:8,className:"text-red-200"}),t.jsx(j,{name:we?.icon||"HelpCircle",size:9,className:"text-red-200"}),t.jsx("span",{className:"text-red-100 font-medium text-[8px]",children:we?.name||ft})]},`${W}-${ft}-${bt}`)})})]})})()]},W))})]}),t.jsxs("div",{className:"mt-1 pt-1 border-t border-ancient-gold/20 flex-shrink-0",children:[t.jsxs("h4",{className:"text-[14px] font-bold text-ancient-stone mb-0.5 flex items-center gap-0.5 font-decorative",children:[t.jsx(j,{name:"Activity",size:10,className:"text-ancient-gold "}),""]}),t.jsxs("div",{className:"space-y-0.5 text-[12px] max-h-16 overflow-y-auto pr-0.5 scrollbar-thin scrollbar-thumb-ancient-gold/40 scrollbar-track-ancient-ink/30",children:[m.map((W,be)=>{const G=nr(W);return t.jsxs("div",{className:"text-green-400 leading-tight",children:[t.jsxs("div",{className:"flex items-center gap-0.5",children:[t.jsx(j,{name:"ArrowUp",size:8}),t.jsx("span",{className:"font-semibold",children:W.desc||""})]}),G.length>0&&t.jsx("div",{className:"text-ancient-parchment opacity-80 ml-2 text-[10px]",children:G.join("")})]},`buff-${be}`)}),b.map((W,be)=>{const G=nr(W);return t.jsxs("div",{className:"text-red-400 leading-tight",children:[t.jsxs("div",{className:"flex items-center gap-0.5",children:[t.jsx(j,{name:"ArrowDown",size:8}),t.jsx("span",{className:"font-semibold",children:W.desc||""})]}),G.length>0&&t.jsx("div",{className:"text-ancient-parchment opacity-70 ml-2 text-[10px]",children:G.join("")})]},`debuff-${be}`)}),m.length===0&&b.length===0&&t.jsx("span",{className:"text-ancient-stone opacity-60 text-[10px] italic",children:""})]})]}),t.jsx("div",{className:"mt-1 px-1.5 py-1 bg-ancient-ink/30 rounded-lg border border-ancient-gold/10 flex-shrink-0",children:t.jsxs("p",{className:"text-[8px] text-ancient-stone text-center flex items-center justify-center gap-1",children:[t.jsx(j,{name:"Info",size:8,className:"text-ancient-gold/60"}),""]})})]})]})},bo={crackdown:{id:"crackdown",name:"",icon:"Shield",description:"",detailedDescription:"",effectPreview:{organization:{value:-30,unit:"%",label:"",type:"immediate"},approval:{value:-20,unit:"",label:"",type:"immediate"},stability:{value:-10,unit:"%",label:"",type:"immediate"},population:{value:-5,unit:"%",label:"",type:"immediate"}},sideEffects:[{text:" -15",severity:"warning",icon:"Users"},{text:" -5",severity:"warning",icon:"Users"},{text:" -20%30",severity:"danger",icon:"AlertTriangle"},{text:" -15%20",severity:"danger",icon:"AlertOctagon"},{text:"5%",severity:"danger",icon:"Skull"}],usageHint:"(90%+)/",applicableStagesNames:["","","",""],forbiddenStrata:["soldier","knight"],cost:{silver:300},militaryCost:{approvalPenalty:{soldier:-15,knight:-15}},otherStrataApprovalPenalty:-5,effects:{organization:-30,approval:-20,stability:-10,populationLoss:.05},debuffs:[{id:"suppression_fatigue",name:"",description:" -20%",duration:30,effects:{militaryPower:-.2}},{id:"terror_atmosphere",name:"",description:" -15%",duration:20,effects:{production:-.15}}],cooldown:30,requirements:{minMilitaryPower:.3},applicableStages:["grumbling","mobilizing","radicalizing","uprising"]},divide:{id:"divide",name:"",icon:"GitBranch",description:"",detailedDescription:"",effectPreview:{targetOrganization:{value:-40,unit:"%",label:"",type:"immediate"},rivalOrganization:{value:20,unit:"%",label:"",type:"immediate"},rivalApproval:{value:-10,unit:"",label:"",type:"immediate"}},sideEffects:[{text:"",severity:"warning",icon:"TrendingUp"},{text:"",severity:"warning",icon:"ThumbsDown"}],usageHint:"",applicableStagesNames:["","",""],rivalPairsHint:{peasant:"",serf:"",worker:"",miner:"",lumberjack:"",merchant:"",artisan:"",soldier:"",knight:"",landowner:"",capitalist:""},cost:{culture:200,silver:500},effects:{targetOrganization:-40,rivalOrganization:20,rivalApproval:-10},cooldown:60,requirements:{hasRival:!0},applicableStages:["grumbling","mobilizing","radicalizing"]},bribe:{id:"bribe",name:"",icon:"Coins",description:"",detailedDescription:'""1050%',effectPreview:{approval:{value:15,unit:"",label:"",duration:"30"},organizationPause:{value:180,unit:"",label:"",type:"immediate"}},sideEffects:[{text:"50%",severity:"info",icon:"TrendingUp"},{text:"30180",severity:"info",icon:"Clock"}],usageHint:"",applicableStagesNames:["","",""],costCalculationHint:"  10  +50%",cost:{silverPerPop:10},effects:{approval:15,approvalDuration:30,organizationPause:180},cooldown:15,costMultiplier:1.5,applicableStages:["grumbling","mobilizing","radicalizing"]},promise:{id:"promise",name:"",icon:"FileText",description:"",detailedDescription:"20%50%",effectPreview:{organization:{value:-20,unit:"%",label:"",type:"immediate"},task:{label:"",duration:"30-180",type:"special"}},sideEffects:[{text:"",severity:"info",icon:"Zap"},{text:"",severity:"warning",icon:"Target"},{text:" +50%",severity:"danger",icon:"AlertOctagon"}],usageHint:"(360)",applicableStagesNames:["","",""],cost:null,effects:{organization:-20,generateTask:!0},failurePenalty:{organization:50},cooldown:90,applicableStages:["grumbling","mobilizing","radicalizing"]}};function ch(s,o,d){const c=bo[s];if(!c)return{available:!1,reason:""};const{resources:m,organizationStates:b,actionCooldowns:g={},population:v,popStructure:x,militaryPower:y}=d,w=b?.[o];if(!w)return{available:!1,reason:""};if(c.applicableStages&&!c.applicableStages.includes(w.stage))return{available:!1,reason:`${c.applicableStagesNames?.join("/")||c.applicableStages.join("/")}`};if(c.forbiddenStrata&&c.forbiddenStrata.includes(o))return{available:!1,reason:""};const k=`${s}_${o}`,M=g[k]||0;if(M>0)return{available:!1,reason:`${M}`};if(c.cost){if(c.cost.silver&&(m?.silver||0)<c.cost.silver)return{available:!1,reason:`${c.cost.silver}`};if(c.cost.culture&&(m?.culture||0)<c.cost.culture)return{available:!1,reason:`${c.cost.culture}`};if(c.cost.silverPerPop){const z=x?.[o]||0,C=c.cost.silverPerPop*z;if((m?.silver||0)<C)return{available:!1,reason:`${C}`}}}if(c.requirements){if(c.requirements.minMilitaryPower&&(y||0)<c.requirements.minMilitaryPower)return{available:!1,reason:""};if(c.requirements.hasRival){const z=qd(o);if(!x?.[z])return{available:!1,reason:""}}}return{available:!0}}function dh(s,o,d){const c=bo[s];if(!c||!c.cost)return{};const m={...c.cost};if(c.cost.silverPerPop){const b=d.popStructure?.[o]||0;m.silver=c.cost.silverPerPop*b,delete m.silverPerPop}if(c.costMultiplier){const b=d.actionUsage?.[`${s}_${o}`]||0,g=Math.pow(c.costMultiplier,b);m.silver&&(m.silver=Math.ceil(m.silver*g)),m.culture&&(m.culture=Math.ceil(m.culture*g))}return m}function Pj(s,o,d){const c=bo[s];if(!c)return{success:!1,message:""};const m=ch(s,o,d);if(!m.available)return{success:!1,message:m.reason};const b=dh(s,o,d),g=Fe[o]?.name||o,x=(d.organizationStates?.[o]||{}).resistance||0,y=Math.max(.2,1-x/100),w={success:!0,actionId:s,stratumKey:o,cost:b,effects:{resourceCost:b,organizationChanges:{},approvalChanges:{},stabilityChange:0,debuffs:c.debuffs||[],cooldown:c.cooldown,specialEffects:[],resistanceChange:15},message:""};if(c.effects.organization){const k=c.effects.organization,M=k<0?Math.ceil(k*y):k;w.effects.organizationChanges[o]=M}if(c.effects.approval){const k=c.effects.approval,M=k>0?Math.floor(k*y):k;w.effects.approvalChanges[o]={value:M,duration:c.effects.approvalDuration||0}}if(c.effects.stability&&(w.effects.stabilityChange=c.effects.stability),c.effects.organizationPause){const k=Math.ceil(c.effects.organizationPause*y);w.effects.specialEffects.push({type:"organizationPause",stratum:o,duration:k})}if(s==="divide"){const k=qd(o);w.effects.organizationChanges[k]=c.effects.rivalOrganization,w.effects.approvalChanges[k]={value:c.effects.rivalApproval,duration:0},w.effects.specialEffects.push({type:"divideEffect",target:o,rival:k})}return s==="promise"&&c.effects.generateTask&&(w.effects.specialEffects.push({type:"promiseTask",stratum:o,deadline:60,failurePenalty:c.failurePenalty}),w.effects.resistanceChange=10),c.militaryCost?.approvalPenalty&&Object.entries(c.militaryCost.approvalPenalty).forEach(([k,M])=>{w.effects.approvalChanges[k]||(w.effects.approvalChanges[k]={value:0,duration:0}),w.effects.approvalChanges[k].value+=M}),w.message=`${g}${c.name}`+(x>0?` (${x.toFixed(0)}%: ${((1-y)*100).toFixed(0)}%)`:""),w}function Rj(s,o,d){const c=bo[s];if(!c)return null;const m=ch(s,o,d),b=dh(s,o,d);return{id:c.id,name:c.name,icon:c.icon,description:c.description,detailedDescription:c.detailedDescription,effectPreview:c.effectPreview,sideEffects:c.sideEffects,usageHint:c.usageHint,applicableStagesNames:c.applicableStagesNames,costCalculationHint:c.costCalculationHint,rivalPairsHint:c.rivalPairsHint,failurePenalty:c.failurePenalty,cost:b,effects:c.effects,cooldown:c.cooldown,available:m.available,unavailableReason:m.reason,debuffs:c.debuffs,applicableStages:c.applicableStages}}function zj(s,o){return Object.keys(bo).map(d=>Rj(d,s,o))}function _c(s){return Oe[s]?.name||s}const Mc={TAX_RELIEF:"tax_relief",SUBSIDY:"subsidy",RESOURCE:"resource",POLITICAL:"political"},$j={[Mc.TAX_RELIEF]:{name:"",icon:"Percent",color:"text-yellow-400",bgColor:"bg-yellow-900/20",borderColor:"border-yellow-500/30",description:"",requirement:"100%10",failurePenalty:{organization:15,effect:"",description:" +15%"},duration:30},[Mc.SUBSIDY]:{name:"",icon:"Heart",color:"text-pink-400",bgColor:"bg-pink-900/20",borderColor:"border-pink-500/30",description:"",requirement:"5",failurePenalty:{organization:10,effect:"",description:" +10%"},duration:20},[Mc.RESOURCE]:{name:"",icon:"Package",color:"text-orange-400",bgColor:"bg-orange-900/20",borderColor:"border-orange-500/30",description:"",requirement:"30",failurePenalty:{organization:20,effect:"",description:" +20%"},duration:30},[Mc.POLITICAL]:{name:"",icon:"Flag",color:"text-purple-400",bgColor:"bg-purple-900/20",borderColor:"border-purple-500/30",description:"",requirement:"",failurePenalty:{organization:25,effect:"",description:" +25%"},duration:45}};function Oj(s,o){const d=[],c=o.classShortages?.[s]||[],m=o.classApproval?.[s]??50,b=Fe[s],g=o.classLivingStandard?.[s],v=typeof g=="object"&&g!==null?g.satisfactionRate??1:g??1,x=o.classInfluence?.[s]||0,y=o.totalInfluence||0,w=y>0?x/y:0,k=o.classIncome?.[s]||0,M=o.popStructure?.[s]||1,z=k/Math.max(M,1),C=b?.headTaxBase??0,T=o.taxPolicies?.headTaxRates?.[s]??1,D=C*T;let E=0;const S=o.taxPolicies?.resourceTaxRates||{},q=o.market||{},W=b?.needs||{};for(const[_,B]of Object.entries(W))if(B>0){const re=S[_]||0,F=q?.prices?.[_]||Oe[_]?.basePrice||1;E+=B*F*re}const be=D+E,G=z>0?be/z:0,P=c.filter(_=>_.reason==="unaffordable"),pe=c.filter(_=>_.reason==="outOfStock");if(G>.3){const _=Math.min(2,G*3),B=` ${Math.round(G*100)}%: ${D.toFixed(1)}: ${E.toFixed(1)}`;d.push({type:"tax",icon:"Percent",label:"",detail:B,contribution:_,severity:G>.5?"danger":"warning"})}const ne=b?.needs||{},ae=new Set(Object.keys(ne)),se=P.filter(_=>ae.has(_.resource)),je=P.filter(_=>!ae.has(_.resource)),de=pe.filter(_=>ae.has(_.resource)),I=pe.filter(_=>!ae.has(_.resource));if(se.length>0){const _=Math.min(1.5,se.length*.4);d.push({type:"unaffordable_basic",icon:"DollarSign",label:"",detail:`${se.length}`,contribution:_,severity:se.length>=2?"danger":"warning",resources:se.map(B=>_c(B.resource))})}if(je.length>=3){const _=Math.min(.5,je.length*.1);d.push({type:"unaffordable_luxury",icon:"Sparkles",label:"",detail:`${je.length}`,contribution:_,severity:"info",resources:je.slice(0,3).map(B=>_c(B.resource))})}if(de.length>0){const _=Math.min(2,de.length*.6);d.push({type:"outOfStock_basic",icon:"Package",label:"",detail:`${de.length}`,contribution:_,severity:de.length>=2?"danger":"warning",resources:de.map(B=>_c(B.resource))})}if(I.length>=4){const _=Math.min(.3,I.length*.05);d.push({type:"outOfStock_luxury",icon:"ShoppingBag",label:"",detail:`${I.length}`,contribution:_,severity:"info",resources:I.slice(0,3).map(B=>_c(B.resource))})}if(v<.7){const _=Math.min(1,(1-v)*1.5);d.push({type:"livingStandard",icon:"TrendingDown",label:"",detail:` ${Math.round(v*100)}%`,contribution:_,severity:v<.5?"danger":"warning"})}if(console.log(`[Demands] ${s}: influenceShare=${w.toFixed(3)}, approval=${m}, totalInfluence=${y}, influence=${x}`),w>.1&&m<40){const _=Math.min(1,w*2);d.push({type:"political",icon:"Flag",label:"",detail:` ${Math.round(w*100)}% ${Math.round(m)}`,contribution:_,severity:"warning"})}return d.sort((_,B)=>B.contribution-_.contribution),{sources:d,totalContribution:d.reduce((_,B)=>_+B.contribution,0),hasIssues:d.length>0}}function Bj(s,o){return s?Math.max(0,(s.deadline||0)-o):0}const Lj=({action:s,stratumKey:o,stratumName:d,disabled:c=!1,unavailableReason:m="",onExecute:b,popCount:g=0,actionUsage:v={}})=>{const[x,y]=L.useState(!1);if(!s)return null;const w=()=>{if(!s.cost)return"";const C=[];if(s.cost.silver&&C.push(`${s.cost.silver}`),s.cost.culture&&C.push(`${s.cost.culture}`),s.cost.silverPerPop){const T=`${s.id}_${o}`,D=v[T]||0,E=Math.pow(s.costMultiplier||1,D),S=Math.ceil(s.cost.silverPerPop*g*E);C.push(`${S}`)}return C.length>0?C.join(" + "):""},k=()=>{if(s.id==="divide"){const C=qd(o);return Fe[C]?.name||C}return null},M=()=>{y(!1),b&&b(s.id,o)},z=k();return t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>y(!0),className:`w-full p-2 rounded-lg border transition-all text-left ${c?"bg-gray-800/30 border-gray-700/50 opacity-50 cursor-not-allowed":"bg-gray-800/50 border-gray-600/50 hover:bg-gray-700/50 hover:border-gray-500/50"}`,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center ${c?"bg-gray-700/50":"bg-gray-700"}`,children:t.jsx(j,{name:s.icon,size:16,className:c?"text-gray-500":"text-gray-200"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`text-xs font-bold ${c?"text-gray-400":"text-white"}`,children:s.name}),s.cooldown>0&&t.jsxs("span",{className:"text-[8px] px-1 py-0.5 rounded bg-gray-700 text-gray-400",children:[s.cooldown," "]})]}),t.jsx("p",{className:"text-[9px] text-gray-400 truncate",children:s.description})]}),t.jsx(j,{name:"ChevronRight",size:14,className:"text-gray-500"})]})}),x&&Qn.createPortal(t.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",onClick:()=>y(!1),children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),t.jsxs("div",{className:"relative w-full max-w-sm bg-gray-800 rounded-2xl border border-gray-600 shadow-2xl overflow-hidden animate-slide-up",onClick:C=>C.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-gray-700 bg-gradient-to-r from-blue-900/40 to-gray-800/60",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-700 flex items-center justify-center",children:t.jsx(j,{name:s.icon,size:20,className:"text-white"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-sm font-bold text-white",children:s.name}),t.jsxs("p",{className:"text-[10px] text-gray-400",children:[" ",d]})]}),t.jsx("button",{onClick:()=>y(!1),className:"p-2 rounded-full hover:bg-white/10 transition-colors text-gray-400",children:t.jsx(j,{name:"X",size:16})})]}),t.jsxs("div",{className:"p-4 space-y-3",children:[t.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-3",children:[t.jsx("div",{className:"text-[10px] text-gray-400 mb-2",children:""}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.effectPreview&&Object.entries(s.effectPreview).map(([C,T])=>t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsxs("span",{className:`text-xs font-bold ${T.value>0?"text-green-400":T.value<0?"text-red-400":"text-blue-400"}`,children:[T.value>0?"+":"",T.value,T.unit||""]}),t.jsx("span",{className:"text-[9px] text-gray-500",children:T.label})]},C))})]}),s.id==="divide"&&z&&t.jsxs("div",{className:"text-[10px] text-purple-300 bg-purple-900/20 rounded p-2",children:[t.jsx(j,{name:"GitBranch",size:10,className:"inline mr-1"}),"",z]}),t.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[t.jsx("span",{className:"text-gray-400",children:""}),t.jsx("span",{className:"text-yellow-300 font-medium",children:w()})]}),s.sideEffects&&s.sideEffects.length>0&&t.jsxs("div",{className:"text-[9px] text-orange-300/80 flex items-start gap-1",children:[t.jsx(j,{name:"AlertTriangle",size:10,className:"mt-0.5 flex-shrink-0"}),t.jsx("span",{children:s.sideEffects.map(C=>C.text).join("")})]}),c&&m&&t.jsxs("div",{className:"text-[10px] text-red-400 bg-red-900/20 rounded p-2 flex items-center gap-1",children:[t.jsx(j,{name:"XCircle",size:12}),m]})]}),t.jsxs("div",{className:"p-4 border-t border-gray-700/50 bg-gray-900/50 flex gap-3",children:[t.jsx("button",{onClick:()=>y(!1),className:"flex-1 px-4 py-2.5 bg-gray-600 hover:bg-gray-500 text-white rounded-lg text-sm font-bold transition-colors",children:""}),t.jsxs("button",{onClick:M,disabled:c,className:`flex-1 px-4 py-2.5 rounded-lg text-sm font-bold transition-colors flex items-center justify-center gap-2 ${c?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500 text-white"}`,children:[t.jsx(j,{name:"Play",size:14}),""]})]})]})]}),document.body)]})},Uj=({sources:s=[],totalContribution:o=0,className:d=""})=>{if(!s||s.length===0)return t.jsx("div",{className:`bg-green-900/20 rounded-lg p-3 border border-green-500/30 ${d}`,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{name:"CheckCircle",size:16,className:"text-green-400"}),t.jsx("span",{className:"text-xs text-green-300",children:""})]})});const c=v=>{switch(v){case"danger":return{bg:"bg-red-900/30",border:"border-red-500/40",text:"text-red-300",icon:"text-red-400",bar:"bg-red-500"};case"warning":return{bg:"bg-orange-900/30",border:"border-orange-500/40",text:"text-orange-300",icon:"text-orange-400",bar:"bg-orange-500"};case"info":return{bg:"bg-gray-800/30",border:"border-gray-500/40",text:"text-gray-300",icon:"text-gray-400",bar:"bg-gray-500"};default:return{bg:"bg-yellow-900/30",border:"border-yellow-500/40",text:"text-yellow-300",icon:"text-yellow-400",bar:"bg-yellow-500"}}},m=v=>v>=1.5?"":v>=1?"":v>=.5?"":"",g=(v=>v>=3?{text:"",color:"text-red-400"}:v>=2?{text:"",color:"text-red-400"}:v>=1?{text:"",color:"text-orange-400"}:{text:"",color:"text-yellow-400"})(o);return t.jsxs("div",{className:`space-y-2 ${d}`,children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(j,{name:"BarChart2",size:14,className:"text-gray-400"}),t.jsx("span",{className:"text-xs font-bold text-gray-300",children:""})]}),t.jsxs("span",{className:"text-[10px] text-gray-400",children:[": ",t.jsx("span",{className:g.color,children:g.text})]})]}),t.jsx("div",{className:"space-y-1.5",children:s.map((v,x)=>{const y=c(v.severity),w=Math.min(100,v.contribution/2*100),k=m(v.contribution);return t.jsxs("div",{className:`rounded-lg p-2 border ${y.bg} ${y.border}`,children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{name:v.icon,size:14,className:y.icon}),t.jsxs("div",{children:[t.jsx("div",{className:`text-xs font-medium ${y.text}`,children:v.label}),t.jsx("div",{className:"text-[9px] text-gray-400",children:v.detail})]})]}),t.jsx("div",{className:"text-right",children:t.jsx("div",{className:`text-xs font-bold ${y.text}`,children:k})})]}),t.jsx("div",{className:"mt-1.5 h-1 bg-gray-700/50 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${y.bar}`,style:{width:`${w}%`}})}),v.resources&&v.resources.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1 mt-1.5",children:[v.resources.slice(0,4).map((M,z)=>t.jsx("span",{className:"text-[8px] px-1 py-0.5 rounded bg-gray-700/50 text-gray-400",children:M},z)),v.resources.length>4&&t.jsxs("span",{className:"text-[8px] text-gray-500",children:["+",v.resources.length-4]})]})]},x)})})]})},Wj=({demands:s=[],currentDay:o=0,className:d=""})=>{if(!s||s.length===0)return null;const c=g=>g>=.8?"bg-green-500":g>=.5?"bg-yellow-500":"bg-orange-500",m=(g,v)=>{const x=g/v;return x<=.25?"critical":x<=.5?"urgent":"normal"},b=g=>{switch(g){case"critical":return{border:"border-red-500/50",bg:"bg-red-900/20",timeText:"text-red-400",pulse:!0};case"urgent":return{border:"border-orange-500/40",bg:"bg-orange-900/20",timeText:"text-orange-400",pulse:!1};default:return{border:"border-gray-600/50",bg:"bg-gray-800/30",timeText:"text-gray-400",pulse:!1}}};return t.jsxs("div",{className:`space-y-2 ${d}`,children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(j,{name:"Scroll",size:14,className:"text-purple-400"}),t.jsx("span",{className:"text-xs font-bold text-gray-300",children:""}),t.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-purple-900/30 text-purple-300",children:s.length})]}),t.jsx("div",{className:"space-y-2",children:s.map((g,v)=>{const x=$j[g.type]||{},y=Bj(g,o),w=x.duration||30,k=m(y,w),M=b(k),z=g.currentProgress||0;return t.jsxs("div",{className:`rounded-lg border p-3 ${M.border} ${M.bg} ${M.pulse?"animate-pulse":""}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${x.bgColor||"bg-gray-700"}`,children:t.jsx(j,{name:x.icon||"HelpCircle",size:16,className:x.color||"text-gray-400"})}),t.jsxs("div",{children:[t.jsx("div",{className:`text-xs font-bold ${x.color||"text-gray-300"}`,children:x.name||g.type}),t.jsx("div",{className:"text-[9px] text-gray-400",children:x.description})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:`text-xs font-bold ${M.timeText}`,children:[" ",y," "]}),k==="critical"&&t.jsxs("div",{className:"text-[9px] text-red-400 flex items-center gap-0.5 justify-end",children:[t.jsx(j,{name:"AlertTriangle",size:10}),""]})]})]}),t.jsx("div",{className:"bg-gray-900/40 rounded p-2 mb-2",children:t.jsxs("div",{className:"text-[10px] text-gray-400",children:[t.jsx("span",{className:"font-bold text-gray-300",children:""}),g.requirement||x.requirement]})}),t.jsxs("div",{className:"mb-2",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"text-[9px] text-gray-400",children:""}),t.jsxs("span",{className:"text-[9px] text-gray-300",children:[Math.round(z*100),"%"]})]}),t.jsx("div",{className:"h-1.5 bg-gray-700/50 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${c(z)}`,style:{width:`${z*100}%`}})})]}),t.jsx("div",{className:"bg-red-900/20 rounded p-2 border border-red-500/30",children:t.jsxs("div",{className:"flex items-start gap-1.5",children:[t.jsx(j,{name:"AlertOctagon",size:12,className:"text-red-400 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-[9px] text-red-300 font-bold",children:""}),t.jsx("div",{className:"text-[9px] text-red-400",children:g.failurePenalty?.description||x.failurePenalty?.description})]})]})}),g.missingResources&&g.missingResources.length>0&&t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"text-[9px] text-gray-400 mb-1",children:""}),t.jsx("div",{className:"flex flex-wrap gap-1",children:g.missingResources.map((C,T)=>t.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-orange-900/30 text-orange-300 border border-orange-500/30",children:C},T))})]}),g.type==="tax_relief"&&g.daysMet!==void 0&&t.jsxs("div",{className:"mt-2 text-[9px] text-gray-400",children:[" ",g.daysMet,"/",g.daysRequired||10," "]})]},g.id||v)})})]})},Hj=({stratumKey:s,popStructure:o,population:d=0,classApproval:c,classInfluence:m,classWealth:b,classWealthDelta:g={},classIncome:v,classExpense:x,classShortages:y,classLivingStandard:w={},rebellionStates:k={},actionCooldowns:M={},actionUsage:z={},activeBuffs:C=[],activeDebuffs:T=[],dayScale:D=1,daysElapsed:E=0,taxPolicies:S,onUpdateTaxPolicies:q,onStrategicAction:W,resources:be={},militaryPower:G=0,promiseTasks:P=[],epoch:pe=0,techsUnlocked:Pe=[],totalInfluence:ne=0,activeDemands:ae={},onClose:se})=>{const je=Math.max(D,1e-4),de=Fe[s],[I,_]=L.useState(null),[B,re]=L.useState("overview");if(!de)return t.jsxs("div",{className:"text-center text-gray-400 py-8",children:[t.jsx(j,{name:"AlertCircle",size:32,className:"mx-auto mb-2"}),t.jsx("p",{children:""})]});const F=o[s]||0,me=c[s]||50,h=m[s]||0,A=b[s]??0,Y=(v[s]||0)/je,R=(x[s]||0)/je,Q=Y/Math.max(F,1),ye=R/Math.max(F,1),Ne=(g[s]||0)/je,ke=Ne!=null?Ne/Math.max(F,1):Q-ye,Je=y[s]||[],tt=S?.headTaxRates?.[s]??1;let bt=w[s];if(!bt){const $=de.startingWealth||10,ge=de.luxuryNeeds||{},H=Object.keys(ge).map(Number).sort((Te,Ue)=>Te-Ue),he=F>0?A/F:0,oe=$>0?he/$:0,Ae=de.needs?Object.keys(de.needs).filter(Te=>fs(Te,pe,Pe)).length:0;let Le=0,We=Ae;for(const Te of H)if(oe>=Te){Le++;const Ue=ge[Te],Nt=Object.keys(Ue).filter(Mt=>fs(Mt,pe,Pe)).filter(Mt=>!de.needs?.[Mt]);We+=Nt.length}bt=nh({count:F,wealthValue:A,startingWealth:$,shortagesCount:Je.length,effectiveNeedsCount:We,unlockedLuxuryTiers:Le,totalLuxuryTiers:H.length})}const{wealthPerCapita:ft,wealthRatio:vt,wealthMultiplier:we,satisfactionRate:Ze,luxuryUnlockRatio:pt,unlockedLuxuryTiers:xt,totalLuxuryTiers:jt,level:le,icon:Ie,color:K,bgColor:Be,borderColor:ze,approvalCap:$e,score:yt}=bt,_t=de.luxuryNeeds||{},It=Object.keys(_t).map(Number).sort(($,ge)=>$-ge);let oa=[];for(const $ of It)if(vt>=$){const ge=_t[$],H=Object.keys(ge).filter(oe=>fs(oe,pe,Pe)),he=H.filter(oe=>!de.needs?.[oe]);H.length>0&&oa.push({threshold:$,count:H.length,newResources:he})}const za=$=>{_($)},Ta=()=>{if(I===null||!q)return;const $=parseFloat(I),ge=Number.isNaN($)?1:$;q(H=>({...H,headTaxRates:{...H?.headTaxRates||{},[s]:ge}})),_(null)},en=$=>$>=70?"text-green-400":$>=40?"text-yellow-400":"text-red-400",$n=C.filter($=>$.class===s),At=T.filter($=>$.class===s),ee=zj(s,{resources:be,organizationStates:k,popStructure:o,actionCooldowns:M,actionUsage:z,population:d,militaryPower:G}),te=(P||[]).filter($=>$.stratumKey===s);return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-700",children:[t.jsx("div",{className:"w-12 h-12 bg-gray-700 rounded-lg flex items-center justify-center flex-shrink-0",children:t.jsx(j,{name:de.icon,size:24,className:"text-gray-300"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h2",{className:"text-lg font-bold text-white leading-tight font-decorative",children:de.name}),t.jsx("p",{className:"text-xs text-gray-400 leading-tight truncate",children:de.desc})]})]}),t.jsxs("div",{className:"flex border-b border-gray-700",children:[t.jsxs("button",{onClick:()=>re("overview"),className:`flex-1 py-2 text-xs font-bold transition-colors flex items-center justify-center gap-1 ${B==="overview"?"text-blue-400 border-b-2 border-blue-400 bg-blue-900/20":"text-gray-400 hover:text-gray-200"}`,children:[t.jsx(j,{name:"FileText",size:12}),""]}),t.jsxs("button",{onClick:()=>re("organization"),className:`flex-1 py-2 text-xs font-bold transition-colors flex items-center justify-center gap-1 ${B==="organization"?"text-orange-400 border-b-2 border-orange-400 bg-orange-900/20":"text-gray-400 hover:text-gray-200"}`,children:[t.jsx(j,{name:"AlertTriangle",size:12}),"",(()=>{const $=k[s]?.organization??0;return $>30?t.jsxs("span",{className:`ml-1 px-1 py-0.5 rounded text-[9px] ${$>=70?"bg-red-600":"bg-orange-600"}`,children:[$.toFixed(0),"%"]}):null})()]})]}),B==="overview"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-4 gap-1.5",children:[t.jsxs("div",{className:"bg-gray-700/50 rounded p-1.5 border border-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[t.jsx(j,{name:"Users",size:12,className:"text-blue-400"}),t.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""})]}),t.jsx("div",{className:"text-sm font-bold text-white font-mono leading-none",children:F})]}),t.jsxs("div",{className:"bg-gray-700/50 rounded p-1.5 border border-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[t.jsx(j,{name:"Heart",size:12,className:"text-pink-400"}),t.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""})]}),t.jsxs("div",{className:`text-sm font-bold font-mono leading-none ${en(me)}`,children:[me.toFixed(0),"%"]})]}),t.jsxs("div",{className:"bg-gray-700/50 rounded p-1.5 border border-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[t.jsx(j,{name:"Zap",size:12,className:"text-purple-400"}),t.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""})]}),t.jsx("div",{className:"text-sm font-bold text-purple-300 font-mono leading-none",children:h.toFixed(0)})]}),t.jsxs("div",{className:"bg-gray-700/50 rounded p-1.5 border border-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[t.jsx(j,{name:"Coins",size:12,className:"text-yellow-400"}),t.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""})]}),t.jsx("div",{className:"text-sm font-bold text-yellow-300 font-mono leading-none",children:A.toFixed(0)})]})]}),t.jsxs("div",{className:`rounded p-2 border ${ze} ${Be}`,children:[t.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[t.jsx(j,{name:"Activity",size:12,className:"text-cyan-400"}),""]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${Be} border ${ze}`,children:t.jsx(j,{name:Ie,size:20,className:K})}),t.jsxs("div",{children:[t.jsx("div",{className:`text-lg font-bold ${K}`,children:le}),t.jsxs("div",{className:"text-[9px] text-gray-400 leading-none",children:[": ",yt.toFixed(0)]})]})]}),t.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-1.5",children:[t.jsxs("div",{className:"bg-gray-800/40 rounded px-2 py-1",children:[t.jsx("div",{className:"text-[9px] text-gray-400 leading-none mb-0.5",children:""}),t.jsx("div",{className:"text-xs font-bold text-yellow-300 font-mono",children:ft.toFixed(1)}),t.jsxs("div",{className:"text-[8px] text-gray-500 leading-none",children:[vt>=1?"":""," ",vt>=1?"+":"",((vt-1)*100).toFixed(0),"%"]})]}),t.jsxs("div",{className:"bg-gray-800/40 rounded px-2 py-1",children:[t.jsx("div",{className:"text-[9px] text-gray-400 leading-none mb-0.5",children:""}),t.jsxs("div",{className:`text-xs font-bold font-mono ${we>=2?"text-purple-400":we>=1.5?"text-blue-400":we>=1?"text-green-400":"text-red-400"}`,children:["",we.toFixed(2)]}),t.jsx("div",{className:"text-[8px] text-gray-500 leading-none",children:""})]}),t.jsxs("div",{className:"bg-gray-800/40 rounded px-2 py-1",children:[t.jsx("div",{className:"text-[9px] text-gray-400 leading-none mb-0.5",children:""}),t.jsxs("div",{className:`text-xs font-bold font-mono ${Ze>=.8?"text-green-400":Ze>=.5?"text-yellow-400":"text-red-400"}`,children:[(Ze*100).toFixed(0),"%"]}),t.jsxs("div",{className:"text-[8px] text-gray-500 leading-none",children:[": ",$e,"%"]})]})]})]}),oa.length>0&&t.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700/50",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"text-[9px] text-gray-400",children:""}),t.jsxs("span",{className:"text-[9px] font-bold text-blue-400",children:[oa.length," "]})]}),t.jsx("div",{className:"flex gap-1",children:oa.map(({threshold:$,count:ge})=>{const H=_t[$],oe=Object.keys(H).filter(Ae=>fs(Ae,pe,Pe)).map(Ae=>Oe[Ae]?.name||Ae).join("");return t.jsxs("div",{className:"flex-1 rounded px-1.5 py-1 text-center bg-blue-900/30 border border-blue-500/40",title:`${$}x: ${oe}`,children:[t.jsxs("div",{className:"text-[9px] font-bold text-blue-300",children:[$,""]}),t.jsxs("div",{className:"text-[8px] text-gray-300",children:["+",ge,""]})]},$)})})]})]}),q&&t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[t.jsx(j,{name:"Sliders",size:12,className:"text-yellow-400"}),""]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 items-center",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-[9px] text-gray-400 mb-0.5 leading-none",children:""}),t.jsx("input",{type:"text",inputMode:"decimal",step:"0.05",value:I??tt,onChange:$=>za($.target.value),onBlur:Ta,onKeyDown:$=>{$.key==="Enter"&&(Ta(),$.target.blur())},className:"w-full bg-gray-900/70 border border-gray-600 text-sm text-gray-200 rounded px-2 py-1 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-center",placeholder:""})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-[9px] text-gray-400 mb-0.5 leading-none",children:" ()"}),t.jsxs("div",{className:"bg-gray-800/50 rounded px-2 py-1.5 text-center",children:[t.jsxs("span",{className:`text-sm font-bold font-mono ${de.headTaxBase*tt>0?"text-yellow-300":de.headTaxBase*tt<0?"text-green-300":"text-gray-400"}`,children:[de.headTaxBase*tt<0?" ":"",Math.abs((de.headTaxBase||.01)*tt).toFixed(3)]}),t.jsx(j,{name:de.headTaxBase*tt>0?"TrendingUp":de.headTaxBase*tt<0?"TrendingDown":"Coins",size:12,className:`inline-block ml-1 ${de.headTaxBase*tt>0?"text-yellow-400":de.headTaxBase*tt<0?"text-green-400":"text-gray-500"}`})]})]})]}),t.jsx("p",{className:"text-[10px] text-gray-500 mt-1.5",children:" =   "})]}),t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[t.jsx(j,{name:"TrendingUp",size:12,className:"text-green-400"}),""]}),t.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-[9px] text-gray-400 mb-0.5 leading-none",children:""}),t.jsxs("div",{className:"text-sm font-bold text-green-400 font-mono leading-none",children:["+",Q.toFixed(2)]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-[9px] text-gray-400 mb-0.5 leading-none",children:""}),t.jsxs("div",{className:"text-sm font-bold text-red-400 font-mono leading-none",children:["-",ye.toFixed(2)]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-[9px] text-gray-400 mb-0.5 leading-none",children:""}),t.jsxs("div",{className:`text-sm font-bold font-mono leading-none ${ke>=0?"text-green-400":"text-red-400"}`,children:[ke>=0?"+":"",ke.toFixed(2)]})]})]})]}),t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[t.jsx(j,{name:"Package",size:12,className:"text-amber-400"}),"",jt>0&&xt>0&&t.jsx("span",{className:"text-[8px] text-purple-400 ml-1",children:"()"})]}),(()=>{const $={};if(de.needs)for(const[H,he]of Object.entries(de.needs))fs(H,pe,Pe)&&($[H]={amount:he,isBase:!0,luxuryThreshold:null});if(de.luxuryNeeds){for(const H of It)if(vt>=H){const he=de.luxuryNeeds[H];for(const[oe,Ae]of Object.entries(he))fs(oe,pe,Pe)&&($[oe]?($[oe].amount+=Ae,$[oe].isBase||($[oe].luxuryThreshold=Math.min($[oe].luxuryThreshold||1/0,H))):$[oe]={amount:Ae,isBase:!1,luxuryThreshold:H})}}const ge=Object.entries($);return ge.length===0?t.jsx("div",{className:"text-center text-gray-400 text-[10px] py-2",children:""}):t.jsx("div",{className:"space-y-1.5",children:ge.map(([H,{amount:he,isBase:oe,luxuryThreshold:Ae}])=>{const Le=Oe[H],We=Je.find(ie=>(typeof ie=="string"?ie:ie.resource)===H),Te=!!We,Ue=We&&typeof We!="string"?We.reason:"outOfStock";let Ke="CheckCircle",Nt="text-green-400",Mt=" ",ga="bg-green-900/20",la="border-green-500/30",et="";return Te&&(Ue==="unaffordable"?(Ke="DollarSign",Nt="text-orange-400",Mt=" ",ga="bg-orange-900/20",la="border-orange-500/40",et=""):Ue==="outOfStock"?(Ke="XCircle",Nt="text-red-400",Mt=" ",ga="bg-red-900/20",la="border-red-500/40",et=""):Ue==="both"&&(Ke="AlertTriangle",Nt="text-red-500",Mt=" ",ga="bg-red-900/30",la="border-red-500/50",et="")),t.jsxs("div",{className:`rounded p-2 border ${la} ${ga} ${Te?"animate-pulse":""}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"w-7 h-7 bg-gray-800/60 rounded flex items-center justify-center flex-shrink-0",children:t.jsx(j,{name:Le?.icon||"HelpCircle",size:16,className:Le?.color||"text-gray-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-xs font-bold text-white leading-tight",children:Le?.name||H}),!oe&&t.jsxs("span",{className:"text-[8px] px-1 py-0.5 rounded bg-purple-900/40 text-purple-300 border border-purple-500/30",children:[" ",Ae,""]})]}),t.jsx("div",{className:"text-[9px] text-gray-400 leading-tight truncate",children:Le?.desc||""})]})]}),t.jsxs("div",{className:"bg-gray-800/40 rounded px-2 py-1 mb-1",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""}),t.jsx("span",{className:"text-[10px] font-bold text-white font-mono leading-none",children:he})]}),t.jsxs("div",{className:"flex items-center justify-between mt-0.5",children:[t.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""}),t.jsx("span",{className:"text-[10px] font-bold text-blue-300 font-mono leading-none",children:(he*F).toFixed(0)})]})]}),t.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded ${ga}`,children:[t.jsx(j,{name:Ke,size:12,className:Nt}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:`text-[10px] font-bold ${Nt} leading-tight`,children:Mt}),et&&t.jsx("div",{className:`text-[9px] ${Nt} leading-tight truncate`,children:et})]})]})]},H)})})})()]}),($n.length>0||At.length>0)&&t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[t.jsx(j,{name:"Activity",size:12,className:"text-blue-400"}),""]}),t.jsxs("div",{className:"space-y-1",children:[$n.map(($,ge)=>{const H=nr($);return t.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded p-1.5",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[t.jsx(j,{name:"ArrowUp",size:10,className:"text-green-400"}),t.jsx("span",{className:"text-[10px] font-semibold text-green-300 leading-tight",children:$.desc||""})]}),H.length>0&&t.jsx("div",{className:"text-[9px] text-gray-300 ml-4 leading-tight",children:H.join("")})]},`buff-${ge}`)}),At.map(($,ge)=>{const H=nr($);return t.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded p-1.5",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[t.jsx(j,{name:"ArrowDown",size:10,className:"text-red-400"}),t.jsx("span",{className:"text-[10px] font-semibold text-red-300 leading-tight",children:$.desc||""})]}),H.length>0&&t.jsx("div",{className:"text-[9px] text-gray-300 ml-4 leading-tight",children:H.join("")})]},`debuff-${ge}`)})]})]})]}),B==="organization"&&t.jsx("div",{className:"space-y-2",children:(()=>{const $=k[s]||{},ge=$.organization??0,H=$.growthRate??0,he=ar(ge),oe=ih(he),Ae=sh(he),Le=rh(ge,H);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gray-700/50 rounded p-3 border border-gray-600",children:[t.jsxs("h3",{className:"text-sm font-bold text-white mb-2 flex items-center gap-2",children:[t.jsx(j,{name:"AlertTriangle",size:16,className:"text-orange-400"}),""]}),t.jsxs("div",{className:"mb-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{name:Ae,size:18,className:ge>=70?"text-red-500 animate-pulse":ge>=30?"text-orange-400":"text-yellow-400"}),t.jsx("span",{className:`text-sm font-bold ${ge>=70?"text-red-400":ge>=30?"text-orange-400":"text-yellow-400"}`,children:oe})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-lg font-mono font-bold text-white",children:[ge.toFixed(0),"%"]}),H!==0&&t.jsxs("span",{className:`text-xs font-mono ${H>0?"text-red-300":"text-green-300"}`,children:["(",H>0?"+":"",H.toFixed(2),"/)"]})]})]}),t.jsx("div",{className:"w-full bg-gray-800/50 rounded-full h-3 border border-gray-600 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full transition-all ${ge>=90?"bg-red-500 animate-pulse":ge>=70?"bg-orange-500":ge>=30?"bg-yellow-500":"bg-gray-500"}`,style:{width:`${ge}%`}})}),Le!==null&&Le<200&&t.jsxs("div",{className:"text-sm text-red-400 mt-2 animate-pulse font-bold",children:["  ",Le," "]})]})]}),(()=>{const Te=Oj(s,{classShortages:y,classApproval:c,classInfluence:m,totalInfluence:ne,classLivingStandard:w,taxPolicies:S,classIncome:v,popStructure:o});return Te.hasIssues?t.jsx("div",{className:"bg-gray-700/50 rounded p-3 border border-gray-600",children:t.jsx(Uj,{sources:Te.sources,totalContribution:Te.totalContribution})}):null})(),ge>=50&&t.jsxs("div",{className:"bg-gray-700/50 rounded p-3 border border-gray-600",children:[t.jsx(Wj,{demands:ae[s]||[],currentDay:E}),(!ae[s]||ae[s].length===0)&&t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[t.jsx(j,{name:"Scroll",size:14,className:"text-purple-400"}),t.jsx("span",{children:""})]})]}),t.jsxs("div",{className:"bg-gray-700/50 rounded p-3 border border-gray-600 space-y-3",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-bold text-white mb-3 flex items-center gap-2",children:[t.jsx(j,{name:"Zap",size:16,className:"text-blue-400"}),""]}),t.jsx("div",{className:"space-y-1.5",children:ee.map(We=>t.jsx(Lj,{action:We,stratumKey:s,stratumName:de.name,popCount:F,disabled:!W||!We.available,unavailableReason:We.unavailableReason,onExecute:W,actionUsage:z},We.id))}),ee.length===0&&t.jsx("div",{className:"text-xs text-gray-400 text-center mt-2",children:""}),!W&&t.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center bg-gray-800/30 rounded p-2",children:"..."})]}),t.jsxs("div",{className:"pt-2 border-t border-gray-600/60",children:[t.jsxs("h4",{className:"text-[11px] font-bold text-white mb-1 flex items-center gap-1",children:[t.jsx(j,{name:"FileText",size:12,className:"text-amber-300"}),""]}),te.length>0?t.jsx("div",{className:"space-y-1",children:te.map(We=>{const Te=Y1(We,E||0);return t.jsxs("div",{className:"bg-gray-800/60 border border-gray-600 rounded p-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-[10px] text-gray-300",children:[t.jsx("span",{className:"font-semibold text-white",children:We.description}),t.jsxs("span",{className:`font-mono ${Te<=5?"text-red-300":"text-green-300"}`,children:[" ",Te," "]})]}),t.jsxs("div",{className:"text-[9px] text-gray-400 mt-0.5",children:[":  +",We.failurePenalty?.organization||0,"%",We.failurePenalty?.forcedUprising?"":""]})]},We.id)})}):t.jsx("div",{className:"text-[11px] text-gray-400",children:""})]})]})]})})()})]})},qj=({logs:s})=>t.jsxs("div",{className:"glass-epic p-3 rounded-2xl border border-ancient-gold/20 shadow-epic relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-ancient-ink/60 via-ancient-stone/30 to-ancient-ink/60 opacity-60"}),t.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",children:t.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[t.jsxs("pattern",{id:"log-panel-pattern",width:"80",height:"80",patternUnits:"userSpaceOnUse",children:[t.jsx("path",{d:"M0 20 H80 M0 60 H80",stroke:"currentColor",strokeWidth:"0.5",className:"text-ancient-gold/10"}),t.jsx("path",{d:"M20 0 V80 M60 0 V80",stroke:"currentColor",strokeWidth:"0.5",className:"text-ancient-gold/10"}),t.jsx("circle",{cx:"40",cy:"40",r:"2",fill:"currentColor",className:"text-ancient-gold/30"})]}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#log-panel-pattern)"})]})}),t.jsxs("div",{className:"relative z-10 flex flex-col gap-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-sm font-bold text-ancient flex items-center gap-2",children:[t.jsx(j,{name:"ScrollText",size:16,className:"text-ancient-gold"}),""]}),t.jsxs("span",{className:"text-[11px] text-ancient-stone opacity-80",children:[" ",s.length," "]})]}),t.jsx("div",{className:"space-y-1.5 max-h-48 overflow-y-auto pr-1 scrollbar-thin scrollbar-thumb-ancient-gold/40",children:s.length===0?t.jsx("p",{className:"text-xs text-ancient-stone opacity-70 italic text-center py-4",children:""}):s.map((o,d)=>t.jsxs("div",{className:"text-xs text-ancient-parchment glass-ancient border border-ancient-gold/10 rounded-lg px-2 py-1.5 hover:border-ancient-gold/30 transition-all animate-fade-in",children:[t.jsxs("span",{className:"text-ancient-gold/60 font-mono text-[10px] mr-2",children:["#",d+1]}),o]},d))})]})]}),Vj=({isAutoSaveEnabled:s,autoSaveInterval:o,onToggleAutoSave:d,onIntervalChange:c,lastAutoSaveTime:m,onManualSave:b,onManualLoad:g,onAutoLoad:v,autoSaveAvailable:x,isSaving:y,onClose:w,timeSettings:k,onTimeSettingsChange:M})=>{const{enabled:z,volume:C,toggleSound:T,setVolume:D,playSound:E,SOUND_TYPES:S}=Vd(),q=k?.approval||{},W=k?.stability||{},be=Math.max(5,q.duration||30),G=Math.max(5,W.duration||30),P=Math.max(0,Math.min(.95,q.decayRate??.04)),pe=Math.max(0,Math.min(.95,W.decayRate??.04)),Pe=(ae,se,je)=>{typeof M=="function"&&M(de=>{const I={approval:{duration:be,decayRate:P},stability:{duration:G,decayRate:pe},...de||{}};return I[ae]={duration:I[ae]?.duration??(ae==="approval"?be:G),decayRate:I[ae]?.decayRate??(ae==="approval"?P:pe),...I[ae],[se]:je},I})},ne=()=>{if(!m)return"";try{return new Date(m).toLocaleTimeString()}catch{return""}};return t.jsxs("div",{className:"bg-gray-900/90 backdrop-blur border border-gray-700 rounded-xl p-4 space-y-4 shadow-lg",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-200 flex items-center gap-2",children:[t.jsx(j,{name:"Sliders",size:16})," "]}),t.jsxs("div",{className:"flex items-center gap-2",children:[y&&t.jsxs("div",{className:"flex items-center gap-1 text-emerald-300 text-[11px]",children:[t.jsx(j,{name:"Activity",size:12,className:"animate-spin"}),t.jsx("span",{children:""})]}),w&&t.jsx("button",{type:"button",onClick:w,className:"p-1 rounded-full bg-gray-800/80 hover:bg-gray-700 border border-gray-600 text-gray-300 transition-colors",title:"",children:t.jsx(j,{name:"X",size:14})})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-300",children:[t.jsx("span",{children:""}),t.jsx("span",{className:s?"text-emerald-300":"text-gray-500",children:s?"":""})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s,onChange:ae=>d(ae.target.checked)}),t.jsx("div",{className:"w-10 h-5 bg-gray-700 rounded-full peer peer-checked:bg-emerald-600 transition-colors"}),t.jsx("div",{className:`absolute left-1 top-1 w-3 h-3 rounded-full bg-white transition-transform ${s?"translate-x-5":""}`})]})]}),t.jsxs("div",{className:"space-y-2 text-xs text-gray-300",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:""}),t.jsxs("span",{children:[o," "]})]}),t.jsx("input",{type:"range",min:15,max:300,step:15,value:o,onChange:ae=>c(Number(ae.target.value)),className:"w-full accent-emerald-500"}),t.jsx("p",{className:"text-[11px] text-gray-400",children:" 15  5 "})]}),t.jsxs("div",{className:"text-[11px] text-gray-400 flex items-center gap-2",children:[t.jsx(j,{name:"Clock",size:12,className:"text-gray-500"}),t.jsxs("span",{children:["",ne()]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.jsxs("button",{type:"button",onClick:b,className:"flex items-center justify-center gap-1 px-3 py-2 rounded-lg bg-emerald-700/30 hover:bg-emerald-700/50 border border-emerald-500/30 text-emerald-200 transition-colors",children:[t.jsx(j,{name:"Save",size:14}),""]}),t.jsxs("button",{type:"button",onClick:g,className:"flex items-center justify-center gap-1 px-3 py-2 rounded-lg bg-purple-700/30 hover:bg-purple-700/50 border border-purple-500/30 text-purple-200 transition-colors",children:[t.jsx(j,{name:"Download",size:14}),""]}),t.jsxs("button",{type:"button",onClick:v,disabled:!x,className:`col-span-2 flex items-center justify-center gap-1 px-3 py-2 rounded-lg border transition-colors ${x?"bg-amber-700/30 hover:bg-amber-700/50 border-amber-500/30 text-amber-200":"bg-gray-700/40 border-gray-600 text-gray-400 cursor-not-allowed"}`,title:x?"":"",children:[t.jsx(j,{name:"Clock",size:14}),""]})]}),t.jsxs("div",{className:"text-[11px] text-gray-400 flex items-center gap-2",children:[t.jsx("span",{className:`w-2 h-2 rounded-full ${x?"bg-emerald-400":"bg-gray-500"}`}),x?"":""]}),t.jsxs("div",{className:"border-t border-gray-700 pt-4 space-y-4",children:[t.jsxs("h4",{className:"text-sm font-bold text-gray-200 flex items-center gap-2",children:[t.jsx(j,{name:"Clock",size:16})," "]}),t.jsx("p",{className:"text-[11px] text-gray-400",children:" Tick "}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-xs text-gray-300",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:""}),t.jsxs("span",{children:[be," "]})]}),t.jsx("input",{type:"range",min:5,max:180,value:be,onChange:ae=>Pe("approval","duration",Number(ae.target.value)),className:"w-full accent-emerald-500"}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:""}),t.jsxs("span",{children:[Math.round(P*100),"% / "]})]}),t.jsx("input",{type:"range",min:0,max:50,value:Math.round(P*100),onChange:ae=>Pe("approval","decayRate",Number(ae.target.value)/100),className:"w-full accent-emerald-500"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:""}),t.jsxs("span",{children:[G," "]})]}),t.jsx("input",{type:"range",min:5,max:180,value:G,onChange:ae=>Pe("stability","duration",Number(ae.target.value)),className:"w-full accent-blue-500"}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:""}),t.jsxs("span",{children:[Math.round(pe*100),"% / "]})]}),t.jsx("input",{type:"range",min:0,max:50,value:Math.round(pe*100),onChange:ae=>Pe("stability","decayRate",Number(ae.target.value)/100),className:"w-full accent-blue-500"})]})]})]}),t.jsxs("div",{className:"border-t border-gray-700 pt-4 space-y-4",children:[t.jsxs("h4",{className:"text-sm font-bold text-gray-200 flex items-center gap-2",children:[t.jsx(j,{name:"Volume2",size:16})," "]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-300",children:[t.jsx("span",{children:""}),t.jsx("span",{className:z?"text-emerald-300":"text-gray-500",children:z?"":""})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",className:"sr-only peer",checked:z,onChange:()=>{T(),z||setTimeout(()=>E(S.SUCCESS),100)}}),t.jsx("div",{className:"w-10 h-5 bg-gray-700 rounded-full peer peer-checked:bg-emerald-600 transition-colors"}),t.jsx("div",{className:`absolute left-1 top-1 w-3 h-3 rounded-full bg-white transition-transform ${z?"translate-x-5":""}`})]})]}),z&&t.jsxs("div",{className:"space-y-2 text-xs text-gray-300",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:""}),t.jsxs("span",{children:[Math.round(C*100),"%"]})]}),t.jsx("input",{type:"range",min:0,max:100,step:5,value:C*100,onChange:ae=>D(Number(ae.target.value)/100),className:"w-full accent-emerald-500"})]}),z&&t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.jsx("button",{type:"button",onClick:()=>E(S.CLICK),className:"flex items-center justify-center gap-1 px-2 py-1.5 rounded-lg bg-gray-700/50 hover:bg-gray-700 border border-gray-600 text-gray-300 transition-colors",children:""}),t.jsx("button",{type:"button",onClick:()=>E(S.SUCCESS),className:"flex items-center justify-center gap-1 px-2 py-1.5 rounded-lg bg-gray-700/50 hover:bg-gray-700 border border-gray-600 text-gray-300 transition-colors",children:""}),t.jsx("button",{type:"button",onClick:()=>E(S.BUILD),className:"flex items-center justify-center gap-1 px-2 py-1.5 rounded-lg bg-gray-700/50 hover:bg-gray-700 border border-gray-600 text-gray-300 transition-colors",children:""}),t.jsx("button",{type:"button",onClick:()=>E(S.BATTLE),className:"flex items-center justify-center gap-1 px-2 py-1.5 rounded-lg bg-gray-700/50 hover:bg-gray-700 border border-gray-600 text-gray-300 transition-colors",children:""})]})]})]})};function $f({daysElapsed:s=0,season:o="",population:d=0,stability:c=100,wealth:m=0,epoch:b=0}){const[g,v]=L.useState(0),[x,y]=L.useState(.5),[w,k]=L.useState(1),M=L.useMemo(()=>Math.random().toString(36).substr(2,9),[]),z=85;L.useEffect(()=>{const ne=setInterval(()=>{v(se=>(se+.002)%1)},50),ae=setInterval(()=>{y(Math.random()),k(.5+Math.random()*1.5)},15e3);return()=>{clearInterval(ne),clearInterval(ae)}},[]);const C=L.useMemo(()=>{const ne=g;let ae,se,je,de;const I=110-Math.sin((ne-.2)*(Math.PI/.6))*100,_=20+(ne-.2)/.6*160;let B=ne<.5?ne+1:ne;const re=110-Math.sin((B-.7)*(Math.PI/.6))*100,F=20+(B-.7)/.6*160;if(ne<.25){const me=ne/.25;ae=`rgb(${20+me*100}, ${30+me*120}, ${60+me*130})`,se=`rgb(${40+me*120}, ${60+me*140}, ${100+me*135})`,je=1-me*2,de="#ffccbc"}else if(ne<.75)ae="#4fc3f7",se="#b3e5fc",je=0,de="#ffffff";else{const me=(ne-.75)/.25;ae=`rgb(${25+(1-me)*10}, ${25+(1-me)*20}, ${60+(1-me)*60})`,se="rgb(10, 10, 30)",je=me*2,de="#546e7a"}return{from:ae,to:se,sunX:_,sunY:I,moonX:F,moonY:re,starOpacity:je,cloudColor:de}},[g]),T=L.useMemo(()=>{const ne={:{ground:["#8bc34a","#c5e1a5"],grass:"#8bc34a",bush:"#7cb342",treeTrunk:"#795548",treeLeaf:"#66bb6a",flower:"#f48fb1",particles:"#f8bbd0",mountain1:["#6b8e7f","#4a6b5c"],mountain2:["#7fa89b","#5d7f72"]},:{ground:["#558b2f","#8bc34a"],grass:"#558b2f",bush:"#33691e",treeTrunk:"#5d4037",treeLeaf:"#2e7d32",flower:null,particles:"#fff176",mountain1:["#546e7a","#37474f"],mountain2:["#607d8b","#455a64"]},:{ground:["#d7ccc8","#efebe9"],grass:"#d7ccc8",bush:"#ffb74d",treeTrunk:"#4e342e",treeLeaf:["#ff7043","#ffca28","#d84315"],flower:null,particles:"#d84315",mountain1:["#8d6e63","#5d4037"],mountain2:["#a1887f","#6d4c41"]},:{ground:["#eceff1","#ffffff"],grass:"#cfd8dc",bush:"#b0bec5",treeTrunk:"#3e2723",treeLeaf:"#ffffff",flower:null,particles:"#ffffff",mountain1:["#b0bec5","#78909c"],mountain2:["#cfd8dc","#90a4ae"]}};return ne[o]||ne.},[o]),D=L.useMemo(()=>b===0?{type:"tent",color:"#a1887f",detail:"none"}:b<=2?{type:"clay",color:"#d7ccc8",roof:"#a1887f"}:b<=4?{type:"timber",color:"#795548",roof:"#3e2723"}:b<=6?{type:"brick",color:"#b71c1c",roof:"#263238",detail:"chimney"}:{type:"modern",color:"#cfd8dc",roof:"#607d8b",detail:"glass"},[b]),E=L.useMemo(()=>{const ne=Math.min(Math.floor(d/5),15);return Array.from({length:ne}).map((se,je)=>{const de=Math.sin(je*132.1)*10,I=Math.floor(je/5),_=(2-I)*4,B=z+_+2,re=1-I*.15;return{x:20+je*35%160+de,y:B,scale:re,id:je}}).sort((se,je)=>se.y-je.y)},[d]),S=L.useMemo(()=>{const ne=Math.min(Math.floor(d/3),8);return Array.from({length:ne}).map((ae,se)=>({id:se,startX:10+Math.random()*180,y:z+2+Math.random()*10,duration:15+Math.random()*10,delay:-Math.random()*20,scale:.5+Math.random()*.3,color:["#5d4037","#3e2723","#4e342e"][Math.floor(Math.random()*3)]})).sort((ae,se)=>ae.y-se.y)},[d]),q=L.useMemo(()=>{const ne=[],se=je=>{const de=Math.sin(je+123.45)*1e4;return de-Math.floor(de)};for(let je=0;je<60;je++){const de=se(je*1.1),I=se(je*2.2),_=se(je*3.3);let B="grass";I>.5&&(B="bush"),I>.8&&(B="tree");const re=de,F=z+2+re*35,me=-20+se(je*99)*240;let h=.5+re*.8;B==="grass"&&(h*=.6);let A=0;Array.isArray(T.treeLeaf)&&(A=Math.floor(_*T.treeLeaf.length)),ne.push({id:je,type:B,x:me,y:F,scale:h,flip:_>.5?1:-1,variant:_,colorIdx:A})}return ne.sort((je,de)=>je.y-de.y)},[o,T]),W=(100-c)/100*.8,be=x<W,G=c<80||x<.7,P=c<30&&be,Pe=Math.min(100,m/20+c/2+d/2)>70;return t.jsxs("div",{className:"relative w-full h-48 md:h-64 rounded-xl overflow-hidden border border-gray-700 shadow-2xl bg-gray-900 group select-none",children:[t.jsx("style",{children:`
        @keyframes cloud-drift { from { transform: translateX(-50px); } to { transform: translateX(250px); } }
        @keyframes twinkle { 0%, 100% { opacity: 0.3; transform: scale(0.8); } 50% { opacity: 1; transform: scale(1.2); } }
        @keyframes sway { 0%, 100% { transform: rotate(-3deg); } 50% { transform: rotate(3deg); } }
        @keyframes grass-sway { 0%, 100% { transform: rotate(-5deg); } 50% { transform: rotate(5deg); } }
        @keyframes smoke { 0% { opacity: 0.7; transform: translateY(0) scale(1); } 100% { opacity: 0; transform: translateY(-18px) scale(2.5); } }
        @keyframes rain { 0% { transform: translateY(-20px) translateX(${w*-5}px); opacity: 0; } 50% { opacity: 0.8; } 100% { transform: translateY(20px) translateX(${w*5}px); opacity: 0; } }
        @keyframes walk { 0% { transform: translateX(0) scaleX(1); } 45% { transform: translateX(40px) scaleX(1); } 50% { transform: translateX(40px) scaleX(-1); } 95% { transform: translateX(0) scaleX(-1); } 100% { transform: translateX(0) scaleX(1); } }
        @keyframes bob { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-0.8px); } }
        @keyframes float-up { 0% { opacity: 0.8; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-25px); } }
        @keyframes shimmer { 0%, 100% { opacity: 0.4; } 50% { opacity: 0.8; } }
        
        .cloud-anim { animation: cloud-drift linear infinite; }
        .tree-sway { transform-origin: bottom center; animation: sway 4s ease-in-out infinite; transform-box: fill-box; }
        .grass-sway { transform-origin: bottom center; animation: grass-sway 2s ease-in-out infinite; transform-box: fill-box; }
        .rain-drop { animation: rain 0.5s linear infinite; }
        .pedestrian-walk { animation: walk linear infinite; }
        .pedestrian-bob { animation: bob 0.5s ease-in-out infinite; }
        .smoke-particle { animation: smoke 2.5s ease-out infinite; }
        .star-twinkle { animation: twinkle 3s ease-in-out infinite; }
        .float-particle { animation: float-up 3s ease-out infinite; }
        .shimmer-effect { animation: shimmer 2s ease-in-out infinite; }
        
        path, circle, ellipse, rect, line { transition: fill 2s ease-in-out, stroke 2s ease-in-out, opacity 2s ease-in-out; }
      `}),t.jsxs("svg",{viewBox:"0 0 200 150",preserveAspectRatio:"xMidYMid slice",className:"w-full h-full block",style:{background:`linear-gradient(to bottom, ${C.from}, ${C.to})`,transition:"background 2s ease-in-out"},children:[t.jsxs("defs",{children:[t.jsxs("linearGradient",{id:`mountainGrad1-${M}`,x1:"0",x2:"0",y1:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:T.mountain1[0]}),t.jsx("stop",{offset:"100%",stopColor:T.mountain1[1]})]}),t.jsxs("linearGradient",{id:`mountainGrad2-${M}`,x1:"0",x2:"0",y1:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:T.mountain2[0]}),t.jsx("stop",{offset:"100%",stopColor:T.mountain2[1]})]}),t.jsxs("linearGradient",{id:`groundGrad-${M}`,x1:"0",x2:"0",y1:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:T.ground[0]}),t.jsx("stop",{offset:"100%",stopColor:T.ground[1]})]}),t.jsxs("radialGradient",{id:`sunGlow-${M}`,children:[t.jsx("stop",{offset:"0%",stopColor:"#fff176",stopOpacity:"0.8"}),t.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]})]}),t.jsxs("g",{id:"sky",children:[t.jsx("g",{style:{opacity:C.starOpacity,transition:"opacity 3s ease-in-out"},children:[...Array(15)].map((ne,ae)=>t.jsx("circle",{cx:Math.random()*200,cy:Math.random()*60,r:Math.random()*.6+.2,fill:"#fff",className:"star-twinkle",style:{animationDelay:`${ae*.2}s`}},`s${ae}`))}),C.sunY<130&&t.jsxs("g",{transform:`translate(${C.sunX}, ${C.sunY})`,children:[t.jsx("circle",{r:"12",fill:`url(#sunGlow-${M})`,opacity:"0.6"}),t.jsx("circle",{r:"5",fill:"#fdd835"})]}),C.moonY<130&&t.jsxs("g",{transform:`translate(${C.moonX}, ${C.moonY})`,children:[t.jsx("circle",{r:"4",fill:"#f5f5f5"}),t.jsx("circle",{r:"4",fill:"#000",fillOpacity:"0.2",cx:"1.5",cy:"-1.5"})]})]}),t.jsxs("g",{id:"background",children:[t.jsx("path",{d:"M0,70 L30,40 L60,55 L100,30 L140,50 L180,35 L200,55 L200,150 L0,150 Z",fill:`url(#mountainGrad1-${M})`,opacity:"0.85"}),t.jsx("path",{d:"M-10,80 L40,60 L80,75 L120,55 L160,70 L200,60 L220,75 L220,150 L-10,150 Z",fill:`url(#mountainGrad2-${M})`,opacity:"0.95"})]}),t.jsx("path",{d:"M-10,85 Q100,83 210,85 L210,150 L-10,150 Z",fill:`url(#groundGrad-${M})`,style:{transition:"fill 2s ease-in-out"}}),q.map(ne=>t.jsx("g",{transform:`translate(${ne.x}, ${ne.y})`,children:t.jsxs("g",{transform:`scale(${ne.scale*ne.flip}, ${ne.scale})`,children:[ne.type==="grass"&&t.jsx("g",{className:"grass-sway",style:{animationDuration:`${1.5+ne.variant}s`},children:t.jsx("path",{d:"M0,0 Q-1,-4 0,-5 M2,0 Q1,-3 2,-4 M-2,0 Q-3,-3 -2,-4",stroke:T.grass,strokeWidth:"0.5",fill:"none",opacity:"0.8"})}),ne.type==="bush"&&t.jsxs("g",{className:"tree-sway",style:{animationDuration:`${3+ne.variant}s`},children:[t.jsx("ellipse",{cx:"0",cy:"0",rx:"4",ry:"1.5",fill:"#000",opacity:"0.2"}),t.jsx("circle",{cx:"-2",cy:"-2",r:"2.5",fill:T.bush}),t.jsx("circle",{cx:"2",cy:"-2",r:"2.5",fill:T.bush}),t.jsx("circle",{cx:"0",cy:"-3.5",r:"3",fill:T.bush}),t.jsx("circle",{cx:"-1",cy:"-3",r:"1",fill:"#fff",opacity:"0.1"})]}),ne.type==="tree"&&t.jsxs("g",{className:"tree-sway",style:{animationDuration:`${4+ne.variant}s`},children:[t.jsx("ellipse",{cx:"0",cy:"0.5",rx:"5",ry:"1.5",fill:"#000",opacity:"0.2"}),t.jsx("path",{d:"M-1,0 L-0.8,-8 L0.8,-8 L1,0 Z",fill:T.treeTrunk}),o===""?t.jsxs("g",{transform:"translate(0, -8)",stroke:T.treeTrunk,strokeWidth:"0.5",children:[t.jsx("line",{x1:"0",y1:"0",x2:"-3",y2:"-4"}),t.jsx("line",{x1:"0",y1:"0",x2:"3",y2:"-4"}),t.jsx("line",{x1:"0",y1:"-2",x2:"-2",y2:"-5"}),t.jsx("line",{x1:"0",y1:"-2",x2:"2",y2:"-5"}),t.jsx("path",{d:"M-3,-4 Q0,-5 3,-4",stroke:"#fff",strokeWidth:"0.8",opacity:"0.8",fill:"none"})]}):t.jsx("g",{transform:"translate(0, -9)",children:(()=>{const ae=Array.isArray(T.treeLeaf)?T.treeLeaf[ne.colorIdx]:T.treeLeaf;return t.jsxs(t.Fragment,{children:[t.jsx("circle",{cx:"-2.5",cy:"1",r:"3.5",fill:ae}),t.jsx("circle",{cx:"2.5",cy:"1",r:"3.5",fill:ae}),t.jsx("circle",{cx:"0",cy:"-2",r:"4",fill:ae}),t.jsx("circle",{cx:"-1.5",cy:"-2.5",r:"1.5",fill:"#fff",opacity:"0.1"}),T.flower&&ne.variant>.6&&t.jsxs("g",{fill:T.flower,children:[t.jsx("circle",{cx:"-2",cy:"-1",r:"0.8"}),t.jsx("circle",{cx:"2",cy:"0",r:"0.6"}),t.jsx("circle",{cx:"0",cy:"-3",r:"0.7"})]})]})})()})]})]})},`veg-${ne.id}`)),E.map(ne=>t.jsxs("g",{transform:`translate(${ne.x}, ${ne.y}) scale(${ne.scale})`,children:[t.jsx("ellipse",{cx:"5",cy:"0.5",rx:"7",ry:"1.8",fill:"#000",opacity:"0.25"}),D.type==="tent"&&t.jsxs("g",{children:[t.jsx("path",{d:"M0,0 L5,-10 L10,0 Z",fill:D.color,stroke:"#8d6e63",strokeWidth:"0.3"}),t.jsx("line",{x1:"5",y1:"-10",x2:"5",y2:"0",stroke:"#6d4c41",strokeWidth:"0.4"}),t.jsx("path",{d:"M2,0 L5,-6 L8,0",fill:"none",stroke:"#6d4c41",strokeWidth:"0.3"})]}),(D.type==="clay"||D.type==="timber")&&t.jsxs("g",{children:[t.jsx("rect",{x:"1",y:"-7",width:"8",height:"7",fill:D.color}),t.jsx("rect",{x:"1",y:"-7",width:"1",height:"7",fill:"#000",opacity:"0.15"}),t.jsx("rect",{x:"8",y:"-7",width:"1",height:"7",fill:"#fff",opacity:"0.1"}),t.jsx("path",{d:"M0,-7 L5,-12 L10,-7 Z",fill:D.roof}),t.jsx("path",{d:"M0,-7 L5,-12 L5,-7 Z",fill:"#000",opacity:"0.2"}),t.jsx("rect",{x:"3.5",y:"-4",width:"3",height:"4",fill:"#3e2723",rx:"0.3"}),t.jsx("circle",{cx:"6",cy:"-2",r:"0.3",fill:"#ffd54f"}),t.jsx("rect",{x:"1.5",y:"-5.5",width:"1.5",height:"1.5",fill:g>.7||g<.2?"#ffb74d":"#90a4ae",opacity:"0.7"})]}),(D.type==="brick"||D.type==="modern")&&t.jsxs("g",{children:[t.jsx("rect",{x:"0",y:"-10",width:"10",height:"10",fill:D.color}),t.jsx("rect",{x:"0",y:"-10",width:"1.5",height:"10",fill:"#000",opacity:"0.15"}),t.jsx("rect",{x:"8.5",y:"-10",width:"1.5",height:"10",fill:"#fff",opacity:"0.1"}),t.jsx("path",{d:"M-1,-10 L5,-14 L11,-10 Z",fill:D.roof}),t.jsx("path",{d:"M-1,-10 L5,-14 L5,-10 Z",fill:"#000",opacity:"0.25"}),t.jsxs("g",{children:[t.jsx("rect",{x:"1.5",y:"-8.5",width:"2.5",height:"2.5",fill:g>.7||g<.2?"#ffeb3b":"#cfd8dc",opacity:g>.7||g<.2?.9:.6,rx:"0.2"}),t.jsx("line",{x1:"2.75",y1:"-8.5",x2:"2.75",y2:"-6",stroke:"#37474f",strokeWidth:"0.2"}),t.jsx("line",{x1:"1.5",y1:"-7.25",x2:"4",y2:"-7.25",stroke:"#37474f",strokeWidth:"0.2"}),t.jsx("rect",{x:"6",y:"-8.5",width:"2.5",height:"2.5",fill:g>.7||g<.2?"#ffeb3b":"#cfd8dc",opacity:g>.7||g<.2?.9:.6,rx:"0.2"}),t.jsx("line",{x1:"7.25",y1:"-8.5",x2:"7.25",y2:"-6",stroke:"#37474f",strokeWidth:"0.2"}),t.jsx("line",{x1:"6",y1:"-7.25",x2:"8.5",y2:"-7.25",stroke:"#37474f",strokeWidth:"0.2"})]}),t.jsx("rect",{x:"3.5",y:"-4.5",width:"3",height:"4.5",fill:"#4e342e",rx:"0.3"}),t.jsx("circle",{cx:"6",cy:"-2.5",r:"0.3",fill:"#ffd54f"}),D.detail==="chimney"&&t.jsxs("g",{transform:"translate(7.5, -14)",children:[t.jsx("rect",{x:"-0.5",y:"0",width:"1.5",height:"4",fill:"#3e2723"}),t.jsx("rect",{x:"-0.5",y:"0",width:"0.3",height:"4",fill:"#000",opacity:"0.2"}),t.jsx("circle",{cy:"-1",r:"1.2",fill:"#e0e0e0",opacity:"0.7",className:"smoke-particle",style:{animationDelay:`${ne.id*.5}s`}}),t.jsx("circle",{cy:"-1",r:"0.8",fill:"#f5f5f5",opacity:"0.5",className:"smoke-particle",style:{animationDelay:`${ne.id*.5+.3}s`}})]}),D.detail==="glass"&&m>1e3&&t.jsx("rect",{x:"1",y:"-9",width:"8",height:"1",fill:"#4fc3f7",opacity:"0.3"})]})]},`h-${ne.id}`)),S.map(ne=>t.jsx("g",{transform:`translate(${ne.startX}, ${ne.y}) scale(${ne.scale})`,children:t.jsx("g",{style:{animation:`walk ${ne.duration}s linear infinite`,animationDelay:`${ne.delay}s`},children:t.jsxs("g",{className:"pedestrian-bob",children:[t.jsx("circle",{cx:"0",cy:"-5.5",r:"1.2",fill:ne.color}),t.jsx("ellipse",{cx:"0",cy:"-3",rx:"1.2",ry:"2",fill:ne.color}),t.jsx("line",{x1:"-1.2",y1:"-3.5",x2:"-2",y2:"-1.5",stroke:ne.color,strokeWidth:"0.6",strokeLinecap:"round"}),t.jsx("line",{x1:"1.2",y1:"-3.5",x2:"2",y2:"-1.5",stroke:ne.color,strokeWidth:"0.6",strokeLinecap:"round"}),t.jsx("line",{x1:"-0.5",y1:"-1",x2:"-1",y2:"1",stroke:ne.color,strokeWidth:"0.8",strokeLinecap:"round"}),t.jsx("line",{x1:"0.5",y1:"-1",x2:"1",y2:"1",stroke:ne.color,strokeWidth:"0.8",strokeLinecap:"round"}),t.jsx("ellipse",{cx:"0",cy:"1.2",rx:"1.5",ry:"0.5",fill:"#000",opacity:"0.2"})]})})},`ped-${ne.id}`)),t.jsxs("g",{id:"weather",children:[G&&t.jsxs("g",{opacity:"0.8",style:{transition:"opacity 2s ease-in-out"},children:[t.jsxs("g",{className:"cloud-anim",style:{animationDuration:`${60/w}s`},children:[t.jsx("ellipse",{cx:"20",cy:"25",rx:"12",ry:"6",fill:C.cloudColor,opacity:"0.7"}),t.jsx("ellipse",{cx:"30",cy:"23",rx:"15",ry:"7",fill:C.cloudColor,opacity:"0.8"}),t.jsx("ellipse",{cx:"42",cy:"25",rx:"13",ry:"6",fill:C.cloudColor,opacity:"0.7"}),t.jsx("ellipse",{cx:"30",cy:"28",rx:"18",ry:"5",fill:C.cloudColor,opacity:"0.6"})]}),t.jsxs("g",{className:"cloud-anim",style:{animationDuration:`${45/w}s`,animationDelay:"-10s"},children:[t.jsx("ellipse",{cx:"100",cy:"18",rx:"14",ry:"7",fill:C.cloudColor,opacity:"0.75"}),t.jsx("ellipse",{cx:"112",cy:"16",rx:"16",ry:"8",fill:C.cloudColor,opacity:"0.85"}),t.jsx("ellipse",{cx:"125",cy:"18",rx:"14",ry:"7",fill:C.cloudColor,opacity:"0.75"}),t.jsx("ellipse",{cx:"112",cy:"22",rx:"20",ry:"6",fill:C.cloudColor,opacity:"0.65"})]})]}),be&&o!==""&&[...Array(50)].map((ne,ae)=>{const se=Math.random()*240-20,je=w*3;return t.jsx("line",{x1:se,y1:0,x2:se+je,y2:20,stroke:"#4fc3f7",strokeWidth:"0.4",strokeOpacity:"0.6",className:"rain-drop",style:{animationDuration:`${.4+Math.random()*.3}s`,animationDelay:`${Math.random()}s`}},`rain-${ae}`)}),o===""&&x<.6&&[...Array(30)].map((ne,ae)=>t.jsx("circle",{cx:Math.random()*240-20,cy:Math.random()*120,r:Math.random()*1.2+.5,fill:"#ffffff",opacity:"0.8",className:"rain-drop",style:{animationDuration:`${1+Math.random()}s`,animationDelay:`${Math.random()}s`}},`snow-${ae}`)),m>800&&!P&&[...Array(8)].map((ne,ae)=>t.jsxs("g",{children:[t.jsx("circle",{cx:40+Math.random()*120,cy:95,r:"1",fill:"#ffd700",className:"smoke-particle",style:{animationDelay:`${ae*.3}s`}}),t.jsx("circle",{cx:40+Math.random()*120,cy:95,r:"0.5",fill:"#ffeb3b",className:"smoke-particle",style:{animationDelay:`${ae*.3+.15}s`}})]},`wealth-${ae}`)),Pe&&g>.2&&g<.8&&t.jsx("g",{opacity:"0.4",children:[...Array(3)].map((ne,ae)=>t.jsx("line",{x1:C.sunX,y1:C.sunY,x2:30+ae*70,y2:100,stroke:"#fff176",strokeWidth:"0.5",opacity:"0.3",className:"shimmer-effect",style:{animationDelay:`${ae*.5}s`}},`ray-${ae}`))}),c<70&&t.jsx("rect",{x:"0",y:"0",width:"200",height:"150",fill:"#000",opacity:Math.max(0,(70-c)/200),style:{transition:"opacity 3s ease-in-out"}})]})]}),t.jsxs("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-b from-gray-900/80 to-transparent px-3 py-2 flex items-center justify-between text-xs pointer-events-none z-10",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{style:{color:T.treeLeaf&&!Array.isArray(T.treeLeaf)?T.treeLeaf:T.grass},className:"text-sm",children:""}),t.jsx("span",{className:"text-white text-[11px] font-medium",children:o})]}),t.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-300",children:[t.jsxs("span",{children:["T",b]}),t.jsx("span",{className:"text-gray-500",children:"|"}),t.jsxs("span",{children:["",d]})]}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[c<40&&t.jsx("span",{className:"text-red-400 animate-pulse",children:""}),c>=40&&c<70&&t.jsx("span",{className:"text-yellow-400",children:""}),be&&t.jsx("span",{className:"text-blue-300",children:""}),Pe&&t.jsx("span",{className:"text-yellow-400",children:""}),m>1500&&t.jsx("span",{className:"text-amber-400",children:""}),t.jsx("span",{className:"text-gray-300",children:g>.25&&g<.75?"":""})]})]})]})}const Gj=({building:s,count:o,epoch:d,techsUnlocked:c,jobFill:m,anchorElement:b,cost:g,resources:v})=>{if(!s||!b)return null;const[x,y]=L.useState({top:0,left:0}),w=L.useRef(null);return L.useEffect(()=>{if(b&&w.current){const k=b.getBoundingClientRect(),M=w.current.getBoundingClientRect();let z=k.top,C=k.right+8;C+M.width>window.innerWidth&&(C=k.left-M.width-8),z<0&&(z=0),z+M.height>window.innerHeight&&(z=window.innerHeight-M.height),y({top:z,left:C})}},[b,s,o]),Qn.createPortal(t.jsxs("div",{ref:w,className:"fixed w-72 bg-gray-800 border border-gray-600 rounded-lg shadow-2xl p-3 z-[9999] pointer-events-none animate-fade-in-fast",style:{top:`${x.top}px`,left:`${x.left}px`},children:[t.jsx("h4",{className:"text-sm font-bold text-white mb-1 font-decorative",children:s.name}),t.jsx("p",{className:"text-xs text-gray-300 mb-2",children:s.desc}),s.owner&&t.jsxs("div",{className:"text-[10px] text-yellow-200 bg-yellow-900/40 border border-yellow-600/40 rounded px-2 py-1 mb-2 inline-flex items-center gap-1",children:[t.jsx(j,{name:"User",size:10,className:"text-yellow-300"}),": ",Fe[s.owner]?.name||s.owner]}),g&&Object.keys(g).length>0&&t.jsxs("div",{className:"glass-ancient rounded px-2 py-1.5 mb-2 text-xs border border-ancient-gold/20",children:[t.jsx("div",{className:"text-[10px] text-gray-300 mb-1",children:""}),Object.entries(g).map(([k,M])=>{const z=(v[k]||0)>=M;return t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-200",children:Oe[k]?.name||k}),t.jsx("span",{className:`font-mono ${z?"text-green-400":"text-red-400"}`,children:M})]},`cost-${k}`)})]}),(()=>{const k=ho(s.output,d,c),M=ho(s.input,d,c);return Object.keys(k).length===0&&Object.keys(M).length===0?null:t.jsxs("div",{className:"glass-ancient rounded px-2 py-1.5 mb-2 text-xs border border-ancient-gold/20",children:[t.jsx("div",{className:"text-[10px] text-gray-300 mb-1",children:"/"}),Object.entries(k).map(([z,C])=>t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-200",children:Oe[z]?.name||z}),t.jsxs("span",{className:"text-green-400 font-mono",children:["+",C]})]},`out-${z}`)),Object.entries(M).map(([z,C])=>t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-200",children:Oe[z]?.name||z}),t.jsxs("span",{className:"text-red-400 font-mono",children:["-",C]})]},`in-${z}`))]})})(),s.jobs&&t.jsxs("div",{className:"glass-ancient rounded px-2 py-1.5 mb-2 text-xs border border-ancient-gold/20",children:[t.jsx("div",{className:"text-[10px] text-gray-300 mb-1",children:""}),Object.entries(s.jobs).map(([k,M])=>{const z=M*o,C=m?.[s.id]?.[k]??0,T=z>0?Math.min(1,C/z)*100:0;return t.jsxs("div",{className:"mb-1.5",children:[t.jsxs("div",{className:"flex justify-between text-[11px] text-gray-300",children:[t.jsx("span",{className:"text-gray-200 font-semibold",children:Fe[k]?.name||k}),t.jsxs("span",{className:"font-mono text-gray-200",children:[Math.round(C),"/",Math.round(z)]})]}),t.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 mb-0.5",children:[t.jsxs("span",{children:[" ",M]}),t.jsxs("span",{children:[" ",Math.round(z)]})]}),t.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1",children:t.jsx("div",{className:"h-1 rounded-full bg-blue-500",style:{width:`${T}%`}})})]},k)})]}),t.jsx("div",{className:"text-[10px] text-center text-gray-400 pt-1 border-t border-gray-700",children:""})]}),document.body)},Fj=s=>s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e4?(s/1e3).toFixed(0)+"k":s>=1e3?(s/1e3).toFixed(1)+"k":Math.floor(s).toString(),Ij=({building:s,count:o,affordable:d,silverCost:c,ownerIncome:m,onBuy:b,onSell:g,onShowDetails:v,cost:x,onMouseEnter:y,onMouseLeave:w,epoch:k,techsUnlocked:M,jobFill:z,resources:C})=>{const T=j;return t.jsxs("div",{className:"group relative flex flex-col h-full glass-ancient border border-ancient-gold/20 rounded-lg p-1.5 text-center transition-all hover:border-ancient-gold/40 hover:shadow-glow-gold",onMouseEnter:y,onMouseLeave:w,children:[t.jsxs("div",{className:"flex-grow flex flex-col items-center cursor-pointer",onClick:()=>v(s.id),children:[t.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg flex items-center justify-center mb-0.5 icon-metal-container",children:t.jsx(T,{name:s.visual.icon,size:14,className:`${s.visual.text} icon-metal`})}),t.jsxs("div",{className:"flex items-baseline gap-0.5",children:[t.jsx("h4",{className:"text-[12px] font-bold text-ancient-parchment leading-tight truncate max-w-[60px]",children:s.name}),o>0&&t.jsxs("p",{className:"text-[8px] font-bold text-ancient-gold",children:["",o]})]})]}),o>0&&t.jsxs("div",{className:"space-y-0.5 text-[9px] my-1",children:[s.jobs&&Object.keys(s.jobs).length>0&&t.jsx("div",{className:"bg-gray-900/40 rounded px-1 py-0.5",children:Object.entries(s.jobs).map(([D,E])=>{const S=E*o,q=z?.[s.id]?.[D]??0,W=S>0?Math.min(1,q/S)*100:0;return t.jsxs("div",{className:"flex items-center gap-0.5",title:`${Fe[D]?.name}: ${Math.round(q)}/${Math.round(S)}`,children:[t.jsx(j,{name:Fe[D]?.icon||"User",size:8,className:"text-gray-400 flex-shrink-0"}),t.jsx("div",{className:"flex-1 bg-gray-700 rounded-full h-1",children:t.jsx("div",{className:"h-1 rounded-full bg-green-500",style:{width:`${W}%`}})}),t.jsxs("span",{className:"font-mono text-[8px] text-gray-300 whitespace-nowrap",children:[Math.round(q),"/",Math.round(S)]})]},D)})}),(()=>{const D=ho(s.output,k,M);return Object.keys(D).length===0?null:t.jsx("div",{className:"bg-gray-900/40 rounded px-1 py-0.5",children:t.jsx("div",{className:"flex flex-wrap gap-0.5 justify-center",children:Object.entries(D).map(([E,S])=>{const q=Object.values(s.jobs||{}).reduce((P,pe)=>P+pe*o,0),W=Object.values(z?.[s.id]||{}).reduce((P,pe)=>P+pe,0),be=q>0?Math.min(1,W/q):1,G=S*o*be;return t.jsxs("div",{className:"flex items-center gap-0.5 text-green-300",title:`${Oe[E]?.name} - : ${S} / : ${G.toFixed(1)}`,children:[t.jsx(j,{name:Oe[E]?.icon||"Box",size:8}),t.jsxs("span",{className:"font-mono text-[9px]",children:["+",G.toFixed(0)]})]},E)})})})})()]}),t.jsxs("div",{className:"mt-auto pt-0.5 flex flex-col gap-0.5",children:[t.jsxs("button",{onClick:D=>{D.stopPropagation(),b(s.id)},disabled:!d,className:`w-full px-1 py-0.5 rounded text-[10px] font-semibold transition-all ${d?"bg-green-600/80 hover:bg-green-500 text-white":"bg-gray-700/60 text-gray-400 cursor-not-allowed"} flex items-center justify-center gap-0.5`,title:`: ${c.toFixed(0)} `,children:[t.jsx(j,{name:"Plus",size:8,className:"flex-shrink-0"}),t.jsx(j,{name:"Coins",size:8,className:"text-yellow-300 opacity-80 flex-shrink-0"}),t.jsx("span",{className:`truncate ${d?"":"text-red-300"}`,children:Fj(c)})]}),o>0&&t.jsxs("button",{onClick:D=>{D.stopPropagation(),g(s.id)},className:"w-full px-1 py-0.5 bg-red-600/80 hover:bg-red-500 text-white rounded text-[10px] font-semibold transition-all flex items-center justify-center gap-0.5",title:"",children:[t.jsx(j,{name:"Minus",size:8}),t.jsx("span",{children:""})]})]})]})},Yj=({buildings:s,resources:o,epoch:d,techsUnlocked:c,popStructure:m={},jobFill:b={},onBuy:g,onSell:v,onShowDetails:x,market:y})=>{const[w,k]=L.useState({building:null,element:null}),M=window.matchMedia("(hover: hover)").matches,z=(pe,Pe,ne,ae)=>{M&&k({building:Pe,element:pe.currentTarget,cost:ne,resources:ae})},C=new Set(["maxPop"]),T=pe=>{if(!pe||pe==="silver")return 1;const Pe=Oe[pe];return!Pe||C.has(pe)?0:y?.prices?.[pe]??Pe.basePrice??0},D=(pe,Pe)=>{if(Pe===0)return 0;const ne=Object.values(pe.jobs||{}).reduce((F,me)=>F+me*Pe,0),ae=Object.values(b?.[pe.id]||{}).reduce((F,me)=>F+me,0),se=ne>0?Math.min(1,ae/ne):1,je=Object.entries(pe.output||{}).reduce((F,[me,h])=>F+T(me)*h*se,0),de=Object.entries(pe.input||{}).reduce((F,[me,h])=>F+T(me)*h*se,0),I=Object.entries(b?.[pe.id]||{}).reduce((F,[me,h])=>{const A=y?.wages?.[me]??0;return F+A*(h/Pe)},0),_=je-de-I,B=pe.owner&&y?.wages?.[pe.owner]?y.wages[pe.owner]*(pe.jobs[pe.owner]||0):0,re=pe.jobs?.[pe.owner]||1;return(_+B)/re},E=pe=>!(pe.epoch>d||pe.requiresTech&&!c.includes(pe.requiresTech)),S=pe=>{const Pe=s[pe.id]||0,ne={};for(let ae in pe.baseCost)ne[ae]=Math.ceil(pe.baseCost[ae]*Math.pow(1.15,Pe));return ne},q={gather:{name:"",icon:"Wheat",color:"text-yellow-400"},industry:{name:"",icon:"Factory",color:"text-blue-400"},civic:{name:"",icon:"Home",color:"text-green-400"},military:{name:"",icon:"Swords",color:"text-red-400"}},W=[{key:"all",label:""},{key:"gather",label:""},{key:"industry",label:""},{key:"civic",label:""},{key:"military",label:""}],[be,G]=L.useState("all"),P=be==="all"?Object.entries(q):Object.entries(q).filter(([pe])=>pe===be);return t.jsxs("div",{className:"space-y-4 build-tab",children:[t.jsx("div",{className:"flex flex-wrap gap-2 pb-1 border-b border-gray-700/60 mb-3",children:W.map(pe=>{const Pe=pe.key===be;return t.jsx("button",{onClick:()=>G(pe.key),className:`px-3 py-1.5 rounded-full text-xs font-semibold transition-colors ${Pe?"bg-blue-600 text-white shadow-inner":"bg-gray-700/70 text-gray-300 hover:bg-gray-600/60"}`,"aria-pressed":Pe,children:pe.label},pe.key)})}),P.map(([pe,Pe])=>{const ne=Tn.filter(ae=>ae.cat===pe);return t.jsxs("div",{className:"glass-ancient p-4 rounded-xl border border-ancient-gold/30",children:[t.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300 font-decorative",children:[t.jsx(j,{name:Pe.icon,size:16,className:Pe.color}),Pe.name]}),t.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-7 xl:grid-cols-9 2xl:grid-cols-11 gap-1",children:ne.filter(ae=>E(ae)).map(ae=>{const se=S(ae),je=Ws(se,y),de=Object.entries(se).every(([F,me])=>(o[F]||0)>=me),I=(o.silver||0)>=je,_=de&&I,B=s[ae.id]||0,re=D(ae,B);return t.jsx(Ij,{building:ae,count:B,affordable:_,silverCost:je,ownerIncome:re,cost:se,onBuy:g,onSell:v,onMouseEnter:F=>z(F,ae,se,o),onMouseLeave:()=>M&&k({building:null,element:null}),epoch:d,techsUnlocked:c,jobFill:b,resources:o,onShowDetails:x},ae.id)})})]},pe)}),t.jsx(Gj,{building:w.building,anchorElement:w.element,count:w.building&&s[w.building.id]||0,epoch:d,techsUnlocked:c,jobFill:b,cost:w.cost,resources:o})]})},Xj=({unit:s,resources:o,market:d,militaryWageRatio:c,anchorElement:m})=>{const b=L.useRef(null),[g,v]=L.useState({width:288,height:400});L.useLayoutEffect(()=>{if(b.current){const w=b.current.getBoundingClientRect();w.width>0&&w.height>0&&v({width:w.width,height:w.height})}},[s]);const x=L.useMemo(()=>{if(!m)return{top:0,left:0};const w=m.getBoundingClientRect();let k=w.top,M=w.right+8;return M+g.width>window.innerWidth&&(M=w.left-g.width-8),k<0&&(k=0),k+g.height>window.innerHeight&&(k=window.innerHeight-g.height),{top:k,left:M}},[m,g]);if(!s||!m)return null;const y=Ws(s.recruitCost,d);return Qn.createPortal(t.jsxs("div",{ref:b,className:"fixed w-72 bg-gray-800 border border-gray-600 rounded-lg shadow-2xl p-3 z-[9999] pointer-events-none animate-fade-in-fast",style:{top:`${x.top}px`,left:`${x.left}px`},children:[t.jsx("h4",{className:"text-sm font-bold text-white mb-1 font-decorative",children:s.name}),t.jsx("p",{className:"text-xs text-gray-400 mb-2",children:s.type}),t.jsxs("div",{className:"bg-gray-900/50 rounded px-2 py-1.5 mb-2",children:[t.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:""}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(j,{name:"Sword",size:12,className:"text-red-400"}),t.jsx("span",{className:"text-gray-300",children:":"}),t.jsx("span",{className:"text-white",children:s.attack})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(j,{name:"Shield",size:12,className:"text-blue-400"}),t.jsx("span",{className:"text-gray-300",children:":"}),t.jsx("span",{className:"text-white",children:s.defense})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(j,{name:"Clock",size:12,className:"text-purple-400"}),t.jsx("span",{className:"text-gray-300",children:":"}),t.jsxs("span",{className:"text-white",children:[s.trainingTime,""]})]})]}),t.jsxs("div",{className:"text-xs mt-2 pt-2 border-t border-gray-700",children:[t.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:":"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(s.maintenanceCost||{}).map(([w,k])=>k>0&&t.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 bg-gray-800 rounded text-gray-300",children:[Oe[w]?.name||w,": -",k.toFixed(1)]},w))}),t.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[t.jsx(j,{name:"Coins",size:12,className:"text-yellow-400"}),t.jsx("span",{className:"text-gray-300",children:":"}),t.jsxs("span",{className:"text-yellow-300",children:[((s.maintenanceCost?.silver||0)*c).toFixed(2)," /"]})]})]})]}),(Object.keys(s.counters||{}).length>0||(s.weakAgainst||[]).length>0)&&t.jsxs("div",{className:"bg-gray-900/50 rounded px-2 py-1.5 mb-2",children:[t.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:""}),Object.keys(s.counters||{}).length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1 mb-1",children:[t.jsx("span",{className:"text-[10px] text-green-400",children:":"}),Object.entries(s.counters).map(([w,k])=>t.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 bg-green-900/40 rounded text-green-300",children:[Ci[w]?.name||w," +",Math.round((k-1)*100),"%"]},w))]}),(s.weakAgainst||[]).length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.jsx("span",{className:"text-[10px] text-red-400",children:":"}),s.weakAgainst.map(w=>t.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-red-900/40 rounded text-red-300",children:Ci[w]?.name||w},w))]})]}),t.jsxs("div",{className:"bg-gray-900/50 rounded px-2 py-1.5 mb-2",children:[t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:"text-gray-400",children:""}),t.jsx("span",{className:Ci[s.category]?.color||"text-white",children:Ci[s.category]?.name||s.category})]}),t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:"text-gray-400",children:""}),t.jsx("span",{className:"text-white",children:Qa[s.epoch]?.name||`${s.epoch}`})]}),t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:"text-gray-400",children:""}),t.jsxs("span",{className:"text-yellow-400",children:["+",s.obsoleteAfterEpochs||2,""]})]})]}),t.jsxs("div",{className:"bg-gray-900/50 rounded px-2 py-1.5",children:[t.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:""}),Object.entries(s.recruitCost).map(([w,k])=>t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:"text-gray-300",children:Oe[w]?.name||w}),t.jsxs("span",{className:(o[w]||0)>=k?"text-green-400":"text-red-400",children:[k," (",(o[w]||0).toFixed(1),")"]})]},w)),t.jsxs("div",{className:"flex justify-between text-xs pt-1 border-t border-gray-700 mt-1",children:[t.jsx("span",{className:"text-gray-300",children:""}),t.jsx("span",{className:(o.silver||0)>=y?"text-green-400":"text-red-400",children:Ei(y)})]})]})]}),document.body)},Zj=({army:s,militaryQueue:o,resources:d,epoch:c,population:m,buildings:b={},nations:g=[],selectedTarget:v,onRecruit:x,onDisband:y,onCancelTraining:w,onSelectTarget:k,onLaunchBattle:M,market:z,militaryWageRatio:C=1,onUpdateWageRatio:T,techsUnlocked:D=[],onShowUnitDetails:E})=>{const[S,q]=L.useState({unit:null,element:null}),W=window.matchMedia("(hover: hover)").matches,be=(h,A)=>{W&&q({unit:A,element:h.currentTarget})},G=Object.values(s).reduce((h,A)=>h+A,0),P=(o||[]).filter(h=>h.status==="waiting").length,pe=(o||[]).filter(h=>h.status==="training").length,Pe=G+P+pe;let ne=0;Object.entries(b).forEach(([h,A])=>{const Y=Tn.find(R=>R.id===h);Y&&Y.output?.militaryCapacity&&(ne+=Y.output.militaryCapacity*A)});const ae=th(s),se=Hd(s),je=z?.prices?.food??(Oe.food?.basePrice||1),de=se*je*C,I=Tc(s,c),_=(g||[]).filter(h=>h.isAtWar&&c>=(h.appearEpoch??0)&&(h.expireEpoch==null||c<=h.expireEpoch)),B=_.find(h=>h.id===v)||_[0]||null;Xn.useEffect(()=>{!B&&_.length>0&&k&&k(_[0].id)},[B,_,k]);const re=h=>{if(!Array.isArray(h)||h.length<2)return"";const[A,Y]=h;return`${A}-${Y}`},F=h=>{if(h.epoch>c)return!1;for(let Y in h.recruitCost)if((d[Y]||0)<h.recruitCost[Y])return!1;const A=Ws(h.recruitCost,z);return!((d.silver||0)<A||Pe+1>ne)},me=h=>{if(h.epoch>c)return` ${Qa[h.epoch].name}`;for(let Y in h.recruitCost)if((d[Y]||0)<h.recruitCost[Y])return` ${Oe[Y]?.name||Y}`;const A=Ws(h.recruitCost,z);return(d.silver||0)<A?` ${A.toFixed(1)} `:Pe+1>ne?`${Pe}/${ne}`:""};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"glass-ancient p-4 rounded-xl border border-ancient-gold/30",children:[t.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300 font-decorative",children:[t.jsx(j,{name:"Shield",size:16,className:"text-red-400"}),""]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[t.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(j,{name:"Users",size:14,className:"text-blue-400"}),t.jsx("span",{className:"text-xs text-gray-400",children:""})]}),t.jsx("p",{className:"text-lg font-bold text-white",children:G})]}),t.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(j,{name:"Castle",size:14,className:"text-red-400"}),t.jsx("span",{className:"text-xs text-gray-400",children:""})]}),t.jsxs("p",{className:`text-lg font-bold ${Pe>ne?"text-red-400":"text-white"}`,children:[Pe," / ",ne]})]}),t.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(j,{name:"Clock",size:14,className:"text-yellow-400"}),t.jsx("span",{className:"text-xs text-gray-400",children:""})]}),t.jsx("p",{className:"text-lg font-bold text-white",children:o.length})]})]}),(()=>{const h=ho(ae,c,D);return Object.keys(h).length>0&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-2",children:""}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(h).map(([A,Y])=>t.jsxs("span",{className:`text-xs px-2 py-1 rounded ${(d[A]||0)>=Y?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:[Oe[A]?.name||A,": -",Y.toFixed(1),"/"]},A))})]})})(),t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-2",children:""}),t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(j,{name:"Coins",size:14,className:"text-yellow-400"}),t.jsxs("span",{className:"text-yellow-300 font-mono",children:["-",de.toFixed(2)," "]})]}),t.jsxs("div",{className:"mt-2 flex items-center gap-2 text-[11px] text-gray-400",children:[t.jsx("span",{children:""}),t.jsx("input",{type:"number",step:"0.1",value:C,onChange:h=>T&&T(parseFloat(h.target.value)||0),className:"w-20 bg-gray-900/60 border border-gray-700 rounded px-2 py-0.5 text-xs text-gray-100"}),t.jsx("span",{className:"text-gray-500",children:" =     "})]})]})]}),t.jsxs("div",{className:"glass-ancient p-3 rounded-xl border border-ancient-gold/30",children:[t.jsxs("h3",{className:"text-xs font-bold mb-2 flex items-center gap-2 text-gray-300 font-decorative",children:[t.jsx(j,{name:"Info",size:14,className:"text-blue-400"}),""]}),t.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px]",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-red-400 font-semibold",children:""}),t.jsx(j,{name:"ArrowRight",size:10,className:"text-green-400"}),t.jsx("span",{className:"text-blue-400 font-semibold",children:""}),t.jsx("span",{className:"text-gray-500 ml-1",children:"()"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-blue-400 font-semibold",children:""}),t.jsx(j,{name:"ArrowRight",size:10,className:"text-green-400"}),t.jsx("span",{className:"text-green-400 font-semibold",children:""}),t.jsx("span",{className:"text-gray-500 ml-1",children:"()"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-green-400 font-semibold",children:""}),t.jsx(j,{name:"ArrowRight",size:10,className:"text-green-400"}),t.jsx("span",{className:"text-red-400 font-semibold",children:""}),t.jsx("span",{className:"text-gray-500 ml-1",children:"()"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-yellow-400 font-semibold",children:""}),t.jsx(j,{name:"ArrowRight",size:10,className:"text-green-400"}),t.jsx("span",{className:"text-red-400 font-semibold",children:""}),t.jsx("span",{className:"text-gray-500",children:"/"}),t.jsx("span",{className:"text-blue-400 font-semibold",children:""}),t.jsx("span",{className:"text-gray-500 ml-1",children:"()"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-blue-400 font-semibold",children:""}),t.jsx(j,{name:"ArrowRight",size:10,className:"text-green-400"}),t.jsx("span",{className:"text-yellow-400 font-semibold",children:""}),t.jsx("span",{className:"text-gray-500 ml-1",children:"()"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-orange-400 font-semibold",children:""}),t.jsx("span",{className:"text-gray-400",children:" "})]}),t.jsxs("div",{className:"flex items-center gap-1 border-l border-gray-700 pl-3",children:[t.jsx(j,{name:"AlertTriangle",size:10,className:"text-yellow-400"}),t.jsx("span",{className:"text-yellow-400",children:"2"})]})]})]}),t.jsxs("div",{className:"glass-ancient p-4 rounded-xl border border-ancient-gold/30",children:[t.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300 font-decorative",children:[t.jsx(j,{name:"Plus",size:16,className:"text-green-400"}),""]}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2",children:Object.entries(Sn).filter(([,h])=>{if(h.epoch>c)return!1;const A=c-h.epoch,Y=h.obsoleteAfterEpochs||2;return A<=Y}).map(([h,A])=>{const Y=Ws(A.recruitCost,z),R=F(A),Q=Ci[A.category]||{},ye=Q.color||"text-red-400";return t.jsxs("div",{onMouseEnter:Ne=>be(Ne,A),onMouseLeave:()=>W&&q({unit:null,element:null}),onClick:()=>E&&E(A),className:`group relative p-2 rounded-lg border transition-all cursor-pointer ${R?"glass-ancient border border-ancient-gold/30 hover:border-red-500/60 hover:shadow-glow-gold":"bg-gray-700/50 border border-ancient-gold/20"}`,children:[t.jsxs("div",{className:"flex flex-col items-center mb-2",children:[t.jsx("div",{className:"w-12 h-12 icon-metal-container icon-metal-container-lg rounded-lg flex items-center justify-center mb-1",children:t.jsx(j,{name:A.icon||"Swords",size:24,className:`${ye} icon-metal-red`})}),t.jsx("h4",{className:"text-xs font-bold text-center leading-tight text-white font-decorative",children:A.name}),t.jsxs("p",{className:"text-[10px] text-gray-400",children:["",s[h]||0]}),t.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded-full mt-0.5 ${Q.color?.replace("text-","bg-").replace("-400","-900/50")} ${ye}`,children:Q.name})]}),t.jsxs("div",{className:"space-y-1 text-[10px] mb-2",children:[t.jsxs("div",{className:"bg-gray-900/40 rounded px-1.5 py-1 flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"/"}),t.jsxs("span",{className:"text-white",children:[A.attack,"/",A.defense]})]}),t.jsxs("div",{className:"bg-gray-900/40 rounded px-1.5 py-1",children:[t.jsxs("div",{className:"flex justify-between mb-0.5",children:[t.jsx("span",{className:"text-gray-400",children:""}),t.jsxs("span",{className:"text-yellow-300 text-[9px]",children:[((A.maintenanceCost?.silver||0)*C).toFixed(1),"/"]})]}),Object.entries(A.maintenanceCost||{}).filter(([Ne,ke])=>Ne!=="food"&&Ne!=="silver"&&ke>0).length>0&&t.jsx("div",{className:"flex flex-wrap gap-0.5 text-[8px]",children:Object.entries(A.maintenanceCost||{}).filter(([Ne,ke])=>Ne!=="food"&&Ne!=="silver"&&ke>0).map(([Ne,ke])=>t.jsxs("span",{className:"text-gray-400",children:[Oe[Ne]?.name?.slice(0,1)||Ne,":",ke.toFixed(1)]},Ne))})]}),Object.keys(A.counters||{}).length>0&&t.jsxs("div",{className:"bg-green-900/30 rounded px-1.5 py-1 flex justify-between",children:[t.jsx("span",{className:"text-green-400",children:""}),t.jsx("span",{className:"text-green-300 text-[9px]",children:Object.entries(A.counters).map(([Ne,ke])=>`${Ci[Ne]?.name||Ne}+${Math.round((ke-1)*100)}%`).join(", ")})]})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),x(h)},disabled:!R,title:R?"":me(A),className:`w-full px-2 py-1 rounded text-[10px] font-semibold transition-colors ${R?"bg-green-600 hover:bg-green-500 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:t.jsxs("div",{className:"flex items-center justify-center gap-1",children:[t.jsx(j,{name:"Plus",size:10}),t.jsx("span",{className:(d.silver||0)<Y?"text-red-300":"",children:Ei(Y)})]})}),(s[h]||0)>0&&t.jsxs("button",{onClick:Ne=>{Ne.stopPropagation(),y(h)},className:"w-full px-2 py-1 bg-red-600 hover:bg-red-500 text-white rounded text-[10px] font-semibold transition-colors flex items-center justify-center gap-1",children:[t.jsx(j,{name:"Minus",size:10}),""]})]})]},h)})})]}),o.length>0&&t.jsxs("div",{className:"glass-ancient p-4 rounded-xl border border-ancient-gold/30",children:[t.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300 font-decorative",children:[t.jsx(j,{name:"Clock",size:16,className:"text-yellow-400"}),""]}),t.jsx("div",{className:"space-y-2",children:o.map((h,A)=>{const Y=Sn[h.unitId],R=h.status==="waiting",Q=R?0:(h.totalTime-h.remainingTime)/h.totalTime*100;return t.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${R?"bg-gray-700/30 border border-dashed border-gray-600":"bg-gray-700/50"}`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{name:R?"UserPlus":"User",size:14,className:R?"text-gray-400":"text-blue-400"}),t.jsx("span",{className:`text-sm ${R?"text-gray-400":"text-white"}`,children:Y.name}),R&&t.jsx("span",{className:"text-xs text-yellow-400",children:"..."})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[!R&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-32 bg-gray-600 rounded-full h-2",children:t.jsx("div",{className:"bg-yellow-500 h-2 rounded-full transition-all",style:{width:`${Q}%`}})}),t.jsxs("span",{className:"text-xs text-gray-400 w-12 text-right",children:[h.remainingTime,""]})]}),R&&t.jsx("span",{className:"text-xs text-gray-500 w-44 text-right",children:""}),t.jsx("button",{onClick:()=>w&&w(A),className:"ml-2 p-1 rounded hover:bg-red-900/30 text-red-400 hover:text-red-300 transition-colors",title:"50%",children:t.jsx(j,{name:"X",size:14})})]})]},A)})})]}),t.jsxs("div",{className:"glass-ancient p-4 rounded-xl border border-ancient-gold/30",children:[t.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300 font-decorative",children:[t.jsx(j,{name:"Swords",size:16,className:"text-red-400"}),""]}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-3",children:[t.jsxs("span",{children:["",t.jsx("span",{className:"text-white font-semibold",children:I.toFixed(0)})]}),t.jsxs("span",{children:["",t.jsx("span",{className:"text-white font-semibold",children:G})]})]}),_.length===0?t.jsx("div",{className:"p-3 rounded bg-gray-900/40 border border-gray-700 text-xs text-gray-400",children:""}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-gray-400 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:""}),t.jsx("select",{value:B?.id||"",onChange:h=>k&&k(h.target.value),className:"bg-gray-900/60 border border-gray-700 text-white rounded px-2 py-1",children:_.map(h=>t.jsxs("option",{value:h.id,children:[h.name,"   ",h.warScore||0]},h.id))})]}),B&&t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("span",{children:["",B.warScore||0]}),t.jsxs("span",{children:["",B.enemyLosses||0]}),t.jsxs("span",{children:["",Math.floor(B.wealth||0)]}),t.jsxs("span",{children:["",Math.floor((B.militaryStrength??1)*100),"%"]}),t.jsxs("span",{children:["",Math.floor(B.population||1e3)]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Jf.map(h=>{const A=(h.enemyUnits||[]).reduce((ye,Ne)=>ye+(Ne.min||0),0),Y=(h.enemyUnits||[]).reduce((ye,Ne)=>ye+(Ne.max||Ne.min||0),0),R=!h.requiresTech||D.includes(h.requiresTech),Q=h.requiresTech?yo.find(ye=>ye.id===h.requiresTech)?.name||h.requiresTech:null;return t.jsxs("div",{className:`p-3 rounded-lg border flex flex-col gap-3 ${R?"border-gray-700 bg-gray-900/40":"border-gray-800 bg-gray-900/20 opacity-60"}`,children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"text-base font-bold text-white flex items-center gap-2 font-decorative",children:[h.name,t.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-gray-700 text-gray-200",children:h.difficulty}),!R&&t.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-red-900/50 text-red-300",children:[t.jsx(j,{name:"Lock",size:10,className:"inline mr-1"}),"",Q]})]}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.desc})]}),t.jsx(j,{name:"Target",size:18,className:R?"text-red-300":"text-gray-500"})]}),t.jsxs("div",{className:"space-y-2 text-xs text-gray-300",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:""}),t.jsxs("span",{children:[A,"-",Y," "]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-400 mb-1",children:""}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[Object.entries(h.loot||{}).map(([ye,Ne])=>t.jsxs("span",{className:"px-2 py-0.5 bg-yellow-900/20 rounded border border-yellow-600/30 text-[11px] text-yellow-200",children:[Oe[ye]?.name||ye," ",re(Ne)]},ye)),Object.keys(h.loot||{}).length===0&&t.jsx("span",{className:"text-gray-500",children:""})]})]}),h.influence&&t.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[t.jsx("span",{className:"text-gray-400",children:""}),t.jsxs("span",{className:"text-green-400",children:[" +",h.influence.win]}),t.jsxs("span",{className:"text-red-400",children:[" ",h.influence.lose]})]})]}),t.jsxs("button",{onClick:()=>M(h.id,B?.id),disabled:G===0||!B||!R,className:"px-3 py-2 bg-red-600 hover:bg-red-500 disabled:bg-gray-600 disabled:text-gray-300 disabled:cursor-not-allowed text-white rounded text-sm font-semibold transition-colors flex items-center justify-center gap-2",children:[t.jsx(j,{name:"Sword",size:14}),R?"":`${Q}`]})]},h.id)})})]}),G===0&&t.jsx("p",{className:"text-xs text-yellow-400 mt-2",children:" "})]}),t.jsx(Xj,{unit:S.unit,anchorElement:S.element,resources:d,market:z,militaryWageRatio:C})]})},uh={gatherBonus:{label:"",type:"percent"},industryBonus:{label:"",type:"percent"},cultureBonus:{label:"",type:"percent"},scienceBonus:{label:"",type:"percent"},militaryBonus:{label:"",type:"percent"}},Qj=(s,o)=>{if(uh[s]?.type==="flat")return`${o>0?"+":""}${o}`;const c=typeof o=="number"?o:Number(o)||0;return`${c>0?"+":""}${(c*100).toFixed(0)}%`},Dc=Tn.reduce((s,o)=>{if(!o.requiresTech)return s;const d=o.requiresTech;return s[d]||(s[d]=[]),s[d].push(o.name||o.id),s},{}),Cc=s=>Math.min(1,Math.max(0,s)),Jj=(s,o=1)=>{if(typeof s!="string")return`rgba(255, 255, 255, ${Cc(o)})`;const d=s.replace("#",""),c=d.length===3?d.split("").map(x=>x+x).join(""):d,m=Number.parseInt(c,16);if(Number.isNaN(m))return`rgba(255, 255, 255, ${Cc(o)})`;const b=m>>16&255,g=m>>8&255,v=m&255;return`rgba(${b}, ${g}, ${v}, ${Cc(o)})`},Of=s=>s.replace(/rgba?\(/,"").replace(")","").split(",").map(o=>parseFloat(o.trim())).filter(o=>!Number.isNaN(o)),mo=(s,o=1)=>{const d=Cc(o);if(!s)return`rgba(255, 255, 255, ${d})`;const c=s.trim();if(c.startsWith("#"))return Jj(c,d);if(c.startsWith("rgba")){const m=Of(c);if(m.length>=3){const[b,g,v]=m;return`rgba(${b}, ${g}, ${v}, ${d})`}}if(c.startsWith("rgb")){const m=Of(c);if(m.length>=3){const[b,g,v]=m;return`rgba(${b}, ${g}, ${v}, ${d})`}}return c},Kj=({tech:s,status:o,resources:d,market:c,anchorElement:m})=>{if(!s||!m)return null;const[b,g]=L.useState({top:0,left:0}),v=L.useRef(null);L.useEffect(()=>{if(m&&v.current){const y=m.getBoundingClientRect(),w=v.current.getBoundingClientRect();let k=y.top,M=y.right+8;M+w.width>window.innerWidth&&(M=y.left-w.width-8),k<0&&(k=0),k+w.height>window.innerHeight&&(k=window.innerHeight-w.height),g({top:k,left:M})}},[m,s]);const x=Ws(s.cost,c);return Qn.createPortal(t.jsxs("div",{ref:v,className:"fixed w-80 bg-gray-800 border border-gray-600 rounded-lg shadow-2xl p-3 z-[9999] pointer-events-none animate-fade-in-fast",style:{top:`${b.top}px`,left:`${b.left}px`},children:[t.jsxs("h5",{className:"text-sm font-bold text-white mb-1 flex items-center gap-1",children:[s.name,o==="unlocked"&&t.jsx(j,{name:"Check",size:14,className:"text-green-400"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-2",children:s.desc}),s.effect&&t.jsxs("div",{className:"bg-blue-900/30 rounded px-2 py-1.5 mb-2",children:[t.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:""}),t.jsx("p",{className:"text-xs text-blue-300",children:s.effect})]}),Dc[s.id]?.length>0&&t.jsxs("div",{className:"bg-amber-900/30 rounded px-2 py-1.5 mb-2",children:[t.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:""}),t.jsx("p",{className:"text-xs text-amber-300",children:Dc[s.id].join("")})]}),o!=="unlocked"&&t.jsxs("div",{className:"bg-gray-900/50 rounded px-2 py-1.5",children:[t.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:""}),Object.entries(s.cost).map(([y,w])=>t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:"text-gray-300",children:Oe[y]?.name||y}),t.jsxs("span",{className:(d[y]||0)>=w?"text-green-400":"text-red-400",children:[Math.round(w)," (",Math.round(d[y]||0),")"]})]},y)),t.jsxs("div",{className:"flex justify-between text-xs pt-1 border-t border-gray-700 mt-1",children:[t.jsx("span",{className:"text-gray-300",children:""}),t.jsx("span",{className:(d.silver||0)>=x?"text-green-400":"text-red-400",children:Ei(x)})]})]})]}),document.body)},e4=({techsUnlocked:s,epoch:o,resources:d,population:c,onResearch:m,onUpgradeEpoch:b,canUpgradeEpoch:g,market:v,onShowTechDetails:x})=>{const[y,w]=L.useState({tech:null,element:null}),k=window.matchMedia("(hover: hover)").matches,M=(h,A)=>{k&&w({tech:A,element:h.currentTarget})},z=L.useCallback(h=>{if(s.includes(h.id)||h.epoch>o)return!1;for(let Y in h.cost)if((d[Y]||0)<h.cost[Y])return!1;const A=Ws(h.cost,v);return!((d.silver||0)<A)},[s,o,d,v]),C=h=>s.includes(h.id)?"unlocked":h.epoch>o?"locked":"available",T=L.useMemo(()=>yo.reduce((h,A)=>(h[A.epoch]||(h[A.epoch]=[]),h[A.epoch].push(A),h),{}),[]),[D,E]=L.useState(()=>{const h=new Set;return Object.keys(T).forEach(A=>{const Y=parseInt(A,10),Q=(T[Y]||[]).some(ye=>!s.includes(ye.id));(Y===o||Q)&&h.add(Y)}),h}),[S,q]=L.useState(!1);L.useEffect(()=>{E(h=>{if(h.has(o))return h;const A=new Set(h);return A.add(o),A})},[o]);const W=L.useMemo(()=>Object.keys(T).map(Number).filter(h=>h<=o).sort((h,A)=>h-A),[T,o]),be=L.useMemo(()=>W.reduce((h,A)=>{const Y=T[A]||[],R=Y.length,Q=Y.filter(Ne=>s.includes(Ne.id)).length,ye=Y.some(Ne=>z(Ne));return h[A]={techs:Y,total:R,researchedCount:Q,isCompleted:R>0&&Q===R,hasResearchable:ye},h},{}),[W,T,s,z]),G=W.length>0&&W.every(h=>D.has(h)),P=h=>{E(A=>{const Y=new Set(A);return Y.has(h)?Y.delete(h):Y.add(h),Y})},pe=()=>{E(()=>G?new Set:new Set(W))},Pe=typeof o=="number"&&o>=0&&o<Qa.length?o:0,ne=Qa[Pe],ae=Pe<Qa.length-1?Qa[Pe+1]:null,se=ae?Ws(ae.cost,v):0,je=ae?(d.silver||0)>=se:!0,de=Math.min(Pe+1,Qa.length-1),I=Ac(de),_=I?.accentColor||I?.primaryColor,B=L.useMemo(()=>I?{backgroundImage:`linear-gradient(135deg, ${mo(I.secondaryColor||I.primaryColor,.35)}, ${mo(I.primaryColor,.85)})`,borderColor:I.borderColor||I.primaryColor,boxShadow:`0 8px 20px ${I.glowColor||mo(I.primaryColor,.25)}`}:{},[I]),re=L.useMemo(()=>I?{backgroundImage:`linear-gradient(90deg, ${mo(I.secondaryColor||I.primaryColor,.95)}, ${mo(I.primaryColor,.95)})`,color:I.textColor||"#fff",borderColor:I.borderColor||I.primaryColor,boxShadow:`0 4px 12px ${I.glowColor||mo(I.primaryColor,.2)}`}:{},[I]),F=o<Qa.length-1&&!!ae,me=F&&g()&&je;return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"relative p-4 rounded-2xl border-2 shadow-epic overflow-hidden transition-all",style:B,children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 font-decorative",children:[t.jsx(j,{name:"Crown",size:20,className:"drop-shadow",style:{color:_}}),"",ne?.name||""]}),t.jsx("p",{className:"text-xs text-gray-300 mt-1",children:ne?.description||""})]}),F&&t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),t.jsx("p",{className:"text-sm font-bold",style:{color:I?.textColor||"#fff"},children:ae.name})]})]}),ne?.bonuses&&t.jsxs("div",{className:"mb-3 p-3 bg-black/20 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-2",children:""}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(ne.bonuses).map(([h,A])=>h==="desc"?null:t.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[t.jsx(j,{name:"TrendingUp",size:12,className:"text-green-400"}),t.jsxs("span",{className:"text-gray-300",children:[uh[h]?.label||Oe[h]?.name||h,":",t.jsx("span",{className:"text-green-400 ml-1",children:Qj(h,A)})]})]},h))})]}),F&&t.jsxs("div",{children:[t.jsxs("div",{className:"mb-2",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[ae.req.science&&t.jsxs("span",{className:`text-xs px-2 py-1 rounded ${(d.science||0)>=ae.req.science?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:[Oe.science?.name||"",": ",(d.science||0).toFixed(0)," / ",ae.req.science]}),ae.req.population&&t.jsxs("span",{className:`text-xs px-2 py-1 rounded ${c>=ae.req.population?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:[": ",c," / ",ae.req.population]}),ae.req.culture&&t.jsxs("span",{className:`text-xs px-2 py-1 rounded ${(d.culture||0)>=ae.req.culture?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:[Oe.culture?.name||"",": ",(d.culture||0).toFixed(0)," / ",ae.req.culture]})]})]}),t.jsxs("div",{className:"mb-2",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(ae.cost).map(([h,A])=>t.jsxs("span",{className:`text-xs px-2 py-1 rounded ${(d[h]||0)>=A?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:[Oe[h]?.name||h,": ",A]},h))}),t.jsxs("div",{className:"flex items-center justify-between text-xs mt-2",children:[t.jsx("span",{className:"text-gray-400",children:""}),t.jsx("span",{className:je?"text-slate-100 font-semibold":"text-red-400 font-semibold",children:Ei(se)})]})]}),t.jsx("button",{onClick:b,disabled:!me,className:`w-full px-4 py-3 rounded-lg text-sm font-bold transition-all border-2 ${me?"shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed border-gray-600"}`,style:me?re:void 0,children:me?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx(j,{name:"ArrowUp",size:16})," ",ae.name]}):""})]}),o===Qa.length-1&&t.jsx("div",{className:"text-center py-2",children:t.jsx("p",{className:"text-sm text-yellow-400",children:" "})})]}),t.jsxs("div",{className:"glass-ancient p-4 rounded-xl border border-ancient-gold/30",children:[t.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300 font-decorative",children:[t.jsx(j,{name:"Lightbulb",size:16,className:"text-yellow-400"}),""]}),t.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-4",children:[t.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-300 cursor-pointer select-none",children:[t.jsx("input",{type:"checkbox",className:"form-checkbox rounded border-ancient-gold/30 text-purple-400 focus:ring-purple-500",checked:S,onChange:h=>q(h.target.checked)}),""]}),t.jsx("button",{onClick:pe,className:"text-xs px-3 py-1.5 rounded border border-ancient-gold/30 text-ancient-parchment hover:border-purple-400 hover:text-ancient transition-colors",children:G?"":""})]}),t.jsx("div",{className:"space-y-4",children:W.map(h=>{const A=Qa[h],Y=be[h],R=D.has(h),Q=Y?.isCompleted?" ":`${Y?.researchedCount||0}/${Y?.total||0}`,ye=Y?.isCompleted?"text-green-400":"text-gray-300",Ne=Y?.techs||[],ke=S?Ne.filter(Je=>!s.includes(Je.id)):Ne;return t.jsxs("div",{className:`border rounded-lg ${Y?.hasResearchable?"border-yellow-400/70":"border-gray-700"} bg-gray-900/40`,children:[t.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm text-purple-200",onClick:()=>P(h),children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{name:R?"ArrowDown":"ArrowRight",size:16,className:"text-purple-300"}),t.jsx("span",{className:"font-bold",children:A?.name}),Y?.hasResearchable&&t.jsx("span",{className:"h-2 w-2 rounded-full bg-yellow-300 animate-pulse"})]}),t.jsx("div",{className:`text-xs font-semibold ${ye}`,children:Q})]}),R&&t.jsx("div",{className:"border-t border-gray-800 px-3 py-4",children:ke.length>0?t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2",children:ke.map(Je=>{const tt=C(Je),bt=Ws(Je.cost,v),ft=z(Je);return t.jsxs("div",{onMouseEnter:vt=>M(vt,Je),onMouseLeave:()=>k&&w({tech:null,element:null}),onClick:()=>x&&x(Je,tt),className:`group relative p-2 rounded-lg border transition-all cursor-pointer ${tt==="unlocked"?"bg-green-900/20 border-green-600":ft?"glass-ancient border border-ancient-gold/30 hover:border-blue-400/70 hover:shadow-glow-gold":"bg-gray-700/50 border border-ancient-gold/20"}`,children:[t.jsxs("div",{className:"flex flex-col items-center mb-2",children:[t.jsx("div",{className:"w-12 h-12 icon-metal-container icon-metal-container-lg rounded-lg flex items-center justify-center mb-1",children:tt==="unlocked"?t.jsx(j,{name:"Check",size:24,className:"text-green-400 icon-metal-green"}):t.jsx(j,{name:"Lightbulb",size:24,className:"text-blue-400 icon-metal-blue"})}),t.jsx("h5",{className:"text-xs font-bold text-white text-center leading-tight font-decorative",children:Je.name})]}),tt!=="unlocked"&&t.jsxs("div",{className:"space-y-1 text-[10px] mb-2",children:[Dc[Je.id]?.length>0&&t.jsxs("div",{className:"bg-amber-900/30 rounded px-1.5 py-1 text-center text-amber-300",children:["",Dc[Je.id].length,""]}),Je.effect&&t.jsx("div",{className:"bg-blue-900/30 rounded px-1.5 py-1 text-center text-blue-300",children:""})]}),tt==="unlocked"?t.jsx("div",{className:"text-center py-1 bg-green-900/30 rounded text-[10px] text-green-400 font-semibold",children:" "}):t.jsx("button",{onClick:vt=>{vt.stopPropagation(),m(Je.id)},disabled:!ft,className:`w-full px-2 py-1 rounded text-[10px] font-semibold transition-colors ${ft?"bg-blue-600 hover:bg-blue-500 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:t.jsxs("div",{className:"flex items-center justify-center gap-1",children:[t.jsx(j,{name:"Zap",size:10}),t.jsx("span",{className:(d.silver||0)<bt?"text-red-300":"",children:Ei(bt)})]})})]},Je.id)})}):t.jsx("p",{className:"text-xs text-gray-400 text-center",children:S?"":""})})]},h)})})]}),t.jsx(Kj,{tech:y.tech,anchorElement:y.element,status:y.tech?C(y.tech):null,resources:d,market:v})]})},t4=s=>[/\s*[+-]?\d+%/,/\s*[+-]?\d+%/,/\s*[+-]?\d+%/].some(d=>d.test(s)),Bf=s=>!s||!Array.isArray(s)?[]:s.filter(o=>!t4(o)),a4=({decree:s,anchorRect:o})=>{if(!s||!o)return null;const d=320,c=200;let m=o.top,b=o.right+8;return b+d>window.innerWidth&&(b=o.left-d-8),m<0&&(m=0),m+c>window.innerHeight&&(m=window.innerHeight-c),Qn.createPortal(t.jsxs("div",{className:"fixed w-80 bg-gray-800 border border-gray-600 rounded-lg shadow-2xl p-3 z-[9999] pointer-events-none animate-fade-in-fast",style:{top:`${m}px`,left:`${b}px`},children:[t.jsxs("h4",{className:"text-sm font-bold text-white mb-1 flex items-center gap-2 font-decorative",children:[s.name,s.active&&t.jsx("span",{className:"px-2 py-0.5 bg-green-600 text-white text-xs rounded",children:""})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-2",children:s.desc}),(()=>{const v=s.modifiers&&(s.modifiers.resourceDemandMod||s.modifiers.stratumDemandMod||s.modifiers.resourceSupplyMod)?Bf(s.effects):s.effects;return v&&v.length>0&&t.jsxs("div",{className:"bg-green-900/30 rounded px-2 py-1.5 mb-2",children:[t.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:""}),t.jsx("div",{className:"space-y-1",children:v.map((x,y)=>t.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[t.jsx(j,{name:"Plus",size:12,className:"text-green-400"}),t.jsx("span",{className:"text-green-300",children:x})]},y))})]})})(),(()=>{const v=s.modifiers&&(s.modifiers.resourceDemandMod||s.modifiers.stratumDemandMod||s.modifiers.resourceSupplyMod)?Bf(s.drawbacks):s.drawbacks;return v&&v.length>0&&t.jsxs("div",{className:"bg-red-900/30 rounded px-2 py-1.5",children:[t.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:""}),t.jsx("div",{className:"space-y-1",children:v.map((x,y)=>t.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[t.jsx(j,{name:"Minus",size:12,className:"text-red-400"}),t.jsx("span",{className:"text-red-300",children:x})]},y))})]})})(),s.modifiers&&(s.modifiers.resourceDemandMod||s.modifiers.stratumDemandMod||s.modifiers.resourceSupplyMod)&&t.jsxs("div",{className:"bg-blue-900/30 rounded px-2 py-1.5 mt-2",children:[t.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:""}),t.jsxs("div",{className:"space-y-1.5",children:[s.modifiers.resourceDemandMod&&Object.keys(s.modifiers.resourceDemandMod).length>0&&t.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(s.modifiers.resourceDemandMod).map(([g,v])=>{const x=Math.round(v*100),y=x>0?`+${x}%`:`${x}%`;return t.jsxs("span",{className:`text-[10px] px-1 py-0.5 rounded ${v>0?"bg-orange-900/40 text-orange-300":"bg-cyan-900/40 text-cyan-300"}`,children:[Oe[g]?.name||g," ",y]},g)})}),s.modifiers.resourceSupplyMod&&Object.keys(s.modifiers.resourceSupplyMod).length>0&&t.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(s.modifiers.resourceSupplyMod).map(([g,v])=>{const x=Math.round(v*100),y=x>0?`+${x}%`:`${x}%`;return t.jsxs("span",{className:`text-[10px] px-1 py-0.5 rounded ${v>0?"bg-green-900/40 text-green-300":"bg-red-900/40 text-red-300"}`,children:[Oe[g]?.name||g," ",y]},g)})}),s.modifiers.stratumDemandMod&&Object.keys(s.modifiers.stratumDemandMod).length>0&&t.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(s.modifiers.stratumDemandMod).map(([g,v])=>{const x=Math.round(v*100),y=x>0?`+${x}%`:`${x}%`;return t.jsxs("span",{className:`text-[10px] px-1 py-0.5 rounded ${v>0?"bg-purple-900/40 text-purple-300":"bg-teal-900/40 text-teal-300"}`,children:[Fe[g]?.name||g," ",y]},g)})})]})]})]}),document.body)},Lf={upper:{name:"",keys:["merchant","official","landowner","capitalist","knight","engineer"]},middle:{name:"",keys:["worker","artisan","miner","soldier","cleric","scribe","navigator"]},lower:{name:"",keys:["unemployed","peasant","serf","lumberjack","slave"]}},Bd={basic:{name:"",keys:["food","wood","stone","cloth"]},industrial:{name:"",keys:["brick","plank","copper","tools","dye","iron","coal","steel"]},consumer:{name:"",keys:["papyrus","delicacies","furniture","ale","fine_clothes","spice","coffee"]}},Uf=new Set(Object.values(Bd).flatMap(s=>s.keys)),Wf=({resourceKey:s,info:o,rate:d,hasSupply:c,draftRate:m,onDraftChange:b,onCommit:g,tariffMultiplier:v,draftTariff:x,onTariffDraftChange:y,onTariffCommit:w})=>{const k=d??0,M=k<0,z=Math.abs(k*100).toFixed(0),C=Number.isFinite(v)?v:1,T=M?"text-green-300":"text-blue-300";return t.jsxs("div",{className:`bg-gray-900/40 p-2 rounded-lg border flex flex-col justify-between transition-opacity ${c?"border-gray-700/60":"border-gray-800/50 opacity-50"}`,children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[t.jsx(j,{name:o.icon||"Box",size:14,className:o.color||"text-gray-400"}),t.jsx("span",{className:"font-semibold text-gray-300 text-xs flex-grow whitespace-nowrap overflow-hidden text-ellipsis",children:o.name}),!c&&t.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 flex-shrink-0",title:""})]}),t.jsx("div",{className:"text-center my-0.5",children:t.jsxs("span",{className:`${T} text-lg`,children:[M?` ${z}`:`${z}`,t.jsx("span",{className:"text-xs",children:"%"})]})})]}),t.jsx("input",{type:"text",inputMode:"numeric",step:"0.01",value:m??(k*100).toFixed(0),onChange:D=>b(s,D.target.value),onBlur:()=>g(s),onKeyDown:D=>{D.key==="Enter"&&(g(s),D.target.blur())},className:"w-full bg-gray-900/70 border border-gray-600 text-[11px] text-gray-200 rounded px-1.5 py-0.5 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-center",placeholder:"%"}),t.jsxs("div",{className:"mt-1.5 border-t border-gray-800/70 pt-1.5",children:[t.jsxs("div",{className:"flex items-center justify-between text-[10px] text-gray-400 mb-0.5",children:[t.jsx("span",{children:""}),t.jsxs("span",{className:"text-gray-200 font-mono text-xs",children:[C.toFixed(2),""]})]}),t.jsx("input",{type:"text",inputMode:"decimal",step:"0.1",value:x??C.toFixed(2),onChange:D=>y(s,D.target.value),onBlur:()=>w(s),onKeyDown:D=>{D.key==="Enter"&&(w(s),D.target.blur())},className:"w-full bg-gray-900/70 border border-gray-600 text-[11px] text-gray-200 rounded px-1.5 py-0.5 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 text-center",placeholder:""})]})]})},n4=({building:s,multiplier:o,buildingCount:d,draftMultiplier:c,onDraftChange:m,onCommit:b})=>{const g=s.businessTaxBase??.1,v=o??1,x=v*g,y=x<0,w=x>0,k=y?"text-green-300":"text-yellow-300",M=y?"border-green-700/60":w?"border-yellow-700/60":"border-gray-700/60",z=s.visual?.color||"bg-gray-700",C=s.visual?.text||"text-gray-200";return t.jsxs("div",{className:`bg-gray-900/40 p-1.5 rounded-lg border ${M} flex flex-col gap-1 transition-all ${d>0?"":"opacity-50"}`,children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[t.jsx("div",{className:`${z} ${C} p-0.5 rounded`,children:t.jsx(j,{name:s.visual?.icon||"Building",size:14})}),t.jsx("span",{className:"font-semibold text-gray-300 text-xs flex-grow whitespace-nowrap overflow-hidden text-ellipsis",children:s.name}),t.jsx("span",{className:"text-gray-500 text-[10px] font-mono",children:d})]}),t.jsxs("div",{className:"text-center my-0.5",children:[y?t.jsxs("div",{className:"flex items-center justify-center gap-1",children:[t.jsx(j,{name:"TrendingDown",size:12,className:"text-green-400"}),t.jsxs("span",{className:`${k} text-sm font-semibold`,children:[" ",Math.abs(x).toFixed(2)]})]}):w?t.jsxs("div",{className:"flex items-center justify-center gap-1",children:[t.jsx(j,{name:"TrendingUp",size:12,className:"text-yellow-400"}),t.jsx("span",{className:`${k} text-sm font-semibold`,children:x.toFixed(2)})]}):t.jsx("span",{className:"text-gray-500 text-sm",children:""}),t.jsxs("div",{className:"text-[10px] text-gray-500 mt-0",children:["// (",g.toFixed(2),")"]})]})]}),t.jsx("input",{type:"text",inputMode:"decimal",step:"0.05",value:c??v??1,onChange:T=>m(s.id,T.target.value),onBlur:()=>b(s.id),onKeyDown:T=>{T.key==="Enter"&&(b(s.id),T.target.blur())},className:"w-full bg-gray-900/70 border border-gray-600 text-[11px] text-gray-200 rounded px-1.5 py-0 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-center",placeholder:""})]})},s4=({decrees:s,onToggle:o,taxPolicies:d,onUpdateTaxPolicies:c,popStructure:m={},buildings:b={},market:g={},epoch:v=0,techsUnlocked:x=[],onShowDecreeDetails:y,jobFill:w={},jobsAvailable:k={}})=>{const M={economy:{name:"",icon:"Coins",color:"text-yellow-400"},military:{name:"",icon:"Shield",color:"text-red-400"},culture:{name:"",icon:"Book",color:"text-purple-400"},social:{name:"",icon:"Users",color:"text-blue-400"}},z=(s||[]).filter(K=>(K.unlockEpoch??0)<=v),C=(s||[]).filter(K=>(K.unlockEpoch??0)>v),T=C.length>0?C.reduce((K,Be)=>{const ze=Be.unlockEpoch??1/0;return ze<K?ze:K},1/0):null,D=Number.isFinite(T)?Qa[T]?.name||` ${T+1} `:null,E=z.filter(K=>K.active).length,S=z.length-E,q=z.length>0?(E/z.length*100).toFixed(0):"0",W=z.reduce((K,Be)=>{const ze=Be.category||"social";return K[ze]||(K[ze]=[]),K[ze].push(Be),K},{}),be=d?.headTaxRates||{},G=d?.resourceTaxRates||{},P=d?.resourceTariffMultipliers||{},pe=d?.businessTaxRates||{},[Pe,ne]=Xn.useState({}),[ae,se]=Xn.useState({}),[je,de]=Xn.useState({}),[I,_]=Xn.useState({}),[B,re]=Xn.useState("head"),[F,me]=Xn.useState(null),[h,A]=Xn.useState(null),Y=Xn.useMemo(()=>Object.keys(Fe).filter(K=>{const Be=Fe[K];return!(Be.unlockEpoch!==void 0&&Be.unlockEpoch>v||Be.unlockTech&&!x.includes(Be.unlockTech))}),[v,x]),R=Xn.useMemo(()=>Y.filter(K=>K==="unemployed"?!0:(k[K]||0)>0),[Y,k]),Q=(K,Be)=>{ne(ze=>({...ze,[K]:Be}))},ye=K=>{if(Pe[K]===void 0)return;const Be=parseFloat(Pe[K]),ze=Number.isNaN(Be)?1:Be;c($e=>({...$e,headTaxRates:{...$e?.headTaxRates||{},[K]:ze}})),ne($e=>{const yt={...$e};return delete yt[K],yt})},Ne=(K,Be)=>{se(ze=>({...ze,[K]:Be}))},ke=(K,Be)=>{de(ze=>({...ze,[K]:Be}))},Je=K=>{if(ae[K]===void 0)return;const Be=parseFloat(ae[K]),$e=(Number.isNaN(Be)?0:Be)/100;c(yt=>({...yt,resourceTaxRates:{...yt?.resourceTaxRates||{},[K]:$e}})),se(yt=>{const _t={...yt};return delete _t[K],_t})},tt=K=>{if(je[K]===void 0)return;const Be=parseFloat(je[K]),ze=Number.isNaN(Be)?1:Math.max(0,Be);c?.($e=>({...$e,resourceTariffMultipliers:{...$e?.resourceTariffMultipliers||{},[K]:ze}})),de($e=>{const yt={...$e};return delete yt[K],yt})},bt=(K,Be)=>{_(ze=>({...ze,[K]:Be}))},ft=K=>{if(I[K]===void 0)return;const Be=parseFloat(I[K]),ze=Number.isNaN(Be)?1:Be;c($e=>({...$e,businessTaxRates:{...$e?.businessTaxRates||{},[K]:ze}})),_($e=>{const yt={...$e};return delete yt[K],yt})},vt=Xn.useMemo(()=>Object.keys(Oe).filter(K=>{const Be=Oe[K];return Be.type&&(Be.type==="virtual"||Be.type==="currency")?!1:fs(K,v,x)}),[v,x]),Ze=Xn.useMemo(()=>{if(vt.length===0)return[];const K=[];return Object.values(Bd).forEach(Be=>{Be.keys.forEach(ze=>{vt.includes(ze)&&K.push(ze)})}),vt.forEach(Be=>{K.includes(Be)||K.push(Be)}),K},[vt]).map(K=>[K,Oe[K]]).filter(([,K])=>K&&(!K.type||K.type!=="virtual"&&K.type!=="currency")),pt=Xn.useMemo(()=>Tn.filter(K=>(b[K.id]||0)>0).sort((K,Be)=>{const ze=b[K.id]||0,$e=b[Be.id]||0;return K.cat!==Be.cat?K.cat.localeCompare(Be.cat):$e-ze}),[b]),xt=Xn.useMemo(()=>{const K={gather:{name:"",buildings:[]},industry:{name:"",buildings:[]},civic:{name:"",buildings:[]}};return pt.forEach(Be=>{const ze=Be.cat||"civic";K[ze]&&K[ze].buildings.push(Be)}),K},[pt]),jt=K=>{const Be=Fe[K]||{},ze=Be.headTaxBase??.01,yt=(be[K]??1)*ze,_t=m[K]||0,It=_t>0,oa=yt<0,za=yt>0;return t.jsxs("div",{className:`bg-gray-900/40 p-1.5 rounded-md border text-xs flex flex-col gap-1 ${It?oa?"border-green-700/60":za?"border-yellow-700/60":"border-gray-700/60":"border-gray-800 opacity-60"}`,children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(j,{name:Be.icon||"User",size:14,className:"text-gray-400"}),t.jsx("span",{className:"font-semibold text-gray-300 flex-grow",children:Be.name||K}),t.jsxs("span",{className:"text-gray-500 text-[10px] font-mono",children:[_t.toLocaleString()," "]})]}),t.jsx("div",{className:"flex items-center justify-center gap-0.5",children:oa?t.jsxs(t.Fragment,{children:[t.jsx(j,{name:"TrendingDown",size:12,className:"text-green-400"}),t.jsxs("span",{className:"font-mono text-green-300 whitespace-nowrap text-[11px]",children:[" ",Math.abs(yt).toFixed(3),"/"]})]}):za?t.jsxs(t.Fragment,{children:[t.jsx(j,{name:"TrendingUp",size:12,className:"text-yellow-400"}),t.jsxs("span",{className:"font-mono text-yellow-300 whitespace-nowrap text-[11px]",children:[yt.toFixed(3),"/"]})]}):t.jsx("span",{className:"font-mono text-gray-500 whitespace-nowrap text-[11px]",children:""})}),t.jsx("div",{className:"flex items-center gap-1",children:t.jsx("input",{type:"text",inputMode:"decimal",step:"0.05",value:Pe[K]??be[K]??1,onChange:Ta=>Q(K,Ta.target.value),onBlur:()=>ye(K),onKeyDown:Ta=>{Ta.key==="Enter"&&(ye(K),Ta.target.blur())},className:"w-full bg-gray-900/70 border border-gray-600 text-[11px] text-gray-200 rounded px-1 py-0 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-center",placeholder:""})})]},K)},le=new Set(Object.values(Lf).flatMap(K=>K.keys)),Ie=(K,Be)=>{const ze=Be.filter(([$e])=>K.keys.includes($e));return ze.length===0?null:t.jsxs("div",{className:"mb-4",children:[t.jsx("h5",{className:"text-xs font-semibold text-gray-400 mb-2",children:K.name}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2",children:ze.map(([$e,yt])=>t.jsx(Wf,{resourceKey:$e,info:yt,rate:G[$e],hasSupply:(g?.supply?.[$e]||0)>0,draftRate:ae[$e],tariffMultiplier:P[$e]??1,draftTariff:je[$e],onDraftChange:Ne,onCommit:Je,onTariffDraftChange:ke,onTariffCommit:tt},$e))})]},K.name)};return t.jsxs("div",{className:"space-y-4",children:[c&&t.jsxs("div",{className:"glass-ancient p-4 rounded-xl border border-ancient-gold/30",children:[t.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300 font-decorative",children:[t.jsx(j,{name:"DollarSign",size:16,className:"text-yellow-400"}),""]}),t.jsxs("div",{className:"flex flex-nowrap gap-2 mb-4 border-b border-gray-700 overflow-x-auto scrollbar-thin",children:[t.jsx("button",{onClick:()=>re("head"),className:`flex-1 min-w-[90px] px-4 py-2 text-sm font-semibold transition-all ${B==="head"?"text-yellow-300 border-b-2 border-yellow-400":"text-gray-400 hover:text-gray-300"}`,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{name:"Users",size:14}),""]})}),t.jsx("button",{onClick:()=>re("resource"),className:`flex-1 min-w-[90px] px-4 py-2 text-sm font-semibold transition-all ${B==="resource"?"text-blue-300 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{name:"Package",size:14}),""]})}),t.jsx("button",{onClick:()=>re("business"),className:`flex-1 min-w-[90px] px-4 py-2 text-sm font-semibold transition-all ${B==="business"?"text-green-300 border-b-2 border-green-400":"text-gray-400 hover:text-gray-300"}`,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{name:"Building",size:14}),""]})})]}),B==="head"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 p-3 rounded-lg text-xs text-blue-100",children:[t.jsxs("p",{className:"flex items-center gap-2 mb-1",children:[t.jsx(j,{name:"Info",size:12,className:"text-blue-400"}),t.jsx("span",{className:"font-semibold",children:""})]}),t.jsx("p",{children:""})]}),Object.entries(Lf).map(([K,Be])=>{const ze=R.filter($e=>Be.keys.includes($e));return ze.length===0?null:t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs font-semibold text-gray-400 mb-2",children:Be.name}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2",children:ze.map($e=>jt($e))})]},K)}),R.filter(K=>!le.has(K)).length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs font-semibold text-gray-400 mb-2",children:""}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2",children:R.filter(K=>!le.has(K)).map(K=>jt(K))})]})]}),B==="resource"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 p-3 rounded-lg text-xs text-blue-100",children:[t.jsxs("p",{className:"flex items-center gap-2 mb-1",children:[t.jsx(j,{name:"Info",size:12,className:"text-blue-400"}),t.jsx("span",{className:"font-semibold",children:""})]}),t.jsx("p",{children:""})]}),Object.values(Bd).map(K=>Ie(K,Ze)),Ze.filter(([K])=>!Uf.has(K)).length>0&&t.jsxs("div",{children:[t.jsx("h5",{className:"text-xs font-semibold text-gray-400 mb-2",children:""}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2",children:Ze.filter(([K])=>!Uf.has(K)).map(([K,Be])=>t.jsx(Wf,{resourceKey:K,info:Be,rate:G[K],hasSupply:(g?.supply?.[K]||0)>0,draftRate:ae[K],tariffMultiplier:P[K]??1,draftTariff:je[K],onDraftChange:Ne,onCommit:Je,onTariffDraftChange:ke,onTariffCommit:tt},K))})]})]}),B==="business"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 p-3 rounded-lg text-xs text-blue-100",children:[t.jsxs("p",{className:"flex items-center gap-2 mb-1",children:[t.jsx(j,{name:"Info",size:12,className:"text-blue-400"}),t.jsx("span",{className:"font-semibold",children:""})]}),t.jsx("p",{children:""})]}),Object.entries(xt).map(([K,Be])=>Be.buildings.length===0?null:t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs font-semibold text-gray-400 mb-2",children:Be.name}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2",children:Be.buildings.map(ze=>t.jsx(n4,{building:ze,multiplier:pe[ze.id],buildingCount:b[ze.id]||0,draftMultiplier:I[ze.id],onDraftChange:bt,onCommit:ft},ze.id))})]},K)),pt.length===0&&t.jsxs("div",{className:"text-center text-gray-500 py-8",children:[t.jsx(j,{name:"Building",size:32,className:"mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"text-sm",children:""})]})]})]}),z.length===0&&t.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-600/30 p-4 rounded-lg text-xs text-yellow-100",children:[t.jsxs("p",{className:"font-semibold mb-1 flex items-center gap-2",children:[t.jsx(j,{name:"Lock",size:14,className:"text-yellow-300"}),""]}),t.jsxs("p",{children:[" ",D||""," "]})]}),Object.entries(M).map(([K,Be])=>{const ze=W[K]||[];return ze.length===0?null:t.jsxs("div",{className:"glass-ancient p-4 rounded-xl border border-ancient-gold/30",children:[t.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300 font-decorative",children:[t.jsx(j,{name:Be.icon,size:16,className:Be.color}),Be.name]}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2",children:ze.map($e=>t.jsxs("div",{onClick:()=>y&&y($e),onMouseEnter:yt=>{A(yt.currentTarget.getBoundingClientRect()),me($e)},onMouseLeave:()=>{me(null),A(null)},className:`relative p-2 rounded-lg border transition-all cursor-pointer ${$e.active?"bg-green-900/20 border-green-600 shadow-lg":"bg-gray-700/50 border-gray-600 hover:border-purple-500 hover:shadow-lg"}`,children:[t.jsxs("div",{className:"flex flex-col items-center mb-2",children:[t.jsx("div",{className:"w-12 h-12 icon-metal-container icon-metal-container-lg rounded-lg flex items-center justify-center mb-1",children:$e.active?t.jsx(j,{name:"Check",size:24,className:"text-green-400 icon-metal-green"}):t.jsx(j,{name:"FileText",size:24,className:"text-purple-400 icon-metal-purple"})}),t.jsx("h4",{className:"text-xs font-bold text-white text-center leading-tight font-decorative",children:$e.name}),$e.active&&t.jsx("span",{className:"text-[10px] text-green-400 mt-0.5",children:""})]}),t.jsxs("div",{className:"space-y-1 text-[10px] mb-2",children:[$e.effects&&$e.effects.length>0&&t.jsxs("div",{className:"bg-green-900/30 rounded px-1.5 py-1 text-center text-green-300",children:[$e.effects.length,""]}),$e.drawbacks&&$e.drawbacks.length>0&&t.jsxs("div",{className:"bg-red-900/30 rounded px-1.5 py-1 text-center text-red-300",children:[$e.drawbacks.length,""]})]}),t.jsx("button",{onClick:yt=>{yt.stopPropagation(),o($e.id)},className:`w-full px-2 py-1 rounded text-[10px] font-semibold transition-all ${$e.active?"bg-red-600 hover:bg-red-500 text-white":"bg-green-600 hover:bg-green-500 text-white"}`,children:t.jsxs("div",{className:"flex items-center justify-center gap-1",children:[t.jsx(j,{name:$e.active?"X":"Check",size:10}),$e.active?"":""]})})]},$e.id))})]},K)}),t.jsx(a4,{decree:F,anchorRect:h}),t.jsxs("div",{className:"glass-ancient p-4 rounded-xl border border-ancient-gold/30",children:[t.jsxs("h3",{className:"text-sm font-bold mb-2 flex items-center gap-2 text-gray-300 font-decorative",children:[t.jsx(j,{name:"FileText",size:16,className:"text-blue-400"}),""]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[t.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),t.jsx("p",{className:"text-lg font-bold text-white",children:z.length})]}),t.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),t.jsx("p",{className:"text-lg font-bold text-green-400",children:E})]}),t.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),t.jsx("p",{className:"text-lg font-bold text-gray-400",children:S})]}),t.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),t.jsxs("p",{className:"text-lg font-bold text-blue-400",children:[q,"%"]})]}),t.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),t.jsx("p",{className:"text-lg font-bold text-yellow-300",children:C.length})]})]}),C.length>0&&t.jsxs("p",{className:"text-[11px] text-gray-400 mt-3",children:[" ",C.length," ",D?` ${D}`:"",""]})]})]})},i4=({targetNation:s,allies:o=[],onConfirm:d,onCancel:c})=>{if(!s)return null;const m=o.length>0;return Qn.createPortal(t.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:c}),t.jsxs("div",{className:"relative w-full max-w-md glass-monument border-2 border-red-500/40 rounded-2xl shadow-monument overflow-hidden animate-slide-up",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-900/30 via-ancient-ink/70 to-red-900/20 opacity-80"}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{className:"p-4 border-b border-red-500/30 bg-gradient-to-r from-red-900/40 to-ancient-ink/60",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-900/60 border border-red-500/30 flex items-center justify-center flex-shrink-0 shadow-inner",children:t.jsx(j,{name:"Swords",size:26,className:"text-red-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h2",{className:"text-lg font-bold text-red-200 leading-tight",children:""}),t.jsxs("p",{className:"text-[11px] text-gray-300 leading-tight",children:[" ",s.name," "]})]}),t.jsx("button",{onClick:c,className:"p-2 rounded-full hover:bg-white/10 transition-colors text-gray-400",children:t.jsx(j,{name:"X",size:18})})]})}),t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsxs("div",{className:"p-3 bg-gray-800/50 rounded-lg border border-gray-600/50",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(j,{name:"Flag",size:14,className:s.color||"text-gray-300"}),t.jsx("span",{className:"text-sm font-bold text-white",children:s.name}),t.jsxs("span",{className:"px-1.5 py-0.5 text-[9px] rounded bg-gray-700 text-gray-300",children:[": ",s.relation||0]})]}),s.desc&&t.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:s.desc})]}),m&&t.jsxs("div",{className:"p-3 bg-orange-900/30 rounded-lg border border-orange-500/40",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(j,{name:"AlertTriangle",size:16,className:"text-orange-400"}),t.jsx("span",{className:"text-sm font-bold text-orange-200",children:""})]}),t.jsxs("p",{className:"text-[11px] text-orange-100 mb-3 leading-relaxed",children:[s.name,"  ",t.jsx("span",{className:"font-bold text-orange-300",children:o.length}),"  "]}),t.jsx("div",{className:"space-y-1.5",children:o.map(b=>t.jsxs("div",{className:"flex items-center justify-between p-2 bg-orange-900/40 rounded border border-orange-600/30",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{name:"Flag",size:12,className:b.color||"text-orange-300"}),t.jsx("span",{className:"text-xs text-orange-100",children:b.name})]}),t.jsxs("span",{className:"text-[10px] text-orange-300",children:[": ",b.foreignRelation||80,"+"]})]},b.id))})]}),!m&&t.jsx("div",{className:"p-3 bg-gray-800/40 rounded-lg border border-gray-600/30",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{name:"Info",size:14,className:"text-blue-400"}),t.jsxs("span",{className:"text-xs text-gray-300",children:[s.name," "]})]})}),t.jsx("div",{className:"p-2 bg-red-900/20 rounded border border-red-600/30",children:t.jsx("p",{className:"text-[10px] text-red-200 text-center",children:" "})})]}),t.jsxs("div",{className:"p-4 border-t border-gray-700/50 bg-gray-900/50 flex gap-3",children:[t.jsx("button",{onClick:c,className:"flex-1 px-4 py-2.5 bg-gray-600 hover:bg-gray-500 text-white rounded-lg text-sm font-bold transition-colors",children:""}),t.jsxs("button",{onClick:d,className:"flex-1 px-4 py-2.5 bg-red-600 hover:bg-red-500 text-white rounded-lg text-sm font-bold transition-colors flex items-center justify-center gap-2",children:[t.jsx(j,{name:"Swords",size:14}),m?` (${o.length+1})`:""]})]})]})]})]}),document.body)},Sd=(s=0)=>s>=80?{label:"",color:"text-green-300",bg:"bg-green-900/20"}:s>=60?{label:"",color:"text-blue-300",bg:"bg-blue-900/20"}:s>=40?{label:"",color:"text-gray-300",bg:"bg-gray-800/40"}:s>=20?{label:"",color:"text-yellow-300",bg:"bg-yellow-900/20"}:{label:"",color:"text-red-300",bg:"bg-red-900/20"},r4=(s=0)=>s>=80?4:s>=60?3:s>=40?2:s>=20?1:0,o4=(s=[],o)=>s.filter(d=>d.nationId===o).length,Hf=(s,o="")=>Number.isFinite(s)?s>=1e6?`${(s/1e6).toFixed(1)}M${o}`:s>=1e3?`${(s/1e3).toFixed(1)}K${o}`:`${Math.max(0,Math.floor(s))}${o}`:`${o}`,l4=500,c4=s=>s?.economyTraits?.resourceBias?Object.entries(s.economyTraits.resourceBias).filter(([,o])=>o>1.05).sort((o,d)=>d[1]-o[1]).map(([o,d])=>({key:o,bias:d,name:Oe[o]?.name||o,icon:Oe[o]?.icon||"Box",color:Oe[o]?.color||"text-gray-300"})):[],d4=({nations:s=[],epoch:o=0,market:d={},resources:c={},daysElapsed:m=0,onDiplomaticAction:b,tradeRoutes:g={routes:[]},onTradeRouteAction:v,playerInstallmentPayment:x=null,jobsAvailable:y={},popStructure:w={}})=>{const[k,M]=L.useState(null),[z,C]=L.useState(10),[T,D]=L.useState(!1),[E,S]=L.useState(null),[q,W]=L.useState(!1),be=L.useMemo(()=>Object.entries(Oe).filter(([R,Q])=>Q.type!=="virtual"&&R!=="silver"&&(Q.unlockEpoch??0)<=o),[o]),G=L.useMemo(()=>s.filter(R=>o>=(R.appearEpoch??0)&&(R.expireEpoch==null||o<=R.expireEpoch)),[s,o]);L.useEffect(()=>{!k&&G.length>0?M(G[0].id):k&&!G.some(R=>R.id===k)&&M(G[0]?.id||null)},[k,G]);const P=G.find(R=>R.id===k)||G[0]||null,pe=P?Sd(P.relation):null,Pe=L.useMemo(()=>c4(P),[P]),ne=G.filter(R=>(R.relation||0)>=80).length,ae=G.filter(R=>R.isAtWar).length,se=y?.merchant||0,je=w?.merchant||0,de=g.routes.length,I=Math.min(de,je),_=(R,Q,ye)=>!g||!g.routes||!Array.isArray(g.routes)?!1:g.routes.some(Ne=>Ne.nationId===R&&Ne.resource===Q&&Ne.type===ye),B=(R,Q)=>{if(!P||!v)return;_(P.id,R,Q)?v(P.id,"cancel",{resource:R,type:Q}):v(P.id,"create",{resource:R,type:Q})},re=(R,Q)=>{b&&b(R,Q)},F=()=>{!P||!E||!b||(b(P.id,"provoke",{targetNationId:E}),D(!1),S(null))},me=L.useMemo(()=>P?G.filter(R=>R.id!==P.id):[],[G,P]),h=L.useMemo(()=>P?G.filter(R=>R.id===P.id?!1:(P.foreignRelations?.[R.id]??50)>=80).map(R=>({...R,foreignRelation:P.foreignRelations?.[R.id]??50})):[],[G,P]),A=R=>d?.prices?.[R]??(Oe[R]?.basePrice||1),Y=R=>R?.isAtWar?(R.warScore||0)>0?"":(R.warScore||0)<0?"":"":null;return t.jsxs("div",{className:"space-y-2 font-body",children:[t.jsxs("div",{className:"hidden md:flex gap-2 text-xs font-epic",children:[t.jsxs("div",{className:"bg-gray-800/60 px-2 py-1 rounded border border-gray-700",children:[t.jsx("span",{className:"text-gray-400 font-body",children:":"}),t.jsx("span",{className:"text-white font-semibold ml-1 font-epic",children:G.length})]}),t.jsxs("div",{className:"bg-green-900/20 px-2 py-1 rounded border border-green-600/20",children:[t.jsx("span",{className:"text-gray-400 font-body",children:":"}),t.jsx("span",{className:"text-green-300 font-semibold ml-1 font-epic",children:ne})]}),t.jsxs("div",{className:"bg-red-900/20 px-2 py-1 rounded border border-red-600/30",children:[t.jsx("span",{className:"text-gray-400 font-body",children:":"}),t.jsx("span",{className:"text-red-300 font-semibold ml-1 font-epic",children:ae})]}),t.jsxs("div",{className:"bg-blue-900/20 px-2 py-1 rounded border border-blue-600/20",children:[t.jsx("span",{className:"text-gray-400 font-body",children:":"}),t.jsxs("span",{className:`font-semibold ml-1 font-epic ${I<de?"text-yellow-300":"text-blue-300"}`,children:[I,"/",de]}),t.jsxs("span",{className:"text-gray-500 text-[10px] ml-1 font-body",children:["(:",se,")"]})]}),t.jsxs("div",{className:"bg-amber-900/20 px-2 py-1 rounded border border-amber-600/20",children:[t.jsx("span",{className:"text-gray-400 font-body",children:":"}),t.jsxs("span",{className:"text-amber-300 font-semibold ml-1 font-epic",children:[je,"/",se]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-3 h-[calc(100vh-180px)] md:h-[900px]",children:[t.jsxs("div",{className:"glass-ancient rounded-xl border border-ancient-gold/30 flex flex-col overflow-hidden",children:[t.jsx("div",{className:"px-2 py-1.5 border-b border-gray-700/80 text-[15px] uppercase tracking-wide text-gray-400 font-decorative font-bold",children:""}),t.jsxs("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-900 hover:scrollbar-thumb-gray-500",children:[G.map((R,Q)=>{if(!R)return null;const ye=Sd(R.relation||0),Ne=R.id===P?.id;return t.jsxs("button",{onClick:()=>M(R.id),className:`w-full flex items-center gap-2 px-2 py-1.5 text-left transition-colors border-b border-gray-700/60 focus:outline-none font-body ${Ne?"bg-blue-900/30 border-l-2 border-l-blue-400":"hover:bg-gray-800/60"} ${Q===G.length-1?"border-b-0":""}`,children:[t.jsx(j,{name:"Flag",size:14,className:R.color||"text-gray-300"}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"text-xs font-semibold text-white truncate",children:R.name||""}),t.jsx("span",{className:`px-1 py-0.5 rounded text-[9px] ${ye.bg} ${ye.color} font-epic`,children:ye.label}),R.isRebelNation&&t.jsx("span",{className:"px-1 py-0.5 rounded text-[9px] bg-red-900 text-red-100 font-epic",children:""})]})}),t.jsx(j,{name:R.isAtWar===!0?"Swords":"ShieldCheck",size:12,className:R.isAtWar===!0?"text-red-400":"text-green-400"})]},R.id)}),G.length===0&&t.jsx("div",{className:"p-3 text-xs text-gray-400 font-body",children:""})]})]}),t.jsx("div",{className:"xl:col-span-2 space-y-2 max-h-[calc(100vh-180px)] md:max-h-[900px] overflow-y-auto pr-1 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800 hover:scrollbar-thumb-gray-500",children:P?t.jsxs(Xn.Fragment,{children:[t.jsxs("div",{className:"bg-gray-800/60 p-2 rounded-lg border border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(j,{name:"Globe",size:14,className:"text-amber-300"}),t.jsx("h3",{className:"text-sm font-bold text-white font-decorative",children:P?.name||""}),P?.type&&t.jsx("span",{className:"px-1.5 py-0.5 text-[9px] rounded bg-indigo-900/40 text-indigo-300 border border-indigo-500/30 font-epic",children:P.type}),pe&&t.jsx("span",{className:`px-1.5 py-0.5 text-[9px] rounded ${pe.bg} ${pe.color} font-epic`,children:pe.label})]}),t.jsx(j,{name:P?.isAtWar===!0?"Swords":"ShieldCheck",size:14,className:P?.isAtWar===!0?"text-red-400":"text-green-400"})]}),P?.desc&&t.jsx("div",{className:"mb-2 p-2 bg-gray-900/40 rounded border border-gray-700/50",children:t.jsxs("p",{className:"text-[11px] text-gray-300 leading-relaxed font-body",children:[t.jsx(j,{name:"BookOpen",size:10,className:"inline mr-1 text-amber-300"}),P.desc]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-1 mb-2 text-xs font-body",children:[t.jsxs("div",{className:"p-2 rounded border border-blue-500/20 bg-blue-900/10 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1 text-blue-200 font-body",children:[t.jsx(j,{name:"Users",size:12}),""]}),t.jsx("span",{className:"font-mono text-blue-100 font-semibold font-epic",children:Hf(P?.population,"")})]}),t.jsxs("div",{className:"p-2 rounded border border-amber-500/20 bg-amber-900/10 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1 text-amber-200 font-body",children:[t.jsx(j,{name:"Coins",size:12}),""]}),t.jsx("span",{className:"font-mono text-amber-100 font-semibold font-epic",children:Hf(P?.wealth," ")})]})]}),(()=>{const R=P?.relation||0,Q=(P?.militaryStrength??1)*(P?.population||100)*(1+(P?.aggression||.3)),Ne=1-Math.max(.1,R/100),ke=`${P?.id||"unknown"}-${Math.floor(m/30)}`;let Je=0;for(let vt=0;vt<ke.length;vt++)Je=(Je<<5)-Je+ke.charCodeAt(vt),Je|=0;const tt=Math.abs(Je)%1e3/1e3-.5,bt=Math.floor(Q*(1+tt*Ne*2)),ft=R>=60?` ${bt}`:R>=40?`${Math.floor(bt*.8)} - ${Math.floor(bt*1.2)}`:R>=20?"":"";return t.jsxs("div",{className:"p-2 rounded border border-red-500/20 bg-red-900/10 flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-1 text-red-200 font-body",children:[t.jsx(j,{name:"Swords",size:12}),""]}),t.jsx("span",{className:`font-mono font-semibold font-epic ${R>=60?"text-green-300":R>=40?"text-yellow-300":"text-gray-400"}`,children:ft})]})})(),P?.foreignWars&&Object.keys(P.foreignWars).some(R=>P.foreignWars[R]?.isAtWar)&&t.jsxs("div",{className:"p-2 rounded border border-orange-500/20 bg-orange-900/10 mb-2",children:[t.jsxs("div",{className:"flex items-center gap-1 text-orange-200 font-body mb-1",children:[t.jsx(j,{name:"Flame",size:12}),""]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys(P.foreignWars).filter(R=>P.foreignWars[R]?.isAtWar).map(R=>{const Q=s.find(ye=>ye.id===R);return Q?t.jsxs("span",{className:"px-1.5 py-0.5 rounded bg-red-900/40 text-red-200 text-[10px] font-body",children:[" ",Q.name]},R):null})})]}),t.jsxs("div",{className:"flex gap-1.5 text-xs font-body",children:[t.jsxs("button",{className:"flex-1 px-2 py-1.5 bg-green-600 hover:bg-green-500 rounded text-white flex items-center justify-center gap-1 font-semibold font-body",onClick:()=>re(P.id,"gift"),children:[t.jsx(j,{name:"Gift",size:12})," "]}),t.jsxs("button",{className:"flex-1 px-2 py-1.5 bg-yellow-600 hover:bg-yellow-500 rounded text-white flex items-center justify-center gap-1 font-semibold font-body",onClick:()=>re(P.id,"demand"),children:[t.jsx(j,{name:"ShieldAlert",size:12})," "]}),t.jsxs("button",{className:`flex-1 px-2 py-1.5 rounded text-white flex items-center justify-center gap-1 font-semibold font-body ${P.isAtWar?"bg-purple-600 hover:bg-purple-500":"bg-red-600 hover:bg-red-500"}`,onClick:()=>{P?.isAtWar===!0?re(P.id,"peace"):W(!0)},children:[t.jsx(j,{name:P?.isAtWar===!0?"Flag":"Swords",size:12}),P?.isAtWar===!0?"":""]})]}),t.jsx("div",{className:"mt-1.5 flex gap-1.5 text-xs font-body",children:t.jsxs("button",{className:"flex-1 px-2 py-1.5 bg-indigo-600 hover:bg-indigo-500 rounded text-white flex items-center justify-center gap-1 font-semibold font-body",onClick:()=>{S(null),D(!0)},title:"",children:[t.jsx(j,{name:"MessageSquareWarning",size:12})," "]})}),t.jsx("div",{className:"mt-1 text-[10px] text-gray-400 flex items-center justify-between font-epic",children:t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(j,{name:"Coins",size:10,className:"text-amber-300"}),"",l4,"  | 300 "]})}),Pe.length>0&&t.jsxs("div",{className:"mt-2",children:[t.jsxs("div",{className:"text-[10px] text-gray-400 uppercase tracking-wide mb-1 flex items-center gap-1 font-decorative",children:[t.jsx(j,{name:"Package",size:10,className:"text-amber-300"}),""]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:Pe.slice(0,4).map(R=>t.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-gray-900/40 border border-amber-500/30 text-[10px] text-amber-100 flex items-center gap-1 font-body",title:` x${R.bias.toFixed(1)}`,children:[t.jsx(j,{name:R.icon,size:10,className:R.color||"text-amber-200"}),t.jsx("span",{className:"font-body",children:R.name}),t.jsxs("span",{className:"text-amber-300 font-mono text-[9px] font-epic",children:["x",R.bias.toFixed(1)]})]},R.key))})]}),P?.specialAbilities&&P.specialAbilities.length>0&&t.jsxs("div",{className:"mt-2",children:[t.jsxs("div",{className:"text-[10px] text-gray-400 uppercase tracking-wide mb-1 flex items-center gap-1 font-decorative",children:[t.jsx(j,{name:"Sparkles",size:10,className:"text-purple-300"}),""]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:P.specialAbilities.map((R,Q)=>t.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-purple-900/30 border border-purple-500/30 text-[10px] text-purple-200 flex items-center gap-1 font-body",title:R.desc,children:[t.jsx(j,{name:"Zap",size:10,className:"text-purple-300"}),t.jsx("span",{className:"font-body",children:R.desc})]},Q))})]})]}),t.jsx("div",{className:"bg-gray-800/60 p-2 rounded-lg border border-gray-700",children:(()=>{const R=P?.relation||0,Q=P?.openMarketUntil&&m<P.openMarketUntil,ye=Q?P.openMarketUntil-m:0,Ne=Q?999:r4(R),ke=o4(g.routes,P?.id);return t.jsxs(Xn.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h3",{className:"text-xs font-bold text-white flex items-center gap-1 font-decorative",children:[t.jsx(j,{name:"Route",size:12,className:"text-blue-300"}),""]}),t.jsxs("div",{className:"text-[10px] text-gray-400 font-body",children:[t.jsx("div",{className:"font-body",children:""}),t.jsxs("div",{className:"mt-0.5 font-epic",children:[t.jsxs("span",{className:I<de?"text-yellow-400":"text-blue-400",children:[": ",I,"/",de]}),t.jsx("span",{className:"text-gray-500 mx-1",children:"|"}),t.jsxs("span",{className:de>=se?"text-red-400":"text-green-400",children:[": ",se]}),t.jsx("span",{className:"text-gray-500 mx-1",children:"|"}),t.jsxs("span",{className:"text-amber-400",children:[": ",je,"/",se]})]})]}),"                      "]}),t.jsxs("div",{className:`mb-2 p-2 rounded border ${Q?"bg-green-900/30 border-green-600/30":"bg-indigo-900/30 border-indigo-600/30"}`,children:[t.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[t.jsxs("span",{className:`flex items-center gap-1 font-body ${Q?"text-green-300":"text-indigo-300"}`,children:[t.jsx(j,{name:Q?"Store":"Heart",size:10})," ",P?.name," "]}),t.jsx("span",{className:`font-epic ${Q?"text-green-300":ke>=Ne?"text-red-300":"text-green-300"}`,children:Q?`${ke}/`:`${ke}/${Ne}`})]}),Q?t.jsxs("div",{className:"text-[9px] text-green-400 mt-1 font-body",children:["  ",Math.ceil(ye/365),"  ",ye%365," ",t.jsx("span",{className:"text-green-300 ml-1",children:"()"})]}):t.jsxs("div",{className:"text-[9px] text-gray-400 mt-1 font-body",children:[" ",R,"   ",Ne," ",Ne===0&&t.jsx("span",{className:"text-red-400 ml-1",children:"()"}),Ne===1&&t.jsx("span",{className:"text-yellow-400 ml-1",children:"()"}),Ne===2&&t.jsx("span",{className:"text-gray-300 ml-1",children:"()"}),Ne===3&&t.jsx("span",{className:"text-blue-400 ml-1",children:"()"}),Ne===4&&t.jsx("span",{className:"text-green-400 ml-1",children:"()"})]})]}),I<de&&t.jsxs("div",{className:"mb-2 p-2 bg-yellow-900/30 border border-yellow-600/30 rounded text-[10px] text-yellow-300 font-body",children:[t.jsx(j,{name:"AlertTriangle",size:12,className:"inline mr-1"})," ",de-I," "]}),de>=se&&t.jsxs("div",{className:"mb-2 p-2 bg-red-900/30 border border-red-600/30 rounded text-[10px] text-red-300 font-body",children:[t.jsx(j,{name:"AlertCircle",size:12,className:"inline mr-1"}),""]}),ke>=Ne&&Ne>0&&t.jsxs("div",{className:"mb-2 p-2 bg-purple-900/30 border border-purple-600/30 rounded text-[10px] text-purple-300 font-body",children:[t.jsx(j,{name:"UserX",size:12,className:"inline mr-1"})," ",P?.name," ",Ne,""]}),Ne===0&&t.jsxs("div",{className:"mb-2 p-2 bg-red-900/30 border border-red-600/30 rounded text-[10px] text-red-300 font-body",children:[t.jsx(j,{name:"Ban",size:12,className:"inline mr-1"})," ",P?.name," 20"]}),t.jsx("div",{className:"space-y-1",children:be.map(([Je,tt])=>{if(!P)return null;const bt=A(Je),ft=ul(Je,P,m),vt=ft-bt,we=dl(Je,P,m)||{},Ze=Math.floor(we.shortageAmount||0),pt=Math.floor(we.surplusAmount||0),xt=Ze>9999?"9999+":Ze,jt=pt>9999?"9999+":pt;if(!((tt.unlockEpoch??0)<=o))return null;const Ie=P?.isAtWar||!1,K=_(P.id,Je,"export"),Be=_(P.id,Je,"import"),ze=ke>=Ne;return t.jsxs("div",{className:"bg-gray-900/40 rounded p-1.5 border border-gray-700/50",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(j,{name:tt.icon||"Box",size:12,className:tt.color||"text-gray-400"}),t.jsx("span",{className:"text-xs font-semibold text-white font-body",children:tt.name})]}),t.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-epic",children:[we.isShortage&&t.jsxs("span",{className:"text-red-400 font-mono",children:["",xt]}),we.isSurplus&&t.jsxs("span",{className:"text-green-400 font-mono",children:["",jt]})]})]}),t.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[t.jsxs("div",{className:"flex gap-2 text-gray-400 font-body",children:[t.jsxs("span",{children:[": ",t.jsx("span",{className:"text-white font-mono font-epic",children:bt.toFixed(1)})]}),t.jsxs("span",{children:[": ",t.jsx("span",{className:`font-mono font-epic ${vt>0?"text-green-300":"text-red-300"}`,children:ft.toFixed(1)})]})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsxs("button",{className:`px-1.5 py-0.5 rounded text-white flex items-center gap-0.5 font-body ${K?"bg-red-600 hover:bg-red-500":Ie||ze&&!K?"bg-gray-600 cursor-not-allowed":"bg-teal-600 hover:bg-teal-500"}`,onClick:()=>B(Je,"export"),disabled:Ie&&!K||ze&&!K,title:Ie&&!K?"":ze&&!K?"":"",children:[t.jsx(j,{name:K?"X":"ArrowUpRight",size:10}),K?"":""]}),t.jsxs("button",{className:`px-1.5 py-0.5 rounded text-white flex items-center gap-0.5 font-body ${Be?"bg-red-600 hover:bg-red-500":Ie||ze&&!Be?"bg-gray-600 cursor-not-allowed":"bg-purple-600 hover:bg-purple-500"}`,onClick:()=>B(Je,"import"),disabled:Ie&&!Be||ze&&!Be,title:Ie&&!Be?"":ze&&!Be?"":"",children:[t.jsx(j,{name:Be?"X":"ArrowDownLeft",size:10}),Be?"":""]})]})]})]},Je)})})]})})()}),P.peaceTreatyUntil&&m<P.peaceTreatyUntil&&t.jsxs("div",{className:"bg-green-900/20 p-2 rounded-lg border border-green-600/30 mb-2",children:[t.jsxs("h3",{className:"text-xs font-bold text-white flex items-center gap-1 mb-1.5 font-decorative",children:[t.jsx(j,{name:"HandHeart",size:12,className:"text-green-300"}),""]}),t.jsxs("p",{className:"text-[10px] text-gray-300 font-body",children:[": ",t.jsx("span",{className:"text-green-300 font-semibold font-epic",children:P.peaceTreatyUntil-m})]}),P.installmentPayment&&t.jsxs("p",{className:"text-[10px] text-gray-300 mt-1 font-body",children:[":  ",t.jsx("span",{className:"text-yellow-300 font-semibold font-epic",children:P.installmentPayment.amount}),"   ",t.jsx("span",{className:"text-white font-semibold font-epic",children:P.installmentPayment.remainingDays})," "]})]}),P.isAtWar&&t.jsxs("div",{className:"bg-red-900/20 p-2 rounded-lg border border-red-600/30",children:[t.jsxs("h3",{className:"text-xs font-bold text-white flex items-center gap-1 mb-1.5 font-decorative",children:[t.jsx(j,{name:"AlertTriangle",size:12,className:"text-red-300"}),""]}),t.jsx("div",{className:"flex items-center justify-between text-[10px] mb-1.5 font-body",children:t.jsxs("div",{className:"flex gap-2 text-gray-300 font-body",children:[t.jsxs("span",{children:[": ",t.jsx("span",{className:"text-red-300 font-semibold font-epic",children:P.warScore?.toFixed(0)||0})]}),t.jsxs("span",{children:[": ",t.jsx("span",{className:"text-white font-semibold font-epic",children:P.warDuration||0})]}),t.jsxs("span",{children:[": ",t.jsx("span",{className:"text-white font-semibold font-epic",children:P.enemyLosses||0})]}),t.jsxs("span",{children:[": ",t.jsxs("span",{className:`font-semibold font-epic ${(P.militaryStrength??1)>.7?"text-green-300":(P.militaryStrength??1)>.4?"text-yellow-300":"text-red-300"}`,children:[Math.floor((P.militaryStrength??1)*100),"%"]})]})]})}),t.jsx("p",{className:"text-[10px] text-gray-400 mb-1.5 font-body",children:Y(P)}),t.jsx("button",{className:"w-full px-2 py-1.5 bg-red-600 hover:bg-red-500 text-white rounded text-xs font-semibold font-body",onClick:()=>re(P.id,"peace"),children:""})]}),x&&x.nationId===P.id&&t.jsxs("div",{className:"bg-yellow-900/20 p-2 rounded-lg border border-yellow-600/30 mt-2",children:[t.jsxs("h3",{className:"text-xs font-bold text-white flex items-center gap-1 mb-1.5 font-decorative",children:[t.jsx(j,{name:"Coins",size:12,className:"text-yellow-300"}),""]}),t.jsxs("p",{className:"text-[10px] text-gray-300 font-body",children:[": ",t.jsx("span",{className:"text-yellow-300 font-semibold font-epic",children:x.amount})," "]}),t.jsxs("p",{className:"text-[10px] text-gray-300 mt-1 font-body",children:[": ",t.jsx("span",{className:"text-white font-semibold font-epic",children:x.remainingDays})]}),t.jsxs("p",{className:"text-[10px] text-gray-300 mt-1 font-body",children:[": ",t.jsx("span",{className:"text-green-300 font-semibold font-epic",children:x.paidAmount})," /",t.jsxs("span",{className:"text-white font-semibold font-epic",children:[" ",x.totalAmount]})," "]})]})]}):t.jsx("div",{className:"glass-ancient p-4 rounded-xl border border-ancient-gold/30 text-sm text-gray-400 font-body",children:""})})]}),t.jsx(Sj,{isOpen:T,onClose:()=>{D(!1),S(null)},title:` ${P?.name||""} `,footer:t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx("button",{className:"px-3 py-1.5 bg-gray-600 hover:bg-gray-500 rounded text-white text-sm font-body",onClick:()=>{D(!1),S(null)},children:""}),t.jsx("button",{className:`px-3 py-1.5 rounded text-white text-sm font-body ${E?"bg-indigo-600 hover:bg-indigo-500":"bg-gray-500 cursor-not-allowed"}`,onClick:F,disabled:!E,children:" (300)"})]}),children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-sm text-gray-300 font-body mb-3",children:["",P?.name," "]}),t.jsx("div",{className:"max-h-60 overflow-y-auto space-y-1",children:me.map(R=>{const Q=Sd(R.relation||0),ye=P?.foreignRelations?.[R.id]??50,Ne=ye>=80?{label:"",color:"text-green-300"}:ye>=60?{label:"",color:"text-blue-300"}:ye>=40?{label:"",color:"text-gray-300"}:ye>=20?{label:"",color:"text-yellow-300"}:{label:"",color:"text-red-300"};return t.jsxs("button",{onClick:()=>S(R.id),className:`w-full flex items-center justify-between p-2 rounded border transition-colors ${E===R.id?"bg-indigo-900/50 border-indigo-500":"bg-gray-800/60 border-gray-700 hover:bg-gray-700/60"}`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{name:"Flag",size:14,className:R.color||"text-gray-300"}),t.jsx("span",{className:"text-sm text-white font-body",children:R.name}),t.jsxs("span",{className:`text-[10px] px-1 py-0.5 rounded ${Q.bg} ${Q.color}`,children:[":",Q.label]})]}),t.jsxs("div",{className:"flex items-center gap-1 text-[10px]",children:[t.jsx("span",{className:"text-gray-400",children:":"}),t.jsx("span",{className:Ne.color,children:Ne.label}),t.jsxs("span",{className:"text-gray-500",children:["(",Math.round(ye),")"]})]})]},R.id)})}),me.length===0&&t.jsx("p",{className:"text-sm text-gray-400 text-center py-4 font-body",children:""})]})}),q&&P&&t.jsx(i4,{targetNation:P,allies:h,onConfirm:()=>{re(P.id,"declare_war"),W(!1)},onCancel:()=>W(!1)})]})},u4=({result:s,onClose:o})=>{const[d,c]=L.useState(!1);if(!s)return null;const m=()=>{c(!0),setTimeout(()=>{o()},300)},b=d?"animate-sheet-out":"animate-sheet-in";return Qn.createPortal(t.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end lg:items-center justify-center p-2",children:[t.jsx("div",{className:"absolute inset-0 bg-ancient-ink/90 backdrop-blur-sm animate-fade-in",onClick:m}),t.jsxs("div",{className:`relative w-full max-w-2xl glass-monument border-2 border-ancient-gold/40 rounded-t-2xl lg:rounded-2xl shadow-monument flex flex-col max-h-[90vh] overflow-hidden ${b} lg:animate-slide-up`,children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-ancient-ink/80 via-ancient-stone/20 to-ancient-ink/70 opacity-70"}),t.jsx("div",{className:"absolute inset-0 opacity-[0.04] pointer-events-none",children:t.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[t.jsxs("pattern",{id:"battle-result-pattern",x:"0",y:"0",width:"80",height:"80",patternUnits:"userSpaceOnUse",children:[t.jsx("circle",{cx:"10",cy:"10",r:"1",fill:"currentColor",className:"text-ancient-gold/50"}),t.jsx("circle",{cx:"70",cy:"70",r:"1",fill:"currentColor",className:"text-ancient-gold/30"}),t.jsx("path",{d:"M0 0 L80 0 L80 80",stroke:"currentColor",strokeWidth:"0.4",className:"text-ancient-gold/10",fill:"none"})]}),t.jsx("rect",{width:"100%",height:"100%",fill:"url(#battle-result-pattern)"})]})}),t.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[t.jsxs("div",{className:`flex-shrink-0 p-4 border-b border-ancient-gold/20 ${s.victory?"bg-gradient-to-r from-emerald-900/40 to-blue-900/30":"bg-gradient-to-r from-red-900/50 to-ancient-ink/60"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-ancient-ink/60 border border-ancient-gold/30 flex items-center justify-center flex-shrink-0 shadow-inner",children:t.jsx(j,{name:s.victory?"Trophy":"Skull",size:26,className:s.victory?"text-ancient-gold":"text-red-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("h2",{className:"text-lg font-bold text-ancient leading-tight flex items-center gap-2",children:[s.victory?"":"",typeof s.score=="number"&&t.jsxs("span",{className:"px-2 py-0.5 text-[10px] rounded-full border border-ancient-gold/30 text-ancient-parchment bg-ancient-ink/40",children:[" ",s.score.toFixed(0)]})]}),t.jsxs("p",{className:"text-[11px] text-ancient-parchment opacity-80 leading-tight truncate",children:[s.missionName||"",s.missionDifficulty&&`  ${s.missionDifficulty}`,s.nationName&&`  ${s.nationName}`]})]}),t.jsx("button",{onClick:m,className:"p-2 rounded-full hover:bg-ancient-gold/10 transition-colors flex-shrink-0 text-ancient-stone",children:t.jsx(j,{name:"X",size:18})})]}),s.missionDesc&&t.jsx("p",{className:"text-[11px] text-ancient-stone mt-2 leading-snug",children:s.missionDesc})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[(!s.isRaid||s.isRaid&&s.ourPower>0)&&t.jsxs("div",{className:"glass-ancient rounded-xl border border-ancient-gold/20 p-3 shadow-ancient",children:[t.jsxs("h3",{className:"text-[11px] font-bold mb-2 flex items-center gap-1 text-ancient-parchment",children:[t.jsx(j,{name:"BarChart",size:14,className:"text-ancient-gold"}),""]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{className:"bg-ancient-ink/50 border border-ancient-gold/10 rounded-lg p-2",children:[t.jsx("p",{className:"text-[10px] text-ancient-stone mb-1 leading-none",children:""}),t.jsx("p",{className:"text-base font-bold text-ancient font-mono leading-none",children:s.ourPower?.toFixed(0)||0})]}),t.jsxs("div",{className:"bg-ancient-ink/50 border border-ancient-gold/10 rounded-lg p-2",children:[t.jsx("p",{className:"text-[10px] text-ancient-stone mb-1 leading-none",children:""}),t.jsx("p",{className:"text-base font-bold text-red-400 font-mono leading-none",children:s.enemyPower?.toFixed(0)||0})]}),t.jsxs("div",{className:"bg-ancient-ink/50 border border-ancient-gold/10 rounded-lg p-2",children:[t.jsx("p",{className:"text-[10px] text-ancient-stone mb-1 leading-none",children:""}),t.jsxs("p",{className:`text-base font-bold font-mono leading-none ${s.powerRatio>1?"text-green-400":"text-red-400"}`,children:[s.powerRatio?.toFixed(2)||0,"x"]})]}),t.jsxs("div",{className:"bg-ancient-ink/50 border border-ancient-gold/10 rounded-lg p-2",children:[t.jsx("p",{className:"text-[10px] text-ancient-stone mb-1 leading-none",children:""}),t.jsx("p",{className:"text-base font-bold text-purple-400 font-mono leading-none",children:s.score?.toFixed(0)||0})]})]})]}),(!s.isRaid||s.isRaid&&Object.keys(s.losses||s.defenderLosses||{}).length>0)&&t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("h3",{className:"text-[10px] font-bold mb-1.5 flex items-center gap-1 text-white",children:[t.jsx(j,{name:"Heart",size:12,className:"text-red-400"}),""]}),Object.keys(s.losses||s.defenderLosses||s.attackerLosses||{}).length>0?t.jsx("div",{className:"space-y-1",children:Object.entries(s.losses||s.defenderLosses||s.attackerLosses||{}).map(([g,v])=>{const x=Sn[g];return!x||v===0?null:t.jsxs("div",{className:"flex items-center justify-between bg-red-900/20 border border-red-600/30 p-1.5 rounded",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(j,{name:"User",size:12,className:"text-red-400"}),t.jsx("span",{className:"text-[10px] text-white leading-none",children:x.name})]}),t.jsxs("span",{className:"text-[10px] font-bold text-red-400 font-mono leading-none",children:["-",v]})]},g)})}):t.jsxs("div",{className:"text-center py-2 bg-green-900/20 border border-green-600/30 rounded",children:[t.jsx(j,{name:"Check",size:16,className:"text-green-400 mx-auto mb-1"}),t.jsx("p",{className:"text-[10px] text-green-300 leading-tight",children:""})]})]}),(s.enemyLosses||s.attackerLosses)&&Object.keys(s.enemyLosses||s.attackerLosses||{}).length>0&&t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("h3",{className:"text-[10px] font-bold mb-1.5 flex items-center gap-1 text-white",children:[t.jsx(j,{name:"Skull",size:12,className:"text-gray-400"}),""]}),t.jsx("div",{className:"space-y-1",children:Object.entries(s.enemyLosses||s.attackerLosses||{}).map(([g,v])=>{const x=Sn[g];return!x||v===0?null:t.jsxs("div",{className:"flex items-center justify-between bg-gray-800/50 p-1.5 rounded",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(j,{name:"User",size:12,className:"text-gray-400"}),t.jsx("span",{className:"text-[10px] text-white leading-none",children:x?.name||g})]}),t.jsxs("span",{className:"text-[10px] font-bold text-gray-400 font-mono leading-none",children:["-",v]})]},g)})})]}),s.isRaid&&(s.foodLoss>0||s.silverLoss>0)&&t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("h3",{className:"text-[10px] font-bold mb-1.5 flex items-center gap-1 text-white",children:[t.jsx(j,{name:"AlertTriangle",size:12,className:"text-red-400"}),""]}),t.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[s.foodLoss>0&&t.jsxs("div",{className:"flex items-center justify-between bg-red-900/20 border border-red-600/30 p-1.5 rounded",children:[t.jsx("span",{className:"text-[10px] text-gray-300 leading-none",children:""}),t.jsxs("span",{className:"text-[10px] font-bold text-red-400 font-mono leading-none",children:["-",s.foodLoss]})]}),s.silverLoss>0&&t.jsxs("div",{className:"flex items-center justify-between bg-red-900/20 border border-red-600/30 p-1.5 rounded",children:[t.jsx("span",{className:"text-[10px] text-gray-300 leading-none",children:""}),t.jsxs("span",{className:"text-[10px] font-bold text-red-400 font-mono leading-none",children:["-",s.silverLoss]})]})]})]}),s.isRaid&&s.popLoss>0&&t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("h3",{className:"text-[10px] font-bold mb-1.5 flex items-center gap-1 text-white",children:[t.jsx(j,{name:"Users",size:12,className:"text-red-400"}),""]}),t.jsx("div",{className:"bg-red-900/20 border border-red-600/30 p-1.5 rounded",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[10px] text-gray-300 leading-none",children:""}),t.jsxs("span",{className:"text-[10px] font-bold text-red-400 font-mono leading-none",children:["-",s.popLoss]})]})})]}),s.victory&&s.resourcesGained&&Object.keys(s.resourcesGained).length>0&&t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("h3",{className:"text-[10px] font-bold mb-1.5 flex items-center gap-1 text-white",children:[t.jsx(j,{name:"Gift",size:12,className:"text-yellow-400"}),""]}),t.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:Object.entries(s.resourcesGained).map(([g,v])=>t.jsxs("div",{className:"flex items-center justify-between bg-yellow-900/20 border border-yellow-600/30 p-1.5 rounded",children:[t.jsx("span",{className:"text-[10px] text-gray-300 leading-none",children:Oe[g]?.name||g}),t.jsxs("span",{className:"text-[10px] font-bold text-yellow-400 font-mono leading-none",children:["+",v]})]},g))})]})]}),t.jsx("div",{className:"flex-shrink-0 p-3 border-t border-gray-700 bg-gray-800/50",children:t.jsx("button",{onClick:m,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-bold transition-colors",children:""})})]})]})]}),document.body)},Ad=s=>Number.isFinite(s)?Math.abs(s)>=1e3?s.toFixed(0):Math.abs(s)>=100?s.toFixed(1):Math.abs(s)>=1?s.toFixed(2):s.toFixed(3):"--",qf=(s,{color:o,label:d})=>{const c=Array.isArray(s)?s.filter(Number.isFinite):[],m={min:c.length?Math.min(...c):0,max:c.length?Math.max(...c):0,current:c.length?c[c.length-1]:0};return{color:o,label:d,data:c,stats:m}},fo=({data:s=[],data2:o=[],color:d="#34d399",color2:c="#f87171",label:m="",label2:b="",height:g=128})=>{const v=qf(s,{color:d,label:m}),x=qf(o,{color:c,label:b}),y=v.data.length>0,w=x.data.length>0;if(!y&&!w)return t.jsx("div",{className:"flex h-32 flex-col items-center justify-center text-xs text-gray-500",children:t.jsx("p",{children:""})});const k=320,M=10,z=[...v.data,...x.data],C=Math.min(...z),T=Math.max(...z),D=(T-C)*.1||1,E=C-D,S=T+D,q=Math.max(S-E,1),W=Math.max(v.data.length,x.data.length,2),be=W>1?(k-M*2)/(W-1):0,G=ae=>{if(!ae.length)return"";const se=W-ae.length;return ae.map((je,de)=>{const I=M+(se+de)*be,_=(je-E)/q,B=g-M-_*(g-M*2);return`${I.toFixed(1)},${B.toFixed(1)}`}).join(" ")},P=G(v.data),pe=G(x.data),Pe=({color:ae,text:se})=>t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[t.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:ae}}),t.jsx("span",{children:se})]}),ne=({title:ae,stats:se})=>t.jsxs("div",{className:"text-[11px] text-gray-400",children:[t.jsx("p",{className:"text-xs text-gray-300",children:ae}),t.jsxs("div",{className:"mt-1 flex gap-4 font-mono",children:[t.jsxs("span",{children:["Max ",Ad(se.max)]}),t.jsxs("span",{children:["Min ",Ad(se.min)]}),t.jsxs("span",{children:["Now ",Ad(se.current)]})]})]});return t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex flex-wrap gap-4",children:[y&&t.jsx(Pe,{color:v.color,text:v.label}),w&&t.jsx(Pe,{color:x.color,text:x.label})]}),t.jsx("div",{className:"relative h-32 w-full overflow-hidden rounded-xl border border-gray-800/60 bg-gray-950/50",children:t.jsxs("svg",{viewBox:`0 0 ${k} ${g}`,preserveAspectRatio:"none",className:"h-full w-full",children:[[.25,.5,.75].map(ae=>{const se=g-M-ae*(g-M*2);return t.jsx("line",{x1:M,x2:k-M,y1:se,y2:se,stroke:"rgba(255,255,255,0.05)",strokeWidth:"1"},ae)}),w&&t.jsx("polyline",{points:pe,stroke:x.color,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.7"}),y&&t.jsx("polyline",{points:P,stroke:v.color,strokeWidth:"2.5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})]})}),y&&t.jsx(ne,{title:v.label,stats:v.stats}),w&&t.jsx(ne,{title:x.label,stats:x.stats})]})},p4=({popStructure:s,classApproval:o,classInfluence:d,activeBuffs:c,activeDebuffs:m,stability:b,onClose:g})=>t.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[100] p-4",children:t.jsxs("div",{className:"glass-epic rounded-xl border-2 border-ancient-gold/30 max-w-4xl w-full max-h-[90vh] flex flex-col shadow-metal-xl",children:[t.jsx("div",{className:"p-4 md:p-6 border-b border-gray-700",children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white font-decorative",children:""}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx(j,{name:"Heart",size:16,className:`flex-shrink-0 ${b>=70?"text-green-400":b>=40?"text-yellow-400":"text-red-400 animate-pulse"}`}),t.jsx("span",{className:"text-sm text-gray-300",children:":"}),t.jsxs("span",{className:`text-sm font-bold ${b>=70?"text-green-400":b>=40?"text-yellow-400":"text-red-400"}`,children:[Math.floor(b),"%"]})]})]}),t.jsx("button",{onClick:g,className:"p-2 hover:bg-gray-700 rounded-lg flex-shrink-0",children:t.jsx(j,{name:"X",size:20,className:"text-gray-400"})})]})}),t.jsx("div",{className:"p-6 overflow-y-auto",children:t.jsxs("table",{className:"w-full text-left table-auto",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-600",children:[t.jsx("th",{className:"p-2 text-sm font-semibold text-gray-300",children:""}),t.jsx("th",{className:"p-2 text-sm font-semibold text-gray-300",children:""}),t.jsx("th",{className:"p-2 text-sm font-semibold text-gray-300",children:""}),t.jsx("th",{className:"p-2 text-sm font-semibold text-gray-300",children:""}),t.jsx("th",{className:"p-2 text-sm font-semibold text-gray-300",children:""})]})}),t.jsx("tbody",{children:Object.keys(Fe).map(v=>{const x=Fe[v],y=s[v]||0;if(y===0)return null;const w=o[v]||50,k=d[v]||0,M=c.filter(C=>C.class===v||C.source===v),z=m.filter(C=>C.class===v||C.source===v);return t.jsxs("tr",{className:"border-b border-gray-700 hover:bg-gray-700/50",children:[t.jsxs("td",{className:"p-2 text-sm text-white flex items-center gap-2",children:[t.jsx(j,{name:x.icon,size:16})," ",x.name]}),t.jsx("td",{className:"p-2 text-sm text-gray-300",children:y}),t.jsx("td",{className:"p-2 text-sm",children:t.jsxs("span",{className:w>=70?"text-green-400":w>=40?"text-yellow-400":"text-red-400",children:[w.toFixed(0),"%"]})}),t.jsx("td",{className:"p-2 text-sm text-purple-400",children:k.toFixed(1)}),t.jsxs("td",{className:"p-2 text-xs space-y-1",children:[M.map((C,T)=>{const D=nr(C);return t.jsxs("div",{className:"text-green-400",children:[t.jsx("span",{className:"font-semibold",children:C.desc||""}),D.length>0&&t.jsxs("span",{className:"text-gray-300 ml-2",children:["(",D.join(""),")"]})]},T)}),z.map((C,T)=>{const D=nr(C);return t.jsxs("div",{className:"text-red-400",children:[t.jsx("span",{className:"font-semibold",children:C.desc||""}),D.length>0&&t.jsxs("span",{className:"text-gray-300 ml-2",children:["(",D.join(""),")"]})]},T)})]})]},v)})})]})}),t.jsx("div",{className:"p-6 border-t border-gray-700 bg-gray-800/50",children:t.jsx("button",{onClick:g,className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-bold transition-colors",children:""})})]})}),Vf=[{id:"overview",label:"",description:""},{id:"economy",label:"",description:""},{id:"needs",label:"",description:""}],m4=({stratumKey:s,popStructure:o,classApproval:d,classInfluence:c,classWealth:m,classWealthHistory:b={},totalInfluence:g,totalWealth:v,activeBuffs:x,activeDebuffs:y,epoch:w=0,techsUnlocked:k=[],history:M={},stability:z=50,onClose:C})=>{const[T,D]=L.useState("overview");if(!s||s==="all")return t.jsx(p4,{popStructure:o,classApproval:d,classInfluence:c,activeBuffs:x,activeDebuffs:y,stability:z,onClose:C});const E=Fe[s];if(!E)return null;const S=Vf.find(_=>_.id===T),q=o[s]||0,W=d[s]||50,be=c[s]||0,G=m[s]||0,P=Object.values(o).reduce((_,B)=>_+B,0),pe=P>0?q/P*100:0,Pe=g>0?be/g*100:0,ne=v>0?G/v*100:0,ae=x.filter(_=>_.class===s||_.source===s),se=y.filter(_=>_.class===s||_.source===s),je=b[s]||[],de=M?.class?.[s]||{pop:[],income:[],expense:[]},I=(_=[])=>{if(!_||_.length<=1)return null;const B=260,re=90,F=Math.max(..._),me=Math.min(..._),h=F-me||1,A=_.map((Y,R)=>{const Q=_.length>1?R/(_.length-1)*B:B,ye=re-(Y-me)/h*re;return`${Q},${ye}`}).join(" ");return t.jsx("svg",{viewBox:`0 0 ${B} ${re}`,preserveAspectRatio:"none",className:"w-full h-24 text-emerald-300 stroke-current fill-none",children:t.jsx("polyline",{points:A,strokeWidth:"2"})})};return t.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[100] p-4 animate-fade-in",children:t.jsxs("div",{className:"glass-epic rounded-xl border border-ancient-gold/30 max-w-3xl w-full max-h-[90vh] flex flex-col overflow-hidden shadow-monument animate-slide-bounce",children:[t.jsx("div",{className:"p-3 md:p-4 border-b border-ancient-gold/20 bg-gradient-to-r from-purple-900/30 via-ancient-ink/50 to-blue-900/30",children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex items-start gap-2 md:gap-3 flex-1 min-w-0",children:[t.jsx("div",{className:"p-2 md:p-2.5 icon-metal-container icon-metal-container-lg flex-shrink-0 animate-breathe-glow",children:t.jsx(j,{name:E.icon,size:22,className:"text-ancient-gold icon-metal-gold md:w-7 md:h-7"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h2",{className:"text-lg md:text-2xl font-bold text-white font-decorative",children:E.name}),t.jsx("p",{className:"text-xs md:text-sm text-gray-300 mt-1",children:E.description}),t.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 mt-2",children:[t.jsx(j,{name:"Heart",size:14,className:`flex-shrink-0 ${z>=70?"text-green-400":z>=40?"text-yellow-400":"text-red-400 animate-pulse"}`}),t.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:":"}),t.jsxs("span",{className:`text-xs md:text-sm font-bold ${z>=70?"text-green-400":z>=40?"text-yellow-400":"text-red-400"}`,children:[Math.floor(z),"%"]})]})]})]}),t.jsx("button",{onClick:C,className:"p-1.5 hover:bg-ancient-gold/20 rounded-lg transition-colors flex-shrink-0 border border-ancient-gold/20 hover:border-ancient-gold/40",children:t.jsx(j,{name:"X",size:18,className:"text-ancient-stone hover:text-ancient-gold transition-colors md:w-5 md:h-5"})})]})}),t.jsx("div",{className:"border-b border-gray-700 bg-gray-800/60 px-6 pt-4",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-3 pb-4",children:[Vf.map(_=>t.jsx("button",{type:"button",className:`rounded-full px-4 py-1.5 text-sm font-semibold ${_.id===T?"bg-indigo-500/20 text-indigo-200":"text-gray-400 hover:text-white"}`,onClick:()=>D(_.id),children:_.label},_.id)),S?.description&&t.jsx("span",{className:"text-sm text-gray-500",children:S.description})]})}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[T==="overview"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[t.jsx(j,{name:"BarChart",size:16,className:"text-blue-400"}),""]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[t.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),t.jsx("p",{className:"text-lg font-bold text-white",children:q}),t.jsxs("p",{className:"text-xs text-blue-400 mt-1",children:[pe.toFixed(1),"%"]})]}),t.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),t.jsxs("p",{className:`text-lg font-bold ${W>=70?"text-green-400":W>=40?"text-yellow-400":"text-red-400"}`,children:[W.toFixed(0),"%"]})]}),t.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),t.jsx("p",{className:"text-lg font-bold text-purple-400",children:be.toFixed(1)}),t.jsxs("p",{className:"text-xs text-purple-400 mt-1",children:[Pe.toFixed(1),"%"]})]}),t.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),t.jsx("p",{className:"text-lg font-bold text-yellow-400",children:G.toFixed(0)}),t.jsxs("p",{className:"text-xs text-yellow-400 mt-1",children:[ne.toFixed(1),"%"]})]})]})]}),(ae.length>0||se.length>0)&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[t.jsx(j,{name:"Zap",size:16,className:"text-yellow-400"}),""]}),t.jsxs("div",{className:"space-y-2",children:[ae.map((_,B)=>{const re=nr(_);return t.jsxs("div",{className:"flex items-start gap-2 bg-green-900/20 border border-green-600/30 p-3 rounded",children:[t.jsx(j,{name:"TrendingUp",size:14,className:"text-green-400 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-semibold text-green-300",children:_.desc||_.name||""}),re.length>0&&t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:re.join("")})]})]},`buff-${B}`)}),se.map((_,B)=>{const re=nr(_);return t.jsxs("div",{className:"flex items-start gap-2 bg-red-900/20 border border-red-600/30 p-3 rounded",children:[t.jsx(j,{name:"TrendingDown",size:14,className:"text-red-400 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-semibold text-red-300",children:_.desc||_.name||""}),re.length>0&&t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:re.join("")})]})]},`debuff-${B}`)})]})]}),t.jsx("div",{className:"bg-blue-900/20 border border-blue-500/30 p-4 rounded",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(j,{name:"Lightbulb",size:20,className:"text-blue-400 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-2",children:""}),t.jsxs("ul",{className:"space-y-1 text-xs text-gray-300",children:[W<40&&t.jsx("li",{children:" "}),be>g*.3&&t.jsx("li",{children:" "}),q>P*.4&&t.jsx("li",{children:" "}),W>=70&&t.jsx("li",{children:" "})]})]})]})})]}),T==="economy"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[t.jsx(j,{name:"Activity",size:16,className:"text-cyan-400"}),""]}),t.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[t.jsxs("div",{className:"bg-gray-700/40 p-3 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-2",children:""}),t.jsx(fo,{data:de.pop,color:"#38bdf8",label:""})]}),t.jsxs("div",{className:"bg-gray-700/40 p-3 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-2",children:""}),t.jsx(fo,{data:de.income,color:"#4ade80",label:""})]}),t.jsxs("div",{className:"bg-gray-700/40 p-3 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-2",children:""}),t.jsx(fo,{data:de.expense,color:"#f87171",label:""})]})]})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[t.jsx(j,{name:"TrendingUp",size:16,className:"text-emerald-400"}),""]}),t.jsx("div",{className:"bg-gray-700/40 p-3 rounded",children:I(je)||t.jsx("p",{className:"text-xs text-gray-500",children:""})})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[t.jsx(j,{name:"Star",size:16,className:"text-yellow-400"}),""]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),t.jsxs("p",{className:"text-sm text-white",children:[E.wealthWeight,"x"]})]}),t.jsxs("div",{className:"bg-gray-700/50 p-3 rounded",children:[t.jsx("p",{className:"text-xs text-gray-400 mb-1",children:""}),t.jsx("p",{className:"text-sm text-white",children:E.influenceBase})]})]})]})]}),T==="needs"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[t.jsx(j,{name:"Package",size:16,className:"text-green-400"}),""]}),t.jsx("div",{className:"space-y-2",children:(()=>{const B=Object.entries(E.needs||{}).filter(([re])=>fs(re,w,k));return B.length>0?B.map(([re,F])=>{const me=Oe[re]?.name||re;return t.jsxs("div",{className:"flex items-center justify-between bg-gray-700/50 p-3 rounded",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{name:"Package",size:14,className:"text-blue-400"}),t.jsx("span",{className:"text-sm text-white",children:me})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-sm font-bold text-white",children:[F,"//"]}),t.jsxs("p",{className:"text-xs text-gray-400",children:[": ",(F*q).toFixed(1),"/"]})]})]},re)}):t.jsx("p",{className:"text-xs text-gray-500 italic",children:""})})()})]}),E.satisfiedEffects&&E.satisfiedEffects.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[t.jsx(j,{name:"ThumbsUp",size:16,className:"text-green-400"}),""]}),t.jsx("div",{className:"space-y-2",children:E.satisfiedEffects.map((_,B)=>t.jsxs("div",{className:"flex items-start gap-2 bg-green-900/20 border border-green-600/30 p-3 rounded",children:[t.jsx(j,{name:"Plus",size:14,className:"text-green-400 flex-shrink-0 mt-0.5"}),t.jsx("p",{className:"text-sm text-green-300",children:_})]},B))})]}),E.dissatisfiedEffects&&E.dissatisfiedEffects.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-bold mb-3 flex items-center gap-2 text-gray-300",children:[t.jsx(j,{name:"ThumbsDown",size:16,className:"text-red-400"}),""]}),t.jsx("div",{className:"space-y-2",children:E.dissatisfiedEffects.map((_,B)=>t.jsxs("div",{className:"flex items-start gap-2 bg-red-900/20 border border-red-600/30 p-3 rounded",children:[t.jsx(j,{name:"Minus",size:14,className:"text-red-400 flex-shrink-0 mt-0.5"}),t.jsx("p",{className:"text-sm text-red-300",children:_})]},B))})]})]})]}),t.jsx("div",{className:"p-6 border-t border-gray-700 bg-gray-800/50",children:t.jsx("button",{onClick:C,className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-bold transition-colors",children:""})})]})})},Na=s=>!Number.isFinite(s)||s===0?"0":Math.abs(s)>=10?s.toFixed(1):Math.abs(s)>=1?s.toFixed(2):s.toFixed(3),Gf=s=>s?Array.isArray(s)?s:[s]:[],Ff=({series:s=[],height:o=220})=>{const d=s.map(C=>({...C,data:Array.isArray(C.data)?C.data:[],color:C.color||"#60a5fa"})).filter(C=>C.data.length>0),c=d.flatMap(C=>C.data.filter(T=>Number.isFinite(T)));if(!d.length||!c.length)return t.jsx("div",{className:"flex h-48 items-center justify-center text-sm text-gray-500",children:""});let m=Math.min(...c),b=Math.max(...c);if(b===m){const C=Math.abs(b)*.1||1;b+=C,m-=C}const g=Math.max(b-m,1),v=640,x=40,y=Math.max(...d.map(C=>C.data.length)),w=y>1?(v-x*2)/(y-1):0,k=4,M=Array.from({length:k+1},(C,T)=>({value:m+g/k*T,y:o-x-(m+g/k*T-m)/g*(o-x*2)})),z=C=>{const T=y-C.length,D=C.map((S,q)=>{if(!Number.isFinite(S))return null;const W=T+q,be=x+W*w,G=(S-m)/g,P=o-x-G*(o-x*2);return{x:be,y:P}}).filter(Boolean);return D.length?{pathD:D.map((S,q)=>`${q===0?"M":"L"}${S.x.toFixed(2)} ${S.y.toFixed(2)}`).join(" "),coords:D}:null};return t.jsxs("div",{className:"w-full",children:[t.jsx("div",{className:"mb-4 flex flex-wrap gap-4 text-sm",children:d.map(C=>t.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[t.jsx("span",{className:"h-3 w-3 rounded-full",style:{backgroundColor:C.color}}),C.label]},C.label))}),t.jsx("div",{className:"relative h-56 w-full overflow-hidden rounded-2xl bg-gray-950/60",children:t.jsxs("svg",{viewBox:`0 0 ${v} ${o}`,preserveAspectRatio:"none",className:"h-full w-full",children:[M.map(({value:C,y:T},D)=>t.jsxs("g",{children:[t.jsx("line",{x1:x,x2:v-x/2,y1:T,y2:T,stroke:"rgba(255,255,255,0.08)",strokeWidth:"1"}),t.jsx("text",{x:x-10,y:T+4,fill:"rgba(255,255,255,0.45)",fontSize:"10",textAnchor:"end",children:C.toFixed(1)})]},`grid-${D}`)),t.jsx("line",{x1:x,x2:v-x/2,y1:o-x,y2:o-x,stroke:"rgba(255,255,255,0.15)",strokeWidth:"1"}),d.map(C=>{const T=z(C.data);return T?t.jsxs("g",{children:[t.jsx("path",{d:T.pathD,stroke:C.color,strokeWidth:"2.5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),T.coords.map((D,E)=>t.jsx("circle",{cx:D.x,cy:D.y,r:"3",fill:C.color,stroke:"rgba(15,23,42,0.8)",strokeWidth:"1"},`${C.label}-${E}`))]},`series-${C.label}`):null})]})})]})},Dd=({resourceKey:s,label:o,subLabel:d,highlight:c=!1})=>{const m=s?Oe[s]:null,b=m?.icon||"Package",g=m?.color||"text-indigo-300";return t.jsxs("div",{className:`flex min-w-[96px] flex-col items-center rounded-2xl border px-4 py-3 text-center ${c?"border-emerald-400/80 bg-emerald-400/10":"border-gray-800/80 bg-gray-900/70"}`,children:[t.jsx("div",{className:"rounded-full border border-gray-800/60 bg-gray-950/70 p-2",children:t.jsx(j,{name:b,size:20,className:g})}),t.jsx("p",{className:"mt-2 text-sm font-semibold text-white",children:o||m?.name||""}),d&&t.jsx("p",{className:"text-xs text-gray-400",children:d})]})},f4=s=>s?Object.values(u1).map(o=>{let d=!1;const c=new Set,m=new Set;return o.stages.forEach(b=>{const g=Gf(b.input),v=Gf(b.output);v.includes(s)&&(d=!0,g.forEach(x=>{Oe[x]&&c.add(x)})),g.includes(s)&&(d=!0,v.forEach(x=>{Oe[x]&&x!==s&&m.add(x)}))}),d?{id:o.id,name:o.name,desc:o.desc,inputs:Array.from(c),outputs:Array.from(m)}:null}).filter(Boolean):[],Pd=[{id:"market",label:"",description:""},{id:"analysis",label:"",description:""},{id:"chain",label:"",description:""}],h4=({resourceKey:s,resources:o={},market:d,buildings:c={},popStructure:m={},wealth:b={},army:g={},history:v={},onClose:x,taxPolicies:y,onUpdateTaxPolicies:w,activeDebuffs:k=[]})=>{const[M,z]=L.useState(Pd[0].id),[C,T]=L.useState(!1),D=Oe[s],E=s==="silver",S=L.useMemo(()=>{const le=d?.priceHistory?.[s];return le?[...le]:[]},[d,s]),[q,W]=L.useState(null),[be,G]=L.useState(null),P=y?.resourceTaxRates?.[s]??0,pe=y?.resourceTariffMultipliers?.[s]??1,Pe=le=>{W(le)},ne=()=>{if(q===null||!w)return;const le=parseFloat(q),K=(Number.isNaN(le)?0:le)/100;w(Be=>({...Be,resourceTaxRates:{...Be?.resourceTaxRates||{},[s]:K}})),W(null)},ae=le=>{G(le)},se=()=>{if(be===null||!w)return;const le=parseFloat(be),Ie=Number.isNaN(le)?1:Math.max(0,le);w(K=>({...K,resourceTariffMultipliers:{...K?.resourceTariffMultipliers||{},[s]:Ie}})),G(null)},je=L.useMemo(()=>{const le=d?.supplyHistory?.[s];return le?[...le]:[]},[d,s]),de=L.useMemo(()=>{const le=d?.demandHistory?.[s];return le?[...le]:[]},[d,s]),I=L.useMemo(()=>f4(s),[s]),_=L.useMemo(()=>{if(!Array.isArray(k)||!k.length)return[];const le=d?.needsShortages||{},Ie=["production","industryBonus","efficiency"];return k.map(K=>{if(!K||!K.class)return null;const Be=Ie.map(_t=>({field:_t,value:K[_t]})).filter(_t=>typeof _t.value=="number"&&_t.value<0).sort((_t,It)=>_t.value-It.value)[0];if(!Be)return null;const ze=Fe[K.class]||{},yt=(le[K.class]||[]).map(_t=>{if(!_t)return null;const It=typeof _t=="string"?{resource:_t,reason:"outOfStock"}:_t;if(!It.resource)return null;const oa=Oe[It.resource]?.name||It.resource,za=It.reason==="unaffordable"?"":It.reason==="both"?"/":"";return`${oa}(${za})`}).filter(Boolean);return{key:K.class,name:ze.name||K.class,icon:ze.icon||"Users",desc:K.desc,penaltyPercent:Math.round(Be.value*100),shortages:yt}}).filter(Boolean)},[k,d]),{stratumDemand:B,buildingDemand:re,armyDemand:F,buildingSupply:me,totalBaseDemand:h,totalBaseSupply:A,totalActualDemand:Y,totalActualSupply:R}=L.useMemo(()=>{if(!D)return{stratumDemand:[],buildingDemand:[],armyDemand:[],buildingSupply:[],totalBaseDemand:0,totalBaseSupply:0,totalActualDemand:0,totalActualSupply:0};const Ie=(d?.modifiers||{}).sources||{},K=Ie.decreeResourceDemand?.[s]||0,Be=Ie.eventResourceDemand?.[s]||0,ze=Ie.decreeResourceSupply?.[s]||0,$e=1+K+Be,yt=1+ze;let _t=0,It=0,oa=0,za=0;const Ta=Object.entries(Fe).reduce((Z,[ee,te])=>{const $=m[ee]||0;if(!$)return Z;const ge=Ie.decreeStratumDemand?.[ee]||0,H=Ie.eventStratumDemand?.[ee]||0,he=1+ge+H,oe=Ie.stratumWealthMultiplier?.[ee]||1,Ae=te.startingWealth||1,Te=(b[ee]||Ae*$)/Math.max(1,$)/Ae,Ue={...te.needs||{}};if(te.luxuryNeeds){const Ce=Object.keys(te.luxuryNeeds).map(Number).sort((nt,qe)=>nt-qe);for(const nt of Ce)if(Te>=nt){const qe=te.luxuryNeeds[nt];for(const[_e,Dt]of Object.entries(qe))Ue[_e]=(Ue[_e]||0)+Dt}}const Ke=Ue[s]||0;if(!Ke)return Z;const Nt=te.needs?.[s]||0,Mt=Ke-Nt,ga=Mt>0,la=Nt===0&&Mt>0,et=Ke*$;_t+=et;const ie=et*he*$e*oe;It+=ie;const ct=[];if(ge!==0&&ct.push(`${ge>0?"+":""}${(ge*100).toFixed(0)}%`),H!==0&&ct.push(`${H>0?"+":""}${(H*100).toFixed(0)}%`),Math.abs(oe-1)>.01){const Ce=(oe-1)*100;ct.push(`${Ce>0?"+":""}${Ce.toFixed(0)}%`)}ga&&ct.push(`+${Mt.toFixed(3)}`);let Ve=`${$}  ${Ke.toFixed(3)}`;return ga&&Nt>0?Ve=`${$}  (${Nt}+${Mt.toFixed(3)})`:la&&(Ve=`${$}  ${Mt.toFixed(3)}()`),Z.push({key:ee,name:te.name,icon:te.icon,baseAmount:et,amount:ie,formula:Ve,mods:ct,hasBonus:ie!==et||ga,isLuxuryNeed:ga,isPureLuxury:la,wealthRatio:Te.toFixed(2)}),Z},[]),en=Tn.reduce((Z,ee)=>{const te=ee.input?.[s]||0,$=c[ee.id]||0;if(!te||!$)return Z;const ge=te*$;_t+=ge;const H=ge*$e;return It+=H,Z.push({id:ee.id,name:ee.name,baseAmount:ge,amount:H,formula:`${$}   ${te}`,hasBonus:H!==ge}),Z},[]),$n=Tn.reduce((Z,ee)=>{const te=ee.output?.[s]||0,$=c[ee.id]||0;if(!te||!$)return Z;const ge=te*$;oa+=ge;const H=(Ie.techBuildingBonus?.[ee.id]||1)-1,he=Ie.eventBuildingProduction?.[ee.id]||0,oe=(Ie.techCategoryBonus?.[ee.cat]||1)-1,Ae=Ie.eventBuildingProduction?.[ee.cat]||0,Le=1+H+he+oe+Ae,We=ge*Le*yt;za+=We;const Te=[];return H!==0&&Te.push(`${H>0?"+":""}${(H*100).toFixed(0)}%`),he!==0&&Te.push(`${he>0?"+":""}${(he*100).toFixed(0)}%`),oe!==0&&Te.push(`${oe>0?"+":""}${(oe*100).toFixed(0)}%`),Ae!==0&&Te.push(`${Ae>0?"+":""}${(Ae*100).toFixed(0)}%`),Z.push({id:ee.id,name:ee.name,baseAmount:ge,amount:We,formula:`${$}   ${te}`,mods:Te,hasBonus:We!==ge}),Z},[]),At=Object.entries(Sn).reduce((Z,[ee,te])=>{const $=te.maintenanceCost?.[s]||0,ge=g[ee]||0;if(!$||!ge)return Z;const H=$*ge;_t+=H;const he=H*$e;return It+=he,Z.push({id:ee,name:te.name,baseAmount:H,amount:he,formula:`${ge}   ${$}`,hasBonus:he!==H}),Z},[]);return{stratumDemand:Ta,buildingDemand:en,armyDemand:At,buildingSupply:$n,totalBaseDemand:_t,totalBaseSupply:oa,totalActualDemand:It,totalActualSupply:za}},[D,s,m,c,g,d,b]);if(!s||!D)return null;const Q=()=>{T(!0),setTimeout(()=>{x()},300)},ye=C?"animate-sheet-out":"animate-sheet-in",Ne=v?.treasury||[],ke=v?.tax||[],Je=Ne.length?Ne[Ne.length-1]:o[s]||0,tt=ke.length?ke[ke.length-1]:0,bt=o[s]||0,ft=d?.supply?.[s]||0,vt=d?.demand?.[s]||0,we=d?.prices?.[s]??D.basePrice??0,Ze=S.length>=2?S[S.length-1]-S[S.length-2]:0,pt=je[je.length-1]??ft,xt=de[de.length-1]??vt,jt=Pd.find(le=>le.id===M);return Qn.createPortal(t.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end justify-center lg:items-center",children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 animate-fade-in",onClick:Q}),t.jsxs("div",{className:`relative w-full max-w-4xl glass-epic border-t-2 lg:border-2 border-ancient-gold/30 rounded-t-2xl lg:rounded-2xl shadow-metal-xl flex flex-col max-h-[92vh] ${ye} lg:animate-slide-up`,children:[t.jsx("div",{className:"flex-shrink-0 p-2 lg:p-3 border-b border-gray-700 bg-gradient-to-r from-gray-900 to-gray-800",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-9 h-9 lg:w-10 lg:h-10 icon-metal-container icon-metal-container-lg flex-shrink-0",children:t.jsx(j,{name:D.icon,size:20,className:`${D.color} icon-metal`})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h2",{className:"text-sm lg:text-base font-bold text-white leading-tight font-decorative",children:D.name}),t.jsxs("p",{className:"text-[9px] lg:text-[10px] text-gray-400 leading-tight truncate",children:[" ",bt.toFixed(1)," ",E?" ":`  ${we.toFixed(2)}`]})]}),t.jsx("button",{onClick:Q,className:"p-1.5 lg:p-2 rounded-full hover:bg-gray-700 flex-shrink-0",children:t.jsx(j,{name:"X",size:16,className:"text-gray-400"})})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:E?t.jsxs("div",{className:"space-y-2 lg:space-y-3 p-2 lg:p-3",children:[t.jsxs("div",{className:"grid gap-1.5 lg:gap-2 grid-cols-2",children:[t.jsxs("div",{className:"rounded-lg border border-yellow-500/30 bg-yellow-500/5 p-2 lg:p-2.5",children:[t.jsx("p",{className:"text-[8px] lg:text-[9px] uppercase tracking-wide text-yellow-300/80 leading-none",children:""}),t.jsx("p",{className:"mt-1 text-base lg:text-lg font-bold text-yellow-200 font-mono leading-none",children:Je.toFixed(0)}),t.jsxs("p",{className:"mt-0.5 lg:mt-1 text-[8px] lg:text-[9px] text-yellow-200/80 leading-none",children:[" ",(o[s]||0).toFixed(0)]})]}),t.jsxs("div",{className:"rounded-lg border border-emerald-500/30 bg-emerald-500/5 p-2 lg:p-2.5",children:[t.jsx("p",{className:"text-[8px] lg:text-[9px] uppercase tracking-wide text-emerald-300/80 leading-none",children:""}),t.jsx("p",{className:"mt-1 text-base lg:text-lg font-bold text-emerald-200 font-mono leading-none",children:Na(tt)}),t.jsx("p",{className:"mt-0.5 lg:mt-1 text-[8px] lg:text-[9px] text-emerald-200/80 leading-none",children:""})]})]}),t.jsxs("div",{className:"rounded-lg border border-blue-500/30 bg-blue-500/5 p-2",children:[t.jsx("p",{className:"text-[8px] lg:text-[9px] uppercase tracking-wide text-blue-200/80 leading-none mb-0.5 lg:mb-1",children:""}),t.jsx("p",{className:"text-[9px] lg:text-[10px] text-blue-100/80 leading-snug lg:leading-relaxed",children:",,"})]}),!E&&w&&t.jsxs("div",{className:"rounded-lg border border-emerald-500/30 bg-emerald-500/5 p-3",children:[t.jsx("p",{className:"text-[9px] uppercase tracking-wide text-emerald-300/80 leading-none mb-2",children:""}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",inputMode:"decimal",step:"1",value:q??(P*100).toFixed(0),onChange:le=>Pe(le.target.value),onBlur:ne,onKeyDown:le=>{le.key==="Enter"&&(ne(),le.target.blur())},className:"w-24 bg-gray-800/70 border border-gray-600 text-sm text-gray-200 rounded px-2 py-1 focus:ring-1 focus:ring-emerald-500 focus:border-emerald-500 text-center",placeholder:"%"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("p",{className:"text-sm font-semibold text-emerald-200",children:[": ",(P*100).toFixed(0),"%"]}),t.jsx("p",{className:"text-[10px] text-gray-400",children:""})]})]})]}),t.jsxs("div",{className:"rounded-lg border border-blue-500/30 bg-blue-500/5 p-2",children:[t.jsx("p",{className:"text-[8px] lg:text-[9px] uppercase tracking-wide text-blue-200/80 leading-none mb-0.5 lg:mb-1",children:""}),t.jsx("p",{className:"text-[9px] lg:text-[10px] text-blue-100/80 leading-snug lg:leading-relaxed",children:",,"})]}),t.jsxs("div",{className:"space-y-1.5 lg:space-y-2",children:[t.jsxs("div",{className:"rounded-lg border border-gray-700 bg-gray-900/60 p-2",children:[t.jsxs("div",{className:"mb-1.5 lg:mb-2 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[8px] lg:text-[9px] uppercase tracking-wide text-gray-500 leading-none",children:""}),t.jsxs("p",{className:"text-xs lg:text-sm font-semibold text-white leading-tight mt-0.5",children:[" ",(o[s]||0).toFixed(0)," "]})]}),t.jsx(j,{name:"Coins",size:14,className:"text-yellow-200"})]}),t.jsx(fo,{data:Ne,color:"#facc15",label:""})]}),t.jsxs("div",{className:"rounded-lg border border-gray-700 bg-gray-900/60 p-2",children:[t.jsxs("div",{className:"mb-1.5 lg:mb-2 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[8px] lg:text-[9px] uppercase tracking-wide text-gray-500 leading-none",children:""}),t.jsxs("p",{className:"text-xs lg:text-sm font-semibold text-white leading-tight mt-0.5",children:[" ",Na(tt)," / "]})]}),t.jsx(j,{name:"Activity",size:14,className:"text-emerald-300"})]}),t.jsx(fo,{data:ke,color:"#34d399",label:""})]})]})]}):t.jsxs("div",{className:"flex h-full flex-col",children:[t.jsxs("div",{className:"border-b border-gray-700 bg-gray-900/70 px-2 lg:px-3 pt-1.5 lg:pt-2 flex-shrink-0",children:[t.jsx("div",{className:"flex items-center gap-1.5 lg:gap-2 overflow-x-auto pb-1.5 lg:pb-2",children:Pd.map(le=>t.jsx("button",{type:"button",className:`rounded-full px-2.5 lg:px-3 py-1 text-[9px] lg:text-[10px] font-semibold whitespace-nowrap ${le.id===M?"bg-emerald-500/20 text-emerald-300":"text-gray-400 hover:text-white"}`,onClick:()=>z(le.id),children:le.label},le.id))}),jt&&t.jsx("p",{className:"text-[8px] lg:text-[9px] text-gray-500 pb-1 leading-tight",children:jt.description})]}),t.jsxs("div",{className:"flex-1 space-y-2 lg:space-y-3 p-2 lg:p-3 overflow-y-auto",children:[!E&&w&&t.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-emerald-500/30 bg-emerald-950/40 p-2.5 lg:p-4",children:[t.jsx("p",{className:"text-[10px] lg:text-xs uppercase tracking-wide text-gray-500 mb-1.5 lg:mb-2",children:""}),t.jsxs("div",{className:"flex items-center gap-2 lg:gap-4",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("input",{type:"text",inputMode:"decimal",value:q??(P*100).toFixed(0),onChange:le=>Pe(le.target.value),onBlur:ne,onKeyDown:le=>{le.key==="Enter"&&(ne(),le.target.blur())},className:"w-16 lg:w-24 bg-gray-800/70 border border-gray-600 text-base lg:text-lg font-mono text-gray-200 rounded-lg px-1.5 lg:px-2 py-1 focus:ring-1 focus:ring-emerald-500 focus:border-emerald-500 text-center"}),t.jsx("span",{className:"text-base lg:text-lg font-semibold text-emerald-300",children:"%"})]}),t.jsxs("div",{className:"text-right flex-1",children:[t.jsx("p",{className:`text-base lg:text-lg font-bold ${P>0?"text-yellow-300":P<0?"text-green-300":"text-gray-400"}`,children:P>0?"":P<0?"":""}),t.jsx("p",{className:"text-[10px] lg:text-xs text-gray-400",children:""})]})]}),t.jsx("p",{className:"text-[10px] lg:text-xs text-gray-400 mt-1.5 lg:mt-2",children:""}),t.jsxs("div",{className:"mt-2 lg:mt-3",children:[t.jsx("p",{className:"text-[10px] lg:text-xs uppercase tracking-wide text-gray-500 mb-1",children:""}),t.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[t.jsx("input",{type:"text",inputMode:"decimal",step:"0.1",value:be??pe.toFixed(2),onChange:le=>ae(le.target.value),onBlur:se,onKeyDown:le=>{le.key==="Enter"&&(se(),le.target.blur())},className:"w-20 lg:w-28 bg-gray-800/70 border border-gray-600 text-base lg:text-lg font-mono text-gray-200 rounded-lg px-1.5 lg:px-2 py-1 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 text-center"}),t.jsxs("div",{className:"text-right flex-1",children:[t.jsxs("p",{className:"text-sm lg:text-base font-semibold text-indigo-200",children:[pe.toFixed(2),""]}),t.jsx("p",{className:"text-[10px] lg:text-xs text-gray-400",children:""})]})]}),t.jsx("p",{className:"text-[10px] lg:text-xs text-gray-400 mt-1",children:""})]})]}),M==="market"&&t.jsxs("div",{className:"space-y-3 lg:space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2 lg:gap-4",children:[t.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-gray-800 bg-gray-950/60 p-2.5 lg:p-4",children:[t.jsx("p",{className:"text-[10px] lg:text-xs uppercase tracking-wide text-gray-500",children:""}),t.jsx("p",{className:"mt-1 lg:mt-2 text-2xl lg:text-3xl font-bold text-white",children:bt.toFixed(1)}),t.jsxs("p",{className:"mt-1 lg:mt-2 text-xs lg:text-sm text-gray-400",children:[" ",Na(pt-xt||0)]})]}),t.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-gray-800 bg-gray-950/60 p-2.5 lg:p-4",children:[t.jsx("p",{className:"text-[10px] lg:text-xs uppercase tracking-wide text-gray-500",children:""}),t.jsxs("div",{className:"mt-1 lg:mt-2 flex items-center gap-2 lg:gap-3 text-white",children:[t.jsx("span",{className:"text-2xl lg:text-3xl font-bold",children:we.toFixed(2)}),t.jsxs("span",{className:`flex items-center gap-0.5 lg:gap-1 text-xs lg:text-sm ${Ze>0?"text-emerald-400":Ze<0?"text-rose-400":"text-gray-400"}`,children:[t.jsx(j,{name:Ze>=0?"ArrowUp":"ArrowDown",size:14}),Ze>=0?"+":"",Na(Ze)]})]}),t.jsx("p",{className:"mt-1 lg:mt-2 text-xs lg:text-sm text-gray-400",children:""})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 lg:gap-3",children:[t.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-gray-800 bg-gray-950/60 p-2 lg:p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-[10px] lg:text-xs uppercase tracking-wide text-gray-500",children:""}),t.jsx(j,{name:"TrendingUp",size:14,className:"text-sky-300"})]}),t.jsx(Ff,{series:[{label:"",color:"#60a5fa",data:S}]}),t.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-1.5",children:[t.jsxs("div",{className:"rounded-lg border border-gray-800/60 bg-gray-900/60 p-1.5 text-center",children:[t.jsx("p",{className:"text-[9px] lg:text-[10px] text-gray-500",children:""}),t.jsx("p",{className:"text-sm lg:text-base font-bold text-white",children:we.toFixed(2)})]}),t.jsxs("div",{className:"rounded-lg border border-gray-800/60 bg-gray-900/60 p-1.5 text-center",children:[t.jsx("p",{className:"text-[9px] lg:text-[10px] text-gray-500",children:""}),t.jsxs("p",{className:`text-sm lg:text-base font-bold ${Ze>0?"text-emerald-300":Ze<0?"text-rose-300":"text-white"}`,children:[Ze>=0?"+":"",Na(Ze)]})]})]})]}),t.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-gray-800 bg-gray-950/60 p-2 lg:p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-[10px] lg:text-xs uppercase tracking-wide text-gray-500",children:""}),t.jsx(j,{name:"Activity",size:14,className:"text-emerald-300"})]}),t.jsx(Ff,{series:[{label:"",color:"#34d399",data:je},{label:"",color:"#f87171",data:de}]}),t.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-1.5",children:[t.jsxs("div",{className:"rounded-lg border border-gray-800/60 bg-gray-900/60 p-1.5 text-center",children:[t.jsx("p",{className:"text-[9px] lg:text-[10px] text-gray-500",children:""}),t.jsx("p",{className:"text-sm lg:text-base font-bold text-emerald-300",children:Na(pt)})]}),t.jsxs("div",{className:"rounded-lg border border-gray-800/60 bg-gray-900/60 p-1.5 text-center",children:[t.jsx("p",{className:"text-[9px] lg:text-[10px] text-gray-500",children:""}),t.jsx("p",{className:"text-sm lg:text-base font-bold text-rose-300",children:Na(xt)})]}),t.jsxs("div",{className:"rounded-lg border border-gray-800/60 bg-gray-900/60 p-1.5 text-center",children:[t.jsx("p",{className:"text-[9px] lg:text-[10px] text-gray-500",children:""}),t.jsx("p",{className:"text-sm lg:text-base font-bold text-white",children:Na((pt||0)-(xt||0))})]})]})]})]})]}),M==="analysis"&&t.jsxs("div",{className:"grid gap-3 lg:gap-6 lg:grid-cols-2",children:[(()=>{const le=d?.demand?.[s]||0,Ie=d?.supply?.[s]||0,K=Y>0?Math.abs(le-Y)/Y:0,Be=R>0?Math.abs(Ie-R)/R:0;return(le>0||Ie>0)&&(K>.05||Be>.05)?t.jsxs("div",{className:"lg:col-span-2 rounded-xl border border-blue-500/30 bg-blue-950/20 p-2.5",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(j,{name:"Info",size:14,className:"text-blue-400"}),t.jsx("p",{className:"text-[10px] lg:text-xs text-blue-200 font-medium",children:""})]}),t.jsxs("div",{className:"grid gap-2 grid-cols-2",children:[t.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5 rounded-lg border border-rose-500/30 bg-rose-950/30",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-[10px] text-rose-300",children:""}),t.jsxs("span",{className:"text-[8px] text-gray-500 ml-1",children:["vs ",Na(Y)]})]}),t.jsx("span",{className:"text-xs font-bold text-rose-400",children:Na(le)})]}),t.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5 rounded-lg border border-emerald-500/30 bg-emerald-950/30",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-[10px] text-emerald-300",children:""}),t.jsxs("span",{className:"text-[8px] text-gray-500 ml-1",children:["vs ",Na(R)]})]}),t.jsx("span",{className:"text-xs font-bold text-emerald-400",children:Na(Ie)})]})]}),t.jsx("p",{className:"text-[9px] text-gray-500 mt-1.5",children:"= | ="})]}):null})(),t.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-gray-800 bg-gray-950/60 p-3 lg:p-5",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] lg:text-xs uppercase tracking-wide text-gray-500",children:""}),t.jsxs("p",{className:"text-base lg:text-xl font-semibold text-white",children:[" ",Na(Y),h!==Y&&t.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(: ",Na(h),")"]})]})]}),t.jsx(j,{name:"TrendingUp",size:18,className:"text-rose-300"})]}),t.jsxs("div",{className:"mt-2 lg:mt-4 space-y-2 lg:space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs lg:text-sm font-semibold text-gray-300",children:""}),t.jsx("div",{className:"mt-1.5 lg:mt-2 space-y-1.5 lg:space-y-2",children:B.length?B.map(le=>t.jsxs("div",{className:`flex items-center justify-between rounded-lg lg:rounded-xl border ${le.isPureLuxury?"border-purple-500/30 bg-purple-950/20":le.isLuxuryNeed?"border-indigo-500/30 bg-indigo-950/20":le.hasBonus?"border-amber-500/30 bg-amber-950/20":"border-gray-800/60 bg-gray-900/60"} p-2 lg:p-3`,children:[t.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[t.jsx("div",{className:`rounded-lg lg:rounded-xl p-1.5 lg:p-2 ${le.isPureLuxury?"bg-purple-900/80":le.isLuxuryNeed?"bg-indigo-900/80":"bg-gray-900/80"}`,children:t.jsx(j,{name:le.icon,size:16,className:le.isPureLuxury?"text-purple-300":le.isLuxuryNeed?"text-indigo-300":"text-amber-300"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("p",{className:"text-xs lg:text-sm font-semibold text-white",children:le.name}),le.isPureLuxury&&t.jsx("span",{className:"text-[8px] px-1 py-0.5 rounded bg-purple-900/50 text-purple-300 border border-purple-500/30",children:""}),le.isLuxuryNeed&&!le.isPureLuxury&&t.jsx("span",{className:"text-[8px] px-1 py-0.5 rounded bg-indigo-900/50 text-indigo-300 border border-indigo-500/30",children:""})]}),t.jsx("p",{className:"text-[10px] lg:text-xs text-gray-500",children:le.formula}),le.mods&&le.mods.length>0&&t.jsx("p",{className:`text-[9px] ${le.isPureLuxury?"text-purple-400":le.isLuxuryNeed?"text-indigo-400":"text-amber-400"}`,children:le.mods.join("  ")})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:`text-sm lg:text-base font-bold ${le.isPureLuxury?"text-purple-200":le.isLuxuryNeed?"text-indigo-200":"text-rose-200"}`,children:Na(le.amount)}),le.hasBonus&&t.jsxs("p",{className:"text-[9px] text-gray-500",children:[": ",Na(le.baseAmount)]})]})]},le.key)):t.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""})})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs lg:text-sm font-semibold text-gray-300",children:"/"}),t.jsx("div",{className:"mt-1.5 lg:mt-2 space-y-1.5 lg:space-y-2",children:re.length?re.map(le=>t.jsxs("div",{className:`flex items-center justify-between rounded-lg lg:rounded-xl border ${le.hasBonus?"border-amber-500/30 bg-amber-950/20":"border-gray-800/60 bg-gray-900/60"} p-2 lg:p-3`,children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs lg:text-sm font-semibold text-white",children:le.name}),t.jsx("p",{className:"text-[10px] lg:text-xs text-gray-500",children:le.formula})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm lg:text-base font-bold text-rose-200",children:Na(le.amount)}),le.hasBonus&&t.jsxs("p",{className:"text-[9px] text-gray-500",children:[": ",Na(le.baseAmount)]})]})]},le.id)):t.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""})})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs lg:text-sm font-semibold text-gray-300",children:""}),t.jsx("div",{className:"mt-1.5 lg:mt-2 space-y-1.5 lg:space-y-2",children:F.length?F.map(le=>t.jsxs("div",{className:`flex items-center justify-between rounded-lg lg:rounded-xl border ${le.hasBonus?"border-amber-500/30 bg-amber-950/20":"border-gray-800/60 bg-gray-900/60"} p-2 lg:p-3`,children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs lg:text-sm font-semibold text-white",children:le.name}),t.jsx("p",{className:"text-[10px] lg:text-xs text-gray-500",children:le.formula})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm lg:text-base font-bold text-rose-200",children:Na(le.amount)}),le.hasBonus&&t.jsxs("p",{className:"text-[9px] text-gray-500",children:[": ",Na(le.baseAmount)]})]})]},le.id)):t.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""})})]})]})]}),t.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-gray-800 bg-gray-950/60 p-3 lg:p-5",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] lg:text-xs uppercase tracking-wide text-gray-500",children:""}),t.jsxs("p",{className:"text-base lg:text-xl font-semibold text-white",children:[" ",Na(R),A!==R&&t.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(: ",Na(A),")"]})]})]}),t.jsx(j,{name:"TrendingDown",size:18,className:"text-emerald-300"})]}),t.jsx("div",{className:"mt-2 lg:mt-4 space-y-1.5 lg:space-y-2",children:me.length?me.map(le=>t.jsxs("div",{className:`flex items-center justify-between rounded-lg lg:rounded-xl border ${le.hasBonus?"border-emerald-500/30 bg-emerald-950/20":"border-gray-800/60 bg-gray-900/60"} p-2 lg:p-3`,children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs lg:text-sm font-semibold text-white",children:le.name}),t.jsx("p",{className:"text-[10px] lg:text-xs text-gray-500",children:le.formula}),le.mods&&le.mods.length>0&&t.jsx("p",{className:"text-[9px] text-emerald-400",children:le.mods.join("  ")})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm lg:text-base font-bold text-emerald-200",children:Na(le.amount)}),le.hasBonus&&t.jsxs("p",{className:"text-[9px] text-gray-500",children:[": ",Na(le.baseAmount)]})]})]},le.id)):t.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:""})}),_.length>0&&t.jsxs("div",{className:"mt-3 rounded-lg lg:rounded-xl border border-amber-600/30 bg-amber-500/5 p-2.5 lg:p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-amber-200 text-[10px] lg:text-xs font-semibold",children:[t.jsx(j,{name:"AlertTriangle",size:14,className:"text-amber-300"}),""]}),t.jsx("div",{className:"mt-2 space-y-2",children:_.map(le=>t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("div",{className:"rounded-lg bg-amber-400/10 border border-amber-400/30 p-1.5",children:t.jsx(j,{name:le.icon,size:14,className:"text-amber-200"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs lg:text-sm font-semibold text-amber-100",children:le.name}),le.desc&&t.jsx("p",{className:"text-[10px] text-gray-400",children:le.desc}),le.shortages.length>0&&t.jsxs("p",{className:"text-[10px] text-amber-200/80 mt-0.5",children:["",le.shortages.join("")]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-sm lg:text-base font-semibold text-amber-200",children:[le.penaltyPercent,"%"]}),t.jsx("p",{className:"text-[9px] text-gray-500",children:""})]})]},le.key))})]}),t.jsxs("div",{className:"mt-2 lg:mt-4 rounded-lg lg:rounded-xl border border-gray-800/60 bg-gray-900/60 p-2.5 lg:p-4 text-xs lg:text-sm text-gray-400",children:[" ",Na(R),"   ",Na(Y),"  "," ",Na(Math.max(0,Y-R)),(A!==R||h!==Y)&&t.jsxs("span",{className:"text-gray-500 ml-2",children:["| : ",Na(A)," / ",Na(h)]})]})]})]}),M==="chain"&&t.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-gray-800 bg-gray-950/60 p-3 lg:p-5",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] lg:text-xs uppercase tracking-wide text-gray-500",children:""}),t.jsx("p",{className:"text-base lg:text-xl font-semibold text-white",children:""})]})}),t.jsx("div",{className:"mt-2 lg:mt-4 space-y-2 lg:space-y-4",children:I.length?I.map(le=>t.jsxs("div",{className:"rounded-xl lg:rounded-2xl border border-gray-800/60 bg-gray-900/60 p-3 lg:p-4",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-base lg:text-lg font-semibold text-white",children:le.name}),t.jsx("p",{className:"text-xs lg:text-sm text-gray-400",children:le.desc})]})}),t.jsxs("div",{className:"mt-2 lg:mt-4 flex flex-wrap items-center gap-2 lg:gap-4",children:[t.jsx("div",{className:"flex flex-wrap gap-2",children:(le.inputs.length?le.inputs:[null]).map((Ie,K)=>{const Be=Ie?Oe[Ie]:null;return t.jsx(Dd,{resourceKey:Ie,label:Be?.name||"/",subLabel:Be?"":""},`${le.id}-input-${Ie||K}`)})}),t.jsx(j,{name:"ArrowRight",size:16,className:"text-gray-500"}),t.jsx(Dd,{resourceKey:s,label:D.name,subLabel:"",highlight:!0}),t.jsx(j,{name:"ArrowRight",size:16,className:"text-gray-500"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:(le.outputs.length?le.outputs:[null]).map((Ie,K)=>{const Be=Ie?Oe[Ie]:null;return t.jsx(Dd,{resourceKey:Ie,label:Be?.name||"",subLabel:Be?"":""},`${le.id}-output-${Ie||K}`)})})]})]},le.id)):t.jsx("div",{className:"rounded-lg lg:rounded-xl border border-gray-800/60 bg-gray-900/60 p-4 lg:p-6 text-center text-xs lg:text-sm text-gray-500",children:""})})]})]})]})})]})]}),document.body)},x4=({isOpen:s,onClose:o,population:d=0,maxPop:c=0,popStructure:m={},history:b={}})=>{const[g,v]=L.useState(!1);if(!s)return null;const x=()=>{v(!0),setTimeout(()=>{o()},300)},y=g?"animate-sheet-out":"animate-sheet-in",w=b?.population||[],k=Object.keys(Fe).map(M=>{const z=m[M]||0,C=d>0?z/d*100:0;return{key:M,name:Fe[M].name,icon:Fe[M].icon,count:z,percent:C}}).filter(M=>M.count>0).sort((M,z)=>z.count-M.count);return Qn.createPortal(t.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end justify-center lg:items-center",children:[t.jsx("div",{className:"absolute inset-0 bg-black/70 animate-fade-in",onClick:x}),t.jsxs("div",{className:`relative w-full max-w-2xl glass-epic border-t-2 lg:border-2 border-ancient-gold/30 rounded-t-2xl lg:rounded-2xl shadow-metal-xl flex flex-col max-h-[90vh] ${y} lg:animate-slide-up`,children:[t.jsx("div",{className:"flex-shrink-0 p-3 border-b border-gray-700 bg-gray-900/70",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-10 h-10 icon-metal-container icon-metal-container-lg flex-shrink-0",children:t.jsx(j,{name:"Users",size:24,className:"text-blue-300 icon-metal-blue"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h2",{className:"text-base font-bold text-white leading-tight font-decorative",children:""}),t.jsxs("p",{className:"text-[10px] text-gray-400 leading-tight",children:[" ",d," / ",c]})]}),t.jsx("button",{onClick:x,className:"p-2 rounded-full hover:bg-gray-700 flex-shrink-0",children:t.jsx(j,{name:"X",size:18,className:"text-gray-400"})})]})}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[9px] uppercase tracking-wide text-gray-500 leading-none",children:""}),t.jsxs("p",{className:"text-sm font-semibold text-white leading-tight mt-0.5",children:[" ",d,"    ",c]})]}),t.jsx(j,{name:"Activity",size:16,className:"text-blue-300"})]}),t.jsx(fo,{data:w,color:"#60a5fa",label:""})]}),t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("div",{className:"mb-1.5 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[9px] uppercase tracking-wide text-gray-500 leading-none",children:""}),t.jsx("p",{className:"text-sm font-semibold text-white leading-tight mt-0.5",children:""})]}),t.jsx(j,{name:"Layers",size:16,className:"text-purple-300"})]}),t.jsx("div",{className:"space-y-2",children:k.length?k.map(M=>t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between text-[10px] text-gray-300",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(j,{name:M.icon,size:14,className:"text-amber-300"}),t.jsx("span",{className:"leading-none",children:M.name})]}),t.jsxs("div",{className:"text-[9px] text-gray-400 font-mono leading-none",children:[M.count,"   ",M.percent.toFixed(1),"%"]})]}),t.jsx("div",{className:"mt-1 h-1.5 rounded-full bg-gray-800",children:t.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-400 to-purple-500",style:{width:`${Math.min(M.percent,100)}%`}})})]},M.key)):t.jsx("p",{className:"text-[10px] text-gray-500 text-center py-2",children:""})})]})]}),t.jsx("div",{className:"flex-shrink-0 p-3 border-t border-gray-700 bg-gray-800/50",children:t.jsx("button",{onClick:x,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-bold transition-colors",children:""})})]})]}),document.body)},g4=({festivalOptions:s,year:o,epoch:d,onSelect:c})=>{const[m,b]=L.useState(null),[g,v]=L.useState(null),[x,y]=L.useState(!1);if(!s||s.length===0)return null;const w=Qa[d]||Qa[0],k=x?"animate-sheet-out":"animate-sheet-in",M=()=>{m&&(y(!0),setTimeout(()=>{c(m)},300))},z=T=>T||"Star",C=T=>{const D=[];return T.categories&&Object.entries(T.categories).forEach(([E,S])=>{const q=(S*100).toFixed(0),W=E==="gather"?"":E==="industry"?"":E;D.push(`${W} +${q}%`)}),T.production&&D.push(` +${(T.production*100).toFixed(0)}%`),T.industry&&D.push(` +${(T.industry*100).toFixed(0)}%`),T.scienceBonus&&D.push(` +${(T.scienceBonus*100).toFixed(0)}%`),T.cultureBonus&&D.push(` +${(T.cultureBonus*100).toFixed(0)}%`),T.militaryBonus&&D.push(` +${(T.militaryBonus*100).toFixed(0)}%`),T.taxIncome&&D.push(` +${(T.taxIncome*100).toFixed(0)}%`),T.stability&&D.push(` +${(T.stability*100).toFixed(0)}%`),T.maxPop&&D.push(` +${T.maxPop}`),D};return Qn.createPortal(t.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end justify-center lg:items-center",children:[t.jsx("div",{className:"absolute inset-0 bg-black/80 animate-fade-in"}),t.jsxs("div",{className:`relative w-full max-w-4xl glass-epic border-t-2 lg:border-2 border-ancient-gold/40 rounded-t-2xl lg:rounded-2xl shadow-metal-xl flex flex-col max-h-[92vh] ${k} lg:animate-slide-up`,children:[t.jsx("div",{className:"flex-shrink-0 p-3 border-b border-gray-700 bg-gradient-to-r from-yellow-900/50 via-orange-900/50 to-red-900/50",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1.5",children:[t.jsx(j,{name:"Sparkles",size:20,className:"text-yellow-400 animate-pulse"}),t.jsx("h2",{className:"text-base font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 via-yellow-400 to-orange-400",children:"  "}),t.jsx(j,{name:"Sparkles",size:20,className:"text-yellow-400 animate-pulse"})]}),t.jsxs("p",{className:"text-sm text-white font-semibold leading-tight",children:[" ",o," "]}),t.jsxs("p",{className:"text-[10px] text-gray-300 leading-tight mt-0.5",children:[t.jsx("span",{className:`font-bold ${w.color}`,children:w.name}),"  "]})]})}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:[t.jsx("div",{className:"bg-blue-900/20 border border-blue-500/30 p-2 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(j,{name:"Info",size:14,className:"text-blue-400 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"text-[10px] text-gray-300 leading-relaxed",children:[t.jsx("p",{className:"font-semibold text-blue-300 mb-0.5 leading-tight",children:""}),t.jsx("p",{children:""}),t.jsxs("p",{className:"mt-0.5",children:[t.jsx("span",{className:"text-yellow-400",children:" "})," 360",t.jsx("span",{className:"text-purple-400 ml-1",children:" "})," "]})]})]})}),t.jsx("div",{className:"grid grid-cols-1 gap-2",children:s.map((T,D)=>{const E=m?.id===T.id,S=T.type==="permanent",q=C(T.effects);return t.jsx("div",{className:"relative cursor-pointer transition-all duration-200",onClick:()=>b(T),children:t.jsxs("div",{className:`rounded-lg border-2 overflow-hidden ${E?S?"border-purple-400 bg-purple-900/30":"border-yellow-400 bg-yellow-900/30":"border-gray-600 bg-gray-700/50"}`,children:[t.jsx("div",{className:`px-2 py-1 text-center text-[14px] font-bold ${S?"bg-gradient-to-r from-purple-600 to-purple-800 text-purple-100":"bg-gradient-to-r from-yellow-600 to-orange-600 text-yellow-100"}`,children:S?" ":" 1"}),t.jsxs("div",{className:"p-2",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[t.jsx("div",{className:`p-2 rounded-lg ${S?"bg-purple-600/30":"bg-yellow-600/30"}`,children:t.jsx(j,{name:z(T.icon),size:20,className:S?"text-purple-300":"text-yellow-300"})}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx("h3",{className:"text-sm font-bold text-white leading-tight",children:T.name})}),E&&t.jsx("div",{className:`p-1 rounded-full ${S?"bg-purple-500":"bg-yellow-500"}`,children:t.jsx(j,{name:"Check",size:14,className:"text-white"})})]}),t.jsx("p",{className:"text-[10px] text-gray-300 mb-1.5 leading-relaxed",children:T.description}),t.jsx("div",{className:"space-y-1 mb-1.5",children:q.map((W,be)=>t.jsxs("div",{className:`flex items-center gap-1.5 text-[11px] p-1 rounded ${S?"bg-purple-900/30 border border-purple-600/30":"bg-yellow-900/30 border border-yellow-600/30"}`,children:[t.jsx(j,{name:"Plus",size:10,className:S?"text-purple-400":"text-yellow-400"}),t.jsx("span",{className:"text-gray-200 leading-none",children:W})]},be))}),t.jsx("div",{className:"pt-1.5 border-t border-gray-600",children:t.jsxs("p",{className:"text-[9px] text-gray-400 italic leading-relaxed",children:['"',T.flavorText,'"']})})]})]})},T.id)})}),!m&&t.jsx("div",{className:"text-center",children:t.jsx("p",{className:"text-[10px] text-gray-400 animate-pulse leading-tight",children:" "})})]}),t.jsx("div",{className:"flex-shrink-0 p-3 border-t border-gray-700 bg-gray-800/50",children:t.jsx("button",{onClick:M,disabled:!m,className:`w-full px-4 py-2 rounded-lg text-sm font-bold transition-all ${m?"bg-gradient-to-r from-yellow-600 via-orange-600 to-red-600 hover:from-yellow-500 hover:via-orange-500 hover:to-red-500 text-white shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:m?` ${m.name}`:""})})]})]}),document.body)},y4=({show:s,onComplete:o,onSkip:d,onOpenWiki:c})=>{const[m,b]=L.useState(0),[g,v]=L.useState(!1);if(!s)return null;const x=Vx,y=x[m],w=m===0,k=m===x.length-1,M=()=>{k?(v(!0),setTimeout(()=>{o()},300)):b(D=>D+1)},z=()=>{w||b(D=>D-1)},C=()=>{v(!0),setTimeout(()=>{d()},300)},T=g?"animate-sheet-out":"animate-sheet-in";return Qn.createPortal(t.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end justify-center lg:items-center",children:[t.jsx("div",{className:"absolute inset-0 bg-black/90 animate-fade-in"}),t.jsxs("div",{className:`relative w-full max-w-3xl bg-gray-900/95 backdrop-blur border-t-2 lg:border-2 border-blue-500/50 rounded-t-2xl lg:rounded-2xl shadow-2xl flex flex-col max-h-[92vh] ${T} lg:animate-slide-up font-sans`,children:[t.jsx("div",{className:"h-1.5 bg-gray-800 rounded-t-2xl lg:rounded-t-xl overflow-hidden flex-shrink-0",children:t.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${(m+1)/x.length*100}%`}})}),t.jsx("div",{className:"flex-shrink-0 p-3 border-b border-gray-700",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center flex-shrink-0",children:t.jsx(j,{name:y.icon,size:24,className:y.iconColor})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h2",{className:"text-base font-bold text-white leading-tight font-decorative",children:y.title}),t.jsxs("p",{className:"text-[10px] text-gray-400 leading-tight font-sans",children:[" ",m+1," / ",x.length]})]}),t.jsx("button",{onClick:C,className:"px-2 py-1 text-[14px] text-gray-400 hover:text-white hover:bg-gray-800 rounded transition-colors flex-shrink-0 font-sans",children:""})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto p-3 font-sans",children:t.jsx(v4,{step:y,onOpenWiki:c,isLastStep:k})}),t.jsxs("div",{className:"flex-shrink-0 p-3 border-t border-gray-700 flex items-center justify-between gap-2 font-sans",children:[t.jsxs("button",{onClick:z,disabled:w,className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-semibold transition-colors font-sans ${w?"text-gray-600 cursor-not-allowed":"text-white bg-gray-700 hover:bg-gray-600"}`,children:[t.jsx(j,{name:"ChevronLeft",size:14}),t.jsx("span",{className:"hidden sm:inline",children:""})]}),t.jsx("div",{className:"flex gap-1.5",children:x.map((D,E)=>t.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-colors ${E===m?"bg-blue-500":"bg-gray-700"}`},E))}),t.jsx("button",{onClick:M,className:"flex items-center gap-1 px-4 py-1.5 rounded-lg text-xs font-semibold bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white transition-all shadow-lg font-sans",children:k?t.jsxs(t.Fragment,{children:[t.jsx(j,{name:"Play",size:14}),""]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"hidden sm:inline",children:""}),t.jsx(j,{name:"ChevronRight",size:14})]})})]})]})]}),document.body)},b4={info:{container:"bg-blue-900/30 border-blue-500/30",text:"text-blue-200"},success:{container:"bg-emerald-900/30 border-emerald-500/30",text:"text-emerald-200"},warning:{container:"bg-amber-900/30 border-amber-500/30",text:"text-amber-200"},tip:{container:"bg-purple-900/30 border-purple-500/30",text:"text-purple-200"}},v4=({step:s,onOpenWiki:o,isLastStep:d})=>s?t.jsxs("div",{className:"space-y-2",children:[s.lead&&t.jsx("p",{className:"text-sm text-white font-semibold font-decorative leading-tight",children:s.lead}),s.paragraphs?.map((c,m)=>t.jsx("p",{className:"text-[12px] text-gray-300 leading-relaxed",children:c},m)),s.cards?.length>0&&t.jsx("div",{className:"space-y-1.5",children:s.cards.map((c,m)=>t.jsxs("div",{className:"bg-gray-700/50 p-2 rounded-lg border border-gray-600",children:[t.jsxs("p",{className:"text-[14px] font-decorative text-white font-semibold mb-1 flex items-center gap-1.5 leading-tight",children:[c.icon&&t.jsx(j,{name:c.icon,size:14,className:c.iconColor||"text-white"}),c.title]}),t.jsx("p",{className:"text-[12px] text-gray-300 leading-relaxed",children:c.text})]},`${c.title}-${m}`))}),s.callouts?.length>0&&t.jsx("div",{className:"space-y-1.5",children:s.callouts.map((c,m)=>{const b=b4[c.tone]||{container:"bg-gray-800/40 border-gray-700",text:"text-gray-200"};return t.jsxs("div",{className:`p-2 rounded-lg border ${b.container} ${b.text}`,children:[t.jsxs("p",{className:"text-[14px] font-decorative font-semibold flex items-center gap-1.5 text-white leading-tight",children:[c.icon&&t.jsx(j,{name:c.icon,size:14,className:"text-current"}),c.title]}),t.jsx("p",{className:"text-[12px] mt-1 leading-relaxed",children:c.text})]},`${c.title}-${m}`)})}),s.wikiPrompt&&t.jsxs("div",{className:"bg-indigo-900/30 border border-indigo-500/40 p-2 rounded-lg space-y-2",children:[t.jsxs("p",{className:"text-indigo-200 flex items-center gap-1.5 text-[10px] leading-tight",children:[t.jsx(j,{name:"BookOpen",size:14,className:"text-indigo-300"}),s.wikiPrompt.text]}),typeof o=="function"&&t.jsxs("button",{type:"button",onClick:o,className:"px-3 py-1.5 rounded-lg bg-indigo-600/30 border border-indigo-500/50 text-[10px] font-semibold text-indigo-100 hover:bg-indigo-600/50 transition-colors flex items-center gap-1.5",children:[t.jsx(j,{name:"Book",size:14}),s.wikiPrompt.buttonLabel||""]})]}),s.footerNote&&t.jsx("p",{className:"text-center text-sm text-yellow-300 font-bold mt-3 leading-tight",children:s.footerNote}),d&&!s.footerNote&&t.jsx("p",{className:"text-center text-sm text-yellow-300 font-bold mt-3 leading-tight",children:""})]}):null,j4=[{id:"mech_quickstart",name:"",icon:"Zap",summary:"",content:[{type:"h4",text:" "},{type:"p",text:""},{type:"h4",text:" "},{type:"list",items:["","","","","",""]},{type:"h4",text:" "},{type:"p",text:"10"},{type:"list",items:["1. ","2. ","3. ",'4. """"',"5. 50020"]},{type:"p",text:"10-30"},{type:"list",items:["1. ","2. ","3. ",'4. ""',"5. "]},{type:"h4",text:" "},{type:"list",items:["1x/2x/5x","","","","",""]}]},{id:"mech_economy",name:"",icon:"Coins",summary:"",content:[{type:"h4",text:"1. "},{type:"p",text:""},{type:"list",items:[" (Supply) + "," (Demand) +  + "," > ",""]},{type:"h4",text:"2. "},{type:"p",text:"-"},{type:"list",items:[" (Head Tax)"," (Resource Tax)"," (Business Tax)"," ()"]},{type:"h4",text:"2.1 "},{type:"p",text:""},{type:"list",items:["",'"    "',"","","",""]},{type:"h4",text:"2.2 "},{type:"list",items:["","","","",""]},{type:"h4",text:"3. "},{type:"p",text:'""'},{type:"list",items:["","",""]},{type:"h4",text:"4. "},{type:"p",text:""},{type:"list",items:["3","320%","",""]}]},{id:"mech_price_calculation",name:"",icon:"TrendingUp",summary:"",content:[{type:"h4",text:" "},{type:"p",text:""},{type:"h4",text:" "},{type:"p",text:""},{type:"list",items:[" = ( + ) / "," = (  )"," = (  )"," = max(  0.8,   1.05)"," marketConfig.wage "]},{type:"p",text:"210=2020=20/20=1.0"},{type:"h4",text:" "},{type:"p",text:""},{type:"list",items:[" = ( + ) / "," =   virtualDemandPerPop","pressure = tanh(ln()  0.9)  supplyDemandWeight"," = 1 + pressure  (3.5 - 1)"," = 1 + pressure  (1 - 0.7)"]},{type:"p",text:"supplyDemandWeight  marketConfig "},{type:"list",items:["0.6","1.5","1.0"]},{type:"p",text:"=2.0pressure0.552.375"},{type:"h4",text:" "},{type:"p",text:""},{type:"list",items:[" =  / "," =   inventoryTargetDays"," = max(0.3, 1 + (1 - )  inventoryPriceImpact)",""]},{type:"p",text:"inventoryTargetDays  inventoryPriceImpact "},{type:"list",items:["300.15","100.4","200.25"]},{type:"p",text:"1002000.5=1+(1-0.5)0.25=1.125"},{type:"h4",text:" "},{type:"list",items:[" =     ","max(,   0.6)","max(, PRICE_FLOOR)"," =  + ( - )  0.1",""]},{type:"h4",text:" "},{type:"p",text:" marketConfig "},{type:"list",items:["price.livingCostWeight","price.taxCostWeight","wage.livingCostWeight","wage.taxCostWeight"]},{type:"p",text:""},{type:"list",items:["price: {livingCostWeight: 0.15, taxCostWeight: 0.2}","wage: {livingCostWeight: 0.08, taxCostWeight: 0.05}",""]},{type:"p",text:""},{type:"list",items:["price: {livingCostWeight: 0.3, taxCostWeight: 0.4}","wage: {livingCostWeight: 0.15, taxCostWeight: 0.15}",""]},{type:"h4",text:" "},{type:"list",items:["1.  marketConfig ","2.  wage ","3.  supplyDemandWeight ","4.  inventoryPriceImpact ","5.  =     ","6. 60%","7. 10%"]},{type:"h4",text:" "},{type:"list",items:[" +  = "," +  = ","","",""]},{type:"h4",text:" "},{type:"list",items:["","","","",""]}]},{id:"mech_strata",name:"",icon:"Users",summary:"",content:[{type:"h4",text:"1. "},{type:"p",text:""},{type:"list",items:[" <  (MaxPop)"," >   1.5",""," (0)"]},{type:"h4",text:"2.  () "},{type:"p",text:'""'},{type:"list",items:["",'""+',"",""]},{type:"h4",text:"3. "},{type:"p",text:"Buff/Debuff"},{type:"list",items:["","","",""]},{type:"h4",text:"4. "},{type:"p",text:""},{type:"list",items:["","",""]}]},{id:"mech_military",name:"",icon:"Swords",summary:"",content:[{type:"h4",text:"1. "},{type:"p",text:""},{type:"list",items:["/   (+60%~100% ) - ","  / (+50%~90% ) - ","   (+40%~70% ) - ","  / (+40%~80% ) - "," "]},{type:"h4",text:"2. "},{type:"p",text:" = (+)      "},{type:"p",text:"Buff"},{type:"h4",text:"3. "},{type:"p",text:" > 2:1"},{type:"h4",text:"4. "},{type:"list",items:["30%","","",""]},{type:"h4",text:"5. "},{type:"list",items:["","+","","",""]}]},{id:"mech_tech",name:"",icon:"Cpu",summary:"",content:[{type:"h4",text:"1. "},{type:"p",text:""},{type:"list",items:["","","",""]},{type:"h4",text:"2. "},{type:"p",text:""},{type:"list",items:["+15%+10%","+20%+15%+10%","+25%+20%+15%","+30%+25%+20%","+35%+30%+25%","+40%+35%+30%","+50%+40%+35%"]},{type:"h4",text:"3. "},{type:"p",text:""},{type:"list",items:["","","",""]},{type:"h4",text:"4. "},{type:"list",items:["","","",""]}]},{id:"mech_diplomacy",name:"",icon:"Globe",summary:"",content:[{type:"h4",text:"1. "},{type:"p",text:""},{type:"list",items:["-100 +100","","",""]},{type:"h4",text:"2. "},{type:"list",items:["","","","",""]},{type:"h4",text:"3. "},{type:"list",items:["","",""]},{type:"h4",text:"4. "},{type:"list",items:["","","","",""]},{type:"h4",text:"5. "},{type:"p",text:""},{type:"list",items:["","","","",""]}]},{id:"mech_decrees",name:"",icon:"Gavel",summary:"",content:[{type:"h4",text:"1. "},{type:"p",text:""},{type:"list",items:["","","",""]},{type:"h4",text:"2. "},{type:"list",items:["",""]},{type:"h4",text:"3. "},{type:"p",text:""},{type:"list",items:["+30%-20","+25%-10%","+50%-20%","+30%",""]},{type:"h4",text:"4. "},{type:"p",text:""},{type:"list",items:["","","","",""]},{type:"h4",text:"5. "},{type:"list",items:["","","","",""]}]},{id:"mech_buildings",name:"",icon:"Home",summary:"",content:[{type:"h4",text:"1. "},{type:"list",items:["","","",""]},{type:"h4",text:"2. "},{type:"list",items:["","","",""]},{type:"h4",text:"3. "},{type:"p",text:""},{type:"list",items:["","","","",""]},{type:"h4",text:"4. "},{type:"list",items:["","","","",""]},{type:"h4",text:"5. "},{type:"list",items:["","","",""]}]},{id:"mech_festivals",name:"",icon:"PartyPopper",summary:"",content:[{type:"h4",text:"1. "},{type:"list",items:["","",""]},{type:"h4",text:"2. "},{type:"p",text:"3"},{type:"list",items:["1+50%","+10%",""]},{type:"h4",text:"3. "},{type:"p",text:""},{type:"list",items:["","","",""]},{type:"h4",text:"4. "},{type:"list",items:["","//","","","+10%"]},{type:"h4",text:"5. "},{type:"list",items:["+30%1","20%1","+40%1","+12%","+15%"]}]},{id:"mech_advanced",name:"",icon:"Trophy",summary:"",content:[{type:"h4",text:"1. "},{type:"list",items:["","","","",""]},{type:"h4",text:"2. "},{type:"list",items:["","","","++",""]},{type:"h4",text:"3. "},{type:"list",items:["","","","",""]},{type:"h4",text:"4. "},{type:"list",items:["","","","",""]},{type:"h4",text:"5. "},{type:"p",text:""},{type:"list",items:["","","","",""]},{type:"h4",text:"6. "},{type:"list",items:["","","",""]}]}],kc=[{id:"mechanics",label:"",icon:"BookOpen"},{id:"economy",label:"",icon:"Users"},{id:"buildings",label:"",icon:"Home"},{id:"military",label:"",icon:"Shield"},{id:"technologies",label:"",icon:"Cpu"},{id:"decrees",label:"",icon:"Gavel"},{id:"resources",label:"",icon:"Package"}],N4={gather:"",industry:"",civic:"",military:""},w4={infantry:"",archer:"",cavalry:"",siege:"",support:""},_4=(yo||[]).reduce((s,o)=>(s[o.id]=o.name,s),{}),M4=Object.entries(Fe||{}).reduce((s,[o,d])=>(s[o]=d?.name||o,s),{}),ph=s=>_4[s]||s,mh=s=>M4[s]||s,If=k4();function k4(){return{mechanics:j4.map(s=>({id:s.id,name:s.name,summary:s.summary,icon:s.icon,iconColor:"text-blue-300",type:"mechanics",data:s.content})),economy:Object.entries(Fe||{}).map(([s,o])=>({id:s,name:o?.name||s,summary:o?.desc,icon:o?.icon||"Users",iconColor:"text-amber-200",type:"economy",data:o})),buildings:(Tn||[]).map(s=>({id:s.id,name:s.name,summary:s.desc,icon:s.visual?.icon||"Home",iconColor:s.visual?.text||"text-slate-200",type:"building",data:s})),military:Object.values(Sn||{}).map(s=>({id:s.id,name:s.name,summary:s.desc,icon:s.icon||"Swords",iconColor:"text-red-200",type:"military",data:s})),technologies:(yo||[]).map(s=>({id:s.id,name:s.name,summary:s.desc,icon:"Cpu",iconColor:"text-purple-200",type:"technology",data:s})),decrees:(Ec||[]).map(s=>({id:s.id,name:s.name,summary:s.desc,icon:"Gavel",iconColor:"text-amber-200",type:"decree",data:s})),resources:Object.entries(Oe||{}).map(([s,o])=>({id:s,name:o?.name||s,summary:o?.tags?.map(d=>d==="raw_material"?"":d==="manufactured"?"":d==="luxury"?"":d==="essential"?"":d==="special"?"":d==="virtual"?"":d==="currency"?"":d==="industrial"?"":d).join("  "),icon:o?.icon||"Package",iconColor:o?.color||"text-slate-200",type:"resource",data:{...o,id:s}}))}}const Zn=s=>typeof s!="number"?s:Math.abs(s)>=100?s.toFixed(0):Math.abs(s-Math.round(s))<.001?Math.round(s).toString():s.toFixed(2),pl=s=>s==null||Number.isNaN(s)?void 0:Qa[s]?.name||` ${s+1} `,fh=s=>Oe?.[s]||{name:s},Pc=(s,o="")=>s?Array.isArray(s)?s:typeof s=="string"?[s]:typeof s=="number"?[`${o}${o?": ":""}${Zn(s)}`]:typeof s=="object"?Object.entries(s).flatMap(([d,c])=>{let m=d;d==="production"?m="":d==="taxIncome"?m="":d==="stability"?m="":d==="scienceBonus"?m="":d==="cultureBonus"?m="":d==="industry"?m="":d==="gather"?m="":d==="maxPop"&&(m="");const b=o?`${o}  ${m}`:m;return typeof c=="object"&&!Array.isArray(c)?Pc(c,b):Array.isArray(c)?c.map(g=>`${b}: ${g}`):[`${b}: ${Zn(c)}`]}):[]:[],Tr=(s,o)=>{if(!o||typeof o!="object")return null;const d=Object.entries(o);return d.length?t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-sm text-gray-400",children:s}),t.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(([c,m])=>{const b=fh(c);return t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gray-800/70 text-gray-200 text-xs border border-gray-700",children:[b.icon&&t.jsx(j,{name:b.icon,size:14,className:b.color||"text-gray-200"}),t.jsx("span",{children:b.name||c}),m!==void 0&&t.jsx("span",{className:"font-mono text-[11px]",children:Zn(m)})]},`${s}-${c}`)})})]}):null},C4=s=>{if(!s||typeof s!="object")return null;const o=Object.entries(s);return o.length?t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-sm text-gray-400",children:""}),t.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(([d,c])=>{const m=Fe?.[d];return t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gray-800/70 text-gray-200 text-xs border border-gray-700",children:[m?.icon&&t.jsx(j,{name:m.icon,size:14,className:"text-slate-200"}),t.jsx("span",{children:m?.name||d}),t.jsxs("span",{className:"font-mono text-[11px]",children:["x",Zn(c)]})]},`job-${d}`)})})]}):null},go=(s,o)=>!o||!o.length?null:t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-sm text-gray-400",children:s}),t.jsx("ul",{className:"list-disc list-inside text-gray-200 text-sm space-y-1",children:o.map((d,c)=>t.jsx("li",{children:d},`${s}-${c}`))})]}),vo=({rows:s})=>!s||!s.length?null:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(o=>t.jsxs("div",{className:"bg-gray-800/60 rounded-lg p-3 border border-gray-700",children:[t.jsx("p",{className:"text-xs text-gray-400",children:o.label}),t.jsx("p",{className:"text-sm text-white font-semibold mt-1",children:o.value})]},o.label))}),E4=({buffs:s})=>{if(!s)return null;const o=Object.entries(s);return o.length?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:o.map(([d,c])=>{const{desc:m,...b}=c||{};return t.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded-lg p-3",children:[t.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400",children:d==="satisfied"?"":""}),t.jsx("p",{className:"text-sm text-gray-200 mt-1 font-semibold",children:m}),go("",Pc(b))]},d)})}):null},T4=({tags:s})=>!s||!s.length?null:t.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(o=>t.jsx("span",{className:"px-2 py-0.5 text-[11px] uppercase tracking-wide bg-gray-800/70 border border-gray-700 rounded-full text-gray-300",children:o},o))}),S4=({show:s,onClose:o})=>{const[d,c]=L.useState(kc[0].id),[m,b]=L.useState(""),[g,v]=L.useState(null),[x,y]=L.useState(!0);L.useEffect(()=>{s&&v(T=>T||(If[d]?.[0]?.id??null))},[s,d]);const w=L.useMemo(()=>If[d]||[],[d]),k=m.trim().toLowerCase(),M=L.useMemo(()=>k?w.filter(T=>`${T.name} ${T.summary||""}`.toLowerCase().includes(k)):w,[w,k]);L.useEffect(()=>{if(!M.length){v(null);return}M.some(T=>T.id===g)||v(M[0].id)},[M,g]);const z=M.find(T=>T.id===g)||w.find(T=>T.id===g)||M[0],C=T=>{v(T),y(!1)};return s?t.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-0 sm:p-4",children:t.jsxs("div",{className:"bg-gray-900/95 backdrop-blur-lg sm:rounded-2xl border-t sm:border border-indigo-500/40 shadow-2xl w-full max-w-6xl h-full sm:h-[90vh] flex flex-col overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-6 py-2 sm:py-4 border-b border-gray-800 bg-gray-900",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] sm:text-xs uppercase tracking-widest text-indigo-400 mb-0.5 sm:mb-1",children:"CIVILIZATION KNOWLEDGE BASE"}),t.jsxs("h2",{className:"text-base font-decorative sm:text-2xl font-bold text-white flex items-center gap-1 sm:gap-2",children:[t.jsx(j,{name:"BookOpen",size:18,className:"text-indigo-300 sm:w-6 sm:h-6"}),""]})]}),t.jsx("button",{onClick:o,className:"p-1.5 sm:p-2 rounded-lg border border-gray-700 text-gray-300 hover:text-white hover:border-gray-500 transition-colors","aria-label":"",children:t.jsx(j,{name:"X",size:18,className:"sm:w-5 sm:h-5"})})]}),t.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[t.jsxs("aside",{className:`${x?"flex":"hidden"} lg:flex w-full lg:w-72 border-r border-gray-800 bg-gray-900/60 flex-col overflow-y-auto absolute lg:relative inset-0 lg:inset-auto z-10`,children:[t.jsx("div",{className:"grid grid-cols-2 gap-1 sm:gap-2 p-2 sm:p-4",children:kc.map(T=>{const D=T.id===d;return t.jsxs("button",{type:"button",onClick:()=>c(T.id),className:`flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border text-[10px] sm:text-xs font-medium transition-colors ${D?"border-indigo-400 bg-indigo-900/40 text-indigo-100":"border-gray-700 text-gray-400 hover:text-gray-100 hover:border-gray-500"}`,children:[t.jsx(j,{name:T.icon,size:12,className:"sm:w-3.5 sm:h-3.5"}),t.jsx("span",{className:"truncate",children:T.label})]},T.id)})}),t.jsx("div",{className:"px-2 sm:px-4 pb-2",children:t.jsxs("div",{className:"relative",children:[t.jsx(j,{name:"Search",size:12,className:"text-gray-500 absolute left-2 sm:left-3 top-1/2 -translate-y-1/2 sm:w-3.5 sm:h-3.5"}),t.jsx("input",{type:"text",value:m,onChange:T=>b(T.target.value),placeholder:`${kc.find(T=>T.id===d)?.label}...`,className:"w-full bg-gray-800/70 border border-gray-700 rounded-lg pl-7 sm:pl-9 pr-2 sm:pr-3 py-1.5 sm:py-2 text-[11px] sm:text-xs text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto px-2 sm:px-3 pb-4 space-y-0.5 sm:space-y-1",children:M.length===0?t.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 px-2 py-3 sm:py-4 text-center border border-dashed border-gray-800 rounded-lg",children:""}):M.map(T=>{const D=T.id===g;return t.jsxs("button",{type:"button",onClick:()=>C(T.id),className:`w-full text-left px-2 sm:px-3 py-1.5 sm:py-2.5 rounded-lg sm:rounded-xl border transition-all ${D?"bg-indigo-900/30 border-indigo-500/40 shadow-sm":"bg-transparent border-transparent hover:bg-gray-800/50 hover:border-gray-700"}`,children:[t.jsxs("p",{className:`text-xs sm:text-sm font-semibold flex items-center gap-1 sm:gap-2 ${D?"text-indigo-200":"text-gray-300"}`,children:[t.jsx(j,{name:T.icon||"Bookmark",size:12,className:`${D?"text-indigo-300":T.iconColor} sm:w-3.5 sm:h-3.5`}),t.jsx("span",{className:"truncate",children:T.name})]}),T.summary&&t.jsx("p",{className:"text-[10px] sm:text-[11px] text-gray-500 mt-0.5 truncate ml-4 sm:ml-6",children:T.summary})]},T.id)})})]}),t.jsx("section",{className:`${x?"hidden":"flex"} lg:flex flex-1 flex-col bg-gray-900/30 overflow-hidden`,children:z?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-3 sm:p-6 border-b border-gray-800 bg-gray-800/20",children:[t.jsxs("button",{onClick:()=>y(!0),className:"lg:hidden mb-2 flex items-center gap-1 text-indigo-300 hover:text-white text-xs font-semibold bg-indigo-900/30 hover:bg-indigo-900/60 border border-indigo-500/40 rounded-full px-3 py-1 transition-all",children:[t.jsx(j,{name:"ChevronLeft",size:14}),t.jsx("span",{children:""})]}),t.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[t.jsx("div",{className:"p-2 sm:p-3 rounded-lg sm:rounded-2xl bg-gray-800 shadow-lg border border-gray-700",children:t.jsx(j,{name:z.icon||"Book",size:20,className:`${z.iconColor} sm:w-8 sm:h-8`})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-[10px] sm:text-xs uppercase tracking-widest text-indigo-400 mb-0.5 sm:mb-1",children:kc.find(T=>T.id===d)?.label}),t.jsx("h3",{className:"text-lg sm:text-3xl font-bold text-white truncate font-decorative",children:z.name}),z.summary&&t.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-0.5 sm:mt-1 line-clamp-2",children:z.summary})]})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-8 space-y-4 sm:space-y-8",children:A4(z)})]}):t.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500 opacity-50 p-4",children:[t.jsx(j,{name:"BookOpen",size:48,className:"mb-3 sm:w-16 sm:h-16 sm:mb-4"}),t.jsx("p",{className:"text-xs sm:text-base text-center",children:""})]})})]})]})}):null},A4=s=>{const{data:o,type:d}=s;if(!o)return t.jsx("p",{className:"text-gray-400",children:""});switch(d){case"mechanics":return D4(o);case"economy":return P4(o);case"building":return R4(o);case"military":return z4(o);case"technology":return $4(o);case"decree":return O4(o);case"resource":return B4(o);default:return t.jsx("div",{className:"space-y-4",children:t.jsx("p",{className:"text-gray-300",children:s.summary||""})})}},D4=s=>Array.isArray(s)?t.jsx("div",{className:"space-y-3 sm:space-y-6 max-w-3xl",children:s.map((o,d)=>o.type==="h4"?t.jsx("h4",{className:"text-sm sm:text-lg font-bold text-indigo-300 mt-3 sm:mt-6 mb-1 sm:mb-2 pb-1 sm:pb-2 border-b border-gray-700 font-decorative",children:o.text},d):o.type==="p"?t.jsx("p",{className:"text-gray-300 leading-5 sm:leading-7 text-xs sm:text-sm",children:o.text},d):o.type==="list"?t.jsx("ul",{className:"list-disc list-inside space-y-1 sm:space-y-2 bg-gray-800/40 p-2 sm:p-4 rounded-lg border border-gray-700/50",children:o.items.map((c,m)=>t.jsx("li",{className:"text-gray-300 text-xs sm:text-sm leading-tight sm:leading-normal",children:c},m))},d):null)}):null,P4=s=>{const o=[s.weight!==void 0&&{label:"",value:Zn(s.weight)},s.tax!==void 0&&{label:" ()",value:Zn(s.tax)},s.headTaxBase!==void 0&&{label:"",value:`${Zn(s.headTaxBase)} /`},s.wealthWeight!==void 0&&{label:"",value:Zn(s.wealthWeight)},s.influenceBase!==void 0&&{label:"",value:Zn(s.influenceBase)},s.startingWealth!==void 0&&{label:"",value:`${Zn(s.startingWealth)} `},s.defaultResource&&{label:"",value:fh(s.defaultResource).name}].filter(Boolean);return t.jsxs("div",{className:"space-y-3 sm:space-y-6",children:[t.jsx("div",{className:"bg-gray-800/40 p-2 sm:p-4 rounded-lg sm:rounded-xl border border-gray-700/50",children:t.jsx("p",{className:"text-gray-300 leading-relaxed text-xs sm:text-sm",children:s.desc})}),t.jsx(vo,{rows:o}),Tr("",s.needs),t.jsx(E4,{buffs:s.buffs})]})},R4=s=>{const o=[s.cat&&{label:"",value:N4[s.cat]||s.cat},s.owner&&{label:"",value:mh(s.owner)},(s.epoch!==void 0||s.unlockEpoch!==void 0)&&{label:"",value:pl(s.epoch??s.unlockEpoch)},s.requiresTech&&{label:"",value:ph(s.requiresTech)}].filter(Boolean);return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gray-800/40 p-4 rounded-xl border border-gray-700/50",children:t.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:s.desc})}),t.jsx(vo,{rows:o}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Tr("",s.baseCost),Tr("",s.output),Tr("",s.input),C4(s.jobs)]})]})},z4=s=>{const o=[s.category&&{label:"",value:w4[s.category]||s.category},s.epoch!==void 0&&{label:"",value:pl(s.epoch)},s.populationCost!==void 0&&{label:"",value:Zn(s.populationCost)},s.trainingTime!==void 0&&{label:" ()",value:Zn(s.trainingTime)},s.attack!==void 0&&{label:"",value:Zn(s.attack)},s.defense!==void 0&&{label:"",value:Zn(s.defense)},s.range!==void 0&&{label:"",value:Zn(s.range)}].filter(Boolean);return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gray-800/40 p-4 rounded-xl border border-gray-700/50",children:t.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:s.desc})}),t.jsx(vo,{rows:o}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Tr("",s.recruitCost),Tr("",s.maintenanceCost)]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[go("",s.abilities),go("",Pc(s.counters).map(d=>d.replace("infantry","").replace("cavalry","").replace("archer","").replace("siege","")))]})]})},$4=s=>{const o=[s.epoch!==void 0&&{label:"",value:pl(s.epoch)}].filter(Boolean);return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gray-800/40 p-4 rounded-xl border border-gray-700/50",children:t.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:s.desc})}),t.jsx(vo,{rows:o}),Tr("",s.cost),go("",Pc(s.effects))]})},O4=s=>{const o=[s.category&&{label:"",value:s.category==="economy"?"":s.category==="military"?"":s.category==="culture"?"":""},s.unlockEpoch!==void 0&&{label:"",value:pl(s.unlockEpoch)}].filter(Boolean);return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gray-800/40 p-4 rounded-xl border border-gray-700/50",children:t.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:s.desc})}),t.jsx(vo,{rows:o}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsx("div",{className:"p-4 bg-green-900/20 border border-green-800/30 rounded-lg",children:go("",s.effects)}),t.jsx("div",{className:"p-4 bg-red-900/20 border border-red-800/30 rounded-lg",children:go("",s.drawbacks)})]})]})},B4=s=>{const o=[s.basePrice!==void 0&&{label:"",value:`${Zn(s.basePrice)} `},s.type&&{label:"",value:s.type==="currency"?"":s.type==="virtual"?"":""},s.unlockEpoch!==void 0&&{label:"",value:pl(s.unlockEpoch)},s.unlockTech&&{label:"",value:ph(s.unlockTech)},s.defaultOwner&&{label:"",value:mh(s.defaultOwner)}].filter(Boolean);return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gray-800/40 p-4 rounded-xl border border-gray-700/50",children:t.jsx("p",{className:"text-gray-300 leading-relaxed text-sm",children:s.desc||""})}),t.jsx(vo,{rows:o}),t.jsx(T4,{tags:s.tags})]})},L4=({unit:s,resources:o,market:d,militaryWageRatio:c=1,army:m={},onRecruit:b,onDisband:g,onClose:v})=>{if(!s)return t.jsxs("div",{className:"text-center text-gray-400 py-8",children:[t.jsx(j,{name:"AlertCircle",size:32,className:"mx-auto mb-2"}),t.jsx("p",{children:""})]});const x=Ws(s.recruitCost,d),y=s.maintenanceCost?.silver||0,w=y*c,k=Object.entries(s.recruitCost).every(([D,E])=>(o[D]||0)>=E)&&(o.silver||0)>=x,M=m[s.id]||0,z=M>0,C=Ci[s.category]||{},T=Qa[s.epoch]||{};return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-700",children:[t.jsx("div",{className:"w-12 h-12 icon-metal-container icon-metal-container-lg rounded-lg flex items-center justify-center flex-shrink-0",children:t.jsx(j,{name:s.icon||"Swords",size:24,className:`${C.color||"text-red-400"} icon-metal-red`})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h2",{className:"text-lg font-bold text-white leading-tight font-decorative",children:s.name}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 leading-tight",children:[t.jsx("span",{className:C.color,children:C.name||s.type}),t.jsx("span",{children:""}),t.jsx("span",{children:T.name||` ${s.epoch}`})]})]})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-1.5",children:[t.jsxs("div",{className:"bg-gray-700/50 rounded p-1.5 border border-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[t.jsx(j,{name:"Sword",size:12,className:"text-red-400"}),t.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""})]}),t.jsx("div",{className:"text-sm font-bold text-white font-mono leading-none",children:s.attack})]}),t.jsxs("div",{className:"bg-gray-700/50 rounded p-1.5 border border-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[t.jsx(j,{name:"Shield",size:12,className:"text-blue-400"}),t.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""})]}),t.jsx("div",{className:"text-sm font-bold text-white font-mono leading-none",children:s.defense})]}),t.jsxs("div",{className:"bg-gray-700/50 rounded p-1.5 border border-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[t.jsx(j,{name:"Target",size:12,className:"text-green-400"}),t.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""})]}),t.jsx("div",{className:"text-sm font-bold text-green-300 font-mono leading-none",children:s.range||1})]}),t.jsxs("div",{className:"bg-gray-700/50 rounded p-1.5 border border-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[t.jsx(j,{name:"Clock",size:12,className:"text-purple-400"}),t.jsx("span",{className:"text-[9px] text-gray-400 leading-none",children:""})]}),t.jsxs("div",{className:"text-sm font-bold text-purple-300 font-mono leading-none",children:[s.trainingTime,""]})]})]}),t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[t.jsx(j,{name:"Swords",size:12,className:"text-yellow-400"}),""]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{className:"bg-gray-800/40 rounded px-2 py-1.5",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[t.jsx(j,{name:"ChevronUp",size:12,className:"text-green-400"}),t.jsx("span",{className:"text-[9px] text-gray-400",children:""})]}),t.jsx("div",{className:"text-xs",children:s.counters&&Object.keys(s.counters).length>0?Object.entries(s.counters).map(([D,E])=>{const S=Ci[D];return t.jsxs("span",{className:`${S?.color||"text-white"} mr-2`,children:[S?.name||D," (+",Math.round((E-1)*100),"%)"]},D)}):t.jsx("span",{className:"text-gray-500",children:""})})]}),t.jsxs("div",{className:"bg-gray-800/40 rounded px-2 py-1.5",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[t.jsx(j,{name:"ChevronDown",size:12,className:"text-red-400"}),t.jsx("span",{className:"text-[9px] text-gray-400",children:""})]}),t.jsx("div",{className:"text-xs",children:s.weakAgainst&&s.weakAgainst.length>0?s.weakAgainst.map(D=>{const E=Ci[D];return t.jsx("span",{className:`${E?.color||"text-white"} mr-2`,children:E?.name||D},D)}):t.jsx("span",{className:"text-gray-500",children:""})})]})]})]}),s.abilities&&s.abilities.length>0&&t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[t.jsx(j,{name:"Star",size:12,className:"text-amber-400"}),""]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:s.abilities.map((D,E)=>t.jsx("span",{className:"bg-amber-500/20 text-amber-300 text-[10px] px-2 py-0.5 rounded-full border border-amber-500/30",children:D},E))})]}),t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[t.jsx(j,{name:"Package",size:12,className:"text-amber-400"}),""]}),t.jsxs("div",{className:"space-y-1",children:[Object.entries(s.recruitCost).map(([D,E])=>{const S=Oe[D],q=(o[D]||0)>=E;return t.jsx("div",{className:"bg-gray-800/40 rounded px-2 py-1",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(j,{name:S?.icon||"Box",size:14,className:S?.color||"text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-300",children:S?.name||D})]}),t.jsxs("span",{className:`text-xs font-bold font-mono ${q?"text-green-400":"text-red-400"}`,children:[E," (",(o[D]||0).toFixed(1),")"]})]})},D)}),t.jsx("div",{className:"bg-gray-800/40 rounded px-2 py-1 border-t border-gray-700 mt-1",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(j,{name:"Coins",size:14,className:"text-yellow-400"}),t.jsx("span",{className:"text-xs text-gray-300",children:""})]}),t.jsx("span",{className:`text-xs font-bold font-mono ${(o.silver||0)>=x?"text-green-400":"text-red-400"}`,children:Ei(x)})]})})]})]}),t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1",children:[t.jsx(j,{name:"TrendingDown",size:12,className:"text-red-400"}),""]}),t.jsxs("div",{className:"bg-gray-800/40 rounded px-2 py-1.5",children:[t.jsx("div",{className:"space-y-1 mb-2",children:Object.entries(s.maintenanceCost||{}).map(([D,E])=>{const S=Oe[D];return!S||E<=0?null:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[9px] text-gray-400",children:S.name}),t.jsxs("span",{className:"text-xs font-bold text-white font-mono",children:["-",E.toFixed(2),"/"]})]},D)})}),t.jsxs("div",{className:"flex items-center justify-between mb-1 pt-1 border-t border-gray-700",children:[t.jsx("span",{className:"text-[9px] text-gray-400",children:""}),t.jsxs("span",{className:"text-xs font-bold text-white font-mono",children:[y.toFixed(2)," "]})]}),t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:"text-[9px] text-gray-400",children:""}),t.jsxs("span",{className:"text-xs font-bold text-white font-mono",children:["",c.toFixed(2)]})]}),t.jsxs("div",{className:"flex items-center justify-between pt-1 border-t border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(j,{name:"Coins",size:12,className:"text-yellow-400"}),t.jsx("span",{className:"text-xs text-gray-300",children:""})]}),t.jsxs("span",{className:"text-sm font-bold text-yellow-300 font-mono",children:[w.toFixed(2)," /"]})]})]})]}),s.desc&&t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1 flex items-center gap-1",children:[t.jsx(j,{name:"Info",size:12,className:"text-blue-400"}),""]}),t.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:s.desc})]}),t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(j,{name:"Users",size:14,className:"text-blue-400"}),t.jsx("span",{className:"text-xs text-gray-300",children:""})]}),t.jsxs("span",{className:"text-sm font-bold text-white font-mono",children:[M," "]})]}),s.populationCost&&s.populationCost>1&&t.jsxs("div",{className:"flex items-center justify-between mt-1 pt-1 border-t border-gray-700",children:[t.jsx("span",{className:"text-[9px] text-gray-400",children:""}),t.jsxs("span",{className:"text-xs text-white font-mono",children:[s.populationCost," /"]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[t.jsxs("button",{onClick:()=>{b&&(b(s.id),v())},disabled:!k||!b,className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-bold text-sm transition-all ${k&&b?"bg-green-600 hover:bg-green-500 text-white shadow-lg hover:shadow-xl active:scale-95":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[t.jsx(j,{name:"Plus",size:18}),t.jsx("span",{children:""})]}),t.jsxs("button",{onClick:()=>{g&&(g(s.id),v())},disabled:!z||!g,className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-bold text-sm transition-all ${z&&g?"bg-red-600 hover:bg-red-500 text-white shadow-lg hover:shadow-xl active:scale-95":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[t.jsx(j,{name:"Minus",size:18}),t.jsx("span",{children:""})]})]})]})},U4=Tn.reduce((s,o)=>{if(!o.requiresTech)return s;const d=o.requiresTech;return s[d]||(s[d]=[]),s[d].push(o.name||o.id),s},{}),W4=({tech:s,status:o,resources:d,market:c,onResearch:m,onClose:b})=>{if(!s)return t.jsxs("div",{className:"text-center text-gray-400 py-8",children:[t.jsx(j,{name:"AlertCircle",size:32,className:"mx-auto mb-2"}),t.jsx("p",{children:""})]});const g=Ws(s.cost,c),v=o==="unlocked",x=U4[s.id]||[],y=!v&&Object.entries(s.cost).every(([w,k])=>(d[w]||0)>=k)&&(d.silver||0)>=g;return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-700",children:[t.jsx("div",{className:"w-12 h-12 icon-metal-container icon-metal-container-lg rounded-lg flex items-center justify-center flex-shrink-0",children:v?t.jsx(j,{name:"Check",size:24,className:"text-green-400 icon-metal-green"}):t.jsx(j,{name:"Lightbulb",size:24,className:"text-blue-400 icon-metal-blue"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("h2",{className:"text-lg font-bold text-white leading-tight flex items-center gap-2 font-decorative",children:[s.name,v&&t.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-600 text-white rounded",children:""})]}),t.jsx("p",{className:"text-xs text-gray-400 leading-tight truncate",children:s.desc})]})]}),s.effect&&t.jsxs("div",{className:"bg-blue-900/30 rounded p-2 border border-blue-500/30",children:[t.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1 font-decorative",children:[t.jsx(j,{name:"Sparkles",size:12,className:"text-blue-400"}),""]}),t.jsx("p",{className:"text-xs text-blue-300 leading-relaxed",children:s.effect})]}),x.length>0&&t.jsxs("div",{className:"bg-amber-900/30 rounded p-2 border border-amber-500/30",children:[t.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1 font-decorative",children:[t.jsx(j,{name:"Building",size:12,className:"text-amber-400"}),""]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:x.map((w,k)=>t.jsx("span",{className:"text-xs px-2 py-0.5 bg-amber-900/40 border border-amber-600/40 rounded text-amber-300",children:w},k))})]}),!v&&t.jsxs("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:[t.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1 font-decorative",children:[t.jsx(j,{name:"Package",size:12,className:"text-purple-400"}),""]}),t.jsxs("div",{className:"space-y-1",children:[Object.entries(s.cost).map(([w,k])=>{const M=Oe[w],z=(d[w]||0)>=k;return t.jsx("div",{className:"bg-gray-800/40 rounded px-2 py-1",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(j,{name:M?.icon||"Box",size:14,className:M?.color||"text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-300",children:M?.name||w})]}),t.jsxs("span",{className:`text-xs font-bold font-mono ${z?"text-green-400":"text-red-400"}`,children:[Math.round(k)," (",Math.round(d[w]||0),")"]})]})},w)}),t.jsx("div",{className:"bg-gray-800/40 rounded px-2 py-1 border-t border-gray-700 mt-1",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(j,{name:"Coins",size:14,className:"text-yellow-400"}),t.jsx("span",{className:"text-xs text-gray-300",children:""})]}),t.jsx("span",{className:`text-xs font-bold font-mono ${(d.silver||0)>=g?"text-green-400":"text-red-400"}`,children:Ei(g)})]})})]})]}),v&&t.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded p-3 text-center",children:[t.jsx(j,{name:"CheckCircle",size:32,className:"text-green-400 mx-auto mb-2"}),t.jsx("p",{className:"text-sm font-bold text-green-300",children:""}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:""})]}),!v&&t.jsx("div",{className:"pt-2",children:t.jsxs("button",{onClick:()=>{m&&(m(s.id),b())},disabled:!y||!m,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-bold text-sm transition-all ${y&&m?"bg-blue-600 hover:bg-blue-500 text-white shadow-lg hover:shadow-xl active:scale-95":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[t.jsx(j,{name:"Lightbulb",size:18}),t.jsx("span",{children:""})]})})]})},Rd=s=>{const o=Math.round(s*100);return o>0?`+${o}%`:`${o}%`},Yf=s=>Oe[s]?.name||s,H4=s=>Fe[s]?.name||s,q4=s=>[/\s*[+-]?\d+%/,/\s*[+-]?\d+%/,/\s*[+-]?\d+%/].some(d=>d.test(s)),Xf=s=>!s||!Array.isArray(s)?[]:s.filter(o=>!q4(o)),V4=({decree:s,onToggle:o,onClose:d})=>{if(!s)return t.jsxs("div",{className:"text-center text-gray-400 py-8",children:[t.jsx(j,{name:"AlertCircle",size:32,className:"mx-auto mb-2"}),t.jsx("p",{children:""})]});const c=s.active,m=s.modifiers&&(s.modifiers.resourceDemandMod||s.modifiers.stratumDemandMod||s.modifiers.resourceSupplyMod),b=m?Xf(s.effects):s.effects,g=m?Xf(s.drawbacks):s.drawbacks;return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-700",children:[t.jsx("div",{className:"w-12 h-12 icon-metal-container icon-metal-container-lg rounded-lg flex items-center justify-center flex-shrink-0",children:c?t.jsx(j,{name:"Check",size:24,className:"text-green-400 icon-metal-green"}):t.jsx(j,{name:"FileText",size:24,className:"text-purple-400 icon-metal-purple"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("h2",{className:"text-lg font-bold text-white leading-tight flex items-center gap-2 font-decorative",children:[s.name,c&&t.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-600 text-white rounded",children:""})]}),t.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:s.desc})]})]}),t.jsx("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs text-gray-400",children:""}),t.jsxs("span",{className:"text-xs font-bold text-white",children:[s.category==="economy"&&"",s.category==="military"&&"",s.category==="culture"&&"",s.category==="social"&&""]})]})}),b&&b.length>0&&t.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded p-2",children:[t.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1 font-decorative",children:[t.jsx(j,{name:"TrendingUp",size:12,className:"text-green-400"}),""]}),t.jsx("div",{className:"space-y-1",children:b.map((v,x)=>t.jsxs("div",{className:"flex items-start gap-1.5 bg-green-900/20 rounded px-2 py-1",children:[t.jsx(j,{name:"Plus",size:14,className:"text-green-400 flex-shrink-0 mt-0.5"}),t.jsx("span",{className:"text-xs text-green-300 leading-relaxed",children:v})]},x))})]}),g&&g.length>0&&t.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded p-2",children:[t.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1 font-decorative",children:[t.jsx(j,{name:"TrendingDown",size:12,className:"text-red-400"}),""]}),t.jsx("div",{className:"space-y-1",children:g.map((v,x)=>t.jsxs("div",{className:"flex items-start gap-1.5 bg-red-900/20 rounded px-2 py-1",children:[t.jsx(j,{name:"Minus",size:14,className:"text-red-400 flex-shrink-0 mt-0.5"}),t.jsx("span",{className:"text-xs text-red-300 leading-relaxed",children:v})]},x))})]}),s.unlockEpoch!==void 0&&s.unlockEpoch>0&&t.jsx("div",{className:"bg-gray-700/50 rounded p-2 border border-gray-600",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs text-gray-400",children:""}),t.jsxs("span",{className:"text-xs font-bold text-purple-300",children:[" ",s.unlockEpoch+1]})]})}),s.modifiers&&(s.modifiers.resourceDemandMod||s.modifiers.stratumDemandMod||s.modifiers.resourceSupplyMod)&&t.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded p-2",children:[t.jsxs("h3",{className:"text-[10px] font-bold text-white mb-1.5 flex items-center gap-1 font-decorative",children:[t.jsx(j,{name:"BarChart3",size:12,className:"text-blue-400"}),""]}),t.jsxs("div",{className:"space-y-2",children:[s.modifiers.resourceDemandMod&&Object.keys(s.modifiers.resourceDemandMod).length>0&&t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"text-[10px] text-gray-400",children:""}),t.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(s.modifiers.resourceDemandMod).map(([v,x])=>t.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${x>0?"bg-orange-900/30 text-orange-300":"bg-cyan-900/30 text-cyan-300"}`,children:[Yf(v)," ",Rd(x)]},v))})]}),s.modifiers.resourceSupplyMod&&Object.keys(s.modifiers.resourceSupplyMod).length>0&&t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"text-[10px] text-gray-400",children:""}),t.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(s.modifiers.resourceSupplyMod).map(([v,x])=>t.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${x>0?"bg-green-900/30 text-green-300":"bg-red-900/30 text-red-300"}`,children:[Yf(v)," ",Rd(x)]},v))})]}),s.modifiers.stratumDemandMod&&Object.keys(s.modifiers.stratumDemandMod).length>0&&t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"text-[10px] text-gray-400",children:""}),t.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(s.modifiers.stratumDemandMod).map(([v,x])=>t.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${x>0?"bg-purple-900/30 text-purple-300":"bg-teal-900/30 text-teal-300"}`,children:[H4(v)," ",Rd(x)]},v))})]})]})]}),t.jsxs("div",{className:`rounded p-3 border ${c?"bg-green-900/20 border-green-500/30":"bg-gray-700/50 border-gray-600"}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(j,{name:c?"CheckCircle":"Circle",size:20,className:c?"text-green-400":"text-gray-400"}),t.jsx("span",{className:`text-sm font-bold ${c?"text-green-300":"text-gray-300"}`,children:c?"":""})]}),t.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:c?"":'""'}),"      "]}),t.jsx("div",{className:"pt-2",children:t.jsxs("button",{onClick:()=>{o&&(o(s.id),d())},disabled:!o,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-bold text-sm transition-all ${o?c?"bg-red-600 hover:bg-red-500 text-white shadow-lg hover:shadow-xl active:scale-95":"bg-green-600 hover:bg-green-500 text-white shadow-lg hover:shadow-xl active:scale-95":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[t.jsx(j,{name:c?"XCircle":"CheckCircle",size:18}),t.jsx("span",{children:c?"":""})]})})]})},G4=({event:s,onSelectOption:o,onClose:d,nations:c=[]})=>{if(!s)return null;const m=c.filter(E=>E.visible!==!1),b=s._resolvedRandomNation,g=E=>{if(!m.length&&E!=="all")return null;switch(E){case"random":return b?`${b.name}`:"";case"all":return null;case"hostile":{const S=m.filter(q=>(q.relation||50)<30);return S.length===0?"":`${S.map(q=>q.name).join("")}`}case"friendly":{const S=m.filter(q=>(q.relation||50)>=60);return S.length===0?"":`${S.map(q=>q.name).join("")}`}case"strongest":return m.length===0?null:`${m.reduce((q,W)=>(q.wealth||0)>(W.wealth||0)?q:W).name}`;case"weakest":return m.length===0?null:`${m.reduce((q,W)=>(q.wealth||0)<(W.wealth||0)?q:W).name}`;default:{const S=m.find(q=>q.id===E);return S?`${S.name}`:null}}},v=E=>!["random","all","hostile","friendly","strongest","weakest"].includes(E),x=E=>Oe&&Oe[E]?.name||E,y=E=>Fe&&Fe[E]?.name||E,w=E=>{const S=Math.round(E*100);return`${S>0?"+":""}${S}%`},k={random:"",all:"",hostile:"",friendly:"",strongest:"",weakest:""},M={relation:{icon:"Globe2",labelSuffix:"",positiveClass:"bg-sky-900/50 text-sky-300 border border-sky-500/40",negativeClass:"bg-rose-900/50 text-rose-300 border border-rose-500/40",formatter:E=>`${E>0?"+":""}${E}`},aggression:{icon:"Flame",labelSuffix:"",positiveClass:"bg-red-900/50 text-red-300 border border-red-500/40",negativeClass:"bg-green-900/50 text-green-300 border border-green-500/40",formatter:E=>w(E)},wealth:{icon:"Coins",labelSuffix:"",positiveClass:"bg-amber-900/50 text-amber-200 border border-amber-500/40",negativeClass:"bg-slate-900/50 text-slate-200 border border-slate-500/40",formatter:E=>`${E>0?"+":""}${E}`},volatility:{icon:"Activity",labelSuffix:"",positiveClass:"bg-orange-900/50 text-orange-300 border border-orange-500/40",negativeClass:"bg-cyan-900/50 text-cyan-300 border border-cyan-500/40",formatter:E=>w(E)}},z=(E,S=[])=>{if(v(E)){const G=m.find(P=>P.id===E);return G?G.name:E}const q=k[E]||"",W=g(E);let be=q;if(W&&(be=`${q}${W}`),E==="all"&&S.length>0){const G=S.map(P=>k[P]||P).join("");be+=`${G}`}return be},C=(E,S,q)=>{if(!E)return null;const W=M[S];if(!W)return null;const be=Array.isArray(E.exclude)?E.exclude:[],G=Object.entries(E).filter(([P])=>P!=="exclude"&&!P.startsWith("_"));return G.length?G.map(([P,pe],Pe)=>{const ne=typeof pe=="number"&&!isNaN(pe)?pe:0,ae=z(P,be),je=ne>0?W.positiveClass:W.negativeClass;return t.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-md ${je} font-sans`,children:[t.jsx(j,{name:W.icon,size:10}),t.jsx("span",{className:"font-medium",children:`${ae}${W.labelSuffix||""}`}),t.jsx("span",{className:"font-mono font-bold",children:W.formatter(ne)})]},`${q}-${S}-${P}-${Pe}`)}):null},T=(E,S,q)=>{if(!E)return null;const W=S==="war",be=W?"bg-red-900/50 text-red-200 border border-red-500/40":"bg-emerald-900/50 text-emerald-200 border border-emerald-500/40",G=W?"Swords":"HandHeart",P=W?"":"",pe=z(E);return t.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-md ${be} font-sans`,children:[t.jsx(j,{name:G,size:10}),t.jsx("span",{className:"font-medium",children:pe}),t.jsx("span",{className:"font-mono font-bold",children:P})]},`${q}-${S}`)},D=E=>{o(s.id,E),d()};return t.jsxs("div",{className:"space-y-3 font-sans",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:`flex-shrink-0 w-14 h-14 rounded-xl flex items-center justify-center shadow-lg border ${s.isDiplomaticEvent?"bg-gradient-to-br from-blue-600/80 to-purple-700/80 border-blue-400/30":"bg-gradient-to-br from-ancient-gold/60 to-ancient-bronze/60 border-ancient-gold/40"}`,children:t.jsx(j,{name:s.icon,size:28,className:"text-white drop-shadow-lg"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h2",{className:"text-lg font-bold text-ancient leading-tight font-decorative",children:s.name}),t.jsx("div",{className:"flex items-center gap-2 mt-1",children:s.isDiplomaticEvent&&t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-[10px] font-semibold bg-blue-600/20 text-blue-300 rounded border border-blue-500/30 font-sans",children:[t.jsx(j,{name:"Globe",size:10}),""]})})]})]}),t.jsx("div",{className:"glass-ancient rounded-xl p-3 border border-ancient-gold/20 font-sans",children:t.jsx("p",{className:"text-sm text-ancient-parchment leading-relaxed font-sans",children:s.description})}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("h3",{className:"text-xs font-bold text-ancient-stone uppercase tracking-wider flex items-center gap-1.5",children:[t.jsx(j,{name:"Target",size:12,className:"text-ancient-gold "}),""]}),s.options.map(E=>t.jsx("button",{onClick:()=>D(E),className:"w-full text-left glass-ancient hover:bg-ancient-gold/10 rounded-xl p-3 border border-ancient-gold/20 hover:border-ancient-gold/40 transition-all group hover:shadow-glow-gold font-sans",children:t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"text-sm font-bold text-ancient-parchment group-hover:text-ancient transition-colors leading-tight font-sans",children:E.text}),E.description&&t.jsx("p",{className:"text-[11px] text-ancient-stone mt-1 leading-snug font-sans",children:E.description}),t.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[E.effects.resources&&Object.entries(E.effects.resources).map(([S,q])=>t.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-md ${q>0?"bg-green-900/50 text-green-300 border border-green-500/40":"bg-red-900/50 text-red-300 border border-red-500/40"} font-sans`,children:[t.jsx(j,{name:Oe[S]?.icon||"Package",size:10}),t.jsx("span",{className:"font-medium",children:x(S)}),t.jsxs("span",{className:"font-mono font-bold",children:[q>0?"+":"",q]})]},S)),E.effects.resourcePercent&&Object.entries(E.effects.resourcePercent).map(([S,q])=>t.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-md ${q>0?"bg-green-900/50 text-green-300 border border-green-500/40":"bg-red-900/50 text-red-300 border border-red-500/40"} font-sans`,children:[t.jsx(j,{name:Oe[S]?.icon||"Package",size:10}),t.jsx("span",{className:"font-medium",children:x(S)}),t.jsx("span",{className:"font-mono font-bold",children:w(q)})]},`pct-${S}`)),E.effects.population&&t.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-md ${E.effects.population>0?"bg-green-900/50 text-green-300 border border-green-500/40":"bg-red-900/50 text-red-300 border border-red-500/40"} font-sans`,children:[t.jsx(j,{name:"Users",size:10}),t.jsx("span",{className:"font-medium",children:""}),t.jsxs("span",{className:"font-mono font-bold",children:[E.effects.population>0?"+":"",E.effects.population]})]}),E.effects.populationPercent&&t.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-md ${E.effects.populationPercent>0?"bg-green-900/50 text-green-300 border border-green-500/40":"bg-red-900/50 text-red-300 border border-red-500/40"} font-sans`,children:[t.jsx(j,{name:"Users",size:10}),t.jsx("span",{className:"font-medium",children:""}),t.jsx("span",{className:"font-mono font-bold",children:w(E.effects.populationPercent)})]}),E.effects.stability&&t.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-md ${E.effects.stability>0?"bg-green-900/50 text-green-300 border border-green-500/40":"bg-red-900/50 text-red-300 border border-red-500/40"} font-sans`,children:[t.jsx(j,{name:"TrendingUp",size:10}),t.jsx("span",{className:"font-medium",children:""}),t.jsxs("span",{className:"font-mono font-bold",children:[E.effects.stability>0?"+":"",E.effects.stability]})]}),E.effects.approval&&Object.entries(E.effects.approval).map(([S,q])=>t.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-md ${q>0?"bg-blue-900/50 text-blue-300 border border-blue-500/40":"bg-orange-900/50 text-orange-300 border border-orange-500/40"} font-sans`,children:[t.jsx(j,{name:Fe[S]?.icon||"User",size:10}),t.jsxs("span",{className:"font-medium",children:[y(S),""]}),t.jsxs("span",{className:"font-mono font-bold",children:[q>0?"+":"",q]})]},S)),E.effects.resourceDemandMod&&Object.entries(E.effects.resourceDemandMod).map(([S,q])=>t.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-md ${q>0?"bg-purple-900/50 text-purple-300 border border-purple-500/40":"bg-cyan-900/50 text-cyan-300 border border-cyan-500/40"} font-sans`,title:"",children:[t.jsx(j,{name:"TrendingUp",size:10}),t.jsxs("span",{className:"font-medium",children:[x(S),""]}),t.jsx("span",{className:"font-mono font-bold",children:w(q)}),t.jsx(j,{name:"Clock",size:8,className:"opacity-60"})]},`demand-${S}`)),E.effects.stratumDemandMod&&Object.entries(E.effects.stratumDemandMod).map(([S,q])=>t.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-md ${q>0?"bg-purple-900/50 text-purple-300 border border-purple-500/40":"bg-cyan-900/50 text-cyan-300 border border-cyan-500/40"} font-sans`,title:"",children:[t.jsx(j,{name:"ShoppingCart",size:10}),t.jsxs("span",{className:"font-medium",children:[y(S),""]}),t.jsx("span",{className:"font-mono font-bold",children:w(q)}),t.jsx(j,{name:"Clock",size:8,className:"opacity-60"})]},`stratumDemand-${S}`)),E.effects.buildingProductionMod&&Object.entries(E.effects.buildingProductionMod).map(([S,q])=>{const W=Tn.find(P=>P.id===S),be={gather:"",industry:"",civic:"",all:""},G=W?.name||be[S]||S;return t.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-md ${q>0?"bg-emerald-900/50 text-emerald-300 border border-emerald-500/40":"bg-rose-900/50 text-rose-300 border border-rose-500/40"} font-sans`,title:"",children:[t.jsx(j,{name:"Factory",size:10}),t.jsxs("span",{className:"font-medium",children:[G,""]}),t.jsx("span",{className:"font-mono font-bold",children:w(q)}),t.jsx(j,{name:"Clock",size:8,className:"opacity-60"})]},`production-${S}`)}),C(E.effects.nationRelation,"relation",`option-${E.id}`),C(E.effects.nationAggression,"aggression",`option-${E.id}`),C(E.effects.nationWealth,"wealth",`option-${E.id}`),C(E.effects.nationMarketVolatility,"volatility",`option-${E.id}`),T(E.effects.triggerWar,"war",`option-${E.id}`),T(E.effects.triggerPeace,"peace",`option-${E.id}`)]}),E.randomEffects&&E.randomEffects.length>0&&t.jsxs("div",{className:"mt-2 pt-2 border-t border-ancient-gold/10",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[t.jsx(j,{name:"Dices",size:10,className:"text-yellow-400"}),t.jsx("span",{className:"text-[10px] text-yellow-400 font-medium font-sans",children:""})]}),E.randomEffects.map((S,q)=>t.jsxs("div",{className:"mb-1.5 last:mb-0",children:[t.jsxs("span",{className:"text-[9px] text-yellow-300/70 font-medium font-sans",children:[Math.round(S.chance*100),"% "]}),t.jsxs("div",{className:"flex flex-wrap gap-1 mt-0.5",children:[S.effects.resources&&Object.entries(S.effects.resources).map(([W,be])=>t.jsxs("span",{className:`inline-flex items-center gap-1 text-[9px] px-1.5 py-0.5 rounded ${be>0?"bg-green-900/30 text-green-400 border border-green-500/30":"bg-red-900/30 text-red-400 border border-red-500/30"} font-sans`,children:[t.jsx(j,{name:Oe[W]?.icon||"Package",size:9}),t.jsx("span",{children:x(W)}),t.jsxs("span",{className:"font-mono font-bold",children:[be>0?"+":"",be]})]},`rand-res-${q}-${W}`)),S.effects.resourcePercent&&Object.entries(S.effects.resourcePercent).map(([W,be])=>t.jsxs("span",{className:`inline-flex items-center gap-1 text-[9px] px-1.5 py-0.5 rounded ${be>0?"bg-green-900/30 text-green-400 border border-green-500/30":"bg-red-900/30 text-red-400 border border-red-500/30"} font-sans`,children:[t.jsx(j,{name:Oe[W]?.icon||"Package",size:9}),t.jsx("span",{children:x(W)}),t.jsx("span",{className:"font-mono font-bold",children:w(be)})]},`rand-res-pct-${q}-${W}`)),S.effects.population&&t.jsxs("span",{className:`inline-flex items-center gap-1 text-[9px] px-1.5 py-0.5 rounded ${S.effects.population>0?"bg-green-900/30 text-green-400 border border-green-500/30":"bg-red-900/30 text-red-400 border border-red-500/30"} font-sans`,children:[t.jsx(j,{name:"Users",size:9}),t.jsx("span",{children:""}),t.jsxs("span",{className:"font-mono font-bold",children:[S.effects.population>0?"+":"",S.effects.population]})]}),S.effects.populationPercent&&t.jsxs("span",{className:`inline-flex items-center gap-1 text-[9px] px-1.5 py-0.5 rounded ${S.effects.populationPercent>0?"bg-green-900/30 text-green-400 border border-green-500/30":"bg-red-900/30 text-red-400 border border-red-500/30"} font-sans`,children:[t.jsx(j,{name:"Users",size:9}),t.jsx("span",{children:""}),t.jsx("span",{className:"font-mono font-bold",children:w(S.effects.populationPercent)})]}),S.effects.stability&&t.jsxs("span",{className:`inline-flex items-center gap-1 text-[9px] px-1.5 py-0.5 rounded ${S.effects.stability>0?"bg-green-900/30 text-green-400 border border-green-500/30":"bg-red-900/30 text-red-400 border border-red-500/30"} font-sans`,children:[t.jsx(j,{name:"TrendingUp",size:9}),t.jsx("span",{children:""}),t.jsxs("span",{className:"font-mono font-bold",children:[S.effects.stability>0?"+":"",S.effects.stability]})]}),S.effects.approval&&Object.entries(S.effects.approval).map(([W,be])=>t.jsxs("span",{className:`inline-flex items-center gap-1 text-[9px] px-1.5 py-0.5 rounded ${be>0?"bg-blue-900/30 text-blue-400 border border-blue-500/30":"bg-orange-900/30 text-orange-400 border border-orange-500/30"} font-sans`,children:[t.jsx(j,{name:Fe[W]?.icon||"User",size:9}),t.jsx("span",{children:y(W)}),t.jsxs("span",{className:"font-mono font-bold",children:[be>0?"+":"",be]})]},`rand-app-${q}-${W}`)),C(S.effects.nationRelation,"relation",`random-${E.id}-${q}`),C(S.effects.nationAggression,"aggression",`random-${E.id}-${q}`),C(S.effects.nationWealth,"wealth",`random-${E.id}-${q}`),C(S.effects.nationMarketVolatility,"volatility",`random-${E.id}-${q}`),T(S.effects.triggerWar,"war",`random-${E.id}-${q}`),T(S.effects.triggerPeace,"peace",`random-${E.id}-${q}`)]})]},q))]})]}),t.jsx(j,{name:"ChevronRight",size:16,className:"text-ancient-stone group-hover:text-ancient-gold transition-colors flex-shrink-0 mt-0.5"})]})},E.id))]}),t.jsx("div",{className:"glass-ancient rounded-xl p-2.5 border border-blue-500/20 font-sans",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(j,{name:"Info",size:14,className:"text-blue-400 flex-shrink-0 mt-0.5"}),t.jsx("p",{className:"text-blue-300 text-[11px] leading-snug font-sans",children:""})]})})]})};function F4(){const s=x1();return s?t.jsx(I4,{gameState:s}):(console.error("gameState is null or undefined"),t.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold mb-4",children:""}),t.jsx("p",{children:""})]})}))}function I4({gameState:s}){ng(s.epoch);const o=we=>{s?.setLogs&&s.setLogs(Ze=>[we,...Ze].slice(0,8))},d=we=>{if(!we)return"";const Ze=(xt,jt)=>{const le=jt>0?"+":"";return["production","industry","cultureBonus","scienceBonus","taxIncome","militaryBonus","stability"].includes(xt)?`${le}${(jt*100).toFixed(0)}%`:`${le}${jt}`};return Object.entries(we).map(([xt,jt])=>{switch(xt){case"categories":return Object.entries(jt).map(([Ie,K])=>`${Tn.find(ze=>ze.category===Ie)?.categoryName||Ie} ${Ze(xt,K)}`).join("");case"maxPop":return` ${Ze(xt,jt)}`;default:return`${{production:"",industry:"",cultureBonus:"",scienceBonus:"",taxIncome:"",militaryBonus:"",stability:""}[xt]||xt} ${Ze(xt,jt)}`}}).join("")},c=eg(s,o);K1(s,o,c);const{playSound:m,SOUND_TYPES:b}=Vd(),[g,v]=L.useState(!1),x=L.useRef(null),[y,w]=L.useState(!1),[k,M]=L.useState(null);L.useEffect(()=>{const we=s.daysElapsed||0;if(x.current==null){x.current=we;return}if(s.isPaused||s.currentEvent)return;we-x.current>=30&&(x.current=we,Math.random()<.1&&c.triggerRandomEvent())},[s.daysElapsed,s.isPaused,s.currentEvent,c]);const[z,C]=L.useState(!1),[T,D]=L.useState(!1),[E,S]=L.useState(!1),[q,W]=L.useState({type:null,data:null}),be=we=>{if(!we)return;const Ze={...we,activatedAt:s.daysElapsed||0};s.setActiveFestivalEffects(jt=>[...jt,Ze]),s.setFestivalModal(null),s.setIsPaused(s.pausedBeforeEvent);const pt=we.type==="permanent"?"":"",xt=d(we.effects);o(` ${we.name}(${pt})${xt}`)},G=(we,Ze)=>{const pt=Ze||{},le=((s.currentEvent&&s.currentEvent.id===we?s.currentEvent:null)||Wd.find(K=>K.id===we))?.name,Ie=pt.text;if(c.handleEventOption(we,Ze),m(b.CLICK),s.setIsPaused(s.pausedBeforeEvent),le){const K=Ie?`${Ie}`:"";o(` ${le}${K}`)}else Ie&&o(` ${Ie}`)},P=()=>{s.setShowTutorial(!1),localStorage.setItem("tutorial_completed","true"),o(" ")},pe=()=>{s.setShowTutorial(!1),localStorage.setItem("tutorial_completed","true"),o(" ")},Pe=()=>{s.setShowTutorial(!0),o(" ")},ne=we=>{s.setClicks(Ze=>[...Ze,{id:Date.now(),x:we.clientX,y:we.clientY,text:"+1",color:"text-white"}]),s.setResources(Ze=>({...Ze,silver:(Ze.silver||0)+1}))},ae=we=>{const Ze=Tn.find(pt=>pt.id===we);Ze&&W({type:"building",data:Ze})},se=()=>W({type:null,data:null}),je=we=>{W({type:"stratum",data:we})},de=we=>{W({type:"unit",data:we})},I=(we,Ze)=>{W({type:"tech",data:{tech:we,status:Ze}})},_=we=>{W({type:"decree",data:we})},B=()=>{const we=s.army||{},Ze=Object.values(we).reduce((xt,jt)=>xt+(jt||0),0);let pt=0;return Object.entries(s.buildings||{}).forEach(([xt,jt])=>{if(!jt)return;const le=Tn.find(Ie=>Ie.id===xt);le?.output?.militaryCapacity&&(pt+=le.output.militaryCapacity*jt)}),pt<=0?Ze>0?.5:0:Math.min(1,Ze/pt)},re=we=>Math.max(0,Math.min(100,we??0)),F=(we,Ze)=>{console.log("[STRATEGIC ACTION] Executing:",we,"on",Ze);const pt=bo[we];if(!pt){o(` ${we}`);return}const xt=Fe[Ze]?.name||Ze,jt=`${we}_${Ze}`,le={resources:s.resources,organizationStates:s.rebellionStates,popStructure:s.popStructure,actionCooldowns:s.actionCooldowns||{},actionUsage:s.actionUsage||{},population:s.population||0,militaryPower:B(),classApproval:s.classApproval||{},classInfluence:s.classInfluence||{}},Ie=Pj(we,Ze,le);if(!Ie.success){o(`${xt}: ${Ie.message}`);return}Ie.effects.resourceCost&&s.setResources(ze=>{const $e={...ze};return Ie.effects.resourceCost.silver&&($e.silver=Math.max(0,($e.silver||0)-Ie.effects.resourceCost.silver)),Ie.effects.resourceCost.culture&&($e.culture=Math.max(0,($e.culture||0)-Ie.effects.resourceCost.culture)),$e}),pt.cooldown>0&&s.setActionCooldowns(ze=>({...ze||{},[jt]:pt.cooldown})),s.setActionUsage(ze=>({...ze||{},[jt]:(ze&&ze[jt]||0)+1})),(Ie.effects.organizationChanges&&Object.keys(Ie.effects.organizationChanges).length>0||Ie.effects.resistanceChange)&&s.setRebellionStates(ze=>{const $e={...ze};if(Ie.effects.organizationChanges&&Object.entries(Ie.effects.organizationChanges).forEach(([yt,_t])=>{const It=$e[yt]||{},oa=re((It.organization||0)+_t),za=ar(oa);$e[yt]={...It,organization:oa,stage:za,phase:xo(za)}}),Ie.effects.resistanceChange){const yt=Ze,_t=$e[yt]||{},It=_t.resistance||0;$e[yt]={..._t,resistance:Math.min(100,It+Ie.effects.resistanceChange)}}return $e}),Array.isArray(Ie.effects.specialEffects)&&Ie.effects.specialEffects.forEach(ze=>{if(ze){if(ze.type==="organizationPause"&&ze.stratum&&ze.duration)s.setRebellionStates($e=>({...$e,[ze.stratum]:{...$e?.[ze.stratum]||{},organizationPaused:Math.max(ze.duration,$e?.[ze.stratum]?.organizationPaused||0)}}));else if(ze.type==="promiseTask"&&ze.stratum){const $e=Fe[ze.stratum]?.name||ze.stratum,yt={nations:s.nations,taxPolicies:s.taxPolicies,market:s.market,classWealth:s.classWealth,classApproval:s.classApproval,needsReport:{},tradeRoutes:s.tradeRoutes,classIncome:s.classIncome||{},popStructure:s.popStructure},_t=F1({stratumKey:ze.stratum,stratumName:$e,currentDay:s.daysElapsed||0,failurePenalty:ze.failurePenalty||{organization:50},context:yt});if(_t){s.setPromiseTasks(oa=>[...oa||[],_t]);const It=_t.maintainDuration>0?`${_t.maintainDuration}`:"";o(` ${$e}${_t.description}${It}`)}}else if(ze.type==="divideEffect"&&ze.target&&ze.rival){const $e=Fe[ze.target]?.name||ze.target,yt=Fe[ze.rival]?.name||ze.rival;o(` ${$e}  ${yt} `)}}}),Ie.effects.approvalChanges&&Object.keys(Ie.effects.approvalChanges).length>0&&Object.entries(Ie.effects.approvalChanges).forEach(([ze,$e])=>{$e.value!==0&&s.setActiveEventEffects(yt=>({...yt,approval:{...yt.approval||{},[ze]:{value:(yt.approval?.[ze]?.value||0)+$e.value,duration:$e.duration||30,source:`:${pt.name}`}}}))}),Ie.effects.stabilityChange&&s.setStability(ze=>Math.max(0,Math.min(100,ze+Ie.effects.stabilityChange)));const K=[];Ie.effects.resourceCost?.silver&&K.push(`${Ie.effects.resourceCost.silver}`),Ie.effects.resourceCost?.culture&&K.push(`${Ie.effects.resourceCost.culture}`);const Be=K.length>0?` (${K.join("")})`:"";o(`${Ie.message}${Be}`)},me=B(),h=s.taxes||{total:0,breakdown:{headTax:0,industryTax:0,subsidy:0},efficiency:1},A=Hd(s.army||{}),Y=s.market?.prices?.food??(Oe.food?.basePrice||1),R=s.militaryWageRatio||1,Q=A*Y*R,ye=s.tradeStats||{tradeTax:0},Ne=ye.tradeTax||0,ke=h.total+Ne-Q,Je=Sc(s.daysElapsed||0),tt=s.hasAutoSave(),bt=()=>{s.saveGame()},ft=()=>{s.loadGame({source:"manual"})},vt=()=>{if(!s.hasAutoSave()){o(" ");return}s.loadGame({source:"auto"})};return t.jsxs("div",{className:"min-h-screen font-epic text-theme-text transition-all duration-1000 relative",children:[t.jsx(Od,{opacity:.03,className:"fixed inset-0 z-0 text-ancient-gold"}),s.clicks.map(we=>t.jsx(bj,{...we,onComplete:()=>s.setClicks(Ze=>Ze.filter(pt=>pt.id!==we.id))},we.id)),t.jsx("div",{className:"fixed top-0 left-0 right-0 z-50",children:t.jsx(_j,{gameState:s,taxes:h,netSilverPerDay:ke,tradeStats:ye,armyFoodNeed:A,onResourceDetailClick:we=>s.setResourceDetailView(we),onPopulationDetailClick:()=>s.setPopulationDetailView(!0),onStrataClick:()=>v(!0),onMarketClick:()=>w(!0),onEmpireSceneClick:()=>S(!0),gameControls:t.jsx(Df,{isPaused:s.isPaused,gameSpeed:s.gameSpeed,onPauseToggle:()=>s.setIsPaused(!s.isPaused),onSpeedChange:we=>s.setGameSpeed(we),onSave:bt,onLoadManual:ft,onLoadAuto:vt,onSettings:()=>C(!0),onReset:()=>s.resetGame(),onTutorial:Pe,onWiki:()=>D(!0),autoSaveAvailable:tt,onTriggerEvent:c.triggerRandomEvent})})}),t.jsx("div",{className:"lg:hidden fixed bottom-[68px] right-2 z-40",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:t.jsx("div",{className:"scale-[0.9] origin-bottom-right",children:t.jsx(Df,{isPaused:s.isPaused,gameSpeed:s.gameSpeed,onPauseToggle:()=>s.setIsPaused(!s.isPaused),onSpeedChange:we=>s.setGameSpeed(we),onSave:bt,onLoadManual:ft,onLoadAuto:vt,onSettings:()=>C(!0),onReset:()=>s.resetGame(),onTutorial:Pe,onWiki:()=>D(!0),menuDirection:"up",autoSaveAvailable:tt,onTriggerEvent:c.triggerRandomEvent})})}),t.jsx("div",{className:"h-14 sm:h-16 lg:h-20"}),t.jsx("main",{className:"max-w-[1920px] mx-auto px-2 sm:px-4 py-2 sm:py-4 pb-24 lg:pb-4","data-epoch":s.epoch,children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[2fr_8fr] lg:grid-cols-12 gap-3 sm:gap-4",children:[t.jsxs("aside",{className:"hidden md:block md:col-span-1 lg:col-span-2 space-y-4 order-2 md:order-1 lg:order-1",children:[t.jsx(wj,{variant:"ancient",className:"p-2 animate-fade-in-up",children:t.jsx(Pf,{resources:s.resources,rates:s.rates,market:s.market,epoch:s.epoch,onDetailClick:we=>s.setResourceDetailView(we)})}),t.jsx(zf,{popStructure:s.popStructure,classApproval:s.classApproval,classInfluence:s.classInfluence,stability:s.stability,population:s.population,activeBuffs:s.activeBuffs,activeDebuffs:s.activeDebuffs,classWealth:s.classWealth,classWealthDelta:s.classWealthDelta,classShortages:s.classShortages,classIncome:s.classIncome,classExpense:s.classExpense,classLivingStandard:s.classLivingStandard,rebellionStates:s.rebellionStates,dayScale:1,onDetailClick:je}),t.jsxs("button",{onClick:ne,className:"relative w-full py-3 btn-epic rounded-xl font-bold shadow-epic active:scale-95 transition-all flex items-center justify-center gap-2 overflow-hidden group",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-600/20 via-emerald-500/30 to-emerald-600/20 animate-shimmer"}),t.jsx(j,{name:"Pickaxe",size:16,className:"relative z-10"}),t.jsx("span",{className:"relative z-10",children:""})]})]}),t.jsx("section",{className:"md:col-span-1 lg:col-span-8 space-y-3 sm:space-y-4 order-1 md:order-2 lg:order-2",children:t.jsxs("div",{className:"relative glass-epic rounded-2xl border border-theme-border shadow-monument overflow-hidden min-h-[500px] animate-epic-entrance",children:[t.jsx(Od,{opacity:.02,className:"absolute inset-0 text-ancient-gold"}),t.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-ancient-gold/50 to-transparent"}),t.jsxs("div",{className:"hidden lg:flex border-b border-theme-border bg-gradient-to-r from-theme-surface/60 via-theme-surface-alt/40 to-theme-surface/60 overflow-x-auto relative",children:[t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-theme-accent/40 to-transparent"}),[{id:"build",label:"",icon:"Hammer"},{id:"military",label:"",icon:"Swords"},{id:"tech",label:"",icon:"Cpu"},{id:"politics",label:"",icon:"Gavel"},{id:"diplo",label:"",icon:"Globe"}].map(we=>t.jsxs("button",{onClick:()=>s.setActiveTab(we.id),className:`relative flex-1 min-w-[80px] py-2.5 flex items-center justify-center gap-2 text-sm font-bold transition-all group ${s.activeTab===we.id?"border-b-2 shadow-glow":"text-gray-400 hover:text-theme-accent"}`,style:s.activeTab===we.id?{color:"var(--theme-accent)",borderColor:"var(--theme-primary)"}:{},children:[s.activeTab===we.id&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-theme-primary/15 to-transparent"}),t.jsx(j,{name:we.icon,size:16,className:"relative z-10"}),t.jsx("span",{className:"relative z-10 tab-title-serif",children:we.label}),s.activeTab!==we.id&&t.jsx("div",{className:"absolute inset-0 bg-theme-primary/0 group-hover:bg-theme-primary/5 transition-colors"})]},we.id))]}),t.jsxs("div",{className:"p-3 sm:p-4 relative",children:[s.activeTab==="build"&&t.jsx(Yj,{buildings:s.buildings,resources:s.resources,epoch:s.epoch,techsUnlocked:s.techsUnlocked,popStructure:s.popStructure,jobFill:s.jobFill,onBuy:c.buyBuilding,onSell:c.sellBuilding,market:s.market,onShowDetails:ae}),s.activeTab==="military"&&t.jsx(Zj,{army:s.army,militaryQueue:s.militaryQueue,resources:s.resources,epoch:s.epoch,population:s.population,buildings:s.buildings,nations:s.nations,selectedTarget:s.selectedTarget,onRecruit:c.recruitUnit,onDisband:c.disbandUnit,onCancelTraining:c.cancelTraining,onSelectTarget:s.setSelectedTarget,onLaunchBattle:c.launchBattle,market:s.market,militaryWageRatio:s.militaryWageRatio,onUpdateWageRatio:s.setMilitaryWageRatio,techsUnlocked:s.techsUnlocked,onShowUnitDetails:de}),s.activeTab==="tech"&&t.jsx(e4,{techsUnlocked:s.techsUnlocked,epoch:s.epoch,resources:s.resources,population:s.population,onResearch:c.researchTech,onUpgradeEpoch:c.upgradeEpoch,canUpgradeEpoch:c.canUpgradeEpoch,market:s.market,onShowTechDetails:I}),s.activeTab==="politics"&&t.jsx(s4,{decrees:s.decrees,onToggle:c.toggleDecree,taxPolicies:s.taxPolicies,onUpdateTaxPolicies:s.setTaxPolicies,popStructure:s.popStructure,buildings:s.buildings,market:s.market,epoch:s.epoch,techsUnlocked:s.techsUnlocked,onShowDecreeDetails:_,jobFill:s.jobFill,jobsAvailable:s.jobsAvailable}),s.activeTab==="diplo"&&t.jsx(d4,{nations:s.nations,epoch:s.epoch,market:s.market,resources:s.resources,daysElapsed:s.daysElapsed,onDiplomaticAction:c.handleDiplomaticAction,tradeRoutes:s.tradeRoutes,onTradeRouteAction:c.handleTradeRouteAction,playerInstallmentPayment:s.playerInstallmentPayment,jobsAvailable:s.jobsAvailable,popStructure:s.popStructure})]})]})}),t.jsxs("aside",{className:"hidden lg:block lg:col-span-2 order-3 space-y-4",children:[t.jsx("div",{className:"bg-gray-900/60 backdrop-blur-md rounded-xl border border-white/10 shadow-glass overflow-hidden",children:t.jsx($f,{daysElapsed:s.daysElapsed,season:Je.season,population:s.population,stability:s.stability,wealth:s.resources.silver,epoch:s.epoch})}),t.jsx(qj,{logs:s.logs}),t.jsxs("details",{className:"glass-ancient rounded-xl border border-blue-500/20 shadow-md group",children:[t.jsxs("summary",{className:"px-3 py-2 cursor-pointer flex items-center justify-between text-xs font-bold text-blue-300 hover:text-blue-200 transition-colors",children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(j,{name:"Lightbulb",size:12}),""]}),t.jsx(j,{name:"ChevronDown",size:12,className:"transform group-open:rotate-180 transition-transform"})]}),t.jsxs("div",{className:"px-3 pb-3 text-[10px] text-gray-300 space-y-1.5",children:[t.jsxs("p",{children:[" ",t.jsx("span",{className:"text-white",children:""}),""]}),t.jsxs("p",{children:[" ",t.jsx("span",{className:"text-white",children:""}),""]}),t.jsxs("p",{children:[" ",t.jsx("span",{className:"text-white",children:""}),""]})]})]}),t.jsxs("details",{className:"glass-ancient rounded-xl border border-emerald-500/20 shadow-md group",children:[t.jsxs("summary",{className:"px-3 py-2 cursor-pointer flex items-center justify-between text-xs font-bold text-emerald-300 hover:text-emerald-200 transition-colors",children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(j,{name:"BookOpen",size:12}),""]}),t.jsx(j,{name:"ChevronDown",size:12,className:"transform group-open:rotate-180 transition-transform"})]}),t.jsxs("div",{className:"px-3 pb-3 text-[10px] text-gray-200 space-y-1.5",children:[t.jsxs("p",{children:[t.jsx("span",{className:"text-white font-semibold",children:"1."})," "]}),t.jsxs("p",{children:[t.jsx("span",{className:"text-white font-semibold",children:"2."})," "]}),t.jsxs("p",{children:[t.jsx("span",{className:"text-white font-semibold",children:"3."})," "]}),t.jsxs("p",{children:[t.jsx("span",{className:"text-white font-semibold",children:"4."})," "]})]})]})]})]})}),t.jsx(kj,{activeTab:s.activeTab,onTabChange:we=>s.setActiveTab(we),epoch:s.epoch}),t.jsx(ki,{isOpen:q.type==="building",onClose:se,title:q.data?.name||"",showHeader:!1,children:q.type==="building"&&t.jsx(Tj,{building:q.data,gameState:s,onBuy:c.buyBuilding,onSell:c.sellBuilding,taxPolicies:s.taxPolicies,onUpdateTaxPolicies:s.setTaxPolicies})}),t.jsx(ki,{isOpen:q.type==="stratum",onClose:se,title:"",showHeader:!0,children:q.type==="stratum"&&t.jsx(Hj,{stratumKey:q.data,popStructure:s.popStructure,population:s.population,classApproval:s.classApproval,classInfluence:s.classInfluence,classWealth:s.classWealth,classWealthDelta:s.classWealthDelta,classIncome:s.classIncome,classExpense:s.classExpense,classShortages:s.classShortages,classLivingStandard:s.classLivingStandard,rebellionStates:s.rebellionStates,actionCooldowns:s.actionCooldowns,actionUsage:s.actionUsage,activeBuffs:s.activeBuffs,activeDebuffs:s.activeDebuffs,dayScale:1,daysElapsed:s.daysElapsed||0,taxPolicies:s.taxPolicies,onUpdateTaxPolicies:s.setTaxPolicies,onStrategicAction:F,resources:s.resources,militaryPower:me,promiseTasks:s.promiseTasks,epoch:s.epoch,techsUnlocked:s.techsUnlocked,onClose:se})}),t.jsx(ki,{isOpen:q.type==="unit",onClose:se,title:"",showHeader:!0,children:q.type==="unit"&&t.jsx(L4,{unit:q.data,resources:s.resources,market:s.market,militaryWageRatio:s.militaryWageRatio,army:s.army,onRecruit:c.recruitUnit,onDisband:c.disbandUnit,onClose:se})}),t.jsx(ki,{isOpen:q.type==="tech",onClose:se,title:"",showHeader:!0,children:q.type==="tech"&&q.data&&t.jsx(W4,{tech:q.data.tech,status:q.data.status,resources:s.resources,market:s.market,onResearch:c.researchTech,onClose:se})}),t.jsx(ki,{isOpen:q.type==="decree",onClose:se,title:"",showHeader:!0,children:q.type==="decree"&&t.jsx(V4,{decree:q.data,onToggle:c.toggleDecree,onClose:se})}),t.jsx(ki,{isOpen:g,onClose:()=>v(!1),title:"",showHeader:!0,children:t.jsx(zf,{popStructure:s.popStructure,classApproval:s.classApproval,classInfluence:s.classInfluence,stability:s.stability,population:s.population,activeBuffs:s.activeBuffs,activeDebuffs:s.activeDebuffs,classWealth:s.classWealth,classWealthDelta:s.classWealthDelta,classShortages:s.classShortages,classIncome:s.classIncome,classExpense:s.classExpense,classLivingStandard:s.classLivingStandard,rebellionStates:s.rebellionStates,dayScale:1,onDetailClick:je,hideTitle:!0})}),t.jsx(ki,{isOpen:y,onClose:()=>w(!1),title:"",showHeader:!0,children:t.jsx(Pf,{resources:s.resources,rates:s.rates,market:s.market,epoch:s.epoch,title:"",showDetailedMobile:!0,onDetailClick:we=>{w(!1),s.setResourceDetailView(we)}})}),t.jsx(ki,{isOpen:E,onClose:()=>S(!1),title:` - ${Je.season}  ${Je.year}`,showHeader:!0,children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-gray-900/60 backdrop-blur-md rounded-lg border border-white/10 shadow-glass overflow-hidden",children:t.jsx($f,{daysElapsed:s.daysElapsed,season:Je.season,population:s.population,stability:s.stability,wealth:s.resources.silver,epoch:s.epoch})}),s.activeFestivalEffects&&s.activeFestivalEffects.length>0&&t.jsxs("div",{className:"bg-gray-900/60 backdrop-blur-md rounded-lg border border-ancient-gold/30 shadow-glass overflow-hidden",children:[t.jsx("div",{className:"px-3 py-2 border-b border-ancient-gold/20 bg-gradient-to-r from-ancient-gold/10 to-transparent",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{name:"Sparkles",size:14,className:"text-ancient-gold"}),t.jsx("span",{className:"text-sm font-bold text-ancient-gold",children:""})]})}),t.jsx("div",{className:"p-3 space-y-2 max-h-64 overflow-y-auto",children:[...s.activeFestivalEffects].sort((we,Ze)=>(Ze.activatedAt||0)-(we.activatedAt||0)).map((we,Ze)=>{const pt=Math.floor((we.activatedAt||0)/360)+1,xt=we.type==="permanent",jt=!xt&&s.daysElapsed-(we.activatedAt||0)>=(we.duration||360),le=`${we.id}-${Ze}`,Ie=k===le;return t.jsxs("div",{className:`p-2 rounded-lg border transition-all ${jt?"bg-gray-800/40 border-gray-600/30 opacity-60":xt?"bg-purple-900/20 border-purple-500/30":"bg-yellow-900/20 border-yellow-500/30"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${xt?"bg-purple-500/20":"bg-yellow-500/20"}`,children:t.jsx(j,{name:we.icon||"Star",size:14,className:xt?"text-purple-400":"text-yellow-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs font-semibold text-ancient-parchment truncate",children:we.name}),t.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded ${jt?"bg-gray-600/30 text-gray-400":xt?"bg-purple-500/30 text-purple-300":"bg-yellow-500/30 text-yellow-300"}`,children:jt?"":xt?"":""})]}),t.jsxs("div",{className:"text-[10px] text-ancient-stone mt-0.5",children:[" ",pt," "]})]}),t.jsx("button",{onClick:()=>M(Ie?null:le),className:"text-[10px] text-gray-400 hover:text-white transition-colors p-1 rounded-md",children:t.jsx(j,{name:Ie?"ChevronUp":"ChevronDown",size:12})})]}),Ie&&t.jsx("div",{className:"mt-2 pt-2 border-t border-white/10 text-xs text-gray-300",children:t.jsxs("p",{children:[t.jsx("strong",{children:""}),d(we.effects)]})})]},le)})})]}),(!s.activeFestivalEffects||s.activeFestivalEffects.length===0)&&t.jsxs("div",{className:"bg-gray-900/60 backdrop-blur-md rounded-lg border border-gray-700/30 shadow-glass p-4 text-center",children:[t.jsx(j,{name:"Calendar",size:24,className:"text-ancient-stone mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"text-xs text-ancient-stone",children:""}),t.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:""})]})]})}),t.jsx(Nj,{notifications:s.battleNotifications||[],onViewDetail:we=>{s.setBattleResult(we.result),c.dismissBattleNotification(we.id)},onDismiss:we=>{c.dismissBattleNotification(we)},onDismissAll:()=>{c.dismissAllBattleNotifications()}}),s.battleResult&&t.jsx(u4,{result:s.battleResult,onClose:()=>s.setBattleResult(null)}),s.stratumDetailView&&t.jsx(m4,{stratumKey:s.stratumDetailView,popStructure:s.popStructure,classApproval:s.classApproval,classInfluence:s.classInfluence,classWealth:s.classWealth,classWealthHistory:s.classWealthHistory,totalInfluence:s.totalInfluence,totalWealth:s.totalWealth,activeBuffs:s.activeBuffs,activeDebuffs:s.activeDebuffs,epoch:s.epoch,techsUnlocked:s.techsUnlocked,history:s.history,stability:s.stability,onClose:()=>s.setStratumDetailView(null)}),s.resourceDetailView&&t.jsx(h4,{resourceKey:s.resourceDetailView,resources:s.resources,market:s.market,buildings:s.buildings,popStructure:s.popStructure,wealth:s.classWealth,army:s.army,history:s.history,onClose:()=>s.setResourceDetailView(null),taxPolicies:s.taxPolicies,onUpdateTaxPolicies:s.setTaxPolicies,activeDebuffs:s.activeDebuffs}),s.populationDetailView&&t.jsx(x4,{isOpen:s.populationDetailView,onClose:()=>s.setPopulationDetailView(!1),population:s.population,maxPop:s.maxPop,popStructure:s.popStructure,history:s.history}),s.festivalModal&&t.jsx(g4,{festivalOptions:s.festivalModal.options,year:s.festivalModal.year,epoch:s.epoch,onSelect:be}),t.jsx(ki,{isOpen:!!s.currentEvent,onClose:()=>s.setCurrentEvent(null),title:"",showHeader:!0,preventBackdropClose:!0,showCloseButton:!s.currentEvent?.options?.length,preventEscapeClose:!!s.currentEvent?.options?.length,children:s.currentEvent&&t.jsx(G4,{event:s.currentEvent,onSelectOption:G,onClose:()=>s.setCurrentEvent(null),nations:s.nations})}),t.jsx(y4,{show:s.showTutorial,onComplete:P,onSkip:pe,onOpenWiki:()=>D(!0)}),t.jsx(S4,{show:T,onClose:()=>D(!1)}),z&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:()=>C(!1),"aria-hidden":"true"}),t.jsx("div",{className:"relative w-full max-w-lg z-10",children:t.jsx(Vj,{isAutoSaveEnabled:s.isAutoSaveEnabled,autoSaveInterval:s.autoSaveInterval,onToggleAutoSave:s.setIsAutoSaveEnabled,onIntervalChange:s.setAutoSaveInterval,lastAutoSaveTime:s.lastAutoSaveTime,onManualSave:bt,onManualLoad:ft,onAutoLoad:vt,autoSaveAvailable:tt,isSaving:s.isSaving,timeSettings:s.eventEffectSettings,onTimeSettingsChange:s.setEventEffectSettings,onClose:()=>C(!1)})})]})]})}window.addEventListener("error",s=>{console.error("Global error:",s.error)});window.addEventListener("unhandledrejection",s=>{console.error("Unhandled promise rejection:",s.reason)});const zd=document.getElementById("root");if(!zd)console.error("Root element not found!"),document.body.innerHTML='<div style="color: white; background: #1a1a1a; padding: 20px; font-family: sans-serif;"><h1></h1><p> index.html </p></div>';else try{Wx.createRoot(zd).render(t.jsx(F4,{})),console.log("App rendered successfully")}catch(s){console.error("Failed to render app:",s),zd.innerHTML='<div style="color: white; background: #1a1a1a; padding: 20px; font-family: sans-serif;"><h1></h1><p>'+s.message+"</p></div>"}
